"A Roiling Original" by Andrew Schultz

volume browsing and building notes

[This initial section is to try and organize the source code. Of course, with 2.7 million+ bytes of source, it's sort of tough to figure where to start. I can't promise that my code is super-readable, but I hope you find it interesting. It's been vetted all the way through, once.

Your favorite goofy random tables are in Roiling Random Text.i7x.

The nudges are in Roiling Nudges.i7x.

To search for your favorite goofy random tables, use ^blurb with a regular-expression search for editors that allow them, such as notepad++ in Windows, which is well worth a download for other reasons. You can also search for (bracket) then xx(first letter) with g = general (for example, blank command/wait responses) or m=manse (for example, comedians Gunter mentions) or v = gritty dialogue, and so forth. XX alone is a (poorly-named) variable in some places, but searching with the bracket and then XX will cover everything.

The new Inform IDE may allow you to search this way, too. For A Roiling Original, I stuck with 6G60. I had enough changes to deal with.

You can place a bracket before any of the other text chunks below to search. They're ordered in approximate priority I used and how often I searched for them.
TOA = the tables of big point scoring changes, table of * anagrams
TOH = table of hint logic
TMC = mega-chatter, which logs all the tables I search lists for
TAF = after-texts, which logs everything said after scanning stuff. Used to help clue the player if something is confusing, whether it's a question mark or vowels/consonants not lining up
TOR/TRB = reflexive blather, asking people about themselves (this is often a default)
TOD = default gen blather, about general nonsense e.g. a misunderstood request
DSB = default subject blather, about a specific topic. If an NPC has no entry, it goes to TOD.
TOB = read ALL the book titles!
TOSB = subj-blather, about a specific subject
TNW = messages for "you can't go that way"
TRE = table of readables
TSX  = differences between sexes
TSH = table of spechelp, so you can see the specialized help for an item
TDR = table of donereject, which gives specialized responses for if you try to flip something that doesn't need it any more
TQT = table of quip texts for GRetta, elMO, ELvira, GUnter. Separated with hyphen
TCO = table of conversations for GRetta, elMO, ELvira, GUnter. Separated with hyphen
DMT = dome tables, text from Demo Dome section

VRT = VOLUME RANDOM TEXT BLURB TABLES has the random text, though it's now in the new file.

TRIX=what I think are nice tricks that may be somewhere near the back of the Inform IDE documentation

Volumes are divided by region for the most part.
]

[Build this at your own risk. I think you'll get the general idea, but really, it takes 45 seconds to build. Plus you may need special versions of certain modules. They can be found at

http://code.google.com/p/shuffling-around/downloads/list

Glulx Text Effects.i7x
Flexible Windows.i7x

Are the two modified, and there may be a problem with naming Flexible Windows.i7x / Glulx Text Effects.i7x and a 'new' version. So if Inform says there are 2 of one table, you may be reading Glulx Text Effects.i7x and Glulx Text Effects - New.i7x. This is mostly my laziness. But until then I want this caveat in.

]

volume globals and initializers

include Roiling Random Text by Andrew Schultz.

include Roiling Nudges by Andrew Schultz.

include Roiling Mistakes by Andrew Schultz.

include Reactable Quips by Michael Martin.

include Quip-based Conversation by Michael Martin. [his extensions must be listed in this order]

include Basic Screen Effects by Emily Short.

include Glimmr Drawing Commands by Erik Temple.

include Glimmr Bitmap Font by Erik Temple.

include undo output control by Erik Temple.

include conditional undo by Jesse McGrew.

include Bypass Disambiguation by Climbing Stars.

include Large Game Speedup by Andrew Plotkin.

the story headline is "(or ailing) Squeeal! A Sequel!"

the story description is "Dear, Lo! Ordeal reload!"

release along with cover art.

the release number is 4.

[for the purposes of amusement, I'd like to list the release updates.
--Gasp! Rude Upgrades!]

chapter region specs

a region has a number called max-score. a region has a number called min-score.

a region has a number called poss-score. a region has a number called cur-score.

a region can be solved, unsolved, needed, shortcircuited, bypassed or frivolous. a region is usually needed.

a region has a table name called regtab.

a region has a table name called regana.

a region has a room called last-loc.

a region has a number called turns-spent. a region has a number called last-hint-turns. last-hint-turns of a region is usually 10.

a region can be unspoiled or spoiled. a region is usually unspoiled.

a region can be parsewrned. a region is usually not parsewrned.

a region has a list of things called item-list.

chapter region definition

Means Manse is an unsolved region. regtab of Means Manse is table of Means Manse nudges. regana of Means Manse is table of Means Manse anagrams. max-score of Means Manse is 14. min-score of Means Manse is 8. [giant pin, stable/stair, chimney/ramp, basement] [non-anagram = staple wall]

last-loc of Means Manse is Dusty Study. [needed for GT command]

Stores is an unsolved spoiled region. regtab of Stores is table of Stores nudges. regana of Stores is table of stores anagrams. max-score of stores is 11. min-score of Stores is 3. [k/n/tokers=3, 3 stores you don't need, sorbet also optional]

Troves is a region. regtab of Troves is table of troves nudges. regana of Troves is table of troves anagrams. max-score of Troves is 24. min-score of Troves is 17. [Pa Egg Pea / bee / lager, lobster/ME ARTS, , Trevis Vister/praise / DIVORCES, Sister Tressi/Blamer Balmer]

Routes is a region. regtab of Routes is table of routes nudges. regana of Routes is table of routes anagrams. max-score of Routes is 21. min-score of Routes is 19. [worst ad, without]

Oyster is a region. regtab of Oyster is table of oyster nudges. regana of Oyster is table of oyster anagrams. max-score of oyster is 40. min-score of oyster is 28. [scan cans = 1, revel/lever=1, shape heaps, waste/lance/wipes/ant subquest=5, tend dent, SPLAIN in the plains, up to 3 at start if don't use pills ASAP. There's also 1 extra given for not using the pills on Tortu. Non-anagram is chasing bad guys with haunter.]

Presto is a region. regtab of Presto is table of presto nudges. regana of Presto is table of presto anagrams. max-score of presto is 37. min-score of presto is 28. [hawt thaw, rom stick, lamb, tab, casserole, +1 point for Phooey, +1 point for Mazel Tov vs Won't, +1 point for avoiding hints]

Towers is a region. regtab of Towers is table of towers nudges. regana of towers is table of towers anagrams. max-score of towers is 50. min-score of towers is 25.
[Necessary points:
4 for regular warriors
1 for unripe ur-pine
1 for subtler
1 for admirer
1 for bonker, 1 for stinger
7 for basic stuff to get through the map
1 for weeds
2 for Dr Yow
1 for lone duck
1 for gifted/fidget
2 for a bot boat
1 for the palace] [1 NON-ANAGRAM for rapier repair]
[BONUS:
3 for the extra warriors
1 for not using x-ray vision to clear every guardian NON-ANAGRAM
1 for strudel
1 for fluster self rut
1 for the yurts
5 for the H/I beyond needing to clear the coastlines
2 for the ingrates/natives
1 for keycar wherever it appears
3 for the denim, sporties' ripostes and old ice
1 for the replay player
1 for tentative
1 for rewired (bot-boat)
1 for giving Tetris Sitter the flowerpot NON-ANAGRAM
3 for dying crocus/serpent/triste]

Otters is an unsolved region. regtab of Otters is table of otters nudges. regana of Otters is table of otters anagrams. max-score of otters is 30. min-score of otters is 24. [2 for the extra conjunction pair, 1 for dissing Elmer/Merle, 2 for all animals in both N and S animal regions, 1 for cinders]

Others is an unsolved region. regtab of Others is table of others nudges. regana of Others is table of others anagrams. max-score of Others is 42. min-score of others is 25. [only need 20 fruits, compass, icons, sonic, passport x 2. Best score is # of fruits + compass + icons/sonic + passport x 2 +1 for not using arugula. FRUI checks what fruit is where.]

Demo Dome is a frivolous region. regtab of Demo Dome is table of demo dome nudges.

a thing has a region called lreg. lreg of a thing is usually Means Manse.

chapter things

a thing can be reflexive, reflexed, vanishing, or nonreflexive. a thing is usually nonreflexive.

a thing can be ssok, ssno, ssblur or ssclear. a thing is usually ssok.

a thing can be unspoilable, any-spoilable, cheat-spoilable or parse-spoilable.

[the classification for this is pretty arbitrary, but basically: any-spoilable = 3 letter words, cheat-spoilable = if there are <=6 possibilities, and my script to decide if something's parse-spoilable does basic logic elimination and if only two letters are left, it's parse-spoilable.]

a thing can be attempted. a thing is usually not attempted.

a thing can be unscannable. a thing is usually not unscannable.

a thing can be prefigured or unfigured. a thing is usually unfigured.

a thing can be uncheated, cheatitemed, or cheathinted. a thing is usually uncheated.

a thing has text called a-text. a thing has text called b-text. a thing has text called parse-text.

a thing can be warpable. a thing is usually not warpable.

a thing can be LLPish. a thing is usually not LLPish.

a thing can be universal, useless, cluey, amusing, abstract, practical, or bounding. a thing is usually practical.

a thing can be flippable, auxiliary or uncluing or clue-used. a thing is usually uncluing.

a thing can be rayed. a thing is usually not rayed.

a thing can be examined or unexamined. a thing is usually unexamined.

chapter rooms

a room can be stairy. a room is usually not stairy.

a room can be outie or innie. a room is usually outie. [innie has WALL/WALLS for anagrams]

a room can be shunned. a room is usually not shunned. [GO TO ROOM won't work]

a room has a number called progval. progval of a room is usually 0. [again for GO TO ROOM, from progval of 2 to 1 is not valid]

a thing can be ghostly. a thing is usually not ghostly.

a person can be superchatty, subject-talking or terse. a person is usually subject-talking. [terse = they ignore general defaults like asking about Elvira, subject-talking = ignore silly details.]

a person can be terse-warned. a person is usually not terse-warned.

a person has a person called the chum. [a chum is someone whom they imitate in dialogue. For instance, Rand's chum is Leo. All warriors' chums are Andres. And so on.]

chapter portals

a portal is a kind of thing. a portal is usually fixed in place. a portal has a number called diffic.

the specification of portal is "A thing that allows you access to vulnerable areas of Yorpwald."

a portal can be fake-enterable. a portal is usually fake-enterable.

a portal can be maingame. a portal is usually maingame.

a portal can be lumpable. a portal is usually lumpable.

a portal can be checkedoff or available. a portal is usually available.

a portal can be enter-clued. a portal is usually not enter-clued.

a portal has a region called a go-region.

definition: a portal is slick if its diffic is 11 or less.

instead of taking a portal:
	say "You try taking the portal in the entering sense.";
	try entering the noun instead;

for writing a paragraph about a lumpable portal (called ptl) :
	say "Where [if number of lumpable portals in location of player > 1]stores[else]a store[end if] once sat, you can now enter [list of lumpable portals in location of the player].";
	now all lumpable portals in location of the player are mentioned;
	continue the action;

to say fill-in-here: say "!!!!!!" [this is just so I can compile and concentrate on other things]

chapter guardians

a guardian is a kind of person. a guardian is usually vanishing. a guardian can be passtried. a guardian is usually not passtried. a guardian can be clueneedy. a guardian is usually not clueneedy. a guardian can be unprodded or prodded. a guardian is usually unprodded. a guardian can be plurtry. a guardian is usually not plurtry.

a guardian has a person called other-g. The other-g of a guardian is usually dreads adders.

a guardian can be prevseen. a guardian is usually not prevseen. a guardian can be prevtaunt. a guardian is usually not prevtaunt.

a guardian has text called retrytext.

a guardian has a room called gualoc.

a guardian has a direction called guadir.

a guardian can be grey, blue, red, white or purple. a guardian is usually purple. [blue guardians are one minimal path. red are another. white = unnecessary, purple = necessary. Color blends! Also, grey is for Lars Eede/Elsa Erde.]

check objasking a guardian about a guardian (this is the guardian general chat rule):
	if noun is serpent, continue the action;
	if noun is curst palace, say "Nobody will ever rebuild it, but we still have to prevent others from doing so. For their own safety." instead;
	if noun is Elvira, say "Well, her choice to send [if noun is plural-named]us[else]me[end if] and be [if noun is plural-named]ourselves[else]me[end if]." instead;
	if noun is second noun, continue the action;
	if second noun is in location of player:
		say "Nothing. Guess the guardians aren't going to rat on each other." instead;
	if second noun is in lalaland, say "Threats or reminiscing won't get you anywhere." instead;
	say "Your grilling runs up against plausible deniability. Who? What? Where?" instead;

the specification of guardian is "A person that blocks your way through the towers area until you describe him correctly."

after doing something with a guardian:
	if noun is organised or noun is hostile-is-he lot:
		set the pronoun them to noun;
	else:
		set the pronoun it to noun;
	continue the action;

chapter rules on stub

to rulesOn: [used to turn rules on at the very start of play]
	(- RulesOnSub(); -)

every turn when strip of profits is visited (this is the region-hint on no score rule):
	if mrlp is means manse and Gunter is in lalaland:
		increment turns-spent of mrlp;
	else if mrlp is unspoiled:
		increment turns-spent of mrlp;
	if cur-score of mrlp is 0 and mrlp is unspoiled:
		if turns-spent of mrlp > last-hint-turns of mrlp:
			if the remainder after dividing turns-spent of mrlp by 10 is 0:
				say "It seems you're stuck a bit here. Would you like a hint as to what this region is about?";
				if the player yes-consents:
					now mrlp is spoiled;
					choose row with hint-reg of mrlp in table of region-spoilers;
					say "This region focuses on [spoil-expl entry].";
					now block-north is true;
				otherwise:
					say "Ok--I'll ask again in a few moves.";
					now last-hint-turns of mrlp is turns-spent of mrlp;
[				reject the player's command;]

before going north when block-north is true:
	do nothing instead; [?! hack to get rid of z.z.z.z. and answer n]

the player is terse.

an animal is usually terse.

a hintpastry is a kind of thing. a hintpastry can be heated. a hintpastry is usually not heated. a hintpastry is usually edible.

a hintpastry has a number called deliciousness.

after taking a hintpastry:
	increase deliciousness of noun by 10;
	continue the action;

when play begins (this is the disambig-pastry rule) :
	let tastee be 1;
	repeat with HP running through hintpastries:
		now deliciousness of HP is tastee;
		increment tastee;

understand "pastry" as a hintpastry.

check objasking about a hintpastry when mrlp is towers:
	if noun is Dr Yow or noun is agnostic, say "You might get a lecture about all the gross chemicals in there." instead;
	if second noun is visible:
		say "You offer the hint-pastry as a gift, instead.";
		try giving the second noun to the noun;

the specification of a hintpastry is "A hintpastry, when heated, lets you see how a thing/item should be described."

a fruit is a kind of thing. description of a fruit is "[if the item described is plural-named]They're[else]It's[end if] not heinously bruised or rotting, or anything, so Curtis probably won't mind it."

a fruit has a room called frroom.

a fruit can be hintable. a fruit is usually hintable.

after doing something with a fruit (this is the limes can sensibly be it or them rule) :
	set the pronoun it to the noun;
	continue the action;

the specification of fruit is "Something that Curtis will take from you, and you may or may not get a coin back."

the can't take scenery rule is not listed in any rulebook.

The describe what's on scenery supporters in room descriptions rule is not listed in any rulebook.

to say email:
	say "blurglecruncheon@gmail.com";

check taking a fruit (this is the probably archaic debug fruit-flips in case rule) :
	say "Oops! You should've taken this fruit when you flipped it. [bug-report]" instead;

instead of waking:
	say "Weak!" instead;

yes-no-warn is a truth state that varies.

Instead of saying no:
	if block-north is true:
		do nothing;
	repeat through table of yesnoes:
		if the-person entry is in location of player:
			if there is a nosaying entry, say "[nosaying entry]" instead;
	if mrlp is troves, say "Negative thinking isn't the way to the top, here!" instead;
	say "[randbla]";
	rhet-q;

Instead of saying yes:
	if block-north is true:
		do nothing;
	repeat through table of yesnoes:
		if the-person entry is in location of player:
			if there is a yessaying entry:
				say "[yessaying entry]" instead;
	if mrlp is troves:
		say "It's not enough to have positive thinking! YOU MUST HAVE PRODUCTIVE POSITIVE THOUGHTS!" instead;
	say "[randbla]";
	rhet-q;

to rhet-q:
	if yes-no-warn is false:
		say " (Rhetorical questions can be safely ignored, and typing No/Yes will give random silly responses.)[line break]";
		now yes-no-warn is true;
	else:
		say "[line break]";

table of yesnoes
the-person	yessaying	nosaying
Elvira	"Don't give in like that!"	"Elvira smirks and shakes her head. Your Just Say No would be no jaunty SOS."
Gunter	"Agreeing with Gunter probably wouldn't get him to leave."	"You can't out-argue Gunter or change his mind."
old giant	"Passively agreeing with him might just keep things going ad infinitum. You need to find the right way to ride out the conversation."	"Disagreeing with the giant might make him too mad. You need to find the right way to ride out the conversation."
macks	"They're so totally wrong, even a sarcastic yes would be just bad."	"Their arguments are too well-constructed for such a simple reject."
Ed Riley	"He doesn't look terribly agreeable."	"Too direct. He'd just reject you to show you he's no YIELDER."

throw-warn is a truth state that varies.

pun-warn is a truth state that varies.

instead of eating a fruit:
	if noun is lemons or noun is melon:
		say "A [if noun is lemons]lemon[else]melon[end if]? No meal!" instead;
	say "[one of]You shouldn't eat into Curtis's profits. [or][stopping]";
	if pun-warn is false:
		ital-say "if you try again, you'll get a bad anagram pun.";
		now pun-warn is true instead;
	else:
		say "No fruit. Ruf it! On! ([one of]Told you so[or]Yup. Still here[stopping].)";

an undesc is a kind of thing. description of undesc is "[bug-report]";

bean-smell is a truth state that varies.

do-i-chat is a truth state that varies.

power-back is a truth state that varies.

every-turn-hint is a truth state that varies. every-turn-hint is false.

Procedural rule: ignore the print final score rule.

check examining player when mrlp is demo dome:
	say "You look just fine. You don't need to be dressed too fancy for this." instead;

description of player is "As every[if player is female]wo[end if]mannish as ever[if player wears star], and wearing a spiffy star, too[end if]. [one of]You'll never be a [if player is female]Fine Nefi Fein[else]Hunk Kuhn or Icon Nico[end if][one of], or even a or Dreamboat [if player is male]Brad Mateo[else]Amber Dato[end if][or][stopping], and you don't want to be. Because i[or]I[stopping]t's the power inside you that's important[if mrlp is otters and power-back is false]. Well, the power you may need to regain[end if]."

does the player mean examining the player when mrlp is troves: it is very likely.

check examining the player when mrlp is troves:
	say "[one of]You look into your thoughts, feelings and beliefs. You realize they cannot possibly be as pertinent as whatever Peg A. Page has to say. So you defer to her knowledge[or]Your thoughts lead back to the good book[stopping].[line break]";
	try examining Pa Egg Pea instead;

chapter miscellaneous neat includes

wfak-yet is a truth state that varies.

to say wfak: [this is so I can skip through PRESS ANY KEY while testing]
	if debug-state is false:
		if wfak-yet is false:
			ital-say "when the game pauses without a cursor, it means you need to press any key to continue. This warning will not appear again.";
			now wfak-yet is true;
		wait for any key;

section graphic files

figure graflogo-1 is the file "letters-settler-1.png"

figure graflogo-2 is the file "letters-settler-2.png"

figure yorpwald-1 is the file "yorpwald-1.png"

section external files for testers

the file of roilhints is called "roilhints".

the file of debuggery is called "debug".

section glulxy adjustments

use DICT_WORD_SIZE of 12

[We need all 12 letters. For instance, some adverbs get to 12 and, okay, those, you can count the last two letters. But BLACKBERRIES is 12.]

section compiler non-syntax section

[This is the main section to edit if I get a compiler error not due to syntax. With the 6.33 compiler, Inform should be a bit more descriptive, but just in case, I want to write this in. If something fails, increase from ab0* a(b+1)0*. Or b+2 if I did a lot of work, or whatever.]

use MAX_DICT_ENTRIES of 3000.

use MAX_OBJECTS of 930.

use MAX_SYMBOLS of 140000.

use SYMBOLS_CHUNK_SIZE of 15000.

use ALLOC_CHUNK_SIZE of 37500.

use MAX_VERBSPACE of 10240.

use MAX_ACTIONS of 635.

use MAX_VERBS of 680.

Use MAX_INDIV_PROP_TABLE_SIZE of 100000.

use MAX_NUM_STATIC_STRINGS of 90000.

use MAX_PROP_TABLE_SIZE of 560000.

use MAX_STATIC_DATA of 750000.

Use MAX_LABELS of 16000.

section compiler non-syntax section - not for release

[there shouldn't be much difference but it's worth checking just because]

use MAX_VERBS of 700.

use SYMBOLS_CHUNK_SIZE of 16000.

use MAX_OBJECTS of 940.

use MAX_PROP_TABLE_SIZE of 570000.

section debug on - not for release

[needs to be near the top--well, could place it before all other when play begins rules]

when play begins (this is the debug by default when debugging rule) :
	now bugsquash is true; [be harsh to myself in programmer testing. Sniff out any bugs and kill walkthrough tests.]
	now debug-state is true;

[every turn when player is in dusty study and Gunter is off-stage and debug-state is true:
	say "Found: [stuff-found].";]

section test extensions - not for release

Include Direction Response Testing by Andrew Schultz.

include Property Checking by Emily Short.

include Object Response Tests by Juhana Leinonen.

section screenreading and censoring

screenread is a truth state that varies.

when play begins (this is the screenread gender swears and precursor rule) :
	if debug-state is false:
		say "A Roiling Original has some features that can be adjusted for screen readers. Are you using a screen reader?";
		if the player direct-consents:
			say "Accessibility is turned on. It is something I had trouble meaningfully planning and testing, so please let me know at [email] if you feel it could be improved. Thank you!";
			now screenread is true;
			now setspace is true;
		say "You can alternate accessibility mode with the ACCESS command.[paragraph break]Also, A Roiling Original contains some minor profanity. Unfortunately, it can't wipe out some implied profanity that results, but nothing is intended to be malicious. Disable profanity?";
		if the player direct-consents:
			now censor-minor is true;
		say "Also, this is not critical to game mechanics and only gives minor differences, but you can play as a male (M) or female (F) -- case insensitive. Which will it be?";
		let cholet be 0;
		while cholet is irrelevant:
			let cholet be the chosen letter;
			if cholet is irrelevant:
				say "M or F, please.";
		if cholet is 70 or cholet is 102:
			choose-female;
		else:
			choose-male;
		say "And one final thing: A Roiling Original is a sequel to Shuffling Around. It's strongly recommended you play Shuffling Around first, as it is shorter and provides back story to ARO, but it's not critical. If, in any case, you'd like a recap--which also immediately spoils ARO's mechanic--say yes now.";
		if the player direct-consents:
			say "Shuffling Around was about changing...things...to other things. Your tagged gadget helped you with the tougher ones, like the drainage that became a gardenia, and you remember the magenta nametag that became the gateman who introduced you to Yorpwald. After solving the Forest, Sortie and Metros in the stores in the Trips Strip, you tackled Red Bull Burdell and earned your Means Manse as thanks.[paragraph break]You remember the things you did, but do you need to remember the word?";
			if the player consents: [start of game]
				say "Things were, well, anagrams. Store F became the forest. Store I, the sortie. Store M, the metros. You were particularly proud of changing the liches to a chisel and the drapes to a spread.";
			else:
				say "OK, let's get to it!";
		else:
			say "OK, let's get to it!";
	else: [force certain values]
		choose-male;

to general-gender-towers:
	if hostile-is-he lot is not in lalaland and lois the hostile is not in lalaland:
		now hostile-is-he lot is off-stage;
		now lois the hostile is off-stage;
	if lars eede is not in lalaland and elsa erde is not in lalaland:
		now lars eede is off-stage;
		now elsa erde is off-stage;
	if luc sym is not in lalaland and ms lucy is not in lalaland:
		now luc sym is off-stage;
		now ms lucy is off-stage;
	if mrlp is towers, reposition-guardians;

to choose-female:
	now the player is female; [begin intro changes]
	now i trash his art is off-stage;
	now er trash is part of the dope op-ed;
	now Pat is female; [begin routes changes]
	now the admirer is male; [begin towers changes]
	general-gender-towers;
	now agnostic is female;
	now Dr Yow is female;
	now Elsa Erde has Reed's Ale;
	now Dr Lola is part of droll dollar; [begin others changes]
	now coin-person is Dr Lola;
	now Lord Al is off-stage;
	now Red Rat is off-stage;
	now Dr Tera is in scape space;
	now greedy-person is Dr Tera;

to choose-male:
	now the player is male; [begin intro changes]
	now i trash his art is part of the dope op-ed;
	now er trash is off-stage;
	now Pat is male; [begin routes changes]
	now the admirer is female; [begin towers changes]
	general-gender-towers;
	now agnostic is male;
	now Dr Yow is male;
	now Lars Eede has Reed's Ale;
	now Lord Al is part of droll dollar; [begin others changes]
	now coin-person is Lord Al;
	now Dr Lola is off-stage;
	now Red Rat is in scape space;
	now Dr Tera is off-stage;
	now greedy-person is Red Rat;

to decide whether (cho - a number) is irrelevant:
	if cho is 70 or cho is 102, decide no;
	if cho is 77 or cho is 109, decide no;
	decide yes;

section gender specific stubs and/or silliness

to say a-b:
	say "[if player is male]Abe[else]Bea[end if]"

to say d-t:
	say "[if player is male]Tod[else]Dot[end if]"

to say n-t:
	say "[if player is male]Nate[else]Tena[end if]"

to say fs: [Mr/Mrs]
	say "[if player is male][else]s[end if]";

to say i-n:
	say "[if player is male]Ian[else]Nia[end if]"

to say m-e:
	say "[one of]Me[or][']Em[in random order]"

to say mle:
	say "[one of]Mel[or]Lem[in random order]"

to say sic: [for when I totally have to bail out]
	if player is female, say " (sic) "

to say sim:
	say "[if player is male]Simeon[else]Simone[end if]"

to say toti:
	say "[if player is male]Tino[else]Toni[end if]"

to say tt:
	say "[if player is male]Tio[else]Toi[end if]"

to say ta:
	say "[if player is male]Tai[else]Tia[end if]"

[this is strictly speaking bad coding but "of x" and "of y" got tedious]

to say he-she:
	say "[if player is male]he[else]she[end if]"

to say him-her:
	say "[if player is male]him[else]her[end if]"

to say his-her:
	say "[if player is male]his[else]her[end if]"

to say he-she-c:
	say "[if player is male]He[else]She[end if]"

to say him-her-c: [unused]
	say "[if player is male]Him[else]Her[end if]"

to say his-her-c:
	say "[if player is male]His[else]Her[end if]"

to say mrmaam:
	say "[if player is female]ma'am[else]mister[end if]";

section redact cussing

censor-minor is a truth state that varies.

to say a-word:
	say "[if censor-minor is true]---[else]ass[end if]";

to say a-word-u:
	say "[if censor-minor is true]---[else]Ass[end if]";

to say crap:
	say "[if censor-minor is true]----[else]crap[end if]";

to say crap-u:
	say "[if censor-minor is true]----[else]Crap[end if]";

to say d-word:
	say "[if censor-minor is true]----[else]damn[end if]";

to say d-word-u:
	say "[if censor-minor is true]----[else]Damn[end if]";

to say dick:
	say "[if censor-minor is true]----[else]dick[end if]";

to say dick-u:
	say "[if censor-minor is true]----[else]Dick[end if]";

[these 'say' the same thing but I wanted to put them here so my spell- and anagram-checker didn't go off-base. They're a bit too strong of swears.]

to say f-w:
	say "****";

to say s-w:
	say "****";

to say t-w:
	say "****";

chapter testing stuff I can't quite NFR

section scos

section sss

sss is a truth state that varies.

every turn when sss is true (this is the show blues rule): [this shows everything that looks odd or can be hinted without the player having to type it]
	if player has settler and sss is true:
		append ">[the player's command]: [no line break]" to the file of debuggery;
		show-bluable;
	continue the action;

section silly variables

hint-to-file is a truth state that varies.

hint-to-display is a truth state that varies.

scams is a truth state that varies.

ff is a truth state that varies. [flip freeze disabled in release mode]

section scam rule [referred to while scoring]

every turn when scams is true (this is the scam rule):
	if mrlp is routes:
		now player has snoop spoon;
		try examining snoop spoon;
	else if mrlp is troves:
		now player has truffle;
		try eating truffle;
	else if mrlp is otters:
		now player has cinders;
		try discerning cinders;
	else if mrlp is presto:
		now player has crust;
		try eating crust;
	else if mrlp is oyster:
		now player has pills;
		try spilling pills;
	else if mrlp is others:
		if player has arugula:
			say "Force feeding you arugula.";
			now can-guru is true;
			now arugula is in lalaland;
		else if can-guru is false:
			now can-guru is true;
			say "Giving you GURU ability.";
	else if mrlp is demo dome:
		say "No cheat items, so I'm just giving hints.";
		try requesting the score instead;

section long form of verbs

Include (-
Replace LanguageVerb;
-) after "Definitions.i6t".

Include (-
[ LanguageVerb i;
	switch (i) {
	  'i//','inv','inventory':
			   print "take inventory";
	  'a//':   print "ask about";
	  'l//':   print "look";
	  'x//':   print "examine";
	  'gt//':   print "go to";
	  'r//':   print "read";
	  'z//':   print "wait";
	  default: rfalse;
	}
	rtrue;
];
-) after "Language.i6t".

section subverting undos and tracking your death

Include (-

	Array have_died_flag --> 1;
	Global cur_undo = 1;

-) after "Definitions.i6t".

To protect the have-died flag from undo: (- @protect have_died_flag 4; @protect cur_undo 4; -).

To decide whether the have-died flag is (T - a truth state): (- (have_died_flag-->0 == {T}) -).

To --/-- now the have-died flag is (T - a truth state): (- have_died_flag-->0 = {T}; -).

section versioning modification

Include (-

[ ANNOUNCE_STORY_FILE_VERSION_R ix;
	if (actor ~= player) rfalse;
	Banner();
	IFID();
	@gestalt 1 0 ix;
	print "Interpreter version ", ix / $10000, ".", (ix & $FF00) / $100,
	".", ix & $FF, " / ";
	@gestalt 0 0 ix;
	print "VM ", ix / $10000, ".", (ix & $FF00) / $100, ".", ix & $FF, " / ";
	print "Library serial number ", (string) LibSerial, "^";
	#Ifdef LanguageVersion;
	print (string) LanguageVersion, "^";
	#Endif; ! LanguageVersion
];

-) instead of "Announce Story File Version Rule" in "Glulx.i6t".

The IFID Header is a text that varies. The IFID Header is "Game identification number".

Include (-

[ RAW ix;
	for (ix=6: ix <= UUID_ARRAY->0: ix++) print (char) UUID_ARRAY->ix;
];

-).

Include (-

[ IFID;
	PrintText((+ IFID Header +));
	print ": ";
	RAW();
	print "^";
];

-).

To say ifid: (- IFID(); -).

Report requesting the story file version (this is the manual extra listings rule):
	say "Extensions used listed by author:[line break]";
	say "[b]Andrew Plotkin: [r]Large Game Speedup[line break]";
	say "[b]Emily Short:[r] Basic Screen Effects and, for testing, the very handy Property Checking[line break]";
	say "[b]Erik Temple:[r] Glimmr Drawing Commands (modified) [line break]";
	say "[b]Jon Ingold:[r] Flexible Windows 12/110611[line break]";
	say "[b]Juhana Leinonen:[r] for testing, the very handy Object Response Tests[line break]";
	say "[b]Michael Martin:[r] Quip-Based Conversation and Reactable Quips [line break]";
	say "[b]Andrew Schultz:[r] for testing, Direction Response Testing[line break]";
	say "Other coding listed by author:[line break]";
	say "[b]Andrew Plotkin[r] (misc cool I6 stuff), [b]Climbing Stars[r] (banner code), [b] Eu (death tracking), [b]Wade Clarke[r] (this listings rule) [line break]".

chapter allow me to trace

Include (-

[ testcommandnoun obj o2;
	switch (scope_stage) {
		1: rtrue; ! allow multiple objects
		2: objectloop (obj)
			if ((obj ofclass Object) && (obj provides KD_Count))
				PlaceInScope(obj, true);
		3: print "There seems to be no such object anywhere in the model world.^";
	}
];

{-testing-command:abstract}
	* scope=testcommandnoun 'to' scope=testcommandnoun -> XAbstract;
{-testing-command:actions}
	*                                           -> ActionsOn
	* 'on'                                      -> ActionsOn
	* 'off'                                     -> ActionsOff;
{-testing-command:gonear}
	* scope=testcommandnoun                     -> Gonear;
{-testing-command:purloin}
	* scope=testcommandnoun                     -> XPurloin;
{-testing-command:random}
	*                                           -> Predictable;
{-testing-command:relations}
	*                                           -> ShowRelations;
{-testing-command:rules}
	*                                           -> RulesOn
	* 'all'                                     -> RulesAll
	* 'on'                                      -> RulesOn
	* 'off'                                     -> RulesOff;
{-testing-command:scenes}
	*                                           -> ScenesOn
	* 'on'                                      -> ScenesOn
	* 'off'                                     -> ScenesOff;
{-testing-command:scope}
	*                                           -> Scope
	* scope=testcommandnoun                     -> Scope;
{-testing-command:showheap}
	*                                           -> ShowHeap;
{-testing-command:showme}
	*                                           -> ShowMe
	* scope=testcommandnoun                     -> ShowMe;
{-testing-command:showverb}
	* special                                   -> Showverb;
{-testing-command:test}
	*                                           -> TestScript
	* special                                   -> TestScript;
{-testing-command:tree}
	*                                           -> XTree
	* scope=testcommandnoun                     -> XTree;

-) instead of "Grammar" in "Tests.i6t".

chapter charnum

to say character number (N - a number): (- print (char) {N}; -) [unused]

chapter save-present

to save-present-input: (-
	if (verb_word ~= AGAIN1__WD)
		for (i=0 : i<INPUT_BUFFER_LEN : i++) buffer3->i = buffer->i;

	if (usual_grammar_after == 0) {
		j = verb_wordnum;
		i = RunRoutines(actor, grammar);
		#Ifdef DEBUG;
		if (parser_trace >= 2 && actor.grammar ~= 0 or NULL)
			print " [Grammar property returned ", i, "]^";
		#Endif; ! DEBUG

		if ((i ~= 0 or 1) && (VM_InvalidDictionaryAddress(i))) {
			usual_grammar_after = verb_wordnum; i=-i;
		}

		if (i == 1) {
			parser_results-->ACTION_PRES = action;
			parser_results-->NO_INPS_PRES = 0;
			parser_results-->INP1_PRES = noun;
			parser_results-->INP2_PRES = second;
			if (noun) parser_results-->NO_INPS_PRES = 1;
			if (second) parser_results-->NO_INPS_PRES = 2;
			rtrue;
		}
		if (i ~= 0) { verb_word = i; wn--; verb_wordnum--; }
		else { wn = verb_wordnum; verb_word = NextWord(); }
	}
	else usual_grammar_after = 0;
-)

chapter pronoun setting

[This allows us to refer to a plural noun as it/them. Thanks to Climbingstars!]

To set the/-- pronoun it to (O - an object): (- LanguagePronouns-->3 = {O}; -).
To set the/-- pronoun him to (O - an object): (- LanguagePronouns-->6 = {O}; -).
To set the/-- pronoun her to (O - an object): (- LanguagePronouns-->9 = {O}; -).
To set the/-- pronoun them to (O - an object): (- LanguagePronouns-->12 = {O}; -).

chapter rules-switch

to force-rules: [again this is simple I6 stuff so that I can capture errors from When Play Begins]
	(- debug_Rules = 1; -)

to force-all-rules:
	(- debug_Rules = 2; -)

chapter glulx header

when play begins (this is the top window rule):
	d "Starting graphics stuff.";
	open up the graphics-window;
	change the current graphics window to the graphics-window;
	change the current background-color to (R 0 G 0 B 0);
	change the current foreground-color to (R 255 G 0 B 0);
	d "Ending graphics stuff.";

The graphics-window is a graphics g-window spawned by the main-window. the position is g-placeabove. The scale method of the graphics-window is g-proportional. The measurement of the graphics-window is 10.

chapter full-monty

questions-not-flagged is a truth state that varies.

space-warned is a truth state that varies;

to say full-monty of (myobj - a thing):
	let A be indexed text;
	let C be indexed text;
	let D be 13;
	let qnf be questions-not-flagged;
	let sw be space-warned;
	if cheat-on is true:
		let A be "[b-text of myobj]";
	otherwise:
		let A be "[a-text of myobj]";
	if number of characters in A > 15:
		say "Something went wrong. [myobj] had a [number of characters in A]-letter scan. Let me know what you were doing. [bug-report]";
		continue the action;
	repeat with CC running from 1 to the number of characters in A:
		let C be character number CC in A;
		change current foreground-color to (R 128 G 128 B 128);
		if C is "?": [ambiguous due to conflicts in description]
			change current foreground-color to (R 192 G 192 B 192);
			if questions-not-flagged is false:
				now qnf is true;
		if C is "*": [word spaces]
			change current foreground-color to (R 0 G 0 B 0);
			if space-warned is false:
				now sw is true;
		if C is "R" or C is "r": [consonant no match]
			change current foreground-color to (R 210 G 0 B 0);
		if C is "Y" or C is "y":
			change current foreground-color to (R 210 G 210 B 0);
		if C is "O" or C is "o": [y no match]
			change current foreground-color to (R 210 G 105 B 0);
		if C is "P" or C is "p": [consonant match]
			change current foreground-color to (R 210 G 0 B 210);
		if C is "G" or C is "g": [vowel match]
			change current foreground-color to (R 0 G 210 B 0);
		if C is "B" or C is "b": [y match]
			change current foreground-color to (R 168 G 42 B 42);
		draw a rectangle (current foreground-color) in current graphics window at D by 12 with size 12 by 12;
		increase D by 13;
	repeat with CC running from 1 + the number of characters in A to 13:
		change current foreground-color to (R 128 G 128 B 128);
		draw a rectangle (current foreground-color) in current graphics window at D by 12 with size 12 by 12;
		increase D by 13;
	draw a rectangle (R 255 G 255 B 255) in current graphics window at 13 by 30 with size 220 by 20;
	paint bitmap text (color g-Black) of "[myobj]: cheat [on-off of cheat-on]" in current graphics window at 13 by 30 using Glimmr C&C with size 1;
	say "[spacies of A]";
	if parse-now is true and cheat-on is true:
		say ". You figure out what you can: [parse-text of myobj]";
	say "[if qnf is true and questions-not-flagged is false]--hmm. Some of the spaces are blinking as if the settler couldn't tell what letters should be used. Maybe there are two ways to wangle things, or maybe the ambiguity is an extra clue. You could try re-scanning in non-cheat mode[end if][if sw is true and space-warned is false and myobj is not curst palace]. The black cells would indicate spaces, you guess[end if]";
	if qnf is true:
		if questions-not-flagged is false:
			pad-rec-q "question mark";
	now space-warned is sw;
	now questions-not-flagged is qnf;

the question mark is a thing. the question mark is undesc. [question mark is for hinting ONLY]

to say spacies of (INTE - indexed text):
	if setspace is false and screenread is false:
		say "[INTE]";
		continue the action;
	let chrs be the number of characters in INTE;
	repeat with chtemp running from 1 to chrs:
		let THISCHAR be character number chtemp in INTE;
		if THISCHAR is "R":
			say "[if screenread is true]Red[else]R[end if]";
		else if THISCHAR is "Y":
			say "[if screenread is true]Yellow[else]Y[end if]";
		else if THISCHAR is "G":
			say "[if screenread is true]Green[else]G[end if]";
		else if THISCHAR is "P":
			say "[if screenread is true]Purple[else]P[end if]";
		else if THISCHAR is "O":
			say "[if screenread is true]Orange[else]O[end if]";
		else if THISCHAR is "B":
			say "[if screenread is true]Brown[else]B[end if]";
		else if THISCHAR is "*":
			say "[if screenread is true]Asterisk[else]*[end if]";
		else if THISCHAR is "?":
			say "[if screenread is true]Question mark[else]?[end if]";
		if chtemp < chrs:
			say " ";

chapter hint-every-turn

hint-to-file is a truth state that varies. hint-to-file is false.

hint-to-display is a truth state that varies. hint-to-display is false.

every turn (this is the hint flags checkoff rule):
	if hint-to-file is true or hint-to-display is true:
		d "[hint-to-file] to file [hint-to-display] to display.";
		now auto-hint-proc is true;
		try hinting;
		now auto-hint-proc is false;

auto-hint-proc is a truth state that varies.

chapter transcripting

Include (-
[ CheckTranscriptStatus;
#ifdef TARGET_ZCODE;
return ((0-->8) & 1);
#ifnot;
return (gg_scriptstr ~= 0);
#endif;
];
-).

To decide whether currently transcripting: (- CheckTranscriptStatus() -)

[thanks to Zarf for the above code. It helps a tester make sure they're testing after their first comment.]

report switching the story transcript on:
	if currently transcripting:
		say "Thanks for doing this! Email can go to [email].";

check quitting the game when currently transcripting:
	say "Thanks for taking a transcript. Please send it to [email] and I'll be grateful. Thanks!";

chapter hashing

[the hashes are set so that each word/anagram should have a unique value based on its letters. They do, mostly.]

Table of Hashcodes
Letter(indexed text)	Code
"a"	2187818
"b"	18418905
"c"	19005585
"d"	21029089
"e"	127806109
"f"	26514896
"g"	32599702
"h"	37282299
"i"	44992846
"j"	48960525
"k"	52933178
"l"	53813839
"m"	64075153
"n"	68907508
"o"	74352577
"p"	81465959
"q"	84405617
"r"	85323803
"s"	96273966
"t"	103110018
"u"	105105807
"v"	107164820
"w"	107934773
"x"	112768081
"y"	122359252
"z"	122969618

to decide what indexed text is the filtered name of (t - a value of kind K):
	let s be t in lower case;
	replace the regular expression "<^abcdefghijklmnopqrstuvwxyz>" in s with "";	[ a-z would include accented characters]
	decide on s;

to decide which number is the hash of (t - a value of kind K):
	let s be the filtered name of t;
	let hash be 0;
	repeat with c running from 1 to the number of characters in s:
		increase hash by the Code corresponding to a Letter of character number c in s in the Table of Hashcodes;
	decide on hash;

when play begins (this is the intro-hashes rule):
	let wnum be 0;
	repeat with QQ running through regions:
		if QQ is not demo dome:
			repeat through regana of QQ:
				if the-from entry is uncluing:
					now the-from entry is flippable;
				if there is no hashkey entry or hashkey entry is 0:
					now hashkey entry is the hash of the printed name of the-from entry;
					d "full name [the printed name of the-from entry] ~ [the-to entry]. Hash = [hashkey entry].[line break]";

chapter undo allows

Undo-code is a number variable. Undo-code is 0.

redo-alert is a truth state that varies.

currently-undoing is a truth state that varies.

report undoing an action:
	if mrlp is towers and can-see-map:
		draw-my-loc;
	now currently-undoing is true;
	say "[randbla][line break]";
	now currently-undoing is false;

to say eh-eh:
	now currently-rejecting is true;
	say "A booming voice yells '[randbla]!' ";
	now currently-rejecting is false;

currently-rejecting is a truth state that varies.

rule for deciding whether to allow undo:
	if hint-to-file is true:
		append "UNDO: (no hint)[line break]" to the file of roilhints;
	if undo is prevented and scams is false:
		if undo-code is -1:
			say "Don't worry. There's no wrong way through dialogues, nothing disappears, and important stuff is recorded in your pedanto-notepad.";
		if undo-code is 1:
			say "[eh-eh]Ucky, yuck, you think at the biology behind the crust coming back up your throat. For your own health, see. That's something not even a tree eater could re-eat.";
		if undo-code is 2:
			say "[eh-eh]I can't let that un-see ensue.";
		if undo-code is 3:
			say "[eh-eh]The sugared sea-drug has you. You think you can use its insights, but it will subtly decrease the pleasure you could've gotten figuring things out on your own.";
		if undo-code is 4:
			say "[eh-eh]You can't undo learning such knowledge.";
		if undo-code is 5:
			say "[eh-eh]You probably don't need to revisit that headache anyway.";
		if undo-code is 6:
			say "[eh-eh]No ops can bring that spoon back.";
		if undo-code is 7:
			say "[eh-eh]You think, I'd reuse residue, then seem to hear 'Sure! Die!'";
		ital-say "undo is only denied if you've used a cheat item, so don't worry. You can undo any death, and the game should not become unwinnable.";
		deny undo;
	else:
		if undo-code is 8:
			say "You could've sworn you heard the trolls mumble something about how they could probably kick your butt at computer games, too, and save states and do-overs were for wimps.";
		else if undo-code is 9:
			now the have-died flag is true;
		else if undo-code is 10:
			ital-say "the 'you died' message is random--but there are [number of rows in table of death messages]. So if you're hunting them, it may be more efficient to win to see them all.";

chapter warp stuff

when play begins (this is the region initialization rule):
	repeat through table of warps:
		now go-region of por entry is reg entry;
		now last-loc of reg entry is lloc entry;
	repeat with REG running through regions:
		now poss-score of REG is max-score of REG;
	reset-regions;

to reset-regions:
	repeat through table of warps:
		now the item-list of reg entry is {};

to item-warp:
	d "So far you have [cur-score of mrlp] of [max-score of mrlp] points.[line break]";
	now last-loc of mrlp is location of the player;
	if number of carried not warpable things > 0 or number of worn not warpable things > 0:
		if mrlp is solved:
			if mrlp is Means Manse or mrlp is others:
				say "This game just removed an item it should not have: ([list of carried not warpable things]) ([list of worn not warpable things]). [bug-report]";
			otherwise:
				say "[one of]An acuter curate relieves you of the items you won't need any more. He points at himself. 'Rod Hare, Hoarder.' He [if player is female]mumbles pensively, 'Her road...[run paragraph on][else]points at you. 'Rad, hero.[run paragraph on][end if]' He points away. 'I scour curios.'[or]The hoarder takes your surplus stuff again.[stopping]";
		now all carried not warpable things are in lalaland;
		now all worn not warpable things are in lalaland;

chapter going to

understand the command "go to" as something new.
understand the command "goto" as something new.
understand the command "gt" as something new.

gotoing is an action applying to one thing.

understand "goto [any room]" as gotoing.
understand "go to [any room]" as gotoing.
understand "gt [any room]" as gotoing.

rule for supplying a missing noun while gotoing:
	say "That's not something in the game, yet.";
	reject the player's command;

does the player mean gotoing a kinda-nearby room: it is likely.
does the player mean gotoing a really-nearby room: it is very likely.

definition: a room (called myr) is kinda-nearby:
	if myr is in mrlp, yes;
	no;

definition: a room (called myr) is really-nearby:
	if myr is in mrlp and myr is visited and myr is not shunned, yes;
	no;

carry out gotoing:
	d "Trying location [noun].";
	if noun is not a room:
		say "You need to specify a room or a thing." instead;
	let noureg be map region of location of noun;
	if noun is location of player:
		say "You're already here." instead;
	if noun is strip and strip is visited:
		say "The command you may be looking for is RETRY. Do that now instead?";
		if the player yes-consents:
			try retrying instead;
		say "OK." instead;
	if noureg is solved and noureg is not stores:
		say "You already solved [noureg]." instead;
	if last-loc of noureg is unvisited:
		d "[noureg]: [last-loc of noureg].";
		if mrlp is noureg:
			d "You probably used a debug trip to get here.";
		else:
			say "You haven't made it to that region, yet." instead;
	if noureg is lll:
		say "You should've gotten a different reject than this, but somehow you found a way through my code. This is a BUG I'd be interested to hear about, but fortunately, whatever you wanted to visit isn't relevant to solving the game." instead;
	if noureg is not mrlp:
		say "You can't jump across game regions." instead;
	if noun is lectures and player is in strip of profits:
		say "[if stores is solved]You already took care of things there[else]Just enter the mangiest steaming[end if]." instead;
	if noun is strip and mrlp is not stores:
		say "This is equivalent to the RETRY command, so that's what I'll do.";
		try retrying instead;
	if mrlp is routes: [ROUTES]
		if player is in mesa:
			if grouchy old giant is in mesa:
				say "You can't run from the giant!" instead;
			if the-b is in mesa:
				say "You can't go anywhere with the bean and the crowd around!" instead;
			if MORF FORM is in mesa:
				say "The MORF-FORM is too big to ignore or walk out on." instead;
	if mrlp is troves: [TROVES]
		say "[if noun is visited]Going back would be a dereliction of your destiny[else]You must work to make your dreams of going there become reality[end if]." instead;
	if noun is unvisited and mrlp is noureg:
		say "You've never been there yet, so you can't go back." instead;
	if mrlp is not noureg:
		say "[if last-loc of noureg is unvisited]You haven't made it to that region, yet[else]That's in the wrong region[end if]." instead;
	if progval of noun > progval of location of player:
		say "You seem to be getting ahead of yourself. You shouldn't know about that, yet." instead;
	if noun is a mazeroom or noun is Unwary Runway:
		if volt maze is in lalaland:
			say "You don't want to, and can't, go back to or through the volt maze you solved." instead;
		say "You'll have to walk through Nowt Town and the Volt Maze[if noun is Unwary Runway], from L to V[end if]. Or, well, just solve it." instead;
	if mrlp is presto: [PRESTO]
		if noun is saps' pass and phat path is visited:
			say "Saps['] Pass is sort of the Phat Path, now." instead;
		if noun is dirge ridge:
			if Leo is dismissed:
				post-wall-arch;
				do nothing instead;
		if player is in shack:
			consider the shack-south rule;
			unless the rule succeeded:
				do nothing instead;
		if Leo is in location of player and Leo is eager:
			say "(Leo and Rand following.)";
			move Leo to noun;
			move Rand to noun; [?? you have a problem if you goto when you've almost solved things]
	if player is in fighter freight: [OYSTER, generic message not enough]
		say "If only it was that easy. Well, I hope it's not [i]too[r] hard to figure the right action." instead;
	d "From [progval of location of player] to [progval of noun].";
	if progval of noun < progval of location of player:
		if location of player is rawest waters:
			say "Progress isn't easy when you're flailing in water." instead;
		if noun is rawest waters:
			say "No, it wasn't fun the first time." instead;
		repeat through table of progvals:
			if there is a rm entry and rm entry is noun:
				say "[why-not entry][line break]" instead;
			if there is a regs entry and regs entry is mrlp:
				if rmprog entry is progval of noun:
					say "[why-not entry][line break]" instead;
		say "There's no way back. You deserve a reason why, so this is a minor bug." instead;
	if noun is shunned:
		if noun is Hardest Trashed Dearths, say "Now you've visited Lean Lane, you don't want to hang around the Hardest Trashed Dearths more than you need to." instead;
		if noun is Dourest Detours, say "You got rid of the ant. Nothing more to do there." instead;
		say "That's off-limits." instead;
	if location of player is Dourest Detours:
		say "Aw, c'mon, the ant should be no problem." instead;
	if duck is in location of player and duck is friendly: [TOWERS]
		say "(The duck follows, with quick-nag quacking, though you're walking pretty fast.)";
		move duck to noun;
	if player is in inclosure: [OTTERS]
		elvira-flee-taunt;
	if mrlp is demo dome:
		say "You rush, despite having nothing urgent to do.";
	move player to noun;
	if mrlp is towers and can-see-map:
		draw-my-loc;

understand "go to [any thing]" as gotothinging.
understand "gt [any thing]" as gotothinging.

gotothinging is an action applying to one visible thing.

does the player mean gotothinging a deregioned thing: it is unlikely.

carry out gotothinging:
	let newrm be location of noun;
	d "Trying person/thing [newrm].";
	if noun is a guardian:
		ital-say "this could be a bit vague, since each guardian can be seen from two rooms.";
	if noun is in lalaland:
		if noun is skid or noun is disk:
			say "You can flip back to [the noun]." instead;
		say "That [if noun is a person]person [end if]has served the necessary purpose." instead;
	try gotoing newrm instead;

when play begins (this is the seed room progress for GO TO rule) :
	repeat through table of progvals:
		if there is a regs entry:
			repeat with myrm running through rooms in regs entry:
				if progval of myrm is 0:
					now progval of myrm is rmprog entry;
		else:
			now progval of rm entry is rmprog entry;

Rule for supplying a missing noun while gotothinging:
	say "You're referring to something that isn't in the game or isn't available yet.";
	reject the player's command;

table of progvals [this determines which rooms are definitively ahead of others, so GO TO can't go backwards. Also, if a room is shunned, you can't go there any more.]
rm	rmprog	regs	why-not
--	1	means manse	"The Means Manse was surrounded, and you escaped. Bad idea to turn back."
carven cavern	2	--	[means manse]
--	1	routes	"[if progval of location of player is 4]Not from the boat, you aren't. You're much closer to your goal right now[else]The crowd would be sad to see you return, unsuccessful. And you can't, anyway[end if]."
Harms Marsh	2	--	"You already muddled your way out of there. [if progval of location of player is 2]There's gotta be a way to get through da mist[else]And onto the boat, which must go somewhere[end if]!"
ripe pier	3	--	"You have no idea how to turn the cripple clipper around, and you don't want to."
cripple clipper	4	-- [routes]
posh hops shop	1	--	"The trolls would not welcome you back[if progval of location of player > 2], and it'd take too long to get there[end if]."
olde lode	2	--	"You don't want to go back near that urn[if progval of location of player > 3], and it'd be hard, being on the other side of the shore[end if]."
Disease Seaside	3	--	"No sense crossing back. There's more on this side of the shore."
Fighter Freight	4	--	"You don't really want to revisit the crays."
--	5	oyster	[oyster]
loftier trefoil	1	--	"[if progval of location of player is 2]You had your fun in there[else]That's way in the past[end if]."
--	2	towers	"You don't want to cross Leak Lake again."
rawest waters	3	--	"Leak Lake wasn't fun the first time."
Mesprise Premises	4
mislit limits	4	[towers]

[note:
--others does not need this, because you can always visit Curtis
--Demo Dome has no boundaries
--in stores, Cruelest Lectures is walled off
--otters doesn't block off any finished areas
--troves has a generic message about going forward
]

chapter persuasions

[this is basically just to catch tries to order people instead of asking them. It offers some alternate commands.]

a person can be unemotional, fightin, washed up, eager, dismissed, henchy, deadish or nasty. a person is usually unemotional.

[most of this is for Leo/Rand but Elmer/Merle are that way too]

everpers is a truth state that varies.

persuasion rule for asking a person to try doing something when everpers is false (this is the persuasion disclaimer rule):
	ital-say "you don't need to ask anyone to do anything to complete the game, and in fact it's almost never useful, though I tried some humorous rejects. You are better off ASKing people about things.";
	now everpers is true;
	continue the action;

persuasion rule for asking a person to try doing something (this is the default persuasion rule):
	say "You mumble awkwardly, but then you think maybe you can try doing something for yourself, instead.";
	continue the action;

[general]

persuasion rule for asking pedanto-notepad to try doing something:
	say "CONSULT it instead.";
	persuasion fails;

persuasion rule for asking the parrot to try giving:
	say "[if player has whistle]Already got it[else]The parrot shakes its head. You'll have to earn that[end if]." instead;

persuasion rule for asking an animal to try doing something:
	if noun is spider:
		say "No...will...power.";
	if noun is dead flea:
		say "It's dead.";
		persuasion fails;
	if noun is yak:
		say "It's far too apathetic.";
		persuasion fails;
	if noun is parrot:
		if player is in alcoves:
			say "You aren't sure you want to alert the coevals to the parrot, helpless as it is right now.";
			persuasion fails;
		say "The parrot flies around, cocking its head vaguely west.";
		persuasion fails;
	if noun is raptor:
		say "You'd be better off changing it.";
		persuasion fails;
	if noun is eels:
		say "You need to use just one word at the right time.";
		persuasion fails;
	if noun is lamb:
		say "The lamb doesn't understand orders, or full sentences.";
		persuasion fails;
	if player is in Lamer Realm:
		say "[if noun is reflexive]You don't have its trust[else]It perks up as if looking for something to attack but settles down again[end if].";
		persuasion fails;
	if player is in perverse preserve:
		say "The animal cannot understand your words.";
		persuasion fails;
	persuasion fails;

[routes]

persuasion rule for asking scripture picturers to try doing something:
	say "If they could speak, they'd probably tell you you need to look inside yourself, anyway.";
	persuasion fails;

persuasion rule for asking the-b to try doing something:
	if the player's command includes "beneath":
		try fliptoing the-b instead;
	say "It's not going to move itself.";
	persuasion fails;

persuasion rule for asking Pat to try doing something:
	say "He seems too despondent to do much of anything.";
	persuasion fails;

persuasion rule for asking Oscar to try doing something:
	say "He's too grouchy to be asked what to do.";
	persuasion fails;

persuasion rule for asking Brother Horbert to try doing something:
	say "Brother Horbert mutters absent-mindedly he wishes he could do something for you, but not yet.";
	persuasion fails;

persuasion rule for asking drama armada to try doing something:
	say "They're too antsy. But maybe just saying the right word will get them going.";
	persuasion fails;

persuasion rule for asking old giant to try doing something:
	say "He's much bigger and louder than you, so, no.";
	persuasion fails;

[troves]

persuasion rule for asking Pa Egg Pea to try doing something:
	say "If it could speak, it'd probably tell you you need to look inside yourself, anyway.";
	persuasion fails;

persuasion rule for asking astute statue to try doing something:
	say "Trevis Vister would like the thought of someone asking him to do something. Problem is, he likes to say no a lot on principle, to feel important.";
	persuasion fails;

[presto]

persuasion rule for asking the plebe to try doing something:
	say "The plebe stiffens further to attention. You are probably asking too nicely, and he's not used to that.";
	persuasion fails;

persuasion rule for asking a person to try doing something when player is in Unwary Runway:
	say "[random npcish person] shrugs. He's just there to help, by being himself.";
	persuasion fails;

[oyster]

persuasion rule for asking trolls to try doing something:
	say "'You know what we'd like YOU to do?' the trolls chuckle.";
	persuasion fails;

persuasion rule for asking Casper to try doing something:
	say "You're not Casper's publicist or his editor, and they're the only one with a chance of telling him what to do[if recaps are reflexed]. Plus, there was that scraping incident[end if].";
	persuasion fails;

persuasion rule for asking patrons to try doing something:
	say "They're here to NOT be ordered around.";
	persuasion fails;

persuasion rule for asking scary crays to try doing something:
	say "You're in no position to tell them what to do.";
	persuasion fails;

persuasion rule for asking clam to try doing something:
	say "It doesn't seem to understand commands, but maybe it can bend to niceness.";
	persuasion fails;

persuasion rule for asking carps to try doing something:
	say "Ordering them around won't help. Take action!";
	persuasion fails;

persuasion rule for asking pikes to try doing something:
	say "Ordering them around won't help. Take action!";
	persuasion fails;

persuasion rule for asking span pans to try doing something:
	say "[make-open].";
	persuasion fails;

persuasion rule for asking span pans to try doing something:
	say "[make-open].";
	persuasion fails;

to say make-open:
	say "They don't respond to speech but action";

persuasion rule for asking Aunt Tuna to try doing something:
	say "Hard to tell her what to do.";
	persuasion fails;

persuasion rule for asking Trout to try doing something:
	say "[if trout is reflexed]You've helped him enough--he needs time to absorb your lessons[else if trout is in range]He doesn't need orders--he needs help[else]You may need to show, not tell, him what to do[end if].";
	persuasion fails;

persuasion rule for asking haunter to try gotoing Rascal Craals:
	try objasking haunter about ruby instead;

persuasion rule for asking haunter to try gotothinging ruby:
	try objasking haunter about ruby instead;

persuasion rule for asking haunter to try doing something:
	if the player's command matches the regular expression "\b(ruby|places)\b":
		try objasking haunter about ruby instead;

persuasion rule for asking walleyes to try doing something:
	say "They begin unglibly bullying. You're not in a bargaining position here.";
	persuasion fails;

persuasion rule for asking yapper to try doing something:
	say "He scratches his palm absent-mindedly. Or maybe absent-ethically.";
	persuasion fails;

persuasion rule for asking ant to try doing something:
	say "It understands only action. Violent action.";
	persuasion fails;

persuasion rule for asking a nasty person to try doing something:
	say "You need action, not words. Well, you sort of need [b]A[r] word..";
	persuasion fails;

[towers]

persuasion rule for asking pester'n serpent to try doing something:
	say "The serpent needs a change of attitude, and speaking won't do it.";
	persuasion fails;

persuasion rule for asking Tetris Sitter to try doing something:
	if Tetris Sitter is reflexive:
		say "The Tetris Sitter ignores you and continues smiling and working on her high score.";
		persuasion fails;
	say "St. Teri seems to want to sit and babble on.";
	try asking Tetris Sitter about "xyzzy" instead;
	persuasion fails;

persuasion rule for asking a guardian to try doing something:
	say "If only it were that easy, to ask someone or something to move. You'll have to change them to get by.";
	persuasion fails;

persuasion rule for asking a warrior to try doing something:
	say "Rodney is the one giving the orders, here[if noun is rodney], and he doesn't want to take them from you[end if].";
	persuasion fails;

persuasion rule for asking Dr Yow to try doing something:
	say "Dr. Yow [if ropins is reflexive]mopes silently. [he-she-c]'s already in prison--no need to order [him-her][else]still looks exhausted from [his-her] ordeal. Maybe you should just let [him-her] be [him-her]self[end if].";
	persuasion fails;

[here are some shortcuts to speed up moving the agnostic around. I suspect there are more, but we'll see]

persuasion rule for asking agnostic to try gotothinging Dr Yow:
	try objasking agnostic about Dr Yow instead;

persuasion rule for asking agnostic to try gotothinging prison ropins:
	try objasking agnostic about Dr Yow instead;

persuasion rule for asking agnostic to try gotoing subsector:
	try objasking agnostic about Dr Yow instead;

persuasion rule for asking agnostic to try doing something (this is the block agnostic going to obscurest subsector rule) :
	if the player's command matches the regular expression "gizmo" and player has gizmo:
		try giving gizmo to agnostic instead;
	if the player's command matches the regular expression "(boat|bot)" and bot boat is in coastlines:
		try objasking agnostic about bot boat instead;
	if the player's command matches the regular expression "\b(doctor|dr|yow)":
		if Obscurest Subsector is unvisited:
			say "You don't know about that area yet.";
			persuasion fails;
		try objasking agnostic about Dr Yow instead;
	say "The agnostic is good at mechanical stuff but not so good at following orders.";
	persuasion fails;

[otters]

persuasion rule for asking Ed Riley to try doing something:
	say "He wags his finger. You need to find a way to dent his confidence.";
	persuasion fails;

persuasion rule for asking Le Mer to try doing something:
	say "You need to communicate less forcefully.";
		persuasion fails;

persuasion rule for asking macks to try doing something:
	say "The macks, like any good alpha males, blow you off and show Gretta Garett-Tatger SHE is most important.";
	persuasion fails;

persuasion rule for asking Mr Lee to try doing something:
	say "[if p-2 is in lalaland]Mr. Lee can't do any more for you[else]Mr. Lee doesn't trust you enough to do anything for you[end if].";
	persuasion fails;

persuasion rule for asking whiners to try doing something:
	say "The whiners raise their voices and drown your request out. Maybe you can drain their energy, somehow.";
	persuasion fails;

persuasion rule for asking sly imp to try doing something:
	say "The imp gives a definite maybe you [one of][or]once again [stopping]believe. If only you could make it less subtle!";
	persuasion fails;

persuasion rule for asking a henchy person to try doing something:
	say "[noun] makes a huge display of only answering to--HER.";
	persuasion fails;

persuasion rule for asking macks to try doing something:
	say "The macks say 'You're not the boss of us!' and go on about breaking free from repression and mind control and so forth, and how if Gretta goes with them, they'll help her not be repressed by you.";
	persuasion fails;

persuasion rule for asking Gretta to try doing something:
	say "She's already beset by the macks. Best to help her out with your powers.";
	persuasion fails;

persuasion rule for asking Elvira to try doing something:
	say "You've got the word power but not the conversation power.";
	persuasion fails;

[others]

persuasion rule for asking Curtis to try doing something:
	say "[if dollar is not off-stage]Curtis can't do any more for you[else]Curtis gestures surprise that YOU are ordering HIM around[end if].";
	persuasion fails;

persuasion rule for asking greedy-person to try doing something:
	say "[if noun is male]He[else]She[end if]'s too slick to be ordered around.";
	persuasion fails;

persuasion rule for asking Len Craig to try doing something:
	say "Len's a businessman, and you're not his boss. Try haggling.";
	persuasion fails;

the persuasion disclaimer rule is listed first in the persuasion rulebook.

book telling and asking about

section generically asking

asking generically is an action applying to one topic.

Understand "tell about [text]" or "ask about [text]" or "talk about [text]" or "a [text]" as asking generically.

objasking generically is an action applying to one visible thing.

Understand "tell about [any thing]" or "ask about [any thing]" or "talk about [any thing]" or "a [any thing]" as objasking generically.

check objasking generically (This is the check for only one sensible object converser rule):
	if the number of persons enclosed by the location is one:
		repeat with X running through visible scenery: [talk to non-talkable scenery]
			repeat through table of default-gen-blather:
				if X is the default-talker entry:
					say "[gen-blah entry][line break]" instead;
		say "You inquire into your own thoughts. You gain no illumination." instead;
	if the number of persons enclosed by the location is two:
		repeat with candidate running through visible people:
			if the candidate is not the player:
				try objasking candidate about the noun instead;
	if player is in hops shop:
		try asking casper about the topic understood instead;
	say "Ambiguous--more than one other person here." instead;

does the player mean objasking about something hintrelevant: it is very likely.
does the player mean objasking generically a hintrelevant thing: it is likely.

objasking it about is an action applying to one thing and one visible thing.

rule for supplying a missing second noun when objasking about:
	now second noun is the noun;

understand the command "ask [thing] about [any thing]" as something new.
understand the command "tell [thing] about [any thing]" as something new.
understand "ask [thing] about [any thing]" as objasking it about.
understand "tell [thing] about [any thing]" as objasking it about.

understand the command "ask [thing] about [text]" as something new.
understand "ask [thing] about [text]" as asking it about.
understand the command "tell [thing] about [text]" as something new.
understand "tell [thing] about [text]" as asking it about.

Check asking generically (This is the check for only one sensible converser rule):
	if the number of persons enclosed by the location is one:
		repeat with X running through visible scenery:
			repeat through table of default-gen-blather:
				if X is the default-talker entry:
					say "[gen-blah entry][line break]" instead;
		say "You inquire into your own thoughts. You gain no illumination." instead;
	if the number of persons enclosed by the location is two:
		repeat with candidate running through visible people:
			if the candidate is not the player:
				try asking the candidate about the topic understood instead;
	if player is in hops shop:
		try asking casper about the topic understood instead;
	say "Ambiguous--more than one other person here." instead;

the can only talk to talkables rule is not listed in any rulebook.

check talking to (this is the hint looking not talking rule):
	if noun is armada:
		say "They're not in the mood for remotely reasonable conversation." instead;
	if noun is statue:
		say "Trevis Vister has strong opinions on everything and all kinds of success plans, but (un)fortunately his statue can't relate any of that." instead;
	if the noun provides the property litany and the noun provides the property greeting, do nothing;
	otherwise say "You may be better off examining non-living things, not talking to them." instead.

section style chat stubs

to ital-say (x - indexed text):
	say "[italic type][bracket]NOTE: [x][close bracket][roman type][line break]";

to ital-say-n (x - indexed text):
	say "[italic type][bracket]NOTE: [x][close bracket][roman type]";

to say i:
	say "[italic type]";

to say b:
	say "[bold type]";

to say r:
	say "[roman type]";

to say sp:
	say "[if screenread is true] [end if]";

to say on-off of (myts - a truth state):
	say "[if myts is true]on[else]off[end if]"

section specifically

Rand-first is a truth state that varies.

to washup-clue:
	say "[one of]'Us? Whaps?'[no line break][or]'Pah, wuss,'[or]'Haw, puss,'[or]'You'd place last in a saw push,'[or]'I like dat TV show the Upshaws,'[or]'Don't push aws on me,'[or]'Ssh! Up...aw,'[cycling] [noun] says, red-faced. He's not in the mood for deep discussion. But maybe a nice word would help.";

to reason-clue:
	say "It has NO EARS! Yet it buzzes its name...Sorena A. Norse. The noise makes you see red but lets up when you deduce the bee is a senora.";

check objasking it about (This is the check for object information rule):
	d "noun=[noun] 2nd noun = [second noun] location = [location of second noun].";
	if noun is what-a-bee:
		reason-clue instead;
	if noun is pedanto-notepad:
		try consulting pedanto-notepad about "[second noun]" instead;
	if noun is duck:
		say "Quack, quack. It seems like it wants to hear a voice--but not yours." instead;
	if noun is not a person:
		try talking to noun instead;
	if noun is washed up:
		washup-clue instead;
	if noun is haunter and second noun is ruby:
		if haunter is reflexive:
			say "You need to get the haunter to trust you, first." instead;
		if player is not in Rascal Craals:
			say "It acts all ghostly and asks you to take it where the ruby might be.[paragraph break]You describe the path to take to get to the ruby, neglecting why you know--fortunately, the haunter doesn't seem to care.";
			if player is in anger range:
				try going west;
				consider the track haunter rule;
			if player is in achers' arches:
				try going north;
				consider the track haunter rule;
			if player is in horned hedron:
				try going west;
				consider the track haunter rule;
			the rule succeeds;
	if noun is Leo or noun is Rand:
		if noun is fightin:
			if noun is Rand and Rand-first is false:
				now Rand-first is true;
				say "'ME RAND!' Rand points at you. 'AM NERD!' Er, [d-word]." instead;
			say "He's in a fighting mood, not a talking mood, right now." instead;
	if the noun is the second noun:
		repeat through table of reflexive-blather:
			if noun is him-asked entry and there is a him-told entry:
				say "[him-told entry][line break]" instead;
	repeat through table of subject-blather:
		if second noun is the person-subj entry:
			if noun is the him-who entry:
				say "[him-say entry][line break]" instead;
	if second noun is the player:
		say "Nobody in the game can tell you anything new about yourself. Well, anything new and helpful." instead;
	if the chum of the noun is not yourself:
		repeat through table of subject-blather:
			if second noun is the person-subj entry:
				if the chum of the noun is the him-who entry:
					say "[him-say entry][line break]" instead;
	if the second noun is a person-subj listed in the table of object-blather:
		if there is a right-region entry:
			if right-region entry is not mrlp:
				say "This is the wrong region to ask about that." instead;
		if noun is not serpent:
			say "[him-say entry][line break]" instead;
	repeat through table of default-sub-blather:
		if noun is him-who entry:
			say "[him-say entry][line break]" instead;
	repeat through table of default-gen-blather:
		if noun is default-talker entry:
			say "[gen-blah entry][line break]";
			if noun is terse and noun is not terse-warned:
				now noun is terse-warned;
				say "[line break]Hm, that wasn't very revealing. They don't seem to have a lot else to say. You note this in your notepad.";
				pad-rec "talking";
			do nothing instead;
	if noun is not a person:
		say "You can only ask people about things." instead;
	say "There is an awkward silence due to--err, my forgetting this case.[paragraph break][bug-report]" instead;

check asking about (This is the check for specific topics rule):
	if noun is what-a-bee:
		reason-clue instead;
	if noun is pedanto-notepad:
		try consulting pedanto-notepad about "[second noun]" instead;
	if noun is duck:
		say "Quack, quack." instead;
	if noun is not a person:
		try talking to noun instead;
	if noun is washed up:
		washup-clue instead;
	if noun is haunter:
		if the topic understood matches the text "ruby":
			try objasking haunter about ruby instead;
	if noun is Leo or noun is Rand:
		if noun is fightin:
			if noun is Rand and Rand-first is false:
				now Rand-first is true;
				say "'ME RAND!' Rand points at you. 'AM NERD!' Er, [d-word]." instead;
			say "He's in a fighting mood, not a talking mood, right now." instead;
	if the topic understood is a topic listed in the table of general-blather:
		if noun is a person and noun is superchatty:
			if him-who entry is the noun:
				say "[him-say entry][line break]" instead;
	if the topic understood is a topic listed in the table of popular-blather:
		if there is a right-region entry:
			if right-region entry is not mrlp:
				say "This is the wrong region to ask about that." instead;
		say "[him-say entry][line break]" instead;
	repeat through table of default-gen-blather:
		if the noun is default-talker entry:
			say "[gen-blah entry][line break]";
			if noun is terse and noun is not terse-warned:
				now noun is terse-warned;
				say "Hm, that wasn't very revealing. They don't seem to have a lot else to say. You note this in your notepad.";
				pad-rec "talking";
			do nothing instead;
	if noun is not a person:
		say "You can only ask people about things." instead;
	say "There is an awkward silence due to--err, my forgetting this case.[paragraph break][bug-report]" instead;

the can only talk to people with things to say rule is not listed in any rulebook.

section talk tables

[talktab]

to say uf:
	say "Any attempt at conversation would be banefully unflyable.[no line break]"

table of reflexive-blather	[ask x about x] [tor] [trb]
him-asked	him-told
Gunter	"His views would be biased."
Elmo	"You already know about his mission and what he's done to help you. No time for small talk."
nestor	"[if store k is visible]'Want...friends...man!'[else]'Friendship, all you need, dude!' Nestor smiles at the tokers.[end if]"
tokers	"[if store n is visible]'Missing our friend, man!'[else]You can't think of a way to ask that without saying WHAT DO YOU THINK YOU'RE DOING, buy you get the impression there's not much to ask.[end if]"
lecturer	--
idg	"'I'm nothing without Max P. Lee's help.' He goes on about how and why he is nothing, leaving you wishing he sort of was. How [i]tedious[r]."
Brother Horbert	"He mentions he cannot do much--the Same Mesa needs magic to undo the curse, but the list-o-toils is on the wall[if list o toils is examined], as you've seen[end if]." [reflex ROUTES]
old giant	"He is already talking about himself, his complaints, and so forth."
Oscar	"'I'm just this guy, in this house, with that ashtray [if pipe soot is in adobe]full of nice smelling pipe soot[else]some self-appointed do-gooder cleaned out. Well, I can make more[end if].' Nope, he doesn't seem to have much to say."
Pat	"'[one of]No dine. Done in[or]Not much to munch[or]Food? Us? Doofus[cycling]. No [pat-rant][randbla] or [randbla][pat-rant]. [pat-on-pit].'"
armada	"They'll have nothing sensible to say in unison."
statue	"Oh, if it were the real version, you'd regret that."
plebe	 "You figure you should grill him about how worthless he thinks he is, but you lack the right word or words." [reflex PRESTO]
Rand	"He gives a whole new dimension to small talk. But not for long, thankfully."
Leo	"He gives a whole new dimension to small talk. But not for long, thankfully."
hogs	"The whole 'Who do you think you are' won't go well with these hogs. They're here to guard you from what's beyond, and that wall is helping."
l-m	"'I'm here to help, just by being me, apparently.'"
m-l	"'I'm here to help, just by being me, apparently.'"
Tom Alvez	"'I'm here to help, just by being me, apparently.'"
trolls	"They'd affirm their right to privacy before asking YOU personal questions. Trolls, sheesh." [reflex OYSTER]
patrons	--
Casper	"Once he starts, he won't stop. But he's feeling standoffish after his first big lecture."
clam	"Asking the clam about its feelings is a start."
boats	"They're too far away for proper conversation. Maybe you can do something bold to show them you're worth having aboard."
carps	"Asking these punks who they think they are won't stop them."
pikes	"Asking these punks who they think they are won't stop them."
trout	"[if trout is in anger range]You don't need to ask if he's being picked on,[else]'Well, I try my best and stuff.'[end if]"
aunt tuna	"She's talking about herself every move, pretty much[if trout is reflexive]. You can probably help Tortu instead[end if]."
sardine	"[one of]The sardine spends time babbling about his sensitive hearing, saying you couldn't possibly understand. But you sort of do[or]You don't want to hear the sardine on himself again[stopping]."
walleyes	"Now's not the time to upbraid baddies for being bad. Sneak past them instead."
yapper	"'I'm a dedicated public servant. I'm not paid to chat. But I'm not paid enough to keep you out, no matter what.' He winks."
agnostic	"'I like gadgets and building things! [if bot boat is off-stage]I just need one more cool tool[else]I'd love you to try my boat, here[end if]!'" [reflex TOWERS]
dreads adders	"The adders sit around and look intimidating."
pester'n serpent	"[serp-say]."
Mel Fish	--
muscly luc sym	--
muscly ms lucy	--
lois the hostile	--
hostile-is-he lot	--
natives	--
snider diners	"'We are EATING,' they exclaim, dryly. You'd like to rain on their parade, even a little. You seem to have interrupted their talk, and maybe LISTENing would help."
sweatier wait-seer	--
arid den	--
bluster butlers	--
unripe ur-pine	--
pirates	--
keycar	--
grailman	--
Lars Eede	--
Elsa Erde	--
bonker	--
stinger	--
ingrates	--
organised	--
admirer	"'But enough about me! What about you?' You need a way to make them less interested in you."
Dr Yow	"Dr. Yow is too modest--and focused on [his-her] science--to bang on about previous achievements or imprisonment."
Atheists	"'[one of]This eats...'[or]Set, it has,'[in random order] they muse languidly over some philosophical point. You feel dumb not being able to figure it out, but you feel sort of compelled to listen for more."
Tetris Sitter	"[if flowerpot is in lalaland]St. Teri mentions how happy she is now. Just go out and come back in if you need help with that palace[else if Tetris Sitter is reflexive]St. Teri wants to help, but she can't quite, yet[else]The Tetris Sitter ignores you, working on her high score[end if]."
Ed Riley	"[one of]Ed Riley blathers how he can stand up to WHO DO YOU THINK YOU ARE and all that sort of thing. You claim you were just trying to get to know him, then he says THEN YOU'LL KNOW I NEED TO GUARD THE WAY WEST, HERE. He speaks very authoritatively[or]You don't need another verbal smackdown, at least not in Ed's current tone of voice[stopping]."
whiners	--
macks	"Their opinion would be slightly biased. You can probably learn more about them by observing them."
Gretta	"She's got enough people asking about her right now."
Elmer	"'Slightly more interesting than my friend.'"
Merle	"'Slightly more interesting than my friend.'"
Mr Lee	--
le mer	--
eels	--
snail	--
hornets	--
racoon	--
ocelots	"[if ocelots are reflexive]They seem too shy to talk[else]They point to themselves and give a thumbs up[end if]."
satyr	--
leopard	--
badger	"[if badger is reflexive]It covers its exposed parts and turns away[else]It fumbles happily with its now-clothed chest[end if]."
sly imp	"It nods its head as if to say it's all right and it knew you'd ask."
haunter	"It makes ghostly noises and talks about how it wants its jewel back."
Elvira	"She sniffs haughtily. As if you have to ask! As if you're NOT too biased to believe the good things about her!"
Curtis	"'Just trying to rustle up fruit and biotech business. Need to be growing more than ur-pines or those discussing yorpberries.'"
Len Craig	"'I'm a businessman. A trader. Lots of stuff if you know how to haggle.'"
Art Erd	"'Traded a dead rat...' he mumbles."
Dr Tera	"'Traded a dead rat...' she mumbles."
passport	--

to say serp-say:
	say "[if serpent is reflexed]The serpent is motionless[else]The serpent just hisses[end if]"

to say pat-on-pit:
	say "[if mushrooms are off-stage]Can't even make it to the seed pit[else]Don't have your guts to explore the seed pit, either[end if]"

check asking Curtis about:
	if second noun is a fruit:
		say "'[if second noun is in lalaland]Yes, thanks for that, again[else]That'd work well, yeah[end if].'" instead;

to say mon-men:
	say "'We're Elvira's monster mentors. Making REAL animals. You don't need Eden.' They [if Merle is reflexive][one of]babble a bit about the philosophies of Lhen Yost[or]prissily swear Elsy Noth is ruining kids['] morals[or]pay sycophantic respects to St. Hoylen[or]get all, ETHYLS, NO and make a drinking gesture and wag their fingers[or]discuss how they have to talk shy to Len[or]wonder if they should pull out the ole synth[or]discuss the philosophies of Lytheson[in random order], which leaves you seeing red[else]continue semi-squabbling[end if]."

to say war-duh: say "Rodney silences him from answering."

to say tho-eels:
	if power-back is true:
		say ", though you wonder if you need a double-charge after talking to the eels"

to say tho-need:
	if power-back is true:
		say ", though I feel you may not need the eels['] energy"

to say left-here:
	say "'I was told I was left here to help someone who needed it and might need a clue and---well, they didn't tell me what the clue would be"

to say doc-in-prison:
	say "[he-she-c] gestures to the ropins and then shakes an invisible fence of [his-her] own. As if [he-she] is too exhausted to talk any more[if Dr Yow has been rowdy and Dr Yow has been wordy]. You figured two ways to get [him-her] to talk, and that's probably enough[else if Dr Yow has been rowdy or Dr Yow has been wordy]. Maybe Dr. Yow has a bit more expressiveness in [him-her][end if].";

before asking Dr Yow about:
	if Dr Yow is wordy or Dr Yow is rowdy:
		say "Interrupting is rude. He'll quiet down." instead;

before objasking Dr Yow about:
	if Dr Yow is wordy or Dr Yow is rowdy:
		say "Interrupting is rude. He'll quiet down." instead;

the basic RQ out of range rule is not listed in any rulebook.

An RQ out of range rule for a number (called max) (this is the modified RQ out of range rule):
	say "[one of]You murmur 'Umm...urr.' [or][stopping][if Gunter is visible]Gunter yells, 'Flounder, foul nerd!'[else if Elmo is visible]'Evil days.' / 'Ay, devils.' [else if macks are visible]You're not tricky enough to change the conversation drastically.[else if Elvira is visible]You think 'Her slams, harmless. She can't chasten...' then she hits you with the phrase-phaser. You must respond. [end if][bracket][if max is 1]The only response right now is 1[else]Valid responses range from 1-[max][end if]. Type REPEAT to [if max is 1]see it again[else]re-list the options[end if].[close bracket][paragraph break]".

to say lrduh:
	say "'I dunno much about that. I like do stuff not think stuff.'";

pat-whine is a truth state that varies.

to say pat-rant:
	if pat-whine is false:
		now pat-whine is true;
	else:
		now pat-whine is false;

table of default-gen-blather	[ask x about nonsense] [tod]
default-talker	gen-blah
yourself	"You give an elfish 'Hi, self.' You discuss how maybe the game needs better developed NPCs, or maybe they just need to give more hints."
tokers	"The yawners aren't very answery, and you probably don't need a THC chat. They like you and all, but despite your adventuring, you'd never, like, invent a drug or do nothing as well as they do." [begin stores]
idg	"He nods at you and the lecturer. It's remarkably effective psychological warfare, to repress you and all."
lecturer	"If he actually heard you, he'd yell a stunning rebuke to whatever he could pretend you'd say, then chalk your confusion up to drugs. You just want to get away from all this TEDIOUS stuff."
urgent Gunter	"[bug-report]"
Mole Elmo	"[bug-report]"
Brother Horbert	"[one of]'Saint Tina's Nun of No Fun left a list-o-toils for possible curse cures. Check thou it before proceeding, if you haven't.'[or]After a fret, he says, 'The list-o-toils!'[stopping] He seems pretty focused on that." [begin routes]
Pat	"'[one of]No dine. Done in[or]Not much to munch[or]Food? Us? Doofus[cycling]. No [pat-rant][randbla] or [randbla][pat-rant]. [pat-on-pit].'"
Oscar	"He's too grouchy to give much help here. He mutters on about slotted dottles--which, well, you [if player has pipe soot]already have pipe soot[else if read-list is true]don't think will help you get any pipe soot[else]don't know or care much about, now, yet[end if]."
drama armada	"They stare blankly at you, fearful yet confident you know what to do next. They won't be much help."
old giant	"The giant is sort of controlling the conversation, and he's bigger than you. You probably just need to sympathize and avoid getting hit by flailing limbs and so forth."
nestor	"'Whuh, whuut? Try asking me about, like, stuff instead. Not, you know, stuff.'"
what-a-bee	"The bee just buzzes. That's what bees do."
spider	"Talking to animals? This isn't the way to get to the top!"
lamb	"It's a baaaaad conversationalist." [begin presto]
l-m	"[left-here].'"
m-l	"[left-here].'"
Tom Alvez	"[left-here].'"
hogs	"They snort and laugh as if you are beneath speaking to or even wasting harsh words at."
bored yak	"The yak, not being very yakety, does not talk back."
giant dead flea	"It's sort of dead. Not that it was great conversation when it was alive."
Leo	"[lrduh]"
Rand	"[lrduh]"
computer screen	"[if screen is on labs slab]Yelling at a computer never works. If you need to say something, just say it[else]The screen isn't even plugged in[end if]."
patrons	"The patrons would probably think YOU were drunk if you told them why you were here or asked questions." [begin OYSTER]
trolls	"Talking wouldn't distract them from [if silly-acts is 3]eventually beating you up[else]keeping you in the Posh Hops Shop[end if]. They'd just win the argument. They're trolls, after all."
clam	"It snaps back at you. Physically, not verbally. Words--okay, conversation--won't help it relax, so you clam up."
Casper	"'[ohai-casper][randbla][ohai-casper][run paragraph on]' Casper mutters to nobody in particular."
scary crays	"They chuckle a bit. You're not going to be able to talk your way out of this."
trout	"[if trout is reflexive]He needs a pep talk. Guidance. Even if it's not 100% correct[else]He shrugs. The outside world is intimidating to him[end if]."
carps	"They snot nots. Tons. Brusque, queer BS. You need to take action, instead."
pikes	"They snot nots. Tons. Brusque, queer BS. You need to take action, instead."
aunt tuna	"'There is not much to say, with the haunter lurking under Anger Range, and the Horned Hedron assailing innocent people!' Looks like you won't nyet-a-yenta."
sandier sardine	"He flashes a snider look as he reads in to your talk. 'Ear dins. Wish I worked at Adrien's.'"
weaselly walleyes	"They snicker menacingly and whisper loudly that you're probably scared of lots of things like ghosts. They aren't. Not even the haunter!"
haunter	"It does that whoo-whoo thing. WHERE IS MY JEWEL. You think you know which jewel."
yapper	"The yapper does not shut up about how he cannot be bribed, but he's kind of winking at the same time, and coughing. It seems you may need to do things the right way."
ant	"The ant twitches silently but menacingly."
dialer	"Your voice would be recognized as not evil enough, even if you got through."
intercom	"Your voice would be recognized as not evil enough, even if you got through."
spec-o-scope	"Try looking in it instead."
agnostic	"[if duck is not returned]'Hey! Do you know anything about making stuff? I read in the Turbine Tribune about making stuff that could cross the water! I wonder what's beyond there!'[paragraph break]'IDK, kid.'[paragraph break]'Oh, wait, you're just an adventurer, not someone who knows anything technical. Gosh, I didn't mean it like that. I just...don't have any information for you.'[else if gizmo is not in lalaland]'Boy! If only I had a tool to create a bot boat!'[else]'Man! If I [boat-works], that'd be awesome! I wouldn't even care if they got lost. Just making stuff.'[end if]" [begin TOWERS]
Dr Yow	"[if ropins is reflexive][doc-in-prison].[else]'Ah yes! My rescuer! Thanks again! Are you interested in detailed technological phenomena? No?' [he-she-c] begins calculating on [his-her] fingers and working on an abstruse problem. [he-she-c]'s probably not going to help you much with grunt work, but [he-she] could help someone technical help you.[end if]"
drama armada	"The drama armada doesn't seem to respond to conversation. Maybe if you just boom out one word, they'll go along with it."
plebe	"Plebes aren't much for small talk. In fact, they get yelled at for that sort of thing. Hmm, maybe you could yell at him the right way to make him move."
muscly luc sym	"He kind of stumbles with dialogue. Maybe you can make him stumble physically."
muscly ms lucy	"He kind of stumbles with dialogue. Maybe you can make him stumble physically."
bluster butlers	"'If we let you by, we'd have to answer to our mentor, Les Burt!' You see red at the name."
snider diners	"They [one of]ignore you, asking is DERN coming[or]talk about Dr. Enis[or]mention NERD IS something unintelligible[in random order], until they're red[one of], but you sense they have a bit more to say[or], but maybe they have one more rant[stopping]."
organised ego drains	"The ego drains just aren't to be argued with. When you try to, you're that much more convinced you don't need to go [if player is in Danger Garden]north[else]south[end if][if Danger Garden is visited and Strati Strait is visited], especially since you walked around before[end if]."
pirates	"[one of]Harsh arrhs and the sound of shook hooks follow your attempt to converse.[or]'Yarrh, Harry,' they shout, and one of them makes fun of your skin tone. You feel like a spiter, hoping they get skin cancer.[in random order]"
lars eede	"He seems to want to talk, really, and at the same time, he doesn't. He keeps mumbling a sales pitch under his breath, and maybe if you listen a bit, you can remember it."
Elsa Erde	"She seems to want to talk, really, and at the same time, he doesn't. He keeps mumbling a sales pitch under his breath, and maybe if you listen a bit, you can remember it."
admirer	"They claim they never thought they'd love someone the way they love you! [one of]Off-guard, red-faced, you mumble, 'I? Rad? Erm...' Maybe you can stomach another compliment[or]You blush red hearing nonsense you two could be as good together as the popular society couple Red Irma and Ed Mirra[cycling]."
Mel Fish	"He ignores your conversation. '[one of]They done wrong to ol['] Mel Fish. That's me.[or]They were all [']Shelf [']im![or]SMH. Life.[or]Eh. Films.[in random order]' he mumbles as his eyes go red[one of]. Maybe he has other things to mumble about[or][stopping]."
natives	"You seem unable to convince the natives they are too good to stand here, or to find a way to sucker them into moving. However, they do babble on about [one of]ST. EAVIN, the local church[or]the local SETI-NAV[or]TIN EVA'S bar[or]where to avoid AI VENTS[or]the local INVEST-A stock broker[or]a local celebrity named SVETINA[or]the TIN-SAVE recycling center[in random order], which makes you see red[one of]. Maybe there's more of that, if you can hack it[or][stopping]."
sweatier wait-seer	"'[one of]Sit! We are[or]Trees! Aw, I[or]Trees! I, aw[in random order]...' he says, making you see red. 'I'm obviously [i]sweatier[r] than you, yet I am far less tired!'"
duck	"It quacks."
ingrates	"[one of]They swat imaginary red ire-gnats as they brush you off[or]You're shocked by the [i]angriest[r] interruption imaginable[cycling]."
pester'n serpent	"[serp-say]."
alarming grailman	"'You do find me alarming, don't you? I always give 110%. No-one passes Liam Garn!'"
bonker	"You try to chat but feel like a, er, knob."
Lois the Hostile	"She complains[hostile-red]!"
Hostile-Is-He Lot	"They complain[hostile-red]!"
Atheists	"They start logic-bashing, when one of the junior atheists tries to make a point. [one of]'[one of]Eh...I[or]I...eh[in random order]...stats why God can't exist.' [or]'Is theta's...'[or]'This tea's...'[or]'Ah, test is...' [or]He says they should sell atheist gear like ties, hats. [or]St. Tiesha was, apparently, very nasty. [in random order]The atheist turns red, wondering if they had a right to speak up."
Andres	"[war-duh]"
Andrew	"[war-duh]"
Archie	"[war-duh]"
Barney	"[war-duh]"
Blake	"[war-duh]"
Bredo	"[war-duh]"
Cedrick	"[war-duh]"
Daryl	"[war-duh]"
Demitri	"[war-duh]"
Dewey	"[war-duh]"
Edwin	"[war-duh]"
Eldon	"[war-duh]"
Ernest	"[war-duh]"
Geno	"[war-duh]"
Goldy	"[war-duh]"
Leander	"[war-duh]"
Marcel	"[war-duh]"
Marlon	"[war-duh]"
Preston	"[war-duh]"
Reggie	"[war-duh]"
Royce	"[war-duh]"
Shane	"[war-duh]"
Terrance	"[war-duh]"
Tyson	"[war-duh]"
Wade	"[war-duh]"
Sir Rodney	"This standoff won't be resolved with diplomacy."
Tetris Sitter	"[if Tetris Sitter is reflexive]The Tetris Sitter has nothing to say. Her game is too important[else if flowerpot is reflexed]St. Teri looks at your flowerpot, sadly[else if player has crocus]St. Teri looks at your flowerpot wistfully[else]'Old clues, eh?' She colludes: speculatively, circular, a polite ole tip about the Curst Palace. Make it [3-random]? 'No closure, counselor,' you lament, but her general tone and how she says it seem to do something for you. Maybe it'll help something pop in your head[new-yerg-thing][end if]."
Ed Riley	"'Stay there in the rye, idle! Yielder!' he booms[ed-nonsense]. Be nice to quiet him down, somehow."	[start otters]
cinders	"You need to find the right way to ask them. One without speaking."
Le Mer	"[one of]It's kind of single-minded, but it's impressive the moat talks at all[or]Again, ethereal babbling[stopping]. '[if sea cube is visible]You must convince me to unlock the sea cube[tho-need].[else if eels are visible]The eels still distrust you[tho-need].[else]Your powers are regained. Go to your destiny![end if]'"
atmo-moat	"The moat has nothing to say. If it did, it'd probably just say 'KEEP OUT.'"
Mr Lee	"[if p-2 is in lalaland]'You have gained my trust and your powers. Go on!'[else if ghoul hat is in lalaland]You try to convince him you're the good guy, but--bad start. Rev. Howe glares at you[tho-eels].[else]You fail to get anywhere. Between the ghoul hat and Rev. Howe's gaze, Mr. Lee seems half-possessed[tho-eels].[end if]"
Gretta	"[if player is female]The macks block you from talking to her. They redouble their conversation, expecting her to be flattered she's getting more attention than you[else]The macks manage to small-talk you down[end if]. Perhaps you need to get rid of them."
macks	"'Talking's stalking,' they yell at you before continuing to hit on Gretta."
eels	"[if eels are reflexed]'Eels...' / 'Fib-beliefs?' Their attention span seems short, and they have little to say. You need one word, useless on its own yet powerful.[else]They seem to have their minds on other things now that they helped you.[end if]"
Elmer	"[mon-men]"
Merle	"[mon-men][no line break]"
sly imp	"It could talk circles around you as-is. So talking may not be the way to get past it."
whiners	"Rational conversation won't make the whiners budge. You probably need to make them quieter."
hardy hydra	"Roooooooar."
ocelots	"[if ocelots are reflexive]Flimsy I'm-flys[else]'You're cool.'[paragraph break]'You? Cooler!' You feel [one of]encouraged by this exchange, impressed they got away with that[or]awkward about this repeat, but they don't--there's just nothing else to say around them[stopping][end if]."
badger	"[uf]"
leopard	"[uf]"
satyr	"[uf]"
hornets	"The hornets just buzz."
snipe	"The snipe rustles back and forth a bit."
racoon	"The racoon skitters around."
snail	"Schlurrrp."
owls	"They're too busy swooping at you to talk."
raptor	"'Roooooooar.'"
parrot	"[if Merle is visible]Don't blow his cover![else]'Fear the feather! A bird, rabid!' He's got revenge fantasies, but not in his current state--or here."
Elvira	"'I watch a witch,' you mutter. 'Nice try. Tiny rec. Y'cretin.' You're not going to out-debate the vexin['] vixen."
Curtis	"'Ehh?' says Curtis. 'I don't have time for small talk. More fruit, more fruit.'" [begin others]
Len Craig	"[one of]Len proceeds to tell you how he was known as Icy Len til he started doing things nicely and even suggests you use nonverbal cues as a way to get an edge. You get the feeling you asked about something irrelevant, but that advice might help you in general[or]Len's eyes glaze over a bit. Nothing personal, just business[stopping]."
Art Erd	"[he-she-c] mumbles 'er, drat' and something about how money is very, very nice."
Dr Tera	"[he-she-c] mumbles 'er, drat' and something about how money is very, very nice."
arid den	"The automated response system you can't see keeps croaking 'Nerd-Aid...Nerd-Aid...'"
passport	"Try using its features instead."

to say hostile-red:
	say " about something irrelevant to what you asked and sees red: [one of]the soil[or]the oils[or]St. Helio[in random order]. Hostile"

to say boat-works:
	say "[if agnostic has gizmo]could make a bot boat here[else]could see if that boat works[end if]";

casper-talk is a truth state that varies.

to say add-hangout:
	now casper-talk is true;
	pad-rec-lump "the haunter";
	pad-rec "DIE THOU";

Leo-traveled is a truth state that varies.

after going north in Char Arch when Leo is eager:
	now Leo-traveled is true;
	continue the action;

to say pal-yak:
	if yak is visible:
		say "'Dat thing looks sleepy but it'll bite your hand off.'";
	else if Leo-traveled is true:
		say "'Dat yak we saw is too heavy for us! But I bet even you could push it around yourself. No offense.'";
	else:
		say "'My mouf? Oh, a yak, not a yap.'";

to say doc-on-lake:
	if agnostic is in Obscurest Subsector:
		say "The agnostic almost seems to interrupt you saying the lake isn't THAT far across.";
		continue the action;
	if dinger is in coastlines:
		say "'It's treacherous to get across the lake. I am too physically tired to make anything[if Dr Yow is in ropins] even if I escaped[end if]. I could use an apprentice. Maybe you. Or you can find me one.'";
		continue the action;
	say "'My student will help you--there may be some risk. The carelessness of youth. You may be surprised what he can overlook.'[run paragraph on]"

before objasking agnostic about bot boat:
	if bot boat is off-stage:
		say "'Ooh, I'd like to make one. I just don't know enough, yet.'" instead;
	try entering bot boat instead;

table of default-sub-blather	[dsb] [ask x about Gunter]
him-who	him-say
yourself	"Oh, dear. Is this a hint the game needs better developed NPCs?"
aunt tuna	"'Oh, that is not relevant with the haunter lurking below and the Absolute Lout Base terrorizing everyone here! My concern is my nephew Tortu.'"
nestor	"Nestor mumbles about how his father is disappointed he didn't become a senator, just...he wants [if tokers are visible]to just hang with his pals, if that's okay[else]to find his pals, who were in a nearby store[end if]."
astute statue	"Trevis would love to be prayed to, and he probably thinks he deserves it."
Len Craig	"'No small talk. Just the language of business. Let's haggle.'"
Curtis	"Curtis is curt. 'Yeah, great job saving Yorpwald and all, what about here?'"
lamb	"It's a baaaaad conversationalist."
Leo	"[lrduh]"
Rand	"[lrduh]"
yak	"You yack, it's all C-ya, K? Nevertheless, it seems to have some rudimentary grasp of speech and words and meaning."
[Logan	"'No mo' rig mooring.'"]

casper-mumble is a truth state that varies.

to say ohai-casper:
	if casper-mumble is true:
		now casper-mumble is false;
	else:
		now casper-mumble is true;

table of subject-blather	[ask x about thing they know about] [tosb]
him-who	person-subj	him-say
Elmo	settler	"This shouldn't be available." [start INTRO]
idg	lecturer	"'A great man. Listen to him, not me.'" [start STORES]
idg	Elvira	"'She didn't get to her position of power by using DRUGS.'"
idg	idg	"The pamphlets Ian gave you will say enough."
nestor	Elvira	"'So bogusly repressive!'"
nestor	Store N	"'Man, it was actually kind of sort of like fun in there. Until it wasn't.'"
nestor	tokers	"[if tokers are visible]Nestor gives them a thumbs-up, they cheer drippily, and he cheers back[else]'Dude! Could you magic them back somehow?' he pleads[end if]."
tokers	Store K	"'Man, it was actually kind of sort of like fun in there. Until it wasn't.'"
tokers	Elvira	"'A bummer of authoritarianism, dude! She says her personality is all the drug you need!'"
tokers	nestor	"[if nestor is visible]They thank you for finding him[else]They weep at hearing the name of a lost friend[end if]."
tokers	mangiest steaming	"[if cruelest lectures is visited]You know more about it than they do[else]'Er, free reefer!' they say. You'd probably have SOME sort of experience going through those fumes[end if]."
lecturer	Elvira	"You probably know he's in favor of her."
lecturer	lecturer	"Oh, his good-for-society rant has enough of his own experiences sprinkled in."
Brother Horbert	spoon	"'[if spoon is in lalaland]I hope you used it wisely[else]It may help you figure where to go[end if].'" [start ROUTES]
Brother Horbert	mantle	"[one of]Brother Horbert shudders a bit[or]Best not to press him[stopping]."
Brother Horbert	list o toils	"[if l-o-p is unexamined]Why not examine the list yourself?[else if mushrooms are off-stage]You've gotten everything.[else if number of held quest-items is 0]You tell Brother Horbert you haven't found any items on the list. He says he has faith in you.[else]You show Brother Horbert your progress. He nods and smiles.[end if]"	[horbert tells about quest items elsewhere]
Brother Horbert	form	"[if form is off-stage]Brother Horbert mutters something about the gift of second sight.[else]Brother Horbert says, 'If you found the reagents, surely dealing with that form will be easier!'[end if]"
Brother Horbert	Pat	"[lost-faith]"
Brother Horbert	Oscar	"[lost-faith]"
Brother Horbert	old giant	"'Well-meaning, but his wrath is misplaced. I can hear him from here. You [if giant is in lalaland]did well to listen to him[else]may learn from listening to him, but there is nothing to fear[end if].'"
Brother Horbert	Elvira	"'Perhaps she was good once. But her influence on religion is...disturbing.'"
old giant	bench	"There's not much dispute over the ownership. And the giant isn't trying to shoo you away. Maybe you should listen to the giant in general."
old giant	Elvira	"The old giant becomes momentarily more vocal and upset."
oscar	ashtray	"[if player has pipe soot]Best not to call attention to your thievery.[else]'It's not pretty, but it's mine.'[end if]"
oscar	pipe soot	"[if player has pipe soot]You don't need to mention you have it.[else]'Potpourri. Don't think you can just take it with me looking.'[end if]"
oscar	pat	"'I went there once. That SEED PIT...ugh.'"
oscar	old giant	"'Keeps my home less quiet, I'm sure!'"
oscar	Brother Horbert	"'[bh-mw].'"
oscar	Elvira	"'Hmph. Glad she's kept away from ME, so far.'"
oscar	oscar	"Oscar grumbles. 'I'm ME, you know?'"
pat	pat	"'Still holding on to the Idle Deli here.'"
pat	seed pit	"'[if mushrooms are off-stage]It scares[else]Well, it didn't scare YOU, but it'll still scare[end if] customers. It was nicer before the Poison Stripe, but I can't afford to remove it.'" [end routes]
pat	oscar	"'Him and his filthy pipe. Not welcome here.'"
pat	old giant	"'Probably not good for business.'"
pat	Brother Horbert	"'Brother Horbert means well, but he's too unfocused to DO anything by himself.'"
pat	Elvira	"'Business is bad enough. I don't need trouble with her.'"
plebe	Elvira	"[one of]The plebe looks distinctly uncomfortable but nods. Perhaps they don't agree with Elvira, but their job is to serve and protect, blah blah, especially when intimidated by authority. Hey. Maybe you could be that authority[or]You don't need to ask them again. They, like any good plebe, are intimidated by authority[stopping]." [start PRESTO]
plebe	Leo	"You tell the plebe Leo might push him aside, but no dice. Maybe a brutish word, not brute force."
plebe	Rand	"You tell the plebe Rand might push him aside, but no dice. Maybe a brutish word, not brute force."
Rand	yak	"[pal-yak]" [chum=Leo]
Rand	plebe	"[no-plebe]"
Leo	hogs	"[if Saps' Pass is unvisited]You haven't seen any hogs yet.[else if lawl wall is in lalaland]'Dat was fun. You was clever.'[else]'If only you was our size, we could just take [']em. But you ain't. No offense. Maybe you can out-clever [']em like you did us.'[end if]"
Rand	Leo	"[if Rand is washed up and Leo is washed up]We're washed up, boss. We could use a nice word.[else if Rand is fightin]This is no time for conversation![else]He flashes a thumbs-up at his friend.[end if]"
Leo	Rand	"[if Rand is washed up and Leo is washed up]We're washed up, boss. We could use a nice word.[else if Leo is fightin]This is no time for conversation![else]He flashes a thumbs-up at his friend.[end if]"
Leo	Elvira	"'I guess she's good but I'm not smart enough to know why.'"
Rand	Elvira	"'I guess she's good but I'm not smart enough to know why.'"
l-m	Elvira	"'I'm safe from her in this maze. I think?'"
m-l	Elvira	"'I'm safe from her in this maze. I think?'"
Tom Alvez	Elvira	"'I'm safe from her in this maze. I think?'"
l-m	volt maze	"[maze-end-clue].'"
m-l	volt maze	"[maze-end-clue].'"
Tom Alvez	volt maze	"[maze-end-clue].'"
l-m	m-l	"[maze-later]."
l-m	Tom Alvez	"[maze-later]."
m-l	l-m	"[maze-before]."
m-l	Tom Alvez	"[maze-later]."
Tom Alvez	l-m	"[maze-before]."
Tom Alvez	m-l	"[maze-before]."
hogs	popgun	"They snicker at the memory."
hogs	Rand	"They size him up and give a thumbs-down. Then they give you a double thumbs-down. Ouch! No respect."
hogs	Leo	"They size him up and give a thumbs-down. Then they give you a double thumbs-down. Ouch! No respect."
hogs	keys	"They snicker at the thought of you being clever or strong enough to get the keys."
hogs	Elvira	"They snicker and nod."
hogs	yourself	"The hogs smirk and flex a bit, to show they're bigger and stronger." [end presto]
trolls	Casper	"[one of]'A great man! We're sure his books are great, if you have nothing better to do than read. But he LIVED his books.'[or]'Wanna know about him, ask HIM.'[stopping]"	 [oyster]
trolls	Elvira	"'An inspiration and an example to keep our job fun!'"
trolls	h-h	"'Even more fun than here. So we hear.'"
trolls	capers	"[if stein is in lalaland][yeah-cute][else]'Hard-hitting stuff, we're sure. He's told us what's in there. Poke at it wrong, you'll upset the man himself.'[end if]"
trolls	stein	"[if stein is in lalaland][yeah-cute][else]'Don't go putting it somewhere stupid and breaking it.'[end if]"
trolls	tunes	"[if song is in reflexed][yeah-cute][else]'Don't be messing with the tunes or the amper on the jukebox. Annoy a lot of people.'[end if]"
trolls	gins sign	"[if sign is reflexed][yeah-cute][else]'Lots of people think they're really cute, like they've got something special can make them disobey that sign.'[end if]"
trolls	stumbler tumblers	"[if sign is reflexed][yeah-cute][else]'Best to cough up some tips in there. For the wait staff.'[end if]"
trolls	pre-haun	"[one of]'Hasn't bugged us yet. What, you scared of it? Aww.'[or]Asking again would just make them snicker more.[stopping]"
patrons	Casper	"'Weirdo. With his books. Even if they're books where people drink a lot.'"
patrons	trolls	"'They rather keep us in and make us spend more than kick us out.'"
patrons	Elvira	"You endure annoying pro- and anti-Elvira half-drunken banter for a bit."
Casper	pre-haun	"'I heard it's buried on the other side of the shore. Need to bring it something lost.'"
Casper	trolls	"'They are rough and ready types. I will include some of their gritty dialogue in Capers Recaps. With their permission, of course.'"
Casper	capers recaps	"Casper wants you to acknowledge he's writing it, but he's not going to hand out spoilers."
Casper	Elvira	"'She certainly knows how to seek out power. She showed that anagram chump what's what. [if player is female]She's no woman[else]He's no man[end if] of action.'"
carps	trout	"[mean-fish]!" [chum=pikes]
carps	Aunt Tuna	"[mean-fish]!"
carps	Casper	"They probably like books more violent than Casper Spacer's. If they read at all."
carps	Elvira	"'All the cool kids look up to her.'"
carps	pre-haun	"They are probably too coo-ool for ghost stories."
carps	pikes	"You could maybe set them against each other, but really, you're the strongest...life form here."
pikes	carps	"You could maybe set them against each other, but really, you're the strongest...life form here."
pikes	Elvira	"'All the cool kids look up to her.'"
trout	carps	"[if player is in range]You can ask about them later. They're pretty clearly picking on him here[else if trout is reflexive]He gives a blank look of fear[else]He feels like he can handle them and their taunts now[end if]."
trout	Elvira	"'I heard those carps and pikes liked her.'"
trout	pre-haun	"'S-s-s-scary[if trout is reflexed], even after you helped me[end if]!'"
trout	pikes	"[if player is in range]You can ask about them later. They're pretty clearly picking on him here[else if trout is reflexive]He gives a blank look of fear[else]He feels like he can handle them and their taunts now[end if]."
trout	aunt tuna	"[if carps are visible]The carps are already asking mean questions.[else]'She sure is grateful you rescued me.'[end if]"
trout	Casper	"'I don't like his books. Too violent. But Aunt Tuna thinks I read the dirty bits, anyway.'"
aunt tuna	casper	"'Those books of his! I cannot approve.'"
aunt tuna	tea	"'[if tea is in lalaland]Goodness! I cannot share the recipe[else]Try it! You'll like it[end if].'"
aunt tuna	pikes	"[bbbullies]."
aunt tuna	carps	"[bbbullies]."
aunt tuna	pre-haun	"'It is searching for a stolen treasure. They say it will wreak terrible havoc on the possessor.'"
aunt tuna	walleyes	"[fish-these-days]."
aunt tuna	sardine	"[fish-these-days]."
aunt tuna	yapper	"[fish-these-days]."
aunt tuna	h-h	"'It is a terrible place full of horrible people! But we cannot organize to drive them out.'"
aunt tuna	Elvira	"'A horrible person! No, I have never met her. But Yorpwald is the worse for her arrival.'"
aunt tuna	trout	"'He is a good boy despite no fine uncle influence, [if trout is reflexed]and you have helped him to ward off those weirdos so wired in the future[else]but those weirdos so wired may still pick on him[end if].' Tortu blushes at being treated like he might be eavesdropping."
aunt tuna	ruby	"Aunt Tuna wouldn't believe you knew anything about the jewel[if player has ruby], and seeing it might cause her heart failure[end if]."
aunt tuna	Casper Spacer	"'A vile man, I'm sure! And those BOOKS of his! Or so I've heard!'"
sardine	haunter	"'I'd be scared of it, if it existed. And if I was the one stole its jewel. We all would. Well, weak-os are, anyway.'"
sardine	Elvira	"'I wouldn't have this job if it weren't for her.'"
sardine	h-h	"'I work here. Well, I guard the outside.'"
haunter	ruby	"It acts all ghostly and asks you to take it where the ruby might be."
haunter	Elvira	"'Already marked for...' the haunter abruptly stops."
walleyes	pre-haun	"'Anything to keep the sheeple scared.'"
walleyes	ruby	"'Bet we could sell it to raise funds for the Base! But we'd keep a nice cut.'"
walleyes	sardine	"'We'll have fun narcing him out for letting you in. What? He's already gone? Eh.'"
walleyes	Casper	"'Nice books, love the violence, but too many big words.'"
walleyes	h-h	"'Nice place, eh? Especially for not being very nice at all!'"
walleyes	Elvira	"'Helps fund our little social club here.'"
yapper	dialer	"'Very complex machinery! Shouldn't be used without proper certification.'"
yapper	gleaner	"'Very pretty! I--well, I know a friend who could be bribed by it.' The yapper winks."
yapper	Casper	"'That one book. About how beating people up was more fun than riches? Rubbish.'"
yapper	ruby	"'The ruby would've been a good gift, but it's gone, now.'"
yapper	haunter	"'I'm sure I'm safe from it here. Unless--that pearl's not its jewel? No? Good.'"
yapper	sardine	"'Pft, foot soldiers, working for mere salary.'"
yapper	walleyes	"'Pft, foot soldiers, working for mere salary.'"
yapper	Casper	"'Too much violence in his books, not enough money making.'"
yapper	Elvira	"'She's called on the dialer a few times.'"
yapper	h-h	"'That's where we are.'"
butlers	Elvira	"'Well, you'd think she'd want someone active working as bouncers, but she wants quieter. What's up with that?'" [start TOWERS]
diners	Elvira	"The diners extol her taste in food. Any drip knows she's no wet blanket."
muscly sym luc	Elvira	"Sym Luc blinks and shrugs and grunts."
muscly ms lucy	Elvira	"Ms. Lucy blinks and shrugs and grunts."
pirates	Elvira	"The pirates explain colorfully how Elvira's rule has been good for piracy. Not the software or music sort that deserves jail time, but the stuff that takes real guts."
sweatier	Elvira	"The wait-seer frowns and shrugs and seems to sit extra hard, as if waiting for her reign to end."
sweatier	curst palace	"The wait-seer points to the palace and shrugs, as if to say, why?"
ingrates	Elvira	"'She's been terrible for Yorpwald! But anyone else would be even worse. That's life!'"
admirer	Elvira	"'I'm not sure if she's even better than you, or you're even better than her!'"
admirer	curst palace	"'It's not good enough for you-ou-ou!'"
grailman	Elvira	"'Even--or especially--Elvira does not deserve to see the grail yet. One of the two. I'm not sure.'"
grailman	curst palace	"'You can get there without getting by me, I bet!'"
Mel Fish	Elvira	"'I want to identify with me and not whatever nation she is promoting!'"
Lars Eede	Elvira	"'If it weren't for her I wouldn't have this job. Which kind of stinks, but...'"
Elsa Erde	Elvira	"'If it weren't for her I wouldn't have this job. Which kind of stinks, but...'"
arid den	Nerd-Aid	"'YES! NERD-AID!' booms some unseen response system in the arid den."
arid den	Elvira	"'WHETHER YOU LIKE OR HATE ELVIRA, NERD-AID TASTES GREAT!'"
atheists	Elvira	"The atheists begin yelling FACTS about Elvira, pro and con, very loudly back and forth. They contradict each other quickly. You're sorry you asked."
lois the hostile	Elvira	"'I could do even better than her...Yorpwald is missing out...'"
hostile-is-he lot	Elvira	"'Any one of us could do even better than her...Yorpwald is missing out...'"
organised	Elvira	"Staring at the ego-drains for a bit, you have to admit Elvira shows leadership, initiative, etc. You turn away feeling more self-conscious than before."
natives	Elvira	"The natives mention she says everyone deserves their own place, unless they suck, which the natives don't."
natives	curst palace	"'Why go there when you could live in the Badlands?'"
bonker	Elvira	"'She has increased bonker production by 1000%!'"
bonker	curst palace	"'It must be guarded by a thousand like me!'"
agnostic	Dr Yow	"[if agnostic is lonely and Dr Yow is in ropins]'I heard [he-she] was imprisoned. But I'd love to learn from [him-her].'[else if agnostic is lonely][one of]'Wow! You rescued [him-her]? You're almost as awesome as [he-she] is!' [ag-fol][or]'Tell me something I don't know. Or get Dr. Yow to. No offense'[stopping][else if agnostic is following]'I wanna see Dr. Yow!'[else][he-she-c]'s zoned you out, what with Dr. Yow [around-gone].[end if]"
agnostic	Elvira	"'I don't get why other people say she's so cool. They say I'm too lazy to.'"
agnostic	bot boat	"'Man, I'm learning to build stuff! [if bot boat are off-stage]Like a bot boat! [end if]But I need someone to try them.'"
agnostic	keycar	"'Those things are annoying! But it'd be neat to know how they worked.'"
agnostic	curst palace	"'It's big and scary! But it'd be fun to live in if it weren't.'"
agnostic	Atheists	"'Boy! Tell them religion has a point, and they get huffy. Thanks for deep-sixin['] [']em!'"
agnostic	hostile-is-he lot	"'Boy! Ask one question about their religion, they get huffy. Thanks for deep-sixin['] [']em!'"
agnostic	lois the hostile	"'Boy! Ask one question about her religion, she gets mad. Thanks for deep-sixin['] her!'"
agnostic	settler	"'Wow! I'm real impressed with who built this! Whatever it is. [if bot boat is visible]All I can build is mechanical stuff[else]I'd like to build something, too[end if].'"
agnostic	gizmo	"[if gizmo is off-stage]'I could use a weird tool to build things.'[else if player has gizmo]'Wow! Maybe if I knew how to build something, I could have it?' You could probably GIVE it to the agnostic, once [he-she]'s inspired to build something.[else]It's be kind of rude to ask for it back. The agnostic'll use it better anyway."
agnostic	duck	"'I'm not real big on biology. But I guess ducks are cute.'"
agnostic	toaster	"[if toaster is in actionless coastlines]'Gee, thanks for it! I'll do something cool with, I mean to, it!''[else if toaster is in Danger Garden]You think back to the toaster in the garden. It might be worth giving the agnostic, as a nice gift, if you ever leave.[else]You show the toaster to the agnostic, who's very interested, but [he-she] says [he-she][']d feel guilty taking it before actually helping you.[end if]"
Dr Yow	duck	"[if havens is unvisited]'I miss my duck! When they captured me, I was clear in a west waste.'[else if duck is not in Obscurest Subsector]'I--I'm too exhausted to get my duck. If you could bring it back--it just needs to hear my voice.'[else]'Very loyal to me. It might ignore you now, but...thank you.'[end if]"
Dr Yow	gizmo	"[if Dr Yow is in ropins]'Not enough sharp edges. It's for making things...crafting.'[else]'I'm too tired to make anything, but maybe an eager apprentice...it's a newfangled device for younguns anyway.'[end if]"
Dr Yow	bonker	"[one of]Dr. Yow facepalms a bit. You can imagine listening to that bonker was even worse if you were imprisoned, too[or]No need to dredge that up, again[stopping]."
Dr Yow	lake	"[doc-on-lake]"
Dr Yow	agnostic	"[if agnostic is in actionless coastlines]'It would be fun to tutor someone!'[else if agnostic is in Obscurest Subsector]'I bet I could teach [him-her] if I kept it interesting and exciting.'[end if]"
Dr Yow	Elvira	"Elvira probably had Dr. Yow put here, so you decide against asking."
arid den	curst palace	"If the den could talk, it would find a way to say it's more practical and motivational than the Curst Palace."
Tetris Sitter	Elvira	"'[if Tetris Sitter is reflexive]Such a bold vision for Yorpwald[else]I...I feel embarrassed ever supporting her[end if]!'"
Tetris Sitter	curst palace	"'It can be something super special. [3-random]? If only...' You got no concrete clues, but Ed's pep talk was a help[new-yerg-thing]. Maybe you can come back for another, later, if you still have no luck outside."
Tetris Sitter	crocus	"[if Tetris Sitter is reflexive]'I don't think much of unprofitable things like flowers. Used to, but not now.'[else if crocus is in lalaland]Don't push-poll him about your generosity.[else if crocus is in flowerpot]Just give him the crocus. Don't tease him.[else]'I haven't enjoyed flowers for a long time.'[end if]"
Tetris Sitter	flowerpot	"[if Tetris Sitter is reflexive]'Worthless, with or without a flower in it.'[else]'From Renato, eh? Very nice.'[end if]"
Tetris Sitter	Ornate Atoner Renato	"[if Tetris Sitter is reflexive]'Hmph. Never did cash in on his talents as much as he should have.'[else if flowerpot is reflexive]'Thank you for passing his wonderful gift on to me.'[else]'I miss him. I'd like any sign from him.'[end if]" [end TOWERS]
Ed Riley	Elvira	"'She got me this job here! It's not REAL close to where she is, but hey. She's gotten lots of people jobs, telling others what they can't do. It's a lot more fun than I thought it would be.'" [start OTTERS]
macks	Elvira	"'She would be too good for us. She deserves to have time by herself in the Edictal Citadel to the east.'"
eels	Elvira	"'The eels crackle and light up menacingly at the sound of her name.'"
Le Mer	Elvira	"'She must be defeated[if eels are reflexed]. You can lead the troops to do so[end if].'"
Mr Lee	Elvira	"'She must be defeated[if p-2 is in lalaland]. You must be the one to lead us[else if ghoul hat is in lalaland]. You might be that person. Just one more sign[else]. If you are not with her, show me a sign[end if].'"
ocelots	Elvira	"They shudder[at-elvira]."
satyr	Elvira	"He shudders[at-elvira]."
leopard	Elvira	"It shudders[at-elvira]."
badger	Elvira	"It shudders[at-elvira]."
snail	Elvira	"It shudders."
snipe	Elvira	"It shudders."
racoon	Elvira	"It shudders."
hornets	Elvira	"The buzzing seems almost angry."
Elmer	Merle	"'Almost as interesting as me.'"
Merle	Elmer	"'Almost as interesting as me.'"
Merle	Elvira	"'She is up to something interesting to the west, you'll have to admit. And you'll have to trust us.'"
Elmer	Elvira	"'She is up to something interesting to the west, you'll have to admit. And you'll have to trust us.'"
Elvira	Gretta	"'Not as unselfish as she thought she was.'"
Elvira	Mr Lee	"'Hopeless. Paranoid.'"
Elvira	eels	"'Their electric shocks would be useful--but they didn't let me harness them.'"
Elvira	Le Mer	"'Not dangerous.'"
Elvira	Merle	"'He will get his reward. Even if he hadn't let you by.'"
Elvira	Elmer	"'He will get his reward. Even if he hadn't let you by.'"
Elvira	Ed Riley	"'I didn't expect much from him.'"
Elvira	whiners	"[if whiners are in Anteroom]She's not going to HELP you with them[else]You explain you got past them, and she shrugs[end if]. Henchmen these days. That's why they're henchmen and not leaders."
Elvira	sly imp	"[if imp is in Anteroom]She's not going to HELP you with the imp[else]You explain you got past it, and she shrugs[end if]. Henchmen these days. That's why they're henchmen and not leaders."
sly imp	Elvira	"'Oh, you know her too? Of course you don't! If you did, you'd know you couldn't go beyond here.'"
whiners	Elvira	"They bang on about how Elvira would be furious if they let someone see the animals to the south."
Elmer	Elvira	"'She is a great leader. You do not deserve to visit her to the west.'"
Gretta	Elvira	"[if macks are visible]Gretta cringes even more at hearing Elvira's name, but she can't do much with those macks around, and neither can you[else]You are already talking about Elvira[end if]." [end OTTERS]
curtis	rampage note	"'[if rampage note is off-stage]What note? You can't pin that on me.[else]None of your business.[end if]'" [start OTHERS]
curtis	mopeage rant	"'[if rampage note is off-stage]What note? You can't pin that on me.[else]None of your business.[end if]'"
curtis	Art Erd	"[one of]Curtis breathes deeply and gives a look of contempt and shakes his head[or]No point asking again[stopping]. Curtis probably doesn't want to know if any fruit came from [him-her]."
curtis	Len Craig	"'A bit of a salesman, but he has some goods. Just--we're not on great terms, so maybe you can...'"
curtis	Elvira	"'She was terrible for business and innovation. Things are picking up again now, though.'"
Art Erd	curtis	"'There's people with silly science ideas like him, then there's businessmen like ME. Pfft.'"
Art Erd	storage box	"'[if storage box is in scape space]It's...umm...worth something.[else]You bought it[end if].'"
Art Erd	len craig	"[icy-len]"
Dr Tera	len craig	"[icy-len]" [this just gets rid of an annoying error at the start]
Art Erd	Elvira	"'She wasn't as bad as she was smeared to be!'"
len craig	curtis	"[one of]'Nice fella, lots of ideas about agriculture, but no business sense. Just sits looking for someone to do his dirty work for him. You don't...'[or]You don't want to admit Curtis has you gofering. Though, really, it's been not too bad, with your powers.[stopping]"
len craig	tekno-token	"[if tekno-token is off-stage]'We accept tekno-tokens, yes.'[else][one of]He inspects the token and says it's valid[or]If you ask again, Len might question its validity[stopping].[end if]"
len craig	elvira	"'Less said, the better.'"
len craig	Art Erd	"Len snorts and shakes his head. 'What a weasel.'" [end OTHERS]

to say bh-mw:
	say "Brother Horbert means well, but he's too unfocused to DO anything by himself"

to say at-elvira:
	say " at the name. You quickly give assurance where you stand"

to say icy-len:
	say "'Nicely? Len? Icy!' [he-she] mutters. 'Cut Len's cluster...'"

check objasking about Dr Tera when player is female:
	try objasking noun about Art Erd instead;

to say endorse-aid:
	say "it's endorsed by [one of]Adi Dern[or]Red Dina[or]Ned Radi[or]Ed Nardi[or]Ed Indar[or]Ed Darin[or]Nerd Ida, of course[or]--well, you can Add Erin, Reid, Dan to the list of endorsers[cycling]--they see red when you ask who THAT is"

check objasking Elvira about an animal:
	if second noun is in Lamer Realm or second noun is in perverse preserve:
		say "'Elvira scrunches her face up. 'Oh! I love animals! They help me in many...WAYS. Even if they're just...wimpy.'" instead;

to say mean-fish:
	say "They'd have nothing nice to say, and you don't need to encourage them. Take action instead";

to say fish-these-days:
	say "Aunt Tuna probably has a lecture prepared about fish these days. One that won't help you go hunt a hangout";

ag-cheat is a truth state that varies. ag-cheat is false.
ag-guar is a person that varies. [ag-guar is usually nothing.]

check objasking agnostic about (this is the agnostic can spoil rule):
	if second noun is lois the hostile and agnostic is male:
		say "'Wow! It woulda been too much to have anyone more snooping around.'" instead;
	if second noun is hostile-is-he lot and agnostic is female:
		say "'Wow! It woulda been too much to have anyone more snooping around." instead;
	if second noun is in lalaland:
		if second noun is not atheists and second noun is not the-hostile and second noun is not lois:
			say "That's out of the way." instead;
		else:
			say "The agnostic doesn't want to be reminded, probably." instead;
	unless second noun is guardian or second noun is curst palace:
		continue the action;
	if ag-cheat is false:
		if second noun is curst palace:
			say "[ag-first] puts [his-her] hand to [his-her] face, then mumbles 'Sorry, eleven letters is too much. Maybe something shorter.'" instead;
		choose row with the-from of second noun in the table of towers anagrams;
		now ag-guar is the-from entry;
		now ag-cheat is true;
		say "[ag-first] sits and thinks a few seconds after you tell [him-her] where you were stuck. 'Yeah, you just say [right-word entry in upper case]. That'll do it.' [he-she-c] looks kind of bored, though. Probably not nice to push [him-her].";
		preef the-from entry instead;
	else:
		if ag-guar is not noun:
			say "[ag-first] mumbles [he-she]'s bored with word games." instead;
		if ag-guar is in lalaland:
			say "You thank [ag-first] for helping you out." instead;

doc-cheat is a truth state that varies. doc-cheat is false.
doc-guar is a person that varies. [doc-guar is usually nothing.]

check objasking Dr Yow about:
	if Dr Yow is in ropins:
		say "[he-she-c] doesn't need the added pressure, but maybe [he-she] can give a bit of help once [he-she]'s out." instead;
	if second noun is in lalaland:
		if second noun is not bonker:
			say "You don't need to worry about that, now." instead;
	else if second noun is a guardian or second noun is curst palace:
		if doc-cheat is false:
			if second noun is curst palace:
				say "Dr. Yow scrunches [his-her] head a bit, then shrugs. 'Ouch. Eleven letters. Maybe if it was shorter. Unless you mean getting there...you'd need a craft to cross Leak Lake to the northeast.'" instead;
			choose row with the-from of second noun in the table of towers anagrams;
			now doc-guar is the-from entry;
			now doc-cheat is true;
			say "Dr. Yow sits and thinks a minute after you tell [him-her] where you were stuck. 'Mm, yes. Of course, of course. I'd think you just say [right-word entry in upper case] should work.'";
			preef the-from entry instead;
		else:
			if doc-guar is not noun:
				say "Dr. Yow rubs [his-her] temples. [he-she-c]'s probably up to more technical stuff, now." instead;
			if doc-guar is in lalaland:
				say "You thank Dr. Yow for helping you out." instead;
			choose row with the-from of second noun in the table of towers anagrams;
			say "No, you remember, it was [right-word entry in upper case].";

check objasking len craig about a fruit:
	if player has second noun:
		if second noun is raspberry or second noun is pineapple or second noun is grapefruit or second noun is blackberries or second noun is strawberries:
			say "'A nice fruit, and it's fresh, but I'm selling today.'";
	else if second noun is visible:
		say "You are about to haggle, but Len looks at you just SO. You need to go about things the right way.";
	else if second noun is in lalaland:
		say "You don't need to get Curtis any more of that.";
	else if second noun is kumquat or second noun is papayas:
		say "Len looks at you askance, not sure how you know about those fruits.";
	else if second noun is mango:
		say "Someone else has [']em, if you look around, or about, a-ways.";
	else:
		say "'A fine fruit, but I don't deal in that. Maybe someone else does.'";
	the rule succeeds;

to say no-plebe:
	say "'I respect da military too much to push him outta da way. Plus I can't yell clever neither.'"

to say bbbullies:
	say "She seems more worked up about them than Tortu was[if trout is reflexed], even after your lesson[end if]. But she means well"

to say yeah-cute:
	say "[if silly-acts is 1]The trolls patronize you not to try any more funny stuff.[else if silly-acts is 2]The trolls mention they can still take a little more of your destructive nonsense. They've seen worse. And dealt with it, too.[else]The trolls shoot you a look that says both stay here and get lost at once. Best not to bait them any more.[end if]";

to say lost-faith:
	say "'One of many of my flock who have lost faith they can help.'[no line break]";

to say maze-end-clue:
	say "'I was told not to congratulate myself if I made it to the start, from point Z to point A. Not that I was told the way through";

to say maze-before:
	say "'Oh! You met him? I hope he helped you a bit. He told me about the weird scanner you have.'"

to say maze-later:
	say "'Oh! He'll drop by later. I hope you don't need his help too much.'"

check objasking a warrior about a warrior:
	if noun is rodney:
		if second noun is in lalaland:
			say "No gloating, now" instead;
		if second noun is off-stage:
			say "I don't think you want Rodney to call up reinforcements." instead;
		say "[if second noun is rodney]You probably know what he thinks of himself[else]You doubt Rodney would tell you [second noun]'s weakness[end if]." instead;
	if second noun is rodney:
		say "You wouldn't expect to hear any secrets. Rodney's got [noun] scared." instead;
	say "[if second noun is not visible]Who?[else]You probably won't be able to start dissent that way. Better to [pick-keep]." instead;

check objasking a warrior about curst palace:
	say "He only knows he's supposed to defend it from you. He probably wasn't given any secrets to divulge." instead;

to say pick-keep:
	if number of warriors in lalaland > 0:
		say "keep picking";
	else:
		say "pick";
	say " off Rodney's gang ";
	say "[if number of warriors in lalaland < 3]one by one[else] though you probably don't need to[end if]";

to say around-gone:
	say "[if Dr Yow is visible]around[else]gone"

table of general-blather	[ask x about any old unusual subject]
him-who	topic	him-say
nestor	"life"	"'Life is, like, the time of your life!'"
nestor	"father" or "his father"	"You have a country to save. Don't waste time shaming recreational drug users."
Gunter	"nat egam" or "nat/egam" or "tan mage" or "tan/mage"	"He and you are up to no good, I'm sure."
Dr Yow	"key"	"Dr. Yow shrugs. If [he-she] knew where a key was, [he-she]'d find it."
idg	"vitamins/nativism" or "nativism vitamins"	"'Nice an crunchy. Taste good too."

table of object-blather [this gives people default things to say about stuff, if they are not terse.]
person-subj	right-region	him-say
Elvira	--	"'Everyone has an opinion about her, that's for sure. But many people are afraid to say the wrong thing. Or say it the wrong way.'"
settler	--	"You don't think anyone can help you [if Elmo is in lalaland]more than Elmo did [end if]with that."
pedanto-notepad	--	"The pedanto-notepad is yours and private. Nobody can help you decipher it--hopefully it is clear enough."
curst palace	towers	"'[if Mislit Limits is visited]Maybe you can restore it[else]You'll never get there[end if]!'"
haunter	oyster	"'It was looking for its lost jewel! We thought it was buried, but it appeared somewhere.'"

table of popular-blather	[ask anyone about specific topic. Yeah, this fizzled.]
topic	right-region	him-say
"yorpwald"	--	"That might suck you into a boring discussion about politics. Or, worse, an exciting one."
"nat egam" or "nat/egam" or "tan mage" or "tan/mage"	--	"Asking about him might blow your cover."

to decide which number is ag-moves: [hacky but simple and easy to prove. Inapt/swarm = force you 2W. SWSE or WSSE are only possible 4-movers. 2 + 2 * how many squares west you must go to go all the way south.] [??re-sort things]
	if ego drains are in lalaland:
		decide on 2;
	if Mel Fish is not in lalaland:
		decide on 6;
	if grailman is in lalaland or reed's ale is in lalaland:
		decide on 4;
	decide on 6;

to say ag-fol: [h]
	if ag-moves is 2:
		say "It's a quick walk back to the subsector with [relig-mf] and ego-drains gone.";
	else if ag-moves is 4:
		say "You loop around a bit past guardians you haven't cleared.";
	else if ag-moves is 6:
		say "You regret not clearing more guardians--the agnostic is nice, but [he-she] sure can TALK and loves to kibitz about who's hanging around, and how and why you could've figured things out, leaving you a bit too exhausted to show HOW you work your magic. And a little embarrassed. You mumble something about being practical. Plus the long walk may help the agnostic sit and listen. You hope.";
	now agnostic is found;
	now atblock is in Obscurest Subsector;
	move agnostic to obscurest subsector;
	move player to obscurest subsector;

chapter basic nonos

check going (this is the odd direction cue rule):
	if noun is up or noun is down or noun is inside or noun is outside:
		if the room noun of location of player is nowhere:
			say "The game should tell you when you are able to go [noun]. You'll mostly need to use the four cardinal directions here." instead;

the odd direction cue rule is listed before the can't go that way rule in the check going rulebook.

section diagonal moves

a direction can be diagonal. a direction is usually not diagonal.

northeast,southeast,northwest,southwest are diagonal.

before going (this is the reject diagonals rule):
	if noun is a diagonal:
		if player is in actionless coastlines and noun is northeast:
			try going north instead; [crossing leak lake]
		say "[one of]Intermediate? Terminate! Die![or]Diagonals?! A sad lingo.[or]Diagonals?! So anal. Dig?[in random order][one of][line break][i][bracket]Note: this game's confusing enough without diagonal directions. If you can't find a way to go, type EXITS.[close bracket][r][or][stopping][line break]" instead;

check going:
	if the noun is up or noun is down:
		if the room noun of the location of player is nowhere:
			say "if there is a way [noun], it should be clear in the description. Hopefully. If not, try EXITS." instead;

book reading (vs just examining)

The reading action translates into I6 as "Read".

Understand the commands "r" and "read" as something new.

Understand "r [something]" and "read [something]" as reading. Reading is an action applying to one thing, requiring light.

does the player mean reading the player: it is very unlikely.
does the player mean reading the chic loner chronicle: it is likely.
does the player mean reading the novella: it is likely.

carry out reading:
	if noun is novella:
		read-lowest-page;
		the rule succeeds;
	if noun is red writing:
		d "[list of readable things]";
		if number of readable things is 0:
			say "No writing around here on anything." instead;
		if number of readable things is 1:
			try examining a random readable thing instead;
		say "Too much to read." instead;
	if noun is a to-read listed in the table of readables:
		choose row with to-read of noun in table of readables;
		if there is a what-read entry:
			say "[what-read entry][line break]" instead;
		try reading alt-read entry instead;
	if noun is large regal lager:
		try examining rubbish story instead;
	if noun is drinks stand:
		try examining blurbs instead;
	try examining noun instead;

the red writing is a backdrop. the indefinite article of red writing is "some". the writing is everywhere. description of writing is "BUG. You should've been kicked to something to read. Let me know how this happened at [email].". understand "words" and "red/-- letters" as writing.

does the player mean reading ltb: it is very likely.
does the player mean reading the red writing when number of readable things > 0: it is likely.
does the player mean reading the red writing when number of readable things is 0: it is unlikely.
does the player mean examining the red writing when number of readable things > 0: it is likely.
does the player mean examining the red writing when number of readable things is 0: it is unlikely.

last-read is a thing that varies.

does the player mean reading last-read when last-read is visible: it is likely.

instead of doing something with red writing:
	if current action is examining or current action is reading:
		if number of readable things is 0:
			say "No red writing around here on anything." instead;
		d "[number of readable things]: [list of readable things].";
		if number of readable things is 1:
			try reading a random readable thing instead;
		if last-read is visible and last-read is not the player:
			try reading last-read instead;
		say "That's sensible but ambiguous here with so much to look at--the preferred verb is to READ one of [the list of readable things]." instead;
	 if current action is objhinting:
		continue the action;
	if number of readable things is 0:
		say "There's no red writing here to do anything with." instead;
	say "You can really only read the writing." instead;

definition: a thing (called cand) is readable:
	if cand is not a to-read listed in table of readables, decide no;
	if cand is not visible, decide no;
	if cand is the player, decide no;
	decide yes;

table of readables [tre]
to-read	what-read	alt-read
sitar	"Oh, right. You bought it from Trisa Israt." [means manse]
rifle	"It's kind of tricky to read red writing on a red gun, but it appears to be an Irelf-Efril rifle."
pastel plates	"EPSTAL is written as an author's signature."
Store H	"'All who enter here risk exclusion. Closed for having a truly frightening HOSTER. Trespassers will be, er, shot. - E. S. Roth'" [stores]
cravings carvings	"When you squint the right way, 'SPEED IT? SIT. DEEP.' is written in red." [routes]
ltb	"You can't get settled. Everything seems too general or too specific, and as you read, you hear voices from the past: 'What a spaz! [if player is female]She[else]He[end if] needs to learn to, like...!' They always acted as if it was so simple.[paragraph break]However, there must be some simple way to focus and move on."	[troves]
DIVORCES	"All sorts of articles that make you see red. This one's about [one of]Rod's Vice[or]Rev. Disco[or]VeriDocs[or]someone who Scored IV[in random order],"
card	"[one of]A message: Derp on, Epdorn![or]The message is from Dr. Peno & Ned Orp.[cycling]"
volt maze	"[one of]The writing says EZ-Ol[']-Av['] (TM) Volt Maze. [or]Olav Metz and Zemo Valt were the main architects. [or]It was built by Olav Metz and Zemo Valt of EZ-Ol[']-Av[']. [cycling] You can read it again to see the [one of]architects[or]company[or]architects and company[stopping]." [presto]
sport ports	"TOP'RS is the name of the firm who built the Sport Ports, carved in red."
drab yoke	"It is, apparently, an OAK DERBY drab yoke, from the small red print."
jar of pills	--	ps	[oyster]
stein	"The stein reads TIENS in red, trying to be foreign and exotic, maybe."
jukebox	"Complicated instructions for, of all things, how to turn off the tunes currently playing. Always tunes, never songs. [one of]Do, undo[or]Reset, set[or]Do, undo, set, reset? Hm[cycling]."
tumblers	"PITS is written in red on the bottom of some tumblers."
scrawl	"[if carps are visible][reject][else]Etahn Ru. Near-Hut Haunter.[end if]"
gleaner	"The gleaner was made by Al Green, written in red."
dialer	"A red warning courtesy of I. ALDER says the letters can be shuffled but not LAIRED."
strudel	"DR. ELTUS recommends this strudel!"	[towers]
keycar	"When the car slows a bit, you read [one of]product of KC AYER[or]property of RAY ECK[in random order] in a different shade of red than the car. Maybe the other side has more information."
fluster self rut	"You focus and see that the brand is TRU-SELF. Which would make you see red on general principles[one of]. There might be more if you read again[or]. There are also weird furlets around it[stopping]."
Thearchy Hatchery	"[if the-hostile is in lalaland]The Hatchery reads, in red, THE LOIS SIT HOLE! But you don't need clues any more.[else]THE LOIS SIT HOLE is written on the Thearchy Hatchery in red.[end if]"
Dinger	"You notice it was co-authored. Di Regan and Ned Riga. The names elevated, embossed, in red."
prison	"Part of the red writing on the prison says [one of]Made by DunkelCo[or]Made in LOUDNECK[or]CONKLUDE there's no way to break in[or]Designed by EL CUNDOK[cycling]. There're two other bits to read."
blaster	"ALBERT'S."
cinders	"[one of]You see red realizing you aren't as crafty as Sr. Indec reading the cinders[or]You recall somehow that NRD ICES work[or]You see red having no access to IC Nerds who'd know what's what[in random order]."
p-2	"One barely legible bit reads [one of]Eeh, Row V![or]Veer How?[or]Rev. Howe[or]Whereov[in random order]."	[otters]
whistle	"[if player does not have whistle]You strain your eyes to see that [end if]Ed Plye, apparently, made the whistle."
drinks stand	--	blurbs	[others]
eerie blurbs	"One reads [one of][']ERE IS RUBBLE[or]REEL? RISE, BUB[or]RUBBER I ELSE[or]RUBLE BEE, SIR[or]REEL RUSE BIB[in random order], and it makes you see red."
riot cap	"It's red and [one of]made of I-TARP-CO material[or]designed and shaped by CAPTOR-I, whoever they are[in random order]."	--
mad train	"DR. NIMATA."
mean trowel	"It's designed by Newt L'Amore, along with Mr. Owen Late, to help you avoid a Moaner Welt."
orange	"It's stamped with the word ENGARO in red."
singed design	"The singed design on the [if player has coins or player has s-c]coins[else if player has coin]coin[else if player has icon]icon[else if player has icons]icons[else]BUG[end if] reads, when you look close, property of NISCO."

book quips

[added this to check if a quip is gone-through. Artistic is not used, but yeah...]

a quip can be mowered, artistic or dormant. a quip is usually dormant.

section debugging

[this checks to see if lawnmowering worked. What is left over?]

to lawnmower (mytab - a table-name) :
	if debug-state is false:
		continue the action;
	let mower be true;
	repeat through mytab:
		if response entry is not mowered:
			say "DEBUG: Did not touch [response entry]: [prompt entry][line break]";
			now mower is false;
	if mower is true:
		say "DEBUG: Lawnmowering worked.";

chapter quip-variable-text

to say satchel-extra:
	if satchel is bscanned:
		continue the action;
	if satchel is not in Largely All-Grey Gallery:
		say "quickly go back to the study for the satchel, ";
	say "scan the satchel [if satchel is not escanned]both ways[else]the way you didn't[end if] and ";

to say mo-data:
	say "[one of]More data[or]Even more data[or]Ok, lots of stuff to look at[stopping]";

last-yays is a number that varies.

section settler color deduction text

[some of these are blank in case I decide to add another clue]

to say current-known:
	let yays be 0;
	let itxt be indexed text;
	now itxt is "Red:";
	repeat through table of known-letters:
		if v-c-y entry is 1:
			follow the my-rule entry;
			if the rule succeeded:
				increment yays;
				now itxt is "[itxt][my-let entry]";
	say "[itxt]";
	now itxt is "Yellow:";
	repeat through table of known-letters:
		if v-c-y entry is 2:
			follow the my-rule entry;
			if the rule succeeded:
				increment yays;
				now itxt is "[itxt][my-let entry]";
	say "[itxt]";
	consider the got-y rule;
	if the rule succeeded:
		increment yays;
		say "Orange: Y.";
	if yays is last-yays:
		say "Hmm, nothing new from that...";
	now last-yays is yays;

this is the got-a rule:
	if scale-quip is mowered or basement-quip is mowered:
		the rule succeeds;
	if stable-quip is mowered:
		the rule succeeds;
	if ramp-quip is mowered:
		the rule succeeds;
	if painting-quip is mowered:
		the rule succeeds;
	if stair-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-b rule:
	if stable-quip is mowered:
		the rule succeeds;
	if basement-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-c rule:
	if scale-quip is mowered:
		the rule succeeds;
	if chimney-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-d rule:
	the rule fails.

this is the got-e rule:
	the rule succeeds.

this is the got-f rule:
	the rule succeeds.

this is the got-g rule:
	if gulp-quip is mowered:
		the rule succeeds;
	if painting-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-h rule:
	if chimney-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-i rule:
	the rule succeeds.

this is the got-j rule:
	the rule fails.

this is the got-k rule:
	the rule fails.

this is the got-l rule:
	if gulp-quip is mowered:
		the rule succeeds;
	if elmomole-quip is mowered:
		the rule succeeds;
	if scale-quip is mowered:
		the rule succeeds;
	the rule succeeds.

this is the got-m rule:
	if elmomole-quip is mowered:
		the rule succeeds;
	if basement-quip is mowered:
		the rule succeeds;
	if chimney-quip is mowered:
		the rule succeeds;
	if ramp-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-n rule:
	if basement-quip is mowered:
		the rule succeeds;
	if chimney-quip is mowered:
		the rule succeeds;
	if painting-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-o rule:
	if elmomole-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-p rule:
	if gulp-quip is mowered:
		the rule succeeds;
	if chimney-quip is mowered:
		the rule succeeds;
	if ramp-quip is mowered:
		the rule succeeds;
	if painting-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-q rule:
	the rule fails.

this is the got-r rule:
	the rule succeeds.

this is the got-s rule:
	if scale-quip is mowered:
		the rule succeeds;
	if stable-quip is mowered:
		the rule succeeds;
	if stair-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-t rule:
	if stable-quip is mowered:
		the rule succeeds;
	if basement-quip is mowered:
		the rule succeeds;
	if painting-quip is mowered:
		the rule succeeds;
	if stair-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-u rule:
	if gulp-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-v rule:
	the rule fails.

this is the got-w rule:
	the rule fails.

this is the got-x rule:
	the rule fails.

this is the got-y rule:
	if chimney-quip is mowered:
		the rule succeeds;
	the rule fails.

this is the got-z rule:
	the rule fails.

table of known-letters
my-let	my-rule	v-c-y [vowel=2 consonant=1 Y=3]
" A"	got-a rule	2
" B"	got-b rule	1
" C"	got-c rule	1
" D"	got-d rule	1
" E"	got-e rule	2
" F"	got-f rule	1
" G"	got-g rule	1
" H"	got-h rule	1
" I"	got-i rule	2
" J"	got-j rule	1
" K"	got-k rule	1
" L"	got-l rule	1
" M"	got-m rule	1
" N"	got-n rule	1
" O"	got-o rule	2
" P"	got-p rule	1
" Q"	got-q rule	1
" R"	got-r rule	1
" S"	got-s rule	1
" T"	got-t rule	1
" U"	got-u rule	2
" V"	got-v rule	1
" W"	got-w rule	1
" X"	got-x rule	1
" Y"	got-y rule	3
" Z"	got-z rule	1

y-orange is a truth state that varies.

to say y-know:
	now y-orange is true;

section gretta

gre-go-warn is a truth state that varies.

to say gre-other:
	say "[if gre-what-quip is mowered]Remember[else]I didn't tell you[end if] her army can't leave the Edictal Citadel...yet. And she won't. [if gre-east-quip is mowered]You may need help from other than people[else]The animals I told you about--they could do something[end if]";

to say note-gretta:
	unless gretta-quip is mowered:
		say "'Oh, you should know--Gretta Garett-Tatger, the journalist, has become a target--sorry about that--for looking into Elvira's operations. Gretta may've left a hint in the Strip of Profits, and she may have something for you, if you find her. So, um, yeah, good idea, write that down.'[paragraph break]";
		pad-rec-q "Gretta";

section quip random useless fun text

[the part-list takes from 5x+1 to 5x+(fi-1)%5 + 1 & is useful for when I want to display a few things at once. The 5 is for when I need 2 short lists.]

to say part-list of (tt - a table-name) and (fi - a number): [unused]
	let lonum be fi - (the remainder after dividing fi - 1 by 5);
	repeat with idx running from lonum to fi:
		choose row idx in tt;
		say "[if idx is fi and idx > lonum]and [end if][blurb entry][if idx < fi - 1], [end if]";

to say biop of (ts - a truth state):
	if showtabname is true:
		say "(table of biopics)";
	repeat through table of biopics:
		if there is a fave entry:
			if fave entry is ts:
				say "[blurb entry]";
				continue the action;
		else:
			say "BUG should not be neutral";
	say "BUG no biopic found";

to say check-started-yet:
	set pronoun it to medals;
	set pronoun them to medals;
	let prefigs be 0;
	let southfigs be 0;
	if p-2 is prefigured:
		increment prefigs;
		increment southfigs;
	if ghoul hat is prefigured:
		increment prefigs;
		increment southfigs;
	if eels is prefigured:
		increment prefigs;
	if sea cube is prefigured:
		increment prefigs;
	if prefigs is 4:
		say ". Everything you tried will probably work now";
	else if prefigs is 3:
		say ". You may be able to do a lot in the [if southfigs is 1]pool[else]barn[end if], now";
	else if prefigs is 2:
		say ". You made [if southfigs is 1]some progress to the north and south[else if southfigs is 2]progress to the south[else]progress to the north[end if]";
	else if prefigs is 1:
		say ". Maybe you can go back to the [if p-2 is prefigured or ghoul hat is prefigured]barn[else]pool[end if] and do some work now";

before QBC responding with (this is the warn you before bailing from a convo rule):
	let cur-act be a number; [this is kind of cutesy code. Basically, it checks to see if Player Choice is equal to the # of available choices. If so, it warns you.]
	now cur-act is 0;
	if debug-state is true and number understood is 0:
		if Elmo is visible:
			deliver the bye-Elmo-quip quip instead;
		if Gunter is visible:
			deliver the leave-quip quip instead;
		if Elvira is visible:
			deliver the final-quip quip instead;
	if current quip is leave-quip:
		if Elmo is visible:
			repeat through table of Elmo comments:
				increase cur-act by enabled entry;
			if number understood is cur-act:
				say "Conversation conservation, eh...spells less help.";
	if current quip is quip_null:
		if Elvira is visible:
			say "She talks softly, oft-sly.[line break]";
		if Gunter is visible:
			repeat through table of Gunter comments:
				increase cur-act by enabled entry;
			if the number understood is cur-act - 1:
				say "'So rude!' says Gunter, roused, soured.";

before quipping when player is in frontage (this is the Gretta checks rule):
	now hold-it-up is false;
	let missed-one be false;
	if current quip is gre-go-quip:
		if gre-go-warn is false:
			now gre-go-warn is true;
			repeat through table of Gretta comments:
				if response entry is not mowered and response entry is not gre-go-quip:
					d "[response entry].";
					now missed-one is true;
			if missed-one is true:
				say "'Oh--um, yeah, don't feel you're holding me back. I sort of want to get away, but I know a few things that could help you,' Gretta says. Stay and ask a bit more?";
				if the player direct-consents:
					say "A bit of awkward silence follows, but it's nowhere near as awkward as the macks['] conversation.[no line break]";
					now hold-it-up is true;
					continue the action;
				say "OK.";
				continue the action;

instead of abouting or creditsing or xyzzying or requesting the score when rq is active:
	say "[convoforce]." instead;

to say convoforce:
	if Gunter is visible:
		say "'Rebuts, buster? Respond! No derps!'[paragraph break]You can't get away, here. But you can RECAP to see your options";
	else if rifle is visible:
		say "Elmo doesn't seem to want to fire the gun. He doesn't even want to use it. Maybe you can help him get rid of it";
	else if Elmo is visible:
		say "No need to poke around when you have someone willing to help you--especially since it means less time for him to escape afterwards.[paragraph break]You can RECAP to see your options";
	else if Elvira is visible:
		say "'Good fail of dialog!' Elvira can negotiate awkward silence better than you can.[paragraph break]You can RECAP to see your options";
	else if Gretta is visible:
		say "Gretta looks around uneasily, but she doesn't seem to be glaring at you. So you should probably listen up, or you can RECAP to see your options";

to decide whether the action is blathery:
	if asking about, yes;
	if asking generically, yes;
	if objasking generically, yes;
	if objasking about, yes;
	no.

before doing something when Gunter is visible:
	if current action is examining:
		if noun is not Gunter:
			say "You feel a little guilty not keeping eye contact and all that jazz, but you're still hearing Gunter okay, you guess.";
		continue the action;
	if current action is attacking:
		say "That'd just give the Penal Panel one more excuse." instead;
	if action is blathery:
		say "Gunter's kind of leading the conversation, here." instead;
	if current action is not talking to urgent Gunter and current action is not QBC responding with:
		say "[convoforce].";
		reject the player's command;
	continue the action.

before doing something when Elmo is visible:
	if current action is scaning Elmo or current action is examining Elmo:
		say "[if rifle is visible]You worry about making any quick movements, even though he doesn't look...enthusiastic about this situation, almost gazing at his rifle with disgust. Maybe you could get rid of the rifle[else]Talk with him, instead[end if]." instead;
	if rifle is visible:
		if current action is swearing obscenely or current action is swearing mildly:
			say "No need for that. Shouldn't be too hard to figure what to do with the rifle." instead;
		if current action is ss0ing or current action is ssing:
			say "You can't afford sudden or elaborate movements, but well, there's that rifle." instead;
		if current action is singing:
			say "That's not what the high sign is for." instead;
		if current action is waiting:
			continue the action;
		if current action is going:
			say "Back in the Means Manse won't help, and Elmo won't let you by." instead;
		if action is procedural, continue the action;
		if word number 1 in the player's command is "talk" or word number 1 in the player's command is "ask" or word number 1 in the player's command is "say" or word number 1 in the player's command is "tell":
			say "You aren't brave enough to say 'Disarm, mad sir!'" instead;
		say "You can't do much with Elmo around." instead;
	if action is blathery:
		say "You don't want to go off on any tangents, here." instead;
	if current action is not talking to Elmo and current action is not QBC responding with:
		say "[convoforce].";
		reject the player's command;

before doing something when player is in Reclusion Inclosure and current quip is not final-quip (this is the Elvira forces initial convo rule):
	if current action is fliptoing medals:
		say "You'll never out-talk Elvira." instead;
	if current action is fliptoing whistle:
		say "You'd feel rude playing that whistle during a conversation, even one with Elvira." instead;
	if current action is fliptoing:
		say "You'll have to finish this chat first." instead;
	if action is procedural, continue the action;
	if action is blathery:
		say "Elvira's not going to give you any useful information." instead;
	if current action is not talking to Elvira and current action is not QBC responding with:
		say "[convoforce]." instead;

talked-to-Elmo is a truth state that varies.

one-Elvira is a truth state that varies.

to enact (myq - a quip):
	if myq is mowered:
		d "[myq] already tried.[line break]";
		continue the action;
	[d "[myq] enabled.[line break]";]
	enable the myq quip;

hold-it-up is a truth state that varies.

before quipping when current quip is bye-Elmo-quip (this is the Elmo pulls you back for hints rule):
	if got-it-quip is not mowered and showset-quip is not mowered and still-no-gp-quip is not mowered:
		say "Elmo checks you for a second. 'You sure you know how to use the settler?'";
		if the player yes-consents:
			say "You nod. 'No clues counsel.'";
			continue the action;
		say "You shake your head and go back to thinking why the settler might flicker yellow/green on the lamp and so forth.[no line break]";
		now hold-it-up is true instead;
	if interr-quip is not mowered:
		say "Hm, maybe Elmo has something useful to say. Skip to that part of the conversation?";
		if the player direct-consents:
			say "Elmo notices your haste and nods. 'Okay, first things first, I think I know where you need to go.'";
			enact bye-elmo-quip;
			disable the interr-quip quip;
			disable the orange-dunno-quip quip;
			disable the orange-know-quip quip;
			now current quip is interr-quip;

to decide whether its-all-scanned:
	repeat with rb running through ramabits:
		if rb is not bscanned, decide no;
	decide yes;

to decide whether nothing-scanned:
	repeat with rb running through ramabits:
		if rb is escanned, decide no;
	decide yes;

definition: a quip (called myq) is doable: [Inform doesn't like "enabled quip"]
	choose row with response of myq in the table of Elmo comments; [?! bad if other conditional]
	if enabled entry is 1:
		decide yes;
	decide no;

a quip can be Elmo-av. a quip is usually not Elmo-av.

definition: a quip (called myq) is clue-acc:
	unless myq is Elmo-av, decide no;
	if myq is mowered, decide no;
	decide yes;

to another-Elmo-hint:
	if number of clue-acc quips is 0:
		continue the action;
	let myq2 be a random clue-acc quip;
	enact myq2;

to open-elmos-hints:
		enact the strip-quip;
		enact the artsy-quip;
		enact the clues-quip;
		enact the trips-quip;

ramabits is a list of things variable. ramabits is { farm plot, platform, event map, pavement, brass crag, crabgrass, pedestal, steel pad }

after quipping when qbc_litany is the table of Gunter comments:
	if current quip is summary-quip:
		pad-rec-lump "Elvira";
		pad-rec "SHATTER-THREATS";
		enact the necro-quip;
		enact the powers-quip;
		enact the gustave-quip;
		enact the clown-quip;
		enact the leave-quip;
	else if current quip is gustave-quip:
		enact the pouter-quip;
	else if current quip is pouter-quip:
		enact the pun-quip;
	else if current quip is pun-quip:
		enact the ahem-quip;
	else if current quip is necro-quip:
		enact the sit-quip;
	else if current quip is sit-quip or current quip is powers-quip or current quip is clown-quip or current quip is ahem-quip:
		do nothing;
	else if current quip is leave-quip:
		lawnmower the table of Gunter comments;
		terminate the conversation;
		move Gunter to lalaland;
		now dusty study is dark;
		if do-i-chat is true:
			move Elmo to Largely All-Grey Gallery;
			move player to Largely All-Grey Gallery;
			now rifle is in lalaland;
			now qbc_litany is litany of Mole Elmo; [may be delete-able] [end Gunter's dialogue]
	else:
		debug-fallthrough;

after quipping when qbc_litany is the table of Elmo comments:
	d "Went through [current quip].";
	if hold-it-up is true:
		choose row with response of bye-Elmo-quip in the table of Elmo comments;
		now enabled entry is 1;
	if current quip is interr-quip:
		enact toy-theory-quip;
		enact the trial-trail-quip;
		now talked-to-Elmo is true;
		disable the orange-dunno-quip quip;
		disable the orange-know-quip quip;
	else if current quip is trial-trail-quip:
		open-elmos-hints;
	else if current quip is clues-quip:
		enact the gretta-quip;
		pad-rec-p "clues";
	else if current quip is gretta-quip:
		pad-rec-p "Gretta";
	else if current quip is artsy-quip:
		enact the shortcut-quip;
	else if current quip is shortcut-quip:
		enact weather-quip;
	else if current quip is weather-quip:
		enact sports-quip;
		enact girls-quip;
		enact media-quip;
		enact curb-quip;
		enact social-quip;
	else if current quip is media-quip:
		enact media-quip-2;
	else if current quip is flier-quip:
		say "Here's what you know.[line break][current-known][line break]";
		disable the showset-quip quip;
		now showset-quip is mowered;
		enact scale-quip;
		enact gulp-quip;
		enact elmomole-quip;
		enact got-red-yellow-quip;
		if t-b is escanned and t-b is in lalaland:
			now basement-quip is Elmo-av;
		if tables are escanned and tables are in lalaland:
			now stable-quip is Elmo-av;
		if pram is escanned and pram is in lalaland:
			now ramp-quip is Elmo-av;
		if giant pin is escanned and giant pin is in lalaland:
			now painting-quip is Elmo-av;
		if sitar is escanned or stria is escanned:
			if sitar is in lalaland or stria is in lalaland:
				now stair-quip is Elmo-av;
		choose row with short of "diorama" in table of pad-stuff;
		if known entry is true:
			enact dio-quip;
		if niche is escanned and niche is in lalaland:
			enact chimney-quip;
			now chimney-quip is Elmo-av;
		else:
			another-Elmo-hint;
		continue the action;
		enact gp-quip;
	else if current quip is scale-quip or current quip is gulp-quip or current quip is elmomole-quip or current quip is stable-quip or current quip is basement-quip or current quip is ramp-quip or current quip is painting-quip or current quip is chimney-quip or current quip is stair-quip:
		now current quip is mowered;
		say "You now know...[line break][current-known][line break]";
		enact got-red-yellow-quip;
		another-Elmo-hint;
		if scale-quip is mowered and gulp-quip is mowered and elmomole-quip is mowered:
			enact still-busted-quip;
	else if current quip is still-busted-quip or current quip is got-red-yellow-quip:
		if chimney-quip is mowered:
			say "You also note the Y is orange. Red + yellow = orange, and Y can be either a consonant or a vowel.";
		disable the settler-quip quip;
		disable the yorp-quip quip;
		enact gp-quip;
		enact lamp-quip;
		enact got-it-quip;
		disable the scale-quip quip;
		disable the elmomole-quip quip;
		disable the gulp-quip quip;
		disable the flier-quip quip;
		disable the still-busted-quip quip;
		disable the painting-quip quip;
		disable the ramp-quip quip;
		disable the chimney-quip quip;
		disable the stable-quip quip;
		disable the stair-quip quip;
		disable the dio-quip quip;
		disable the dio-all-quip quip;
		disable the got-red-yellow-quip quip;
		disable the got-it-quip quip;
	else if current quip is lamp-quip:
		enact settler-quip;
		disable the gp-quip quip;
		enact got-it-quip;
	else if current quip is gp-quip:
		if y-orange is true:
			enact toy-theory-quip;
			enact the trial-trail-quip;
		else:
			enact orange-know-quip;
			enact orange-dunno-quip;
		disable the lamp-quip quip;
	else if current quip is settler-quip:
		if y-orange is false:
			enact yorp-quip;
		if its-all-scanned or nothing-scanned:
			enact dio-elm-2-quip;
		else:
			enact dio-elm-quip;
	else if current quip is yorp-quip:
		if chimney-quip is not mowered:
			enact orange-know-quip;
			enact orange-dunno-quip;
		unless still-no-gp-quip is mowered or got-it-quip is mowered:
			enact satchel-quip;
	else if current quip is satchel-quip or current quip is dio-elm-2-quip:
		unless still-no-gp-quip is mowered or got-it-quip is mowered:
			enact still-no-gp-quip;
			if current quip is dio-elm-2-quip:
				enact dio-2-quip;
	else if current quip is dio-elm-quip:
		enact dio-elm-2-quip;
		repeat with rb running through ramabits:
			oscan rb;
[		unless settler-quip is doable or yorp-quip is doable or niche-quip is doable or tables-quip is doable or basement-quip is doable or dio-quip is doable or dio-2-quip is doable:
			enact satchel-quip;]
	else if current quip is still-no-gp-quip or current quip is got-it-quip:
		disable the got-it-quip quip;
		disable the still-no-gp-quip quip;
		disable the satchel-quip quip;
		disable the dio-elm-quip quip;
		disable the dio-elm-2-quip quip;
		disable the dio-2-quip quip;
		disable the dio-quip quip;
		disable the settler-quip quip;
		if y-orange is true:
			enact interr-quip;
		else:
			enact orange-dunno-quip;
			enact orange-know-quip;
	else if current quip is showset-quip:
		disable the flier-quip quip;
		enact orange-dunno-quip;
		enact interr-quip;
	else if current quip is orange-know-quip or current quip is orange-dunno-quip:
		disable the yorp-quip quip;
		disable the orange-know-quip quip;
		disable the orange-dunno-quip quip;
		if still-no-gp-quip is mowered or got-it-quip is mowered or showset-quip is mowered:
			enact interr-quip;
	else if current quip is dio-quip or current quip is trips-quip or current quip is dio-all-quip or current quip is dio-2-quip or current quip is satchel-quip or current quip is yorp-quip or current quip is settler-quip or current quip is strip-quip or current quip is weather-quip or current quip is girls-quip or current quip is sports-quip or current quip is curb-quip or current quip is social-quip or current quip is media-quip-2 or current quip is clues-quip:
		do nothing;
	else if current quip is toy-theory-quip:
		do nothing;
	else if current quip is bye-Elmo-quip:
		lawnmower table of Elmo comments;
		terminate the conversation;
		if player does not have gird grid and do-i-chat is false:
			say "Hm. Maybe Elmo had some information for you that a conversation couldn't bring out. Well, it's all really just anagramming from here on out--you think/hope.";
		now Elmo is in lalaland;
		now satchel is in lalaland;
		now player has gird grid;
		if do-i-chat is true: [this is a cheat bypass]
			move player to Frontage;
			now macks are in lalaland;
			now qbc_litany is table of Gretta comments;
		else:
			now poss-score of Means Manse is cur-score of Means Manse + 3;
			move the player to Carven Cavern;	[end Elmo's dialogue]
	else:
		debug-fallthrough;

after quipping (this is the usually don't undo convos rule):
	now current quip is mowered;
	if current quip is showset-quip:
		ital-say "if you didn't mean to do this, you can UNDO to get a bit more help from Elmo.";
	else:
		if debug-state is false:
			prevent undo;
		now undo-code is -1;

after quipping when qbc_litany is the table of Elvira comments:
	if current quip is hollow-quip or current quip is sinister-quip or current quip is bald-quip: [Elvira's dialogue below here]
		do nothing;
	else if current quip is logical-quip or current quip is wtf-quip or current quip is hollow-quip or current quip is sneer-quip or current quip is abhor-quip or current quip is strong-quip:
		if one-Elvira is false:
			now one-Elvira is true;
			enact the sinister-quip;
			enact the bald-quip;
	else if current quip is final-quip:
		now final-quip is mowered;
		lawnmower table of Elvira comments;
		terminate the conversation;
	else:
		debug-fallthrough;

to debug-fallthrough:
	say "FALLTHROUGH BUG in after-quipping code. Put [current quip] somewhere in the after quipping rule.";

chapter quip-rule-mod

the reject asking for talking rule is not listed in any rulebook.
the reject telling for talking rule is not listed in any rulebook.
the reject answering for talking rule is not listed in any rulebook.
the reject commanding for talking rule is not listed in any rulebook.

chapter pause-and-wait

[this is not used, since it clears the screen, but just in case...]

to ptg:
	if debug-state is false:
		pause the game;

chapter taking scenery

section general

check taking scenery:
	if noun is forest or noun is sortie or noun is metros:
		say "You took that area (out) last game." instead;
	if location of player is same mesa:
		say "Scenery is only here to tell you where to go." instead;
	if location of player is cleric circle:
		say "That'd be kind of sinful and disruptive." instead;
	if location of player is idle deli:
		say "The [noun] is part of the ambiance, for better or worse." instead;
	if location of player is Drain Nadir:
		say "Nothing here is valuable enough. You need to leave it all behind!" instead;
	if location of player is Econ Cone:
		say "Oh, you'll TAKE Spoilopolis, all of it. But you can't lug THAT around." instead;
	if location of player is Upscale Capsule:
		say "You don't need to take that. Just take inspiration from it." instead;
	say "You don't need to take any of the scenery here. Or, well, anywhere. Unless you change it to something else first." instead;

chapter d

debug-state is a truth state that varies. debug-state is false.

to d (a - indexed text):
	if debug-state is true:
		say "DEBUG INFO: [a][line break]"

to dl (a - indexed text):
	if debug-state is true:
		say "DEBUG INFO (DELETE): [a][line break]"

to dn (a - indexed text):
	if debug-state is true:
		say "DEBUG INFO: [a]"

[this is another variable that must be defined in a release section]

uber-rand-cheat is a truth state that varies.

chapter regions

you-used-pills is a truth state that varies.

to solve-region (sre - a region):
	let tokers-home be false;
	consider the notify score changes rule;
	now sre is solved;
	now last-solved-region is sre;
	if sre is Means Manse:
		now all prefigured things are unfigured;
	repeat through table of pres:
		if there is a thereg entry and thereg entry is sre:
			now preflip entry is unfigured;[wipe stuff from flips]
	say "Congratulations! [sre] node: done![paragraph break]";
	if sre is otters and debug-state is true:
		append "Test passed for Otters." to the file of debuggery;
	if sre is stores:
		continue the action;
	repeat with po running through portals in Strip of Profits:
		if go-region of po is sre:
			move po to lalaland;
		check-the-store po;
	if sre is oyster and pills are in lalaland:
		now you-used-pills is true;
	item-warp;
	let wiped-any-out be false;
	repeat through table of pad-stuff:
		if there is a fixed-region entry:
			if fixed-region entry is sre:
				now known entry is false;
				now wiped-any-out is true;
	if wiped-any-out is true:
		say "(You wipe out writing in your notepad that probably only applied to this region.)";
	if lecturer is reflexed: [have to get rid of them before moving the player, but we want to print a note AFTER going. So, tap dance with code a bit.]
		if mangiest steaming is in profits:
			now tokers-home is true;
			now nestor is in lalaland;
			now tokers are in lalaland;
			now mangiest steaming is in lalaland;
	if min-score of mrlp > poss-score of mrlp, say "NOTE: somehow the minimum score processed by the code exceeded the possible score. If you are able to, and you can cut/paste the game transcript, I'd appreciate seeing it at [email] so I can fix it. This won't affect the game, but all the same--it's a nuisance bug. Thanks!";
	if player is not in Strip of Profits:
		d "player not currently in Strip of Profits. Player moved from [location of player].";
		move player to Strip of Profits;
	if sre is not spoiled and otters-x are examined:
		now note-progress is true;
	see-about-patcher;
	if engravings are examined and eng-change is false:
		say "The engraving by [if store t is visible]store t[else]the otters[end if] seems to have changed since last you looked.";
		now eng-change is true;
	if tokers-home is true:
		say "The tokers packed up and went home. Just as well. You'd hate to have had to explain your journeys to them.";

to check-the-store (po - a portal):
	repeat through table of stores anagrams:
		if the-to entry is po:
			if the-from entry is not in lalaland:
				d "Moving [the-from entry] to lll.";
				now the-from entry is in lalaland;
				break;

eng-change is a truth state that varies.

to see-about-patcher:
	if number of solved regions > 2 and chapter patcher is off-stage:
		say "You think, with a gay woot, 'Yow, got a way to go.' But then a voice -- 'Goal's a slog? Covert vector!' You look over and notice something behind the megaton magneto-montage. Something that wasn't there before. It's...a chapter patcher.";
		now chapter patcher is in Strip of Profits;
		set the pronoun it to chapter patcher;

after looking in strip of profits:
	if number of visible portals is 0, set the pronoun it to megaton magneto montage;
	continue the action;

definition: a region (called reg) is kayoed:
	if reg is spoiled or reg is bypassed or reg is shortcircuited:
		decide yes;
	decide no.

section check-for-solve

this is the check final region action rule:
	d "Checking [noun].";
	repeat through table of end-flips:
		if noun is thisflip entry or noun is thatflip entry:
			if warned-yet entry is false:
				consider the my-prog entry;
				if the rule succeeded:
					now warned-yet entry is true;
					ital-say-n "[pointwarn entry]";
					say " Continue anyway?";
					if the player yes-consents:
						the rule succeeds;
					else:
						say "OK, this won't appear again for this section.";
						make no decision;
			the rule succeeds;
	make no decision;

table of end-flips
thisflip	thatflip	warned-yet	my-prog	pointwarn
yob den	yob den	false	routes-left rule	"The raptest patters are still slightly a nuisance, if you want to fix them."
USB	USB	false	presto-left rule	"That will win, but there's still a bit you could do in the shack[if lamb is in gyre]. Also, you missed what to do with the lamb, but it's too late[end if]."
trance nectar	trance nectar	false	troves-left rule	"You tidied your upscale capsule up pretty well, but you could do a bit more."
d2	d2	false	oyster-left rule	"This is the winning command, but you may be able to backtrack to see some other bits."
curst palace	curst palace	false	towers-left rule	"This will knock down the palace, but you still have that flowerpot you got from Renato."
Elvira	Elvira	false	otters-left rule	"You could've cleaned up business with [to-clean-otters]."

to say to-clean-otters: [hells bells this is ugly]
	if p-2 is reflexive or eels are reflexive:
		say "[if eels are reflexive]the Bran Barn[else]the Loop Pool[end if]";
		if cinders are not in lalaland or elmer is reflexive:
			say ", as well as ";
		else:
			continue the action;
	if elmer is reflexive:
		say "Elmer and Merle's annoying blather";
		if cinders are not in lalaland:
			say " and ";
		else:
			continue the action;
	say "the cinders";

[here, the rules succeed if there's still stuff left to do]

this is the routes-left rule:
	if patters are in sonancy canyons, the rule succeeds;
	the rule fails;

this is the otters-left rule:
	if p-2 is reflexive or eels are reflexive, the rule succeeds;
	if elmer is reflexive, the rule succeeds;
	if cinders are not in lalaland, the rule succeeds;
	the rule fails.

this is the towers-left rule:
	if flowerpot is not in lalaland, the rule succeeds;
	the rule fails;

this is the oyster-left rule:
	if lever is reflexive, the rule succeeds;
	if aunt-tuna-cross is false and lance is not in lalaland, the rule succeeds;
	if bogus-plains is reflexive, the rule succeeds;
	the rule fails;

this is the presto-left rule:
	if usb is off-stage, the rule fails; [note 2 things flip to USB, the code and the USB, so this gives 'debug' a pass]
	if trim socks are in shack, the rule succeeds;
	if escaroles are in shack, the rule succeeds;
	the rule fails;

this is the troves-left rule:
	if Pa Egg Pea is reflexive, the rule succeeds;
	if divorces is not in lalaland, the rule succeeds;
	the rule fails;

chapter zaping (with patcher)

zaping is an action applying to one thing.

understand the command "zap [something]" as something new.

understand "zap [something]" as zaping.

carry out zaping:
	if player is not in strip of profits:
		say "[reject]" instead;
	if chapter patcher is not in strip of profits:
		say "You don't have anything that can zap anything." instead;
	if noun is tokers or noun is nestor:
		say "You're a text adventurer, not a drug enforcement agent." instead;
	if noun is not a sto and noun is not a portal:
		say "The patcher can only zap stores or portals." instead;
	if noun is store h:
		if otters is solved:
			say "You sense that, with Elvira defeated, the patcher wouldn't work to wipe out Store H. Perhaps there isn't enough evil to defeat, so the patcher won't work." instead;
		say "Store H isn't critical. Yet. Plus there are too many people around. You should maybe look elsewhere." instead;
	if noun is Store K or noun is Store N:
		say "As you point the patcher at [noun], you hear cries of 'No, man! Don't harsh [if noun is Store K]our[else]my[end if] buzz!'[paragraph break]There are people in there. [noun] may not be where it's at, according to Elmo, so that's even more reason not to disintegrate it." instead;
	if noun is a portal:
		say "The patcher obliterates the [noun]. Wow!";
		now go-region of noun is bypassed;
		now noun is in lalaland;
	if noun is Store T:
		say "The energy you felt from the patcher seems to bounce off Store T and zap you back. You'll have to be a tough customer to enter Store T." instead;
	if noun is otters-x:
		say "The energy beam that emits from the patcher fizzles as it hits the otters. Whatever's behind the otters is likely no joke." instead;
	if noun is Store U:
		now routes is bypassed;
	if noun is Store V:
		now troves is bypassed;
	if noun is Store W:
		now towers is bypassed;
	if noun is Store U:
		now oyster is bypassed;
	if noun is Store P:
		now presto is bypassed;
	now noun is in lalaland;
	say "You point the patcher at [noun], which disintegrates. Well, maybe you'll get someone to help you take care of things once you're finished here." instead;
	the rule succeeds;

the chapter patcher is a warpable thing. description is "[if number of needed regions > 1]I bet if you switched it, something cool might happen[otherwise]It's probably useless to warp past the final area[end if].". "A chapter patcher lies here next to the megaton magneto-montage."

Check taking the chapter patcher:
	say "It'd be kind of hazardous to carry around[if number of needed regions > 1]. You can just ZAP whatever's left[else]. You're done with it, anyway[end if]." instead;

check switching on the chapter patcher:
	if otters is solved:
		say "You don't need to do anything drastic now that you beat Elvira." instead;
	if number of needed regions is 0:
		say "It's jammed. Probably because you solved most all you need to. Guess you'll have to figure [if Store T is in Strip of Profits]what's behind Store T[otherwise]how to deal with the otters and what's behind them[end if]." instead;
	say "The patcher shatters in a shower of fourth-wall quantum physics as you switch it. [no line break]";
	now patcher is in lalaland;
	repeat with ZT running through needed regions:
		now ZT is bypassed;
	say "[if number of things that are patchable is 1]You point your patcher at [random patchable thing] and it goes poof[else]You point your patcher at, in turn, [list of patchable things][end if]. Well, you should be able to see what's [if Store T is visible]really behind Store T[else]behind the otters[end if] now.";
	repeat with ZT running through patchable things:
		if ZT is a sto and ZT is in Strip of Profits:
			poss-d;
		now ZT is in lalaland;
	do nothing instead;

definition: a thing (called xx) is patchable:
	if xx is not visible, no;
	if xx is Store K or xx is Store N or xx is tokers or xx is store C or xx is store B, no;
	if xx is Store H or xx is Store O or xx is Store T or xx is otters-x, no;
	if xx is a sto and xx is flippable, yes;
	if xx is a portal, yes;
	no.

chapter entering portals

towers-warn is a truth state that varies.

oyster-warn is a truth state that varies.

check entering a portal:
	let grn be go-region of noun;
	if grn is solved: [this shouldn't happen, but yeah.]
		if grn is otters:
			say "Elvira is defeated. You don't need to go back." instead;
		say "You've already solved that area." instead;
	if noun is towers-x:
		if number of kayoed regions < 5:
			if towers-warn is false:
				now towers-warn is true;
				if patcher is visible:
					say "The towers are imposing enough that you look back at the patcher and feel relieved you can just RETRY and zap your way through in case you get stuck.";
				else:
					say "Man, those towers are imposing! They are easily bigger than the other stores, maybe as big as any two [if number of visible portals is 1]stores[else if number of visible flippable stores is 0]portals[else]stores or portals[end if] combined. You may want to chip away at [if number of solved regions is 1]a couple easier places[else]another easier place[end if] first[if oyster is solved]--the towers look way more re-enforced than even the oyster[end if]. Proceed anyway?";
					unless the player yes-consents:
						say "You decide to look around a bit more." instead;
	if noun is oyster-x:
		if number of solved regions < 2:
			if oyster-warn is false:
				now oyster-warn is true;
				if patcher is visible:
					say "The oyster is wide enough that you look back at the patcher and feel relieved you can just RETRY and zap your way through in case you run out of gas.";
				else:
					say "The oyster looks very wide but not tall--it's quite possible there's a ton to do. It's not particularly magical or scary--not as much as [if store w is visible]store W[else]the towers[end if], but you may want to warm up your skills somewhere else first. Proceed anyway?";
					unless the player yes-consents:
						say "You decide to look around a bit more." instead;
	choose row with por of noun in table of warps;
	say "[go-text entry]";
	if noun is hoster:
		pad-rec "guru";
	if noun is otters-x and bleary barley is unvisited:
		say "'To rest! To rest!' a voice calls. But you shake that off, whispering '...or test!'[paragraph break]And yet, once through, your powers feel dormant, but thankfully not mordant.[paragraph break]Those otters weren't standing guard for no reason. Elvira must be close. But you don't know what she's ultimately up to. You note in your pad it might be an extra good idea to ask about her, if people are around.";
		pad-rec-q "asking";
	let try-recover be false;
	if last-loc of grn is visited:
		now try-recover is true;
	else:
		d "Can't try recovering items yet.";
		add-errs grn;
	now portal-entered-yet is true;
	if grn is towers and last-loc of grn is not trefoil: [it's possible but not likely you can cheat your way past with constant retries otherwise]
		d "REPO!";
		move player to last-loc of grn, without printing a room description;
		if can-see-map:
			draw-towers-map;
		reposition-guardians;
		try looking;
	else:
		move player to last-loc of grn;
	if try-recover is true:
		recover-items;
	the rule succeeds;

to add-errs (reg - a region):
	repeat through regtab of reg:
		if there is a this-room entry and this-room entry is not a room:
			d "[this-room entry] wrongly listed as a room in [reg], [this-cmd entry]f.";
		if there is a this-item entry and this-item entry is a room:
			d "[this-item entry] wrongly listed as a room in [reg], [this-cmd entry].";
		if there is no this-reg entry or this-reg entry is a region:
			if there is no hashval entry or hashval entry is 0:
				let XYZ be the hash of this-cmd entry;
				now hashval entry is XYZ;
				d "Making hashval entry [XYZ] for [this-cmd entry].[line break]";
			otherwise:
				continue the action;
				d "[this-cmd entry] has a hashval entry of [hashval entry].[line break]";

to recover-items:
	d "ITEMS: [item-list of mrlp]";
	repeat with JJJ running through item-list of mrlp:
		if JJJ is not scenery and JJJ is not a backdrop:
			now player has JJJ;
			if JJJ is star:
				now player wears star;
			if JJJ is medals:
				now player wears medals;

chapter say "[reject]" and lalaland

lalaland is a privately-named room. "[bug-report]"

understand "ll/lalaland" as lalaland when debug-state is true.

lll is an unsolved region.

lalaland is in lll.

last-solved-region is a region that varies. last-solved-region is usually lll.

headaches is a number that varies. headaches is 10.

to match-process (it1 - indexed text) and (it2 - indexed text):
	let it1a be filtered name of it1;
	let it2a be filtered name of it2;
	let lost-one be 0;
	repeat with myc running from 1 to number of characters in it1a:
		if "[character number myc in it1a]" exactly matches the text "[character number myc in it2a]":
			increment lost-one;
	if lost-one is 0:
		say "Your settler begins to make noises: a low hum, but nothing really piercing.";
		the rule succeeds;
	say "Your settler throws out a bunch of beeps: ";
	repeat with myc running from 1 to number of characters in it1a:
		if "[character number myc in it1a]" exactly matches the text "[character number myc in it2a]":
			say " HIGH";
			increment lost-one;
		else:
			say " LOW";
	say ".";
	say "[line break]Ugh. [if lost-one > 0]Those high notes[else]That high note[end if] gave you a migraine mini-rage. You switch off the slider.";
	now slider is switched off;
	decrement headaches;
	now list-headache is true;
	now undo-code is 5;
	prevent undo;
	say "[line break]";
	if headaches > 0:
		say "You figure you can take that noise [headaches in words] more time[if headaches > 1]s[end if].";
	else:
		say "You're sick of those high notes.";

list-headache is a truth state that varies.

to say dior-hint:
	say "That's not quite it. You can probably look at the diorama to see what to do"

to say l-r-bye-hint:
	say "It's kind of tough to say goodbye, firmly but kindly, and--that isn't quite it. You feel a bit jumbled"

to say di-cli:
	say "[if yapper is in tenfold]The yapper might alert his cronies if you try anything. Even something not quite right, like that[else if dialer is reflexive]The dialer seems to click slightly[else]There's something more to do, but that's not quite it[end if]"

docile-tried is a truth state that varies.

to say doc-try:
	now docile-tried is true;
	say "[one of][or], again[stopping]";

table of spechelp [tosh] [tsh] [this is for specific error messages for specific items]
xtrhelp	helptxt
t-b	"The ten beams creak slightly. Maybe not all of them. But a few."
palm	"The palm remains upright but seems slightly brighter."
niche	"Hm, no, the niche--my niche--won't unfold that way."
latches	"You think you feel static through the latches. But they remain the same. Maybe there's some easy way to change them."
tables	"The tables seem to shift a bit."
giant pin	"The pin wobbles."
pavement	"[dior-hint]."
event map	"[dior-hint]."
crabgrass	"[dior-hint]."
brass crag	"[dior-hint]."
platform	"[dior-hint]."
farm plot	"[dior-hint]."
pedestal	"[dior-hint]."
steel pad	"[dior-hint]."
sitar	"You hear a sad-sax noise from the sitar. Well, a sitar version. 'Rats, I...' you think, seeing red."
stria	"'Rats, I...' you think as you see red. That's not quite it."
plates	"The plates shine slightly and rattle."
plaster	"The plaster crackles and shines slightly."
pram	"The pram creaks back and forth slightly."
rifle	"Elmo bobbles the rifle slightly, and you think he may've nodded encouragement at you."
Store B	"The smell from Store B becomes fruitier and more delicious." [START stores]
Store H	"Store H looks totally different for a second."
Store K	"An odd sweet smell from Store K, for a second."
Store N	"'Dude, you like must be close!' you hear from Store N."
Store P	"You hear old forgotten magic words which seem like they might almost apply if they were in the right order."
Store T	"You hear various unrecognizable animal noises."
Store U	"Store U seems to light up with lines and curves for a second, but no, that's not quite right..."
Store V	"A single paper currency flutters off from Store V, lost forever."
Store W	"Store W seems to push up from the ground and go narrower for a second."
Store Y	"You hear grinding, then a slimy gulp, from store Y. But nothing definitive."
lecturer	"The lecturer coughs and shakes his head, looking for someone who almost disrupted his speech. He doesn't close to finger you."
the-b	"The bean rolls back and forth a bit." [START routes]
worst ad	"The ad seems slightly nearer, for a moment."
scripture picturers	"You feel you're not quite ready to enter the Cleric Circle, thinking like that. Well, not EXACTLY like that."
lairage regalia	"You twist and tilt your head but can't figure out how to interpret the regalia. But you must be close."
adsorbing signboard	"You struggle a bit. The signboard should be pretty simple, being PAT'S. It'll come to you."
bench	"You hang around the bench, hoping for something to happen, but nothing happens. Though it seems like it should."
bench-end	"Oof! You fail to jump on the bench end. Try mixing things up from what you just did."
giant's elbow	"[if bench-end is reflexive]You're nowhere close to the giant's elbow[else]You seem like you should be able to avoid the elbow, but you may need to mix things up a bit[end if]."
MORF FORM	"The MORF-FORM rocks in the air, as if it's about to fall."
pipe soot	"The soot smells a bit stronger than before for a moment."
seed pit	"The seed pit seems to bubble slightly."
Nuder	"The pages of Rude [']N Nuder flutter a bit."
un-road	"The un-road seems to lead somewhere, but you couldn't quite make it out like that."
darkness	"You feel it's ALMOST the right time for the darkness to lift."
narrow cracks	"The cracks almost seem to lead somewhere."
mist	"Hmm, you almost see a way through the mist."
hurt hog	"The hog grunts."
bent ewe	"The bent ewe stretches a bit."
yob den	"Some different noises from the yob den."
Pa Egg Pea	"You stare blankly at [i]Pa, Egg, Pea[r], but you're not quite doing it right." [START troves]
cold	"You think you feel less cold for a second. But you need to make it last."
heat	"Meh. Maybe you're closer than you think to motivation. How to make that matter?"
sob ever verbose	"The sob ever verbose remains that way--mixing up subjects and making you consider things you hadn't before, in an effort to suck up attention from anyone around."
stop post	"You feel silly a bit. You can't let a simple stop post stop you!"
ltb	"You reflect that to LEAD, you must also put certain things in order. You know there are only so many ways."
bee's head	"The bee shakes its head, trying to make sense of the slightly disordered magic it felt from you."
what-a-bee	"The bee's buzzing goes off-kilter for a bit. You gain a bit of faith you're on the right track."
cellar door	"It's...hmm...you remember all the clues, but what order to place them in, now."
diapers	"Staring again at the diapers, you are depressed you couldn't even get being depressed right."
rivets	"Staring at the rivets, you get the feeling you've not quite found the right way to try. Or want."
Pernod	"The bottle of Pernod seems to rattle and spin slightly."
large regal lager	"No...that is not quite the way to fight the temptation of the wicked brew."
brochure	"Your longing increases...but not enough."
praise	"That's not quite the way to look forward to praise. But it may be a start."
godlings' lodgings	"The godlings['] lodgings almost seem to laugh at you, for being close, yet far."
noise	"The noise seems almost bearable."
tan ivy vanity	"You try to not pay attention to the babble behind the door, but you're trying too hard, and you fail. Still, you're on the right track."
lobster	"That's not quite the way to deserve that lobster[if ivy vanity is reflexive]. You can't quite concentrate, anyway, with the knock at the door[end if]."
ME ARTS	"That's not quite the way to focus on the ME ARTS[if ivy vanity is reflexive]. You can't quite concentrate, anyway, with the knock at the door[end if]."
DIVORCES	"DIVORCES suddenly seems more alluring and more rubbish at once."
salt	"You don't quite draw inspiration from the salt, but there can't be that many alts."
Eddie's Song	"You try to groove to Eddie's song, but that's not quite it."
lamb	"The lamb looks confused. Maybe you could be more forceful. Verbally, not physically." [START presto]
hump	"The hump suddenly looks a bit smaller. But not enough."
volt maze	"The volt maze crackles with increased energy, almost ready to break down. Oy vey! I hope this one's not too meshuggenah."
dart	"The dart seems a bit closer, but...dang! Not quite."
decorative star	"The star seems to wiggle a bit, but not enough to pull it out."
plebe	"The plebe looks confused, as if you garbled what you said."
sport ports	"The sport ports seem even shinier for a second."
Leo	"There aren't that many things to do with Leo. So few, you could probably brute-force how to get by his, uh, brute force."
Rand	"There aren't that many things to do with Rand. So few, you could probably brute-force how to get by his, uh, brute force."
wzup	"You mumble a greeting that doesn't quite seem to work. Hm, that's not quite it."
ether	"[if ether is prefigured]No, you definitely need to say THERE. You just need to have backup and maybe weapons[else]The ether pulsates, but you still can't see through it[end if]."
ye hoop	"The hoop dips a bit as if to taunt you."
boing	"You try something that doesn't [i]quite[r] work, but now you're that much closer to an a-ha moment."
maze walls	"The maze walls rumble a bit."
onyx censer	"That feels right, but it's not enough yet. You don't need anything grumbly, here."
Hogs	"The hogs snicker a bit, but they seem a little nervous, too."
Keys	"The hogs snicker a bit, but they seem a little nervous, too."
thaw	"The hawt thaw crackles slightly."
alert letters	"[l-r-bye-hint]."
log ons letters	"[l-r-bye-hint]."
ought letters	"[l-r-bye-hint]."
disk	"[if skid is in lalaland]Bleah. Did all this high-tech work make you forget the disk was a skid? Yes. Yes, it did[else]The disk seems to want to expand, but not quite into that. You must be close[end if]."
escaroles	"The escaroles seem slightly meatier."
pile of coal	"Microscopic bubbles seem to form on the coal and burst in the air."
flea	"The flea makes a crinkly noise but still seems quite dead."
drab yoke	"It'd take too long to type out all the possibilities, but that seems basically right. Hmm."
t-key	"The TBA key rattles within the keyboard a bit."
USB	"Hmm. There are only five possibilities, and more than one may be right. You've done the tough stuff."
trim socks	"You don't have the available memory in your head to see all the possibilities, but yes, something like that MUST work."
clock sap	"NO, REARRANGE AND TRY AGAIN, you think."
fount	"Hm, might be fun to try something like that again."
gum	"You stare at the gum. Hm, only a few ways it can be stretched or whatever."
piece of scratch paper	"Man! That's the thing about compiling. Switch one or two characters, and foom, it's just as bad as if you were completely off-base."
skid	"Bleah. Did all this high-tech work make you forget the skid was a disk? Yes. Yes, it did."
compiled code	"Hmm. Compiled code is tricky. Once it's fixed, if you have even one thing in the wrong order, it does nothing right. That MUST be what's happening here."
Capers Recaps	"You think of mocking Casper's writing style, but that's not quite it. Something more direct and physically insulting, maybe." [START oyster]
gins sign	"Hm, the sign doesn't strictly disallow THAT."
tumblers	"The tumblers wobble a bit as you try to do ... something ... to them."
tines	"Hm, the stein belongs somewhere you can destroy it, but not QUITE like that."
sign	"Nobody pays attention to your performance as you disobey the sign. Or try to."
tunes	"The tunes grow slightly less annoying, for a moment."
trolls	"The trolls laugh at you a bit, but nervously."
clam	"The clam still seems enraged."
urn	"The urn sits there, daring you to walk away."
boats	"Perhaps if you were louder and more confident, the boats would hear you."
pale plea	"Yes, the pale plea is calling and warning you to leave. But how?"
carps	"The carps and pikes laugh at--whatever you tried. But you know bullies are like that when someone is onto them. Hm, how to fix things."
pikes	"The carps and pikes laugh at--whatever you tried. But you know bullies are like that when someone is onto them. Hm, how to fix things."
trout	"[if player is in range]Deal with the attackers, not the trout[else if wrap is off-stage]You try to describe how to fight, but that's not it[end if]."
wipes	"You try to take the wipes, but you worry you're not fast enough."
wrap	"That's not quite the way to pop the wrap."
o-t	"Hm, no, that's not quite how to cover all the ground looking for the ol['] trap."
raft	"The raft rocks slightly."
oars	"You see bubbling under the oars."
eeks	"You guess the eeks must be there--no, there!"
pre-haun	"You need an organized way to see what's under the ground[if digger is off-stage], and you don't have a digging instrument, either[else] with your rigged digger[end if]."
haunter	"You're a bit tongue-tied, but that seems close."
a-s	"Hm, you almost thought you found something. Well, not QUITE like that."
c2	"The crate's from there! No, there! No, there! Well, you thought you had an idea, but it was a bit jumbled."
crate	"The crates that missed you wobble a bit. You know what'll happen, just not what to do...quite yet."
knob	"The knob rattles slightly."
skis	"The skis momentarily seem more polished."
bogus-plains	"You feel like making a big speech about what you've done and what you plan to do, but not quite like that."
tubs	"Hm. The tubs rattle a bit, but you need to do something strong."
prod	"You juggle the prod a bit, but it doesn't change into anything. Well, not like that."
ruby	"No, that's not quite it. The ruby dulls as if covered by dirt."
waste	"The heaps are still technically waste, but you may want to deal with them more delicately."
heaps	"The heaps still look ugly as ever."
gleaner	"The gleaner remains too small to read."
dialer	"[di-cli]."
lever	"You look at the lever, wishing it would be a little more fun to pull."
d2	"[di-cli]."
yapper	"'Quit yer mumblin, ya perp!' the yapper yells, turning red. 'You here to do business or not?'"
Andres	"Andres looks a bit more tied up at the moment." [START towers]
Andrew	"Andrew suddenly looks as if he's been told he did something wrong."
Archie	"Archie looks a bit pained."
Barney	"Barney looks around a bit."
Blake	"Blake looks a bit sadder."
Bredo	"Bredo yawns."
Cedrick	"Cedrick cringes slightly."
Daryl	"Daryl pinches his sides and shakes his head."
Demitri	"Demitri shivers a bit."
Dewey	"Dewey seems momentarily less muscular."
Edwin	"Edwin hiccups."
Eldon	"Eldon looks slightly wrinkled for a moment."
Ernest	"Ernest seizes up."
Geno	"Geno looks around, as if he's about to bolt."
Goldy	"Goldy starts to fold his hands in prayer but thinks better of it."
Leander	"Leander makes an a-ha gesture--no, only for a second."
Marcel	"Marcel breathes slower for a second."
Marlon	"Marlon looks a little less weird for a moment."
Preston	"Preston almost slips for a second."
Reggie	"Reggie sniffs the air."
Royce	"Royce looks a bit less aggressive."
Shane	"Some color drains from Shane's face."
Terrance	"Terrance looks around as if he wants to run off."
Tyson	"Tyson looks slightly less emotional."
Wade	"Wade's eyes get bigger for a second."
Sir Rodney	"Rodney looks around, as if he is sick of this place."
diners	"The diners glare at you, then look up at the sky, slightly worried."
pirates	"The pirates blanch a bit but quickly regain their swagger."
serpent	"The serpent shakes its head and tail a bit."
Mel Fish	"Mel Fish mutters, 'No, that's not how to be me. Gotta be something simple and plain.'"
fluster self rut	"You feel a bit more agitated. Relax. Breathe. Etc. It may not be critical, but you'd like to figure what to do, and you think you will."
strudel	"You almost expect the strudel to hop up[if player does not have strudel] into your arms[end if], but the moment passes."
ingrates	"The ingrates seem to wonder if it's worth complaining to you for a moment. You get the feeling that they may start off angriest, but if you could bend their mood, they might lose their willpower and give up."
fissure	"Bizarre animal noises continue to emanate from the fissure. It is beyond your control[if Dr Yow is not in ropins], but the duck's already figured it[else if duck is visible], but the duck seems to be poking at it[else], and you wonder who or what could tinker with it[end if]."
bonker	"'TANGENTIAL HIT!' blares the bonker. 'THE MARAUDING HORDES ARE ON TO US!'"
weeds	"The weeds almost seem to shrug."
saver	"The 'replay player' letters brighten for a second."
ur-pine	"The ur-pine shrinks, slightly. I mean, it recedes, but it doesn't quite get smaller."
muscly luc sym	"Luc Sym stumbles for a moment."
muscly	"Ms. Lucy stumbles for a moment."
organised	"The drains sizzle slightly but go back to menacing quiet."
admirer	"Your admirer looks askance, then returns to their puppy-love expression."
natives	"The natives look almost ready to be suckered by flattery or just a tall tale in general, but that look passes."
yurts	"The yurts sway slightly. They may not be guarding much, but maybe you could do for them."
alarming	"The grailman seems almost average for a moment."
dandier arid den	"The arid den seems less imposing and impressive."
Reed's Ale	"[el-la-f] listens to what you're saying for a minute, but--no, you didn't quite get it right. He goes back to reciting his tired sales pitch."
wait-seer	"The wait-seer looks bored and distracted for a second."
bluster butlers	"The bluster butlers cough slightly and look around furtively."
atheists	"The atheists momentarily ditch their timed snark for a few quick hitters, but then it's back to normal."
lois the hostile	"Lois the Hostile momentarily gives a fake smile, but it's not as fake as it could be. Progress."
hostile-is-he lot	"The Hostile-Is-He Lot mumble, hmm, if we saw things THAT way...but the moment passes."
ropins	"The ropins remains secure, with no easy way to open it."
agnostic	"[ag-first] scrunches [his-her] eyes to try to keep even more attention, but it doesn't quite work."
atblock	"[ag-first] seems a little more focused, but [he-she] could maybe do even better."
denim	"The denim bends and warps, but you hear no tearing noise."
sporties' ripostes	"The ripostes seem less cutting for a moment."
old ice	"The old ice seems to glimmer a bit."
turbos	"[jet-nq]."
blaster	"[jet-nq]."
eastern shore	"Maybe it's you, but the eastern shore seemed slightly closer."
serpent	"The serpent calms down for a split-second[doc-try]."
Tetris Sitter	"Ed looks slightly less avaricious."
flowerpot	"The crocus almost seems to perk up."
curst palace	"Hmm...[if player is in Mislit Limits]no rumbling from the curst palace. Big words have all sorts of possibilities[else]that's good practice, and a good guess, but even if it were right, you don't know if you could change the curst palace from here[end if]."
b-b	"The barley rustles in an imaginary wind--but hardly at all." [START otters]
Ed Riley	"Ed Riley looks askance at his deli rye, as if it had some bad aftertaste. If only he said things less loudly, boomingly, startlingly..."
imp1	"[imp-nag]."
imp2	"[imp-nag]."
imp3	"[imp-nag]."
ram1	"[ram-nag]."
ram2	"[ram-nag]."
ram3	"[ram-nag]."
raptor	"The raptor recoils slightly."
parrot	"The parrot seems to roll its eyes at you, as if to say, [unless player is in alcoves]not here[else]you DO remember what I was[end if]."
cinders	"The cinders glow and even warm up for a bit."
Merle	"Merle and Elmer look askance at each other for a bit."
atmo-moat	"Hm, that's not it, but it must be elemental. No, elementary."
sea cube	"The sea cube shakes a bit."
eels	"The eels swim a bit faster."
owls	"Hmm. The owls still swarm and swirl too fast."
ghoul hat	"Mr. Lee shakes his head and adjusts the ghoul hat."
p-2	"Rev. Howe seems to snarl a bit more deeply for a moment."
thrones	"The thrones seem to buzz a bit."
nails	"[one of]O[or]Another o[stopping]ne of the nails seems to bend a bit."
pines	"The pines rustle as if an animal climbed through them."
corona	"The corona scurries about for a bit before settling down again."
ocelots	"The ocelots squint at you through their clip-ons."
leopard	"The leopard almost seems to un-cuff its hands."
badger	"The badger flexes imaginary suit lapels, then quickly goes back to brooding."
satyr	"The satyr puts a hand on its chin as if pondering music."
medals	"The medals waver noiselessly. Hm, that's not quite it."
weltish whistle	"[if player has whistle]The sound you make is experimental and groovy, in a new jazz sort of way, but it's not quite right[else]Probably best to have the whistle before changing it[end if]."
moss cap	"The cap itches for a bit, then seems to try to spin you around." [others]
pipe panel fence	"The pipe panel fence sways slightly."
b-w	"You feel the barriers west pulling towards you."
sorer bogey	"The bogey's tone changes slightly for a second."
l-o-p	"Something glints off the list of prices."
auction caution	"Everyone promises quick payment, but what are you promising to pay quickly FOR?"
peach	"The peach still looks too expensive."
videotape	"You must be on the right track--but nothing happens. Yet."
barren cries	"The briar screen seems to turn dark reddish, and the barren cries seem like they could change--or is it a dream to you?"
harmonicas	"The harmonicas whistle, as if something happened."
pagers	"The pagers light up slightly. Maybe give it another go."
riot cap	"Nothing happens. Your magic skills feel like the pits for a second."
stucco	"The stucco looks almost hairy for a second."
miser ruble	"The miser ruble turns a bit purpler."
b-r	"You loaf a bit after thinking that, hoping for something to happen. It doesn't."
mean trowel	"You had the seed of an idea there, you thought."
nectarine	"The nectarine seems a little less shiny and new. But not enough."
green stain	"Parts of the green stain turn orange-ish but is too small to be oranges."
peanut cola	"The peanut cola smells slightly fruity for a minute."
rapt figure	"The rapt figure frowns as if it's eaten something sour."
briar screen	"The briar screen briefly turns darker."
pryer bars	"The pryer bars briefly turn very red."
magenta rope	"The magenta rope and other items you uncovered briefly seem as one."
spear	"The spear stays as-is. But it can't be that hard to change."
slime	"The slime shifts about slightly, but not enough--yet."
lemons	"[l-frown]lemons."
melon	"Hm, there must be a better melon than that, but how to ask Len, now."
pre-mang	"It would be nice to find a mango, yes. But you don't find anything that way."
quince	"That certainly sounds foreign--but it doesn't seem to sway Len."
silly shirt	"You don't quite have ESP, pal, but with the right logic skills you can seem like you do. The shirt remains unchanged."
eerie blurbs	"The blurbs turn a few shades of purple before settling again."
mad train	"The train emits some fake smoke and seems ready to blow up--but no."
barber sickle	"The barber sickle darkens a bit. You must be on the right track."
pugnacious plant	"The plant seems to adopt a defensive position with its arms/branches."
orange	"The orange seems a bit closer for a bit."
an-a	"The A shines for a split-second."
lumps	"The lumps seem almost ready to burst."
inapt paint	"You seem to read the inapt paint backwards for a second."
coin	"The coin looks a bit more artistic for a moment--no, it's too drab, again. Hmm. You must be close."
coins	"The coins rattle and hum promisingly."
icons	"The icons rattle and hum promisingly."
s-c	"The sonic coins hum almost questioningly."
viewer	"That's not the way to learn from the viewer--it's probably not that complicated. You hope."
searcher	"That's not the way to learn from the searcher--it's probably not that complicated. You hope."
perp-priv	"It hurt to be called a perp. But maybe you can figure a way to think of it right. That wasn't quite it."

to say l-frown:
	say "[if player is in clearing]Len frowns[else]you frown[end if] at the ";

to say jet-nq:
	say "Despite your lack of technical knowledge, you think you almost did...something to improve the boat";

to say imp-nag:
	say "The imp looks slightly annoyed for a second. You may be on the right track";

to say ram-nag:
	say "The whiners manage to shush you more noisily than you've ever been shushed. You may be on the right track";

ana-repeats is a number that varies.

cur-help-item is a thing that varies. cur-help-item is usually yourself.

to say spec-help of (itm - a thing):
	if rq is active:
		say "With that conversation, you can't concentrate on much...";
		continue the action;
	now itm is attempted;
	if itm is prefigured:
		say "No, you were right before, there. You just need some help to make that magic word in your notepad work, now. Or maybe you don't!";
		continue the action;
	if itm is a warrior:
		say "[if itm is rodney]Rodney blinks a bit, then frowns[else][itm] shakes his head, but a glare from Rodney sets him straight--for now[end if].";
		continue the action;
	if itm is a mack-idea:
		say "You feel you're on the right track to expose the macks. But that's not quite it.";
		continue the action;
	if itm is an xtrhelp listed in the table of spechelp:
		choose row with xtrhelp of itm in table of spechelp;
		if there is a helptxt entry:
			say "[helptxt entry][line break]";
			if itm is cur-help-item:
				if can-prog-hint:
					increment ana-repeats;
					if ana-repeats is 3:
						now ana-repeats is 0;
						say "[line break]This guessing is getting a bit frustrating. You note the idlers['] slider on the settler[one of][or]again[stopping]. Maybe it could help you a bit.";
						continue the action;
			else:
				now ana-repeats is 0;
			now cur-help-item is itm;
			continue the action;
[		continue the action;]
[		else:
			say "You feel as though you could've done something.";]
	if itm is a mack-idea:
		say "[if itm is ment]The macks seem to waver a bit, but not enough[else]The macks look at you funny[end if].";
		continue the action;
	d "You may want to put in special text here in the table of spechelp, tsh, for ([noun]). Or not.";
	say "You feel a slight psychic push-pull coming from [the itm]. That's a decent omen.";

to decide whether can-prog-hint:
	if mrlp is oyster, decide no;
	if player does not have settler, decide no;
	if headaches is 0, decide no;
	if slider is switched on, decide no;
	decide yes;

doublewarn is a truth state that varies.

to say them-that of (tt - a thing):
	say "[if tt is a female person]her[else if tt is a neuter person]it[else if tt is a person]him[else]that[end if]";

table of donereject [TDR - this can use a lot more entries]
specdone	spectalk
lamp	"If you mess with the lamp, at least you wouldn't see those idiots outside once they got in. But you couldn't run from them, either."
painting	"The painting really goes better with the study than the giant pin."
chimney	"You probably just want to go UP the chimney."
stair	"The stair is good for getting around. It's worth keeping."
ramp	"The ramp is useful now. Best keep it."
satchel	"You don't need to do anything more to the satchel--and if it became latches or something else, the settler would probably get messed up, too."
staple	"Those plates were a mess, and now they're a tidy staple. It's better that way."
stapler	"The plaster was cracking anyway, before you made it a shiny stapler. You don't need to change it again."
store b	"You're a hero[if player is female]ine[end if] and all, but only one sample per day. [if otters is not solved]Just think of the field day Elvira'd have if she found out[else]Yorpwald is democratic, and stuff[end if]!"	[stores]
e-s	"[got-e]."
otters-x	"[got-e]."
routes-x	"[got-e]."
troves-x	"[got-e]."
towers-x	"[got-e]."
oyster-x	"[got-e]."
hoster	"[got-e]."
tokers	"They are who they are[if nestor is off-stage]. You should maybe try to get their friend back[end if]."
nestor	"You rescued him, and that's enough."
lecturer	"He's already been changed enough."
picturers	"The picturers were pretty strict about what they suggested. Not much else you can do with them."	[routes]
lairage regalia	"You twist your mind a bit, but no, there's probably only one way to enter."
adsorbing signboard	"No, you don't see any other way around the signboard to enter. You don't need one, either."
old giant	"[if old giant is visible]It wouldn't be wise to argue against the giant[else if old giant is in lalaland]You had your conversation for the day[else][bug-report][end if]."
bench	"[if old giant is in lalaland][giant-over][else]You leaned on the bench right. Time to get on it[end if]."
bench-end	"[if old giant is in lalaland][giant-over][else if nuder is in mesa]Maybe deal with Rude [']N Nuder, now[else]You got on the bench right. Time to start ducking[end if]."
giant's elbow	"[if old giant is in lalaland][giant-over][else]You don't need to avoid the giant's elbow any more[end if]."
U NERD ENDUR REDUN	"You don't need to do anything fancy with U NERD ENDUR REDUN. Brother Horbert will do that."
pipe soot	"Brother Horbert probably knows what to do with that."
seed pit	"That'd be a double negative, to re-enter. Your argument would be so won, it's lost."
narrow cracks	"The underground is already lit. Un-unlit."
un-road	"You know where the un-road is, but how to navigate it?"
da mist	"Hm, not quite--you'd like to be absolutely SURE you don't get too lost in da mist. Oh, and that you get lost enough."
bent ewe	"The bent ewe and hurt hog seem to be at peace. Maybe you can move on. Maybe the hurt hog thinks it's okay."
Pa Egg Pea	"You probably did what you could. Or not-did." [troves]
heat	"Don't need to overheat, or overhate."
fretful truffle	"Caring and all its offshoots only go so far."
sob ever verbose	"You observe that further observation would be redundant."
stop post	"You don't need to P.S. tweaking the post."
bee's head	"Too much fiddling with reason is unreasonable."
what-a-bee	"The bee's already taken enough of your in-my-heartitude."
cellar door	"How inefficient! You already know where it is."
box of diapers	"Don't twist yourself into knots to/from REAL despair."
praise	"You're wanting praise too much, now."
rivets	"You're striving too hard, now."
ME ARTS	"The ME ARTS have nurtured you spiritually[if lobster is in lalaland]. The lobster nurtured you physically. Time to move on[else]. If you look at it right, the lobster can nurture you physically[end if]."
Eddie's Song	"You've lasted long enough. There are new things to look at, now."
star	"No need for additional arts."	[presto]
dart	"The dart's just fine as-is."
onyx censer	"You may need to change the censer differently."
boing mechanism	"You can't force another revelation, but you don't need to."
sport ports	"You don't need to praise military activity and sacrifice too much. Countries where people feel obliged to are at risk of authoritarianism."
popgun	"If you overthought things, you might break it again."
Leo	"Giving Leo flashbacks to his humiliating loss would be a bad idea. He may've forgotten who beat him, already."
Rand	"Giving Rand flashbacks to his humiliating loss would be a bad idea. He may've forgotten who beat him, already."
wzup	"You don't need to greet Leo and Rand again."
log ons	"[no-rehash]."
alert	"[no-rehash]."
ought	"[no-rehash]."
rom sticks	"Man, it would be too easy to mess the rom sticks up. Better not tinker like that."
casserole	"The casserole is mixed up enough."
skid	"[sk2dsk]."
disk	"[sk2dsk]."
leaf	"You can't bring the flea back to life--or do anything else to the leaf."
dirty looking cola	"No need to go technologically backwards. Plus the cola was processed enough before it got in the bottle."
futon	"The futon could be a little less lumpy, sure, but that's beyond your magic powers."
caps lock	"YOU HAVE WHAT YOU NEED."
mug	"[if fizzy cola is visible]You'd get cola all over you if you tried anything with the mug[else]The mug is no longer manipulable[end if]."
computer screen	"The screen is less ancient than the censer, but you can't do any better. It works, so you don't need to fiddle."
keyboard	"You don't need to resummon the bored yak. And programming exercises can become enough of a drab yoke."
t-key	"No, the TAB key is what it should be."
scratch paper	"After compiling, you often need to make small tweaks, but not like that."
compiled code	"You had to consider all sorts of combinations while debugging, but things will be easier now."
stumbler tumblers	"You can't and don't want to do anything else to the tumblers." [oyster]
capers recaps	"Casper has suffered enough indignities. You should annoy someone else."
gins sign	"The sign mainly just disallowed singing."
tines	"You destroyed the stein, and that's enough."
raft	"The raft has fuel. It needs to use that fuel, now, with the oars."
trout	"Retutor? Torture. Rot. True!"
wipes	"Now that you've got the wipes, you need to find how to use them constructively. Maybe there's something worth using them on."
crate	"Besides identifying it as a rect, you can't do much else with the crate."
knob	"You should leave the knob to b'n OK."
bogus-plains	"You start up a grand lecture again, but you feel something spinal and think 'I...plans.' Time to move on."
waste	"The tubs already got broken up."
lance	"Your work turned up enough."
rigged digger	"You managed to get a digger from a prod, and that's good enough."
heaps	"You figure the heaps are at a point where you can't change them for the better."
waste	"The heaps are still technically waste, but you cleaned them up enough."
a-s	"Further searching proves fruitless."
a-p	"You discovered the portal. No need to look further."
ruby	"You already did in the wrap."
haunter	"Don't oversell it! Just take the haunter to where it was probably (heh) the walleyes who buried the ruby."
thin hint	"The ruby's hidden well. No need to tinker."
gleaner	"It's already been made bigger. Not much more you can do with it[if gleaner is unexamined] except examine it[end if]."
lever	"You riff on your previous celebrations, but it doesn't feel as cool."
brownies	-- [towers]
old ice	"Twist the ice too much, it might not look right."
ragged dagger	--
Claire's Scalier	--
raves saver	"The raves saver is as glitzed-up as it'll get."
strudel	"You'd have to drop the strudel on the ground and get it germy to try that again. Eww."
prison ropins	"It already is. Dr. Yow is free."
agnostic	"Fiddling with [ag-first] too much that way might undo the good you did [him-her]."
turbos	"The turbos are working. Best not tinker."
blaster	"The blaster is working. Best not tinker."
flowerpot	"You've got something nice in the flowerpot. Better not mess with it."
Tetris Sitter	"St. Teri's back in the real world, now."
b-b	"You've dealt with the barley. You can move around a lot more, now." [otters]
eels	"The eels have done enough."
Merle	"[i]Fine, be beefin[r], you think. Neither Merle nor Elmer is going to be any more honest. Or anything nice or good, really."
p-2	"You already justified yourself partially. Mr. Lee doesn't need more dialogue."
parrot	"The parrot can be changed back into a raptor, but not into anything new."
whistle	"The whistle's already in tune."
medals	"You already got a boost from the medals."
compass	"If you changed the compass, it might wind up pointing in the wrong direction." [others]
l-o-p	"You corrected the list enough."
auction caution	"You hear a sap yap about the sign and figure it can't be changed any more."
lemons	"You sour on changing the lemons further."
melon	"The melon is fine as-is. It's better than the one that was on display, for sure."
peach	"You got enough of a discount. Really."
mango	"Snag mo['] mangos? No mas, G."
papayas	"You've already established yourself as a prompt payer."
perp-priv	"Don't want to over-prep[gs-north]."
searcher	"You've done enough researching[gs-north]."
viewer	"You've done enough reviewing[gs-north]."

to say gs-north:
	if gate-level is 2:
		say ", but you can just go north"

to say got-e:
	say "You've got an entry. No need to seal it up"

to say sk2dsk:
	say "No, skid <=> disk is about it. There's no tricky third way."

to say giant-over:
	say "The bench isn't important with the giant gone"

to say no-rehash:
	say "[if leo is in dirge ridge]They're already off getting to know each other better[else]That'd be an awkward rehash. You need another way to say good-bye[end if]"

to say just-c:
	say "Just return the fruit to Curtis. No need for another change"

to say good-enuf of (goody - a thing):
	repeat through table of donereject:
		if goody is specdone entry:
			if there is no spectalk entry:
				say "[generic-reject]";
			else:
				say "[spectalk entry]";
			continue the action;
	if goody is a mack-idea:
		say "You've already dealt with the macks that way.[no line break]";
		continue the action;
	if goody is a fruit:
		say "[just-c].[no line break]";
		continue the action;
	if goody is an animal:
		if goody is in perverse preserve or goody is in Lamer Realm:
			if goody is not the parrot:
				say "No need to tweak [the goody] again. [if goody is plural-named]They're[else if goody is neuter]It's[else if goody is female]She's[else]He's[end if] fine as is.[no line break]";
				continue the action;
	if goody is imp1 or goody is imp2 or goody is imp3:
		say "The imp's already been compromised that way.";
		continue the action;
	if goody is ram1 or goody is ram2 or goody is ram3:
		say "The whiners were already slowed up that way.";
		continue the action;
	d "The table of donereject could use a lot more entries, like here for the [goody]. Search for TDR in the source.";
	say "You've already changed [them-that of goody] enough.[no line break]";

firstwordhash is a number that varies.
cmdhash is a number that varies.

to decide whether (tn - a table name) is hash-found:
	repeat through tn:
		if there is a hashval entry:
			if cmdhash is not 0:
				if cmdhash is hashval entry or firstwordhash is hashval entry:
					if there is a this-item entry:
						if this-item entry is visible:
							unless this-item entry is a mack-idea and this-item entry is not ment and debug-state is false: [small hack for mack guesses that aren't present yet, but allow programming tests to run]
								say "[this-clue entry][line break]";
								decide yes;
					else if there is a this-room entry:
						if location of the player is this-room entry:
							say "[this-clue entry][line break]";
							decide yes;
					else if there is a this-rule entry:
						say "[run paragraph on]";
						follow this-rule entry;
						if the rule succeeded:
							say "[this-clue entry][line break]";
							decide yes;
					else:
						d "Need error message for [this-cmd entry] misfire.";
			if doublewarn is false and cmdhash is hashval entry * 2 and cmdhash is not 0:
				say "It looks like you tried to act on something doubly, possibly something that anagrams itself. To remove any future confusion, you should know you don't need to do that.";
				now doublewarn is true;
				decide yes;
	decide no;

definition: a thing (called ge) is good-enuf:
	decide yes.

to say reject:
	if sss is true: [inform 7 gives extra space if I just follow the rule as-is]
		consider the show blues rule;
	now cmdhash is the hash of the player's command;
	now firstwordhash is the hash of word number 1 in the player's command;
	d "The hash of the command is [cmdhash]. Hash of word 1 is [firstwordhash].[line break]";
	repeat through regana of mrlp:
		if cmdhash is the hashkey entry or firstwordhash is the hashkey entry:
			if the-from entry is reflexed and the-from entry is visible and the-from entry is good-enuf:
				say "[good-enuf of the-from entry][line break]";
				continue the action;
			if the-to entry is not the-from entry and the-to entry is visible and the-from entry is good-enuf:
				say "[good-enuf of the-to entry][line break]";
				continue the action;
			if the-from entry is visible:
				if Gunter is off-stage and player is in dusty study and stuff-found is 3:
					say "You can't quite concentrate with the noise at the door.";
					continue the action;
				if slider is switched on:
					if cmdhash is hashkey entry:
						match-process the player's command and the right-word entry;
					else:
						match-process word number 1 in the player's command and the right-word entry;
				else:
					if Elmo is visible and the-from entry is not rifle:
						say "You need to [if Elmo carries rifle]disarm[else]talk to[end if] Elmo instead.";
						continue the action;
					if stuff-found < 3 and player is in study:
						say "Hmm. Nah. That's not quite it. Your skills are a bit rusty, but you'll figure it out.";
						continue the action;
					say "[spec-help of the-from entry]";
					if rq is active:
						say "With that conversation, you can't concentrate on much...";
						continue the action;
					if cmdhash is not the hashkey entry:
						say "[line break](In particular, the first word seemed to have an effect, and you generally don't need a second word.)[line break]";
				continue the action;
	if regtab of mrlp is hash-found:
		continue the action;
	if table of general nudges is hash-found:
		continue the action;
	if player has settler and settler-try is false:
		if the player's command includes "settler":
			say "It looks like you may be trying to do things with the settler. This game uses the simplified SCAN (OBJECT).";
			now settler-try is true;
			the rule succeeds;
	if mrlp is otters:
		if the player's command matches the regular expression "^<a-z>+ly":
			say "[if whistle is reflexed and medals are reflexed]You don't know if you need to do any more of that[anicheck][else][ly-ish].";
			continue the action;
	if mrlp is demo dome:
		say "There's nothing too tricky to do in the Demo Dome. You can THINK or request the SCORE to see if there's anything you missed. VERBS has limited utility, since there are no puzzles here.";
		continue the action;
	if player is in Den Loft and yapper is not in Den Loft:
		unless hash of the player's command is 501914680 or hash of the player's command is 335153504:
			say "The only thing left to do here is muck with the dialer right.";
			continue the action;
	say "[generic-reject]";

to say generic-reject:
	say "That's not something you can say, do or see here. For a general list of verbs, type VERBS, or for options, type OPTIONS. ";
	unless qbc_litany is Table of No Conversation:
		say "Besides, there's someone to deal with.";
	else if cur-score of Means Manse > 0:
		say "(If you are trying to flip something back, you almost never need to.)[line break]";
	else if last-hash is cmdhash and last-hash > 0:
		say "[paragraph break]Though it looks like you're a bit stuck. You may need to take a step back and examine things, [mb-ss-ped]to see what you can change. The trickier stuff should have more than one clue.";
	else:
		say "[line break]";
	now last-hash is cmdhash;

to say ly-ish:
	say "You think you're on to something, but no--you can't find anything to focus on, thinking that"

to say anicheck:
	if nounsolve > 2 or adjsolve > 2:
		continue the action;
	say ", but you're worried you don't have enough allies";

settler-try is a truth state that varies;

to say mb-ss-ped:
	if player has settler:
		say "maybe with SS, ";
	if player has pedanto-notepad:
		say "maybe looking again through your pedanto-notepad for general tips, ";

last-hash is a number that varies.

section answer

[this is a small hack to allow ANSWER SIDE DOOR]

understand the command "answer [text]" as something new.

understand "answer [text]" as asking generically.

ansbufing is an action applying to one topic.

understand the command "answer [something]" as something new.
understand "answer [something]" as ansobjing.

ansobjing is an action applying to one thing.

does the player mean ansobjing the side door when Gunter is off-stage: it is very likely.

check ansobjing:
	if noun is a person:
		say "Try to ASK a person about something instead." instead;
	if noun is side door or noun is span pans or noun is secure door:
		try opening noun instead;
	say "That's not something animate." instead;

chapter status bar and scoring

to decide what region is mrlp:
	decide on map region of location of player.

no-tip is a truth state that varies.

tip-warn is a truth state that varies.

to reg-inc:
	increment the score;
	if mrlp is nothing:
		say "BUG NOTE: This location needs a map region!";
	otherwise:
		increment the cur-score of mrlp;
		if mrlp is means manse and rifle is off-stage and cur-score of Means Manse is max-score of Means Manse - 4:
			say "[line break]Congratulations, Iron [if player is male]Man[else]Woman (Ow)[end if] in Manor! You've found all the secrets here. You can just exit the gallery now[if settler is unexamined], but it'd be a good idea to examine the settler, first[end if].";
		if mrlp is stores and cur-score of stores is max-score of stores:
			now stores is solved;
			now last-solved-region is stores;
	if suppress-score is false, consider the notify score changes rule;
	let tru-sco be cur-score of mrlp;
	if mrlp is otters and cinders are in lalaland:
		decrement tru-sco; [if the player uses the cinders earlier than they should--I can't stop them, but this is a hack]
	repeat through table of init-points:
		if mrlp is myrg entry and tru-sco >= pttot entry:
			if no-tip is false and roved is false and doneyet entry is false:
				say "[line break][blurb entry][paragraph break]";
				if tip-warn is false:
					ital-say "you can turn this start-of-region hinting off with NO TIP and on again with OPT IN.";
					now tip-warn is true;
					pad-rec "opt in/no tip";
			now doneyet entry is true;
			the rule succeeds;
	if score-after is true:
		try requesting the score;

score-after is a truth state that varies.

table of init-points
myrg	pttot	blurb	doneyet
means manse	2	"Yay! You're still changing stuff to stuff. For now. But you're on home turf, now. If you get out in the world, it'll be trickier."	false
stores	1	"Well, it looks like the stores can be changed into something else. Maybe it won't be so easy behind them, but maybe you can get rid of a few to start and see any tricks later."
routes	1	"Well, that was different from the standard directions. But there can't be too many other ways to go."
troves	1	"Neat. You made progress just thinking. Or not-thinking. It could be either."
troves	2	"Thinking has gotten you somewhere, you think. [if Pa Egg Pea is reflexive]Maybe reading Pa, Egg, Pea right will help you further, let you look into your mind more dispassionately[else]Hating and gaping are totally different, except for the whole not actually doing anything, but they've both worked[end if]."
presto	1	"It feels cathartic, using a sub-profanity to get going."
presto	2	"Gee! Such good clean fun! But--how many clean swears are there? Golly! If you run into compound words..."
oyster	1	"You've started to get some action in."
oyster	2	"Bam! More action! You'll still sort of be guessing the verb, but it's sort of just reacting, too."
towers	1	"Well! You kind of cost him a few macho points, but you didn't, like, name-call him. He's probably better off being described that way in the long run."
towers	2	"Most of these fellows seem short-named and not too complex. I mean, if they got suckered by Rodney... things will probably get tougher to describe outside the Trefoil, but this is good practice."
otters	1	"You've used pretty much every kind of word in the dictionary to get here. You have a strong idea what's left. Maybe you can test that hypothesis on Ed!"
otters	2	"Barley, [if player is in bleary barley]reedily[else]then another l-y. Ed Riley seems a bit less intimidating--you dinged up the [imp-or-whiners] here[end if]. Until you get your full powers back, your restriction has made a bit of a pattern, here. For now."
others	1	"Hmm. It looks pretty clear what sort of stuff you're trying to make, here."

to say imp-or-whiners:
	if player is in anteroom:
		say "whiners";
	else:
		say "sly imp";

when play begins (this is the define-status-line and intro text rule):
	now left hand status line is "[lhs]";
	now right hand status line is "[cur-score of mrlp]/[if possibles is true][poss-range][else][max-score of mrlp][end if][if Strip of Profits is visited] [bracket][number of solved regions][close bracket][end if]";
	ital-say "this game is a sequel to Shuffling Around. It has the same mechanics. But the back story is not important.";
	say "[wfak][line break]Yorpwald's been peaceful for a long time after your turn shuffling around. You weren't tabbed to lead the kingdom--but those in charge did a decent enough job, until along came Elvira. Nobody took her seriously at first, since it slipped that she was once branded the Necro-Crone.[wfak][line break]That was before she came out with a proposal she said you could not resist: ELVIRA'S REVISAL! You had to admit, if you didn't think it worked, then your shuffling around only went so far. But if you did, then obviously she was the right person to execute it, and so forth. Either way, the way you rescued Yorpwald was so silly and formulated, it couldn't happen again, and no bad guy would be dumb enough to leave things that way, for some egghead to grind things out! There would be new, bold defenses against the next big challenge.[wfak][line break]Thus Elvira gained prominence, vowing to fight the scourge of stupid wordplay armed only with her charisma. 'ELVIRA'S REVISAL? I SLAVER!' became the chant. And people did. Oh, how they laughed at her plea 'UNRATIFIED? INFURIATED?' After that, pro- and anti-anagram types had to agree she was a more exciting conversationalist than you, weighing in on spoonerism elitists and the viability of anagramming acronyms (pro and con) and whether accents count, and implementing other 'improvements' such as Reality TV ('TTY Elvira' was a big hit) and gossip columns.[wfak][line break]Then one day she suggested the possibility you might become jealous of her popularity! And who could blame you?[wfak][line break]Her being the Necro-Crone was all in the past! She was way more exciting and social than you, and didn't people deserve a second chance? Of course they did![wfak]"

to say lhs:
	if mrlp is not troves:
		say "[location of player] ([mrlp])";
		continue the action;
	say "Poverty";
	let QQQ be the number of visited rooms in Troves;
	repeat with QQQQ running from 1 to number of rooms in Troves:
		say "[if QQQQ is QQQ]*[else]-[end if]";
	say "Very Top (Troves, [location of player])"

to say poss-range:
	if poss-score of mrlp > min-score of mrlp:
		say "[min-score of mrlp]-[poss-score of mrlp]";
	else:
		say "*[poss-score of mrlp]*";

dome-score-not is a truth state that varies.

carry out requesting the score:
	if mrlp is nothing:
		say "BUG: This location needs a region." instead;
	if mrlp is Demo Dome:
		if dome-score-not is false:
			say "There's no score in the Demo Dome. You just need to look around.";
			now dome-score-not is true;
		left-to-see instead;
	if roved is true:
		if player is in strip of profits:
			say "[if store h is in strip of profits]You need to figure how to get to store H[else]Enter the hoster for the final region[end if]." instead;
		say "You have [cur-score of mrlp] of [max-score of mrlp] total points for the post-Elvira Others region[if min-score of mrlp < max-score of mrlp], but you only need [min-score of mrlp][end if].";
		eval-fruits;
		check-guru;
		the rule succeeds;
	otherwise:
		d "# of turns = [turn count].";
		say "Ol['] Stat Totals:[paragraph break]Score in a scenario: [cur-score of mrlp] out of [max-score of mrlp] total points in the current region, [mrlp]";
		if cur-score of mrlp is max-score of mrlp:
			if mrlp is means manse:
				say ". You should go IN to the Strip of Profits, now";
			else if mrlp is others:
				say ". You can go NORTH to the Valence Enclave";
			else if mrlp is stores:
				say ". You have access to all the sub-areas";
			else:
				say ". BUG: your final action should always score the final point";
		else:
			if mrlp is not solved and possibles is true:
				if min-score of mrlp < poss-score of mrlp:
					say "[lomax of mrlp]";
				else:
					say ". There are no secrets left to find here, so the score to win is [min-score of mrlp] points[if poss-score of mrlp is not max-score of mrlp]--you missed some extra stuff you can't go back for[end if]";
		say ".[line break]";
		if mrlp is otters and power-back is false:
			say "[line break]You probably need to do something to get back your full powers, too.";
	repeat with QQ running through regions:
		if number of visited rooms in QQ > 0:
			if mrlp is not QQ and QQ is not solved:
				say "You have scored [cur-score of QQ] out of [max-score of QQ] total points for the (unsolved[if QQ is stores] hub[end if]) [QQ] region[lomax of QQ].";
	if there is a solved region:
		let temp be 0;
		say "[line break]Won now:";
		repeat with rgn running through markable regions:
			increment temp;
			if mrlp is not rgn:
				say " [rgn] ([cur-score of rgn]/[max-score of rgn])[if temp < number of markable regions],[else].[end if]";
	otherwise:
		say "[line break]You haven't solved any regions yet.";
	if mrlp is others:
		eval-fruits;
		check-guru;
	the rule succeeds;

to say lomax of (re - a region):
	say ". Lowest score to solve is [min-score of re]. Maximum score available is [poss-score of re]"

to check-guru:
	if did-guru is false and cur-score of others is 41:
		say "[line break]Since you've changed all the fruits without using the arugula, I think you deserve to know you will get the last lousy point for entering the Valence Enclave [if player is not in gates stage]north of the Gates Stage[else]to the north[end if] without using GURU."

possibles is a truth state that varies. min-alert is a truth state that varies.

report requesting the score for the first time:
	if possibles is false and min-alert is false and mrlp is not demo dome:
		ital-say "You can toggle seeing the minimum points to pass an area, or maximum achievable points, by typing POSS. This is a potential meta-spoiler, since the minimum score increasing indicates you found a fun side quest, and the maximum score decreasing means you left something behind, but it may be helpful.";
		now min-alert is true;

definition: a region is markable:
	if it is mrlp, no;
	if it is solved, yes;
	no;

an exhibit is a kind of thing. an exhibit can be unnoted, perused or exhausted. an exhibit is usually unnoted.

to left-to-see:
	if scams is false:
		say "[line break]";
	if number of unnoted exhibits is 0:
		repeat with QQ running through things in sparse spares:
			if QQ is not player and QQ is not examined and QQ is not red writing:
				say "You could still examine [the QQ] [if player is  in sparse spares]here[else]in Sparse Spares[end if].";
				continue the action;
	repeat through table of xibits:
		if exhib entry is unnoted:
			if location of exhib entry is unvisited:
				say "You still haven't gone [cueloc of exhib entry] from Peek Keep.";
				continue the action;
			if exhib entry is unexamined:
				say "You saw the [exhib entry] [if location of exhib entry is location of player]here [end if]in [location of exhib entry], but you didn't examine it.";
				continue the action;
			say "You still have more of the [exhib entry][if exhib entry is novella and novella is examined] (examined by not read)[end if] to look through.";
			continue the action;
	if sparse spares is unvisited:
		say "There's some random junk below the entry to Peek Keep.";
		continue the action;
	repeat through table of xibits:
		if exhib entry is perused:
			say "You haven't looked all the way through the [exhib entry] [if location of player is location of exhib entry]here [end if]in [location of exhib entry].";
			continue the action;
	say "It looks like you've looked through everything. Thanks for all the time you spent, and I hope it was worth it!"

to decide which direction is cueloc of (xx - an exhibit):
	let myway be the best route from Peek Keep to the location of xx;
	decide on myway.

section scafing - not for release

scafing is an action out of world.

understand the command "scaf" as something new.

understand "scaf" as scafing.

carry out scafing:
	now score-after is whether or not score-after is false;
	say "Printing score after gaining a point is now [on-off of score-after].";
	the rule succeeds;

scaying is an action out of world.

understand the command "scay" as something new.

understand "scay" as scaying.

carry out scaying:
	say "Printing score after gaining a point [if score-after is true]was already[else]is now[end if] on.";
	now score-after is true;
	the rule succeeds;

chapter possing

possing is an action out of world.

understand the command "poss" as something new.

understand "poss" as possing.

carry out possing:
	if possibles is true:
		now possibles is false;
	otherwise:
		now possibles is true;
	say "Switching [on-off of possibles] minimum/maximum available point notification in the header. ";
	if min-alert is false:
		ital-say "this is a quasi-spoiler of sorts, since watching the maximum possible score drop may mean you have missed an easter egg. Or watching the minimum score increase may mean you found one.";
	else:
		say "[line break]";
	now min-alert is true;
	pad-rec-q "poss";
	the rule succeeds;

section posfing - not for release

posfing is an action out of world.

understand the command "posf" as something new.

understand "posf" as posfing.

carry out posfing:
	say "Forcing possible point notification on[if possibles is true], though it already is[end if].";
	now possibles is true;
	the rule succeeds;

chapter bugtracking

to say my-repo:
	say "http://github.com/andrewschultz/stale-tales-slate/Roiling";

to say bug-report:
	abort-if-bugfind;
	say "BUG! You should not have seen this. Write me at [email] to describe how and where you got this--use the up arrows, or have a transcript ready, if you want to give the last few commands.[paragraph break]You can also report reproducible bugs at [my-repo].";

bugsquash is a truth state that varies.

to abort-if-bugfind:
	say "Attempting to cut off testing bugsquash = [bugsquash].";
	if bugsquash is true:
		say "[word number 1 in the player's command] = first letter.";
		if word number 1 in the player's command is not "showme":
			say "Cutting off testing now.";
			end the story finally;
			follow the shutdown rules;

chapter exitsing

exitsing is an action out of world.

understand the command "exits" as something new.

understand "exits" as exitsing.

carry out exitsing:
	if mrlp is troves:
		say "No one direction seems better or worse than the next. Perhaps you need to find direction inside you, and you will move ahead in the world." instead;
	if mrlp is routes:
		if player is in mesa:
			if old giant is in mesa:
				say "You probably aren't going anywhere with that giant around." instead;
			if MORF FORM is not off-stage:
				say "You probably don't want to go anywhere with that [if MORF FORM is in mesa]thing[else]bean[end if] around." instead;
			say "There are plenty of ways to go, but they don't seem to lead anywhere. [if cleric circle is visited or idle deli is visited or adobe is visited]You've made it in one place, here, so maybe you can make it in another[else]There are three places to enter, though they do seem to shift[end if]." instead;
		if player is in deli or player is in adobe or player is in circle:
			say "You can go back out." instead;
		if mrlp is routes:
			say "Looks like you will need to figure a way to go onward without directions. You've been doing well so far." instead;
	if player is in den loft:
		say "You can go back outside, though you can also finish the job back here." instead;
	if player is in end den:
		say "You can go back outside to the Horned Hedron." instead;
	if player is in Loftier Trefoil:
		say "You probably aren't going anywhere until Rodney does, first." instead;
	if player is in barley and b-b is in barley:
		say "Maybe you'll see some exits if you get rid of the barley." instead;
	if player is in rustic and compass is off-stage:
		say "You've lost your bearings a bit, but maybe [if player has compass]the compass could help[else]if you got enough fruits, Curtis would help you[end if]." instead;
	if player is in strip:
		say "There are no directional exits here, but you [if number of visible portals is 0]may want to try opening up a store[else if number of visible portals is 1]can go IN to the store-portal you made[else]have multiple ex-stores you can enter[end if]." instead;
	if number of viable directions is 0:
		say "There are no directional exits here, but that doesn't mean you're stuck. Maybe you can figure a way to create one[if number of visible enterable things > 0], and it looks like there's something to ENTER[end if].";
	else if number of viable directions is 1:
		say "You can try to go [list of viable directions].";
	else:
		say "There are [number of viable directions in words] viable exits[if mrlp is towers and number of visible guardians > 0], though not all are unblocked[end if]: [list of viable directions].";
	the rule succeeds;

chapter game-start

goshy is a truth state that varies.

when play begins (this is the basic initialization rule):
	let temp be 0;
	now the have-died flag is false;
	protect the have-died flag from undo;
	repeat through table of pad-stuff:
		if there is no readyet entry:
			now readyet entry is false;
		if there is no introtoo entry:
			now introtoo entry is false;
	repeat through table of init-points:
		now doneyet entry is false;
	move Edictal Citadel backdrop to all ominous rooms;
	move the curst palace backdrop to all towery rooms;
	add-errs means manse;
	let convo-holes be false;
	let temp be 0;
	if debug-state is true:
		repeat through table of subject-blather:
			if there is no him-say entry:
				say "[him-who entry] / [person-subj entry] needs entry.";
				now him-say entry is "[bug-report]";
				now convo-holes is true;
		repeat with PE running through people:
			if PE is not a default-talker listed in the table of default-gen-blather:
				say "[PE] needs default-gen-blather.";
				now convo-holes is true;
			else if PE is not a him-who listed in the table of default-sub-blather and PE is not terse:
				if 1 > 2:
					say "[PE] might want default-sub-blather.";
			if PE is not terse:
				if PE is not a him-who listed in the table of subject-blather:
					if litany of PE is Table of No Conversation and PE is not a guardian:
						say "[PE] has nothing special or specific to say.";
				if PE is not a him-asked listed in the table of reflexive-blather:
					if litany of PE is Table of No Conversation:
						say "[PE] has nothing to say about themselves.";
		if convo-holes is false:
			say "No conversational holes.";
	now die-trigger is a random number from 3 to 5; [DIE TO US in Lectures]
	now r10 is mapped west of nowt town;
	now nowt town is mapped east of r10;

definition: a room (called myrm) is ominous:
	if myrm is bleary barley and b-b is reflexive:
		decide no;
	if myrm is in Otters:
		if myrm is Tapering Anger Pit or myrm is Anteroom:
			decide no;
		decide yes;

last-wall is a thing that varies. last-wall is usually owl decal code wall.

when play begins (this is the hint and other randomization rule):
	if a random chance of 1 in 2 succeeds: [troves random clues]
		now bee-head-first is true;
	if a random chance of 1 in 2 succeeds:
		now rivets-first is true;
	if a random chance of 1 in 2 succeeds:
		now lobster-first is true;
	if a random chance of 1 in 2 succeeds:
		now sister-first is true;
	if a random chance of 1 in 2 succeeds: [presto random clues]
		now goshy is true;
	sort byebyes in random order; [phat path ways to say goodbye]
	now a random badbook is in hacks' shack;
	sort shop-hint-items in random order; [posh hops shop items] [oyster random clues]
	if a random chance of 1 in 2 succeeds:
		now carps-pref is true;
	else:
		now carps-pref is false;
	if a random chance of 1 in 2 succeeds: [towers random clues]
		now t-or-b is turbos;
	else:
		now t-or-b is blaster;
	sort the table of guard-org in random order; [for first-time-view clues]
	sort table of animal randomness in random order; [otters hinting]
	sort tapering-items in random order;
	sort anteroom-items in random order;
	if a random chance of 1 in 2 succeeds: [others random clues]
		now viewer-first is true;
	sort rustic-easy-items in random order;
	sort wells-hintables in random order;
	sort field-hintables in random order;
	sort clearing-hintables in random order;
	sort scapespace-hintables in random order;
	sort nextclue in random order; [mislit limits items]
	sort the table of xibits in random order; [demo dome exhibit stuff]
	let wt be 0;
	repeat through table of xibits:
		increase orwt entry by wt;
		increment wt;
	sort the table of xibits in orwt order;
	if a random chance of 1 in 2 succeeds: [demo dome random pokes]
		now last-wall is owl decal code wall;
	else:
		now last-wall is allow lots tools wall;

volume yes-no substitutes

[this lets the programmer skip over yes/no decides]

chapter complex consents

debug-auto-yes is a truth state that varies.

yn-auto is a number that varies.

to decide whether the player dir-consents:
	if debug-state is true:
		if yn-auto is 1, decide yes;
		if yn-auto is -1, decide no;
	if the player consents: [inside dir-consents]
		decide yes;
	decide no;

chapter auing

auing is an action out of world applying to one number.

understand the command "au" as something new.

understand "au [number]" as auing.

carry out auing:
	if number understood > 1 or number understood < -1:
		say "1 = auto-yes 0 = auto-off -1 = auto-no." instead;
	if number understood is yn-auto:
		say "It's already set to [auto-set]." instead;
	say "Y/N responses changed from [auto-set] to ";
	now yn-auto is number understood;
	say "[auto-set].";
	the rule succeeds;

to say auto-set:
	say "[if yn-auto is 1]auto-yes[else if yn-auto is -1]auto-no[else]no auto[end if]";

chapter basic consents

to decide whether the player test-consents:
	if debug-state is true:
		say "[line break]> ";
	if the player consents: [inside test-consents]
		decide yes;
	decide no;

to decide whether the player yes-consents:
	(- YesOrNoExt(1) -).

to decide whether the player no-consents:
	(- YesOrNoExt(0) -).

to decide whether the player direct-consents:
	if yn-auto is 1, decide yes;
	if yn-auto is -1, decide no;
	if the player consents, decide yes; [inside direct-consents]
	decide no;

Include (-

[ YesOrNoDebugForce yn;
	if ( (+ debug-state +) == 1)
	{
	    return ( (+ debug-auto-yes +) );
	}
	return YesOrNo();
];

[ YesOrNoExt yn;
	if ( (+ debug-state +) == 1)
	{
	    return yn;
	}
	return YesOrNo();
];

-)

volume anagram and hint operations

book scaning

[* bscanned is both-scanned, escanned is either-scanned]

scaning is an action applying to one thing.

understand the command "scan" as something new.

understand "scan" as scaning.
understand "scan [thing]" as scaning.

rule for supplying a missing noun while scaning or sying or sning or sbing (this is the how to scan the air rule):
	if mrlp is stores:
		if player is in cruelest lectures:
			now noun is lecturer;
			continue the action;
	else if mrlp is routes:
		if location is Harms Marsh:
			if darkness is in Harms Marsh:
				now noun is darkness;
				continue the action;
		if player is in mesa:
			if the-b is in mesa:
				now noun is the-b;
				continue the action;
			if MORF FORM is in mesa:
				now noun is MORF FORM;
				continue the action;
	else if mrlp is troves:
		if player is in loather rathole:
			if cold is in rathole:
				now noun is cold;
			else:
				now noun is heat;
			continue the action;
		if player is in Bustle Sublet:
			if sob ever verbose is in Bustle Sublet:
				now noun is sob ever verbose;
				continue the action;
			if stop post is reflexive:
				now noun is stop post;
				continue the action;
		if player is in Upscale Capsule:
			if noise is in Upscale Capsule:
				now noun is noise;
				continue the action;
			if song is in Upscale Capsule:
				now noun is song;
				continue the action;
	else if mrlp is presto:
		if player is in dirge ridge and leo is washed up:
			now noun is wzup;
			continue the action;
	else if mrlp is oyster:
		if player is in fighter freight:
			now noun is pale plea;
			continue the action;
		if player is in Lapsin' Plains:
			if crate are in Lapsin' Plains and crate is reflexive:
				now noun is crate;
				continue the action;
			else if c2 is reflexive:
				now noun is c2;
				continue the action;
			else if bogus-plains are reflexive:
				now noun is bogus-plains;
				continue the action;
		if player is in arches:
			if a-s are reflexive:
				now noun is a-s;
				continue the action;
		if player is in anger range:
			if pikes are in lalaland and haunter is off-stage:
				now noun is pre-haun;
				continue the action;
			if pre-haun is in anger range:
				now noun is pre-haun;
				continue the action;
			if haunter is in anger range and haunter is reflexive:
				now noun is haunter;
				continue the action;
		if player is in Hardest Trashed Dearths:
			if cans are in Hardest Trashed Dearths:
				now noun is cans;
			else:
				now noun is eeks;
			continue the action;
		if player is in Horned Hedron and walleyes are in lalaland and o-t is in Horned Hedron:
			now noun is o-t;
			continue the action;
		if player is in Dourest Detours:
			now noun is ant;
			continue the action;
		if player is in tenfold:
			if yapper is in tenfold:
				say "The settler goes crazy when pointed at the yapper.";
				now noun is yapper;
				continue the action;
			say "The settler goes crazy when pointed at the dialer.";
			if dialer is reflexive:
				now noun is dialer;
			else:
				now noun is d2;
			continue the action;
	else if mrlp is towers:
		if player is in rawest waters:
			now noun is eastern shore;
			continue the action;
	else if mrlp is otters:
		if player is in bleary barley:
			if b-b is reflexive:
				now noun is b-b;
				continue the action;
			if ed riley is in bleary barley:
				now noun is ed riley;
				continue the action;
		if player is in loop pool:
			if sea cube is in loop pool:
				now noun is sea cube;
				continue the action;
			if eels are reflexive:
				now noun is eels;
				continue the action;
		if player is in bran barn:
			if ghoul hat is not in lalaland:
				now noun is ghoul hat;
				continue the action;
			if p-2 is in bran barn:
				now noun is p-2;
				continue the action;
		if player is in frontage and atmo-moat is in frontage and macks are not in frontage:
			now noun is atmo-moat;
			continue the action;
		if player is in preserve and raptor is in preserve:
			now noun is raptor;
			continue the action;
		if player is in Lamer Realm and owls are in Lamer Realm:
			now noun is owls;
			continue the action;
		if player is in alcoves and parrot is in alcoves:
			say "The settler seems to give a reading when pointed at the parrot.";
			now noun is parrot;
			continue the action;
		if player is in tapering and imp is in tapering:
			now noun is imp;
			continue the action;
		if player is in anteroom and whiners are in anteroom:
			now noun is whiners;
			continue the action;
	else if mrlp is others: [others]
		if perp-priv is part of the passport and gate-level < 2:
			now noun is perp-priv;
			continue the action;
		if player is in clearing:
			if pre-mang is in clearing:
				now noun is pre-mang;
				continue the action;
	say "You wave the settler, but it doesn't pick up any random data.";
	reject the player's command;

does the player mean scaning the cans: it is likely.

does the player mean scaning the player: it is unlikely.

troves-scan is a truth state that varies.

a thing can be cscanned. a thing is usually not cscanned.
a thing can be ncscanned. a thing is usually not ncscanned.

definition: a thing (called scanee) is bscanned:
	unless scanee is cscanned, no;
	unless scanee is ncscanned, no;
	yes.

definition: a thing (called scanee) is escanned:
	if scanee is cscanned, yes;
	if scanee is ncscanned, yes;
	no.

before scaning (this is the check as scanned if player can have/take settler rule) :
	if mrlp is dome:
		say "Old habits die hard! Relax and observe. You don't need to do solve any puzzles here." instead;
	if player does not have letters settler:
		if settler is visible:
			silently try taking the letters settler;
		if player does not have letters settler:
			say "You have no scanning item[if player is not in study], and you should, unless this is a test, so this could be a BUG[else if latches is off-stage]. You probably should answer the door first[else if settler is off-stage]. Maybe figure what to do with those latches[else]. This looks like a BUG, since you should keep the settler all game[end if]." instead;
	if noun provides the property cscanned:
		if cheat-on is true:
			now noun is cscanned;
		else:
			now noun is ncscanned;
	else if noun is not location of player:
		d "[noun].";
		say "The letters settler isn't THAT long-range." instead;

before scaning when mrlp is troves (this is the troves smart alecky rule):
	if troves-scan is false:
		say "You're a bit worried this scanning shouldn't work here, since it is all about you. but then you realize you are just utilizing and leveraging proprietary technology, and that makes you feel like more of a go-getter.[line break]";
		now troves-scan is true;

first-good-scan is a truth state that varies.

to oscan (scanee - a thing):
	now scanee is ncscanned;
	now scanee is cscanned;

carry out scaning:
	if mrlp is demo dome:
		say "Questing time is over. No need.";
		the rule fails;
	if noun is big l or noun is big-let:
		say "Nothing happens. It's probably some sort of hint or guide in itself, not something you need to mess with.";
		the rule fails;
	if noun is player:
		say "According to your cutting-edge blend of magic and technology, you are either perfect as you are, or too boring to change anything else.";
		the rule fails;
	if noun is letters settler:
		say "The settler is not flexible, despite its flexible options. But it would show [full-monty of settler] if it were.";
		the rule fails;
	if a-text of noun is "":
		say "The letters settler registers nothing.";
		the rule fails;
	if first-good-scan is false:
		now first-good-scan is true;
		say "[one of]Ta-da! Data (a tad.) [or]Ta-dum! Datum! [at random]It's not an odd DOA doodad! [if mrlp is means manse]You recall writing in your notepad about your tagged gadget from your first adventure and how it helped you determine what you needed to change an object to. But the settler has new colors. You'll need to find what they're for.[paragraph break][end if]";
		ital-say "if your interpreter supports Glulx, see the top for a graphical representation of the colorings. You can also type SPACE ON or SON to space out the text if you are visually impaired, or NO SPACE or NOS to lump the text back. Also, LA repeats what you scanned last, if the window on top does not show it.";
		pad-rec-q "la";
		pad-rec-q "spaces";
	now last-scanned-thing is noun;
	say "[sb-choose][full-monty of noun].";
	repeat through table of aftertexts:
[	if noun is an xtradesc in table of aftertexts: ?! doesn't work]
		if noun is xtradesc entry:
			choose row with a xtradesc of noun in table of aftertexts;
			if bothscan entry is true:
				now noun is ncscanned;
				now noun is cscanned;
			if b-only entry is false or cheat-on is true: [if cheat is off and it's b-text only clue, ignore.]
				if clue-only-once entry is false or clued-yet entry is false:	[special clued-once text ignored]
					now clued-yet entry is true;
					say "[line break][xtratext entry][line break]";
			the rule succeeds;
	the rule succeeds;

to say sb-choose:
	say "Your settler registers ";
	if sb-cur is true:
		say "([if cheat-on is true]cheat on[else]no cheat[end if]) "

chapter scaning air

[?! how to bother scaning air ]

check scaning heat:
	say "You look for a clue how to race...";

check scaning cold:
	say "You look for a clue how to make some heat..."

check scaning location of the player (this is the location scan rule):
	d "scaning player location.";
	if location of player is Cripple Clipper:
		say "Only the thickness sketchins pick up anything.";
		try scaning thickness sketchins instead;
	if location of player is Loather Rathole: [start troves]
		if cold is visible:
			try scaning cold instead;
		if heat is visible:
			try scaning heat instead;
	if location of player is Econ Cone:
		if pernod is visible:
			try scaning pernod instead;
		if rivets are reflexive and praise is reflexive:
			if rivets-first is true:
				say "The rivets have a weird magnetic pull to them. As if there's brain waves in there pulling you towards it so it can tell you what to do.";
				try scaning rivets instead;
			else:
				say "The PRAISE text seems to pull your settler to it.";
				try scaning praise instead;
	if location of player is Bustle Sublet:
		if verbose is visible:
			try scaning verbose instead;
		try scaning stop post instead;
	if location of player is Boarded Roadbed:
		if what-a-bee is reflexive and bee's head is reflexive:
			say "That bee is all up in your face. So you sort of scan it by default.";
			try scaning what-a-bee instead;
		try scaning cellar door instead;
	if location of player is Drain Nadir:
		if diapers are reflexive:
			say "Whoah, yeah, you're pretty bummed here! Well, not quite bummed enough to avoid pointing the settler at anything specific. There's the diapers, the picture of the sad pier, a spider..." instead;
	if location of player is Upscale Capsule:
		if noise is in Upscale Capsule:
			say "The settler seems to pulse with the noise's volume.";
			try scaning noise instead;
		if salt is not visible:
			try scaning song instead;
		if ME ARTS is in lalaland or lobster is in lalaland:
			try scaning salt instead;
	if location of player is hacks' shack and compiled code is visible: [start presto]
		say "As you contemplate further how to budge the code, your wave your settler at it.";
		try scaning compiled code instead;
	if wzup is visible:
		try scaning wzup instead;
	if volt maze is visible:
		try scaning volt maze instead;
	if player is in a mazeroom or player is in Unwary Runway:
		say "The air scans [full-monty of volt maze]." instead;
	if location of player is Posh Hops Shop: [start oyster]
		say "The settler points towards the door and the trolls.";
		try scaning trolls instead;
	if location of player is freight:
		try scaning pale plea instead;
	if location of player is Hardest Trashed Dearths:
		say "The air's full of eeks, which your settler picks up." instead;
		try scaning eeks instead;
	if location of player is plains:
		if bogus-plains is reflexive:
			say "[full-monty of bogus-plains]" instead;
	if location of player is bleary barley and b-b is reflexive: [start otters]
		try scaning b-b instead;
	if location of player is clangier: [start others]
		if mango is off-stage:
			say "As you listen to the crowds, you notice [full-monty of pre-mang] on your settler." instead;
	if location of player is swell wells:
		if sorer bogey is visible:
			try scaning sorer bogey instead;
	say "You can't find anything specific to scan, and nothing shows up on your settler." instead;

to say hit-win: [?! bad idea for spacing]
	say "[if cheat-on is true]RGPRGR[else]RYRRYP[end if]"

to say ben-hid:
	say "[if cheat-on is true]PGRYRP[else]RYRYRR[end if]"

chapter aftertexts

table of region-spoilers
hint-reg	spoil-expl
otters	"adverbs[if power-back is false](weakest, due to lost powers)[else](but powers back now)[end if]"
presto	"interjections"
routes	"prepositions"
troves	"passive verbs"
towers	"adjectives"
oyster	"active verbs"
others	"not nouns any more--a different part of speech in each location"

[this table gives clues after you scan, although sometimes it may be approrpriate to give hints only in cheat mode.]

to say cheatfid:
	say "You fiddle with the cheat button and note that nothing happens to the R's and Y's"

table of aftertexts [taf]
xtradesc	b-only	clue-only-once	clued-yet	bothscan	xtratext
pram	false	false	false	true	"[cheatfid]." [means manse]
tables	false	false	false	true	"[cheatfid]."
niche	false	false	false	true	"[cheatfid]."
t-b	false	false	false	true	"[cheatfid]."
plates	true	false	false	false	"Hmm, maybe the question mark isn't as vague as you're worried it is." [end means manse]
bench	false	true	false	false	"Hm, bench is only five letters, but nothing was highlighted until you scanned the bit reading A GIANT'S." [routes]
MORF FORM	true	true	false	false	"Well, you shouldn't be surprised the settler gives weird readings. But with only four letters, how hard can it be?"
ltb	true	true	false	false	"Man! Only one stable red at the end. Those two co-authors muck things up. Maybe you can switch to teach mode, or maybe you can have a think on your own, realize there're only so many possibilities, and, oh, what's the word?" [troves]
Pa Egg Pea	true	true	false	false	"Man! It's making the settler go crazy. Between the title and the author's name, there's a lot to consider. Maybe it will shake out."
stop post	true	false	false	false	"Well, that's a bit confusing. You'd think a four-letter word wouldn't have too many possibilities, but maybe STOP and POST are clashing."
sister tressi	true	false	false	false	"Hmm. Sister Tressi seems to be glaring extra, as if the settler's ambiguous settings are what you get for cheating, and she also seems to be saying, well, if life isn't EXACTLY as you'd expect, maybe you'd better learn to think your way around it."
brochure	true	false	false	false	"You imagine a voice saying OBSTACLES LIKE THOSE QUESTION MARKS MAY BE OPPORTUNITIES. A [if brochure is examined]re[end if]reading of the brochure may help see what it's about."
rivets	false	false	false	true	"[rivet-help]."
salt	true	false	false	false	"Hmm. Well, four letters can't be bad. The vowel must be in one of those two places."
song	false	true	false	false	"You'd guess it's Eddie's song and not Eddie, since when the instrumentals kick in, the settler's reading stays."
alert letters	true	false	false	false	"Hmm. The settler is giving a weird result, but the sheer number of question marks indicates ALERT/ALTER has a lot right between them." [presto]
hawt thaw	true	false	false	false	"Wow! Three ambiguous readings. But you wonder if they won't help in their own way, or if you really need a huge hint."
USB	true	true	false	false	"Hm, USB seems pretty straightforward. Maybe there are two solutions, each equally good."
perma-amper	true	true	false	false	"It's a perma-amper, so that might account for the twitchy light." [oyster]
pale plea	false	true	false	true	"[if cheat-on is false]You check both ways, and it's still RYYR[else]Well, five letters is easier than four[end if]."
general gleaner	true	false	false	false	"The pattern blinks green-red and yellow-purple."
bogus-plains	false	true	false	false	"Your settler appears to register this all across the plains."
span pans	true	true	false	false	"There are two entries you don't understand, but--the span pans might actually make things kind of easy, there."
bluster butlers	true	true	false	false	"Hmm, no vowels nailed down in cheat mode. Maybe if you do a big of legwork to figure where they should be, some extra stuff will fall out." [towers]
dandier arid den	true	true	false	false	"Well. That's two things you can't figure to start, but maybe you can, if you think about it."
alarming grailman	true	false	false	false	"The one letter blinks between green and yellow."
sweatier wait-seer	true	false	false	false	"The letters blink from red/yellow to purple/green and back."
raves saver	true	false	false	false	"Man! Four of the six entries (and you'd expect five) are blinky. That doesn't seem to mean anything...OR DOES IT. MAybe it's the brand you can/should worry about."
lois the hostile	false	true	false	false	"Well, this is tricky. There's her name, and it's probably interacting with itself. Maybe if you think, you can figure a few shortcuts."
hostile-is-he lot	false	true	false	false	"Well, this is tricky. Their sort of double name affords a couple interpretations for the settler, but maybe that's a bit of a clue."
old ice	true	true	false	false	"Hm, it's certainly docile old ice, so the confusing letter may not be so confusing."
Dr Yow	false	true	false	false	"[if Dr Yow has not been rowdy and Dr Yow has been wordy][else]The settler showed two sets of RYRRO for a moment, there. Perhaps it represents a range of Dr. Yow's emotions.[else if Dr Yow has been rowdy or Dr Yow has been wordy]Hm, maybe Dr. Yow has more emotion than what you already brought out of [him-her].[else]That leaves four possibilities, cheat or no, and none of the others make sense.[end if]"
ropins	false	true	false	false	"Now this is odd. The ropins have six letters, but they register eight. Maybe if you find something with eight letters, you can find out how to unlock them."
natives	true	true	false	false	"That's weird. They're just natives, but the blinky bit suggests there may be two possible solutions."
weirder red wire	true	true	false	false	"Hm, looks like the red wire doesn't make you SEE red. You were never an electrical whiz, but maybe general logic will help rearrange the tangled connections."
curst palace	true	false	false	false	"[if palace-let < 5]Wow, lots of blank data. You may want to get closer to have any hope of figuring how to restore the palace[else if palace-let is 11 and cheat-on is true]The final letter clue blinks alternately with the fifth--neither is purple at the same time[else if cheat-on is true]Hm, maybe you can figure what the fifth letter is if you know more about the later ones[else]Just the reds and yellows still leave a lot of possibilities. But maybe you'll have clues along the way[end if]."
serpent	true	true	false	false	"That is a lot of blinks, but those blinks have to be almost as good as a purple or green."
cinders	true	true	false	false	"Hm, that's weird. Your sci-nerd side says perhaps there are two things you can do with the cinders, though it also sees red at the thought of giving them up entirely." [otters]
t-tearily-irately	false	true	false	false	"Wow! That's a lot of question marks and possibilities. But maybe REALITY can be bent a couple overwrought ways."
t-steamily	true	true	false	false	"Well, you have a feeling you know what that question mark should be."
atmo-moat	false	true	false	true	"You feel sheepish having used the settler, but it's been a long journey."
Merle	false	false	false	true	"Some of the entries seem to flip bluish briefly as you flip the settler, as if the changing conversation may change settings."
sly imp	false	false	false	false	"The settler then gets garbled a bit. The imp is maybe too active for even the settler to pin down."
whiners	false	false	false	false	"The settler then garbles and changes. The men have ways of staying loud." [end otters]
medals	true	true	false	false	"Hmm. Maybe if you SWITCHed the medals, you could get another clue, if you needed."
coins	false	false	false	false	"Even the reds and yellows seem to be blinking here. It's as though the coins need to be changed twice." [others]
pugnacious	false	false	false	false	"Wow, seven letters, odd. Maybe you need to poke or talk to the plant or attack it or something to see what kind it might be."
caution	false	false	false	false	"Hm, that certainly cuts things down a ton[if caution is unexamined], or should, once you read that sign[end if]. Just [if cheat-on is true]one possibility[else]three possibilities[end if]."
an-a	false	false	false	false	"You think you hear a taunting na-naa-b after you scan the letters."
melon	false	false	false	false	"Now this is weird. It looks like there should be a space, but it's jumping back and forth. Maybe there are two very similar ways to ask Len about that melon."

check scaning a prefigured thing:
	if noun is not dialer:
		say "Before running the scanner, you remember you've already figured what to do, just not when. The information's in your pedanto-notepad." instead;

to say rivet-help:
	if rivets are reflexed and praise is reflexed:
		say "Well, there's probably not much else hidden in the rivets";
		continue the action;
	if rivets are reflexed:
		say "You maybe could focus on what the rivets say";
		continue the action;
	if praise is reflexed:
		say "Hmm, the message could've been painted on, but Trevis Vister commissioned rivets";
		continue the action;
	say "[if cheat-on is true]The greens and yellows in the last two characters blink in unison[else]A little messy, but that may just mean there are two ways to look at this problem[end if]";

book begin-region hints

section special parser errors

rule for printing a parser error when the latest parser error is the didn't understand error and mrlp is not means manse and the number of words in the player's command > 1:
	if cur-score of mrlp < 10 and  mrlp is not parsewrned:
		choose row with thisreg of mrlp in table of parsewarns;
		say "[specwarn entry][line break]";
		now mrlp is parsewrned;
		the rule succeeds;
	continue the action;

to say pars-trub:
	say "The parser had trouble understanding that (multi-word) command. While it's possible there's a more mundane reason, perhaps you were trying to change something[one of], in which case, one word (or a compound word) usually works[or][stopping].[paragraph break]So here is a one-time general guideline on what to do in this area: ";

table of parsewarns
thisreg	specwarn
means manse	"You need to change certain things to other things."
stores	"[pars-trub]you need to change the stores, here, like you changed the [if tables are in lalaland]tables[else if niche is in lalaland]'my niche' writing[else]ten beams[end if], and you just need one word."
presto	"[pars-trub]one word of sufficient force will work here. While one word is eight letters long and a Last Lousy Point is nine, most are four or five."
routes	"[pars-trub]one word should work here, with no preface necessary. While one word is eight letters long, the rest are around five or six."
troves	"[pars-trub]one word will work here, and you won't need to specify details. A last lousy point is eight letters long, but most are five or six."
towers	"[pars-trub]one word will work here, to make things as they should be. The final word is eleven letters long, but everything else is shorter--one necessary word has nine, as does another optional one, and a few have eight."
oyster	"[pars-trub]one word will work here, though this game should accept fuller sentences. The longest words are seven letters, so while there's a lot to do, no one word is too long."
otters	"[pars-trub]while some words are rather long, you [if cur-score of otters is 0]will[else]probably[end if] see how to guess a letter or two even [if power-back is false]when[else]now[end if] you've got your powers back."
others	"[pars-trub]you may need a variety of tricks, here, but one word will usually clinch things, and you will figure the general theme."
demo dome	"[pars-trub]you don't need to do anything fancy here besides looking, moving, examining and reading. No puzzles at all."

book means-hinting

latches-warn is a truth state that varies.

settler-hint-yet is a truth state that varies.

to say next-to-see:
	unless sad ads are examined:
		if a random chance of 1 in 7 - stuff-found succeeds:
			say "You can page through the sad ads.";
			continue the action;
	unless player has pedanto-notepad:
		if a random chance of 1 in 6 - stuff-found succeeds:
			say "You should examine or take the notepad";
			continue the action;
	unless pad-consult is true:
		if a random chance of 1 in 5 - stuff-found succeeds:
			say "You can CONSULT the pad about something";
			continue the action;
	unless notice is examined:
		if a random chance of 1 in 4 - stuff-found succeeds:
			say "You can try reading the diorama to see what your powers might be";
			continue the action;
	unless bookshelf is examined:
		say "You can try examining the bookshelf";
		continue the action;
	unless diorama-flip is true:
		say "You can see about changing an item in the diorama";
		continue the action;
	unless tried-flip is true:
		say "You can try to do something with the tables or lamp, though the game won't let you, yet";
		continue the action;

tc-last is a number that varies. tc-last is usually 3.

every turn when player is in dusty study and stuff-found < 3:
	if turn count > tc-last + 2:
		say "You may want to examine something [if stuff-found > 0]else [end if]to tell you about Yorpwald, like the [if bookshelf is unexamined]bookshelf[else if ads are unexamined]ads[else]pedanto-notepad[end if].";
		now tc-last is turn count;

carry out means-hinting:
	if stuff-found < 3:
		say "[one of]You should look around and examine stuff. Someone will eventually interrupt you.[or][next-to-see].[stopping]" instead;
	if latches are visible:
		if latches-warn is false:
			all-say "You figure there must be a couple ways out, but the latches can become something--Nat Egam wouldn't have sent them to you, otherwise.";
			now latches-warn is true;
		try objhinting latches instead;
	if location of player is study:
		if Gunter is in study:
			say "Talk to Gunter. He provides back story." instead;
		if Gunter is off-stage:
			try objhinting semi-secret side door instead;
		if player does not have lamp:
			try objhinting palm instead;
		if settler-hint-yet is false:
			if tables are in study and niche is in study and t-b are in study:
				all-say "You have three ways out of the study. You may wish to HINT SETTLER or HINT DIORAMA to figure what to do with them.";
			else:
				all-say "You have found a way out of the study. Any way gets you to a secret passage out of the Means Manse, though along the way, you may wish to HINT SETTLER or HINT DIORAMA to figure what to do with them.";
			now settler-hint-yet is true instead;
		if tables are in study, try objhinting tables instead;
		if niche is in study, try objhinting niche instead;
		if t-b are in study, try objhinting t-b instead;
		all-say "You should move along, now, unless you want to mess with the settler and diorama to be sure of what you are doing." instead;
	if location of player is heights:
		if ramp is in heights, try objhinting ramp instead;
		if pram is in heights, try objhinting pram instead;
		all-say "[bug-report]";
		the rule succeeds;
	if location of player is Farming Framing:
		if sitar is visible:
			try objhinting the sitar instead;
		if stair is visible:
			try objhinting the stair instead;
		all-say "[bug-report]" instead;
	if player is in cavern:
		if plates are in cavern:
			try objhinting plates instead;
		if plaster is in cavern:
			try objhinting plaster instead;
		if act-ruin curtain is visible:
			try objhinting act-ruin curtain instead;
		if player has latches:
			try objhinting latches instead;
	if player has settler and settler is not examined, say "You should probably examine the settler." instead;
	all-say "Nothing left to do here. You should be able to get going to the next part."

book others-hinting

check objhinting Elmo when rifle is visible:
	say "You could deal with Elmo okay, but his RIFLE...";
	try objhinting rifle instead;

viewer-first is a truth state that varies.

enuf-fruit-poke is a truth state that varies.

carry out others-hinting:
	if cur-score of others < 4:
		if cur-score of others is 3 and drinks stand is unexamined:
			try objhinting stand instead;
		hintlistproc rustic-easy-items;
		if the rule succeeded:
			the rule succeeds;
	if player has moss cap:
		try objhinting moss cap instead;
	if player has s-i and player has storage:
		all-say "You probably want to put the icons in the storage." instead;
	if player has s-c, try objhinting s-c instead;
	if player has icons, try objhinting icons instead;
	if player has coin, try objhinting coin instead;
	if player has coins, try objhinting coins instead;
	if curtis-level < 4:
		let levdelt be (fruits-flipped / 4) - curtis-level;
		say "Flipped [fruits-flipped] Level [curtis-level] delta [levdelt].";
		if levdelt > 1, say "You can go back to Curtis for [if player has coin or player has icon or player has coins or player has icons or player has s-c or player has s-i]another[else]a[end if] reward[if levdelt > 2]. More than one, in fact[end if][if fruits-flipped >= 20]. You've gotten all the fruits you need[end if]." instead;
	if player is in gates stage:
		if passport is off-stage:
			all-say "You need ID to get past the gate. There are no government agencies, so maybe you can get one illicitly." instead;
	if droll dollar is not off-stage and enuf-fruit-poke is false:
		now enuf-fruit-poke is true;
		say "You have gotten enough fruits, so from here on out you'll need to hint something specific if you want to change it. You'll want to go [if player is in gates stage]north of the gates[else if gates stage is visited]back north to the Gates Stage[else]north[end if]." instead;
	if player has passport:
		if gates stage is unvisited:
			all-say "You haven't visited the gates stage north of the swell wells, yet. That's where you can use the passport." instead;
		if gate-level is 2:
			all-say "Go north to win!" instead;
		if gate-level < 2:
			if viewer-first is true and viewer is not reflexed:
				try objhinting viewer instead;
		if searcher is not reflexed:
			try objhinting searcher instead;
		if viewer is not reflexed:
			try objhinting viewer instead;
		try objhinting passport instead;
	if player is in gates stage:
		all-say "[if scape space is unvisited]Try going down from the Swell Wells[else]You will find ID inside the So-Great Storage in the Scape Space[end if]." instead;
	if player is in Swell Wells:
		hintlistproc wells-hintables;
		if the rule succeeded, the rule succeeds;
	if player is in filed field:
		hintlistproc field-hintables;
		if the rule succeeded, the rule succeeds;
	if player is in clangier clearing:
		hintlistproc clearing-hintables;
		if the rule succeeded, the rule succeeds;
	if player is in Scape Space:
		if droll dollar is off-stage:
			hintlistproc scapespace-hintables;
			if the rule succeeded:
				if box-down-road is false:
					now box-down-road is true;
					ital-say "you'll eventually want that storage box down the road.";
				the rule succeeds;
		if storage box is in Scape Space and player has droll dollar, try objhinting storage box instead;
	all-say "Nothing specific [if player is in scape space or player is in rustic citrus]left [end if]to do here[if curtis-level < 3], though you may need to give Curtis some more fruits which you can HINT individually[else if player has dollar], though you will want to trade that dollar[else if player has storage], though you need to open the storage[else if player has passport], but perhaps the passport will get you through the gates[end if][if fruits-left > 0]. There [fruits-to-clear] you can still pick off here[else if player is not in gates stage]. There are no more fruits to scrounge up here[end if]."

to say fruits-to-clear:
	say "[if fruits-left is 1]is[else]are[end if] [fruits-left in words] fruit[if fruits-left > 1]s[end if]"

to decide which number is fruits-left:
	let temp be 0;
	repeat with myf running through fruits:
		if location of player is frroom of myf:
			unless player has myf or myf is in lalaland:
				increment temp;
	decide on temp;

box-down-road is a truth state that varies.

section random hinting

[ !! if you add a fruit, change one of these lists]

rustic-easy-items is a list of things variable. rustic-easy-items is { lumps, spear, pagers, slime }.

rustic-hard-items is a list of things variable. rustic-hard-items is { mad train, videotape, harmonicas, peanut cola, eerie blurbs, magenta rope }

wells-hintables is a list of things variable. wells-hintables is { riot cap, silly shirt, stucco, sorer bogey, green stain, miser ruble }.

field-hintables is a list of things variable. field-hintables is { pryer bars, pipe panel fence, b-r, b-w, barber sickle, mean trowel, rapt figure, barren cries }.

clearing-hintables is a list of things variable. clearing-hintables is { melon, peach, pre-mang, quince, l-o-p, lemons, auction caution, nectarine }.

scapespace-hintables is a list of things variable. scapespace-hintables is { an-a, orange, pugnacious plant, inapt paint }

to hintlistproc (j - a list of things):
	repeat with hobj running through j:
		if hobj is in location of player and hobj is not reflexed:
			try objhinting hobj;
			the rule succeeds;
	the rule fails;

book stores-hinting

carry out stores-hinting:
	if location of player is Cruelest Lectures:
		all-say "[one of]The whole bit about nouns won't work here. The people who drug, err, dragged you here said so.[plus][or]It's tough to figure how to leave, and no normal method does the trick.[plus][or]TEDIOUS is one clue.[plus][or]Ian will also give you his 'I USED TO' litany.[plus][or]How can you leave?[plus][or]Studio E gives you some disturbing truths. You can see where all the vowels go, by the greens on your settler.[plus][or]You can cross out the consonants from your other clues to kick people OUTSIDE.[minus][cycling]" instead;
	if roved is true:
		if Store H is visible:
			try objhinting Store H instead;
		all-say "Go through the HOSTER to the OTHERS area." instead;
	if number of game-critical stos is 0:
		all-say "(Note: you've cleared all the stores you need to[if number of needed regions > 0], though you still have work to do behind them[end if].)[line break]";
		if Store K is visible:
			try objhinting Store K instead;
		if Store N is visible:
			try objhinting Store N instead;
		all-say "You have nothing more to do here. You need to [if number of needed regions > 0]work your way through what's behind other stores, then [end if]go between the otters for your final destiny!" instead;
	if number of portals in strip of profits > 0, say "While [the slickest portal in strip of profits] [if number of portals in strip of profits is 1]leads to a new adventure[else]is what I'd recommend entering[end if], here is how to deal with another store...[paragraph break]";
	if cur-hint-sto is not in Strip of Profits:
		if Store U is in Strip of profits:
			now cur-hint-sto is Store U;
		else if Store V is in Strip of profits:
			now cur-hint-sto is Store V;
		else if Store P is in Strip of profits:
			now cur-hint-sto is Store P;
		else if Store Y is in Strip of profits:
			now cur-hint-sto is Store Y;
		else if Store W is in Strip of profits:
			now cur-hint-sto is Store W;
		else if Store T is in Strip of profits:
			now cur-hint-sto is Store T;
		else:
			all-say "You don't need to change any more stores now." instead; [should not happen but just in case]
	try objhinting cur-hint-sto instead;

to sto-hint (stosto - a sto):
	say "Sto hint for [stosto].";

book presto-hinting

carry out presto-hinting:
	if cur-score of presto is 0 and spoilit is false:
		all-say "[one of]You haven't gotten any points yet, so you probably want to find what sort of word is used here.[plus][or]There's lots of yelling, and the curst crust is a clue. You will be using dramatic words. You could ask yourself what sort of word is remaining.[plus][or]You may curse yourself if you find out.[plus][or]The words are interjections.[minus][cycling]" instead;
	if hump is visible:
		try objhinting hump instead;
	if plebe is visible:
		if spoilit is true and player does not wear star:
			all-say "The plebe grimaces as you try to eat the crust. He doesn't seem to respect your authority enough to keep a straight face yet.";
			now spoilit is false instead;
		try objhinting plebe instead;
	if player is in austerer:
		if ye hoop is in austerer:
			try objhinting ye hoop instead;
		if spoilit is false:
			all-say "You are done here in Austerer Treasure." instead;
	if star is visible and star is in Char Arch:
		try objhinting star instead;
	if dart is visible and dart is in dumpster:
		try objhinting dart instead;
	if location of player is Dirge Ridge:
		if Leo is in dirge ridge and Leo is fightin:
			try objhinting Leo instead;
		if Rand is in dirge ridge and Rand is fightin:
			try objhinting Rand instead;
		if Rand is washed up and Leo is washed up:
			try objhinting wzup instead;
		if spoilit is true:
			now spoilit is false;
		all-say "[if spoilit is true]Eating the crust here would be too depressing with nothing concrete to do[else]You're done here in Dirge Ridge[end if][if Leo is in dirge ridge and ether is not in lalaland]. Maybe Leo and Rand's combined muscle could help you somewhere[end if]." instead;
	if boing is reflexive and popgun is visible:
		try objhinting boing mechanism instead;
	if popgun is visible:
		if dart is not visible:
			all-say "You need to find ammo for your popgun." instead;
		if dart is not in popgun and dart is not in lalaland:
			if spoilit is true:
				now spoilit is false;
			try objhinting popgun instead;
	if player is in Marines Seminar Remains:
		if spoilit is true:
			now spoilit is false;
			all-say "Ugh. The crust feels like army rations. Not now." instead;
		all-say "The popgun [if player has popgun]was[else]is[end if] all the Marines Seminar Remains has to offer." instead;
	if player is in a mazeroom or player is in nowt town or player is in Unwary Runway:
		if spoilit is false:
			all-say "[maze-solve]." instead;
		try objhinting volt maze instead;
	if player is in Grey Gyre:
		if volt maze is in Grey Gyre:
			try objhinting volt maze instead;
		if ether is not in lalaland:
			if spoilit is false:
				if player does not have popgun:
					all-say "[one of]You'll need a weapon to get past the ether.[or]The popgun in the Marines Seminar Remains.[cycling]" instead;
				if Rand is not eager or Leo is not eager:
					all-say "[one of]If you've gone through the ether alone, you'll see you've been outnumbered.[or]You'll need allies to even up the numbers in the ether to the north.[or]Anyone here you seen who likes a fight?[or]Fetch the fellows by the dumpster, first.[cycling]" instead;
			else:
				if dart is not in popgun or boing is reflexive or Leo is not in gyre:
					all-say "The ether turns your stomach too much to eat the crust. It's dangerous. You need to plan a way through." instead;
			try objhinting ether instead;
	if player is in Grey Gyre or player is in Char Arch:
		if hacks' shack is unvisited:
			if spoilit is false:
				all-say "You're all done here for now[if player is in Char Arch] (the yak can be helped later,)[else],[end if] so you maybe should [if saps' pass is unvisited]go north[else if phat path is unvisited]go see about getting past the lawl wall [hereish of Saps' Pass][else if shack is unvisited]find a way in the shack[else]mess around in the shack[end if]." instead;
	if player is in Saps' Pass:
		try objhinting lawl wall instead;
	if player is in phat path:
		if shack is unvisited:
			if harpings phrasing is visible and shack is unvisited:
				if Leo is visible:
					try objhinting harpings phrasing instead;
				else:
					all-say "[if spoilit is true](Favorite bad word,) you think, I'd rather see what's in that shack[else]You're all done here in the Phat Path. Go north to the shack[end if]." instead;
	if spoilit is true:
		if dirge ridge is not visited or austerer is not visited or marines is not visited:
			now spoilit is false;
			all-say "Before taking a bite, you wonder if you've visited everywhere you can yet." instead;
		if ye hoop is in austerer and austerer is visited:
			all-say "You think to YE HOOP you saw in Austerer Treasure." instead;
	if coal is visible:
		try objhinting coal instead;
	if flea is visible:
		try objhinting flea instead;
	if gum is visible:
		try objhinting gum instead;
	if bottle of dirty looking cola is visible:
		if spoilit is true:
			all-say "No, you'd rather pour the cola in the mug. It's slightly less nasty than the crust.";
			now spoilit is false instead;
		try objhinting bottle of dirty looking cola instead;
	if fount is visible:
		try objhinting fount instead;
	if clock sap is visible:
		try objhinting clock sap instead;
	if disk is visible and skid is off-stage:
		try objhinting disk instead;
	if yak is visible and spoilit is false:
		try objhinting yak instead;
	if drab yoke is visible:
		if yak is visible:
			say "[if spoilit is true]You pause before eating the crust. [end if]The yak [if skid is off-stage]probably needs to be carried with something you don't have yet[else if skid is not visible]could be coaxed onto the skid you left[else if leaf is off-stage]could use some food, but you haven't found any[else if player has leaf]might like the leaf if you put it on the skid[else]needs to be pushed north[end if]." instead;
		try objhinting drab yoke instead;
	if hacks' shack is visited:
		if hump is not in lalaland:
			try objhinting hump instead;
		if onyx censer is not in lalaland:
			try objhinting onyx censer instead;
		if yak is not in lalaland: [?! rearrange this]
			if spoilit is true:
				all-say "Ugh, the crust looks worse than yak food. You wonder what to do with the yak[if yak is not in shack] you left back...wherever[end if]." instead;
			all-say "You need to find the bored yak and bring it back to the shack (ack, Mac!) Maybe you can guess what its drab yoke holds." instead;
	if player is in hacks' shack:
		if disk is not in hard drive:
			all-say "You [if spoilit is true]would rather[else]should[end if] [if skid is in shack]change the skid back to the disk, then [end if]put the disk in the disk drive." instead;
		if can-put-on-slab:
			all-say "You [if spoilit is true]would rather[else]can[end if] put the [k-and-c] on the slab." instead;
		if rebooted is false:
			try objhinting blue button instead;
		if clock sap is not in lalaland:
			try objhinting clock sap instead;
		if caps lock is not part of the keyboard:
			if spoilit is true:
				all-say "You curse yourself for not putting the caps lock button in the keyboard." instead;
			try objhinting caps lock instead;
		if futon is visible and slept is false:
			if spoilit is true:
				all-say "Yeech. You're full. You need to SLEEP." instead;
			try objhinting futon instead;
		if scratch paper is reflexive:
			try objhinting scratch paper instead;
		if fizzy cola is not in mug:
			try objhinting mug;
		if compiled code is reflexive:
			try objhinting compiled code instead;
		if usb is visible:
			try objhinting usb instead;
	all-say "[if spoilit is true]You can't see much to do here, so you save your crust for somewhere more active[else]There's not much to do here. You may need to look elsewhere[end if]." instead;

to decide whether can-put-on-slab:
	if player has keyboard and keyboard is not on slab:
		decide yes;
	if player has computer screen and computer screen is not on slab:
		decide yes;
	decide no;

to say k-and-c:
	say "[if player has keyboard and player has computer screen]keyboard and screen[else if player has keyboard]keyboard[else]screen[end if]";

to say maze-solve:
	say "[one of]You don't need to enter the maze to solve it[or]There's a magic word[or]Congratulate yourself before you enter. But nothing pedestrian[or]Note the Yiddish clues if you solve it[or]MAZELTOV[cycling]";

to say wash-up:
	say "[one of]Rand and Leo are a bit upset you beat them, but you can fix that.[no line break][plus][or]They think they're washups.[no line break][plus][or]What could show the washups you meant no harm?[no line break][plus][or]You can talk to the washups for clues of something nice to say.[no line break][plus][or]They're not interested in stuff. Not perfect grammar here, but they're not exactly grammar cops...[no line break][plus][or]Say WHASSUP.[no line break][minus][cycling]"

to say hereish of (rm - a room):
	say "[if player is in rm]here[else]in [rm][end if]"

book routes-hinting

prep-spoil is a truth state that varies.

to say p-spo:
	now prep-spoil is true;

check objhinting when player is in same mesa (this is the hide giant hints rule):
	if noun is bench or noun is bench-end or noun is elbow or noun is Rude 'N Nuder or noun is old giant:
		if cleric circle is unvisited:
			all-say "You aren't ready to do anything with the bench yet. The church may make you feel better about things." instead;
		if list o toils is unexamined:
			all-say "You may want to look at the list-o-toils first." instead;

does the player mean objhinting the grouchy giant when mrlp is routes:
	it is very likely;

carry out routes-hinting:
	if cur-score of routes is 0 and prep-spoil is false:
		all-say "[one of]You maybe haven't figured out what sort of word is needed in this zone yet. Oscar's, Pat's, and the scripture picturers are clues.[plus][or]They're relatively short words, so maybe you can guess from them.[plus][or]Did you notice you can't seem to go in any compass direction?[plus][or]What's another sort of word that can describe a direction?[plus][or]It anagrams Poison Stripe.[plus][or]Prepositions[p-spo].[minus][cycling]" instead;
	if MORF FORM is in Same Mesa:
		if player is in same mesa:
			try objhinting MORF FORM instead;
		all-say "[if spoilit is true]The spoon points[else]You should go[end if] outside to the commotion.";
		now spoilit is false instead;
	if the-b is in Same Mesa and Harms Marsh is unvisited:
		try objhinting the-b instead;	[end global stuff]
	if location of player is Same Mesa:
		if cleric circle is unvisited:
			try objhinting scripture picturers instead;
		if bench is reflexive:
			try objhinting bench instead;
		if bench-end is reflexive:
			try objhinting bench-end instead;
		if elbow is reflexive:
			try objhinting elbow instead;
		if Rude 'N Nuder is visible:
			try objhinting Rude 'N Nuder instead;
		if old giant is in Same Mesa:
			try objhinting old giant instead;
		if Cleric Circle is unvisited:
			try objhinting scripture picturers instead;
		if Idle Deli is unvisited:
			try objhinting adsorbing signboard instead;
		if Adobe Abode is unvisited:
			try objhinting lairage regalia instead;
	if location of player is cleric circle:
		if list o toils is unexamined:
			all-say "[if spoilit is true]The spoon reflects to[else]You will want to examine[end if] the list-o-toils.";
			now spoilit is false instead;
		if spoilit is true:
			all-say "The spoon points back outside.";
			now spoilit is false instead;
		try objhinting list o toils instead;
	if location of player is Idle Deli:
		if seed pit is reflexed:
			all-say "[if spoilit is true]The spoon points you out of[else]You're done here in[end if] the idle deli.";
			now spoilit is false instead;
		try objhinting seed pit instead;
	if location of player is Adobe Abode:
		if pipe soot is in adobe:
			try objhinting pipe soot instead;
		all-say "[if spoilit is true]The spoon points you out of[else]You're done here in[end if] Oscar's.";
		now spoilit is false instead;
	if location of player is Harms Marsh:
		if darkness is visible:
			try objhinting darkness instead;
		if narrow cracks are visible:
			try objhinting narrow cracks instead;
		try objhinting un-road instead;
	if location of player is ripe pier:
		try objhinting da mist instead;
	if location of player is Cripple Clipper:
		try objhinting thickness sketchins instead;
	if location of player is Sonancy Canyons:
		if bent ewe is reflexive, try objhinting bent ewe instead;
		if hurt hog is reflexive, try objhinting hurt hog instead;
		try objhinting yob den instead;
	if list o toils is unexamined:
		all-say "[if spoilit is true]The spoon reflects to[else]You will want to examine[end if] the list-o-toils." instead;
	if player has mushrooms and player has U NERD ENDUR REDUN and player has pipe soot:
		all-say "[if spoilit is true]The spoon points[else]You should return[end if] to the Cleric Circle now you have all the items." instead;
	if spoilit is true:
		all-say "You can't angle the spoon productively. Maybe use it later." instead;
		now spoilit is false instead;
	repeat with QQ running through quest-items:
		if QQ is off-stage:
			if QQ is mushrooms:
				all-say "You need to [if Idle Deli is unvisited]figure how to enter[else]go back to[end if] Pat's for the mushrooms." instead;
			if QQ is pipe soot:
				all-say "You need to [if Adobe Abode is unvisited]figure how to enter[else]go back to[end if] Oscar's for the pipe soot." instead;
			if QQ is U NERD ENDUR REDUN:
				all-say "You need to work out how to sit all over the giant's bench to get Rude [']N Nuder (which is, trivial spoiler, the runed book)." instead;
	all-say "I can't give you any advice right now. You may want to hint individual items or even let me know via a transcript (or even a save file) at [email]." instead;

book troves-hinting

ever-previewed is a truth state that varies.

sister-first is a truth state that varies.

carry out troves-hinting:
	if player is in Loather Rathole:
		if cold is visible, try objhinting cold instead;
		try objhinting heat instead;
	if player is in Bustle Sublet:
		if verbose are in Bustle Sublet, try objhinting verbose instead;
		try objhinting post instead;
	if player is in boarded roadbed:
		if what-a-bee is reflexive and bee's head is reflexive:
			if bee-head-first is true:
				try objhinting bee's head instead;
			try objhinting what-a-bee instead;
		if bee's head is reflexive, try objhinting bee's head instead;
		if what-a-bee is reflexive, try objhinting what-a-bee instead;
		try objhinting cellar door instead;
	if player is in Drain Nadir, try objhinting diapers instead;
	if player is in Boredom Bedroom, try objhinting ltb instead;
	if player is in Browse Bowers, try objhinting brochure instead;
	if location of player is Econ Cone:
		if rivets are reflexive and praise is reflexive:
			if rivets-first is true, try objhinting rivets instead;
			try objhinting praise instead;
		try objhinting Pernod instead;
	if location of player is Upscale Capsule:
		if noise is in Upscale Capsule, try objhinting vanity instead;
		if ME ARTS is in Boredom Bedroom and lobster is in Upscale Capsule:
			if lobster-first is true, try objhinting lobster instead;
			try objhinting ME ARTS instead;
		if lobster is in Upscale Capsule, try objhinting lobster instead;
		if ME ARTS is in upscale capsule, try objhinting ME ARTS instead;
		if salt is in Upscale Capsule, try objhinting salt instead;
		if tressi is in capsule and balmer is in capsule:
			if sister-first is true, try objhinting sister tressi instead;
			try objhinting blamer balmer instead;
		try objhinting trance nectar instead;
	if spoilit is true:
		say "--hmmph. Do nothing. This is a BUG, but keep the truffle[no line break]";
		now spoilit is false instead;
	all-say "Pa Egg Pea has no further immediately practical advice, though it probably should. [bug-report]" instead;

bee-head-first is a truth state which varies.

lobster-first is a truth state which varies.

book oyster-hinting

verb-warned is a truth state that varies.

trolls-hinted is a truth state that varies.

to decide which thing is oyster-item:
	if player is in posh hops shop:
		if trolls-hinted is false and cur-score of oyster is 0, decide on trolls;
		if number of entries in shop-hint-items is 2, decide on trolls;
		decide on entry 1 of shop-hint-items;
	if player is in lode:
		if clam is in lode, decide on clam;
		if urn is in lode, decide on urn;
	if player is in Disease Seaside, decide on boats;
	if player is on raft:
		if raft is reflexed, decide on oars;
		decide on raft;
	if player is in freight, decide on plea;
	if player is in range:
		if pikes are in range, decide on carps;
		if haunter is off-stage, decide on pre-haun;
		if haunter is reflexive, decide on haunter;
	if haunter is reflexed and location of player is location of haunter, decide on haunter;
	if player is in Lapsin' Plains:
		if c2 is in Lapsin' Plains, decide on c2;
		if crate is reflexive, decide on crate;
		if skis are in Lapsin' Plains, decide on skis;
		if knob is reflexive, decide on knob;
		if pans are reflexive, decide on pans;
	if player is in Hardest Trashed Dearths, decide on eeks;
	if player is in Shadier Airshed:
		if tubs are in Shadier Airshed, decide on tubs;
		if prod is visible, decide on prod;
		if aunt-tuna-cross is false or wipes are not in Lean Lane: [hint the side quest ONLY IF you can still get the wipes]
			if waste is in Shadier Airshed, decide on waste;
			if lance is not cleaned and lance is in Shadier Airshed, decide on lance;
			if heaps are reflexive and heaps are in Shadier Airshed, decide on heaps;
	if player is in Lean Lane:
		if tea tray is visible, decide on tea tray;
		if trout is reflexive, decide on trout;
		if bubble wrap is off-stage, decide on drawer;
	if player is in Achers' Arches:
		if sardine is in Achers' Arches:
			if player has wrap, decide on wrap;
			decide on sardine;
		if a-s is reflexive, decide on a-s;
	if player is in Horned Hedron:
		if walleyes are in Horned Hedron, decide on walleyes;
		if o-t is in Horned Hedron, decide on o-t;
	if player has gleaner and gleaner is reflexive, decide on gleaner;
	if player is in Rascal Craals:
		if player has digger and player has ruby, decide on ruby;
	if player is in Dourest Detours, decide on ant;
	if location of player is Den Loft:
		if yapper is in loft, decide on yapper;
		if d2 is in loft, decide on d2;
		decide on dialer;
	decide on the player;

carry out oyster-hinting:
	if verb-warned is false and cur-score of oyster is 0:
		now verb-warned is true;
		all-say "There's a lot of action here. You will need lots of action. So that gives you a clue as to the commands to use." instead;
	if oyster-item is not player, try objhinting oyster-item instead;
	if haunter is reflexed and location of haunter is location of player, all-say "You need to show the haunter where the ruby is buried, now." instead;
	if player is in Arches and bubble wrap is off-stage, all-say "You need to go [if Lean Lane is visited]back to Lean Lane[else]east of Anger Range[end if] for a small gift." instead;
	if player is in anger range and eeks are in Hardest Trashed Dearths, all-say "You may want to visit the trout to the east." instead;
	if player is in Rascal Craals and player does not have the digger, all-say "You don't have everything you need. You'll want to do some digging here. But you have nothing to dig with, yet." instead;
	if location of player is Rascal Craals and ruby is off-stage, all-say "This would be a good place to bury something, but you're not sure what." instead;
	if location of player is End Den, all-say "[one of]You're at a dead end, here. Exiting and re-entering won't make you any luckier. You need some sort of talisman to guide you through.[plus][or][if player has gleaner]You should really examine the gleaner[else if player has pearl]You should find the other half of the pear.[else]There are two fragments that can combine to form what you need. The arches and Lean Lane contain them[end if].[minus][cycling]" instead;
	all-say "There's nothing to do with anything in this location. Maybe hint something specific from your inventory or move to another place.";
	the rule succeeds;

book towers-hinting

to say seesaw:
	say "[if scope is examined]saw[else]could see[end if]";

to say to-center:
	repeat with mydir running through directions:
		if the room mydir of location of player is treading gradient:
			say "[mydir]";
			continue the action;
	say "[if player is in actionless coastlines]southwest[else if player is in Anemic Cinema or player is in Treading Gradient or player is in Fringe Finger]southeast[else if player is in Scope Copse or player is in Shaven Havens or player is in Danger Garden]northeast[else if player is in Lost Lots or player is in Obscurest Subsector or player is in Danger Garden]northwest[else]some way--use the scope[end if]";

carry out towers-hinting:
	if number of visible warriors > 0:
		try objhinting h-w instead;
	if location of player is rawest waters:
		try objhinting eastern instead; [this can come first since it is a 1-off puzzle]
	if player is in anemic cinema and admirer is in anemic cinema:
		try objhinting admirer instead;
	if player is in Danger Garden and bonker is in Danger Garden:
		try objhinting bonker instead;
	if player is in Treading Gradient and weeds is in Treading Gradient:
		try objhinting weeds instead;
	if number of visible guardians > 0:
		d "Looking for mr hinty = [mr-hinty].";
		if mr-hinty is visible:
			try objhinting mr-hinty instead;
		d "Oops! A bug!";
		any-guardian-hint instead;
	if player is in Loftier Trefoil:
		try objhinting h-w instead;
	if scope copse is unvisited:
		all-say "You can just go north[if tarts are reflexive], though you can hint the tarts and toaster if you want[end if]." instead;
	if shaven havens is unvisited:
		all-say "There's an important location in the center of the Bland Sad Badlands, [to-center] of here. You'll want to [if shaven havens is accessible]go[else]make a path[end if] there." instead;
	if raves saver is in Treading Gradient or ragged dagger is in Treading Gradient:
		all-say "Collect the loot from the Treading Gradient." instead;
	if obscurest subsector is unvisited:
		all-say "[if bonker is in lalaland]Go east of where the bonker was.[else]You need to work your way to the east bit you saw in the scope copse.[end if]" instead;
	if Treading Gradient is unvisited:
		all-say "[if admirer is in lalaland]You need someone, or something, north of where the admirer was.[else]You need to work your way to the north bit you [seesaw] in the scope copse.[end if]" instead;
	unless Dr Yow has been wordy:
		all-say "[one of]Dr. Yow[if player is not in Obscurest Subsector] back in the prison ropins[end if] can be manipulated.[or]There are two ways to make Dr. Yow wordy, but one is more useful than the other right away.[or]Dr. Yow can be WORDY.[cycling]" instead;
	if duck is aloof:
		all-say "[one of]That duck [if duck is not visible]in the Shaven Havens seemed[else]seems[end if] awfully lonely. Maybe you can bring it home?[or]It won't follow you. It doesn't trust your voice.[or]Someone else's voice, then, maybe?[or]Find anything that could record that?[or][if shaven havens is unvisited]Something's in the Treading Gradient.[else if player does not have raves saver]The raves saver you saw is useful.[else]Your raves saver.[end if][or]It's actually a tape recorder.[or]It has two buttons, RETAPE and REPEAT, and you can probably figure what does what.[or]If you RETAPE Dr. Yow when [he-she] is [if Dr Yow has been wordy]WORDY[else]in a certain state[end if], that gets [his-her] voice.[cycling]" instead;
	if duck is not returned:
		all-say "[one of]You probably need to free Dr. Yow. It seems like the right thing to do.[or]Did you notice the duck is a lone duck? And its name, Loud Neck?[or]The lock seems like it should be easy, but it isn't.[or]You can't unlock it. Wrong part of speech.[or]UNLOCKED.[cycling]" instead;
	if actionless coastlines is unvisited:
		all-say "[one of]You need to find the Actionless Coastlines.[or]It's in the northeast of the Scope Copse map.[or][if the-hostile is in lalaland and atheists are in lalaland]You've already cleared who you need to[else]You've got at least another guardian to get rid of[end if].[cycling]" instead;
	if agnostic is lonely:
		all-say "[one of]Hm, the agnostic [if player is not in actionless coastlines]at the coastlines [end if]seems technically inclined but restless.[or]Who else might help [him-her] learn stuff?[or]Dr. Yow.[or]TELL/ASK AGNOSTIC ABOUT DOCTOR.[cycling]" instead;
	if agnostic is not in Obscurest Subsector and Dr Yow is in Obscurest Subsector:
		all-say "The agnostic will follow you wherever you go. Lead [him-her] back to the doctor in the subsector." instead;
	unless Dr Yow has been rowdy:
		all-say "[one of]Dr. Yow is versatile. You need [him-her] to be exciting around the agnostic.[or][he-she-c] can also be...[or]...ROWDY.[cycling]" instead;
	if dinger is in coastlines, try objhinting dinger instead;
	if Outer Route is not visited:
		all-say "You need to visit west of the Copse Scope[if butlers are not in lalaland]. The bluster butlers guard that area[end if]." instead;
	if player is in Outer Route:
		if weeds are in Treading Gradient:
			all-say "The item you want is behind the weeds in the Treading Gradient." instead;
		if gizmo is off-stage:
			try objhinting rapier repair instead;
	if player has gizmo:
		try objhinting gizmo instead;
	if location of player is not actionless coastlines:
		all-say "You'll want to head to the coastlines to make it across the water." instead;
	if rawest is unvisited and limits are unvisited:
		if t-or-b is reflexive:
			try objhinting t-or-b instead;
		if turbos are reflexive:
			try objhinting turbos instead;
		if blaster is reflexive:
			try objhinting blaster instead;
	if player is in Mesprise Premises:
		if player has flowerpot and flowerpot is reflexive:
			try objhinting crocus instead;
		if Tetris Sitter is reflexive:
			try objhinting Tetris Sitter instead;
		if player has flowerpot:
			all-say "You should GIVE the succor crocus to the Tetris Sitter for hints." instead;
	if player is in mislit limits:
		try objhinting curst palace instead;
	all-say "There seems to be nothing to do here. Or, rather, I'm stuck suggesting anything." instead;

to decide what indexed text is the vul of (w - a warrior):
	choose row with the-from of w in table of towers anagrams;
	decide on "[right-word entry]";

to decide which direction is the psgdir of (gu - a guardian):
	if gualoc of gu is not location of player:
		decide on the opposite of the guadir of gu;
	decide on the guadir of gu;

gua-warn is a truth state that varies.

to any-guardian-hint:
	let Z be north;
	if gua-warn is false:
		ital-say "in the Towers area, when multiple guardians are visible, I can only guess which you mean. You may wish to HINT (guardian) instead.";
		now gua-warn is true;
	if number of visible guardians is 1:
		try objhinting a random visible guardian;
	repeat with VG running through visible guardians:
		if psgdir of VG is north:
			try objhinting VG;
			continue the action;
	repeat with VG running through visible guardians:
		if psgdir of VG is east:
			try objhinting VG;
			continue the action;
	repeat with VG running through visible guardians:
		if psgdir of VG is south:
			try objhinting VG;
			continue the action;
	repeat with VG running through visible guardians:
		if psgdir of VG is west:
			try objhinting VG;
			continue the action;

book otters-hinting

to say current-mackiness:
	choose row with the-from of current-idea in table of otters anagrams;
	say "[right-word entry in upper case]";

to decide which thing is otters-cur-item:
	if player is in Bleary Barley:
		if b-b is reflexive:
			decide on b-b;
		if Ed Riley is in Bleary Barley:
			decide on Ed Riley;
	if player is in frontage:
		if Macks are in frontage:
			decide on Gretta;
		if atmo-moat is in frontage and power-back is true:
			decide on atmo-moat;
	if player is in bran barn:
		if Mr Lee wears ghoul hat:
			decide on ghoul hat;
		if p-2 is in bran barn:
			decide on p-2;
	if player is in loop pool:
		if sea cube is not in lalaland:
			decide on sea cube;
		if eels are not reflexed:
			decide on eels;
	if player is in anger pit:
		if sly imp is in anger pit:
			decide on sly imp;
	if player is in anteroom:
		if whiners are in anteroom:
			decide on whiners;
	if player is in Lamer Realm:
		if owls are in Lamer Realm:
			decide on owls;
		if number of visible reflexive animals > 1:
			decide on animal-to-hint;
	if player is in perverse preserve:
		if raptor is visible:
			decide on raptor;
		if number of visible pre-animal things > 1:
			decide on animal-to-hint;
	if player is in alcoves:
		if parrot is in alcoves:
			decide on parrot;
	if power-back is false:
		decide on the player;
	if player has whistle and whistle is not reflexed:
		decide on whistle;
	if player has medals and medals are not reflexed and medals are not prefigured:
		decide on medals;
	if current quip is final-quip:
		decide on elvira;
	decide on the player;

to say loop-pool-already:
	say "[one of]The bran barn isn't critical since you've solved the loop pool, but it'll get extra points.[paragraph break][or][stopping]";

to say bran-barn-already:
	say "[one of]The loop pool isn't critical since you've solved the bran barn, but it'll get extra points.[paragraph break][or][stopping]";

to say tho-work:
	say ", though you still have work there[if power-back is false], which you might not be up for yet[end if]"

table of animal randomness
this-animal
thrones
corona
pines
nails
ocelots
leopard
satyr
badger

last-thing-hinted is a thing that varies. last-thing-hinted is the palm.

to decide which thing is animal-to-hint:
	if last-thing-hinted is in location of player and last-thing-hinted is reflexive:
		decide on last-thing-hinted;
	repeat through table of animal randomness:
		if this-animal entry is in location of player:
			if this-animal entry is not reflexed:
				decide on this-animal entry;
	d "bad fallthrough in animal-to-hint.";
	decide on the player; [this should never happen]

tapering-items is a list of things variable. tapering-items is {imp1, imp2, imp3}.

anteroom-items is a list of things variable. anteroom-items is {ram1, ram2, ram3}.

carry out otters-hinting:
	unless otters-cur-item is player:
		try objhinting otters-cur-item instead;
	if player is in Bleary Barley: [if there is no item, see what to do next based on where we can go]
		all-say "You made a way west. You're done here." instead;
	else if player is in frontage:
		all-say "[if gretta is in frontage]Gretta's advice may prove useful. [else]Gretta's gone. [end if]You're done here[if alcoves is unvisited], so you may want to try to go west[else if power-back is false], but you need to go north or south to regain your powers[end if].";
	else if player is in loop pool or player is in bran barn:
		all-say "You recovered your powers, so there's nothing more to do here.";
	else if player is in Anger Pit:
		all-say "The path north is cleared[tho-work].";
	else if player is in Anteroom:
		all-say "The path south is cleared[tho-work].";
	else if player is in Lamer Realm or player is in perverse preserve:
		if power-back is false:
			all-say "You need to get your powers back before you do anything. Look around [if frontage is visited]the frontage[else if ed riley is in barley]and try to get past Ed Riley[else]west of the barley[end if].";
		else:
			if player is in perverse preserve:
				all-say "You've re-summoned all the animals you need to[if number of pre-animal things in preserve is 1], though you can also try to fix the [random visible pre-animal thing][end if].";
			else:
				all-say "You've helped all the animals you need to[if number of reflexive animals in Lamer Realm > 0], but you can still try to help the [random visible reflexive animal][end if].";
	else if player is in alcoves:
		all-say "Your destiny awaits west. Hopefully you will have enough allies for the big fight.";
	else:
		all-say "There seems to be nothing to do here.";
	the rule succeeds;

definition: a thing (called X) is pre-animal:
	if X is corona or X is nails or X is thrones or X is pines, decide yes;
	decide no.

to say right-adj of (anim - an animal):
	choose row with ani of anim in the table of animal-stuff;
	say "[adj-say entry in upper case]";

table of animal-stuff
ani	adj-say
ocelots	"coolest"
leopard	"paroled"
badger	"garbed"
satyr	"artsy"

volume parser tricks and errors

[not a very BIG volume, but we need to know what to do with commands that should work.]

book reading the command

dash-nag is a truth state that varies.

after reading a command:
	let XX be indexed text;
	now block-north is false; [?! remove if fixed later. N during Z.Z.Z.Z is annoying]
	let XX be the player's command in lower case;
	change the text of the player's command to XX;
	if scan-nag is false and settler is visible:
		if the player's command includes "scanner":
			say "(Fourth wall dumb joke: the letters settler isn't a scanner made for canners. It's for text adventurers.)";
			now scan-nag is true;
	if dash-nag is false and the player's command includes "-":
		say "(NOTE: you never need to use a dash)";
		now dash-nag is true;
	if XX matches the regular expression "^(say|think|shout|speak|yell) ":
		if say-warn is false:
			say "If you want to say or think a magic word, you can just type it. So instead of SAY XYZZY, you can use the command XYZZY.[paragraph break]You can ASK someone ABOUT something, if you want to talk to them. So this game will snip SAY/THINK/SHOUT/SPEAK/YELL from the start of all future commands and reject this one.";
			pad-rec "saying";
			now say-warn is true;
			reject the player's command;
		say "(cutting off the trailing '[word number 1 in the player's command]')[line break]";
		let XX be the player's command;
		replace the regular expression "^(say|think|shout|speak|yell) " in XX with "";
		change the text of the player's command to XX;
	if XX matches the regular expression "\b the\b":
		replace the regular expression "\b the\b" in XX with "";
	if XX matches the regular expression "scan.*with" and player has settler:
		if scanwith is false:
			ital-say "you don't need the preposition WITH. You can just say SCAN, as the settler is the only item that can scan.";
			now scanwith is true;
		replace the regular expression "with.*" in XX with "";
		change the text of the player's command to XX;
	if the player's command matches the regular expression "^\p" or the player's command matches the regular expression "^<\*;>":
		if hint-to-file is true:
			append "COMMENT: [the player's command]" to the file of roilhints;
		if currently transcripting:
			say "Noted.";
		otherwise:
			if ignore-transcript-nag is false:
				say "You've made a comment-style command, but Transcript is off. Type TRANSCRIPT to turn it on, if you wish to make notes.[paragraph break]The long version of this nag will only appear once. You may press any key to continue.";
				wait for any key;
				now ignore-transcript-nag is true;
			else:
				say "(Comment not sent to transcript.)";
		reject the player's command;
	if period-warned is false:
		if the player's command matches the regular expression "\.":
			say "Small warning--this shouldn't be a problem, but if you use periods to separate a command to do your magic, the parser will have problems. I couldn't find a way around it. Sorry. That said, normal commands will work okay.[wfak]";
			now period-warned is true;
	if number of words in player's command is 5 and long-sent-warn is false:
		ital-say "you probably don't need more than four words per command. The most complex ones are PUT X ON Y or ASK X ABOUT Y, and a compound item like GIANT PIN can use GIANT or PIN. Adjectives usually aren't necessary, and GET ALL will never take anything harmful or lethal.";
		now long-sent-warn is true;
		pad-rec "long commands";
	consider the trailing-a rule;
	if the rule succeeded:
		reject the player's command;
	if word number 1 in player's command is "a":
		if ask-warn is false:
			say "Replacing 'a' with 'ask about.' Saying 'a' is not required for any puzzle.";
			now ask-warn is true;
		replace the regular expression "^a " in XX with "ask about ";
		change the text of the player's command to XX;
		d "Changing text to [XX].";
	if mrlp is routes:
		if word number 1 in player's command is "go":
			unless word number 2 in player's command is "to":
				if go-warned is false:
					ital-say "you don't need to start a command with go in Routes. One word should be fine.";
					now go-warned is true;
				let XX be the player's command;
				replace the regular expression "^go " in XX with "";
				change the text of the player's command to XX;
	if player is in posh hops shop:
		if the player's command includes "tunes" and tunes are in lalaland:
			say "The tunes are gone, now that you messed with the jukebox." instead;
	if player is in olde lode and urn is in olde lode:
		if word number 1 in player's command is "run":
			if number of words in player's command > 1:
				say "You have a route planned out, but you panic and run just any which way...[paragraph break]";
			try fliptoing urn instead;
	repeat with QQ running through fungible things:
		if QQ is a the-from listed in regana of mrlp:
			if the player's command matches right-cmd entry:
				try fliptoing the-to entry;
				consider the notify score changes rule;
				[save-present-input;]
				consider the hint flags checkoff rule;
				consider the scam rule instead;
	if Gunter is off-stage and peephole is unexamined:
		if the player's command includes "gunter":
			say "[if peephole is unexamined]Who?[else]Gunter's outside, but to interact meaningfully, you should open the door and let him in.[end if]" instead;
	if e-s is visible:
		if the player's command includes "presto":
			unless the player's command includes "test":
				say "Presto is the word you said to reveal the, er, spot." instead;
	if the player's command includes "tickle" and Elmo is in Largely All-Grey Gallery:
		say "Really. This is a juvenile computer game, not a juvenile toy." instead;
	if player is in clearing and melon is in clearing:
		if the player's command matches the regular expression "\blen\b" and the player's command matches the regular expression "\bmo\b":
			try fliptoing melon instead;
	if player is in evoc-cove and the player's command includes "page":
		let XX be the player's command;
		replace the regular expression "page" in XX with "";
		ital-say "you don't need to say PAGE, just give a number.";
		change the text of the player's command to XX;
	if the player's command includes "under":
		if number of words in the player's command > 1:
			if old giant is visible:
				if rude 'n nuder is visible:
					say "Truncating to one word.";
					change the text of the player's command to "under";
	if player is in Rascal Craals and ruby is in lalaland:
		if the player's command includes "ruby":
			say "Don't worry about the ruby any more[if haunter is in lalaland], or the haunter[else]. It's someone else's worry. Or someTHING's[end if].";
			reject the player's command;
	if the player is in strip of profits:
		repeat through table of skipcmds:
			if word number 1 in the player's command is "[lastcmd entry]":
				if storedest entry is visible or portdest entry is visible:
					if storedest entry is store t:
						say "Sorry. I can't let you do that. But if you want to go back to the Dusty Study and [b]ROVE OVER[r], that will work.";
						reject the player's command;
					if old-rel entry > 0:
						say "The [go-region of portdest entry] region for this final command may've changed since you last played, which is probably release [old-rel entry][if old-rel entry > 1] or earlier[end if]. Go ahead?";
						if the player direct-consents:
							do nothing;
						else:
							say "It'll be fun. And worth it. I hope!";
							reject the player's command;
					say "You declare cleared [go-region of portdest entry] and watch [if portdest entry is visible][portdest entry][else][storedest entry][end if] dissolve.";
					if storedest entry is visible:
						reg-inc;
					now storedest entry is in lalaland;
					now portdest entry is in lalaland;
					now go-region of portdest entry is shortcircuited;
					see-about-patcher;
					reject the player's command;
				say "You already took care of [go-region of portdest entry].";
				reject the player's command;
	if the player is in Shadier Airshed and digger is off-stage:
		if the player's command includes "shovel":
			say "Hmm. No shovel yet. Or anything like it. Maybe you'll find one, though.";
			reject the player's command;
	if hydra-known is true and player is in alcoves and player does not have whistle:
		if the player's command matches the regular expression "\b(hardy|hydra)\b":
			say "You don't want to THINK about taking on the hydra by yourself. You need something much bigger.";
			reject the player's command;
	if location of player is location of butlers and butlers are not plurtry:
		if the player's command matches the regular expression "\bbutler\b":
			now butlers are plurtry;
			ital-say "there are too many butlers, so getting rid of one wouldn't do much.";
	if location of player is location of atheists and atheists are not plurtry:
		if the player's command matches the regular expression "\batheist\b":
			now atheists are plurtry;
			ital-say "there are too many atheists, and they're too diverse in their arguments, to examine just one. But you don't need to.";
	if location of player is location of pirates and pirates are not plurtry:
		if the player's command matches the regular expression "\bpirate\b":
			now pirates are plurtry;
			ital-say "there are too many pirates, and they're too uniform in their uniforms, to examine just one. But you don't need to.";
	if location of player is location of natives and natives are not plurtry:
		if the player's command matches the regular expression "\bnative\b":
			now natives are plurtry;
			ital-say "there are too many natives to deal with one at a time.";
	if yurt-plurtry is false and player is in Scope Copse and yurts are in Scope Copse:
		if the player's command matches the regular expression "\byurt\b":
			now yurt-plurtry is true;
			ital-say "there are too many yurts, and they're too uniform, to examine just one. But you don't need to.";
	if location of player is location of diners and diners are not plurtry:
		if the player's command matches the regular expression "\bdiner\b":
			now diners are plurtry;
			ital-say "there are too many diners, and they're too uniform, to examine just one. But you don't need to.";
	if location of player is location of ingrates and ingrates are not plurtry:
		if the player's command matches the regular expression "\bingrate\b":
			now ingrates are plurtry;
			ital-say "there are too many ingrates, and they're too uniform, to examine just one. But you don't need to.";
	if the player's command matches the regular expression "\bsmell\b" and word number 1 in the player's command is not "smell":
		say "You can just type SMELL.";
		reject the player's command;
	if getall-warn is false:
		if the player's command matches the regular expression "\ball$":
			if the player's command matches the regular expression "^(get|take)":
				say "Multiple item-pull!";
				now getall-warn is true;

section special cases

this is the trailing-a rule:
	if location of player is Disease Seaside:
		if the player's command exactly matches the text "a cone":
			say "That wouldn't make the canoe any more helpful. It wouldn't make it any less helpful, either. Maybe the raft or boats are a better bet.";
			the rule succeeds;
	else if location of player is loather rathole:
		if the player's command exactly matches the text "a rec":
			say "You've done nothing to deserve a rec yet. You need to think for yourself. Maybe you can become someone who give a rec, one day.";
			the rule succeeds;
	else if location of player is Lean Lane:
		if the player's command exactly matches the text "a nut":
			say "That's not nice. You are a guest.";
			the rule succeeds;
	else if mrlp is towers and player is not in Loftier Trefoil:
		if the player's command exactly matches the text "a place":
			say "It already is a place. It needs to be more than that, to wipe off the stigma of being the curst palace.";
			the rule succeeds;
	else if player is in Char Arch:
		if the player's command exactly matches the text "a gps":
			say "A GPS might point you to the gasp-gaps, but it wouldn't help you survive them. It wouldn't even help you if I forgot to list an exit elsewhere, which totally only happened in the first release and is fixed everywhere now, I hope.";
			the rule succeeds;
	the rule fails;

section command reader booleans

period-warned is a truth state that varies.

ignore-transcript-nag is a truth state that varies.

say-warn is a truth state that varies.

scan-nag is a truth state that varies.

block-north is a truth state that varies.

long-sent-warn is a truth state that varies.

yurt-plurtry is a truth state that varies.
scanwith is a truth state that varies.

ask-warn is a truth state that varies.

go-warned is a truth state that varies.

section disambiguation

[this is so parenthetical text doesn't pop up]

rule for clarifying the parser's choice when discerning: do nothing.

Rule for clarifying the parser's choice of super purse: do nothing.

[stopgap. Could be any store, or any object]

Rule for clarifying the parser's choice of Store Z: do nothing.

rule for supplying a missing second noun while unlocking:
	if ropins are visible:
		now second noun is ropins;
	else:
		now second noun is super purse.

section commands to skip previously solved areas

table of skipcmds
lastcmd	storedest	portdest	old-rel [old release is last one where this command worked. If 0, it currently works]
"through"	store u	routes-x	3
"between"	store u	routes-x	3
"beyond"	store u	routes-x	0
"bus"	store p	e-s	0
"sub"	store p	e-s	0
"debug"	store p	e-s	1
"redial"	store y	oyster-x	0
"destroy"	store y	oyster-x	1
"spectacular"	store w	towers-x	0
"decide"	store v	troves-x	3
"resign"	store v	troves-x	3
"quickly"	store t	otters-x	-1

book errors

Rule for printing a parser error when the latest parser error is the nothing to do error:
	say "Nothing is small or mobile or valuable enough to take here." instead;

Rule for printing a parser error when the latest parser error is the not a verb I recognise error:
	say "[reject]";

definition: a thing (called xx) is fungible:
	if xx is held, yes;
	if xx is palm and xx is in dusty study, yes;
	if xx is visible, yes;
	no.

Rule for printing a parser error when the latest parser error is the didn't understand error:
	if player has wrap:
		if the player's command matches "\b(wrap|bubble)\b":
			say "Hm, maybe that's not quite what to do with the wrap. As fun as it'd be to pop all those bubbles one by one, you may need to just rip them all up at once.";
			the rule succeeds;
	repeat through regana of mrlp:
		if the player's command matches right-cmd entry:
			if the-from entry is fungible:
				try fliptoing the-to entry;
				consider the notify score changes rule;
				consider the hint flags checkoff rule;
				consider the scam rule instead;
	say "[reject]";

Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error:
	if the player's command matches the regular expression "^(gt|go to)":
		say "That's not a room or thing I recognize.";
	else:
		say "Nothing like that is in the immediate vicinity or region."

Rule for printing a parser error when the latest parser error is the can't see any such thing error:
	if location of player is study and study is dark:
		if the player's command includes "palm":
			say "Hmm. It's not useful in its present state. You think back to how you changed that toga into a goat just by saying 'goat.' Maybe you can do something like that, again." instead;
		say "You can't see much of anything here, and if you stumble around, that [i]palm[r] might poke your eye out." instead;
	if the player's command matches the regular expression "^go":
		say "That isn't a recognized way to go. You can GO TO (room, person or thing you visited), or you can use old-fashioned text adventure directions. For instance, [if tables are in lalaland]GO IN or IN or GO TO FRAMING[else if t-b are in lalaland]GO DOWN or GO TO GALLERY[else]GO TO STUDY or GO UP/IN/DOWN[end if]." instead;
	if the player has the rigged digger:
		if the player's command includes "prod":
			say "It's a digger, now." instead;
	say "[if location of player is dark]You can't locate that in the dark, if it's there[otherwise]Nothing unusual like that around here[if-enter][end if]." instead;

to say if-enter:
	if word number 1 in the player's command is "enter":
		say "--you may want to use a direction, instead";

Rule for printing a parser error when the latest parser error is the only understood as far as error:
	if player is in treasure:
		if ye hoop is in treasure:
			if word number 1 in the player's command is "jump":
				if the player's command includes "wall":
					say "You think about jumping off the wall, but you wonder if that'd just be violating something sacred, and you might get zapped for that. You need a way to say, the heck with that." instead;
				say "That's maybe not how to jump to reach Ye Hoop. Maybe you sort of need to jump a certain way to get there, and not care how." instead;
	if number of words in the player's command > 1:
		say "I understood the first word, but you may have thrown on too many words[if number of words in the player's command is 2]. So just '[word number 1 in the player's command]' should work[end if].";
	else:
		say "You wrote in a valid verb, or try, but the game didn't accept it, or maybe you can use the word in a different place. Sorry about that.";
	the rule succeeds;

pardons is a truth state that varies.

Rule for printing a parser error when the latest parser error is the I beg your pardon error:
	now pardons is true;
	say "[randbla][line break]";
	now pardons is false;
	follow the alert you don't have to gawk rule;

book reading a command

volume regular verb tweaks and irregular verbs

book regular important verb tweaks

chapter taking inventory

chapter inventory

definition: a thing (called itm) is regspecial:
	if itm is warpable, decide no;
	if itm is compass, decide no; [well, it IS regionally special, but it's mentioned at the end of the inventory]
	decide yes;

After printing the name of the letters settler while taking inventory:
	say "[set-det]";

After printing the name of a hintpastry (called the curfood) while taking inventory:
	say " [if curfood is heated](heated)[else](cold)[end if]";

to say set-det:
	say "[unless player has purse]: [end if]Cheat/teach mode is [on-off of cheat-on], [if list-headache is false]and t[else]T[end if]he idlers['] slider is [on-off of whether or not slider is switched on][slider-detail]";

to say slider-detail:
	if list-headache is false:
		continue the action;
	if headaches is 0:
		say ", and you can't put up with the slider's beeps any more";
	else:
		say ", and you can put up with its beepings [headaches in words] more time[if headaches > 1]s[end if]"

After printing the name of the satchel while taking inventory:
	say " (somewhere in the purse)";

after printing the name of the stapler while taking inventory:
	if staple is in the stapler:
		say " (with a staple in it)";
		now staple is mentioned;
	else:
		say " (empty)";

before listing contents while taking inventory: group hintpastries together giving articles.

show-tools is a truth state that varies. show-tools is true.

after printing the name of raves saver while taking inventory: say " ([if raves saver is reflexive]dull[else]shinier now[end if])"

instead of taking inventory:
	say "Item time![paragraph break]";
[	if debug-state is true:
		say "DEBUG: Warpable [list of warpable things carried by player].";
		say "DEBUG: REGSPECIAL C [list of regspecial things carried by player].";
		say "DEBUG: REGSPECIAL H [list of regspecial things held by player].";
		say "DEBUG: REGSPECIAL E [list of regspecial things enclosed by player].";]
	if mrlp is troves:
		if truffle is off-stage and purse-stolen is false:
			say "Boy! this is a seedy area. You're worried you might get robbed of what you have.[line break]";
		if purse-stolen is true:
			say "All you have is [i]Pa, Egg, Pea[r] and your pedanto-notepad and your settler[if player has fretful truffle] and that fretful truffle[end if]. You still need to get your super purse back." instead;
	if number of things carried by the player is 0:
		say "Just your powers, at the moment. Nothing tangible." instead;
	now all things carried by the player are marked for listing;
	if player has lamp and player has super purse:
		say "You're carrying a lamp, for light.[paragraph break]";
		now lamp is unmarked for listing; [lamp can fit in purse but isn't useful there]
	if player has settler and player has super purse:
		say "You're carrying your letters settler, to help with hints. [set-det].[line break]";
		now settler is unmarked for listing;
	if number of things carried by the player is 0:
		say "Nothing." instead;
	if the number of regspecial things carried by the player is 0:
		say "[line break]You are carrying nothing from this region in particular.[paragraph break]";
	else:
		now all things enclosed by player are unmarked for listing;
		now all regspecial things carried by player are marked for listing;
		say "Here in the [mrlp] region you have found:[line break]";
		list the contents of the player, with newlines, indented, including contents, giving inventory information, with extra indentation, listing marked items only;
	now all things enclosed by player are unmarked for listing;
	now all warpable things enclosed by player are marked for listing;
	if show-tools is true:
		if player has super purse:
			now super purse is unmarked for listing;
			say "Other things in your super purse";
		else:
			say "Your general tools";
		say " include (toggle with IV):[line break]";
		if player has letters settler:
			now letters settler is unmarked for listing;
		list the contents of the player, with newlines, indented, with extra indentation, listing marked items only;
	else:
		say "Your general tools are hidden. IV will turn them back on.";
	if number of worn things > 0:
		say "[line break]You are also wearing [a list of worn things].";
	if mrlp is presto and bored yak is not in lalaland:
		if location of player is location of skid and bored yak is not in lalaland, say "[line break]There's also that skid you can't carry, but you can push it around[if number of things on skid > 0]. It holds [the list of things on skid][end if]." instead;
		if map region of location of skid is presto, say "You remember leaving the skid in [location of skid]." instead;
	if mrlp is otters and power-back is false, say "[line break]You also DON'T have your full powers. You'll need to fix that before hitting the Edictal Citadel to the west.";
	if player has compass, say "[line break]You also have a compass to tell direction."; [start OTHERS special stuff]
	if can-guru is true, say "[line break]You still have the aftertaste of the arugula, to GURU things you could make fruits from.";

check taking inventory:
	if the first thing held by the player is nothing:
		say "Not very 'in.'" instead;
	if mrlp is means manse or mrlp is stores or mrlp is demo dome:
		continue the action;
	if number of things worn by player > 0, say "You are also wearing [list of things worn by player].";
	the rule succeeds;

after taking inventory when mrlp is others:
	eval-fruits;
	continue the action;

to eval-fruits:
	if moss cap is off-stage:
		continue the action;
	if player has droll dollar:
		say "You can't expect anything more from Curtis.";
		continue the action;
	let next-goal be (curtis-level + 2) * 4;
	let fruits-got be number of fruits in lalaland + number of held fruits;
	if fruits-got >= next-goal:
		say "You may want to go see Curtis for a new reward. Or you can keep getting new fruits.";
	else:
		say "You need [next-goal - fruits-got in words] more fruit[if next-goal - fruits-got > 1]s[end if] to get something new from Curtis.";

section iving

iving is an action out of world.

understand the command "iv" as something new.

understand "iv" as iving.

carry out iving:
	now show-tools is whether or not show-tools is false;
	say "Now I(INVENTORY) [if show-tools is true]show[else]hide[end if]s your general tools.";
	the rule succeeds;

chapter going

check going nowhere (this is the towers-mis-go rule): [?? inside in Mislit Limits]
	if mrlp is towers:
		if noun is inside or noun is outside:
			say "You can't go in, here." instead;
		if shoals are visible:
			say "Even if you were a swim swami, you'd wind up aslosh on the shoals." instead;

upwarned is a truth state that varies.

check going nowhere (this is the spam can't go that way rule) :
	if upwarned is false:
		if noun is up or noun is down:
			say "You can't go [noun] here[if mrlp is demo dome and player is not in sparse spares], though Sparse Spares is a room away and down[else]. In fact, you almost never have to go up or down in this game[end if].";
			now upwarned is true instead;
	repeat through table of nowheres:
		if theloc entry is location of player:
			say "[thereject entry][line break]" instead;
	if number of viable directions is 0:
		say "You can't go--well, any way here. This is a sort of puzzle room." instead;
	else if number of viable directions is 1:
		say "You can only go [if room noun of location of player is visited]back [end if][list of viable directions] here." instead;
	else:
		say "You can go [list of viable directions] here." instead;
	if noun is outside:
		say "Exiting is ambiguous--if there's only one direction, you'll take it, but otherwise, the cardinal directions usually work better." instead;

table of nowheres [tnw]
theloc	thereject
Largely All-Grey Gallery	"You can probably go back up, or you can go in if you're ready to face what's beyond." [means manse]
Farming Framing	"No time for mooching around Means Manse. You probably need to take [if sitar is visible]a[else]that[end if] secret passage in, or down."
highest heights	"You can go back IN to the study, though you don't need to, or you could try [if ramp is visible]to get the pram out of the way[else]going DOWN the ramp[end if]."
Strip of Profits	"Why run off for fun? See [if number of visible portals is 0]what one of those stores can become[else]what's in one of those portals[end if] instead." [stores]
Cruelest Lectures	"The trumped-up charges and the teleological lectures have totally conked your sense of direction. There must be a generic way to leave!"
Ripe Pier	"You've lost all sense of direction here, but you need to figure how to get on that boat." [routes]
Harms Marsh	"Far into a rift? No. You can't [if darkness is visible]see far enough to [end if]rely on directions, here[if darkness is visible]. You just need to find No-Gal Logan[end if]."
Cripple Clipper	"[if noun is inside or noun is down]Locked ol['] deck. No bowel on below.[else]Drowning ails or roils a sailor.[end if]"
Idle Deli	"Nowhere to go but out. Yup, not only does this restaurant lack ambiance, but it also lacks washrooms."
Adobe Abode	"This do be a one-room place. You can really only go outside."
Loather Rathole	"Consciously going into any hurt thru might leave you vulnerable. You need to lash out. [if cold is not in lalaland]Besides, you're too cold. While haste heats, going [noun] would offer no more [i]heat[r] than here.[else]You need to get emotionally stoked to catch up with the thief, but right now, you wonder if it really matters.[end if]" [troves]
Bustle Sublet	"The action's here. You [if what-a-bee is in sublet]can't run away from the bee. You need to work around it[else]still have a lot to look for[end if]."
Boarded Roadbed	"A voice says 'Bad! Redo!' when you try to drift away from where the cellar must be. Besides, you might wind up in ruts: Rustin['] Ruin St."
Drain Nadir	"You're so low, you can picture yourself slipping on a rind or dinar. 'I... darn.' You need to build yourself up here, somehow."
Boredom Bedroom	"Directions won't work. Running into a wall would leave your bod more red: boom! Study your surroundings."
Browse Bowers	"You are definitely going places, but the only place you'd get walking from here is the Save-Aves. Not ritzy enough! Maybe you should focus on that brochure."
Econ Cone	"That could lead to Save Aves. A well-off place, to be sure, where everyone has a nice vase, but they still HAVE to save, there."
Upscale Capsule	"You're at the very top. You don't really want to change that without really good motivation."
Char Arch	"East or west would be an alpinist tailspin ('CHARGE! Eh, crag.') Try north or south, instead." [presto]
Dirge Ridge	"The vile veil seems to almost repel a leaper except where it opens to the north. Note if it were an evil veil, it would probably pull you down the side of the ridge, maybe even to the evil vlei. You couldn't leg such gulches."
Austerer Treasure	"The treasure room has no secret passages, so you can only go back east."
Marines Seminar Remains	"The sport ports would provide a challenge you're ill-equipped for. West is the only way out."
Posh Hops Shop	"[if noun is not outside]You just got here, so direction means nothing. So you can only really go out, but those trolls will just coax you back inside. Unless you can out-cool them[else if silly-acts is 3]You try to make a dash, but you're not smooth enough. The trolls hold you back and ask you to explain yourself[else if silly-acts is 2]You start a bit too herky-jerky towards the exit. 'Forego, goofer,' says one of the trolls. 'You too good for this place?' Nonchalance is required here[else if silly-acts is 1]The trolls glare at you--they know you've been disruptive--but they've seen worse and are still blocking the way out[else if silly-acts is 0]The trolls are blocking you from going out. You'll have to exit the Posh Hops Shop more smoothly[else]BUG--you annoyed people too much. You should've gotten killed. Please let me know how you did this[end if]."
Olde Lode	"Something seems to tell you 'Lo! Lo! Deed!' It can't be too hard. The [if clam is in lode]clam[else]urn[end if] isn't that complex."
Disease Seaside	"The matterless streamlets don't matter. You need to cross to the north for more action."
Fighter Freight	"Directions aren't what matters here. You just need some sort of action to get off the boat."
Hardest Trashed Dearths	"Trying to follow a direction without purpose, you would probably run into one of the spark parks and get zapped. You need something to follow." [oyster]
Lean Lane	"Though you are a guest, probably best not to go poking around. You can go back west."
Lapsin' Plains	"With the trap tarp on most all sides, you can only go back south, or[if span pans are in Lapsin' Plains], once the span pans are neutralized,[end if] inside."
Achers' Arches	"You can only go north to the Horned Hedron[if sardine is in arches], once the sardine is gone,[end if] or east back to Anger Range. The Handsome Sand Home blocks you west and south."
Horned Hedron	"The main exit is south, though [if Rascal Craals is visited]you can go back west to the Rascal Craals[else]an area west is in disrepair[end if]. You can also go IN to the [if a-p is visible]portal[else]ol['] trap once you disarm it[end if][if walleyes are visible], though you probably don't need the walleyes watching you try[end if]."
Rascal Craals	"The round bay boundary blocks you from going any way but back east."
Tenfold	"While you can go back outside, you can just finish things here[unless-max]."
Loftier Trefoil	"[if rodney is visible]One look from Rodney, and you stay put[else]Taverns are generally meant to make you forget compass directions, among other things. You probably just want to go out[end if]." [towers]
Topside Deposit	"The badlands are too dangerous any way but[if scope copse is visited] back[end if] north[if unripe ur-pine is visible], and the ur-pine's in the way right now[end if]."
Outer Route	"The sway-ways are not reliable. You probably just want to go back east."
Coastlines	"You can't get across Leak Lake without some sort of craft[if bot boat is visible], like the boat, which [ag-first] will let you enter[end if]."
Fringe Finger	"Unorg'd ground is every way except back east. Falling there off the fringe finger would result in ... grief'n."
Lost Lots	"Any exit through the gasfield--especially without die flags (and there are none in the game) to guard you--would be false, dig?"
Obscurest Subsector	"If you could go any way other than back west, the subsector wouldn't be obscurest, now."
Shaven Havens	"Any direction but back east might drive you too far from the palace."
Mislit Limits	"The scaly clays are too treacherous. You need to find the word to restore the curst palace to its former glory[if mesprise is unvisited]. Maybe there is a clue to the west[end if]."
Alcoves	"You sway to the side, not ready to face the menace to the west." [otters]
Loop Pool	"The pool is wide and long. You can only go back south."
Perverse Preserve	"[one of]You feel jolted as you go that way. You may not be able to see it, but you know the tell-tale signs of a CRITTERS RESTRICT field. It is even, err, STRICTER for animals as for humans. Looks like you can only go back north[or]The CRITTERS RESTRICT field isn't worth risking[stopping][dsknow]."
Reclusion Inclosure	"Even without the Edictal Citadel that way, Elvira wouldn't let you anywhere into her private chambers. Neither will her creations. Maybe you can sneak back east."
Rustic Citrus	"With a border, arbored, all around, one direction seems as good as any other. Maybe you need to [if player has moss cap]tinker with the moss cap[else]help Curtis a bit more[end if]." [others]
filed field	"[if b-w are visible and noun is west]The barriers west block you. Maybe you can get rid of them.[else]With all the foilage foliage and [if-fence], the only way to say I fled is to go back east.[end if]"
Scape Space	"The scape space is pretty sparse. No spare rooms, restrooms, anything. You can only go back up."
Clangier Clearing	"You don't need anything in the superstore. You might get lost, anyway."
Gates Stage	"You don't want to know how effective the gropin['] roping is. The gates are more interesting, anyway."

to say if-fence:
	say "[if pipe panel fence is visible]the pipe panel fence too[else]even without the fence[end if]"

to say unless-max:
	let my-tot be poss-score of oyster - cur-score of oyster;
	if lever is reflexive:
		decrement my-tot;
	if dialer is reflexive:
		decrement my-tot;
	if d2 is reflexive:
		decrement my-tot;
	say "[if my-tot is 0], and you've done everything else[else], or maybe you can look around to get more points[end if]";

book regular trivial verb tweaks

chapter examining

[before deciding the scope of the player (this is the silent scope rule) :
	place the location of the player in scope;
	continue the action;

Include (-
Replace DB_Rule;
-) before "Rulebooks.i6t".

Include (-
[ DB_Rule R N blocked;
	if (R==0 || R==(+ the silent scope rule +)) return;
	print "[Rule ~", (RulePrintingRule) R, "~ ";
	#ifdef NUMBERED_RULES; print "(", N, ") "; #endif;
	if (blocked == false) "applies.]";
	print "does not apply (wrong ", (address) blocked, ").]^";
;
-) after "Rulebooks.i6t".]

does the player mean doing something with location of the player: it is unlikely.

instead of doing something with the location of the player:
	if current action is examining or current action is gotoing, continue the action;
	say "You may need to change your location at some time, but you never need to do anything with it in a command.";

[?? take all takes the location of the player too]

xrooming is an action applying to one visible thing.

understand "x [any room]" as xrooming.
understand "examine [any room]" as xrooming.

check examining location of player:
	if noun is location of player:
		say "X/EXAMINE (ROOM) is equivalent to LOOK in A Roiling Original.";
		try looking instead;

check xrooming:
	if noun is location of player:
		say "X/EXAMINE (ROOM) is equivalent to LOOK in A Roiling Original.";
		try examining location of player instead; [shouldn't happen but just in case]
	if noun is visited:
		say "You've been there, but you can't see that far[x-room-n].";
	else:
		say "You haven't gotten there yet, and you can't see that far[x-room-n].";

to say x-room-n:
	say "[one of]. X ROOM is really just the same as LOOK for the room you're in, and you don't need to look ahead or behind[or][stopping]"

chapter attacking

understand the command "kick" as something new.

understand "kick [something]" as attacking.

instead of attacking: [this takes responses for general types. The table below it is for specific NPCs/objects]
	if noun is a store: [general stuff here that can't fit into a table]
		say "Sore at a store?" instead;
	if noun is Elvira:
		say "'Hater-heart.' She pouts. She summons a proto-troop that easily defeats you. '[one of]Pretty try, pet[or]Gritty try, git[in random order]!' she laughs. 'A feted defeat!' Perhaps you need backup.";
		get-dead;
		follow the shutdown rules;
		the rule succeeds;
	if noun is scary crays:
		say "You are severely outnumbered, captured, and sent to the hold. Maybe they will find out who you are, and maybe not. You will be at either Elvira's mercy or theirs.";
		get-dead;
		follow the shutdown rules;
		the rule succeeds;
	if noun is a target listed in the table of attack-specific:
		choose row with target of noun in table of attack-specific;
		say "[nohit entry][line break]" instead;
	if player has lance:
		say "[if noun is a person]Wrong enemy for the lance[else]." instead;
	if noun is a guardian:
		say "You need to see into [the noun]'s nature instead[if player has dagger]--that dagger would just make things murder. Nobody in the Bland Sad Badlands is evil[end if]." instead;
	say "[randbla][line break]" instead;

sign-other is a truth state that varies.

to say dont-hit of (fi - a person):
	say "[if fi is fightin]Neat! Be Beaten! (You'd go to a lit posh hospital where CPR is crisp for that. Think. Or, rather, out-think.)[else if fi is washed up]He'd still beat you up, even though he really doesn't want to fight. Wouldn't change that he and [other-guy of fi] are still [i]washups[r]. Maybe a talk with them would break their funk.[else]Slug lugs? As d-u-m as mud.[end if]"

table of attack-specific
target	nohit
yourself	"Surly foe: yourself? Lose fury!"
plaster	"There's too much of it, and it's too hardened." [start Means Manse]
act-ruin curtain	"It's still too thick, even though some of the plaster is peeled away."
Elmo	"[if rifle is visible]Elmo kind of has the upper hand here[else]No, he's here to help[end if]."
drama armada	"That'd be a silly way to die." [START routes]
Brother Horbert	"Yorpwald's already got a St. Lip-Split."
scripture picturers	"A shameful attempt at vandalism."
the-b	"It's like a dense metal or something. It's more likely it would make something else crack."
old giant	"You don't have a weapon big enough to take him. One won't appear in your super purse. Anyway, he's not evil, just whiny."
Pa Egg Pea	"It deserves to be ripped to shreds, but that'd just be littering." [START troves]
Leo	"[dont-hit of Leo]" [START Presto]
Rand	"[dont-hit of Rand]"
lamb	"Meanie. There's a better way to help it flee home."
walls	"Brute force is ineffective. As well as all the swears you use with the brute force. You need to wipe out the whole volt maze, not just these walls."
hogs	"If you were as strong as Rand and Leo, maybe. But you're not. Maybe you can out-think them."
trolls	"'I'd beat...' you think, before you realize you've been BAITED. You think bouncers, one scrub. That cools you down." [START oyster]
urn	"Your irrational anger turns to irrational greed when you get close enough to smack it."
boats	"Sabot? Batso!"
raft	"Yes, the stupid oars don't seem to move themselves, but that's no reason to get upset! Think!"
carps	"That sounds so--brutal. And nonspecific."
pikes	"That sounds so--brutal. And nonspecific."
trout	"This game's kind of topsy turvy, but not like THAT."
knob	"[if knob is reflexed]It's been hit already[else]Yes, but how?[end if]"
skis	"You give them a whack, and it hurts much more than it should. You wonder if love, not hate, is the answer."
span pans	"Well, you need to do something to the pans."
yapper	"I dunno. Not without scissors you don't. That yapper looks pretty tough. He could take out a rock-man or two, you bet."
ant	"You poke at the ant, which keeps it at bay. You need something more simple, violent and direct."
campiest campsite	"A loud voice booms LE FIST ITSELF! You quiver in fear at the thought of retribution from attacking anything." [START towers]
rapier repair	"[if gizmo is not off-stage]You already broke it[else]No, it must be useful for something[end if]!"
denim	"[if player has gizmo]The gizmo can't cut through[else if player has dagger]Your ragged dagger doesn't quite cut it[else]You've got nothing sharp enough[end if]. It's thickly packed denim, for sure."
sweatier wait-seer	"You find it tough to get close to his sweatiness. 'Ew...I...tears,' you say, your eyes going red."
bluster butlers	"They're probably trained to hand out ur-belts."
bonker	"As you hunker down to run at the bonker, it wavers menacingly. You're not going to beat it while it's in such good shape."
prison ropins	"[which-sharp]--but force doesn't seem the right way in, anyway."
log gaol	"[which-sharp]----but there is probably nothing beyond in the Badlands anyway."
Dr Yow	"[if Dr Yow is in prison ropins]You can't reach in, and it's a bad idea anyway[else]You imagine Dr. Yow mouthing a dry 'ow,' which isn't quite an anagram, but suddenly remember a fellow called Dry Mo, who may or may not be Dr. Yow's bodyguard. Besides, Dr. Yow is here to help you[end if]."
lone duck	"The poor thing at least doesn't have a clonk due. You can see red at this, if you want."
serpent	"Snaky yanks would backfire on you. Maybe you can calm the snake, though."
Tetris Sitter	"Rest it! (Feel free to see red at this.)"
ed riley	"'I could DRIL YEE!' Ed booms. You can just HEAR the flagrant misspelling, and it makes you see red." [START otters]
macks	"[one of]Don't hate the player, hate the game.[paragraph break]Um, sorry about that. But b[or]B[stopping]eing outnumbered, maybe you can attack their arguments instead."
Mr Lee	"Be nice. He's on your side."
eels	"Be nice. They're on your side."
hornets	"[nice-to-animals]."
snipe	"[nice-to-animals]."
snail	"[nice-to-animals]."
racoon	"[nice-to-animals]."
parrot	"No. He's here to help."
imp	"It jumps out of reach, streakily, satyrlike."
whiners	"That idea is banefully unflyable."
leopard	"Even if he weren't a hardened criminal, you'd lose. I mean, a leopard."
ocelots	"They're bigger than average. And the leopard would back them up."
satyr	"It's bigger than average. And the leopard would back it up."
badger	"It's bigger than average. And the leopard would back it up."
raptor	"Not even."
cube	"Bounce no cube."
Elmer	"[att-elm]"
Merle	"[att-elm]"
Curtis	"Aw, c'mon. Curtis is sort of bossy, but he's not that bad." [start OTHERS]
Len Craig	"Len Craig is pretty fair and balanced."
Red Rat Art Erd	"[not-even-trader]."
Dr Tera Darter	"[not-even-trader]."

to say not-even-trader:
	say "If anyone deserves it, he does. But he still doesn't. [he-she-c]'s already had enough physical abuse."

to say nice-to-animals:
	say "You didn't rescue them to kill them like this";

to say att-elm:
	say "'Die, brag brigade!' you think. But they see your evil look and say 'Venomous? Us? Move on.'"

to say which-sharp:
	say "[if player has ragged dagger]The dagger is not very sharp[else if player has gizmo]The gizmo is versatile but not sharp[otherwise]You have nothing remotely sharp[end if]"

chapter entering

rule for supplying a missing noun when entering:
	if location of player is Disease Seaside:
		try entering raft;
	if location of player is Strip of Profits and number of visible portals is 1:
		now noun is a random visible portal;
	if location of player is Cruelest Lectures:
		if e-revealed is true or the player's command matches the text "sit":
			now noun is teasing seating;
		else:
			now noun is passage.

chapter waiting

check waiting:
	if mrlp is troves:
		if player is in Drain Nadir:
			say "Solo detail? Isolated? No. Desolation." instead;
		if cur-score of troves is 0:
			say "That's the wrong sort of inaction for here[one of]. Better watch it, or snotbag nagbots or a boot-o-bot will get you[or][stopping]." instead;
		if player is in Upscale Capsule:
			say "You're...thinking hard. No really." instead;
		say "You are paralyzed by the hustle and bustle of the big city. Though how much is bustle or hustle, I really couldn't say." instead;
	if carps are visible:
		try listening instead;
	say "[randbla][line break]" instead;

chapter drinking

the block drinking rule is not listed in the check drinking rulebook.

check drinking:
	say "You don't need to drink anything in this game. Well, there's one place where you sort of need to drink something, but [if compiled code is reflexive]this game skips that[else]you already got through there[end if]." instead;

chapter climbing

The block climbing rule is not listed in the check climbing rulebook.

check climbing (this is the climb to enter rule) :
	if noun is raft or noun is dumpster or noun is chimney or noun is bench or noun is stair:
		try entering noun instead;

check climbing (this is the generic silly climbing reject rule):
	if noun is ramp: [start Means Manse]
		try going down instead;
	if noun is stair:
		if player is in Farming Framing:
			move player to Largely All-Grey Gallery instead;
		else:
			move player to study instead;
	if noun is the-b: [routes]
		say "It's too slippery and round." instead;
	if noun is godlings' lodgings: [troves]
		say "Your thought and efforts may lead you to the top, not a physical feat." instead;
	if noun is mount: [start presto]
		say "It seems as if the peaks speak with a sticky, icy tsk. You start to num considering going unto'm." instead;
	if noun is crate: [start OYSTER]
		say "This isn't a shooter or survival game. Plus the crates are too broken to lead anywhere. [if Shadier Airshed is visited]The door, on the other hand...[else]You already got through the door, anyway.[end if]" instead;
	if noun is huts: [end OYSTER]
		say "They're too tall. No good handholds. The span pans guide the only way in." instead;
	if noun is gaol: [towers]
		say "Too tall. Anyway, if it were climbable, the subsector wouldn't be the obscurest, now." instead;
	if noun is prison: [end TOWERS]
		say "It's actually a decent jungle gym, but you're not here to putz around." instead;
	if noun is Edictal Citadel: [otters]
		say "Elvira is in the Edictal Citadel, not on top of it." instead;
	if noun is wire weir:
		say "It's a long way down, and it'd take you away from your quest." instead;
	if noun is gropin' roping: [others]:
		say "It's a long way down, and you probably want to get north somehow, anyway." instead;
	say "You don't need to climb over much of anything in this game. Though in some spots, you may go up or down, or possibly IN." instead;

chapter dropping

instead of dropping a quest-item: say "You need to keep it--it's a reagent for Brother Horbert."

[?? dropping multiple items]

drop-try is a truth state that varies.

before dropping something:
	now drop-try is true;

check dropping something:
	if player is in treasure and hoop is in treasure:
		say "You aren't in the right state of mind to drop all your possessions, even for a half a move. Doing so might let you jump and grab the hoop, but you need to say, the heck with it. Or something." instead;
	if noun is a fruit:
		say "Best return the fruit to Curtis, instead." instead;
	If mrlp is Means Manse:
		say "You probably need to abscond with everything useful you can get your hands on." instead;
	say "Hero[if player is female]in[end if]es shouldn't be litterbugs[if player has purse]! Your super purse should hold whatever.[else]![end if]" instead;

chapter eating

understand the command "eat" as something new.
understand "eat [something]" as eating.

procedural rule while eating: [taking before eating]
	if noun is lamb or noun is tea tray or noun is clam or noun is oyster-x or noun is b-b or noun is lobster or noun is clear catsup or noun is deli rye:
		ignore the carrying requirements rule.

check eating (this is the general eating rule):
	if noun is a hintpastry:
		say "You'll want to put the pastry in the toaster[if toaster is in Danger Garden]back in the garden[end if], first, or it'll just be calories." instead;
	if noun is escaroles:
		say "They aren't nearly substantial enough." instead;
	if noun is casserole:
		say "Ugh. You're not sure what's in it, and you're probably thinking too much about what is. You'd have to be a gourmand to eat this, even after a heavy workout." instead;
	if noun is deli rye:
		try taking deli rye instead;
	say "That's not in a test-taste state." instead;

check eating grid:
	say "Well, maybe if you were a spy like Elmo. Rather, you should digest the information written therein." instead;

check eating fretful truffle:
	if truf-warn is false and scams is false:
		now truf-warn is true;
		ital-say "this chocolate is a cool cheat that tells you what to [if cur-score of troves is 0]type[else]think next[end if]. Are you sure you want to do this?";
		unless the player direct-consents:
			say "Okay. This warning won't appear again." instead;
	now spoilit is true;
	try troves-hinting;
	now spoilit is false instead;

rule for supplying a missing noun when eating:
	if player is in Lean Lane and tea tray is in Lean Lane:
		now the noun is the tea tray;

check eating (this is the try to eat a hint tart rule) :
	If noun is a hintpastry:
		if xrayvision is true:
			say "You're already under the influence of a pastry. XRAY something before continuing.";
		if diners are visible:
			say "The diners scoff at you eating something like that cold--well, eating that at all--and you're too embarrassed to do so[if toaster is visible]. But maybe you can put it in the toaster[end if]." instead;
		if dandier arid den is visible:
			say "'You know what would go great with that? NERD-AID!' booms a mechanical voice from the dandier arid den." instead;
		if noun is not heated:
			if toaster is visible:
				say "You figure you'd better heat that up in the toaster first. So you do. Mmm, not bad[if diners are visible]. The diners let loose some dry wit about people who enjoy something THAT unrefined[end if].";
				try inserting noun into toaster instead;
			say "You should probably heat [if noun is plural-named]those[else]that[end if] up first. Like, put it in [if player has toaster]that toaster you have[else if player is in Danger Garden]the toaster on the ground[else]some household appliance for warming pastries[end if]." instead;

check eating b-b:
	say "[if b-b is reflexed]Bleah. That'd go down terribly[otherwise]Don't think gluttonously[end if]." instead;

check eating curst crust:
	if swears < 1:
		say "[bug-report]" instead;
	if mrlp is stores:
		say "You should probably eat it when you're beyond the, er, spot." instead;
	if mrlp is not presto:
		say "The crust fell from the remains of store P. Perhaps it's best to eat it there." instead;
	if crust-warn is false:
		say "Ugh! This crust may help you out, but it may be--wait for it--distasteful and spoiled. Go ahead anyway?";
		now crust-warn is true;
		unless the player yes-consents:
			say "OK, maybe later. This warning won't appear again." instead;
	say "You wince and prepare to take a bite...";
	now spoilit is true;
	try presto-hinting;
	now spoilit is false instead;

section taste means eat

understand the command "taste" as something new.

understand "taste [something]" as eating.

the can't eat unless edible rule is not listed in any rulebook.

chapter buying

the block buying rule is not listed in any rulebook.

check buying:
	if player is in tenfold and yapper is in den loft:
		say "The papery yapper stage-whispers 'Ix-nay on the Vi-OS-ob-ay. That's not how business is DONE, here!'" instead;
	if player is in clearing:
		if player has noun:
			say "It's already yours." instead;
		say "You need to haggle. With actions. And descriptive words. And so forth." instead;
	if player is in scape space:
		if player has dollar:
			if noun is storage:
				try giving dollar to greedy-person instead;
		else:
			say "You have nothing [greedy-person] wants." instead;
	if player has tekno-token:
		say "This isn't a place of commerce." instead;
	if player is in Lean Lane:
		if wipes are in Lean Lane:
			say "You can't pay for the wipes, but maybe you don't need to." instead;
	say "There's nothing to buy, and there's nothing to buy it with[if player has ruby]. The ruby's kind of priceless[else if player has pearl]. The pearl isn't really tradeable[end if]." instead;

chapter jumping

instead of jumping:
	if player is in gyre and hump is in gyre:
		say "This is a silly anagram game, not a silly rhyming game." instead;
	if player is in Outer Route:
		say "You jump, clicking your heels and striking a ridiculous smile at the apex." instead;
	if player is in freight:
		say "You certainly are feeling jumpy right now, but--well, you want to jump towards the pale plea. And as reflexively as possible." instead;
	if player is in same mesa:
		say "You [if bench-end is not reflexed]try and jump onto the bench, but that's not quite the way. Hm[else]managed to get on the bench, and you don't need to, again[end if]." instead;
	if player is in austerer and hoop is in austerer:
		say "You jump but can't quite reach the hoop. You think you hear a voice saying 'O, ye hop!' You turn red.[paragraph break]You consider dropping your treasured possessions so you can grab the hoop, but you can't bring yourself to say the heck with them. Or, rather, you haven't, yet." instead;
	say "You try a jump but jam up[one of]. Boy, leaps lapse[or][stopping].";

chapter push and pull

the can't push what's fixed in place rule is not listed in any rulebook.
the can't push people rule is not listed in any rulebook.
the can't push scenery rule is not listed in any rulebook.

the can't pull what's fixed in place rule is not listed in any rulebook.
the can't pull people rule is not listed in any rulebook.
the can't pull scenery rule is not listed in any rulebook.

check pushing (this is the new can't push rule) :
	if noun is t-key:
		say "[if noun is reflexive]You don't know what it does[else]You'll push it once you're ready to program[end if]." instead;
	if noun is caps lock:
		if noun is not part of keyboard:
			say "On its own, you can't push a caps lock." instead;
		say "You'll push it once you're ready to program." instead;
	if noun is a person:
		say "Pushing live things is probably even less effective than attacking." instead;
	if noun is skid:
		say "You need to specify a direction to push the skid." instead;
	if noun is fixed in place or noun is scenery:
		say "You give a few hups but fail to push." instead;

report pushing:
	say "You give a few hups but fail to push.";
	the rule succeeds;

check pulling (this is the new can't pull rule) :
	if noun is a person:
		say "You don't need to corral people." instead;
	if noun is skid:
		say "You need to specify a direction to pull the skid." instead;
	if noun is fixed in place:
		say "Ullp! You can't pull..." instead;

report pulling:
	say "Ullp! You can't pull...";
	the rule succeeds;

chapter singing

the block singing rule is not listed in any rulebook.

i-sung is a truth state that varies.

lyre-dest is a truth state that varies.

check singing:
	if player is in hops shop:
		try fliptoing gins sign instead;
	if mrlp is oyster and gins sign is in lalaland:
		say "You remember your last sang-snag." instead;
	if player is in peek keep:
		say "No, this is a quieter place than the Posh Hops Shop." instead;
	if Ed Riley is visible:
		if lyre-dest is false:
			now lyre-dest is true;
			say "Unexpectedly, Ed pulls out a lyre from somewhere and yells 'LYRE! DIE!' like he's in some medieval heavy metal band or something. He's really seeing red as he stomps it to dust." instead;
		say "You don't want to push your luck. His yelling LYRE DIE and seeing red kind of weirded you out." instead;
	if clam is visible:
		say "If you could sing, it might settle the clam down. But you can't, so it doesn't." instead;
	if the-hostile is visible:
		say "That won't make [relig-mf] any less hostile." instead;
	if gins sign is visible:
		if cheat-on is true and gins sign is escanned:
			say "Knowing what you know, singing shouldn't work. You sing a song of frustration when you realize you'd need to GISN with what the settler says, here." instead;
		say "You sing the nicest song you remember about goodness and virtue. After sickening yourself into the bargain with no transport arriving, you notice the sign may've been vandalized, and plus sing/sign was a bit too easy." instead;
	if location of player is Upscale Capsule:
		say "You can't quite mimic the singer, but maybe you could tweak his singer-ness. You can't move to artists['] straits with your job. You're more suing than 'I sung' now." instead;
	if mrlp is troves:
		say "No hippy trippy blues song about being poor here, if you please. And you will--you're not in power, yet." instead;
	if player is in Outer Route:
		say "[one of]'Oh sappy! So happy!' The birds go chürp chürp chëëp chëëp[or]Best not encourage cheeps-speech. The dirt itself might burst into song[stopping]!" instead;
	if player is in same mesa:
		say "You look at the scripture picturers for clues, and swirling in the design you see [dssd]. Hmm. You don't know any songs like that." instead;
	if player is in cleric circle:
		say "You don't know any appropriate songs, here." instead;
	say "[randbla][line break]" instead;

chapter kissing

does the player mean kissing a person: it is likely;
does the player mean kissing the skis: it is very likely.

[!! kissing a non-person]

rule for supplying a missing noun when kissing:
	if skis are visible:
		now noun is skis;

the block kissing rule is not listed in any rulebook.

understand the command "kiss" as something new.

Understand "kiss [thing]" as kissing. [needed to kiss skis]

before kissing:
	if player carries the noun:
		say "Moisten no items." instead;
	if noun is admirer:
		say "You are not a lousy enough kisser to discourage [him-her]. Perhaps there's another way to sour [if player is male]her[else]him[end if] on you." instead;
	if noun is bonker:
		say "Not even with a good dental plan." instead;
	if noun is duck:
		say "It's cute and all, but it also doesn't trust you." instead;
	if noun is Dr Yow:
		say "[he-she-c] is not the touchy feely kind." instead;
	if noun is agnostic:
		say "Okay, we're close to creepy territory here.";
	if noun is Elvira:
		say "'[if player is female]Superwoman? Wane, rum sop![else]Me? Spurn a superman?[end if]' She flatters you for admitting you were wrong about her, not recognizing she was socially out of your league. As she talks ('I lure! I rule!') suddenly you realize what your quest was about. Your test run showed SHATTER-THREATS was not enough...you are talked into being [if player is female]Chuck-Ms.-Schmuck[else]Mr. Arty Martyr[end if] for a newer better Yorpwald. The last thing you hear is Elvira saying: 'A big help? Pah! Bilge!'";
		get-dead instead;
	if noun is not skis and noun is not a person:
		say "That can't really respond to your affection." instead;
	if noun is macks:
		say "[if player is male]That'd be subtle trolling, but you might not stay conscious long enough to enjoy it[else]You don't want to get their attention that way[end if]." instead;
	if noun is Gretta:
		say "You imagine her all 'Tricky try. Ick.'" instead;
	if noun is haunter:
		say "The ghost can't respond to affection." instead;
	If noun is aunt tuna:
		say "That would be cruel to poor Tortu. She would blackmail him into kissing her long after you left." instead;
	if noun is trolls:
		say "Bad idea." instead;
	if noun is clam:
		say "It could use a bit of friendship, but not like that." instead;
	if noun is the player:
		say "You feel as good-looking as ever after kissing yourself." instead;
	if noun is an animal:
		say "Yay you for loving animals. Or claiming to." instead;
	if noun is guardian:
		say "Creeping out whatever's blocking your way won't work." instead;
	if noun is skis:
		try fliptoing skis instead;
	say "[if noun is a person]This is not a romance game[otherwise]There's only one possible inanimate object you could kiss, if you think about it[ski-la][end if]." instead;

book common irregular verbs

chapter xyzzying

xyzzying is an action out of world.

understand the command "xyzzy" as something new.

understand "xyzzy" as xyzzying.

carry out xyzzying:
	say "That word is a mess and holds absolutely no power for you[if player is in dusty study and cur-score of Means Manse is 0]. Hopefully you'll find why soon enough[else]. Trust me, I checked all the other twenty-nine combinations[end if].";
	the rule succeeds;

chapter knocking

knocking is an action applying to nothing.

understand the command "knock" as something new.

understand "knock" as knocking.

carry out knocking:
	if player is in Lapsin' Plains or player is in study:
		if urgent Gunter is off-stage and stuff-found is 3:
			say "Knock knock! / Who's there? / An adventurer who should probably just OPEN the door instead." instead;
		say "A hollow CONKK, but nothing more. You may need to try other actions here." instead;
	if player is in gates stage:
		say "It'll be a bit tougher than that." instead;
	say "Knock knock! / Who's there? / An adventurer in a room with no doors!" instead;

chapter giving to

the block giving rule is not listed in any rulebook.

check giving something to:
	if second noun is a fightin person: [presto]
		say "Bribery won't end this fight." instead;
	if second noun is bruisin:
		if noun is crust:
			say "Even he isn't gourmand enough to enjoy that." instead;
		say "He's not materialistic. He just wants a good dust-up." instead;
	if second noun is a guardian: [towers]
		if second noun is serpent:
			say "You are present enough to present a present--but which present is most important or effective in this area? That is the question.[paragraph break]Plus, the whole no hands thing.";
		if second noun is pirates:
			say "'Tips are...' one says and shakes his head. You blush red at the meager gift you offered." instead;
		say "No response. It looks like a gift won't be enough to get by. But you won't need one, based on what you've done so far." instead;
	if second noun is agnostic:
		if Dr Yow is not in lalaland:
			say "The agnostic seems like [he-she]'d rather have the gift of knowledge." instead;
		if noun is settler:
			say "The agnostic seems impressed, but [he-she]'s more mechanically than magically inclined." instead;
		unless noun is gizmo:
			say "That's not technical enough for the agnostic." instead;
		continue the action;
	if noun is flowerpot:
		if second noun is agnostic, say "He's more physical sciences than biological." instead;
		if second noun is Dr Yow, say "[one of]Dr. Yow puts the flowerpot on [his-her] head and angles it several ways, gives it back, smiles and shrugs[or]You already tried that[stopping]." instead;
		if second noun is a guardian, 	say "You remember Ornate Atoner Renato's friend was across the water. So it can't be anyone guarding things over here." instead;
	if second noun is Curtis: [others]
		say "Curtis shrugs. That won't help him with his big fruit empire." instead;
	say "Hm. Nah. [if second noun is plural-named]They don't[else if second noun is female]She doesn't[else if second noun is male]He doesn't[else]It doesn't[end if] want that--or, it seems, anything of yours." instead;

chapter push and pull to

Understand "pull [something] [direction]" or "pull [something] to [direction]" as pushing it to.

yak-sol is a number that varies.

check pushing the skid to (this is the yak-oof rule):
	if yak is in lalaland:
		if player is in hacks' shack:
			say "You pushed the skid around enough." instead;
		say "The skid's served its purpose, and maybe it's time to remake it as a disk back in the shack. You go back. Jack.";
		now skid is in shack;
		go-back shack;
		the rule succeeds;
	if the room second noun of location of player is nowhere:
		continue the action;
	if yak is on skid and location of player is phat path and second noun is north:
		say "The yoke doesn't quite fit through the door. It does, however, snap off and the yak looks freer, aliver, almost happy. It decides it's had enough of the leaf and, with a nod, walks off to a yak realm, perhaps in search of more malarkey. Maybe [if lamb is in lalaland]near the lamb you rescued[else]somewhere near the poor lamb's home[end if].";
		now yak is in lalaland;
		now yak-sol is 1;
		reg-inc;
		pad-del "Leo and Rand";
		now skid is in hacks' shack;
		now drab yoke is in hacks' shack;
		move player to hacks' shack;
		the rule succeeds;
	if player was in Char Arch and second noun is south and yak is on skid:
		try going south instead;
	if player was in gyre:
		if second noun is west:
			if hump is visible:
				say "You need to get over the hump." instead;
			else:
				say "The way west [if hoop is in lalaland]got cleared out when you jumped for the hoop[else if austerer is unvisited]looks like a dead end, nothing where your sled would need to go[else]was pretty much clear. You can't imagine needing to bring anything there[end if]." instead;
		if second noun is east:
			if plebe is in gyre:
				say "The plebe stands strong. You don't have the heart to run it over." instead;
			say "There's nothing in the Marines Seminar Remains. Pushing the sled there would be a waste of time." instead;
	if player was not in shack:
		say "[if yak is on skid]Oof! Urg! The yak makes the skid a bit heavy, but you manage.[else]The skid grinds across the snowless ground with slowness.[end if]";
	continue the action.

After going a direction (called way-pushed) with the skid:
	if way-pushed is north and location is hacks' shack:
		say "The skid barely fits as you go in the door.";
	if way-pushed is south and location is phat path:
		say "The skid barely fits as you go out the door.";
	continue the action.

chapter thinking

thinko is a truth state that varies.

understand "ponder" as thinking when pernod is not visible.

instead of thinking:
	if player is in study:
		if stuff-found < 3:
			say "You begin [one of]a[or]another[stopping] deep think, [one of]all about Elvira's rise to prominence and how she assured everyone that she could do wordplay if she were bored, and she was sure it was the best you could do, but really, there was no CREATIVITY at the heart of it, and the n-factorial possibilities--and that tagged gadget to give clues was a bit TOO convenient. It passes the time[or]but mulling and rehashing is no fun[stopping].";
			now thinko is true instead;
		else if Gunter is off-stage:
			say "Hard to think with that knocking." instead;
	if player is in econ cone and pernod is in econ cone:
		say "No, you need to think a little more soulfully." instead;
	else if mrlp is troves:
		say "Yes, how you think is extra important here." instead;
	else if mrlp is towers and topside is visited:
		say "Ornate Atoner Renato's advice about people--if not things--being too complex for just five letters is stuck in your head." instead;
	if mrlp is demo dome:
		try requesting the score instead;
	say "Nothing immediate comes up. If you need help, just say HINT. K?";

chapter touching

check touching:
	if noun is lamb:
		say "It's a bit too scared. Too scared to flee where it needs to go." instead;
	if noun is plaster or noun is act-ruin curtain:
		say "Seems a bit hollow but not enough to bust through." instead;

chapter listening

the you can hear stuff some places rule is listed before the block listening rule in the check listening to rulebook.

to say a-r:
	say "[one of]Ingera[or]Reagin[or]Rigena[in random order]"

to say next-sonancy:
	say "[if hurt hog is in lalaland]the final step[else if bent ewe is reflexed]the hurt hog[else]the hog and the bee[end if]"

to decide whether can-hear-posh:
	if player is in browse bowers, yes;
	if player is in econ cone and praise is in lalaland, yes;
	no;

before listening (this is the you can hear stuff some places rule):
	if player is in dusty study: [means manse]
		if dusty study is not lit, say "Nobody's going to whisper a hint to you in the dark." instead;
		say "[if Gunter is in lalaland][randbla][else]Nothing, except... (knock, knock, knock.)[end if]" instead;
	if player is in Farming Framing or player is in Largely All-Grey Gallery, say "Merciful quiet, for the moment." instead;
	if player is in sonancy canyons, say "[if raptest patters are not in lalaland]An over-cheery voice: 'Thou wit!'[paragraph break]A familiar voice...yours... 'Who, I? Tut!'[paragraph break]'Hut! I wot...'[paragraph break]You know, it's tough to know the best way to ignore this sort of flattering nonsense, but the right word generally blocks it out quickly enough.[else]The raptest patters are gone, and you can fully focus on [next-sonancy].[end if]" instead;
	if sob ever verbose is visible, try examining sob ever verbose instead; [troves]
	if player is in Boarded Roadbed:
		unless what-a-bee is reflexive and bee's head is reflexive, say "Someone helping someone else find their way around. 'How to get there? [one of]I'd veer...'[or]Eve, rid...'[or]Vie, Red!' [in random order]You see red a bit at getting no direct help, yourself." instead;
		say "The bee keeps buzzing, disrupting your thoughts. You'll need to deal with it.";
	if player is in rathole or player is in Bustle Sublet, say "[if talk-quiet is false]You shut off the random gritty dialogue with HUSH[else]Actually, you can't help but hear gritty dialogue[end if]." instead;
	if can-hear-posh, say "[if talk-quiet is false]You shut off the random posh dialogue with HUSH[else]Actually, you can't help but hear posh dialogue[end if]. Anyway, no more badgering beggar din." instead;
	if player is in Upscale Capsule, say "[if noise is in Upscale Capsule]You can't help but hear the knocking. Which prevents you working on your big new REGION[else if salt is in lalaland][one of]You listen closely to 'I'd Cede.' But you see red at the memory of Eddie C.[']s followup, a vapid rehash, I Ceded[or]Oh man, that part that gets your eyes watery is up next[or]The song's chorus. Five notes. C, D, E, D, E... 'I...' just right to get your eyes red. There's just a little more[or]Three notes: E, C, E, '...did.' It gets you. You know your eyes are red now. Boy[cycling][else]. White noise, it is on. Whee[end if]." instead;
	if mrlp is presto, say "[if cur-score of presto is 0]A shot. Sort of[else]You don't hear anything congruent to what you've needed to say in this area, which is a good thing[end if]." instead; [presto]
	if Rand is visible and Rand is washed up:
		say "You horn in on Leo and Rand's small talk, and they open up to you a bit.";
		try asking a random washed up person about "rannygazoo" instead;
	if player is in shack, say "Classic techno music from the Baleets: 'Be Stale.'" instead;
	if player is in Loftier Trefoil: [towers]
		if number of visible warriors is 1, say "Rodney's intimidating enough, he can keep this place quiet." instead;
		if number of visible warriors is 0, say "Regular tavern bustle and storytelling once again, but nobody you need to talk to." instead;
		say "Rodney and his not-so-merry men stand impassive, united." instead;
	if reed's ale is visible, say "[el-la-f] mutters and moans how [one of]Dr. Eleesa's motivational techniques seem so easy[or]E-dealers have it so easy[or]Lad Reese is an upstart intent on stealing commissions[or]Dre Eleas's methods aren't to be trusted[in random order], turning red until taking another swig at the Reed's Ale." instead;
	if ingrates are visible, say "You see red as the ingrates['] voices sound like tin gears." instead;
	if diners are in location of the player, say "An argument over whether Derin's is a good place to eat. Pro and con both leave you seeing red." instead;
	if player is in Scope Copse and butlers are in Scope Copse, say "The butlers loudly banter 'Let's rub (you) the wrong way!' You see red." instead;
	if player is in Shaven Havens, say "You think you hear NEVAHs, but that might just be internal melodrama." instead;
	if player is in topside, say "An unconvincing voice moans 'Stop! Die!' but it's not very effective." instead;
	if player is in Obscurest Subsector:
		if Dr Yow is rowdy, say "Dr. Yow is yacking away noisily." instead;
		if Dr Yow is wordy, say "Dr. Yow is yacking away rapidly." instead;
		if Dr Yow is in ropins:
			if Dr Yow has been rowdy or Dr Yow has been wordy, say "Dr. Yow is silent once again." instead;
			say "Dr. Yow moans [he-she] could hack less shackles." instead;
	if ingrates are visible, say "The ingrates go red from [one of]complaining about [i]Geraint's[r] stupidity[or]describing how tacky [i]Nate's rig[r] is[or]describing how tacky [i]Tena's rig[r] is[or]having the [i]rangiest[r] list of complaints you've heard[or]babbling about how they've never been to [i]Tangiers[r][or]relating his horrible education at [i]St. [a-r][r][or]explaining what sane grit they have[or]a cloud of red nitre gas that passed a day ago[or]claiming you think you're a saner git than them[in random order]." instead;
	if player is in outer route, say "The rapier repair machine [if dagger is in lalaland]chugs[else]fizzles[end if]along." instead;
	if admirer is visible, say "It's a bit embarrassing, really. Just generic praise that never feels right." instead;
	if atheists are visible, say "The atheists are really spelling out their logical arguments against any sort of God[if wait-seer is visible]. In light of this, the wait-seer doesn't seem to be the least tired[end if]. Maybe you could learn more details talking to the atheists." instead;
	if wait-seer is visible, say "The wait-seer is so serene, you almost can't waste ire on him blocking you. Almost. Maybe even saying random stuff might help a hint slip." instead;
	if player is in rawest waters, say "A scrawny swan cry. But not the Sawn Swan. You hope." instead;
	if player is in Achers' Arches, say "Silence--you wouldn't dare sin to upset the sardine with ear dins. OR WOULD YOU." instead;
	if player is in Disease Seaside, say "You hear voices from the boats talking about great accomplishments. The raft makes unpleasant, disturbing noises." instead;
	if player is in lode and clam is in lode, say "You hear the clam snapping." instead;
	if player is in freight, try examining the pale plea instead;
	if player is in anger range and carps are in lalaland and haunter is off-stage, say "A cry. 'Eh ... a runt...' you turn red on hearing it." instead;
	if player is in Boredom Bedroom, say "The dead air inspires no rad idea." instead;
	if old giant is in lalaland and player is in Same Mesa, say "Nice to have silence with the giant gone." instead;
	if tokers are visible and nestor is visible, say "[if nestor is visible]Conversation from the tokers you don't want to listen TOO closely to[else]The tokers bemoan their lost friend[end if]." instead;
	if nestor is visible, say "Nestor periodically mumbles about his lost buddies." instead;
	if lecturer is visible, say "You're hearing enough without trying, sadly." instead;
	if e-s is visible, say "A roar of angry undefinable words swirls from the, er, spot." instead;
	if rifle is visible, say "Awkward silence, what with Elmo holding that rifle." instead;
	if player is in Posh Hops Shop, say "[if tunes are reflexed]Silence. Awkward silence. An occasional cough.[otherwise]The jukebox notches technos (though a mere six remixes) with an anti-bore iron beat. Rap is par, too.[end if]" instead; [oyster]
	if carps are visible, say "You can't help but listen to the carps['] and pikes['] immature, nasty jibes." instead;
	if eeks are visible, say "You hear eeks. Arcing caring. Weeps sweep. 'Eek! Eek! Eek!'" instead;
	if aunt tuna is visible, say "Aunt Tuna is humming something tuneless as she goes about her business." instead;
	if player is in den loft and dialer is in den loft, say "[if pins are in den loft]The dialer is quiet. Your orders to DERAIL must've put it out of commission. Maybe you could fix it[else]You hear a hum from the dialer[end if]." instead;
	if player is in same mesa:
		if old giant is in same mesa, say "Those [i]tirades[r] from the giant. [if bench-end is reflexive][one of]Though he gets staider.[or]'Dear, it's...' he trails off.[or]'Sit. Dare!' he commands. 'Rad site! Rest aid!'[or]'I stared...'[or]He gestures to the bench, turning red. 'I'd rest a...'[or]'Die, rats! Rats, die!' he moans, to nobody in particular.[or]'A direst, aridest stare! I'd...'[or]'I stared! I'd stare!'[or]'It's a red...' he says, actually going red.[or]'Drat, [']e is!' cries the giant, turning red.[or]He explains what left Ed astir, turning red.[or]He rues the loss of the bench's side-art, his eyes turning red.[in random order][else if elbow is reflexive]Though his swinging elbow is more dangerous now.[else]All about that book, Rude [']N Nuder.[end if]" instead;
		say "'Mama sees me as...' Irrelevant stuff." instead;
		if the-b is visible, say "[one of]You hear people crying 'The Bean has landed!'[or]'If the bean was a hat, our hero would be a HAT-BEEN.' You see red at the pun.[or]'Ban THEE then, [a-b]!' cries someone.[or]'How do we pull him/her/it without?' / 'Uh, tow it?'[stopping]" instead; [routes]
	if player is in cleric circle, say "Ol['] Peg's Gospel is singing Our Spire Superior. Or Uh, Peter, Here Put the Pure Up There." instead;
	if player is in ripe pier, say "Someone calling out they need help to go ABROAD." instead;
	if player is in Loftier Trefoil, say "Ugh. Sir Rodney is a dry one, barking out complaints that make you see red." instead; [towers]
	if player is in Danger Garden, say "[if bonker is visible]A menacing silence spews from the bonker. Or maybe it's just your imagination[else]Honk, honk[end if]." instead;
	if player is in lost lots and sporties' ripostes are in lost lots, say "The sporties['] ripostes [one of]discuss ripe sots[or]plan a trip to TIP ROSE'S[or] boom 'I SPOTS [']ER'[or]reference spites, or sore tips[in random order], and you see red at the reference." instead;
	if dandier arid den is in location of player, say "You're dreadin['] the next mechanical sales pitch from the dandier arid den." instead;
	if natives are visible:
		say "The natives' babble doesn't stop.";
		try objasking natives about natives instead;
	if Ed Riley is visible, say "Ed Riley doesn't seem to make any noise. He just blocks you west." instead; [otters]
	if macks are visible, say "Ick, man. Mackin[']. You really don't want to pay attention to the details, but you get the general impression." instead;
	if player is in bran barn, say "You hear morose mooers you can't see." instead;
	if whiners are visible, say "The volume and speed they're at, the actual words don't matter. You need to bite the men's style somehow." instead;
	if sly imp is visible, say "You think you hear him saying something mean, and you're upset you might've, and you're upset he didn't. He's just being too subtle right now for you to think clearly." instead;
	if player is in Inclosure, say "Elvira's laughter still seems to echo, with a creator reactor in the distance, and an occasional shrike shriek, and an ominous BEWARE: WAR BEE." instead;
	if player is in rustic citrus:	[others]
		if pagers are visible, say "Annoying, low-tech beeping. Sounds like--well--pagers. You don't have the patience to find them all, though." instead;
		say "Curtis is mumbling about some perceived slight." instead;
	if sorer bogey is visible, say "'I am the sorer bogey!' you hear. '[one of]Be sorry, ego[or]Oy! Erg! Sober[or]Ye sorer gob[in random order]!' it cries, as you see your skin redden." instead;
	if barren cries are visible, say "The barren cries are sour and bitter and tiny." instead;
	if player is in clearing, say "Selly yells. [randbla][paragraph break][if mango is off-stage]Amidst the hustle and haggling, a small voice is saying, 'Go, man!' You see red as it begins to nag mo[']. Where? How?[end if]" instead;
	if pugnacious plant is in location of player, say "The pugnacious plant is making an aggressive bb-arr-uh noise and seems to turn red in the process." instead;
	if player has s-i or player has s-c, say "A low buzzing from your [if player has s-c]sonic coins[else]sonic icons[end if]--odd. What could they do, or buy?" instead;
	if mrlp is demo dome, say "It's nice and quiet. It [i]IS[r] a museum." instead; [demo dome]
	say "The air! Hear it! Silent." instead;

chapter smelling

before smelling (this is the you can smell some stuff some places rule):
	if player is in study and study is dark, say "That worked in Hitch-Hiker's Guide to the Galaxy, but not here. That'd be copy-catting." instead; [means manse]
	if player is in study and Gunter is in lalaland, say "Bean soup. Subpoena is near." instead;
	if player is in Farming Framing, say "Thankfully, you cleaned the tables before flipping them, so you smell no table scrap." instead;
	if player is in strip: [stores]
		if store y is in strip, say "Seawater scents from Store Y." instead;
		if oyster-x is in strip, say "Seawater scents from the oyster." instead;
		if roved is true and hoster is visible, say "A mix of nice smells from the hoster where Store H was." instead;
	if player is in cruelest lectures, say "It smells depressingly antiseptic here." instead;
	if tokers are in location of player, say "You smell something sweetish coming from the tokers I can't quite describe because, well, -ahem-. I'm for the right to do that sort of thing, on principle, but I don't." instead;
	if player is in adobe abode, say "The lingering pipe smoke that made the soot is actually agreeable. The ashtray itself doesn't smell especially strong[if pipe soot is in abode], so the pipe soot probably won't burn your hands if you can take it[end if]." instead; [routes]
	if seed pit is visible, say "The seed pit smells a bit musty." instead;
	if player is in ripe pier, say "It smells of adventure and going [i]abroad[r]--or, at least, a bit away from the brackish, salty whiffs of trash." instead;
	if player is in Loather Rathole or player is in Bustle Sublet, say "Eew-gas sewage. Skint-stink." instead; [troves]
	if player is in Drain Nadir, say "Ew--mild mildew. A mustier semi-rut." instead;
	if player is in Browse Bowers or player is in Econ Cone or player is in Upscale Capsule, say "Perfumed. Dump-free." instead;
	if noun is ether, say "Nontoxic, but still potentially dangerous, [if ether-try is true]since[else]if[end if] someone's hiding there." instead;
	if mrlp is presto, say "[if cur-score of presto is 0]Things turn to ash in your nose[else]You don't smell anything that'd make you say what you've needed to say in this area, which is a good thing[end if]." instead; [presto]
	if player is in a mazeroom or player is in Unwary Runway, say "'You smell a gefilte and think 'get a life.'" instead;
	if player is in shack and casserole is in shack, say "That casserole doesn't smell very good, but it's not toxic." instead;
	if player is in Posh Hops Shop, say "You catch a whiff of some mokes['] smoke." instead; [oyster]
	if player is in Disease Seaside, say "Say, spare sea spray." instead;
	if player is in Achers' Arches and sardine is in achers' Arches, say "Sea rind." instead;
	if aunt tuna is visible, say "Antiseptic spice taint." instead;
	if player is in Rascal Craals, say "This situation only stinks in general, not literally." instead;
	if player is in Den Loft, say "Old heat. Loathed hot lead." instead;
	if ingrates are in location of player, say "Nitre gas. Or niter gas. You forget how it's spelled, and trying to remember makes you see red either way." instead; [towers]
	if leak lake is visible, say "The overwhelming smell of kale is not offensive, but you'd like to get by it." instead;
	if player is in Mesprise Premises, say "Noodles so olden." instead;
	if player is in Outer Route, say "[one of]You smell something generically nice from the campsite nearby and say 'Ahhhh! Nature!' a bit too loud. Ugg. You won't do that again.[or]You wonder to yourself if that's tarragon or rosemary or perhaps a hint of lavender... no, no, no.[or]I ran out of stupid jokes for this. Get on with the game, here.[stopping]" instead;
	if dandier arid den is in location of player, say "The Nerd-Aid from the dandier arid den smells suspiciously like the very red Rind-Ade drink." instead;
	if deli rye is visible or noun is deli rye, say "The deli rye smells good, but Ed won't share." instead; [otters]
	if player is in frontage, say "You can [if macks are visible]still [end if]smell the macks['] Cool-Gen Cologne, from that coy-hued bottle." instead;
	if player is in alcoves, say "A clove, likely from one alcove." instead;
	if player is in loop pool, say "Salt Water. Wet, astral." instead;
	if player is in Inclosure, say "Vast vats['] sulfinyl reek clearly eliminates all hope of silly fun." instead;
	if mrlp is others:
		if player is in rustic and slime is in rustic, say "The slime actually smells...nice, like dishwashing detergent." instead;
		say "Smells, savory, vary so." instead;
	say "Aroma-o-rama? Nothing's [i]tons[r] nigh." instead;

chapter sleeping

before sleeping:
	if player is in study, say "[if Gunter is off-stage]But you just woke up![otherwise]Not with that knocking.[end if]" instead;
	if player is in cripple clipper, say "This is no dreamboat." instead;
	if mrlp is troves:
		if player is in Boredom Bedroom, say "You don't have time to dream of titanium golf clubs or overpriced alcohol or all the things you should have been dreaming about all these years. Slacker." instead;
		if player is in Upscale Capsule, say "You got here by doing nothing while conscious, not doing nothing while unconscious." instead;
		if player is in Browse Bowers or player is in Econ Cone, say "In a public place? Worse, in an upscale public place? How shocking!" instead;
		say "Nonsense! Spoiloplis is no place for sleepers. Unless they are really energetic about why they need sleep. Maybe you can sleep somewhere else. But not now." instead;
	if mrlp is presto:
		if player is in hacks' shack:
			if futon is in hacks' shack:
				unless cpuready, say "Sleep on the futon? Wouldn't be fun to. You aren't even exhausted from assembling the computer! Yet." instead;
				if slept is true, say "You've had enough comforts from cots to do the programming you need. You might re-wake weaker." instead;
				say "You feel smarter the moment you lie down on a lump you realize must be an armrest. So it's definitely more practical than some oaf's sofa. During this purest rest-up, you osmose the max-sleep examples, and even the smartest mattress would only have given smatters of what your subconscious soaks up from the comfort of the cot. The sleep peels away your fatigue and doesn't even leave an ague fit in return. 'Real day already?' you remark. 'Up, coder! Produce!' Rested, you desert the futon.";
				reg-inc;
				pad-del "sleep";
				now speel is in lalaland;
				now slept is true instead;
				say "You'll sleep on the futon when you need to." instead;
			say "You don't have anything to lie down on yet." instead;
		if shack is visited and slept is false, say "Only the shack seems to be a safe place to sleep, here." instead;
	if mrlp is oyster, say "You feel too inclined towards action for that." instead;
	if slept is true, say "[one of]You already found a place to sleep, so I'll give you generic sleep-rejects from here.[or][randbla][stopping]" instead;
	say "[one of][sleep-reject].[or][randbla][stopping]" instead;

to say sleep-reject:
	if slept is true:
		say "You found the one place in the game where you needed to sleep";
	else if location is outie:
		say "Sleeping outside is dangerous. You'd need somewhere protected";
	else if mrlp is means manse:
		say "You won't need to sleep for a long while.";
	else if mrlp is presto and shack is unvisited:
		say "It'd be nice to have somewhere to sleep after tumbling through the gyre";
	else:
		say "Maybe you'll find somewhere more hospitable later";
	say ". But otherwise, you'll get a bunch of silly random responses you may or may not find entertaining";
	pad-rec "sleep";

chapter taking

instead of taking a person:
	if noun is the player:
		say "I'm the only one who gets to be self-referential, here. Got it? Good." instead;
	if noun is the macks:
		say "They're the pick-up artists, here." instead;
	if noun is Gretta:
		say "You might be worse at picking Gretta up than the macks." instead;
	if noun is eels:
		say "[if power-back is true]They already gave you a charge[else]That might get you the wrong sort of charge[end if]." instead;
	say "Lifting [if noun is plural-named]people[else]a person[end if] or something [if noun is plural-named]people[else]person[end if]-sized is too heavy for your superpowers. Even if your name happens to be Kate."

chapter looking

section under

chapter look under

look-under-warn is a truth state that varies.

check looking under:
	if look-under-warn is false:
		ital-say "looking under is equivalent to SEARCHing unless the game is explicit. That way you can look inside, around and under in just one move. Let's do that now.";
		now look-under-warn is true;
	else:
		say "(just searching instead)[paragraph break]";
	try searching noun instead;

section behind

understand "look behind [thing]" as searching.

chapter examining

does the player mean examining a direction: it is very unlikely.
does the player mean entering a direction: it is very unlikely.

before examining (this is the mark as examined rule):
	if noun is inside:
		say "You need to specify the object you wish to look inside. You can also probably just X/EXAMINE it." instead;
	if noun is a direction:
		say "Looking in directions isn't supported in this game. Best to go where you want to look, or if a building is to the north, say X BUILDING instead." instead;
	if noun is not a thing:
		say "Try examining less abstract things instead." instead;
	if the noun provides the property examined:
		now noun is examined;

after examining:
	if noun is readable:
		now last-read is noun;
	continue the action;

chapter tying it to

check tying it to (this is the keyboard and key rule) :
	if noun is second noun:
		say "Tautology? Got ya, lout!" instead;
	if noun is hard drive:
		try tying second noun to noun instead;
	if second noun is caps lock:
		try tying second noun to noun instead;
	if noun is caps lock and second noun is keyboard:
		if caps lock is not part of the keyboard:
			say "'Pokey Key-op? Yep. Ok.' you say as you fit it in. No more in-caps panics.";
			now caps lock is part of the keyboard instead;

chapter waving

understand the command "wave" as something new.

understand the command "wave [something]" as something new.

understand "wave" as waving hands.

instead of waving hands:
	say "A view! I wave!" instead;

chapter swearing

instead of swearing obscenely:
	unless qbc_litany is table of no conversation:
		say "You're classier than that." instead;
	if mrlp is presto:
		if cur-score of presto is 0:
			say "That's too strong for here. But you have the right idea." instead;
		if hacks' shack is visited:
			say "While computer hackery involves a lot of spontaneous swearing at times, it won't help you, here. The interjective part of your journey is [if keyboard is off-stage or censer is off-stage]mostly [end if]over." instead;
		if plebe is visible:
			say "The plebe perks his ears up, but maybe that was too strong. Perhaps you should use a more general one--or one the plebe isn't expecting." instead;
		if hogs are visible:
			say "The hogs snicker at HOW you said that swear. They're the sort that get fazed by lame swears." instead;
		say "No, that's too strong for here. You've been doing quite well with the tame stuff." instead;
	if player is in Lean Lane:
		say "You don't want Aunt Tuna to perform a tsk task." instead;
	if location of player is cleric circle:
		if curse-warned is false:
			now curse-warned is true;
			say "Only, uh, unholy. You can curse anywhere else except here without repercussion." instead;
		say "A voice booms SACRILEGE? RAGE! SLICE! You feel horrible pain, and the last thing you hear is CRUDE? CURED!";
		get-dead;
		the rule succeeds;
	if player is in posh hops shop:
		say "This is the place for it, but you can't bring yourself to be heard." instead;
	if agnostic is in location of player:
		say "Some example you are." instead;
	if player is in frontage and macks are in frontage:
		say "The conversation is horrid enough." instead;
	if player is in actionless coastlines or player is in Strati Strait:
		if lois is in location of player or hostile-is-he lot is in location of player:
			say "Oh, the self-righteous backlash you'd get from hostile folk nearby!" instead;
	if player is in reclusion inclosure:
		say "Yup. It's gotten REAL. But that won't help." instead;
	if player is in alcoves and elmer is in alcoves:
		say "Merle and Elmer sniff faux-piously." instead;
	if player is in cripple clipper:
		say "Siphon no pish on-ship." instead;
	otherwise:
		say "[randbla][line break]";

to say deth:
	let temp be a random number from 1 to number of rows in table of death messages;
	say "[if showtabname is true](table of death messages)[end if][blurb in row temp of table of death messages]";

curse-warned is a truth state that varies.

to say om:
	say "[if Rand is off-stage and dart is off-stage]one or two mild swears[else]one more mild swear[end if]";

instead of swearing mildly:
	if mrlp is presto:
		if hogs are visible:
			say "The hogs groan, as if to say, don't try that again. Maybe another lame swear will set them off." instead;
		say "[if dart is off-stage or Rand is off-stage]Well, maybe [om] would work here.[else if plebe is visible]The plebe tries hard not to snicker.[otherwise]You had your chance for a swear. And you took it. Yay, you.[end if]" instead;
	try swearing obscenely instead;

understand "bastard" as swearing mildly.

pointing it at is an action applying to two things.

understand the command "point [something] at [something]" as something new.

understand "point [something] at [something]" as pointing it at.

does the player mean pointing the settler at: it is very likely.

does the player mean pointing the settler at the player: it is very likely.

point-warn is a truth state that varies.

carry out pointing it at:
	if noun is patcher:
		try zaping second noun instead;
	if noun is not settler:
		say "You can really only point [if player has settler]the settler[else]one thing[end if] at other objects." instead;
	if point-warn is false:
		ital-say "it's much easier to SCAN objects instead.";
		now point-warn is true;
	try scaning second noun instead;

book specific irregular verbs

part settler stubs

chapter cting

[* c=t=cheat=teach=push tcb/cheat button]

cting is an action applying to nothing.

understand the command "c/t/cheat/teach" as something new.

understand "c" and "t" and "cheat" and "teach" as cting.

carry out cting:
	if settler is not visible:
		say "[reject]" instead;
	try pushing tcb instead;

chapter sbing

sbing is an action applying to one thing.

understand the command "sb" as something new.

understand "sb" as sbing.

understand "sb [thing]" as sbing.

sb-cur is a truth state that varies.

carry out sbing:
	if debug-state is false:
		say "[reject]";
	d "SBing: [noun].";
	if noun is a person and noun is washed up: [leo/rand]
		do nothing;
	else if noun is reflexed:
		if noun is not dialer and noun is not bench:
			say "You fiddle with the settler, but on each setting, it emits a BEEEOOOP which suggests there's nothing left to do here." instead;
	now sb-cur is true;
	let z be cheat-on;
	now cheat-on is false;
	try scaning noun;
	if the rule failed:
		the rule succeeds;
	if a-text of last-scanned-thing is b-text of last-scanned-thing:
		say "Nothing changes between cheat/teach and regular mode.";
		now sb-cur is false;
		the rule succeeds;
	now cheat-on is true;
	try scaning noun;
	now cheat-on is z;
	now sb-cur is false;
	the rule succeeds;

chapter ssing

[* SS scans an object forcing no-cheat mode]

ssing is an action applying to nothing.

understand the command "ss" as something new.

understand "ss" as ssing.

understand "ss [thing]" as ss0ing.

understand the command "shake" as something new.

understand "shake [thing]" as ss0ing.
understand "shake" as ss0ing.

rule for supplying a missing noun when ss0ing:
	if player has settler:
		now noun is settler;

ss0ing is an action applying to one thing.

carry out ss0ing:
	if noun is not settler:
		say "That doesn't really work." instead;
	try ssing instead;

carry out ssing:
	if settler is not visible:
		say "[reject]" instead;
	try switching on the settler instead;

chapter sying

[* SY scans an object forcing cheat mode]

sying is an action applying to one thing.

understand the command "sy" as something new.

understand "sy" as sying.
understand "sy [something]" as sying.

carry out sying:
	if player does not have settler and settler is visible:
		try taking settler;
	if player does not have settler:
		say "You need the settler for this shortcut." instead;
	now cheat-on is true;
	try scaning noun;
	if cheat-on was false:
		say "You reset the cheat/teach button.";
		now cheat-on is false;
	the rule succeeds.

chapter sning

[* SN scans an object forcing no-cheat mode]

sning is an action applying to one thing.

understand the command "sn" as something new.

understand "sn" as sning.
understand "sn [something]" as sning.

carry out sning:
	if player does not have settler and settler is visible:
		try taking settler;
	if player does not have settler:
		say "You need the settler for this shortcut." instead;
	now cheat-on is false;
	try scaning noun;
	if cheat-on was true:
		say "You re-unset the cheat/teach button.";
		now cheat-on is true;
	the rule succeeds;

chapter laing

[* LA looks at the last thing scanned. It should not be relevant unless you are vision impaired. ]

last-scanned-thing is a thing that varies.

scanlasting is an action out of world.

understand the command "la" as something new.

understand "la" as scanlasting.

carry out scanlasting:
	if last-scanned-thing is yourself or last-scanned-thing is nothing:
		say "You haven't successfully scanned anything yet." instead;
	say "Previous scan: [the last-scanned-thing][if last-scanned-thing is in lalaland], which are now out of play,[end if] scanned [full-monty of last-scanned-thing]." instead;

part accessibility

parse-now is a truth state that varies.

chapter parseing

parseing is an action out of world.

understand the command "parse" as something new.

understand "parse" as parseing when strip of profits is visited.

carry out parseing:
	say "Parsing output is [if parse-now is false]now[else]already[end if] on[but-if-parse].";
	now parse-now is true;
	the rule succeeds;

to say but-if-parse:
	if cheat-on is false:
		say ", but it isn't very effective with teach/cheat off"

chapter spareing

spareing is an action out of world.

understand the command "spare" as something new.

understand "spare" as spareing when strip of profits is visited.

carry out spareing:
	say "Parsing output is [if parse-now is true]now[else]already[end if] off.";
	now parse-now is false;
	the rule succeeds;

chapter accessing

accessing is an action out of world.

understand the command "access" as something new.

understand "access" as accessing.

carry out accessing:
	now screenread is whether or not screenread is false;
	say "Accessibility mode is now [on-off of screenread].";
	the rule succeeds;

chapter spaceoning

[* SPACE ON should allow spaces to be on]

setspace is a truth state that varies.

spaceoning is an action out of world.

understand the commands "spaceon/son" and "space on" as something new.

understand "spaceon" and "son" and "space on" as spaceoning.

carry out spaceoning:
	say "[if setspace is true]Spaces are already[else]Now spaces are[end if] on.";
	now setspace is true;
	the rule succeeds;

chapter nospaceing

[* NO SPACE should force spaces off--unless you are in accessibility mode]

nospaceing is an action out of world.

understand the commands "nospace/nos" and "no space" as something new.

understand "nospace" and "nos" and "no space" as nospaceing.

carry out nospaceing:
	if screenread is true:
		say "No space mode is very problematic with a screen reader, so I have disabled your ability to do so. You can turn screen reading off with ACCESS, if you want." instead;
	say "[if setspace is false]Spaces are already[else]Now spaces are[end if] off.";
	now setspace is false;
	the rule succeeds;

part random text toggles

quiet-warn is a truth state that varies.
talk-quiet is a truth state that varies.

chapter uhhsing

uhhsing is an action out of world.

understand the command "uhhs" as something new.

understand "uhhs" as uhhsing.

carry out uhhsing:
	if talk-quiet is false:
		say "You already can hear random dialogue.";
	else:
		say "Random dialogue on again.";
	now talk-quiet is false;
	the rule succeeds;

chapter hushing

hushing is an action out of world.

understand the command "hush" as something new.

understand "hush" as hushing.

ever-hush is a truth state that varies.

carry out hushing:
	if talk-quiet is true:
		say "You already can't hear random dialogue." instead;
	else:
		say "HUSH on.[paragraph break]";
		if ever-hush is false:
			ital-say "you will still hear the first random dialogue in an area, but it will be noted as such.";
			now ever-hush is true;
	now talk-quiet is true;
	the rule succeeds;

part nothin/nohint

chapter nothining

absolutely-no-hints is a truth state that varies.

nothining is an action out of world.

understand the command "nothin" as something new.

understand "nothin" as nothining.

carry out nothining:
	if absolutely-no-hints is true:
		say "You've already shut down hints for this saved game." instead;
	say "Disabling hints for the entirety of play is a drastic step, so [one of][or]once again I want to note [stopping]NO HINT may be better than the drastic NOTHING. Do you still wish to disable hints completely?";
	if the player direct-consents:
		now absolutely-no-hints is true;
	say "Okay[if absolutely-no-hints is true]. Hints are now disabled even if you save and restore[end if].";
	if session-hints-off:
		turn-temp-on; [need to disable the message in the new Save the Game Rule]
	the rule succeeds;

chapter nohinting

nohinting is an action out of world.

understand the commands "nohint" and "no hint" as something new.

understand "nohint" and "no hint" as nohinting.

carry out nohinting:
	if absolutely-no-hints is true:
		say "You've already shut hints down completely." instead;
	if session-hints-off:
		say "You've already shut off hints for this session." instead;
	say "Hints are now shut off for this session. If you save and restore, you will get hints again.";
	turn-temp-off;
	the rule succeeds;

Include (-
global temphintoff = 0;

-) after "Definitions.i6t"

to turn-temp-off: (- temphintoff = 1; -).
to turn-temp-on: (- temphintoff = 0; -).

to decide whether session-hints-off: (- (temphintoff==1) -).

Include (-

[ SAVE_THE_GAME_R res fref zz;
	if (actor ~= player) rfalse;
	fref = glk_fileref_create_by_prompt($01, $01, 0);
	if (fref == 0) jump SFailed;
	gg_savestr = glk_stream_open_file(fref, $01, GG_SAVESTR_ROCK);
	glk_fileref_destroy(fref);
	if (gg_savestr == 0) jump SFailed;
	@save gg_savestr res;
	if (res == -1) {
		! The player actually just typed "restore". We're going to print
		!  GL__M(##Restore,2); the Z-Code Inform library does this correctly
		! now. But first, we have to recover all the Glk objects; the values
		! in our global variables are all wrong.
		GGRecoverObjects();
		glk_stream_close(gg_savestr, 0); ! stream_close
		gg_savestr = 0;
		zz = GL__M(##Restore, 2);
		print "!!";
		if (temphintoff==1)
		{
			print "^Hinting has been restored, since you temporarily disabled it last session.^";
			temphintoff=0;
		}
		return zz;
	}
	glk_stream_close(gg_savestr, 0); ! stream_close
	gg_savestr = 0;
	if (res == 0) return GL__M(##Save, 2);
	.SFailed;
	GL__M(##Save, 1);
];

-) instead of "Save The Game Rule" in "Glulx.i6t".

chapter creditsing

creditsing is an action out of world.

understand the command "credits" as something new.

understand "credits" as creditsing.

carry out creditsing:
	say "I must direct credit to my testers for finding bugs and making sure this game was not mega (redacted).Thanks to Heartless Zombie (David White) for his hash code and suggestions, which removed many technical barriers.[paragraph break]More generally, thanks to people involved with Inform 7. Sparser parsers couldn't have hacked this game.[paragraph break]More personally, thanks to my testers who beat my Beta. They are, in first-name alphabetical order: David White, Jason Ermer, Kevin Jackson-Mead, Paul Lee, Peter Butter, Melvin Rangasamy, and Wade Clarke. Robert DeFord provided moral support and proofread game documents.[paragraph break]Potsy typos and possibly a tyro's story are not their fault.[paragraph break]Out of the blue help post-release came from Toby Ott, who went through the game several times, and David Welbourn, whose walkthrough at www.plover.net/~davidw/sol/r/roili13.html inspired many bug, hint and user-friendliness fixes. Hanon Ondricek helped with user-friendliness issues and found the wonderful name Dawn Churlzest, Streever helped with a Heisenbug and lots of release 2/3 stuff, and Marshal Winter found cool stuff. For release 3, Elizabeth McDonald, Joel Webster, Lydia Q. Dames, Sean M. Shore and Steven Watson provided testing too, and Matt Weiner noted a debug-text bug that helped me overhaul under the hood stuff.[paragraph break]Jason Lautzenheiser did some code review for release 4.[paragraph break]Thanks to Hanon Ondricek for finding the Electric Slide font and to Wade Clarke for consulting on the new release 3 cover art. If you hate the main idea, that's on me, but they helped me bring it out as best I could.[paragraph break]Thanks to the organizers of IFComp 2012 and Spring Thing 2013, Stephen Granade and Greg Boettcher. Thanks to Greg for checking up on me when I forgot to confirm my entry fee payment.[paragraph break]Thanks to bitbucket for posting a project that let me organize bugs privately and github for letting me organize post-comp releases. If you want to write something, just having a place to write down issues is fabulous.[paragraph break]You can see the current project status at [my-repo]." instead;

chapter abouting

abouting is an action out of world.

understand the command "about" as something new.

understand "about" as abouting.

carry out abouting:
	if mrlp is routes and cur-score of mrlp > 0:
		say "You push your luck, but no u-boat shows up. [if pier is unvisited]Good thing you're above-ground[else if player is in pier]A ship is already there[else if player is in clipper]That's the last thing you'd need now[else][end if].";
		say "Oh, wait, did you want to see the ABOUT message for real? I should note here you don't need ABOUT to win the Routes area.";
		unless the player direct-consents:
			say "OK." instead;
	say "A Roiling Original is the sequel to Shuffling Around and part 2 in my Stale Tales Slate. I doubt there'll be a third, since I've milked the concept dry.[paragraph break]ARO was initially written for Spring Thing 2013 and contains the same mechanics as Shuffling Around but hopefully is different enough to make for a new, original, and enjoyable story, especially since I focused on story in the post-comp release. You can see more abut the people who helped the game come to be by typing CREDITS. There are a lot of them!";
	say "[line break]A Roiling Original is intended to be POLITE on the Zarfian cruelty scale. It's possible to die, but the deaths are meant to be joke deaths. Barring a horrid bug, there is no way to make the game unwinnable, although you may lock yourself out of getting full points, which is just a vanity thing.";
	ital-say "I really appreciate transcripts (even though this is a post-comp version,) as it's cool to tinker with what I made--or to be able to squash a bug, or to make a puzzle clearer. If you wish to send a transcript, you can do so by typing TRANSCRIPT at the command line, then mailing me that text file at [email]. ;, * and ? at the line's start will indicate comments.[paragraph break]You can directly report bugs or annoyances at [my-repo]--no need for an account." instead;

part releaseing

releaseing is an action out of world.

understand the command "release" as something new.

understand "release" as releaseing.

carry out releaseing:
	say "Each version of A Roiling Original should contain a text file with detailed release notes, but here is a brief summary:[paragraph break]";
	say "A Roiling Original's first release was for Spring Thing 2013, on April 1st.";
	say "A Roiling Original's second release went out in January 2014. It fixed a lot of puzzles and bugs and also opened up a new region. Many areas were renamed, and many puzzles were redone. The code name was [i]Gad! Super Upgrades![r]";
	say "A Roiling Original's third release went out in March of 2015. It included the 'director's cut' Demo Dome Mode. Puzzles were tweaked, and hinting was made more robust. The code name was Past-Due Updates.";
	say "[line break]The current edition of A Roiling Original should include Invisiclues-style HTML, a color Trizbort map, a walkthrough, a heatmap of (rough) relative area difficulty, and a list of changes from the previous release. The code name was [i]Sustinent Nuttiness[r].";
	say "Any future update could be called Fiddly Did Fly, because I don't expect to do much more. Tweakings Take Wings, Fun [']Nuf and We Task Tweaks are possibilities, but they feel kind of cheap.";

part teching

teching is an action out of world.

understand the command "tech" as something new.

understand "tech" as teching.

carry out teching:
	say "Many people helped with technical aspects of A Roiling Original. There are the people who wrote the extensions. Andrew Plotkin showed some I6 code for taking transcripts and other things. Climbingstars helped with Bypass Disambiguation (not present til post-comp) and setting pronouns, among other things. Heartless Zombie betrayed his name by pointing me to hash tables to process 'good guesses' in the player's commands, which cleared up a lot of thinking that bugged both me and the player. He also helped me with other neat stubs I've re-used since then.[paragraph break]All three of these people's efforts are also present in the first game[if cur-score of Means Manse > 0] in the Stale Tales Slate[end if], Shuffling Around. So I am doubly thankful.[paragraph break]Juhana Leinonen's JavaScript code helped me create the HTML for pseudo-Invisiclues.[paragraph break]Genstein's Trizbort app helped me create the map for release 3 (black and white) and Jason Lautzenheiser's modifications for release 4 (region color, borders and more) helped me, and maybe you, visualize things that much better.";
	say "[line break]And it's already mentioned in the credits, but [my-repo] is where the project is hosted. I recommend using source control if at all possible. Even if you just use it to keep a backup, or be sure of what you changed, it can save a lot of trouble.";
	the rule succeeds;

part sitesing

sitesing is an action out of world.

understand the command "sites" as something new.

understand "sites" as sitesing.

carry out sitesing:
	say "I've probably forgotten some, here, but these are the big ones.[line break]";
	say "http://wordsmith.org/anagram/ -- Anu Garg's Rearrangement Server at wordsmith.org was invaluable to me. Hard to believe I've known about it for fifteen years. You've probably seen it before, too, but it's the big one for the main game mechanic. The sayings that go with each anagram have also helped me in many other ways. It's still fun after all these years.[line break]http://www.anagrammy.com/anagrams/faq6.html[line break]http://www.english-for-students.com/One-Word-Anagrams.html[line break]http://www.enchantedlearning.com/english/anagram/ was quite nice for common anagrams by subject.[line break]http://www2.vo.lu/homepages/phahn/anagrams/oneword.htm[line break]http://www.ssynth.co.uk/~gay/anagram.html[line break]http://www.wellho.net/resources/ex.php4?item=p669/anagram (basic succinct PERL anagram finder)[line break]http://boards.straightdope.com/sdmb/archive/index.php/t-291149.html for specific words and also ideas how to script more complex stuff[line break]http://www.rinkworks.com/words/oddities.shtml[line break]http://www.sporcle.com/ had many puzzles that helped me determine what was fair and what wasn't[line break]http://jamesgart.com/anagram/[line break]PERL for letting me parse through word-to-word anagrams and also helping me break one promising word into two.[paragraph break]I'd be interested if someone from France can ref these sites to make a similar game, someone from Spain could take pains, or a German manager could do so too. It'd be interesting to see.";
	say "And it's already mentioned in the credits, but [my-repo] is where the project is hosted. I recommend using source control if at all possible. Even if you just use it to keep an occasional backup, or be sure of what you changed, it can save a lot of trouble.";
	the rule succeeds; [forgot where I found the names from]

chapter optionsing

optionsing is an action out of world.

understand the command "options" as something new.
understand the command "opts" as something new.
understand the command "post opts" as something new.

understand "options" as optionsing.
understand "opts" as optionsing.
understand "post opts" as optionsing.

carry out optionsing:
	try padding "options" instead;
	if player is in Bustle Sublet and stop post is reflexive:
		if word number 1 in the player's command is "opts" or word number 2 in the player's command is "opts":
			say "(You have 24 opts for what to do with the stop post, but this doesn't quite work.)";
	the rule succeeds;

chapter verbing

verbing is an action out of world.

understand the command "verb" as something new.
understand the command "verbs" as something new.

understand "verb" as verbing.
understand "verbs" as verbing.

carry out verbing:
	try padding "verbs" instead;

chapter opt in/no tip

section notiping

notiping is an action out of world.

understand the command "no tip" as something new.

understand "no tip" as notiping.

carry out notiping:
	if cur-score of Means Manse < 2:
		say "You shouldn't know about this command, yet. I mean, it was in Shuffling Around, but it's a bit different, this game." instead;
	say "You [if no-tip is true]already have[else]switch to[end if] NO TIP at a region's start. OPT IN will reverse this.";
	now no-tip is true;
	the rule succeeds;

section optining

optining is an action out of world.

understand the command "opt in" as something new.

understand "opt in" as optining.

carry out optining:
	if cur-score of Means Manse < 2:
		say "You shouldn't know about this command, yet. I mean, it was in Shuffling Around, but it's a bit different, this game." instead;
	say "You [if no-tip is false]already have[else]switch to[end if] OPT IN at a region's start. NO TIP reverse this.";
	now no-tip is false;
	the rule succeeds;

chapter retry/terry

retrying is an action applying to nothing.

understand the command "retry/terry" as something new.

understand "retry" and "terry" as retrying.

retried is a truth state that varies. retried is usually false.

carry out retrying:
	if location of player is Strip of Profits:
		if retried is true:
			say "This is the place you go after retrying--as you probably know. So nothing happens." instead;
		say "Nothing happens. Perhaps this is where you'd be sent back to [if Loather Rathole is visited or Posh Hops Shop is visited or Danger Garden is visited or Same Mesa is visited or Danger Garden is visited]after going somewhere like you've been[otherwise]once you're able to look around[end if]." instead;
	if mrlp is demo dome:
		say "There's nothing to keep track of, here. Just explore around." instead;
	if mrlp is others:
		say "This is the only region left to take care of." instead;
	if Strip of Profits is unvisited:
		say "You haven't been to the Strip of Profits yet, whatever that is, and you suspect you can't just jump ahead. Besides, you don't want to risk retrying the Means Manse." instead;
	if mrlp is otters:
		say "You shouldn't need to go anywhere else[if number of bypassed regions > 0]. While you destroyed some regions with the patcher, you can't revisit them without restarting[end if]. Are you sure?";
		if the player yes-consents:
			say "Okay, back to the Strip of Profits.";
		otherwise:
			say "Okay, back to the endgame." instead;
	repeat with MI running through held things:
		if MI is not warpable:
			d "warping [MI].";
			now MI is in lalaland;
			add MI to item-list of mrlp;
			now lreg of MI is mrlp;
	now retried is true;
	if mrlp is towers and can-see-map:
		wipe-towers-map;
	now player is in Strip of Profits;
	if nestor is in strip of profits or tokers are in strip of profits:
		say "Fortunately, [if tokers are not in strip]Nestor didn't see[else]none of the tokers saw[end if] you zap back, or you'd probably be forced to explain things, which would take a while.";
	the rule succeeds;

to say rs-left: [unused]
	say "[7 - number of solved regions in words] region[if number of solved regions is 5]s[end if] left";

a thing can be warpable. a thing is usually not warpable.

table of warps [this gives the text for which portal leads to which area, and what starting location]
por	reg	lloc	go-text
routes-x	Routes	Same Mesa	"[one of]The route turns a bit, then begins branching. You are no longer sure what direction you are going in, and you always vaguely tried to take the center one, but it's no use. You wind up crossing a red line, and you find there is no way back. 'No curse cure, son!' booms a voice[if player is female] sadly ignorant of your gender[end if].[paragraph break]After walking on for a bit, you find yourself somewhere that might be populated. Well, there are buildings around[or][if Harms Marsh is visited]Somehow, the routes lead you underground[otherwise]It's easier to get lost the way you need to the second time[end if][stopping].[line break]"
troves-x	Troves	Loather Rathole	"[one of][if tokers are in Strip of Profits]'Materialism is like a TRAP, MAN! Wait, no, man, it's LITERALLY...'[paragraph break][end if]A protean neo-trap! A blingo-goblin sargent grabs you as you reach for the argents and garnets! Of course the trove was too overt. You shake him off and run. The sarge rages and gears--you hit the, er, gas. When you look up, you are in a girdled griddle of a city. And not any city. That most successful of cities: Spoiloplis! Where people go from poverty--to the very top. Cars--outrageous rogue autos--scar arcs, spraying water on you and knocking you from the curb as you reach for a demi-dime.[wfak][paragraph break]'Insurer Inurers! Darn you and your...' you hear someone yell from the back seat. They get out. 'Dawdler! Waddler!' You cringe, waiting for a lecture, but instead you only feel a slight thud on your chest. 'Toughen up! Enough put.' They re-enter the car, which speeds off.[paragraph break]You look down to a copy of [i]Pa, Egg, Pea[r] by Peg A. Page--a success manual of parsable parables.[or]You think positively as you walk back through the troves, and what do you know, you wind up where you used to be.[stopping][line break]"
e-s	Presto	Grey Gyre	"[one of]Shoof! Foosh! Your trip through the, er, spot visits Old Warpy itself, the center of the Yorpwald teleportation network! [if curst crust is off-stage]You somehow manage to grab an unappetizing hunk of bread--some curst crust--as you are blown off your feet. [get-crust][end if] Poof! Foop! Danglin['], then landing. With a plomf, maybe a flomp.[or]You hurtle through again, managing to land on your feet this time.[stopping]"
oyster-x	Oyster	Posh Hops Shop	"[one of]You walk into a bar full of seafood people. Err, sea people. Everyone seems worried about a seaside disease[or]You return to the sea people's area[stopping]."
towers-x	Towers	Loftier Trefoil	"[one of]As you attempt to enter the towers, they seem to move away will stop when you try to go closer, they move even further away. But you keep walking, eventually walking somewhere barren--the Bland Sad Badlands! There's not much there, but you've heard people guard the silliest things, just because. So when you find a tavern, you stop in for some help.[wfak][paragraph break]Someone is willing to talk to you: a marauding sort named Rodney who already has held the tavern hostage! And you stumbled in just as he'd got everyone scared and ready to let him loot the place![wfak][paragraph break][or]You warp back to the Badlands again.[stopping]"
otters-x	Otters	Bleary Barley	"[if b-b is reflexed]You turn around when you pass through the otters, but the Strip of Profits is gone.[else if Bleary Barley is visited]You stumble back into the barley and when you turn around, you can't see the otters anywhere.[otherwise]As you walk through, you feel a tingling, like giant wasp paws. You know you are not as powerful as before. A voice says 'This area is not to be braved lightly. Really.'[end if][paragraph break]"
hoster	others	rustic citrus	"After the darkest, sad trek, a frazzled beady-eyed man runs up to you and mutters about the Postage Gestapo and Tubers Brutes and so forth. Then he looks up. 'Curtis. Turf is fruits. CEO of TruSci.[paragraph break]'Yeah, you. You, um, [tgw] Listen, I need help with my business. Elvira grew all kinds of un-nutritious stuff. It'd help Yorpwald, and maybe it's help you. I bet it'd be real easy for you...and I'll give you something cool for every four fruits. Until I'm out of cool stuff. What do you say?'[wfak][paragraph break]'Great! You do your thing, then I'll do mine. It's weird technical biotech stuff, increase yields--a step past your...not that you're...um, never mind, get on it. Oh, here's an augural arugula, if you get stuck on something. Just eat it and la! a GURU!'[paragraph break]He's a bit brusque, but that's the legacy of bad leaders like Elvira--the people opposed to them the loudest can get annoying before anyone notices[get-arug]."

to say get-arug:
	now player has arugula;

book fliptoing

fliptoing is an action applying to one visible thing.

check fliptoing when mrlp is otters and power-back is false:
	if player is in Lamer Realm or player is in perverse preserve:
		say "[inhib]" instead;

preserve-animals is a number that varies.

note-progress is a truth state that varies.

after fliptoing a portal:
	if engravings are examined:
		now note-progress is true;
	continue the action;

definition: a thing (called mything) is cromulent:
	if mything is in location of player:
		decide yes;
	if mything is palm and player is in dusty study:
		decide yes;
	if mything is curst palace and mrlp is towers:
		decide yes;
	if mything is visible: [put here to increase speed]
		decide yes;
	decide no;

to check-get-pad:
	if player does not have pedanto-notepad:
		say "[line break]In fact, you realize the notepad on the chair would be a great place to file that idea. It'll help tame lots that's meta, mate.";
		now player has pedanto-notepad;

to two-up:
	increment the score;
	increment cur-score of mrlp;
	reg-inc;

check fliptoing (this is the check ending flip rule):
	if noun is a thisflip listed in table of end-flips:
		choose row with thisflip of noun in table of end-flips;
		consider the check final region action rule for noun;
		if the rule succeeded:
			do nothing;
		else:
			do nothing instead;
	else if noun is a thatflip listed in table of end-flips:
		choose row with thatflip of noun in table of end-flips;
		consider the check final region action rule for noun;
		if the rule succeeded:
			do nothing;
		else:
			do nothing instead;

section check and carry out rules

to print-the-from (frm - a thing):
	repeat through table of donereject:
		if frm is specdone entry:
			say "[spectalk entry][line break]";
			continue the action;
	say "Hey! No double dipping.";

check fliptoing (this is the portal palm and reflexive flip rule):
	d "Trying to flip [noun].";
	if noun is visible:
		if noun is a portal:
			try entering noun instead;
		if noun is reflexive or noun is vanishing:
			continue the action;
		repeat through regana of mrlp:
			if noun is the-to entry and the-from entry is reflexed:
				print-the-from the-from entry;
				the rule succeeds;
		try examining noun instead;
	if noun is t-b or noun is tables or noun is palm or noun is giant pin or noun is niche:
		if Gunter is not in lalaland:
			say "Nothing urgent yet[if stuff-found >= 3] except that bangish bashing[end if]. So no need to pre-flip, flipper.";
			check-get-pad;
			now noun is prefigured;
			pad-rec "flips";
			the rule succeeds;

check fliptoing when player is in dusty study and gunter is off-stage (this is the don't flip til you should at start rule) :
	repeat through table of Means Manse anagrams:
		if noun is the-to entry and the-from entry is cromulent:
			if player is in dusty study and urgent Gunter is off-stage:
				if stuff-found < 3:
					if the-from entry is not part of the diorama:
						now tried-flip is true;
						say "[if the-from entry is palm]You don't need a light source, yet[else if the-from entry is giant pin]There's no need to tidy your study up just now[else if the-from entry is satchel]Hmm, maybe there is something in there if you needed to go adventuring, but you don't, yet[else]Hm, well, that'd be a way to move around if you needed to sneak out. But you don't, yet[end if][one of]. Still, that seems right, so you file that idea away for later[or][stopping].";
						preef the-from entry;
						consider the Gunter knocks rule;
						do nothing instead;
				else:
					say "Worth trying later, but no need to pre-flip, flipper. See about that visitor, first.";
					preef the-from entry;
					do nothing instead;

check fliptoing (this is the reject flipping with distractions around rule):
	if noun is hurt hog and bent ewe is reflexive:
		say "The hog and newt don't trust you to go by.";
		preef noun;
		do nothing instead;
	if noun is alert or noun is log ons or noun is ought:
		if Rand is not visible and noun is visible:
			say "You remember having more fun than you thought you'd have, bashing about with Leo and Rand. It was more fun than you realized at the time. But you have a mission to accomplish." instead;

check fliptoing (this is the by Rand and Leo rule):
	if noun is log ons or noun is alert or noun is ought:
		if Leo is in Char Arch:
			say "You mumble other words to shoo Rand and Leo, but you sort of miss them. Maybe you can get them to provide some muscle." instead;
	continue the action;

to pill-list (pilly - a thing):
	if pilly is not a pill-thing listed in table of pill-comments:
		say "**Need pill entry for [pilly].";
	else:
		choose row with pill-thing of pilly in table of pill-comments;
		say "[pill-do entry]";
	guy-cheat pilly;

definition: a thing (called th) is pronoun-settable:
	if th is a guardian, no;
	if th is vanishing, no;
	yes;

carry out fliptoing:
	repeat through regana of mrlp:
		if noun is the-to entry and the-from entry is cromulent:
			if ff is true:
				append "[the player's command]: [the-to entry] to [the-from entry] denied![line break]" to the file of debuggery;
				say "[the-to entry] to [the-from entry] denied! Push ff to change this![line break]" instead;
			d "OK, [the-from entry] to [the-to entry].";
			if the-from entry is reflexive:
				now the-from entry is reflexed;
			now the-from entry is unfigured;
			if location of player is preserve:
				if the-to entry is not parrot and the-from entry is not parrot:
					increment nounsolve;
			if the-from entry is pronoun-settable and the-from entry is not the-to entry:
				if the-to entry is singular-named:
					set pronoun it to the-to entry;
				if the-to entry is plural-named:
					set pronoun them to the-to entry;
				if the-to entry provides the property male and the-to entry is male:
					set the pronoun him to the-to entry;
				if the-to entry provides the property female and the-to entry is female:
					set the pronoun her to the-to entry;
			if pill-use is true:
				pill-list the-from entry;
			else if suppress-score is false:
				say "[the-msg entry][line break]";
			if mrlp is stores:
				if the-from entry is Store T or the-from entry is lecturer: [you need to get rid of the lecturer to leave Cruelest Lecturers, so no min-up]
					do nothing;
				else if the-from entry is bedruggled or the-from entry is Store H:
					min-up;
				else if number of supporting stos < 4:
					min-up;
			if the-from entry is maze walls:
				if the-from entry is maze walls:
					unless l-m is cscanned or l-m is ncscanned:
						increment the score;
						increment cur-score of mrlp;
					two-up; [this is kind of a bad hack--two-up checks the score for increases, hence no min-up in the unless above]
			else if the-to entry is not in lalaland or the-to entry is satchel: [more than one point here]
				if the-from entry is boats and raft is reflexed:
					do nothing;	[a bailout not to add a point if you FART then BOAST]
				else if the-from entry is coins and the-to entry is s-i:
					two-up;
				else if the-to entry is t-b:
					if Largely All-Grey Gallery is unvisited:
						two-up;
				else if the-to entry is onyx censer and the player's command includes "phooey":
					two-up;
				else if the-from entry is not part of the diorama:
					reg-inc;
			if the-from entry is a backdrop:
				remove the-from entry from play;
			else if the-from entry is vanishing and the-from entry is the-to entry:	[this should work unless you flip an item twice and it vanishes 2nd time. Check.]
				now the-from entry is in lalaland;
			if taked entry is true or player has the-from entry:
				if the-from entry is not ruby and the-from entry is not medals: [else medals go from worn to carried]
					now player has the-to entry;
			if there is a roomjump entry:
				if roomjump entry is Strip of Profits:
					solve-region the map region of the location of the player;
					the rule succeeds;
				move player to roomjump entry;
				consider the show blues rule; [for debugging]
				consider the process random dialogue rule;
				the rule succeeds;
			else if the-from entry is part of the diorama:
				now the-to entry is part of the diorama;
				now diorama-flip is true;
				consider the Gunter Knocks rule;
			else if the-to entry is not visible:	[components aren't broken off]
				if the-to entry is not the-from entry and the-to entry is not a backdrop:
					move the-to entry to location of player;
			if the-to entry is lamp:
				now bean-smell is true;
				now dusty study is lit;
				if latches are off-stage:
					now player has latches;
				consider the adjust light rule;
			if the-to entry is not the-from entry and the-from entry is not reflexed:
				move the-from entry to lalaland; [this is to drop a new item in place]
			if the-to entry is visible: [assume that we are focused on the item we just flipped]
				set the pronoun it to the-to entry;
				if the-to entry is plural-named:
					set the pronoun them to the-to entry;
			follow the show blues rule instead; [for debugging]
	repeat through regana of mrlp:
		if noun is the-from entry and location of noun is location of player:
			say "You can't seem to change things back to how they were." instead;
	say "This case with [the player's command] in [location of player] shouldn't have happened. BUG." instead;
	the rule succeeds;

The look around once light available rule is not listed in the for printing the announcement of light rulebook. [only used in dusty study]

after fliptoing when player is in rustic citrus (this is the Curtis pleased rule):
	if cur-score of Others > 3 and moss cap is off-stage:
		say "You've done so well, Curtis explains there may be something north and gives you a moss cap to help you know which direction that is. After all, moss grows on the north side of trees...[paragraph break]You don't want to seem ungrateful, but you still point out that caps are to be worn on one's head, making it hard to look and gain any sense of direction.[paragraph break]Curtis responds that, well, you were smart enough to get started, you'll figure things out. And if you can sit there and make fruit out of nothing, you can probably take the logic from there.[paragraph break]Awkward silence ensues, and Curtis sits down, exhausted from delegating. You ask Curtis about possible landmarks and such, but he's busy with new business ideas.[paragraph break]Hmm. Probably some of this garbage could be turned to more fruit, if you were the sort of person who wanted to do everything, but you'd rather help yourself right now.";
		now all carried fruits are in lalaland;
		now player has moss cap;
		continue the action;
	if cur-score of others > 3:
		coin-eval;
	continue the action;

to say check-tokers:
	say "[if tokers are in Strip of Profits]motion to the mangiest steaming.[paragraph break]'Dude! My buddies!' he shouts. 'I must've went back to the wrong store or something. Hey, I met this dude!'[no line break][otherwise]stand around nervously while he wonders where his friends are. They must be nearby.[no line break][end if]";

to say check-nestor:
	now mangiest steaming is in Strip of Profits;
	say "[paragraph break][if nestor is in Strip of Profits]What's more, you seem to have rescued their friend, Nestor! 'Hey, dudes, I like went back to the wrong store or something.'[no line break][otherwise]They spend some time complaining about their one toker friend who like went out to get the really good stuff and never like reappeared.[no line break][end if]"

after fliptoing when player is in stores (this is the reunite gang rule) :
	if noun is nestor or noun is tokers:
		if nestor is in strip and tokers are in strip:
			say "The lackers and slacker pull a tarp apart and pull out a dime bag made big and spark a tinderbox-bred toxin for tokins['] stokin[']. 'A drug to drag out!' They offer a stupor sprout to spur Proust, and even an opiate oatpie, but you decline. They explain excitedly to you that this stuff is SO good, it's literally a like passage to a new world for certain people. You might even be able to enter the like smoke if you're way out enough.";
	continue the action;

after fliptoing (this is the fruit cue rule):
	unless noun is a fruit, continue the action;
	let another-break be false;
	let ncf be number of carried fruits;
	if ncf > 5 and remainder after dividing ncf by 3 is 0:
		say "You can carry all those fruits in your super purse, but they might get mushed. Maybe you should unload what you have on Curtis[if player has droll dollar], even if he might not give you any more goodies[end if].";
		now another-break is true;
	let frr be frroom of noun;
	repeat with myf running through fruits:
		if frr is frroom of myf:
			unless player has myf or myf is in lalaland:
				d "[myf] still to do.";
				continue the action;
	if another-break is true, say "[line break]";
	say "You look around and don't see any way to [if player is in clangier clearing]bargain for[else]pick off[end if] more fruits here. Maybe it's time to look around elsewhere.";
	continue the action;

the fruit cue rule is listed after the check minimum fruits and score rule in the after rules.

book anagram tables

chapter the tables themselves by region

table of Means Manse anagrams
the-from	the-to	taked	hashkey	roomjump	right-word	right-cmd (topic)	the-msg
palm	lamp	true	201542769	--	"lamp"	"lamp" or "get lamp"	"Lamp. Palm. Yup. Using your old powers, you change the palm into a lamp, which gives off light. You go all Jason Scott on it, and just like that, bam, it's in your inventory.[paragraph break]Oh, there's that 'dope' op-ed Gunter threw at you, too.[paragraph break]You blink and look around and stare at your diorama. You remember how [gtmn] gave it to you for one day you might need warm-ups, to get back in the groove. With unusual examples and anything. In case you had a different divining tool than the tagged gadget[if latches are off-stage].[paragraph break]Oh! And he gave you something else! Those--useless latches! They might be good for something. You remember the lump from sleeping on the chair--yup, there they are[end if].[preefies]."
latches	satchel	true	439479634	--	"satchel"	"satchel"	"The locks start fiddling with themselves--and each other--and slowly, a satchel emerges from the mess[new-thing]."
giant pin	abstract painting	false	447164205	--	"painting"	"painting"	"The giant pin's edges become sharper and, before you know it, it's reformed to a portrait hanging on the wall. Whatever stuck the pin to the wall still works on the painting, which may not be High Art, but it's worth a look."
pavement	event map	false	682523494	--	"event map"	"event map" or "eventmap"	"The pavement unfolds into a small map which, you remember, describes your first trip through Yorpwald."
event map	pavement	false	682523494	--	"pavement"	"pavement"	"The event map folds back into a thoroughly more dull pavement[read-canflip]."
crabgrass	brass crag	false	437595366	--	"brasscrag"	"brasscrag" or "brass crag"	"The crabgrass dries out and becomes a brass crag."
brass crag	crabgrass	false	437595366	--	"crabgrass"	"crabgrass"	"The brass crag becomes slightly less lifeless crabgrass, again[read-canflip]."
platform	farm plot	false	490844063	--	"farmplot"	"farmplot" or "farm plot"	"The platform becomes a farm plot."
farm plot	platform	false	490844063	--	"platform"	"platform"	"The farm plot switches back to a platform[read-canflip]."
pedestal	steel pad	false	613492907	--	"steelpad"	"steelpad" or "steel pad"	"The pedestal becomes a steel pad."
steel pad	pedestal	false	613492907	--	"pedestal"	"pedestal"	"The steel pad intertwines into a marginally artistic pedestal[read-canflip]."
pram	ramp	false	233052733	--	"ramp"	"ramp"	"The pram folds out -- boy, there are all sorts of compartments there -- and becomes a ramp, given revamping. [b]DOWN[r] to a basement you have forgot you had."
sitar	stair	false	331888451	--	"stair"	"stair"	"The sitar becomes one with the ground, showing you an inner path to somewhere more peaceful."
stria	stair	false	331888451	--	"stair"	"stair"	"The stria glow and cascade into a stair leading back up."
niche	chimney	false	484428752	--	"chimney"	"chimney"	"The square saying MY NICHE rumbles and collapses to create an impromptu chimney. It's wide enough for you to climb and even appears to have ledges or whatever to grip. You can go up now."
t-b	t-b	false	608585586	--	"basement"	"basement"	"[if Largely All-Grey Gallery is visited]You diligently set about making sure you've got all the points for this area[else]Now you remember why there were ten beams[end if]. Of course, the ten beams lead [b]down[r] to the basement."
tables	tables	false	401610655	--	"stable"	"stable"	"The tables make a weird splatching noise. The writing coalesces and seems to consume the wall, and you can now walk inside to see the stable you never really wanted[dust-b]."
ISBN bins	ISBN bins	false	228593225	--	"snib"	"snib"	"You hear a click from the ISBN bins. They're still covered with ISBN numbers, but not as much as before. Some if the ISBNs have become a snib that can keep the bins locked, so your place is a bit safer from looting."
plates	staple	true	464657709	--	"staple"	"staple"	"The plates [if plaster is visible]fall with a clatter from the plaster[otherwise]schlurp together[end if], and a large staple forms from their edges. You take it, so you don't step on it later or anything."
plaster	stapler	true	549981512	--	"stapler"	"stapler"	"As paper appears behind, a stapler falls out. You take it[if plates are visible] as the formerly stuck plates fall[end if]. The act-ruin curtain behind looks lined but seems solid enough."
rifle	rifle	false	338451493	--	"flier"	"flier"	"Duh! Snap![paragraph break]After a 'Hands Up!' and SHUP! the rifle jumps out of Elmo's hands. Turns out it was loaded, and it did have a bullet with your name on it, because it becomes a loaded propaganda flier with your name on it.[paragraph break]Elmo lowers his voice. 'Okay, we gotta play it safe here. They maybe should've figured I was a mole. Name and all. But I have stuff to tell you.'[paragraph break]Lo, a guide! Dialogue!"

table of stores anagrams
the-from	the-to	taked	hashkey	roomjump	right-word	right-cmd (topic)	the-msg
Store B	Store B	false	505285378	--	"sorbet"	"sorbet"	"You ask 'Got any sorbet?' and a seedy man beckons you in. You talk for a bit, and he talks about how he wants to be a writer and his name is Obert (O-Bert) and you suggest he might be a better writer just by calling himself OB-ert (short o.) It's the most ridiculous things he's ever heard. He thumps you eleven times and throws you out. But the free sample was delicious."
Store H	hoster	false	524148772	--	"others"	"others"	"You manage to discover a secret place set aside in Store H. You wonder who could be there or even if you should go there."
Store K	tokers	false	539799651	--	"tokers"	"tokers"	"You concentrate on the store with all your might, but you're unable to do anything. In frustration, you bang on the window, breaking it. Smoke comes pouring out. 'Dude you must totally be the cops! We were hotboxing in there!' You assure them you are not, that you've got a rather libertarian view on it all, but it takes so long that a joint they left in there burns the store down. Fortunately, they'd grabbed everything else of value, and all things considered, they feel almost glad to be liberated from their fears of being caught. They pull a tarp apart and sit down.[check-nestor]"
Store N	nestor	false	555773981	--	"nestor"	"nestor"	"The store rumbles and collapses! But the rubble falls in a circle around the poor fellow inside. He gives a duh-eyed 'Hey dude.' A long pause. 'What happened?' He wouldn't believe the truth, so you just [check-tokers]"
lecturer	lecturer	false	572670412	Strip of Profits	"outside"	"go outside" or "outside"	"Ian and the lecturer are swept from the doorway and stage, respectively, by something unseen. The lecturer frantically babbles something about how this is why we need to fight drugs, but he is too busy backwards somersaulting to establish eye contact with his audience. You stumble out yourself, back onto the way high highway.[paragraph break]'Whoah, dude! You totally stuck it to guard-on-a-ground Durango! Dour nag!' The tokers give you the sauciest suitcase you could imagine (tie-dyed, not spaghetti sauce) and encourage you to eat the nice mush munchies therein. You protest at first, worrying the munchies might be 'special,' but no, the tokers assure you that'd waste money. They explain the munchies help reduce migraines['] mini-rages, like [if headaches is 10](after some experiments with the settler) [end if]that annoying noise from the slider. You can use the slider [if headaches is 0]again[else]more[end if], now."
Store P	e-s	false	568332432	--	"presto"	"presto"	"You say the magic word! An unseen voice lauds, 'SALUD!'[paragraph break]You feel yourself swirling, lifted from the ground, and you see the words in the poster blur as first the store, then the poster swirls into--well, not a blotch. Call it an, er, spot. You can ENTER, if you dare."
Store T	otters-x	false	589976491	--	"otters"	"otters"	"The store divides in two until it becomes a path with gargoyles on each side. I mean, otters."
Store U	routes-x	false	591972280	--	"routes"	"routes"	"The routes coalesce and flatten and grow. You can ENTER them to see where they lead."
Store V	troves-x	false	594031293	--	"troves"	"troves"	"You look more closely at Store V. Yes, those are definitely troves. Store V collapses--you duck as the walls fall out and somehow sink into the ground."
Store W	towers-x	false	594801246	--	"towers"	"towers"	"The store becomes a pair of twin towers, connected at the base where you can enter them."
Store Y	oyster-x	false	609225725	--	"oyster"	"oyster"	"Blam! The store flattens a bit, rounds out, and becomes an oyster."

table of routes anagrams
the-from	the-to	taked	hashkey	roomjump	right-word	right-cmd (topic)	the-msg
worst ad	worst ad	false	490212044	--	"towards"	"towards"	"You walk towards the ad to see what it says, and when you do, you find yourself not caring what direction you are going in. Then you hear a crackle, and someone yells, 'Catch that intruder!'[paragraph break]Ow! Darts! You pass out and wake up in the center of the same mesa again. The ad is gone. [if armada is in mesa]The armada murmurs--you were so close! Maybe you can find another way to get out[end if]You may not be closer to saving Yorpwald, but you've made it fractionally more livable, so yay there."
picturers	picturers	false	404002364	cleric circle	"inside"	"inside"	"The structure resigns ingress."
lairage regalia	lairage regalia	false	373417715	adobe abode	"across"	"across"	"You walk across, not worrying about what is in front of you. Oscar's appears in front of you. You walk in."
adsorbing signboard	adsorbing signboard	false	283037761	idle deli	"past"	"past"	"You decide to walk past Pat's. Then, you turn and enter the alley just past it. The building lurches sideways toward you, and you manage to jump through the doorway with only a minor bump as it slams into you. You hear taps spat as you enter."
bench-end	bench-end	false	480723649	--	"astride"	"astride"	"You sit right on the end of the bench, prepared for a tired tirade. The brokest sob-trek ever--and yet, even with your yelling, 'Nag it, giant!' he wants his space. He shakes his arms, but you sense he would like to swing them--and he can't, without his elbow hitting you."
elbow	Rude 'N Nuder	false	382326203	--	"below"	"below"	"You watch how the giant swings his elbows as he rants and when. There's a pattern and timing--disappointingly simple--maybe a few words he overemphasizes. He's able to get it all out, and he's kind of exhausted now. He pulls out a book labeled Rude [']N Nuder and proceeds to babble about how this is what Yorpwald is reduced to these days."
bench	old giant	false	350259676	--	"against"	"against"	"Quakes squeak as the giant approaches, and you back off, because he is a lot bigger than you. He sits down and begins some angst-ail, which segues into tirades. 'Tantrums! Must rant!' The buggin['] biggun wants you to listen."
pipe soot	pipe soot	true	683820011	--	"opposite"	"opposite"	"You inch to the other side of the room, engaging in small talk, complimenting Oscar on how nice the place is. With your back to the ashtray, you grab a big chunk of pipe soot, which you stuff in your super purse. You may or may not be a six footer, but you're a soot fixer[if list o toils is examined]--maybe you can find someone the soot is useful for[end if]!"
seed pit	mushrooms	true	602484096	--	"despite"	"despite"	"You ignore Pat's 'pits go to pigs' and 'yon pit, no pity' warnings and the sign. 'You can't...'[paragraph break]But you do. It's yucky and squishy, but it's not the seediest seed site ever. You hold your nose enough to find some mushrooms which you can take, leaving the mere pit emptier."
Rude 'N Nuder	U NERD ENDUR REDUN	true	408172316	--	"under"	"under"	"You can't take the giant waving the, um, literature around. You jump off and duck under the bench. Disgusted that nobody will listen any more, he throws Rude [']N Nuder in the air. The slip-on cover rips! It falls away to reveal a different book ... [i]Runner Dude[r], by Nurene Rudd and Derrun Edun. Wait, no! That's another false cover. The book's real title is [b]U NERD: ENDUR (REDUN)[r]! And boy, it is runed.[paragraph break]Well, whoever hid it was clever. Hide something REALLY taboo under something that just gets everyone moderately uncomfortable."
MORF FORM	the-b	false	250266429	--	"from"	"from"	"The MORF-FORM suddenly falls, becoming FROM above. You watch a blot bloat as it gets closer. You duck and don't hear the thud. When you wake up, whatever was inside it is in the shape of a bean--but not just a bean. It's labeled THE BEAN.[paragraph break]'Mesa's a mess!' you hear people screaming. 'Intact? It can't...'"
the-b	the-b	false	485518766	Harms Marsh	"beneath"	"beneath"	"You push the bean and grunt theatrically, and they take the cue. Yes, there's a big hole you can go down. As you do, the drama armada cheers you... 'Go down now, dog!' ... 'So true, sure to set our ouster...' It's a scented descent, which feels right. It had better be. You hear the bean roll back into place..."
darkness	narrow cracks	false	375930018	--	"until"	"until"	"The one preposition gives you confidence you will find No-Gal Logan. The marsh doesn't exactly start glowing, but you can notice things better. Like a few narrow cracks. You're not sure which way to go, though. Compass directions are still out."
narrow cracks	un-road	false	356906602	--	"around"	"around"	"With more light, you find...yes, an un-road! Lit by stripey, spritey pyrites you'd have missed otherwise."
un-road	along-bogus	false	231861444	ripe pier	"along"	"along"	"You go along the path you found. With almost no lag, you find yourself at a pier by an underground lake."
da mist	da mist	false	331668890	Cripple Clipper	"amidst"	"amidst"	"It's tricky. You don't want to just get through the mist, but you mean to explore everything. And you turn up a bad oar! Then, when you find a ship, it's--well, the bad oar is accepted. 'You found it! You must be the one! I can go now!' You protest--you need someone to show you the way. 'You will learn from my sorrow,' says No-Gal Logan. You don't want to be an ol['] nag, so you sit and wait."
thickness sketchins	thickness sketchins	false	329930229	Sonancy Canyons	"athwart"	"athwart"	"Not just any direction will do. You need something nautical. And there it is. Athewart--helps you navigate around tough bits. You look around. Oh, hey, there's the mast and stuff. And though you're in an underground cavern, there are--well, not quite stars, but markers that can help guide you to the free reef, if you need the extra direction. The bad oar helps you on your way but snaps as you land. You think you yourself, scan yon... so canny... and you wind up somewhere different."
hurt hog	hurt hog	false	475056505	--	"through"	"through"	"You realize it's time to move on. So you do."
bent ewe	bent ewe	false	681789531	--	"between"	"between"	"You stand bravely between the hog and the bee. Surprisingly, they don't seem upset. They actually appreciate your company."
raptest patters	raptest patters	false	575888338	--	"without"	"without"	"It's always tough to figure how to ignore stuff. Do you focus on it directly, to find a way to get rid of it, or do you try to block it out? Either way, you realize that you just want to be without that sort of drivel, and ... amazingly, when you think of the more important things you have to do, it goes away."
yob den	yob den	false	432873440	Strip of Profits	"beyond"	"beyond"	"You ignore the yob den. That'll sort itself out later. What's important is to find a way out, back to the surface. And you do... it's much quicker than you'd think! You turn around, and there's the yob den, cheering for you. A drama armada is also there, applauding you. You realize you're just outside of the poison stripe, and it turns a final shade of bright green before it winks out and vanishes. 'Pardone...a pro end! One, pard!' It's Brother Horbert. 'These other people, well, they promoted me to an Aproned Padrone. I hope I'm up to it. But I know you have other places to be ... thank you...[paragraph break]As you work your way back to Old Warpy, you notice No-Gal Logan has joined the crowd waving to you."

table of troves anagrams
the-from	the-to	taked	hashkey	roomjump	right-word	right-cmd (topic)	the-msg
Pa Egg Pea	Pa Egg Pea	false	244059588	--	"gape"	"gape"	"You empty your mind to let the advice in Pa, Egg, Pea sink in. It--makes sense, if you don't think too hard. [eicond]."
cold	heat	false	270386244	--	"hate"	"hate"	"You feel a rife fire in your heart. [paragraph break]'How neat! Hate won heat now!' you think to yourself.[paragraph break]You manage to stay toasty but you lose focus as you switch too soon from thoughts of goin['] cold to gold coin. A bogeyman takes your moneybag![purse-gone] Your thoughts are really racing now. Racing so fast you can probably do the wrong thing several times before you get it right.[paragraph break]You may need that practice, because right now you don't want your money back as much as you should."
heat	truffle	true	234323315	Bustle Sublet	"care"	"care"	"You feel a gust, or tugs, in your guts. And hey! This caring really works! You ignore aches during this chase and track the robber to...well, he can't have ducked out in plain sight. You thought you heard a door slam, just out of view. Emotion has gotten you this far. In fact, it has even led you to a fretful truffle, which you pick up.[wfak][paragraph break]But you will need to be more analytical to move on."
sob ever verbose	sob ever verbose	false	637146289	--	"observe"	"observe"	"Cads. Clues. Cul-de-sacs. Once you really pay attention, you see how observing them detachedly gets you closer to what you really want. You're in the zone, now. Something may or may not be moving by the stop post. Time to hone your observing."
stop post	stop post	false	355202520	Boarded Roadbed	"spot"	"spot"	"A clue where to go next! You follow it to somewhere more desolate, and there's the thief!  You don't let on you've spotted [him-her], but you walk near, notice [him-her] jump, and yell the magic words.[paragraph break]'Setup, stupe!' Wop! Pow! Pop! Wow! An upset! Your smackings are apt food for a footpad. [he-she-c] drops your purse--[i]though at that moment you realize the self-reliance you gained is better than any money.[r] Still, during all this feeling good about yourself, you let [him-her] get away. 'You won't find me in the cellar!' [he-she] yells before disappearing. You start to follow, but a bee jumps in the way, and you forget where the cellar is..."
bee's head	bee's head	false	454851781	--	"reason"	"reason"	"You recognize that small bumblebees flying don't make any sense. Then, therefore, neither should a much bigger one, due to the scaling paradox. The bee lets out a snore from the reason[if what-a-bee is reflexed]. You've already disposed of the bee emotionally, but hey, you might as well be sure of things[otherwise]. You can probably get by the vile bee (it's no longer really an evil bee,) although it may be possible to marginalize it even more[end if]."
what-a-bee	what-a-bee	false	607808737	--	"believe"	"believe"	"You remind yourself bees smell fear, so you decide to believe that the bee will not harm you[if bee's head is reflexed]. On top of your reasoning it can't, you render it out of commission emotionally and factually[otherwise]. You can probably get by the bee, although it may be possible to marginalize it even more[end if]. You also believe, that much more, that you can find your way out of here."
cellar door	cellar door	false	341950993	Drain Nadir	"recall"	"recall"	"[rec-der]."
cellar door	cellar door	false	514122776	Drain Nadir	"derive"	"derive"	"[rec-der]."
sister tressi	sister tressi	false	553780708	--	"resist"	"resist"	"You stare back, just so. You believe you will not be a failure all your life...and it works! And yet, you know, her stare should and will work on people even more delinquent than yourself. Still, you're not one of them any more. If and when you reach the top and make powerful motivational speeches, you will remember this moment! And yet...there's still something more to do here. You still need to bottom out in your own way."
Blamer Balmer	Blamer Balmer	false	351625627	--	"ramble"	"ramble"	"You let your mind wander, and for whatever reason, you figure out even more about yourself than you expected." [??]
diapers	Eddie's Song	false	459079590	--	"despair"	"despair"	"You get all 'Shame has me/Limpy my lip' and scream 'A sod's so sad!' and reflect on how you've moiled into demolition, and you remember that hitting rock bottom is the first step. I can't describe your bed cries over a dwelt-on letdown as you gasp at gaps in your [one of]samey, seamy[or]empty, tempy[at random] life and the chasm to stomach.[paragraph break]You move from Ow, Hell to Oh, Well, groaning mood to a good morning, ruined to inured. You realize you have a day job (joy, bad)--empty but not tempy--as a fiche chief, no longer bullied by BILL DUE, and yet... after some furnace care fun, you find a copy of LEAD, the first big motivational book in Yorpwald. You don't have time to worry whether positive thinking found it. You have too much positive thinking to do."
Eddie's Song	Eddie's Song	false	361668827	Boredom Bedroom	"decide"	"decide"	"[troend]"
lager	lager	false	301731271	--	"glare"	"glare"	"You glare at the cursed alcohol, contemplating its effects on so many leaders and would-be leaders and the economy in general when drinkers don't take as productive jobs as they should. Thar's Trash.[paragraph break]You know now it will cause you to lose willpower, despite your recent fit of despair. Not for you are the glugster's struggles against scarlet clarets, his tab habits.[paragraph break]You obviously care about the working man and his productivity and, eventually, his income and savings. How the false down-home humility in beer commercials is worse than beer's physical effects. After an impeccable moment of silence for the productivity lost to the cursed drink, you leave the bedroom just long to pour the hurtful booze down a trash disposal. You formulate a new anti-drug campaign (Sexual? Ale sux! Prohib? Hip, bro!) but realize you are not important enough to carry it out. [i]But you will be one day[r].[paragraph break]Man, that was so Heratio ALGER!"
ltb	ltb	false	204836855	Browse Bowers	"deal"	"deal"	"You learn to deal with globalization, your own self-hate, your false conscience, memories of EVICTION NOTICE IV, a second-grade bully, and so forth. Even the blankest blankets seem to have a quilty quality, now.[paragraph break]'NO STAYIN['] ON IN A STY!' you yell. Decaf-faced, you leave your unmade apt., full of up and at em and move-it motive! Mo['] nice income ahead! You pass saps on your way..."
brochure	brochure	false	503231922	econ cone	"desire"	"desire"	"You remember how when you were a kid you just wanted money. And people--people who believe you deserve said things--to show it off to! And a nice subtle sublet full of bustle where they won't get stolen! No win without ownin[']![paragraph break]You make plans for a mortgage on a nice place in Heirsshire. There's a bunch of twaddle about balloon mortgages and reverse derivatives and interest rates, but you'll let the eggheads take care of this. You need to find a job that'll pay for that place now. And affords for fads. No more thingola loathing."
praise	praise	false	438050501	--	"aspire"	"aspire"	"You remember how when you were a kid you just wanted money. Well, now you recognize the importance of money AND power! You make grand plans for a great fiscal empire, full of power-broking, rainmaking and all those other terms you didn't understand as a kid[if rivets are reflexed]. Boy, you feel extra well rounded now. You want money and power for lots of different reasons![else].[end if]"
rivets	rivets	false	564671562	--	"strive"	"strive"	"You make up your mind to strive. You strive to strive even more. You strive to make others strive. You feel twice as useful as you did a minute ago. You feel all, BAM! MBA[if praise is reflexed]. Boy, you feel extra well rounded now. You want money and power for lots of different reasons![else].[end if]"
pernod	pernod	false	458885045	Upscale Capsule	"ponder"	"ponder"	"You realize it's not just enough to have ambition. You look into yourself a bit, and you have all the answers. Well, enough so that people will believe you long enough to get power. Good enough. You focus your sob story about how the guy who just got canned? Well, he almost ran you over, and you learned from him, and you have more to learn--it's easy stuff. But perhaps it's easy because you thought it through! You run past countless offices with people named Gingold, Golding or even Gil Dong before finding an individual one right for you."
noise	noise	false	433982545	--	"ignore"	"ignore"	"'Enraged times. Disagreement denigrates me,' you think, as he calls you a stony nasty-o before saying 'Er, goin['].' He will run about, a burnout. You leave the failed afield, his offense seen off in this office ice-off. His density cost his destiny. Legit to let it go. 'Delays: SLAYED!' you remark. 'NO IMPOSTOR PROMOTIONS!'[paragraph break]Wow! Emptying your mind was easy once you put your mind to it! Your vanity changes in tribute."
salt	salt	false	255385641	--	"last"	"last"	"You start lastin['] like Stalin. Til you ARE worth your salt, sure all stats are up to par. You've stayed steady so efficiently that it doesn't seem much time has elapsed since your career started. Your company becomes Kings at staking takings. And lastin['] like Stalin busses in business, and you re-last [']til it's staler. You're in charge of more than a region now. At which point you realize you'd better get rid of the salt, which causes hypertension in a job like yours. You kick it under your desk and forget about it.[paragraph break]Then, oh, man! A delivery of Trance Nectar came when you were away. That's totally the stuff to help keep you focused and productive, unlike that nasty Large Regal Lager back in Boredom Bedroom."
ME ARTS	ME ARTS	false	478776867	--	"master"	"master"	"You realize the picture's not just some odd ole doodle. You critique it. 'Matters I mistreat, artist? Me?' / 'Master it.' It's tamer, the whole business. You cross breed boss creeds and master [if song is visible]further [end if]the concepts needed to succeed. Ah! Less hassle! You will now achieve zones so Zen as you improve more, VIP.[paragraph break]Once you've fully gotten value from it, you sell it to someone who can similarly use it--if they are focused and with it and such."
lobster	lobster	false	559099217	--	"bolster"	"bolster"	"You bolster your will [if song is visible]further [end if]to believe you deserve great food like lobster, not just today, but any day. One day, you will not worry about the price of lobster, and a lobster meal will be less a percent of YOUR income than your underlings['] food is of theirs!"
DIVORCES	DIVORCES	false	575948795	--	"discover"	"discover"	"On perusing DIVORCES with a [if divorces is examined]more [end if]critical eye, you gain insight. These people are not better than you! Just more exciting and better at wasting others['] time! But this is what the media focuses on. Perhaps it is because less productive people deserve it, or perhaps it is to sucker people who might otherwise think for themselves. That's not your business. DIVORCES is not for you! You pitch it and re-focus."
trance nectar	troend1	false	406340841	--	"recant"	"recant"	"As you think of drinking the trance nectar, you think...no. It can't be like this. You can do better. You turn your back on the rat race. It seems so easy once you put your mind to it. [troend]"

table of presto anagrams
the-from	the-to	taked	hashkey	roomjump	right-word	right-cmd (topic)	the-msg
lamb	lamb	false	138495715	--	"blam"	"blam"	"You make pretend the gun noises as you point your finger at the poor little lamb. It runs off, scared. But the right kind of scared! And towards greener--well, less grey--pastures[if cur-score of presto is 0]. Hmm. That was a loud word you used, there. You make a mental note of others[end if]."
hump	hump	false	287929218	austerer treasure	"umph"	"umph"	"You ham up 'Hup, ma!' to get over a hump, which vanishes[if Leo is visible]. Leo and Rand follow, jumping unnecessarily[end if]."
star	star	true	286895605	--	"rats"	"rats"	"You're frustrated you can't reach that star in the stump, and you bang your fists on the stump and say RATS! Then you wiggle a finger in absent-mindedly, and while you're not thinking of it, or of getting your fingers stuck in a cut in the stump, pop, the star comes out! It's the sort you can affix to your clothes and look important with, so you do."
dart	dart	true	211650728	--	"drat"	"drat"	"The extra adrenaline provided by the mild swear allows you to be all 'Reach, acher!' And you reach the dart--but not enough to fall in the dumpster."
plebe	plebe	false	409310921	--	"bleep"	"bleep"	"You let forth something bleepy. I can't say it here. You know what it is, because you know what your 'favorite' swears, combos thereof, or half-swear portmanteaux are[if player is not wearing star]. But the plebe looks at your chest and smirks a bit. His old CO swore worse, with sager sarge rages[otherwise]. It's no worse than his legions['] lingoes, but man, the WAY you said it. How you built up to it, making the threat stronger than the execution, then BAM![paragraph break]You keep up the abuse by yelling how he can't even stand his bleeping ground to bleeping second rate verbal abuse. The Marine does not remain[end if]. He whines 'Sir, mean reamins['][if player is female],' so disoriented he forgets your gender.[else].'[end if]"
boing	boing	false	239271538	--	"bingo"	"bingo"	"You don't have much experience with this sort of thing, but you take a deep breath and realize there are only so many ways to do it wrong. Futzing with the popgun, you mumble 'Aah... aah... a-ha! I loc coil-loci!' You push the trigger just to make sure, and you hear the familiar BOING[if popgun was not held]. You decide to keep it, now that you fiddled with it[end if]. But now, to load it."
sport ports	sport ports	false	440526323	--	"prost"	"prost"	"You mentally toast the abilities of people able to navigate the sport ports. It feels good, this act of sportsmanship."
Leo	Leo	false	255972525	--	"ole"	"ole"	"You set yourself near the vile veil and avoid Leo as he charges at you! He trips over a stump or root and cries, 'I...sprain! Aspirin!'[paragraph break]Leo's yelling attracts a fellow very much like him. 'Am Rand! Rad man!'[paragraph break]Leo looks up a second. 'Hey! A twin!' each cheers, before glaring at you. 'IN THE WAY!' Looks like you've got another challenge."
Rand	Rand	false	177448218	--	"darn"	"darn"	"You pretend to trip and tie your shoe. 'Darn.' Rand has seen this trick before, but it was a month ago, so he forgot. He dives at you, and you trip him. It would be merely demoralizing to someone more mentally resilient than Rand, but he is crushed by this loss.[paragraph break]Rand and Leo begin to commiserate together, mumbling about being washups. Maybe they could use a nice word, or a little chat, about anything."
wzup	wzup	false	526524588	--	"whassup"	"whassup"	"'Pshaw, us?'[paragraph break]They're touched by your simple gesture and impressed with your command of slang. Nothing too presumptuous. You tell a white lie about how you know mystic arts and they could learn it too, so losing a fight to you isn't all that bad.[paragraph break]They hail leadership qualities you didn't know you have and vow to help you if you need it. 'Not bad to band,' you mumble. 'Want us? Aw, NUTS.'[paragraph break]They'll be following you around for a bit."
ye hoop	censer	true	267453412	--	"pooh"	"pooh"	"[get-censer]."
ye hoop	censer	true	517618773	--	"phooey"	"phooey"	"[get-censer]."
n-t-air	n-t-air	false	354304876	--	"wont"	"wont" or "won't"	"[wont-maze]."
maze walls	maze walls	false	655479952	--	"mazeltov"	"mazeltov" or "mazel tov"	"You decide to congratulate yourself [if l-m is off-stage and m-l is off-stage]before you get[else]despite not getting[end if] through the maze. Amazingly, it works! You black out, however, as the maze crumbles, and in a particularly silly dream, you hear someone [if nowt town is unvisited]moaning you didn't even explore the maze someone worked so hard to build.[else if l-m is escanned]saying you should not have had to scan that nice man to figure the puzzle, asking for any due dayenu.[else if m-l is escanned]saying you should not have had to scan those nice men to figure the puzzle, asking for any due dayenu.[else if Unwary Runway is unvisited]chiding you for not making it to the end.[else if r10 is unvisited]saying you barely even started.[else if zany meter is unexamined]wondering how you KNEW.[else]saying THEY'D never been that clever, THEY'D have to go through the maze.[end if] When you regain your feet, you notice ether to the north where Nowt Town was."
ether	ether	false	481328338	--	"there"	"there"	"Rand and Leo look at you as you whisper. 'Er...the three... the mist, it's them!' [paragraph break]'Disturb! Bust! Rid! Wallop all.' POW! 'Headshot, hotheads!' Rand and Leo, busier, bruise, calling a routing grunt 'Oi!', then 'Imma Maim!' / 'Oof, foo!' an assailant cries after a so-fit fist-o-foist. 'Yeehaw! Yeah, we...' / 'Ok, dem's smoked.' interrupts [l-r]. Whammo! How MMA!"
keys	keys	false	399372505	--	"syke"	"syke"	"There's nothing more annoying that pretending like you want something, then saying 'Syke!' Or just saying syke, period. The clincher is when you change up with 'Yikes, I...syke!' All the hogs run after you, but you're fast enough to evade them. Once they're exhausted, Rand and Leo grab the keys. You play keep-away until the hogs can't move from exhaustion. 'Dat was clever, boss.' says [l-r].[paragraph break]'Yup,' you say. 'Syke-illogical warfare.' The wall collapses with an 'Aw, LOL. Allow...ow...all!'"
hogs	hogs	false	240508544	--	"gosh"	"gosh"	"You pretend like you're giving up, and there's no way the hogs can beat you. You wink at Rand and Leo as they gang up on you as you make one last obvious effort--BAM! POW! The wall collapses with an 'Aw, LOL. Allow all...ow!'"
log ons	log ons	false	400300169	--	"solong"	"so long" or "solong"	"[increm]"
alert	alert	false	372241587	--	"later"	"later"	"[increm]"
ought	ought	false	352450403	--	"tough"	"tough"	"[increm]"
hawt thaw	hawt thaw	false	250514908	--	"what"	"what"	"You realize you have done a lot of mental calculations with anagrams, but some of it feels rote, and while Elvira probably overdid it, there are times you relied just on calculation without asking deeper questions. Why is hawt-thaw as it is? Even Yorpwald's best scientists can't answer that question. So, you make a commitment to be more than just someone who finds anagrams, once this whole shebang is over, and you remind yourself that puzzles for their own sake only go so far.[paragraph break]The hawt thaw shrivels up and blows away, leaving you wiser--and more intellectually curious--for its brief presence in your life, even if it doesn't help you on your immediate quest."
clock sap	caps lock	true	399038507	--	"capslock"	"capslock" or "caps lock"	"You think WHOAH as the clock sap becomes a capslock button, which you pick up."
disk	skid	false	215229079	--	"skid"	"skid"	"[one of]By some lossless easily reversible algorithm, t[or]T[stopping]he disk changes to a skid with a floppy pop-fly[one of]. The skid's too big to carry, but you can PUSH or PULL it around[or] again[stopping]."
skid	disk	true	215229079	--	"disk"	"disk"	"The skid changes back into a disk, which you take."
flea	leaf	true	210322662	--	"leaf"	"leaf"	"The hopefully only recently dead giant flea becomes a recently dead giant leaf, which looks much better due to all the pretty colors it's turned. It's light for its size, so you pick it up."
gum	mug	true	201780662	--	"mug"	"mug"	"The gum, being gum, morphs easily into a new shape -- a mug with annoying smile. Smug Mugs are, sadly, still in fashion in Yorpwald. But they often have a right to be--some even replenish what's in them."
coal	dirty looking cola	true	149359819	--	"cola"	"cola"	"The cheap-and-dirty physical energy-giving coal turns into cheap-and-dirty mental energy giving cola, which you take."
fount	futon	false	377990806	--	"futon"	"futon"	"The fount turns into a futon, which is better off not wet. [i]There's rest, eh?[r] you think, looking at it[if scratch paper is reflexive], though you're not really tired yet[end if]."
onyx censer	computer screen	true	525123080	--	"screen"	"screen"	"The onyx censer and its green dots swirl around and reform into a black screen! With green text!"
drab yoke	keyboard	true	504410731	--	"keyboard"	"keyboard" or "key board"	"The drab yoke rearranges itself into something more rectangular. The scratchings become bona-fide keys, too. It's a complete keyboard! Well, except for one key[if player does not have yoke]. You are pretty sure you know where this keyboard goes, so you pick it up[end if]."
t-key	t-key	false	123716741	--	"tab"	"tab" or "tab key"	"Well, that wasn't too hard, but it'll be useful if you ever need to organize code."
scratch paper	scratch paper	false	465512068	--	"compile"	"compile"	"You[if player has rom sticks] figure now's a good time to put those ROM sticks in. You[end if] successfully compile your code. Wahoo! Wooha! Core dev covered! But you hear a shwoop, then say whoops. The basic idea works, but the program...ug, sob, bug so bogus. Bug fixing ahead. You can't budge [']til then[if mug is not in cola]. And the task seems daunting, without energy[end if]."
trim socks	ROM sticks	true	636341092	--	"romsticks"	"romsticks/romstick" or "rom stick/sticks"	"The socks unravel and re-ravel into a pair of ROM sticks that will surely fit into the computer when you need them to."
escaroles	casserole	false	682843772	--	"casserole"	"casserole"	"The escaroles become a much more calorie-infused casserole. Not your sort of casserole, but more active gourmand types might gobble it down."
trim socks	ROM sticks	true	540067126	--	"romstick"	"romstick" or "rom stick"	"The socks unravel and re-ravel into a pair of ROM sticks that will surely fit into the computer when you need them to."
compiled code	compiled code	false	304959612	--	"debug"	"debug"	"[if player has rom sticks]It's a long task, so you figure the memory from those ROM sticks will speed things up. [run paragraph on][end if]'Ponder no derp,' you say after some initial setting testing on your Do-Rite Editor and Repro Roper. 'Be rugged, debugger! Sweat for software. Stow fear. Go, black backlog. Can't rig tracing... my bug, by gum. DIE, BUG! I DEBUG!' You sow faster softwares[if t-key is reflexive], despite not realizing what the TBA key should have been and thus needing to use the space bar to organize your code[end if]. You note freeways['] fees awry--for a few years. You find bad asset databases conflating the apparently competing CropCorp, ProcCorp and PorcCorp--and the JetCorp Project--all to E-Viral Computing. The longest sent-log of an imperial email rip. It's just flagrant, but then, you remember how Elvira established code reviews as too boring--'Test log? Get lost!'[paragraph break]'On, self! F'n lose, Felons!' you say. 'Redo, doer!' But you slip. The screen flashes an alarm. 'ION RIG ORIGIN located!' The golden dongle's cover fries, revealing a plain old USB. You need a way out!"
USB	USB	false	219798678	Strip of Profits	"sub"	"sub/bus"	"[sub-bus]!"

table of oyster anagrams
the-from	the-to	taked	hashkey	roomjump	right-word	right-cmd (topic)	the-msg
tumblers	tumblers	false	325842789	--	"spit"	"spit" or "spit on the/ tips"	"Saliva avails to show your disdain for the bar staff and for generosity in general. The bar patrons, relieved to find someone seedier than themselves, look over quite menacingly, daring you to P.S. it."
gins sign	gins sign	false	242774022 [not really covered in the default verb SING]	--	"sing"	"sing"	"Your singing is abominable. But not as abominable as the lyrics or the 'melody' played in the bar right now. So customers only glare at you, but others order another beer because they're not as drunk as you, clearly." [not really covered in the default verb SING]
tunes	tunes	false	501203408	--	"unset"	"unset"	"[remap-or-unset]. The music warps and slows down--everyone glares at you, even the fish who were just complaining about the lousy music here. You're nearest the jukebox, so you're the prime suspect."
tines	tines	false	441090447	--	"inset"	"inset" or "inset stein/tines"	"You place the stein in the tines. It disappears with a big CRUNCH. The fish around look at you suspiciously, including one who just threw a stein against the wall."
recaps	recaps	false	412063240	--	"scrape"	"scrape"	"Skr-r-r-r. You give [i]Capers Recaps[r] a good scratch. The fish in the bar, including the trolls, all whip around. You're the only suspect, since you are the only one with anything resembling nails. Casper shoots you an inspired, snide rip. The other patrons glare at you for doing so, too."
trolls	trolls	false	466688042	olde lode	"stroll"	"stroll" or "stroll past/by trolls"	"Well, you fake confidence as you walk past. It's all about being cool, but once out, you bolt this blot. As you run down Diver Drive, you hear the trolls yelling 'The rests of youse ain't freeloading cheapskates like [him-her], are you? Buy up and drink up!'[if player has stein][stein-drop].[end if]"
clam	clam	false	139082395	--	"calm"	"calm"	"You try some odd combination of singing and storytelling and jokes which really shouldn't work at all, but then, clams aren't very smart, so it goes over okay. The clam ...(cl)ambulates...off. You notice what it was guarding so aggressively: a beautiful urn you feel pulled to and you can't walk away from!"
urn	urn	false	259337118	Disease Seaside	"run"	"run"	"You speed away from the evil urn. You don't have time for riches right now! And while you don't feel you did anything heroic, you wind up at..."
boats	boats	false	294343284	Fighter Freight	"boast"	"boast" or "boast at/to boats"	"You start yelling about how great you are and how you deserve a free ride. A beat-foil lifeboat (not shippish) passes you by, but eventually a fighter freight ('Her Gift') sees you, and they pick you up. Boaters like a boaster, and they hope your settler can provide soaky kayos. But when they ask to see how it can zap things--well, you become less welcome. Some scary crays chase you to the edge of the ship. You'll need a way out!"
pale plea	pale plea	false	265273725	Anger Range	"leap"	"leap" or "leap at plea" or "leap at pale plea"	"You're a bit scared to jump, but when it's a majestic leap--whee! You jump overboard, and nobody can really follow you, since the boat is moving away, and they don't want to be left behind. Even if they could swim better. Your super purse remains water-tight, so no possessions get soaked."
oars	oars	false	258138164	Anger Range	"soar"	"soar"	"The oars seem to have thrusters underneath. Physics! Technology! Energy conservation! In a burst of methane, the raft dances, and you ascend, landing just past the boats, who throw up a cry of 'You sail lousy! Ai!' A second wind carries you to the other shore. When you land, a fish growls, 'Weirdo. I rowed.'"
raft	raft	false	217136535	--	"fart"	"fart" or "fart on raft"	"Channeling frat, uh, co-eds['] humor, you fail to keep your tush shut, thus. Your gust-guts cause the oars, of all things, to grow larger, as if they have gained the gas for propulsion.[paragraph break]It's kind of disgusting, but at least it's not wasteful!"
carps	carps	false	284257131	--	"scrap"	"scrap" or "scrap carps"	"[spike-scrap]."
carps	carps	false	403472058	--	"spike"	"spike" or "spike pikes"	"[spike-scrap]."
pre-haun	pre-haun	false	529723362	--	"unearth"	"unearth" or "unearth haunter"	"A haunter's underneath--[']n unearthed! You're almost unhearted. It's--a weird [b]sausage[r]. You scry a cry as scary...'My lost ruby!'"
c2	c2	false	337433333	--	"trace"	"trace" or "trace crate"	"Based on where you got hit and how fast it hit you, you throw some grass up in the air or something, note how the wood landed, and figure where it came from! But you see no crates-caster. They'll probably chuck something at you when you're not looking, and you'll probably need to use your instincts. (P.S. don't worry, it's not a centaur either, so you can't untrace. You can't trace up and capture it either.)"
crate	crate	false	337433333	--	"react"	"react" or "react to crate"	"This time you're ready. You turn around and know when to look when the crate is about to hit you. You knock it down in mid-air and, in a fit of rage, fling it back into the tall weeds and hit the en-pris sniper. You hear an expression of anger, then scurrying. You won't need to recast the crates."
skis	skis	false	290473956	--	"kiss"	"kiss"	"As you kiss them, they pull up--and dissolve."
knob	knob	false	214612168	--	"bonk"	"bonk"	"BONK! You hit the knob just right. It falls from between the pans and rolls off...well, somewhere." [?? check for knob/skis if it's all gone]
pans	pans	false	248835251	--	"snap"	"snap"	"You snap and, lo and behold, the pans detach and clank and fall over and melt into the ground."
bogus-plains	bogus-plains	false	347641936	--	"splain"	"splain"	"[if span pans are in Lapsin' Plains]You brag, to nobody and everyone in particular, how you SHOWED those pans[else if bonkies is true and crate is reflexive]You yell to whoever's throwing those crates, you'll figure them out[else]You explain to the span pans how you'll get by anyway. It's short on detail, but it sounds impressive[end if]. You feel better after this, now you bragged a bit."
trout	trout	false	471002223	--	"tutor"	"tutor trout/tortu" or "tutor"	"[trout-tut]."
wipes	wipes	true	458473653	--	"swipe"	"swipe"	"You swipe the wipes before Aunt Tuna notices. You can't see anything here that's dingy enough to use them--or use them the right way--on. Maybe something somewhere less well-kept."
bubble wrap	ruby	false	276912353	--	"warp"	"warp"	"You warp the bubble wrap around, and it pops as it reaches its breaking point. Most sardines despise aridness but this sardine hates noise. He runs off, probably to some read-ins.[paragraph break]It's pretty exciting you can go north now and all, but it's even more exciting to find something valuable inside the remains of the wrap: a ruby!"
a-s	a-s	false	367879580	--	"search"	"search"	"'Reach, acher,' you say, stretching a bit more to find something interesting."
o-t	a-p	false	400254014	--	"patrol"	"patrol"	"You zigzag meticulously back and forth searching for a switch to change the ol['] trap into something safer. You keep the rigged digger ahead as a sort of minesweeper. You hear a sound of slid lids from the ground--and the ol['] trap. It's a portal now."
eeks	eeks	false	404819362	Lean Lane	"seek"	"seek"	"You seek the source of the eeks. Your cryings scrying lead to a woman who must be Aunt Tuna. Weeps sweep as she puts nurse-runes on your trout friend's bruises. He points excitedly to you when he sees you. She bemoans the Same Ten Meanest and asks if you will help poor Tortu not get bullied. She has food for you. And, if you do a good job, the raw red drawer. You also notice some wipes on the drawer."
tubs	waste	false	322908696	--	"bust"	"bust"	"As if you've a tub tabu, you expend BTUs as you bust the tubs, eliminating any buts about your strength. Inside the broken tubs, you'd think there'd be a shovel, but it's a corroded decor rod--nah, it's more of a prod, really.[paragraph break]Waste also now lies where the tubs were. You probably don't need to clean it up unless you want to be an extra-good citizen. That prod is puzzling, though. It looks like it could fold out, if you poke it right."
prod	digger	true	262171428	--	"drop"	"drop"	"It rattles as you drop it. You try every which way. Heavy end first, light end first, sideways, at an angle--then POW! It opens. It's a properly rigged digger, now. You can't really call it a prod. But you can, and do, pick it up."
waste	lance	false	437312684	--	"sweat"	"sweat"	"You make real effort to clean up the waste. And you do! You pile them into heaps, in the process finding a very dirty lance. It's a bit too dirty to take."
heaps	heaps	false	345016151	--	"shape"	"shape" or "shape the/ heaps"	"You channel your inner artist and make something beautiful out of the heaps."
ruby	thin hint	false	331207767	--	"bury"	"bury"	"You bury the ruby with your handy rigged digger. Good thing there aren't rubies. You'd be busier. Probably give yourself a bruise. You leave a thin hint so you know where to dig the ruby up, when you need to."
haunter	haunter	false	462435186	--	"assuage"	"assuage"	"'How sad, shadow,' you explain, and you think you might know where someone hid its jewels. You....well, saw and heard stuff. It nods. Makes sense. the Horned Hedron is full of no-good-niks. The haunter waits on your next move."
lever	lever	false	501914680	--	"revel"	"revel"	"Yeah. Why not feel good about yourself before figuring everything out? You know, run up the score a bit. You've earned it."
gleaner	gleaner	false	498444888	--	"enlarge"	"enlarge"	"Rustle. Result: luster! After some intercut tincture, the gleaner is bigger and clearer."
yapper	yapper	false	500608900	--	"prepay"	"prepay" or "prepay the/ papery/ yapper"	"'Oh! Prepaying is totally different from a bribe. I'm sure I can prepay a judge myself to verify that.' He motions you to slip him the gleaner behind your back. Then he goes off to find such a judge, presumably.[paragraph break]Behind the yapper is a cool looking lever. You're not sure it does anything, but man, it's neat to see!"
pins	pins	false	291640279	--	"spin"	"spin" or "spin pins"	"You fiddle with the pins, and click! There you go. The pins retract, and the dialer begins to hum again."[??]
d2	d2	false	335153504	Strip of Profits	"redial"	"redial"	"Beep boop, etc. A charge zaps from the dialer. Then, you hear Elvira screeching, 'WHAT?! HOW DARE YOU! I AM SENDING A CHARGE THROUGH THE LINE YOU WON'T BELIEVE!' A few sirens blare. 'Relays slayer activated.' booms a voice. A noise like an enraged angered grenade. An arson sonar. 'Intruder! Run!' / 'Tired...' you think. Luckily, you find an evac-cave that lets you out safely. You decide to beat feet to the Anger Range. Between Aunt Tuna, the sardine, and even the reluctant trolls--a story.[paragraph break]Casper Spacer himself shakes your hand. 'No hunter! On the run! None hurt!' He had gotten enough gritty writing from when the Horned Hedron still exerted its hold. Now he has a story about--well, someone like you, with fewer faults, but more a tragic hero. He calls for his adventurer friend Red Gil. 'Get this hero[if player is female]ine[end if] a glider girdle!' You learn it easily. Casper is even more impressed. You fly back to the Strip of Profits."
dialer	dialer	false	335153504	--	"derail"	"derail"	"You hear a buzzer re-buzz. 'Goal: Vet Voltage!' Then a pause. Then Elvira's voice.[paragraph break]'HEY! Oh! It's the boys from the horned hedron! This IS just one of your pranks, isn't it?' her voice turns less saccharine. 'You wouldn't do that again, would you? Well, I could send you more...supplies...now, I'll pretend this didn't happen!' As her voice crackles off, pins spring up to shield the dialer from further operation, and the dialer quits humming. It doesn't look broken, but you guess you'll need to do something about those pins.";

table of towers anagrams
the-from	the-to	taked	hashkey	roomjump	right-word	right-cmd (topic)	the-msg
dreads adders	dreads adders	false	353649874	--	"sadder"	"sadder"	"The adders suddenly become less aggressive. You wonder if they feel bad about all the other people they may've obstructed, as they slide harmlessly away."
snider diners	snider diners	false	444333321	--	"rinsed"	"rinsed"	"The diners['] dry wit and mood dampen as a water spray erupts from nowhere--and gets them! Their outdoor dining experience has been ruined. They skulk away to somewhere safer."
ingrates	ingrates	false	561201770	--	"angstier"	"angstier"	"The ingrates suddenly develops the mooniest emotions--why bother to stop you from doing whatever? After a final snit-rage about you not caring about their problems, they decide to go whine by themselves."
ego drains	ego drains	false	553473418	--	"grandiose"	"grandiose"	"The ego-drains suddenly leave you with too absurd of a vision of self-pity. It becomes amusing, and you almost enjoy walking among them. This is too embarrassing for them, and they vanish, having had their own egos dented."
sweatier wait-seer	sweatier wait-seer	false	695435442	--	"weariest"	"weariest"	"The wait-seer blinks as if enlightened, then shakes his head. He's only getting older and so forth. He decides to go find somewhere more scenic to block."
Luc Sym	Luc Sym	false	460633602	--	"clumsy"	"clumsy"	"Luc Sym's muscles shrink, and he loses coordination. 'A hokey KO. Yeah.' But he still stumbles away in embarrassment."
Ms Lucy	Ms Lucy	false	460633602	--	"clumsy"	"clumsy"	"Ms. Lucy's muscles shrink, and she loses coordination. 'A hokey KO. Yeah.' But she still stumbles away in embarrassment."
Mel Fish	Mel Fish	false	450759108	--	"himself"	"himself"	"Mel Fish has a think. 'I'm flesh!' he yells, 'and that's all that matters!' He rejects labels and such, recalling aloud a horrible incident when someone, probably a Burmese bemuser, ungrammatically called him selfish for being hisself. He vows to insult bad grammar more in the future. Then he thanks you and leaves."
bonker	bonker	false	427742080	--	"broken"	"broken"	"It starts whirring and coughing and bleeping frantically, far more than such a simple machine really should. It wheezes 'Failed--to--guard--threat--to--state--Dr.--Yow!' Then it explodes in a shower of rainbow sparks. The way east is clear now."
stinger	stinger	false	559013952	--	"resting"	"resting"	"The stinger whirs around, wheezes, then flops on the ground and rolls off. Your path east is clear now!"
weeds	ragged dagger	true	480850046	--	"sewed"	"sewed"	"The weeds tangle together and pull each other out of the ground. As they do, they reveal two items that seem, well, kind of stupid, but you never know. A ragged dagger and a raves saver, which you take."
raves saver	raves saver	false	472956780	--	"pearly"	"pearly"	"The saver shines a bit, then goes back to being a bit less dingy than it is now. The 'replay player' text disappears, too. Hooray for aesthetics!"
bluster butlers	bluster butlers	false	589852447	--	"subtler"	"subtler"	"The butlers quiet down a bit. Then they sniff at you. No, you do not deserve to go west. But you're not really even good enough for their time at all! They mutter how they're more high class than this, and they should be guarding a mansion and not some silly ... well, they aren't even going to bother to tell you. They glide off in search of more gainful employment."
ur-pine	succor crocus	true	513602032	--	"punier"	"punier"	"The ur-pine shrinks and flails.  As it does, a succor crocus rolls out from under. You take the succor crocus and put it in the welt-proof flowerpot."
arid den	arid den	false	371276262	--	"drained"	"drained"	"You focus, hoping the arid den will lose energy. Just for effect, you yell 'I'm a busy adventurer!' you shout. 'I don't have time for this! But I do things the right way!' You're still surprised as the Nerd-Aid bottles seem to dry up inside, and the arid den's lights dim, until it collapses into itself and underground."
fluster self rut	fluster self rut	false	597948438	--	"restful"	"restful"	"You relax. You stop letting the fluster self rut bother you. You let it just be itself, or be, and let go how it may've frustrated you in the past. And what do you know? It narrows to a bright line, then winks out. You feel more self-confident."
strudel	strudel	false	592462631	--	"rustled"	"rustled"	"You manage to take the strudel without obviously reaching for it[if player is in lost lots]. The sled rut vanishes as you do[end if]. This makes no practical difference but makes you feel smoother. Go, you."
an admirer	an admirer	false	430738621	--	"married"	"married" or "mardier"	"[response-based]. You're slapped sidearm for having misread them, but you're spared spouse opuses."
natives	natives	false	550443085	--	"naivest"	"vainest" or "naivest"	"[vain-naiv]. Now that the natives have moved on, you can go south."
sporties' ripostes	sporties' ripostes	false	709599244	--	"prosiest"	"prosiest"	"The taunts become less vernacular and catchy and more drawn out. Hey! You can deal with these! They make some logical sense if you're not too careful, but you break things down. No, those annoying jibes don't have to bug you any more, not even a little. When you realize this, they disappear, or maybe you can just ignore them now."
reed's ale	reed's ale	false	642046842	--	"released"	"resealed/released"	"[rscheck]You concentrate, and suddenly [el-la-f] [if rese is true]takes a deep breath. 'I've been fooling myself, haven't I? Territorial...materialistic...no more of this. Thank you!' [he-she-c] runs off[else]tries to take another pull from the Reed's Ale bottle, but it is suddenly stuck and won't open. 'I...I didn't need the stuff, anyway! I have better things to do!' [he-she-c] runs off. It's not clear whether those better things involve more deals or just stuff that's good for society, but whatever. You can pass, now[end if]."
an alarming grailman	an alarming grailman	false	354088487	--	"marginal"	"marginal"	"The grailman might still be able to block you, but he doesn't want to risk it. He seems to lose confidence visibly as you speak."
Atheists	Atheists	false	611037040	--	"hastiest"	"hastiest"	"The atheists rattle off point after point as they just can't believe you won't agree with their stone cold logic. Emboldened, you suggest that, if this is all the time we have on this world, they really don't want to waste it on you. 'Yeah!' they say. 'You're right!' They run off for someone else to harass."
lois the hostile	lois the hostile	false	537631654	--	"holiest"	"holiest"	"Lois the Hostile pauses a minute and considers. 'No. That can't be right. But that'd mean THAT, too--and. Whoah. I really do need to change things. I--I've listened to Elvira too much.' She nods at you. 'I bet you helped. I'm not sure how, but thank you.' Then she runs off into the Thearchy Hatchery to start penance."
hostile-is-he lot	hostile-is-he lot	false	537631654	--	"holiest"	"holiest"	"The lot shake their heads. Perhaps, instead of an ol['] heist, they can realize they do not belong in the Hatchery. But what if they are realizing they don't belong in order to sneak in the back way? A spirited discussion ensues, until one poor fellow who sobbingly admits he is confused and unworthy wanders away--and the Hatchery opens for him![wfak][paragraph break]Then the next one realizes how awful he's been, then the next. The last one, looking back, wishes the unconditional best for your deity of choice, who probably should exist if he/she/it doesn't already."
dinger	dinger	false	382846875	--	"grained"	"grained"	"Suddenly, [i]Reading a Dinger[r] loses the sheen on its cover, the bold elevated authors['] names. 'Ugh,' says the Agnostic. 'Why [i]was[r] I reading this? Surely there are better things to do, things to actually LEARN.'"
keycar	keycar	false	409615745	--	"creaky"	"creaky"	"You hear a squeak from the keycar, and its babble begins slowing and warping. Then, suddenly, it zooms off jaggedly out of view, wherever keycars go for repair."
trendies	trendies	false	675249448	--	"nerdiest"	"nerdiest"	"The resident trendies begin talking less smoothly. Then you hear a nasal laugh. And it is downhill from there. They look around nervously. They realize they are, well, over, and they walk off into the distance."
pirates	pirates	false	541160519	--	"pastier"	"pastier"	"You watch as their skin tones lighten a few shades. Even when they blush at their lost perceived virility, that doesn't make it back. Worse, they have no fake spray-tan in their suitcase. They curse and realize they've stayed far away from the coast too long, mumbling about a secret cove you won't find (trust me, you won't[if actionless coastlines is visited], even though you've been up there[else] even when you get up there[end if].) Well, except one who decides to become a priest."
old ice	old ice	false	341000045	--	"coiled"	"coiled"	"The docile old ice bends, cracks, and whirs as it becomes something far more artistic than you could've made with your bare hands. They inspire real awe now, like the Isle Crag Glaciers. You haven't fixed up the palace, but you've made some nice scenery here."
denim	Éclairs	true	326810705	--	"mined"	"mined"	"You hear zzk-zzh noises as the denim is cut away. In a huge old dug hole, you see a pack of éclairs in the hole under them--probably still eatable, given their general shelf-life--and then you fill the hole in, because the Treading Gradient is, well, ravaged enough. You take the éclairs."
fissure	fissure	false	582291393	--	"fussier"	"fussier"	"The fissure begins babbling and yelling at the duck. The duck, annoyed, walks over and pecks at it, inserting its bill and--CLICK. The fence slides inward, along with the fissure, and out comes Dr. Yow. [he-she-c] thanks you briefly and awkwardly. The duck rushes to Dr. Yow's side. It won't be following you any more."
prison ropins	prison ropins	false	522953692	--	"unlocked"	"unlocked"	"The duck sees you fiddling with the ropins. The fissure makes a few odd clicks and vanishes. The duck walks over and you realize if it fits the bill just so--and it does! Yup. It fits. Pins spin. The prison clinks and retracts, and out comes Dr. Yow. [he-she-c] thanks you briefly and awkwardly. The duck rushes to Dr. Yow's side. It won't be following you any more."
atblock	atblock	false	788195264	--	"attentive"	"attentive"	"[agnostic] snaps further to attention, even more eager than before!"
turbos	turbos	false	482585076	--	"robust"	"robust"	"The turbos whir a bit and grow shinier. Robust or bust! You'd feel [if blaster is reflexed]totally safe[otherwise]marginally safer[end if] crossing the river on the boat now."
blaster	blaster	false	486934458	--	"stabler"	"stabler"	"The blaster whirs a bit and grows shinier. It quits making those weird noises. You'd feel [if turbos are reflexed]totally safe[otherwise]marginally safer[end if] crossing the river on the boat now."
weirder red wire	weirder red wire	false	600216532	--	"rewired"	"rewired"	"The wires in the bot boat begin to glow. You realize they could be organized a lot more simply. You point to them, and [agnostic] snaps [his-her] fingers. 'Of course! I can do that...and that... I should've thought of it earlier.' [agnostic] proceeds to find some simplifications you'd never have considered. So many, in fact, the red wire becomes superfluous! 'Man! I feel dumb about all I coulda fixed, now!'[paragraph break]You reassure [ag-first] that it's not a big deal, and it's more important to just DO stuff. [he-she-c] looks unsure until you mention something about how organization helps clear the way for new ideas, but if you already have a ton, go for [']em...[paragraph break]'Oh, wow! That's pretty awesome! Adults always told me I just need to get more organized. But it always sounded so bossy.'"
eastern shore	eastern shore	false	611415331	Mislit Limits	"nearest"	"nearest"	"You figure which way and which coast is the nearest. Yes, that is a real beach, and it is reachable. And it is not a lies isle! Aslosh on the shoals, you look up at the Curst Palace. You are close. You could win it now. But you hold the flowerpot, too, and maybe you have the time to drop off a gift...wherever Renato's friend may be."
Andres	Andres	false	401528293	--	"snared"	"snared"	"Andres suddenly feels a pull, and some sort of tentacle you haven't seen before breaks and outside the Trefoil. It's nothing lethal, but enough to make him flee."
Andrew	Andrew	false	413189100	--	"warned"	"warned"	"Andrew suddenly gulps, as if he hadn't realized the downside of this venture. 'Darn, we...raw end!' he mumbles, then flees. Rodney mumbles 'Aw, nerd.'"
Archie	Archie	false	316598460	--	"achier"	"achier"	"Archie begins grabbing his joints and moaning 'I reach!' then 'I crack a crick!' until Rodney yells at him to get out. Which he does."
Barney	Barney	false	425003395	--	"nearby"	"nearby"	"Barney assures Rodney he'll look for any unused exits captives might sneak out. But you can see him sneaking off once he is out of Rodney's sight."
Blake	Blake	false	255159849	--	"bleak"	"bleak"	"Blake moans, depressed, what does fighting matter? He just wants to see his twin brother Kaleb, who's probably as sad as he is. Nobody particularly tries to stop him."
Bredo	Bredo	false	326930483	--	"bored"	"bored/robed"	 "Bredo gives an exasperated look, shrugs, and walks off for someone more [bored-robed] to follow. Or beat up. Or philosophize with. Whichever."
Cedrick	Cedrick	false	370096195	--	"cricked"	"cricked"	"Suddenly, Cedrick clutches at his knee, then at his elbow. 'I can't do this anymore!' He whines, as he runs upstairs for some rest."
Daryl	Daryl	false	284713801	--	"lardy"	"lardy"	"Suddenly, Daryl grows flabby and is really in no shape for fighting. He excuses himself, and Rodney shrugs."
Demitri	Demitri	false	491329864	--	"timider"	"timider"	"Demitri's face becomes contorted with fear, perhaps fear at how embarrassing it would be if you managed to beat him and Rodney[if number of visible warriors > 3] and the rest[end if]. He runs away quickly, muttering 'I'm tired.'"
Dewey	Dewey	false	506935332	--	"weedy"	"weedy"	"Dewey loses muscle mass before your eyes (don't worry, he's still in good enough shape.) His armor hangs off him loosely. He flees from embarrassment, but Rodney doesn't care enough to follow. Don't worry--he'll gain his muscle back. Working out is a habit for him!"
Edwin	Edwin	false	370670325	--	"wined"	"wined"	"You watch as Edwin's face grows redder and he begins hiccuping. He lurches unsteadily, and then he runs upstairs to where he can lie down. He had only been opposed to alcohol on principle, but he will be more understanding now to others who drink."
Eldon	Eldon	false	345909122	--	"olden"	"olden"	"Eldon rapidly becomes older than the rest of the knights guarding the tavern. He limps off, muttering he wishes he could help. Once outside the Trefoil and free of your magic, his youth comes back, but he bolts in shame. Hopefully he retained some wisdom."
Ernest	Ernest	false	609227513	--	"tenser"	"tenser"	"Ernest, who had looked quite relaxed up to this point, suddenly mumbles to himself about all the things that could go wrong, to resent his way of life. And even if nothing can go wrong, that would just make it even more embarrassing if things did. He whispers a prayer to St. Rene, then zigzags jerkily out."
Geno	Geno	false	303665896	--	"gone"	"gone"	"Geno just walks off, without explanation. Not that you need any. Perhaps he went to seek his twin, Egon."
Goldy	Goldy	false	304154459	--	"godly"	"godly"	"Goldy has a revelation and looks to the skies. 'No more mercenary money! No more violence!' he cries. He runs off, a new mission in life."
Leander	Leander	false	486874275	--	"learned"	"learned"	"Leander suddenly sees the futility of war and aggression, its true cost, and how violence begets violence. 'THAT's what I should've learned in school!' He drops his weapon and armor and runs away."
Marcel	Marcel	false	352212307	--	"calmer"	"calmer"	"Marcel looks less enraged. He wonders what he is fighting for, apologizes to Rodney--and the people in the tavern, and to people he'd forgotten he's harmed. Then he walks off, almost skipping."
Marlon	Marlon	false	348660698	--	"normal"	"normal"	"Marlon feels normal again, but not boring normal! He feels special enough to realize Rodney doesn't need to hold a spell over him. Yay, Marlon! Yay, you!"
Preston	Preston	false	637239940	--	"pronest"	"pronest"	"Preston suddenly looks around. He seems panicked, as if anybody could attack him from anywhere. He turns around and runs smack into a postern. After shaking himself off, he runs further away."
Reggie	Reggie	false	451128271	--	"eggier"	"eggier"	"Reggie suddenly snaps. As do the people next to him. They both mentioned that he smells a little sulfuric, and he runs outside to freshen up. He doesn't come back."
Royce	Royce	false	428847326	--	"coyer"	"coyer"	"Royce clams up, and when Rodney isn't looking, hey slips away."
Shane	Shane	false	332457700	--	"ashen"	"ashen"	"Suddenly, the color rushes from Shane's face, and he looks a bit embarrassed. He looks at Rodney, realizing 'He's an...' before running away."
Terrance	Terrance	false	619470753	--	"recreant"	"recreant"	"Terrance suddenly realizes that unconditional acceptance of pointless duty is lazy in its own way and decides to wander off. [if number of visible warriors is 2]Rodney[else]The others[end if] can surely handle a bunch of drunks."
Tyson	Tyson	false	465003321	--	"stony"	"stony"	"Tyson's emotions grow from hateful to just plain stony. This extends to his feelings towards Rodney as well as the tavern dwellers."
Wade	Wade	false	258957789	--	"awed"	"awed"	"Wade glances at your settler. 'Hmm,' he says. 'A gadget like that, you must be someone important. Beats Rodney's stupid sword.' As he walks away, he mutters some interesting, lucid points that make you feel better about needing or using the settler and quest aides in general. You get the sense if you ever made a game yourself, he'd give some pretty awesome work and advice. You could even picture him helping create a gadget like the settler. Clearly, he was way too good for Rodney!"
Rodney	Rodney	false	499778338	Topside Deposit	"yonder"	"yonder/droney"	"Well. Rodney isn't as impervious to magic as he claimed[rodney-ditch]. You're about to leave, but you hear a 'Do halt!' from the cellar.[wfak][paragraph break]The speaker introduces himself as Ornate Atoner Renato, talking about things he'd been near to, or neat. 'I know who you must be, now.'[wfak][paragraph break]You nod. 'While I learned much world-saving theory, I never had the chance to put it into practice. But I do know this: Dr. Yow, if you can find [him-her], will help in several ways, but the Bland Sad Badlands are a cruel, difficult place. All people blocking your way--though not things--will be at least as tough as Rodney, though you if you listen and ask questions, it may become easier.' You note six letters in Rodney.[add-adj][wfak][paragraph break]Renato hands you a welt-proof flowerpot, which is for an old friend--one who bought property near Castle Apcur, the Curst Palace, and is holding out for property value. Perhaps you will find a flower along the way to put in it. 'I? The one? No, thee! I...old-age gaoled...' / 'Ah, told.' you say, writing the information in your notepad.[wfak][paragraph break]You follow his directions, apparently towards a voice booming 'Stop! Die!' But where you wind up isn't so threatening. Someone's there to greet you! Or to have a chat. A long one--he's a bit of a yacker."
Tetris Sitter	Tetris Sitter	false	560616760	--	"triste"	"triste"	"She suddenly blinks. 'This high score doesn't mean much. I could just keep playing, but no...I'd actually like to DO something. I'm disappointed I haven't...' She ditches the IT-STER and gets up and shakes your hand. 'People call me St. Teri. Some, even without sarcasm. You...must be someone important. I'll try to help you, if I can."
yurts	brownies	true	512172846	--	"rusty"	"rusty"	"The yurts grow tarnished and crumble. Behind them, you see and take some 'nutrition' as cheap as the yurts that held it: Owers[']-Bin Brownies! The snack of choice for people who prefer quantity over quality!"
pester'n serpent	pester'n serpent	false	690693472	--	"present"	"present" or "present serpent"	"The serpent gradually relaxes, then slinks to where it's just there, but you can't see it. It's present but through pester'n."
Curst Palace	Curst Palace	false	695286307	Strip of Profits	"spectacular"	"spectacular"	"That does it! The sky goes from unsightly to sunlighty. You hear lumber rumble--old stuff out, new stuff in--and watch the ground bristle and blister as the curst palace gleams, shines, turns from boney to ebony and radiates a godly day-glo. It is back to what it was and more! [what-about-ed]. You are treated to a great banquet in the castle hall before one of the local wizards offers you a chariot. Not just any one. A Raci-Hot, shaped like a haricot. As you're driven back to the Strip of Profits, you see so many things as they should be. The Bland Sad Badlands are already on their way back to being the Mild Sand Midlands. The towers crumble as you fly back through to the Trips Strip."

table of otters anagrams
the-from	the-to	taked	hashkey	roomjump	right-word	right-cmd (topic)	the-msg
b-b	nude dune	false	409909726	--	"barely"	"barely"	"You alertly retally the weakest figures of speech, what you've done so far--yes, an adverb can be braved. It seems each stalk talks as the top of the barley becomes ragin['] grain, seared, then erased. After the big land balding, you see someone to the west who yells, 'You won't get past ED RILEY! I'm no YIELDER!'[paragraph break]You also carved out paths in the barley to the north and south. A nude dune, however, blocks progress from all around.[paragraph break]Also, cinders remain from the fallout. They seem useless, but you didn't really expect a beryl."
cinders	cinders	false	463338906	--	"rescind"	"rescind"	"You formally scatter the cinders all about. You will not rely on luck or fate or cheats in this final stretch. It will hopefully mark a karma point saved for the next person to save Yorpwald. Which may or may not be you. You can't think that far ahead."
Ed Riley	Ed Riley	false	583131047	--	"reedily"	"reedily"	"'WHAT ARE You...'[paragraph break]'What are you...'[paragraph break]'Hey, man!' he mouths words silently for a bit, his booming voice gone. 'Well--at least you didn't make me share my sandwich! That's...something!' he whines, as he slinks away in embarrassment."
imp1	imp1	false	410184768	--	"angrily"	"angrily"	"The imp stops dancing about and starts hopping in place, saying 'You better not try and go by me!' You're bigger, so it's not very intimidating. It returns to zigzagging, but it's kind of missing the edges, now."
imp2	imp2	false	615937733	--	"brutely"	"brutely"	"The imp loses some dexterity and gains some strength. Not enough to beat you up."
imp3	imp3	false	641833229	--	"enragedly"	"enragedly"	"The imp flares up for a brief moment, explaining how it gets mad having to be patient. It didn't become an imp for this..."
ram1	ram1	false	593419698	--	"loathingly"	"loathingly"	"[shout-check]"
ram2	ram2	false	569909740	--	"stoically"	"stoically"	"[shout-check]"
ram3	ram3	false	716493096	--	"tersely"	"tersely"	"[shout-check]"
ghoul hat	ghoul hat	false	445734359	--	"although"	"although"	"You begin explaining that you just needed a way through, and besides, the stalks wouldn't have been harvest-able anyway. Mr. Lee relaxes and breathes, and as you speak, the ghoul hat releases its hold on him. He tosses it aside, and it breaks and vaporizes. 'But--but Rev. Howe said...he would watch over the ghoul hat I was forced to wear.'[paragraph break]Mr. Lee mutters on about hard times these days, still suspicious, but he's willing to listen. He points to the picture of Rev. Howe. He's suddenly doubting it's for his safety, now. "
p-2	p-2	false	667670490	--	"however"	"however"	"Mr. Lee doesn't seem willing to discuss the painting, but as you talk, he bends a little more. Yes--it was Elvira who put the painting there. Or her agents. To make sure he didn't use his magic powers unwisely. You promise to re-bran what is barren. He perks up. 'Then you're [tgw]. It's--well, I never heard your side. You didn't just change things to things. Perhaps I can help you.' He lays his hands on you. You feel [if power-back is false]a slight shock--your mordant powers are now merely dormant![else]a shock similar to what the eels gave, and you shake exaggeratedly and nod your head in thanks.[end if][paragraph break]As you two rip up the poster for fun, he also asks if you can hop in and make his seed site the seediest--once you do the whole country-saving thing. Of course you can. It's the least you can do."
sea cube	sea cube	false	496604299	--	"because"	"because"	"'Well, now that you put it that way...' You hear a rush of water. Le Mer has unlocked the sea cube. Eels come out. They look up at you--they may be able to understand you."
eels	eels	false	405700023	--	"else"	"else"	"The eels seem to understand you. They squirm across the pool, and somehow, the wire weir opens. The eels create a path for you to swim to the allot atoll. There, you feel a shock through your body[if power-back is true] much like in Mr. Lee's bran barn[else], and your mordant skills are no longer dormant[end if]."
atmo-moat	atmo-moat	false	243725566	--	"atom"	"atom"	"You summon up all your powers for this one. With a swoosh, the atmo-moat swirls into a single atom, which flakes off to obscurity.[paragraph break]Even if they weren't long words, that took a bit of energy. However, there's probably even more danger inside."
t-bossily	t-bossily	false	506485351	--	"bossily"	"bossily"	"The macks cross over from confidence to ordering around, and Gretta groans. She'd given them the benefit of the doubt before, but not now." [begin macks 7]
t-nastily	t-nastily	false	491645247	--	"nastily"	"nastily"	"The saintliness act breaks out into competition, which becomes cutthroat, and one idiot, then another, lets slip that he could impress a better woman than Gretta with a nice-guy act. They scramble to assure her they didn't mean it that way, but she's not fooled."
t-seedily	t-seedily	false	594081210	--	"seedily"	"seedily"	"That thing they were doing? With their eyelids? Well, Gretta seems to have caught on, now. She laughs and groans a bit, and the macks accuse each other of being too obvious."
t-shadily	t-shadily	false	377939109	--	"shadily"	"shadily"	"You manage to make them let slip a mean dis of other maidens."
t-snidely	t-snidely	false	535182609	--	"snidely"	"snidely"	"The macks refer to Lindsey a little too unfavorably and ignore Gretta's hint that she doesn't really hate Lindsey. Their apologies fail."
t-starkly	t-starkly	false	516001874	--	"starkly"	"starkly"	"The macks finally get a bit too explicit about looks, and Gretta is able to overcome their flattery."
t-cattily	t-cattily	false	448579376	--	"cattily"	"cattily"	"The macks each lose their composure, each putting down the next guy's uniqueness or virtues or whatever. They're talking more sense than before, but the truth hurts, and things get out of hand quickly."
t-tearily-irately	t-tearily-irately	false	539593685	--	"irately"	"irately" or "tearily"	"One suitor is reduced to tears as he talks about reality, or his version of it. 'Dude, that was pathetic,' someone else says. 'Yet...LIAR! True-luv vulture!' The argument reflects well on no-one."
t-blearily	t-blearily	false	508716411	--	"blearily"	"blearily"	"They interrupt each other, but not forcefully enough. Gretta comments, 'fascinating,' further cutting them." [begin MACKS 8]
t-ribaldly	t-ribaldly	false	401939391	--	"ribaldly"	"ribaldly"	"The macks move from courtship to...well, less than courtly desires. She wanted to believe they would not, but they couldn't help it."
t-formally	t-formally	false	482441177	--	"formally"	"formally"	"The macks over-explain how they're fly/moral, and that's a critical lapse in concentration! Gretta has the time to ask obvious questions and make them contradict each other. And shortly THAT's all over."
t-coitally	t-coitally	false	473635774	--	"coitally"	"coitally"	"Sometimes you just have to let idiots talk about what, apparently, all men think about. With these guys, it's like you almost didn't have to do anything."
t-modestly	t-modestly	false	662820003	--	"modestly"	"modestly"	"Modesty is a good thing--well, in the long term. In the short term, the macks['] backtracking is too brazen, and it ruins any hope of impressing anyone with false humility or braggadocio."
t-shabbily	t-shabbily	false	393747830	--	"shabbily"	"shabbily"	"The mack discussing his lab tries to supply details, but the more he makes up, the easier it is for others to pounce on his inconsistencies--but their trolling is so crude, nobody comes out looking too good."
t-shoddily	t-shoddily	false	471132957	--	"shoddily"	"shoddily"	"The two macks can't keep up their production. They mutter 'D'oh! Sly is...' realizing they've worked into a dead end."
t-silently	t-silently	false	671077377	--	"silently"	"silently"	"The macks run out of words to describe their style nit, and they begin miming, but that just makes them look a parody of themselves. With time to think, Gretta is able to say how sad they look."
t-steamily	t-steamily	false	614619001	--	"steamily"	"steamily"	"The macks begin to discuss the disgraceful commercial in much more detail than is necessary, and their facade of refined alcohol palette, etc., is broken."
t-suddenly	t-suddenly	false	616324659	--	"suddenly"	"suddenly"	"The macks['] timing is ruined. They started well, but the slightest disruption and--wham! They're just not as good as the paid actors who've been practicing way more."
t-stupidly	t-stupidly	false	628150776	--	"stupidly"	"stupidly"	"The macks reiterate how they don't let duty slip, but it's way too heavy-handed. Gretta has to laugh a bit."
t-martially	t-martially	false	531864386	--	"martially"	"martially"	"The men, in an effort to prove their worth, begin talking about that most manly of subjects, war. They talk very loudly and begin discussing cool ammunition and weapons and blood and guts. And shoot-em-up games. Gretta yawns conspicuously, clamming the macks up." [begin MACKS 9]
t-sincerely	t-sincerely	false	746289017	--	"sincerely"	"sincerely"	"Gretta nods as the macks make a complete u-turn and discuss what they really think of celery. While it's probably good, long-term, for them to be more sincere, their immediate aims have been foiled."
t-sobbingly	t-sobbingly	false	530137500	--	"sobbingly"	"sobbingly"	"The macks change up the mood, but it is for the worst. One starts crying, then others do--and it's pathetic enough, their plucky efforts to persuade without logic fall to pieces."
t-tediously	t-tediously	false	748843503	--	"tediously"	"tediously"	"The macks begin whinging with the same old argument, going dreadfully off-subject, and so forth. Suddenly, their nonsense is less believable, or fun to believe."
t-wearingly	t-wearingly	false	645925650	--	"wearingly"	"wearingly"	"They start repeating their arguments, and finally, Gretta draws up the courage to explain it's getting old."
t-drawlingly	t-drawlingly	false	592962469	--	"drawlingly"	"drawlingly"	"The macks begin talking slower, and suddenly, their conversational hold is broken. Gretta realizes there's no good way to make home repair discussions more exciting and says so. She looks relieved." [begin MACKS 10-11]
t-emotionally	t-emotionally	false	789771536	--	"emotionally"	"emotionally"	"Their matter-of-factness is disrupted. They had to play it straight, but they aren't able to. Gretta shoos them away with her hand, cringing to think she was suckered in the first place."
t-desperately	t-desperately	false	948982071	--	"desperately"	"desperately"	"The macks['] deep stares no longer look profound, but a bit creepy and needy. Their concentration is broken."
t-despairingly	t-despairingly	false	781752737	--	"despairingly"	"despairingly"	"The macks become upset Gretta does not recognize just how swell they are--as a group, and individually. Gretta shrugs and shakes her head, maybe more at herself than the macks." [begin MACKS 12]
Merle	Merle	false	683905568	--	"honestly"	"honestly"	"You entrench an enchanter with a well-timed 'Honestly?' They throw out anti lying litanying but you're all 'Few LOLs, fellows.' It's not pretty, but their camaraderie's shattered. They begin squabbling about whom Elvira likes better. It's a welcome change."
raptor	parrot	false	431763978	--	"parrot"	"parrot"	"The raptor turns into a parrot, which squawks gratefully for being rescued. It squawks about not wanting to be a raptor again--except briefly to take revenge on whatever turned it into a raptor in the first place, and maybe you can help it.[paragraph break]With the raptor's bulk out of the way, you see some weird stuff behind."
parrot	raptor	false	431763978	--	"raptor"	"raptor"	"'A bird! Rabid! Dinosaur is around!' croaks the parrot. before it changes. 'Repel it, reptile!' you hear a woman cry. The raptor gets to ur-thing hurting and takes out the hydra to the west! Merle and Elmer are paired, repaid, running away as smarting migrants. 'Twist, twits,' you smirk under your breath.[paragraph break]The parrot's revenge sated, you return it to its normal form. 'A whistle is wealth,' it says, dropping the whistle to you before flying off.[paragraph break]You hear a female scream. 'Nemesis seems in,' you mutter. But maybe that whistle is worth a look, first. And you might want to [if medals are prefigured]figure out the medals[else]recall what you did with the medals earlier[end if]."
pines	snipe	false	419446388	--	"snipe"	"snipe"	"The tip of one pine becomes a snipe's bill, the trunk becomes the spine--and you have a snipe."
corona	racoon	false	324129868	--	"racoon"	"racoon/raccoon"	"[extra-c]The corona grows wider, becoming a living thing."
nails	snail	false	266175977	--	"snail"	"snail"	"The nails arrange themselves in a sort of spiral, expand, and turn into a snail."
thrones	hornets	false	593056280	--	"hornets"	"hornets/hornet"	"The thrones shorten--a throne, another--HORNETS! Thankfully, they ignore your waspy yawps."
owls	owls	false	332375155	--	"slow"	"slow"	"The owls['] swooping speeds hit such lows they they swoop back to their ambush place in hiding. You notice it isn't a very comfortable one, and you help them make a nest from tens of nets. They won't attack again. You refuse anything for the additional magnanimity but ask if any towels need to be changed to owlets. Thankfully not very many.[paragraph break]With the owls dispersed, you notice other, calmer animals."
ocelots	ocelots	false	548714671	--	"coolest"	"coolest"	"The ocelots perk up and, instead of pacing aimlessly around, develop a swagger. Their SlopInc Clip-ons get close to, then are, the real thing. Yes, LookKool shades. Each pulls out a BMOC comb to fix his fur before stashing it for later use."
leopard	leopard	false	445979194	--	"paroled"	"paroled"	"The leopard perks up as its handcuffs are dissolved."
badger	badger	false	287365426	--	"garbed"	"garbed"	"The badger looks down and realizes it is wearing clothes. B-grade, garb that won't make you grab or brag, but it can't be drobe-bored. It's less embarrassed now and nods to you gratefully. Perhaps it can return the favor some day."
satyr	satyr	false	409254857	--	"artsy"	"artsy"	"The satyr shakes a bit as if he has had a vision. He begins drawing figures in the air, standing on his hind legs and conducting an imaginary orchestra. He seems less strictly focused on his own survival now."
whistle	whistle	false	534280357	--	"deeply"	"deeply"	"It takes some time, but you manage to move from making shrieks to something more rumbly and enduring. Noting the writing on the whistle, though, you make sure not to use it til you need to."
medals	medals	false	482616124	--	"quickly"	"quickly"	"The medals clink together. You feel infused with speed. Even your fats feel fast."

table of others anagrams
the-from	the-to	taked	hashkey	roomjump	right-word	right-cmd (topic)	the-msg
moss cap	compass	true	433635024	--	"compass"	"compass"	"The moss flattens and clears. A stupid weedy bit becomes the compass needle. Congratulations. You now have something which might actually be able to tell the direction!"
lumps	plums	true	400734724	--	"plums"	"plums" or "plum"	"The lumps grow circular and purplish, and suddenly plums are rolling all around."
eerie blurbs	blueberries	true	891090201	--	"blueberries"	"blueberries/blueberry"	"Getting rid of these blurbs is almost a public service. Pulps splup as the vandalism vanishes."
b-w	strawberries	true	980775919	--	"strawberries"	"strawberries/strawberry"	"The barriers west collapse into a pile of strawberries."
spear	pears	true	393057655	--	"pears"	"pears/pear"	"The spear splatters into more pears than you can hold!"
slime	limes	true	386961913	--	"limes"	"lime/limes"	"The slime schlurps into a pile of limes too cumbersome for you to carry."
pagers	grapes	true	425657357	--	"grapes"	"grapes/grape"	"Poof! The pagers turn into grapes. 'Wow, got rid of the noise AND got me more merchandise.'"
barren cries	cranberries	true	761370255	--	"cranberries"	"cranberries/cranberry"	"The cries and the screen swirl into a reddish mist and become cranberries."
peanut cola	cantaloupe	true	637943038	--	"cantaloupe"	"cantaloupe"	"The cola bottle turns into a sort of tannish sphere, and you hear pulps splup inside."
mad train	tamarind	true	391814053	--	"tamarind"	"tamarind"	"Well, you aren't sure if it is that much of an improvement, but a fruit is a fruit. Curtis seems pleased. Everybody gets suckered into buying one of these once, and after a few months, they forget how nasty it was and buy it again."
silly shirt	apples	true	443013650	--	"apples"	"apples/apple"	"The t-shirt crumples into a few apples. Well, you may not have ESP, but it's something almost as good. You remember a pen pal called Papa Len, too."
riot cap	apricot	true	410438606	--	"apricot"	"apricot"	"The riot cap rounds into an apricot, which you take."
sorer bogey	gooseberry	true	844616803	--	"gooseberry"	"gooseberry"	"A howling from the well, and the reddish letters fly off! A rather large gooseberry falls on the ground. You pick it up."
stucco	coconuts	true	560113623	--	"coconuts"	"coconuts/coconut"	"The stucco that was part of the well congeals into a hairy ball (don't ASK where the hair came from) and rolls on the ground."
miser ruble	mulberries	true	808940340	--	"mulberries"	"mulberries/mulberry"	"The ruble blossoms in your hand, turning to a more pleasant sight: a clump of berries."
barber sickle	blackberries	true	732304866	--	"blackberries"	"blackberries/blackberry"	"The barber sickle grows into a bunch of vines which sprout black fruits, and a basket pops out to hold them. How convenient."
pryer bars	raspberry	true	704483418	--	"raspberry"	"raspberry"	"The drupelets in the pryer bars pop out and multiply, leaving you with raspberries."
harmonicas	maraschino cherry	true	494589373	--	"maraschino"	"maraschino" or "maraschino cherries/cherry"	"Several painfully tinny chords later, the off-red harmonicas become a maraschino cherry."
pipe panel fence	pineapple	true	669912106	--	"pineapple"	"pineapple"	"With a plain peep, the fence collapses into a pineapple!"
videotape collection	persimmon	true	707273074	--	"persimmon"	"persimmon"	"The unappetizing covers on the videotape collection schlurp together to form something better looking--a persimmon."
magenta rope	pomegranate	true	769822574	--	"pomegranate"	"pomegranate"	"With a splatch, the note and rant get yellowed and ball themselves up around the rope to form a pomegranate. You have done either Curtis or society a favor by getting rid of those writings."
l-o-p	kumquat	true	454868268	--	"cripes"	"cripes"	"Man! The way you said it, man, Len Craig has another look. Kumquats are indeed an order of magnitude off. He hands you one as gratitude for giving pricees precise knowledge."
caution	papayas	true	388128590	--	"papayas"	"papayas/papaya"	"You point at the auction caution and wave down someone passing by who's relieved SOMEONE here seems to know the rules. He gives you some fruits for your troubles."
quince	quince	true	450223472	--	"cinque"	"cinque"	"You hold up five fingers and repeat 'five' in several languages. Italian finally works. Len pauses, then nods his head. He wipes off the NAME A PRICE markering with a rag."
peach	peach	true	267747770	--	"cheap"	"cheap"	"You go for a direct approach, which works great. Probably won't work again, but you feel a better patron for this potent barter."
pre-mang	mango	true	242122758	--	"among"	"among"	"You mingle among the shoppers for a while. Eventually you find somewhere you didn't see before. You stifle an OMG when you see a mango. You stop to haggle. It goes well."
lemons	lemons	true	485229152	--	"solemn"	"solemn"	"Thinking all 'I frown for win' at the lemons, you mind-trick Len into lowing his price. 'Enjoy your rickets sticker.'"
melon	melon	true	388955186	--	"melon"	"mo len" or "len mo"	"You ask Len if this melon is REALLY the only one for sale. He smiles, then gives you a much nicer melon from a secret stash."
rapt figure	grapefruit	true	694430761	--	"grapefruit"	"grapefruit"	"The figure gives a look as if it's eaten something sour before it rolls into itself, into a lumpy yellow ball--a grapefruit!"
mean trowel	watermelon	true	815317707	--	"watermelon"	"watermelon"	"The trowel seems to inflate from within and take on a much greener shade. It becomes a watermelon--not a big one, but healthy looking enough."
nectarine	nectarine	true	648047304	--	"ancienter"	"ancienter"	"The unripe nectarine becomes salable. You swipe your tekno-token, taking only one: multiple nectarines might have transience."
green stain	tangerines	true	757915387	--	"tangerines"	"tangerines/tangerine"	"The green stain coalesces and brightens...and becomes a few tangerines! It changed color, too. Every single one ain't green."
inapt paint	guava	true	778533808	--	"reversed"	"reversed"	"The section of wall containing inapt paint does a 360. A long guava rolls out from behind. You pick it up. [greedy-person] nods, impressed."
pugnacious plant	rhubarb	true	352061340	--	"rhubarb"	"rhubarb"	"The plant's arms turn to stalks of rhubarb, which fall off. What looks like an evil spirit departs from it as it slinks into a corner, and the plant begins to ... vegetate. [greedy-s] sniffs at the rhubarb with disdain. Yay, more fruit for you. Or, well, stuff that's prepared like a fruit."
b-r	breadfruit	true	619813094	--	"breadfruit"	"breadfruit"	"You decide the raft would be better as breadfruit, whatever that is. The raft swirls into something more spherical, but still nothing close to what you expected. It's odd and bumpy, but you take it."
briar screen	cranberries	true	761370255	--	"cranberries"	"cranberries"	"The prickly screen turns into (you hope) less prickly cranberries."
an-a	small yellow banana	true	162797375	--	"nab an a"	"nab an a" or "nab"	"The A expands and curves in your hands, the middle-bar melting into the legs, and you have a banana."
orange	orange	true	391177517	--	"go near"	"go near"	"You move cautiously, with moves as sneaky as [greedy-s]'s that eventually got [him-her] tarred. [he-she-c] sees you grab it but sniffs 'O anger. A goner.' Sour grapes at the orange!"
coin	icon	false	207258516	--	"icon"	"icon"	"You vacate your mind of material thoughts. The coin becomes too omen-y to be money."
coins	s-c	false	303532482	--	"sonic"	"sonic coins" or "sonic"	"Blam! The coins begin to rattle gently and don't stop."
icons	s-i	false	303532482	--	"sonic"	"sonic icons" or "sonic"	"Blam! The icons begin to rattle gently and don't stop."
coins	icons	false	303532482	--	"icons/icon"	"icons"	"You vacate your mind of material thoughts. The coins become too omen-y to be money."
s-c	s-i	false	303532482	--	"sonic"	"sonic icons" or "icons"	"You vacate your mind of material thoughts. The coins become too omen-y to be money."
coins	icons	false	303532482	--	"icons"	"icons"	"You vacate your mind of material thoughts. The coin takes on a much cooler design."
coins	s-i	false	607064964	--	"sonic icons"	"sonic icons" or "icons sonic"	"You do a little double-think-move on the coins. They become something entirely different."
viewer	viewer	false	601028460	--	"review"	"review"	"You conduct a thorough review. Of hard stuff and easy stuff and what's most relevant. It's easier than you thought."
searcher	searcher	false	581009492	--	"research"	"research"	"You conduct thorough research. Of hard stuff and easy stuff and what's most relevant. It's easier than you thought."
perp-priv	perp-priv	false	376061830	--	"prep"	"prep"	"You use the viewer and searcher in tandem and learn about self-presentation, being charismatic, etc. While part of it seems artificial and open to abuse, it's easier than figuring out anagrams, that's for sure."

chapter auxiliary text and rules

to say wont-maze:
	if cur-score of presto is 1:
		say "Why not take care of the big things first? And what better way to start than with an emphatic word? You remember when younger how you could say WON'T. And it works, here, too. The maze dissolved, leaving an ether to the north";
		continue the action;
	say "While it's not quite formally an interjection, you remember how many interjections are bowdlerizations or shortenings of other word phrases. It's worth a try. The Internet itself has been responsible for a lot more sensible interjections than that. So, you yell, 'WON'T!' The maze melts and collapses.";
	say "[line break]Perhaps you won't get full style points, but so what? It feels good to dispel a maze with one short word"

to say trout-tut:
	say "How to start... 'Branded nerd? Bad. Karate? A taker?' You show the trout how to paste a pest with some slick licks. As tutorer, you show him how to avoid the rote rut of torture. Most of what you say is a po['] combat boot camp, but he gives a trouty tryout, as a monkish moshnik with frail flair, and you give a kind dink to boost his confidence. Aunt Tuna clucks that she TOLD him that, and if he'd listened to HER when SHE said it instead of having a ton-not-fair fair--but it's as pleased as she's been in a while![paragraph break]";
	say "She explains someone deserves a reward. He's all 'A donut, Aunt! Do!' but she says diabetes is not the best idea. Not even a tater treat. But she hands you bubble wrap--a present from someone named Valeri, who used to be so nice but never shows up any more[if tray is visible]--and also jerks her head towards the tray[end if].[paragraph break]You doubt Aunt Tuna has anything else for you[if wipes are visible], though maybe you could sneak the wipes[end if][if dent is visible]. Maybe you could fix the dent[end if]. But you should probably explore elsewhere";
	now player has bubble wrap;

to say get-crust:
	now swears is number of solved regions + charges of toaster;
	now player has crust;

to say new-thing:
	say ". A weird device falls from the satchel, which wasn't tied tightly at all. You pick it up, along with [if treatise is off-stage]a treatise that was tied in with the latches and [end if]a purse. Super[if treatise is off-stage].[paragraph break]When you stuff the treatise in the purse, it doesn't seem to take up any space in there[else].[paragraph break]You stuff the treatise in the super purse carelessly, and yet, there's still room for more[end if]. The purse looks like a good place for everything except your lamp, so you fold the satchel and put it in the purse, too. The satchel sinks into the folds--but it's surplus, now";
	now satchel is in lalaland;

after fliptoing satchel (this is the give you tons of stuff if Gunter was by rule) :
	if player does not have treatise:
		now player has treatise;
	now player has the letters settler;
	now player has the super purse;
	continue the action;

check fliptoing disk:
	if yak is on skid:
		say "The yak doesn't need that sort of shock." instead;
	if location of player is not shack:
		say "Exposing a disk to whatever germs are on the ground seems inadvisable, so you take hold of the skid--pre-disk, whatever, first.";

after fliptoing towers-x:
	now ivy tower is in Strip of Profits;
	now ivory tower is in Strip of Profits;
	continue the action;

to poss-d:
	d "Taking away a max point.";
	decrement poss-score of mrlp;

to min-up:
	d "min-up codepath--point likely added in carry out fliptoing rule.";
	increment min-score of mrlp;

to min-and:
	d "min-and codepath -- forcing point and min point adding. Should be used for odd non-flip points.";
	increment min-score of mrlp;
	reg-inc;

check fliptoing bench:
	if old giant is not visible:
		say "You get astride the bench for a while, but it's pointless with nobody around." instead;

purse-stolen is a truth state that varies.

to say purse-gone:
	now purse-stolen is true;

to say dust-b:
	say "[one of]. You say, 'Dust, be busted' to clear up the mess in the air. You can go [b]IN[r] to the stable, now, to look around there[or][stopping]";

to say hit-win-behind:
	say "Ah! There's the Hit Win button. Within a compartment, behind a panel you missed earlier. After a few ol['] duhs, 'Should hold us. Uh, sold?' you say to--oops, you forgot No-Gal Logan left. Panic! 'Cap'n, I...' You feel like a saboteur with this boat ruse, yet the deeps speed by your cripple clipper. The ol['] ship has polish--it's a rigged red gig, but it stops between two reefs. You're only in position to win, but that's still a pretty good deal. One more magic thing?[no line break]";

to say rodney-ditch:
	let vw be number of visible warriors;
	if the player's command includes "droney":
		say ". [if vw > 1]Rodney seems to grow tired of giving the orders. He loses his crispness and[else]Rodney begins babbling about something or other, then[end if] looks around, embarrassed--[if vw > 1], his remaining pal[rodpals] can't be bothered to follow such a dry one[else]talking to himself, really, now[end if]";
	else:
		say ". Well, maybe he can repel the lightning and sparks kind, but not yours. He is blown through the doorway and looks up, dazed. Nobody goes to help him";
		if vw is 0:
			continue the action;
		say ". The remaining warrior[if vw > 1]s[end if] even ask[if vw is 1]s[end if] if you can work your magic to make [if vw > 1]them better people[else]him a better person[end if]. After a surprisingly illuminating speech that avoids the major self-help catch-phrase, you make an excellent case for self-improvement coming from within, and not worrying about being perfect, or getting a perfect score. It goes over well, and [list of warriors in Loftier Trefoil] thank you profusely before going on [if vw > 1]their ways[else]his way[end if]";

to say read-canflip:
	say "[one of]. Reading the notice [if notice is examined]again[else]briefly[end if], you see that things won't be this flexible out in the real world[or][stopping]";

to say stein-drop:
	if player has stein:
		say "[paragraph break]Oh, as you leave, you drop and break the stein. Tiens";
	now stein is in lalaland;

to say rodpals:
	if number of visible warriors > 2:
		say "s";

check preferring sometimes abbreviated room descriptions (this is the Marlon versus built in commands rule) :
	if Marlon is visible:
		try fliptoing Marlon instead;

to say response-based:
	if the player's command includes "married":
		say "Your admirer flashes a ring on their finger, which may or may not have been there before (the ring, you silly,) to prove they're married and don't need you and wonder what WERE they thinking. Such a leer--a sure lech";
	else:
		say "Your admirer gets more irritable quickly. Is this how you treat your fans? You really [i]are[r] more interested in the duck behind them than, well, them";

spikes is a truth state that varies.

to say spike-scrap:
	if word number 1 in the player's command is "spike":
		now spikes is true;
	say "'Err, boys? Be sorry.' After the rotters['] retorts, you start a scrap and spike the carps and pikes into a nearby wall. A few cuffs and they scuff, spout pouts and become tense teens. You lash out 'Ha, louts!' then 'Scoot, coots! Scat, cats! Cower, o crew!' for emphasis. 'Shlep-helps from a Pedo-dope! [if player is male]He's[else]She...[end if] a loss.' one yells back, seeing you comforting the trout.[paragraph break]The little trout, bruised, gives a side rub and looks up gratefully. 'My aunt Tuna will be proud of me! Or you! C'mon. I'll set a seat! Tea's east!' He runs that way.[paragraph break]Done fighting, you notice a scrawl crawls across the ground. You feel angry for taking so long to see this. Maybe there is some other angry force around the Anger Range. You even think you hear something"

check fliptoing old giant:
	if list o toils is unexamined:
		say "You hear a giant's footsteps and hide under the bench in fear. He can't see anyone and thus runs off, complaining how he has nobody to complain to. Maybe if you had a reason to talk to him, or a purpose here, you might listen a bit better. [if circle is not visited]Maybe if you could find a way inside that church[else]Perhaps you could find something to do from Brother Horbert[end if].";
		preef bench instead;
	if old giant is off-stage:
		say "You hear a giant's footsteps in the distance--but your talk with Brother Horbert has helped you be fearless.";
	if U NERD ENDUR REDUN is not off-stage:
		say "You don't need or want another round of that." instead;

to say xtra-help:
	if lager is in Boredom Bedroom and divorces is in Upscale Capsule:
		continue the action;
	if lager is in lalaland and divorces is in lalaland:
		say ". Your songs aren't just soulful, though. They're built on your experience with alcohol and media abuse and glorifying consumerism, from the lager and DIVORCES. They do society good";
		continue the action;
	if lager is in Boredom Bedroom:
		say ". Your songs help a few people shun greed. They still don't take the place of drinking for some sad folk";
		continue the action;
	say ". Your songs don't cause any social change you hoped, but they do decrease the drinking rate";

instead of fliptoing latches:
	say "The satchel shakes a bit, but since you removed the settler, it probably can't fully reform the latches. Well, you don't need them."

unset-not-remap is a truth state that varies.

to say remap-or-unset:
	if word number 1 in the player's command is "unset":
		say "You fiddle with the knobs and such on the jukebox according to the instructions";
		now unset-not-remap is true;
	else:
		say "You brave the electrical underpinnings of the perma-amper to create an ampish mishap";

to say troend:
	say "Something about the song reminds you of that townhome in your hometown. O glum mogul! [iced-reigns]. Writing songs is your sort of doing nothing. Fortunately, you're skilled enough in the art of doing nothing to make the switch fairly quickly. Once you have irreversibly adjusted your quit note quotient and signed a short-week worksheet, you reenact gloom you remembered in this conglomerate. Is life I, Self, I? Lies, if...[paragraph break]Your condensed rise to the top of this business business makes you efficient writing songs too. [twiddle of table of songs you could write and 4]. The satirical edge you didn't mean to put in is a big hit in Spoiloplis and beyond. Your songs fully restore the spirit of a common man and shred the oligarchs['] rash logic[xtra-help]. And no censorship will enrich sops.[paragraph break]Exhausted, you realize you have no way home. But you meet a fellow called Tristan, startin['] a company called Tin Star Transit. You pay with stolen knick-knacks from your upscale capsule. The ride's low frills but extremely fast--to the Strip of Profits. So ends your paydirt day trip: poverty to the very top, IOU phear to euphoria."

to say iced-reigns:
	if word number 1 in the player's command is "decide":
		say "You feel de-iced";
	else:
		say "You drop the reigns";

to say if-wierd:
	if the player's command includes "wierder":
		say "(I before e, ok, let [']em have it.) ";

after fliptoing lamp (this is the move lamp rule):
	now dope op-ed is in study;
	continue the action;

to say what-about-ed:
	if Tetris Sitter is reflexed:
		say "St. Teri comes out to see the results of your magicking. 'Did OK, kiddo!' she yells, shaking your hand";
	else if serpent is reflexive:
		say "The serpent slinks away behind the den to the west, to avoid the rumbling";
	else:
		say "From inside the den to the west, you hear some bozo yelling about property values. Good for him, you guess"

to say extra-c:
	if word number 1 in the player's command is "raccoon":
		say "(Ignoring the extra C.) ";

after fliptoing hump:
	if Leo is in grey gyre:
		consider the Leo-Rand lackey rule;
	continue the action;

instead of doing something with satchel when player has satchel:
	if action is procedural, continue the action;
	say "You've gotten the settler from the satchel, and you don't need to do more." instead;

to say eicond:
	say "[if cur-score of troves is 0]You can picture yourself, successful, extolling this book as what got you started[else if player is in rathole]You feel you can and will do better than here[else if player is in Bustle Sublet]You dare to feel superior to whoever might be walking around here[else if player is in Drain Nadir]You know you deserve better than this. It's a temporary setback[else if player is in Boredom Bedroom]The book convinces you that average is not enough for a thinker like you, as long as you are thinking like it. You buck up[else if player is in Browse Bowers]Someone semi-important-looking walks by and commends your choice of reading material, and you say you love it[else if player is in Econ Cone]You even successfully turn back an insult from someone who is all LESS READING MORE DOING[else if player is in Upscale Capsule]You turbo-speed-read, since you've LIVED a lot of this advice[end if], ignoring how useless the book is for helping you figure what to do right now. Eh well, you've got a spiel to tell others how THEY better use it"

to say rscheck:
	if word number 1 in the player's command is "resealed":
		now rese is true;

to say tgw:
	say "that dude[if player is female], uh, dudess[end if], with those powers";

to say preefies:
	if number of prefigured things > 0:
		say ". And now you have reason to mess with [the list of prefigured things], too";

bredo-bored is a truth state that varies.

to say bored-robed:
	if the player's command includes "bored":
		say "interesting";
		now bredo-bored is true;
	else:
		say "clerically garbed, like he just became,";
		now bredo-bored is false;

to say rec-der:
	say "You take time, and ";
	if the player's command includes "recall":
		say "not all your memory comes back, but a few cues tip you off--yeah, the robber made it THERE without the bee around. Where's that trap door? You keep trying to recall--and you try so hard you forget to feel sorry for yourself";
	else:
		say "try to figure where the cellar must be based on what was behind the robber, where you were standing, and so forth. The calculations aren't as difficult as you feared, and pretty soon you figure where the cellar door must have been";
	say ". You let out a 'darn, I...' but then, there's the way. 'Rad! In!' But when you look up, it's not a great place to be";

to say logan-hi:
	say "'No-Gal Logan. Serial Sailer. Here's our selves-vessel. Not quite the HMS SMH.'[paragraph break]'Hooray...or ahoy?' you say, confused.[paragraph break]But the sail ails where the stripe would be above ground. You sort of think you can see a reddish haze, or maybe it's your imagination. 'Now to hit WIN...where's that button? Hmph, won't let me cross. It's up to you. You seem like a trireme meriter. You'll find the hit win button Ben hid. Did it so well, made sure we didn't use it before we need to. You'll reach the beyond. One way now. Aye,' says No-Gal Logan. 'The end! Boy!'[paragraph break]You see him nod bye as he jumps over. 'Logan!' you cry. 'No lag!' he yells back. Then 'St. Olaf!' He floats, so flat, leaving you for the last of...he cries, 'Harbor!' and you cry 'Rah, Bro!' Then you write down what No-Gal said about the button.";

the stripey pyrites are useless scenery. "The pyrites look pretty, but you're not here for a treasure hunt. You're here to find No-Gal Logan."

check taking stripey pyrites:
	say "Take a hint from them, where they may lead you." instead;

after fliptoing un-road:
	now stripey pyrites are in Harms Marsh;
	continue the action;

to say get-censer:
	if the player's command includes "pooh":
		say "You convince yourself reaching the hoop can't be that bad. You jump up, and you grab the hoop! It falls from the wall, revealing an onyx censer from a hidden compartment. Wow! Maybe you didn't get full style points, but you got what you needed";
	else:
		say "You decide to give up, but then you think, heck, why can't I drop my items for a minute? Why can't I jump off the wall and risk annoying some ancient spirit? You do so, and you grab the hoop! It falls from the wall, revealing an onyx censer from a hidden compartment. Wow";
	if Leo is visible:
		say "! Leo and Rand applaud your agility";

to say add-adj:
	pad-rec "badlands";

naiv-nat is a truth state that varies.

to say vain-naiv:
	if the player's command includes "naivest":
		say "You remember that alternate solution to the truth-teller and liar puzzle and ask the natives if they've heard of free beer at the Epic Clean Nice Place yet. They don't believe you at first, but you manage to sucker them with 'of course you've heard of it' and 'would I lie about free beer' and so forth. You provide them unbelievably wrong directions to follow, and they soon disappear";
		now naiv-nat is true;
	else:
		say "You convince the natives that they're really too good to be guarding THIS spot, and in fact, you cleared out some other areas that are even more fun to guard, but you're sure there're even more fun places if you just go--well, this-a-way and that-a-way. They fall for your flattery and go in search of somewhere better"

to say ahoy-eh:
	say "The ship hovers a bit, then chugs through the stripe. 'Ahoy, eh? ... Oh, yeah!' you cry as the underground lake expands until the ceiling disappears. The water begins rushing, and you are thrown to the floor of your boat. When you wake up, you find that you are back at the Strip of Profits";

after fliptoing lecturer:
	now mangiest steaming is not maingame;
	now list-headache is true;
	continue the action;

misted is a truth state that varies.

after fliptoing da mist:
	now misted is true;
	continue the action;

behinded is a truth state that varies.

after fliptoing when mrlp is others (this is the slot and singed design appear rule):
	if noun is iconic, now singed design is part of the noun;
	if noun is s-i or noun is s-c:
		if player has so-great storage, slot-appear;
	continue the action;

after fliptoing a-p:
	now digger is in lalaland;
	continue the action;

after fliptoing lance:
	now heaps are in Shadier Airshed;
	now waste is in lalaland;
	continue the action;

after fliptoing prod:
	now waste is in Shadier Airshed;
	continue the action;

after fliptoing diapers:
	if sister tressi is in drain nadir, poss-d;
	continue the action;

after fliptoing ltb:
	if lager is in Boredom Bedroom, poss-d;
	continue the action;

after fliptoing b-b:
	now Ed Riley is in Bleary Barley;
	now cinders are in Bleary Barley;
	continue the action;

after fliptoing ragged dagger:
	now player has raves saver;
	continue the action;

after fliptoing raptor:
	now player has whistle;
	now raptor is in lalaland;
	now hydra is in lalaland;
	now Merle is in lalaland;
	now Elmer is in lalaland;
	if Merle is reflexive:
		poss-d;
	reg-inc;
	continue the action;

after fliptoing post (this is the cleanup after the post/thief rule) :
	now purse-stolen is false;
	continue the action;

after fliptoing (this is the silly edge case pronouns rule):
	if noun is imp1 or noun is imp2 or noun is imp3, set the pronoun it to sly imp;
	if noun is ram1 or noun is ram2 or noun is ram3, set the pronoun it to whiners;
	continue the action;

after fliptoing (this is the one-of-two and min-up-plus rule):
	if noun is keys or noun is hogs:
		now Mount Um-Not is in Phat Path;
		now Deil's Slide is in Phat Path;
		now Leo is in Phat Path;
		now Rand is in Phat Path;
		now grey gyre is mapped south of Phat Path;
		now Phat Path is mapped north of grey gyre;
		if hawt thaw is in Saps' Pass, now hawt thaw is in Phat Path;
		say "You unlock the lawl-wall with the keys that fell from it, and suddenly you see the funny side of your journey so far. The wall and keys crumble. The hogs slink off in despair at a job failed.[paragraph break]You give a 'PHT!' as you wind up at...";
		move player to Phat Path;
		continue the action;
	else if noun is praise or noun is rivets:
		if praise is reflexed and rivets are reflexed:
			say "Your willpower is at 200%! But it doesn't do any good without introspection, being sure YOU deserve to get going. You look back at the Pernod.";
			min-up;
			set the pronoun it to pernod;
		continue the action;
	else if noun is lobster or noun is ME ARTS:
		if ME ARTS is in lalaland and lobster is in lalaland:
			say "You feel your arch-greed recharged.";
			min-up;
		continue the action;
	else if noun is troend1:
		let temp be 0;
		if Sister Tressi is prefigured, increment temp; [?? resist then ignore]
		if ME ARTS is prefigured, increment temp;
		if Blamer Balmer is prefigured, increment temp;
		if temp > 0, say "(NOTE: before moving on, you much with some stuff to get a few extra points.)[paragraph break]";
		increase min-score of troves by temp;
		increase cur-score of troves by temp;
	else if noun is LLPish or noun is claire's scalier: [bleah. Denim isn't reflexive. Neither is giant pin]
		d "General LLPish min-up for [noun].";
		min-up;
	continue the action;

after fliptoing tokers:
	now mangiest steaming is in Strip of Profits;
	set the pronoun her to tokers;
	continue the action;

after fliptoing skid:
	if disk is not prefigured:
		say "You make a note you can flip the disk back based on the lossless compression algorithm, etc., and how you don't need to know the deep math cold to be able to use it, or to remember the basics.";
		preef disk;
	now skid is in location of player;
	continue the action;

after fliptoing otters-x:
	if engravings are examined:
		say "The engravings from Store T seem to have been transferred to the otters.";
	now engravings are part of otters-x;
	continue the action;

volume Means Manse

book Dusty Study

to say tables-beams:
	if tables are in study or t-b are in study:
		say ", ";
		say "[if tables are in study]tables (the spreadsheety kind) on one wall[else]a way OUT where the tables were[end if]";
		say ", and [if t-b are in study]beams on another wall[else]a way down where those beams were[end if]";

Dusty Study is an innie room in Means Manse. "[one of]Your study's not very sophisticated, but it's you. That doesn't mean you're not very sophisticated. But you were sophisticated enough to know that.[paragraph break][or][stopping]It's a bit messy here, with a diorama hanging down. There's a bookshelf way too large to move[tables-beams]. A rich chair [if pedanto-notepad is on rich chair]holds your pedanto-notepad[else]is here, too, holding some sad ads[end if][if Gunter is in lalaland]. After your sleep, you remember you built some secret passages[end if][if gunter is in lalaland]. You'll want to take them[else]. You came in through your super-secret side door, and you don't feel like going back out, yet[think-cue][end if].[if bean-smell is true][paragraph break]You smell something, and you hear something, too. Probably from outside, but you don't want to go out there.[end if]"

after printing the locale description for Dusty Study when Dusty Study is unvisited:
	ital-say "you may wish to type ABOUT or VERBS to see information about the game and what words work best.";
	continue the action;

to say think-cue:
	say "[if thinko is false and gunter is off-stage]. It's a good place to just THINK[end if]"

to decide which number is study-outs:
	let q be 0;
	if tables are in lalaland:
		increment q;
	if t-b are in lalaland:
		increment q;
	if niche is in lalaland:
		increment q;
	decide on q.

after printing the locale description when player is in dusty study and gunter is in lalaland:
	if tables are in lalaland or t-b is in lalaland or niche is in lalaland:
		say "You take stock of your way[unless study-outs is 1]s[end if] out: ";
		if tables are not visible:
			say "You could probably go [b]in[r], to the stable, with the tables gone. ";
		if t-b are in lalaland:
			say "You [if tables are in lalaland]also [end if]cleared a path [b]down[r]. ";
		if niche is in lalaland:
			say "There's [if study-outs > 1]also [end if]a chimney leading [b]up[r]. ";
		say "[line break]";
	continue the action;

rule for printing the name of a dark room: say "No light-glint, oh!"

the player is in Dusty Study.

a rich chair is useless scenery in Dusty Study. "You thought you preferred a recliner but this is real. Nicer. It guards against cushionless slouchiness. Its backrest is shaped like brackets, and it's from Art Beck's. Small things can get stuck in it, or even lost[if pedanto-notepad is on chair]. Like your pedanto-notepad, just sitting on it[end if][if latches are off-stage]. In fact, it seems a bit lumpy now[end if]."

the sad ads are plural-named scenery. "[one of]The ads aren't sad because they're drab but rather because so many people fall for them. And they're not even magically possessed. This is the price of prosperity, and yet... One[or]Another[stopping] ad [hawk-blare]."

this-ad is a number that varies. this-ad is usually 0.

check scaning ads:
	say "Few have deeper meaning. You wonder if they are worth scanning with your own eyes." instead;

to say hawk-blare:
	increment this-ad;
	let mxad be maxidx corresponding to a mytab of table of ad slogans in table of megachatter;
	if this-ad > mxad:
		say "exhorts HANKER! HARKEN! You must be at the end.";
		now this-ad is 1;
		continue the action;
	choose row this-ad in table of ad slogans;
	say "[if blare entry is true]blares[else]hawks[end if] [blurb entry][if showtabname is true](table of ad slogans)[end if]"

understand "ad" as sad ads.

instead of taking sad ads:
	say "They aren't actual coupons, only ads, so they're not worth taking. You can examine them if you like."

instead of doing something with the sad ads:
	if action is procedural, continue the action;
	if current action is taking:
		continue the action;
	say "There's not much to do with the ads other than reading them.";

check examining sad ads for the first time:
	say "It's impossible to look away...advertising certainly has gotten more prominent since Elvira arrived. She's been so good at saying you need to advertise, and yet--she does not need to. Apparently she is quite a consultant for opposing ad firms.";

does the player mean entering the rich chair when Gunter is off-stage: it is very likely.

check entering rich chair:
	if latches are off-stage:
		try searching rich chair instead;
	say "You're too restless right now." instead;

check searching rich chair:
	if latches are off-stage:
		say "Ah, so that's what that lump is. Some latches, from [gtmn], who helped you when you first arrived. But what're they good for?";
		now player has latches instead;
	else:
		say "You find nothing further in the chair." instead;

carry out examining rich chair:
	ignore the examine supporters rule.

instead of doing something with chair:
	if action is procedural, continue the action;
	if current action is pushing or current action is pulling or current action is climbing:
		if niche is visible:
			say "You don't need to climb the chair--at least, not until you find a way up through the ceiling." instead;
		else:
			say "You climb on the chair to go up.";
			try going up instead;
	say "[if gunter is in lalaland]The chair can't hide an exit out of here[else]It's nice, but you can't do much with it, and you're too antsy to sit in it[end if]."

report taking pedanto-notepad:
	say "Good choice taking the notepad. It'll help you tame lots that's meta, mate.";
	if sad ads are not in dusty study:
		now sad ads are in dusty study;
		say "[line break]Taking the pedanto-notepad uncovered some sad ads on the chair.";

instead of pushing or pulling or searching or opening or closing bookshelf:
	say "There's no secret passage behind it. And if there were, you couldn't move it. It's got about [book-est] books, after all."

estim is a number that varies.

to say book-est:
	if estim is 0:
		now estim is number of rows in table of random books;
		increase estim by a random number between 0 and 99;
		now estim is estim / 100;
	let base be estim / 10;
	let rema be the remainder after dividing estim by 10;
	if base > 0:
		say "[base in words] thousand";
		if rema > 0:
			say " [rema in words] hundred";
		continue the action;
	say "[estim in words] hundred or so";

the bookshelf is amusing scenery in dusty study. "[one of]It's sturdy enough to withstand any magic transformations. It's far too heavy to move to make a secret passage, what with [book-est] sloven novels (writing and appearance) you just got SENT, somehow, from trailery to literary discouraging infectious fiction use--the titles blur so fast through your mind, the oeuvres overuse--well, YOU know. Story tyros TRY so.[paragraph break]On glancing at some of the more ridiculous pen names, you also remember how FameHints NameShift and Smokiner Monikers were both allegedly a subsidiary of Elvira's MoneyCo. Nothing proven, and the journalist...well, they haven't written anything lately.[paragraph break]One book you won't remember next move is [or]Another book you won't read. [stopping][i][randbla][r]."

understand "shelf" and "books" as bookshelf.

instead of taking bookshelf:
	say "[if Gunter is in lalaland]None of the books could really help you[else]You would have trouble choosing just one. You wonder if any are any good[end if]."

check exiting in dusty study:
	try going outside instead;

geez-already is a number that varies.

every turn when dusty study was not lit and lamp is off-stage (this is the clue lamp rule):
	if palm is prefigured:
		increment geez-already;
		if geez-already is 5:
			say "You're sick of this stumbling around, so you just flip the palm to a lamp, already.";
			try fliptoing lamp instead;
		say "Hm. You didn't need to change that palm to a lamp before, but it might be a good time, now." instead;
	say "[one of]Usually, in situations like this, you go in for a four-letter word. But an obscene one wouldn't help much here.[or]No use to blub [']til you produce a lit bulb. Or, better, something that contains one.[or]You need to get light. What's a good plam (sic)?[or]You have ampl (sic) power to change the lamp into something else, you know.[or]You remember changing a toga into a goat before you ever entered Yorpwald. Perhaps the same sort of thing would work here.[or]You remember how a school cafeteria cashier named Pam L. used to light up everyone's day. Well, halfway.[or]There are only 20 possibilities for what the lamp can change into, minus the clues I've already given.[or]Getting lampshady about your special power has made me feel shady.[or]Oh, for a Light Activating Movable Paraphernalia![stopping]"

before going nowhere in dusty study:
	if study is not lit:
		say "You can't really go much of anywhere. You remember secret passages in this study, but you'd probably stumble into that [i]palm[r] first in the dark." instead;
	if Gunter is off-stage:
		say "[if stuff-found is 3]You shouldn't just run away when someone is knocking[else]You're just in the mood for quiet time, now, just looking around[end if]." instead;
	if noun is down:
		say "[if Gunter is off-stage]Yeah...you do have somewhere to hide., but no full excuse, yet[else]There's a room below. What's it called, again? Boy[end if]." instead;
	if noun is outside:
		say "You don't want to go outside, and you don't want to walk around where you might be seen[if Gunter is in lalaland], especially after that chat with Gunter[end if]." instead;
	say "You always lose all sense of direction in your study. You generally just think of it as a place you can go into or out of. There [if t-b are visible]may be[else]is[end if] a passage down, too. Hard to forget how down works[if niche is visible]. Maybe there's something above, too[else]. You can also shimmy [b]UP[r][end if]." instead;

Rule for printing the description of a dark room (this is the dusty study rule):
	if location of player is dusty study:
		say "[one of]Rats, kid, it's dark[or]Aww, dark. Awkward[in random order]. You probably can't go stumbling around--you'd poke your eye on that palm, or something. Wouldn't be bright." instead;

the giant pin is an LLPish thing in Dusty Study. "A giant pin (bowling) hangs on the wall here.". description is "Man, it's a giant pin. Cardboard, too. It's never managed to bowl or blow over any guests despite being surprisingly artsy."

instead of pushing or pulling giant pin:
	say "It won't budge. It's too thin to hide a way out, too.";

a-text of giant pin is "RYYRRYRR". b-text of giant pin is "RYYPPYRR". parse-text of giant pin is "x[sp]-[sp]-[sp]n[sp]t[sp]-[sp]x[sp]x".

instead of taking giant pin:
	say "That'd be dreadfully impractical. It's too [i]giant[r] a t'ing.";

the abstract painting is a useless LLPish undesc. "That painting you changed from a giant pin hangs here."

instead of doing something with abstract painting when abstract painting is visible:
	if current action is taking or searching or attacking:
		say "It's a false law there has to be a wall safe behind it. Besides, [if Gunter is off-stage]the person knocking might see what you're doing[else]you got enough goodies so far[end if]. You remember it was sort of based on parts of your Means Manse." instead;
	unless action is procedural:
		say "The painting's really just there to be observed. Like most art." instead;
	say "The painting gives no pure-art rapture, though you muse 'Quite an antique. I put it up.' and notice a place where horses are kept, a roof with smoke rising, and a downstairs living place. It's not exactly worth looking at in detail, but it's just good to know it's there.";

propaganda is a kind of thing. propaganda is usually amusing.

the dope op-ed is propaganda. "That 'dope' op-ed Gunter threw at you landed here. It's a lot longer than your usual op-ed, probably terribly overwritten, but possible to enjoy if you like that sort of thing.". description is "The dope op-ed is broken into several pages. It's by Elvira, and it's apparently tackling you on your own ground. The pages are labeled nitro-intro, questin['] inquest, MoneyCo and Economy, Shatter-Threats, [if player is male]I Trash His Art[else]Her Arts Er Trash[end if], and By Li'l Billy."

the Nitro Intro page is propaganda. it is part of the dope op-ed. the printed name of nitro intro is "Nitro-Intro page". understand "nitro-intro" and "nitro-intro page" as nitro intro page.

description of nitro intro page is "Elvira lays out that she is clearly aliver in her introduction, where she will beat you at your own game.[paragraph break]She notes how Penal Panel--panel IX--explain the Porter Report--the questin['] inquest on your life file. The media aimed you with RELATED! ALERTED! REQUIRES QUERIERS. Governor Ron Grove found taint--a tint. Ties to the Postage Gestapo. Recommended a deport-o-torpedo. Senator Ron East said can't snore at treason.[paragraph break]No hot-plate hate plot on! Elvira is dedicated to making Yorpwald safe, not just from outside forces, but from the influx of silly old anagrams and the LIKELY PERSON BEHIND THEM--a certain reruns nurser! Someone who resorted to boring old anagrams a computer could crank out.[paragraph break]She also notes she will refrain from calling you the obvious name she COULD in an op-ed, because she has class. But really, oppo = poop."

the Questin' Inquest page is propaganda. it is part of the dope op-ed.

description of Questin' Inquest is "[one of]It's headed Good deeds? Sodded ego! Elvira lays out how you saved Yorpwald and all. But everyday stuff? You couldn't repair a flat tyre with flattery, make custard out of car dust or spumoni from an ion sump. Or even a cellphone from cellophane.[paragraph break]You pause. That's so contrived. What kind of faker-freak would think that up?[or]The Questin['] Inquest page is no less annoying the second time around.[cycling]"

understand "questin" and "questin inquest" as inquest.

a thing called the MoneyCo and Economy page is propaganda. it is part of the dope op-ed.

description of MoneyCo is "Elvira notes Yorpwald's more profitable than ever! What's good for MoneyCo is good for Yorpwald! The motto 'Come Yon, Con Em, Yo!' is a coy omen. If there were fraud, it'd have been found out. But one day MoneyCo will deserve to be MyOneCo! I mean, think about it. Elvira is cool. Money is cool. Elvira deserves money! And of course the Trips Strip deserved to become the Strip of Profits! It rousts tourists! Gets us guests!"

The Shatter-Threats page is propaganda. it is part of the dope op-ed. understand "shatter/ threats/ page/" as shatter-threats page when player is in study.

description of Shatter-Threats is "[one of]Elvira notes all political parties have agreed on a do-pry law for Yorpwald. The Swanker Wankers and Ruthless Hustlers and even the fringe Smugger Muggers and Ballsier Liberals. Sporto-troops, rowdies, weirdos gave statements, testaments. It's to fight Evil-Ra, who is everywhere, even if we can't see him, and worse than Ol['] King Jim. We need the Tautest Statute yet. A polished shield-op. Dragnet Granted for Unclear Evils Surveillance. To Finger Fringe so the homeland doesn't become a [d-word] hole, a lamer realm, a stage-one stone age. Everyone's a suspect, including--or especially you. Elvira points out there are only so many nouns LEFT to change, making you a bit useless. But there is a chance you could mess things back up if you were jealous of her popularity.[paragraph break]Besides, it's not like it's the RESTRICT-STRICTER law![paragraph break]There's a bit more.[or]She notes yours was an insecure sinecure. Nice? Sure. But four out of five leading intellectuals, stuffy or non, agree what she has remade should not be reamed. She also notes the law doesn't prevent you from flipping stuff in your own home--just don't get any ideas.[paragraph break]Plus GOOD IDEA has no meaningful anagrams. Worth thinking about![cycling]"

The I Trash His Art page is propaganda. The Her Arts Er Trash page is propaganda.

description of I Trash His Art is "[artrash]". description of Er Trash is "[artrash]".

to say artrash:
	say "[one of]Elvira offers an apology for not seeing to the heart of the matter about all your anagramming. Oh, sure, she had clever opinions about whether obvious anagrams were better than non-obvious ones, and she changed around, and she's glad people found them interesting, but really, it's kind of nerdy now that your good deeds were DONE. Lots of examples, ahead.[or]Elvira lists games that don't make kids or concerned parents happy. Mega Mage Game (e-mag: a gem!) as well as many others: [twiddle of table of lame computer games and 4].[paragraph break]She blames you for the games['] technical and aesthetic faults, mainly due to the anagram craze you never quite discouraged.[or]Elvira discourses on rap music. 'Rap music is, um, [crap]. Funky? F'n yuk! Pop stars, stop raps!' She lists D.J. JD as even worse than [twiddle of table of bad rappers and 4]. Geez! So many horrible 'musicians.' The 'hits,' too.[or]Elvira has harsh words for other genres, yet they keep cranking things out! [twiddle of table of lousy hit songs and 5]You...you find yourself agreeing with her, but you never commissioned any of that.[or]Elvira ravages the rigidness of music in general. All the latest...hits. Mourning oldies soiled by Chas Cash-Asch and his Sex Rime Remixes, and how SOMEONE with word power (guess who) makes the fliest stifle itself. Though she praises Ariel V's album [i]We Do No Wooden Ode Now[r], she rips the same ol['] lame-os: [twiddle of table of oldies singers and 3].[or]Elvira 'begs the question' of who is getting a lot of royalties! Someone probably in a nice cosy hidden manse! She finishes by berating the Klaw Walk and Bungie Beguin as dumb dances.[or]Elvira shows little respect for comedians like [twiddle of table of comedians and 1]--that pissant is pants--but also [twiddle of table of comedians and 3] even/especially if they make jokes about you. It is too easy. While those about her fall flat or generally have to paint her in a favorable light.[or]Elvira eviscerates dummies['] mediums that produce movies like [twiddle of table of lame movies and 3], but there's the small screen too...[or]They're just unbearable, TV shows like [twiddle of table of lame tv shows and 3]Even stuff rated g grated--that's the end of THIS article, thankfully[drt].[or]No. Really. You don't want to read that nonsense again. She always seems to know which way the wind is blowing, then she blames you for it.[stopping][run paragraph on]"

dope-read is a truth state that varies.

to say drt:
	now dope-read is true;

The By Li'l Billy page is propaganda. it is part of the dope op-ed.

description of Billy page is "Next to no text. Gross caricatures of you, by Li'l Billy, in the Tenure Tureen: NEUTER! Deserve Severed!, or Elvira as archon and you as anchor. Re: tha heart-hater. MESSIAH [if player is male]AMISS, HE IS? SHAME[else]AIMS: SHE IS SHAME[end if]!!!"

instead of doing something with propaganda:
	if current action is taking:
		say "You don't need to take that blunt-lie bulletin, or any part of it. You don't need to take the insults therein, either, unless you really want to." instead;
	if current action is examining or reading or objhinting:
		continue the action;
	if current action is scaning:
		say "Err, yeah, scanning is MUCH better than close reading in this case.[paragraph break]Oh, wait, you meant with the settler? Nothing shows up." instead;
	say "The propaganda's not good for much other than reading. It's not really good for reading, either." instead;

dope-idx is a number that varies.

after fliptoing when player is in dusty study (this is the more min points in study rule) :
	if noun is t-b:
		if tables are in lalaland or niche is in lalaland:
			d "Min point for tables or niche.";
			min-up; [already have way out of study]
			if sitar is in lalaland or pram is in lalaland:
				d "Min point for [if sitar is in lalaland]sitar [end if][if pram is in lalaland]pram [end if].";
				min-up; [already have way out of study]
	else if noun is chimney:
		if t-b is in lalaland or tables are in lalaland:
			min-up;
	else if noun is tables:
		if t-b is in lalaland or niche is in lalaland:
			min-up;
	continue the action;

after fliptoing ramp (this is the check ramp min-up rule) :
	if tables are in lalaland and sitar is in lalaland:
		min-up;
	else if t-b is in lalaland:
		min-up; [check if passage is made via beams or stable->stair]
	continue the action;

after fliptoing stair (this is the check sitar min-up and exits rule) :
	now Largely All-Grey Gallery is mapped below Farming Framing;
	if the room below study is nothing:
		now Farming Framing is mapped above Largely All-Grey Gallery;
	if t-b is in lalaland:
		min-up;
	else if niche is in lalaland and pram is in lalaland:
		min-up; [check if passage is made via beams or chimney->pram]
	now stria is in lalaland;
	now sitar is in lalaland;
	move stair backdrop to all stairy rooms;
	continue the action;

chapter denial

denialing is an action applying to nothing.

understand the command "leadin denial" and "lead in denial" as something new.

understand "leadin denial" and "lead in denial" as denialing.

denial is a truth state that varies.

carry out denialing:
	if denial is true, say "You already did." instead;
	if player is not in dusty study, say "You need to do this at the start." instead;
	if Gunter is not off-stage, say "You need to reset the game to before when Gunter knocks at the door." instead;
	if okay-thats-it > 0, say "No--wait, you were just having a flashback.[paragraph break]";
	say "Warping space and time, you move back to the Strip of Profits...";
	get-cool-stuff;
	now denial is true;
	move player to strip of profits;
	the rule succeeds;

denialnaileding is an action applying to nothing.

understand the command "leadin denial nailed" and "lead in denial nailed" as something new.

understand "leadin denial nailed" and "lead in denial nailed" as denialnaileding.

portal-entered-yet is a truth state that varies.

carry out denialnaileding:
	if player is in strip of profits:
		if denial is true and store t is in lalaland, say "You already did." instead;
		if denial is true:
			say "BOOM! Store T shatters.";
			now Store T is in lalaland;
			now otters-x is in Strip of Profits;
		if portal-entered-yet is true, say "You already entered a portal, so you'll need to reset the game to clear out everything  before Otters." instead;
	if player is not in dusty study, say "You need to do this at the start--well, you can LEAD IN DENIAL before, but it's easier to do at the start." instead;
	repeat with ZT running through needed regions:
		if ZT is not otters, now ZT is bypassed;
	repeat with ZT running through patchable things:
		now ZT is in lalaland;
	get-cool-stuff;
	move player to strip of profits;

chapter roveovering

roveovering is an action applying to nothing.

understand the command "rove over" as something new.

understand "rove over" as roveovering.

roved is a truth state that varies.

carry out roveovering:
	[d "[number of fruits] fruits: [list of fruits]. [list of backdrops] = backdrops.[line break]";]
	if roved is true, say "You already did." instead;
	if player is not in dusty study, say "You're not sure where to." instead;
	if Gunter is not off-stage:
		say "It's not that easy. Maybe once you've returned [if player is in study]back here [end if]to your Dusty Study, you can sneak out a more usual passage. But you need to fix things in Yorpwald, first. Or restart the game." instead;
	if okay-thats-it > 0, say "No--wait, you were just having a flashback.[paragraph break]";
	say "Oh man. That's right. Those adventures--the routes, the troves--and Curtis. Elmo told you to [b]ROVE OVER[r]. Better than Gunter's [one of]cringy-crying[or]slimey-smiley[or]bubbly-blubby[in random order] plea peal, a big tear rate about Elvira...mumbling 'Sad I said a dis.' No, you don't want a CHANCE to be suckered [if stuff-found < 3]if he comes knocking[else]by opening that door[end if]. You slip out a secret passage. Shouldn't need a last atlas for this, but...don't slow down LOTS. You eat a carbo-carob cobra for the long journey[unless player has purse and player has settler and player has pedanto-notepad] and check you have your settler and notepad and super purse[end if].";
	now roved is true;
	now first-good-scan is true;
	now kind-of-cool is true;
	move player to strip of profits;
	repeat with ZT running through needed regions:
		now ZT is bypassed;
	repeat with ZT running through patchable things:
		now ZT is in lalaland;
	now Store K is in lalaland;
	now Store N is in lalaland;
	now magneto is in lalaland;
	get-cool-stuff;
	the rule succeeds;

to get-cool-stuff:
	now player has gird grid;
	now player has super purse;
	now player has letters settler;
	now player has pedanto-notepad;

chapter side door

the semi-secret side door is scenery in Dusty Study.

answer-warn is a truth state that varies.

check answering:
	if answer-warn is false:
		now answer-warn is true;
		say "This game generally uses ASK X ABOUT Y instead, unless you are in a conversation with numbered choices[if haunter is visible or agnostic is visible]. However, the X, Y syntax can work here[end if]." instead;
	else:
		try asking noun to try taking inventory instead;

does the player mean opening side door: it is very likely.

description of semi-secret side door is "[one of]Oh, man, I can't really tell you. It's yours, and it's a secret, and I would've had to, like, violate your property rights to be able to describe it better than you could. Okay, i[or]I[stopping]t's an innocuous door that looks like boring aluminum siding from the outside. It has a peephole, too."

the peephole is part of the side door. description is "Starin['] strain... [one of]People? Eh? [or][stopping][if Gunter is in lalaland]Shouty youths outside, chanting something[else if stuff-found < 3]Nobody[else][one of]You see Urgent Gunter behind. He's one of the biggest messengers in Yorpwald. You haven't seen him in a while. He must have something important for you[or]Urgent Gunter is waiting out there. You should probably invite him in[stopping][end if]."

instead of searching peephole:
	try examining peephole instead;

check opening side door:
	if stuff-found < 3:
		say "You don't feel like going out without a really good reason." instead;
	if urgent Gunter is off-stage:
		say "[if peephole is examined]Urgent Gunter charges in[else]It's Urgent Gunter[end if], full of sensible bileness. 'Pallid li'l pad! Stodgy sty, dog! Elvira wants to see you. About your powers. Me and my pouter troupe agree. Me, best messenger in all of Yorpwald. Hey, if you've done nothing wrong--and it seems like you've done NOTHING since all that shuffling around--you have nothing to hide.'";
		now urgent Gunter is in Dusty Study;
		set the pronoun him to Urgent Gunter;
		set the pronoun her to Elvira;
		pad-del "rove over";
		try talking to urgent Gunter instead;
	say "A rallies sallier? With snipers pressin[']? Better not." instead;

chapter palm and lamp

The palm is a thing in Dusty Study. description is "It has spent a lot of time soaking up all that weight is stored in there, to help you one day if you need to break out in the middle of the night or something.". "A palm soaks up sunlight here. For later, maybe."

instead of taking the palm:
	say "It's kind of useless and bulky at the moment.";

a-text of palm is "RYRR". b-text of palm is "RGRR". parse-text of palm is "[bug-report]".

The lamp is a lit thing. description is "It's red-framed, with a slightly off-center (to the left) light that flickers from yellowish to greenish--which seems slightly more illuminating--and back[if settler is not visible]. Odd colors. You haven't seen anything like them[else]. Hmm. Where've you just seen colors like that, now[end if]."

check switching on lamp:
	say "It already is. It will last as long as you need it." instead;

check switching off lamp:
	say "You may still need the lamp's light a bit." instead;

chapter latches

The latches are a plural-named thing. "Some latches--the sort you lock a door with--are jumbled together here."

instead of opening the latches:
	if treatise is off-stage:
		say "(fumbling and seeing a prepared red paper fall out, which you take)";
		now player has treatise;
	say "You can't figure how to open them. The latches are a Gordian knot, and you probably mix up where to start or end, but maybe the red paper has more information on what to do.";

to trea-check:
	if treatise is not visible:
		say "As you [if current action is taking]take the latches[else]look closer[end if], you see a wad of prepared red paper contained in the latches and pull it out. It looks stained with tears[if player does not have latches and current action is examining]. You take the latches, too[end if].";
		now player has treatise;
		if player does not have latches:
			now player has latches;

check taking latches:
	if player has latches:
		say "You fiddle with them uselessly for a bit." instead;
	trea-check instead;

after examining latches:
	trea-check;

description of latches is "They're knotted hopelessly--you won't be able to un-knot or untangle them or whatever by natural means. [if teariest treatise is unexamined]They probably become something or other, or Gunter wouldn't have given them to you[else]The letter said they might be carrying something, but you don't see anything inside[end if]. Weird."

understand "prepared/ red/ paper" as teariest treatise.

to say dear-reader:
	if treatise is examined and satchel is visible:
		say "(Stuff about getting the satchel that you don't need to reread.)";
		continue the action;
	say "Dear, er, Reader: Apologies for any sucky yucks. I couldn't have sent tens of snug gnus, sought toughs, or any gubbins subbing for you. These latches, shut thus, contain a recoded decoder, a revised deviser. Help make your tour a rout. Not that it emits smite. Have a peek, then keep, to help lift the doom mood in Yorpwald. But you'll need to be refined, definer. Just changing things to other things, relived, won't deliver. It's powerful, too. My magician-lawyer Drab Brad warned me creating it would drain my life force. But I feel great!";

the teariest treatise is a thing. description is "[dear-reader][line break]Even without cheat mode, it's pretty handy, because it shows the letters [i]should[r] be either...[one of][paragraph break]The treatise iterates some sort of pattern but ends abruptly. You stare. Tears. Eyes watery yet raw. Arg. Life. Fragile.[or][paragraph break](Yes, the old timer is a time lord now.)[stopping]"

understand "letter" as treatise.

a-text of latches is "RYRRRYR". b-text of latches is "RGPPPGR". parse-text of latches is "[bug-report]".

the satchel is a thing. description is "You doubt it holds anything else in its folds.". "The satchel you managed to conjure lies useless on the [if player is in Farming Framing]ground[else]floor[end if]."

check inserting into the satchel:
	ignore the can't insert what's not held rule;
	say "The purse is much handier." instead;

instead of taking satchel:
	say "It may achieve sentimental value one day, but the purse will carry more."

chapter ten beams

instead of taking t-b:
	say "They're too solid to move, physically.";

The t-b are privately-named plural-named vanishing scenery in Dusty Study. understand "ten beams" and "ten" and "beams" as t-b. the printed name of t-b is "ten beams".

a-text of t-b is "RYRYRYRR". b-text of t-b is "RYRYRYRR". parse-text of t-b is "x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x[sp]x".

instead of searching t-b:
	say "Nothing. And you checked all ten beams.";

description of t-b is "You count them. One, two, ..., ten. Exactly ten beams lined up together, unpainted and uncovered. [b]Ten beams[r]. What could they be hiding?"

chapter tables

The tables are plural-named vanishing scenery in Dusty Study. understand "table" as tables.

check taking tables:
	say "The tables are written on the wall." instead;

after fliptoing tables:
	now study is mapped inside Farming Framing;
	now study is mapped outside Farming Framing;
	now Farming Framing is mapped inside study;
	continue the action;

after fliptoing t-b:
	now Largely All-Grey Gallery is mapped below study;
	now study is mapped above Largely All-Grey Gallery;
	continue the action;

instead of pushing or pulling tables:
	say "They're not that kind of tables. They're tables drawn on the wall."

table-warn is a truth state that varies.

before doing something with tables when table-warn is false:
	if the player's command matches the regular expression "\btable\b":
		now table-warn is true;
		ital-say "it's important that the tables are plural, as you [if cur-score of means manse is 0]may find[else]already found[end if].";
	else:
		continue the action;

a-text of tables is "RRYRRY". b-text of tables is "RRYRRY". parse-text of tables is "x[sp]x[sp]-[sp]x[sp]x[sp]-".

description of tables is "[one of]They are tables of the ablest bleats--they look like outright vandalism, all in red, but you know you wrote them there a while ago, and you're sure there's a reason. Maybe if you look at them more, it'll be evident[or]They were verified by LabSet technologies with their BeLast algorithm--writing in red--with a bit more below[or]Instructions to eBlast the tables is written below in red[or]The data in the tables seems quite possibly shifted over a row[or]The more you look, the clearer it is the data is very un- ... oh, that would just open the barn door, to say it outright[cycling].";

to decide whether you-can-stableize:
	if tables are in dusty study:
		decide yes;
	decide no.

check going in study:
	let need-line-break be false;
	if room noun of study is not nowhere:
		if latches are in study:
			say "You take the latches--they must be useful for something[if player does not have treatise]. There's also a tear-stained paper bound up in them. You pull it out[end if].";
			now player has latches;
			now need-line-break is true;
		if pedanto-notepad is on a rich chair:
			if need-line-break is true:
				say "[line break]";
			say "You[if need-line-break is true] also[end if] swipe your pedanto-notepad, since it was so helpful your first time shuffling around in the Forest and Sortie and Metros your first time through Yorpwald. It uncovers some sad ads, the sort which have sadly pervaded Yorpwald recently.";
			now player has pedanto-notepad;
			now sad ads are in dusty study;

chapter Urgent Gunter

Urgent Gunter is a terse person. "Urgent Gunter is here, but you shouldn't be seeing this text, so that's a bug. [bug-report]"

description of Gunter is "He's trying to look genuinely concerned under that smirk, but it's not working. Maybe he's just trying to make it look like he's trying."

the litany of Urgent Gunter is the table of Gunter comments.

okay-thats-it is a number that varies.

diorama-flip is a truth state that varies.

tried-flip is a truth state that varies.

to decide which number is stuff-found:
	let mytemp be 0;
	if gunter is in lalaland, decide on 3;
	if thinko is true, increase mytemp by 2;
	if sad ads are examined, increment mytemp;
	if player has pedanto-notepad, increment mytemp;
	if notice is examined, increment mytemp;
	if bookshelf is examined, increment mytemp;
	if diorama-flip is true, increment mytemp;
	if tried-flip is true, increment mytemp;
	if pad-consult is true, increment mytemp;
	if mytemp >= 3:
		now mytemp is 3;
		decide on mytemp;
	decide on mytemp.

every turn when location of player is dusty study and stuff-found >= 3 (this is the Gunter Knocks rule):
	if urgent Gunter is off-stage:
		increment okay-thats-it;
		if okay-thats-it is 6:
			say "You're sick of the knocking, so you just answer the door, already.";
			try opening side door instead;
		say "[one of]Whoah! Bangish bashing at the door[it-door]![or]The bangish bashing continues.[stopping]";
		now knockage is true;

to say it-door:
	set the pronoun it to the side door;

section gunter dialogue

table of Gunter comments [tco-gu]
prompt	response	enabled
"Say, Mr., um... summary?"	summary-quip	1
"Elvira...necro-crone recon?"	necro-quip	0
"Shil-lish. Sit on it, son."	sit-quip	0
"Powers? Me? Spew more!"	powers-quip	0
"Why so showy? Calm down, mad clown!"	clown-quip	0
"Ask Gunter how business is"	gustave-quip	0
"Pouter troupe?"	pouter-quip	0
"Lighten the mood with a joke"	pun-quip	0
"Er, ahem, hear me"	ahem-quip	0
"One Beg: begone! Scat, phony sycophant!"	leave-quip	0

table of quip texts (continued) [tqt-gu]
quip	quiptext
summary-quip	"'Must I sum it? It's, um...' / 'Condense it.' / 'So indecent.'[paragraph break]Gunter glosses over your successes in the forest (store F,) the sortie (store I,) and the metros (store M) and how anyone with a little dorky thinkery could've done it, but whatever. Not really a compelling personal story, you have to admit! Then he gets to Elvira. How before she arrived, Yorpwald was a bit boring, but now it has more reality shows, advertisers and loud opinions than ever.[paragraph break]And how--well, she pointed out it was nice of you to save Yorpwald the first time, but a bunch of pedants looked through dictionaries to ensure there wasn't much left TO change. And how your choosing not to be A Personality was suspicious for sure. And how SHATTER-THREATS would check the anagrammability of stuff so Red Bull Burdell wouldn't happen again. Plus you never helped create cool new slang. But you, of all people, are most likely to form a polit-i-plot. He ends with a yawny anyway, mentioning how liking Elvira is what makes us different from animals, and you should totally write that in your pedanto-notepad.[paragraph break]You already sort of knew this, but Elvira seems to want you out of the way, seriously. As to Gunter, you'll probably annoy him equally by turning him out (if you want to get on with things) or failing to agree with all he has to say." [start GUNTER text]
powers-quip	"'Humble-brag, bumbler? Agh! Snake oil. So like an aloneski! You could ply a word! Change Yorpwald from untied to united! Change clover to Velcro! Noughts to a shotgun! Words, no sword! Aarg. Man. With whatsits.'"
necro-quip	"'No rec!' Gunter goes from dynamic to [d-word] icy, flashing an off-grace frog face. A pouty payout![paragraph break]'You irk, heel. You LIKE her? I can't can it! What she did...shaded with...'[paragraph break]'No, glib goblin! The slob lobs BS, lo! Poisonin['] Opinions! That BS idea abides, biased!' Gunter glosses over Blue Frog Urbfogel, Bugler of Foulberg, and how he beat up monsters that came back anyway [']til he could beat her up? Talked to people who knew where hidden items like the horn-o-honor and gavel of Fogvale were. It was rigged! Now, with her dynamite, tidy name, oh, the soaring signora! Her vast harvest, her mystic chemistry-, her tact-chatter. Her lean elan's made Yorpwald go real galore--be aliver--a praised paradise--with her ReaLiv initiative for the Sunnier Unrisen Inner Us! From arsey years to so sane season! Had us voting her overnight the roving virgo then! Became a rowdy pal! Yorpwald was old, warpy, but now it's more wordy, pal! A Yapworld and Payworld! Oh, her good deeds!'"
clown-quip	"Scathing sigh. 'Can't.'[paragraph break]Yet she's an a-lister realist. To suggest such a reform-former is a viler...it was censor-crones who tried to quiet HER, the defamed made def! You're probably upset she pointed out anyone with your powers would've figured what to do...eventually...unless they got bored. But she is a wonder. You're a downer.'"
sit-quip	"'Going personal? Sore plan! No gig!' She's not perfect but that helps us see... 'Mr. Quasi-Marquis...you have to admit, not even a reruns nurser thinks you could save Yorpwald turning stuff into stuff again. Pedants did research! So one do-rite editor rioted.'"
gustave-quip	"'Once you came along, it was clear Gustave was the vaguest. A denser sender. Very idle delivery. But, well MY initiative kept me Optimal Top Mail. So well I have time for my pouter troupe.'"	[option 4-1, fork of 4]
pouter-quip	"'Why, they came around about the time Elvira did! I didn't believe them at first! But then they became spouter troupes. No offense, you deserve your no-spine pension and all, but ... there's not much of a story behind what you did. Nothing award-winning. Why, it gives me headaches to think about some things you did and saw! No offense. Anyone with a calculator or whatever could've done it. They just...spoke the truth. And were more interesting about it! Now Elvira is more interesting. I mean, you're not funny, or anything.'"
pun-quip	"'Eh, punt the pun,' you think. The paunchy, achy pun--a painful pun-fail--hardly cleans up on the pun scale. You picture a generic cringee at [twiddle of table of laughhouses and -3]. 'Rad irony? Ordinary.'"
ahem-quip	"Gunter intones tension. Refusal earfuls. 'Cad, no can do. [d-word-u], uh, DUH, man.' Refusal earfuls."	[end option 4-4]
trips-quip	"'No shame,' he moans. 'Some? Nah.' ... he makes the money gesture with his hands but notes you won't get ID'd unless you visit during rush hour."
media-quip	"Somehow, the media aimed you for trying to do way too much and way too little. You chart the flattery, the backhanded compliments, the first rifts, the outright disrespect. '[his-her-c] charisma is archaism.' / 'Cagiest toil made [him-her] egotistical.' / '[he-she-c] will make this realm lamer to save it again.' How the only things you [i]did[r] were saving your skin against Red Bull Burdell--and EXIST at the end."
media-quip-2	"You recall Walt Koh's and Kath Low's howl-task host-walk, among other 'informational' shows...[twiddle of table of lame talk shows and 4]Folks co-spit topics, you're mashed, shamed. '[if player is male]He's [else]She... [end if]mad! Trashed, [if player is female]she'd...rat[else]he darts[end if]!' And the rubbish biopics, good ([biop of true]). or bad ([biop of false]). You did nothing to prepare Yorpwald against technically sophisticated attacks like the exciting ones Elvira warns about, the ones that helped her gain a role of Save/Rid Adviser. Many a tearful faulter did not want to blame you--but they had to."
social-quip	"You complain about social forces in general. More downers than wonders. How you're no longer a secure cursee."
girls-quip	"You listen about [twiddle of table of elmo emo and 3]. No friend finder or lovers solver found the woman for Elmo. He looks happier for having complained, though."
weather-quip	"That's always a safe one. You say 'How [']bout that weather, geez,' not realizing you haven't gotten out enough to know if it's been too hot, cold, rainy or dry. But fortunately, you haven't gotten out enough to remember those details don't matter.[paragraph break]Elmo seems ready to listen to deeper concerns, even if they probably aren't germane to what you need to do."
sports-quip	"Sports banter follows.[paragraph break][twiddle of table of sports chatter and 2]'Chokers.' / 'Shocker.'"
artsy-quip	"'Where do I look? Is there a bare min--uh, most efficient way through?'[paragraph break]'Spry prys say there's something that can just destroy a few stores. Not the sortie and forest and metros you solved. But the remaining stuff. You can maybe take care of them later."
leave-quip	"'Travel, varlet!'[paragraph break]Magnetic-acting, he blabs about the seriousness of it all, despite your 'Hastas, [bracket]redacted[close bracket].' Somehow, you are to blame for the awful state of TV, music, games, and the arts in general, but Elvira is always there to bemoan things and assure Yorpwald she can make it better. It sort of blends in for a while, until he yells at you for wasting his time.[paragraph break]As he leaves, he looks in your mailbox, all '[if player is male]N[else]Ow, n[end if]o fan mail? Fail on, [if player is female]wo[end if]man! Ego hurt? Er, tough!'[paragraph break]Gunter pulls out something labeled 'Points to Spin,' then another labeled 'A Folder re: Adolf.'[paragraph break]'Godwin? Win, dog!'[paragraph break]'Snidest dissent! Gob it, bigot!' he yells as he pulls out a paper labeled 'Dope Op-Ed' and throws it at you. It's thick enough, you feel something when it hits. You lie down in your chair, annoyed and stunned. You realize you'll need an evac-cave...they'll be surrounding your manse.[paragraph break]'Told, dolt!' you hear after locking the door. His ugliest lies tug as you fall asleep[if latches are off-stage], which you notice is quite lumpy[end if]. You wake up hours later from a right mean nightmare where people yell 'Zero Day, Ya Dozer!' and '[if player is female]She will hew ills[else]Sir, Echo Heroics[end if]!' then 'Brave a verb! No sun, nouns!'" [end GUNTER text]

book diorama

before examining when Gunter is off-stage and stuff-found is 3:
	if noun is diorama or noun is part of diorama:
		say "The diorama is too intricate to observe in any detail with the knocking at the door." instead;
	if noun is bookshelf:
		say "You couldn't read--not even just titles--with that knocking at the door." instead;

to say gtmn:
	say "[one of]Tan Mage Nat Egam[or]Nat Egam[stopping]"

the diorama is a backdrop. "[one of]Yes, you remember when Tan Mage Nat Egam gave it to you. You've half forgotten it's here, now, but he said one day, just in case, it'd be useful. For simpler prelims than your first time shuffling around.[paragraph break][or][stopping]It's a loose conglomeration of [if platform is part of diorama]a platform[else]a farm plot[end if], [if pavement is part of diorama]some pavement[else]an event map[end if], [if pedestal is part of diorama]a pedestal[else]a steel pad[end if], and [if crabgrass is part of diorama]some crabgrass[else]a brass crag[end if]. A notice down the center reveals what these items can become."

after scaning when player is in study (this is the pad-diorama rule) :
	if noun is part of diorama:
		pad-rec "diorama";
	continue the action;

does the player mean examining the steel pad: it is unlikely.

to say dior-scan:
	if screenread is true:
		say "This may be an info dump if you are visually impaired. Go ahead?";
		if the player direct-consents:
			do nothing;
		else:
			continue the action;
	say "R=red Y=yellow P=purple G=green.";
	say "[fixed letter spacing]";
	repeat with prt running through ramabits:
		now prt is ncscanned;
		now prt is cscanned;
	say "[scans of platform and farm plot]";
	say "[scans of pavement and event map]";
	say "[scans of pedestal and steel pad]";
	say "[scans of crabgrass and brass crag]";
	say "[r]";

to say scans of (a1 - a thing) and (a2 - a thing): [?!?! not work with visual impair]
	let sp be "        ";
	if a1 is not escanned and a2 is not escanned:
		continue the action;
	say "[line break]";
	if a1 is crabgrass:
		now sp is "         ";
	if screenread is true:
		if a1 is ncscanned:
			say "[a1] to [a2] is [a-text of a1].";
		if a2 is ncscanned:
			say "[a2] to [a1] is [a-text of a2].";
		if a1 is cscanned:
			say "[a1] to [a2] is [b-text of a1].";
		if a2 is cscanned:
			say "[a2] to [a1] is [b-text of a2].";
	if a1 is ncscanned or a2 is ncscanned:
		say "[sp][if a1 is ncscanned][a-text of a1][else][sp][end if][sp] [if a2 is ncscanned][a-text of a2][else][sp][end if][line break]";
	say "[a1][dashy of a1][a2][if a2 is escanned][dashy of a1][a1][end if][line break]";
	if a1 is cscanned or a2 is cscanned:
		say "[sp][if a1 is cscanned][b-text of a1][else][sp][end if][sp] [if a2 is cscanned][b-text of a2][else][sp][end if][line break]";
	else:
		say "[line break]";

to say dashy of (a11 - a thing):
	let spcs be 0;
	increase spcs by the number of characters in "[printed name of a11]";
	decrease spcs by 8;
	say "[if spcs is 2]-[end if][if spcs is 1]-[end if]------->";

check taking crabgrass:
	say "No need for a crass grab." instead;

niche-found is a truth state that varies.

after examining diorama when player is in study and niche-found is false:
	now niche-found is true;
	say "Oh, hey, there's some words on the ceiling. MY NICHE. Wonder what those could be." instead;

the niche is flippable scenery in dusty study. "The words MY NICHE have a square dotted outline around them."

understand "my niche" and "my" as niche

after examining niche:
	say "It sounds like there's whistling from the niche, but only if you listen very closely. Have a listen?";
	if the player direct-consents:
		say "A haunting ice-hymn coming through the dotted outline--or maybe the words you imagine--leaves you red-eyed.";
	else:
		say "Okay.";

understand "ceiling" as niche.

a-text of niche is "RRYRRYO". b-text of niche is "RRYRRYO". parse-text of niche is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]y".

instead of doing something with niche:
	if action is procedural, continue the action;
	say "It's--well, it's not close enough to do much with.";

the chimney is scenery. "It's where your niche was. You can probably put your chair on the bed, then climb the chair to reach it. I won't even make you spell out the details. Just go [b]up[r]."

check taking chimney:
	say "To take the chimney in the going somewhere sense, go UP." instead;

before going up in study:
	if niche is in study:
		say "Hm, the letters saying MY NICHE indicate something could be there. Hm, what." instead;
	say "[one of]I'll skip on the whole piling your chair on the bed bit. Though actually it's kind of fun, jumping up and down to pull yourself up. The chimney has enough handholds. You walk through one of your Closest Closets--they provide localized teleporting through the Means Manse--to find yourself high up[or]You climb up again[stopping].";

after fliptoing chimney:
	now highest heights are mapped above dusty study;
	now dusty study is mapped below highest heights;
	continue the action;

instead of entering chimney:
	try going up;

instead of reading diorama:
	try examining the notice;

the notice is part of the diorama. description is "PLATFORM/FARM PLOT[line break]PAVEMENT/EVENT MAP[line break]PEDESTAL/STEEL PAD[line break]CRABGRASS/BRASS CRAG[paragraph break]There's even small print: objects on diorama are to pre-sow powers for instructional purposes and likely contain more letters and flexibility than real life situations."

instead of taking notice:
	say "It's the lowest-hanging part of the diorama, but you don't need it.";

instead of taking diorama:
	say "It's there for practice. You can just fiddle with its parts." instead;

instead of scaning diorama:
	say "You remember now. A diorama was chosen because it couldn't be messed with at some level. But its parts can be."

getall-warn is a truth state that varies.

before taking (this is the dumb take jokes rule) :
	if ed riley has the noun:
		say "'I am not an item yielder!' Ed Riley booms." instead;
	if noun is crabgrass or noun is brass crag:
		say "No need for a crass grab." instead;
	if noun is part of the diorama:
		say "Don't pull the diorama apart. That was a gift! An instructional gift! From a recently deceased father figure!" instead;

a thing can be spacy. a thing is usually not spacy.

a thing can be hinthelpy. a thing is usually not hinthelpy.

the pavement is part of the diorama. the pavement is spacy. the pavement is hinthelpy. description is "It's sidewalk pavement. It seems like something has been written on it, but it's too bumpy to read, especially since the pavement is so small."

a-text of pavement is "YRYRRRYR". b-text of pavement is "YRYRRRYR". parse-text of pavement is "-[sp]x[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x".

the event map is a thing. it is hinthelpy. description of event map is "You can read it from here--maybe because you remember it, but you can."

after examining event map:
	let bluh be false;
	if screenread is false:
		say "Do you want a text-map view (yes or no)?";
		if the player direct-consents:
			say "[fixed letter spacing]?????
[line break]  |     t
[line break]  v   s r
[line break]+-+-+ t i
[line break]| | | o p
[line break]F I M r s
[line break]| | | e s
[line break]+-+-+ s t
[line break]  |     r
[line break]  v   i i
[line break]  R   n p[variable letter spacing]
[paragraph break]You remember stores A-Z in the Trips Strip and how you cleared F, I and M.";
			now bluh is true;
	if bluh is false:
		say "It's a flowchart that breaks from the Trips Strip into store F (forest,) store I (sortie,) and store M (metros,) before merging at store R, the resort.";
	say "You wonder if there is something in the others now, and if so, what.";

a-text of event map is "RYRYRYRR". b-text of event map is "RYRYRYRR". parse-text of event map is "x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x[sp]x".

the platform is part of the diorama. it is hinthelpy. the platform is spacy. description is "It's one of those speaking platforms that people would stand behind. If it weren't so small."

a-text of platform is "RYRR*RRYR". b-text of platform is "RYRR*RRYR". parse-text of platform is "x[sp]-[sp]x[sp]x[sp]x[sp]x[sp]-[sp]x".

the farm plot is a thing. it is hinthelpy. description is "It doesn't actually have any dirt on it or it'd have crumbled long ago. If the words FARM PLOT weren't traced in it, in fact, you'd probably think it was just a dirt road. Hooray for helpful documentation."

a-text of farm plot is "RRYRRYRR". b-text of farm plot is "RRYRRYRR". parse-text of farm plot is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x".

the pedestal is part of the diorama. the pedestal is hinthelpy and spacy. description is "Too small to put anything on, but it's a good size for instructional purposes."

a-text of pedestal is "RRYYR*RYR". b-text of pedestal is "RRYGR*RGR". parse-text of pedestal is "x[sp]x[sp]e[sp]e[sp]x[sp]x[sp]a[sp]x".

does the player mean scaning steel pad: it is likely.

the steel pad is a hinthelpy thing. description is "It's really wiry and reminds you that you don't do the dishes often enough. You probably don't have time, now."

a-text of steel pad is "RYRYRRYR". b-text of steel pad is "RYRGRRGR". parse-text of steel pad is "x[sp]e[sp]x[sp]e[sp]x[sp]x[sp]a[sp]x".

some crabgrass is part of the diorama. the crabgrass is hinthelpy and spacy. description is "It might be fake, seeing as how it hasn't died after all these years."

indefinite article of crabgrass is "some".

a-text of crabgrass is "RRYRR*RRYR". b-text of crabgrass is "RPGRR*RRYR". parse-text of crabgrass is "x[sp]r[sp]a[sp]x[sp]x[sp]x[sp]x[sp]a[sp]x".

the brass crag is a hinthelpy thing. description is "It would be majestic if it weren't so miniature. You think. Well, it wasn't meant as scenery."

a-text of brass crag is "RRYRRRYRR". b-text of brass crag is "RPGRRRYRR". parse-text of brass crag is "x[sp]r[sp]a[sp]x[sp]x[sp]x[sp]a[sp]x[sp]x".

kind-of-cool is a truth state that varies.

spacy-hint is a truth state that varies.

parse-hint-yet is a truth state that varies.

after scaning (this is the init-scan rule) :
	if first-good-scan is true and kind-of-cool is false and noun is not held:
		say "And hey. That was kind of cool. You didn't have to press the settler all up in anything, or anyone's personal space.";
		now kind-of-cool is true;
	if noun is part of the diorama:
		if noun is not hinthelpy:
			say "You switch the cheat button and scan again and flip it back again, but the colors don't seem to change. Maybe that's a hint in itself[one of]. But the reds and yellows must tell you something about what the [noun] is supposed to turn into. Which you already can read on the diorama. Hmm[or][stopping].";
		else:
			say "You switch the cheat button back and forth and notice a few colors change: [if cheat-on is true][spacies of b-text of noun] to [spacies of a-text of noun][else][spacies of a-text of noun] to [spacies of b-text of noun][end if].";
		now noun is cscanned;
		now noun is ncscanned;
	if noun is spacy and spacy-hint is false:
		say "You also notice the black dot (*) -- hmm, the [noun] should become something with a space.";
		now spacy-hint is true;
	if parse-now is true and parse-hint-yet is false:
		ital-say "x's indicate consonants, as nothing changes to x in the game, and dashes mean vowels you don't know.";
		now parse-hint-yet is true;
	continue the action;

book Largely All-Grey Gallery

gallery-been is a truth state that varies.

rule for supplying a missing noun when entering:
	if player is in Largely All-Grey Gallery:
		now the noun is the evac-cave.

[x current room]
Largely All-Grey Gallery is a stairy innie room in Means Manse. "This is a nondescript place good for hiding out. It's only largely all-grey because all the shades (don't worry, nowhere near 50) leave you dizzy, plus it's as dusty as your study, so that's sort of non-grey here. It stands regally, for all that, though it's full of ISBN bins. [one of]There's an evac-cave that could help you sneak out of the Means Manse[or]You can enter the evac-cave here[stopping][if min-score of means manse < max-score of means manse], though if you're a completionist, you may want to poke around the study and such first[else], since you've twiddled everything[end if][if stria are visible]. Stria glisten on the ceiling[end if]. [one of]There's a diorama hanging here, identical to the one in the study, too[or]That diorama's here, too[stopping].";

diorama is in dusty study and Largely All-Grey Gallery. [this is written in here after defining the gallery as a room]

section isbn bins and snib

the ISBN bins are plural-named LLPish reflexive scenery in All-Grey Gallery. "[if bins are reflexed]The bins are now locked and a bit securer with the snib[else]The ISBN bins are very red and very unlocked. One of them says NIBS (in another shade of red), an embarrassing reference to how fawned over you once gave all sorts of embarrassing sobriquets you didn't want[end if]."

instead of doing something with ISBN bins:
	if action is procedural, continue the action;
	say "You don't have much time to meddle in depth with the bins, [if bins are reflexed]now you've made them secure[else]but you could make them a bit more secure[end if].";

after fliptoing ISBN bins:
	move snib to largely all-grey gallery;
	continue the action;

understand "bin" and "ISBN bin" as ISBN bins.

the snib is useless scenery. "The snib is holding your bins together. That might make it snibs, but let's just pretend it sort of links all the bins together so even if they can't be broken into, someone would have to move them all at once."

instead of doing something with snib:
	if action is procedural, continue the action;
	say "The snib is secure enough. No need to tinker with it.";

understand "snibs" as snib.

a-text of ISBN bins is "RRYR". b-text of ISBN bins is "RRYR". parse-text of ISBN bins is "x[sp]x[sp]i[sp]x". ISBN bins are parse-spoilable.

section evac-cave

the evac-cave is scenery in Largely All-Grey Gallery. "It's a bit small, but you can enter it, or go inside."

understand "evac/cave" as evac-cave.

instead of doing something with evac-cave:
	if action is procedural, continue the action;
	if current action is entering:
		try going inside instead;
	say "You probably just want to enter the cave or go IN.";

section stria

the stria are plural-named vanishing LLPish scenery in Largely All-Grey Gallery. "You never knew what they were until [gtmn] told you. 'You'll be glad one day, maybe,' he said. They're like veins, vines." [stria are LLPish because if you're in the Largely All-Grey Gallery you don't need to attack them]

a-text of stria is "RRYYR". b-text of stria is "PPYGR". parse-text of stria is "s[sp]t[sp]a[sp]i[sp]r". stria is parse-spoilable.

check taking stria:
	say "Too high up." instead;

the stair is a backdrop. "It leads [if player is in Largely All-Grey Gallery]up[else]down[end if].";

does the player mean climbing the stair: it is very likely.

after printing the locale description for Largely All-Grey Gallery when Largely All-Grey Gallery is unvisited:
	if do-i-chat is false:
		if tables are in study and t-b are in study:
			say "After your trip down the ramp, you note the stria--and the ten beams. Ten beams, basement--that makes sense. You could probably do something to the stria or visit the closets if you wanted, but you don't have to.";
		else if tables are in study:
			say "The stria remind you of the stable you walled up a long time ago. It must have been behind the tables you scribbled on the wall so long ago. Maybe not worth going back to uncover.";
		else if t-b are in study:
			say "[if tables are in study][line break][end if]Okay. So that's what the beams in the study were for[if t-b are unexamined]. You remember there were ten now[else]. All ten[end if]. You could uncover them if you were completionist that way.";
		if possibles is false and min-alert is false:
			ital-say "you don't need to do anything else in the Means Manse, but if you want to track what you can do, POSS will do so.";
			now min-alert is true;
		continue the action;

check going outside in Largely All-Grey Gallery:
	say "To get out of the gallery, you need to go inward. So let's go that way.";
	try going inside instead;

check exiting in Largely All-Grey Gallery:
	try going inside instead;

check going down in dusty study:
	if t-b are in dusty study:
		say "Ouch! You smack into a bunch of beams. Ten[if study is not lit]. It might've hurt less if you'd found a light source[end if]." instead;

check going in Farming Framing:
	if noun is inside or noun is outside:
		if backcheck is false:
			now backcheck is true;
			say "You shouldn't need to go back unless you need to figure out the diorama and how the settler works. Do you want or need to do this?";
			if the player yes-consents:
				now player is in dusty study instead;
			else:
				say "Ok, probably best to [if pram is not in lalaland]find a way out. Clean out that pram, maybe[else]see about that ramp[end if]." instead;

check going down in Farming Framing:
	if stair is not visible:
		say "There should be a way down. That sitar could trans-substantiate or be reincarnated as something more useful." instead;
	move player to Largely All-Grey Gallery instead;

instead of doing something with stair:
	if action is procedural, continue the action;
	say "Can't do much but go up or down a stair." instead;

check going up in Largely All-Grey Gallery:
	if stria are visible and t-b are in dusty study:
		say "Hmm. There should be a way back up. The stria could be disposable." instead;
	if backcheck is false:
		now backcheck is true;
		say "You shouldn't need to go back to your study unless you want to get more points. Do you want or need to do this?";
		if the player yes-consents:
			now gallery-been is true;
			now player is in dusty study instead;
		else:
			say "Ok, probably best to find a way out." instead;
	else:
		say "You go back to the study.";
		now player is in study instead

settler-x-nag is a truth state that varies.

check going inside in Largely All-Grey Gallery:
	if player has latches:
		if treatise is off-stage:
			say "You fumble nervously with the latches before entering, and a treatise falls out. Maybe it will help you decide what to do with the latches, before you go out into the wide world without a scanning device to help you know where to use your power.";
			now player has treatise instead;
		say "[one of]You probably want to figure what those latches are for. What could they be hiding? You've done okay without them, but who knows how you'll react in pressure situations. Whatever they need to be, [gtmn] would've made it easier than what you've done so far[or]Those latches. Gotta be a trick to [']em, since [gtmn] had them sent to you[stopping]. Maybe it'd help to [if treatise is examined]re-[end if]read the teariest treatise." instead;
	if player has settler and settler is unexamined:
		if settler-x-nag is false:
			now settler-x-nag is true;
			say "You look at your settler and realize you haven't really EXAMINED it. Maybe you should, before going out in the world. You've been able to guess what to do so far, with the help of heuristics and generally knowing what's in a house, but you may need technical help you can rely on when you hit less friendly areas." instead;
	say "A brief mental lament as you leave gives way to fear of a sting-ops stop sign. But you miss...[paragraph break]'Hands up!'[paragraph break]You say 'grrr' and feel all yellow, then see red as you scream 'Eeeee!' Because it's not a joke. Some guy has a rifle! You drop your lamp, which shatters.[paragraph break]He's got a rifle. You choke, 'O heck.' You notice the name on his uniform is Elmo, which gives you some hope.";
	now lamp is in lalaland;
	now Elmo is in Largely All-Grey Gallery instead;

book carven cavern

Carven Cavern is an innie room in Means Manse. "This is an oddly carved cavern. [if plates are in cavern and plaster is in cavern]Palest pastel plates sit on a plaster psalter[else if plates are in cavern]Palest pastel plates lie here[else if plaster is in cavern]The plaster psalter still remains[else]It's bare now you got rid of the psalter and plates[end if]. [if curtain is in lalaland]The curtain no longer blocks passage in[else if curtain-know is true]The Act-Ruin Curtain blocks passage[else if curtain is in cavern]A curtain may be covering up a passage[else]The psalter looks like it could be blocking something[end if]. You probably don't want to go back outside."

after looking in carven cavern (this is the pronouns for cavern rule):
	if palest pastel plates are in carven cavern, set the pronoun them to palest pastel plates;
	if plaster psalter is in carven cavern, set the pronoun it to plaster psalter;
	if act-ruin curtain is in carven cavern, set the pronoun it to act-ruin curtain;
	continue the action;

after fliptoing plaster psalter:
	now act-ruin curtain is in carven cavern;
	continue the action;

check exiting in cavern:
	if act-ruin curtain is in lalaland:
		say "Exiting the cavern, entering the passage, the same thing.";
		try going inside instead;
	say "It's much safer to go in, not out, here." instead;

check going nowhere in cavern (this is the cavern check rule):
	say "The only way to make progress is inward, through that [if act-ruin curtain is in lalaland]ex-[end if]curtain.";
	if act-ruin curtain is in lalaland:
		say "[line break]Go through?";
		if the player direct-consents:
			try going inside instead;
		else:
			say "That is probably the way out of the Means Manse. But you are free to look around." instead;
	do nothing instead;

check going inside in cavern:
	if plaster is in cavern, say "There's nowhere to go in, yet." instead;
	if act-ruin curtain is in cavern:
		now curtain-know is true;
		say "As you touch the curtain, it immediately drains you of your will to enter it. You realize it must be a ACT-RUIN CURTAIN. You'll have to disable it somehow without touching it" instead;
	say "You walk through the former act-ruin curtain--and through an obscure part of Old Warpy. You hear a voice: 'You! Find! Unify! Do!' Is it [gtmn]? Perhaps it is. It's only when you totally lose your sense of direction that you see a way out. It's the Trips Strip, er, Strip of Profits. Which looks the same and different. You look at your treatise one last time--it can't help you any more, but you put it deep in your super purse for sentimental value, for later.";
	now satchel is in lalaland;
	now teariest treatise is in lalaland;
	solve-region Means Manse;
	the rule succeeds;

chapter plaster psalter

a plaster psalter is scenery in cavern. "It looks sturdy enough, but out of place[if plates are visible]. Some plates lie on top of it[end if]. Maybe you can make it into something more useful."

check taking plaster:
	say "It's stuck to the floor. What would you do with it, anyway?" instead;

a-text of plaster is "RRYRRYR". b-text of plaster is "RRGRRGP". parse-text is "x[sp]x[sp]A[sp]x[sp]x[sp]E[sp]R".

chapter stapler

the stapler is a container. description of stapler is "[if stapler contains staple]Locked and loaded with a staple[otherwise]Empty, but given its width, ready for some heavy-duty ammo[end if].". "An oddly wide metal stapler lies here. The normal material would nearly get lost in it."

check examining stapler:
	ignore the examine containers rule;

check closing stapler:
	say "No need to futz. [if staple is in stapler]You already have something in there[else]When you put something in the stapler, it'll be good[end if]." instead;

check opening stapler:
	if staple is in stapler:
		say "You don't need to. The staple belongs in there, to be stapled against the sorts of things that find themselves getting stapled." instead;
	if player has staple:
		say "I'm going to assume you mean opening the stapler to put the staple in.";
		try inserting staple into stapler instead;
	if act-ruin curtain is in lalaland:
		say "You've probably done enough with your stapler, here." instead;
	say "You don't have anything to put in the stapler." instead;

check inserting into stapler:
	if noun is not staple:
		say "Only one thing goes in a stapler." instead;

after inserting staple into stapler:
	say "The staple fits in with minimal fuss.";
	the rule succeeds

chapter act-ruin curtain

check touching curtain:
	try going inside instead;

curtain-know is a truth state that varies.

the act-ruin curtain is scenery. "It looks flimsy enough, but [if curtain-know is true]you know if you touch it, you'll freeze up again[else]closer inspection reveals it to be an ACT-RUIN CURTAIN, which causes people to procrastinate tasks big and small, enjoyable[curt-kno] or not[end if]. It's lined, like a sheet of notebook paper, and you probably can't pull it away with your bare hands."

to say curt-kno:
	now curtain-know is true;

to say could-staple:
	say "You need the right tool to do so. You probably need one that could get a grip on some paper[if player carries stapler]. Maybe you could use the stapler to STAPLE the wall[stapload][end if]";

instead of opening the act-ruin curtain:
	say "[could-staple].";

to say stapload:
	say ", [if staple is in stapler]especially since[else]once[end if] it's loaded";

instead of taking act-ruin curtain:
	try pulling act-ruin curtain instead.

instead of pulling the act-ruin curtain:
	say "[could-staple].";

the vertical stripe is part of the act-ruin curtain. description of vertical stripe is "Not very dark, but off to the left, creating a sort of margin.".

the horizontal stripes are part of the act-ruin curtain. description of horizontal stripes is "Bluish, and there are about thirty."

the small holes are part of the act-ruin curtain. description is "They look like some sort of weird lock or something.". understand "hole" as small holes.

after fliptoing stapler:
	if act-ruin curtain is not in cavern:
		now act-ruin curtain is in cavern;
	continue the action;

chapter pastel plates

the palest pastel plates are plural-named scenery in carven cavern. description of plates is "They're...a bit squarish. Odd. And they're  cracked and useless and appear to be squarish, but each has metallic trim around its edge and even some red writing[if plaster is in cavern]. The plates seem like they belong with the plaster[end if].".

instead of taking plates:
	if plaster is visible:
		say "The plates are wedged in, as if they belonged there. Sort of.";
	otherwise:
		say "They are too broken and bulky to be of much use.";

a-text of plates is "RRYRRY". b-text of plates is "RR?RRY". parse-text is "x[sp]x[sp]?[sp]x[sp]x[sp]-."

chapter staple

the staple is a thing. description is "It looks unbent (well, beyond the two bends all staples have) and usable. It's the biggest staple you've seen by a long shot."

understand "staples" as staple.

check taking staple:
	if staple is in stapler:
		say "It belongs in the stapler." instead;

chapter stapleing

stapleing is an action applying to one thing.

understand the command "staple [something]" as something new.

understand "staple [something]" as stapleing.

does the player mean stapleing the act-ruin curtain: it is very likely.

rule for supplying a missing noun when stapleing:
	if act-ruin curtain is visible:
		now noun is act-ruin curtain.

carry out stapleing:
	if player does not have stapler:
		say "You need something to staple with." instead;
	if stapler is not in staple and player has staple:
		say "(Putting the staple in the stapler first)";
		try inserting staple into stapler;
		if staple is not in stapler:
			say "[reject]" instead;
	if noun is holes:
		try stapleing act-ruin curtain instead;
	if noun is treatise:
		say "It's only one piece of paper. It doesn't need stapling." instead;
	if noun is not act-ruin curtain:
		say "That doesn't need stapling." instead;
	If noun is the player:
		say "I can't imagine where you want to staple yourself, and I don't want to know." instead;
	if stapler is off-stage:
		say "[reject]";
	if staple is not visible:
		say "You can't staple with that stapler until you have a staple." instead;
	say "You staple the act-ruin curtain. The staple is the right strength to cut in all the layers, grab them at once, and peel them back. The act-ruin curtain snaps back, slamming like a door and melting into the wall--and taking the stapler with it. You can't repaper, but [if latches are visible]with those latches, you may[else]you won't[end if] need to prepare to go [b]in[r] to further adventure!";
	now act-ruin curtain is in lalaland;
	now staple is in lalaland;
	now stapler is in lalaland;
	reg-inc;
	the rule succeeds;

turns-wasted is a number that varies.

high-sign is a truth state that varies.

every turn when Elmo is visible and Elmo has rifle:
	increment turns-wasted;
	if turns-wasted > 4:
		if high-sign is false:
			say "You hear a sigh nigh. A high sign from Elmo?";
			now high-sign is true;
			now high sign is in Largely All-Grey Gallery;
		else:
			say "Elmo is flashing some sort of high sign. Bold cue? Could be.";
	else:
		say "Elmo listlessly [one of]mutters 'a rifle re-fail.'[or]sings 'He's got a hostage.'[in random order]";

check going outside in Carven Cavern:
	say "There's no way back, and you wouldn't want to go back." instead;

the rifle is a vanishing thing. description is "It's probably loaded with a bullet with your name on it. But you don't want to find out. You think you can read writing on it, if you look closely."

chapter Mole Elmo

Mole Elmo is a person. description is "He is waving that rifle you probably need to neutralize. Yet you can't tell if his expression says wry, or worry.". "[if do-i-chat is true]Mole Elmo's rifle changes to a flier[else]Mole Elmo looks at you, then the rifle, half as if he wants you to do something with it[hi-sign][end if].". Mole Elmo holds the rifle.

understand "gun" as rifle.

after doing something with rifle:
	if the player's command includes "gun":
		say "It's a rifle, not a gun. This may or may not help.";
	continue the action;

check fliptoing when rifle is visible and player is in Largely All-Grey Gallery:
	if noun is not rifle:
		say "Any distraction, and Elmo might fire. Unless, of course, you can change the rifle itself." instead;

instead of doing something to the rifle when Elmo is visible:
	if the current action is taking:
		say "Not even if you were an action hero." instead;
	if the action is procedural:
		continue the action;
	say "You're not in a position to do anything physical with the rifle. Maybe it can become something.";

a-text of rifle is "RRYYR". b-text of rifle is "RRYYR". parse-text is "[bug-report]".

selftalk-warn is a truth state that varies.

before talking to (this is the default talking to rule):
	if noun is not Elmo and noun is not Gunter and noun is not Elvira and noun is not Gretta:
		if noun is Gretta and macks are visible:
			say "The macks are monopolizing the conversation. Maybe you should get rid of them." instead;
		if noun is a person:
			if selftalk-warn is false:
				ital-say "ASK (PERSON) ABOUT (PERSON/THING) is what this game uses for detailed conversation. However, TALKing asks about a default subject and gives a general reply, which may be useful, too. You can do so now, and this warning won't appear again.";
				pad-rec "talking";
				now selftalk-warn is true;
			try objasking noun about noun instead;
	if noun is door:
		say "The door seems to grumble and curse very quietly[if bogus-plains is reflexive]. Perhaps you could find a way of lecturing it without explicitly talking, but it's probably not critical[else]. Well, you already splained to it[end if]." instead;
		repeat through table of default-gen-blather:
			if noun is default-talker entry:
				say "[gen-blah entry][line break]" instead;
		if noun is not pugnacious plant:
			say "You can only talk to animate objects. This isn't one, or the game (mistakenly or otherwise) doesn't think it's one." instead;

check talking to Mole Elmo (this is the can't talk while Elmo has the rifle rule) :
	if rifle is visible:
		say "'Hostages['] hot gases!' Elmo booms, waving his rifle." instead;

to say hi-sign:
	if high-sign is true:
		say ", even flashing a high sign.";

the high sign is undesc.

instead of doing something with the high sign:
	if current action is not objhinting:
		say "[if current action is not examining and current action is not reading]Not much to do but look. [end if]Elmo appears to be flashing the numbers 3, 4, 2, 5 and 1 in order with his fingers. Then a pause, then he tries it again[one of]. Hm, nothing here five letters except that rifle[or][cycling].";

check scaning when rifle is visible:
	say "Elmo might shoot you if you went for the settler, which you notice is blinking [spacies of a-text of rifle]. Which has to be the rifle. You hope." instead;

after fliptoing rifle:
	pad-rec-q "rove over";
	now high sign is in lalaland;
	try talking to Mole Elmo instead;
	continue the action;

section elmo dialogue

the litany of Mole Elmo is the table of Elmo comments.

table of Elmo comments [tco-mo]
prompt	response	enabled
"Ask Elmo about how to use your Settler, because you're not sure yet."	flier-quip	1
"Show Elmo the sweet Settler you know how to use."	showset-quip	1
"Check the scale that can flip to laces and back."	scale-quip	0
"Check the ELMO nametag that could show him up as a mole."	elmomole-quip	0
"Check the PLUG of nutrients that could become a GULP bottle."	gulp-quip	0
"Recall the tables/stable flip."	stable-quip	0
"Recall the my niche/chimney flip."	chimney-quip	0
"Recall the ten beams/basement flip."	basement-quip	0
"Recall the pram/ramp flip."	ramp-quip	0
"Recall the giant pin/painting flip."	painting-quip	0
"Recall the stair flip."	stair-quip	0
"Recall what you tried with the diorama."	dio-quip	0
"See about all you could try with the diorama."	dio-all-quip	0
"Look through all the diorama data."	dio-2-quip	0
"Oh, cool, I know what the reds and yellows are for, now."	got-red-yellow-quip	0
"Geez. I'm still busted. Kinda shaken by...well, the excitement."	still-busted-quip	0
"Ask Elmo about the lamp"	lamp-quip	0
"Explain you know what the colors besides red and yellow mean, and you're wondering what to DO."	gp-quip	0
"Ask Elmo about the 'Letters Settler' text."	settler-quip	0
"Ask Elmo about the 'Yorpwald-Wordplay' text on the laced decal."	yorp-quip	0
"Ask Elmo about what you remember from the diorama."	dio-elm-quip	0
"Scan everything about the diorama."	dio-elm-2-quip	0
"Yeah, I see what orange means."	orange-know-quip	0
"Hmm, I don't see what orange means."	orange-dunno-quip	0
"Oh, hey. The satchel. [unless satchel is escanned]Maybe I could scan it[else if satchel is bscanned]I scanned it with cheat on and off[else]I could scan it some more[end if]!"	satchel-quip	0
"Hm, still not clear on the green/purple."	still-no-gp-quip	0
"Tell Elmo you got what the cheat button does, thanks!"	got-it-quip	0
"[unless y-orange is true]Hm, I even see what orange is for. [end if]Got some reinvestigator interrogatives, hustle-sleuth."	interr-quip	0
"Ask Elmo about her toy theory"	toy-theory-quip	0
"Ask Elmo about your trial trail"	trial-trail-quip	0
"Strip of Profits? Was that the Trips Strip? What's at the...?"	trips-quip	0
"Strategy-try stage? Get artsy?"	artsy-quip	0
"Poss. Clue? Closeups?"	clues-quip	0
"Gretta Garett-Tatger?"	gretta-quip	0
"Jumbo, um, job. Six of [']em? Some fix!"	shortcut-quip	0
"Ask Elmo about new stores in the Strip of Profits"	strip-quip	0
"Complain about the weather [bracket]NOTE: complaining, or listening to Elmo complain, is possibly therapeutic, but utterly unproductive[close bracket]"	weather-quip	0
"Complain about your favorite sports team"	sports-quip	0
"Complain about the media"	media-quip	0
"Complain about the media some more"	media-quip-2	0
"Complain about how more exciting people and stories pushed you to the curb"	curb-quip	0
"Complain about social forces in general"	social-quip	0
"Let Elmo complain about his lack of success with women"	girls-quip	0
"Finish Fishin[']."	bye-Elmo-quip	1

table of quip texts (continued) [tqt-mo]
quip	quiptext
curb-quip	"'It's not your fault you didn't have a super perfect story when you rescued Yorpwald. That's the fault of -- someone above -- if they even exist. Maybe if you fix what's wrong here, it'll be a more compelling story and pontificators won't turn against you. Or get bored.' Elmo turns to the fourth wall. 'Or have an excuse to pretend they're bored.'" [start ELMO text]
interr-quip	"'The Strip of Profits is--well, it's tied up with Old Warpy again. You know, how Old Warpy sent you to the forest and metros and sortie? Yeah, there's people buying stuff from the stores, but they're so occupied, they won't notice YOU! Still, you've got a trial trail ahead. Elvira's got her toy theory started. About you being bad for Yorpwald.'"
toy-theory-quip	"You've sort of heard it, and you've sort of thought it, but yeah. She really did backhand-compliment you (big deal, boring mathy stuff, not a SHRED of excitement, but you did the job, she guessed) while saying people needed someone more exciting to mythologize about.[wfak][paragraph break]Like, gosh, HER! 'Her united con continued unnoticed. But it's too perfect. Tough to--ugh. Something messes up, she denounces it right away. SHATTER-THREATS is so specific to you, too. That's why I don't like it.[paragraph break]'She at the very least SEEMS to think you're behind the influx of annoying anagrams. But then, she might be trolling us by framing you. That's an...other-y theory, eh, tyro?'"
strip-quip	"'Yeah, lots to explore. But I bet observing and talking to people will help. Even if they don't want to help. There also may be some--illegal types around stores K and N. You don't need them, but they can't hurt. There's others towards the end of the alphabet. New places that might have clues.'"
clues-quip	"'Examine everything. People and things blocking you. Try to get by them. Just plain listen, or smell. Dialogues also guide. Oh, and if you can find Gretta Garett-Tatger, bonus.'"
gretta-quip	"'She's a good investigative reporter, the best. She's dug further into Elvira's doings than anyone else. But she's become a bit of a--target.' You both cringe. 'No, her name's not your fault. Just, she may have found something, even left a cue in the Strip of Profits.' Elmo shows you a picture of her."
trial-trail-quip	"'More trouble, more stores. Six of [']em. But you can't just switch stuff to other stuff. That'd be more hokey and homeworky. You'll have to infer finer things to upset the setup. But I have some basic notes.' Elmo hands you a paper. 'It's a Gird Grid. More details there. Read it later.'"
shortcut-quip	"'Hm, maybe a covert vector after you solve two...[paragraph break]'Oh, hey, if you want to complain about random stuff, go ahead. It might not give any practical help, but I don't mind listening. I've thrown a lot at you.'"
flier-quip	"'Hmm. Well, my last name's not Stetler, but I can give it a shot.' You and Elmo scan the flier, which is [if setspace is true]R Y R R Y[else]RYRRY[end if] with cheat or teach mode. 'I saw your settler was [if setspace is true]R R Y Y R[else]RRYYR[end if] when I had the rifle.' Elmo speed-reads your treatise. 'So the colors tell you what stuff should become. That gives us five letters.'[paragraph break]'I and E are yellow for the rifle AND the flier, and R and F and L are red. Hm. Dunno if that's enough. I have some other supplies [gtmn] gave me.' You note a PLUG of nutrients, laces, and an ELMO nametag." [check what's scanned]
scale-quip	"You experiment with changing the laces to a scale and back. Laces to scale is [if setspace is true]R Y R R Y[else]RYRRY[end if], scale to laces is [if setspace is true]R Y R Y R[else]RYRYR[end if].  [mo-data]."
gulp-quip	"The plug becomes a gulp, then back to a plug, no more unappetizing than before. You note plug to gulp is [if setspace is true]R Y R R[else]RYRR[end if], gulp to plug is [if setspace is true]R R Y R[else]RRYR[end if], and cheat mode changes nothing. [mo-data]."
elmomole-quip	"You flip the nametag to MOLE and back, tracking the scanner. Elmo to Mole is [if setspace is true]R Y R Y[else]RYRY[end if], Mole to Elmo is [if setspace is true]Y R R Y[else]YRRY[end if]. [mo-data]."
got-red-yellow-quip	"'Yyupp. Vowels. But we haven't found anything where the cheat button actually does anything.' You try and think of something where it might."
still-busted-quip	"You shake your head. 'Duh, I'm humid.'[paragraph break]'A, e, i, o, u,' Elmo points out. 'Vowels.'[paragraph break]'Maybe other letters too...nah, too many consonants go to red. Yeah. Vowels and consonants.' You figure the cheat button might be a good idea to learn for the future. Might be a good idea to start small. Like--with the lamp."
showset-quip	"'Hint agent thing! NEAT!' You show him what the red and yellow mean, then the green and purple. He asks if there are any other colors, like orange."
lamp-quip	"'Yeah, sorry about the lamp.' You say no worries--you're trying to figure what it means. Elmo doesn't judge. 'Yeah, you been under stress, I bet, let's work it out.' The settler vaguely goes Red, yellow/green, red and red near the fragments. 'Hm, cheat mode changes A from yellow to green. That must mean something.'"
gp-quip	"'Awesome! Yeah, cheating adds blue to the reds and yellows if the letters are right. To purple and green[if y-orange is false]. Any other colors? Hm, on the back of the settler, YORPWALD's D is orange, and WORDPLAY's W is, too[end if].'"
settler-quip	"'LETTERS SETTLER. Hm, the E-T-T change color when you switch cheat mode on. Maybe that's because they are in the right places. Yellow e to green, red t to purple. Not clear if it's e and t specifically that change, though.'"
yorp-quip	"'Hm, [if chimney-quip is mowered]more orange letters to Y[else]the D in Yorpwald and W in Wordplay are orange. Or maybe it's what the letters can become. Orange, we haven't seen much of that[end if]. Also, interesting, the O-R change colors when you go cheat mode. Looks like they're already in the right place.'[paragraph break]'Gotcha, doc. Good catch.'"
stable-quip	"You remember cheat mode did not change the tables when you scanned them before entering the stable--there was lots of red writing, too, which your pedanto-notepad says was wrong letters. But there were some yellows, too. They were probably wrong, but a different sort of wrong."
basement-quip	"You remember cheat mode did not change the ten beams when you scanned them before entering the basement--there was lots of red writing, too, which your pedanto-notepad says was wrong letters. But there were some yellows, too. They were probably wrong, but a different sort of wrong."
chimney-quip	"You remember cheat mode did not change the 'my niche' text when you scanned it before entering the chimney--there was lots of red writing, too, which your pedanto-notepad says was wrong letters. But there were some yellows, too. And an orange. You suddenly realize the orange mapped to Y[y-know]."
ramp-quip	"You recall red, yellow, red, red for the ramp, cheat or no."
painting-quip	"You recall R Y Y R R Y R R for non-cheat mode, with the center two going purple."
stair-quip	"You recall R R Y Y R with one tile changing color with cheat mode. But it is probably best to focus on non-cheat mode."
dio-quip	"You scan the whole diorama to make sure of things, and Elmo looks at your diorama notes for the [list of hinthelpy escanned things].[paragraph break][dior-scan][if crabgrass is cscanned or brass crag is cscanned or steel pad is cscanned or pedestal is cscanned]You and Elmo notice a few entries changed color when and where letters were the same. You decide to isolate what they mean[else]Hmm, all reds and yellows[end if][unless its-all-scanned]. You realize you could get more data, so maybe you could sneak up to the study and try again[end if]."
dio-all-quip	"You backtrack to scan everything remaining: the [list of hinthelpy not escanned things]."
dio-elm-quip	"You backtrack to scan everything remaining: the [list of hinthelpy not escanned things]."
dio-elm-2-quip	"With everything scanned now, you take a closer look.[paragraph break][dior-scan][paragraph break]You focus on the rare greens and purples. Elmo coughs, as if cuing you to something--how the greens and purples are in the same position between flipped diorama parts."
dio-2-quip	"You hash the purples and greens out some more.[paragraph break]You focus on the rare greens and purples. Crabgrass and brass crag, letters two and three. Pedestal and steel pad, letters four and seven. You think on what is special about these, in both words."
satchel-quip	"'Ach, let's...' you say. You [satchel-extra]notice the two end characters are red, but the rest switch from red and yellow to purple and green on cheat mode. That's the most purple and green you've seen yet."
still-no-gp-quip	"Elmo notes that individual letters can be either red-or-purple or yellow-or-green. All green letters in cheat mode were yellow in non-cheat, and the same for purple to red. Then the ones that are purple/green--are in the right place.[paragraph break]Elmo thinks a minute and notes red plus blue is purple, and yellow plus blue is green."
got-it-quip	"'Excellent! So, yeah, the settler adds blues when you're in cheat mode and the letters are right. Purple consonants, green vowels.'[if y-orange is false] Elmo looks over your settler once more. 'Hmm. What's the orange for? On Yorpwald/wordplay?'[else] You and Elmo note orange is for Y's, and you suspect correct oranges become brown or something.[end if]"
orange-know-quip	"You've got this one--Yorpwald, wordplay, the orange D at the end goes to Y, the orange W at the start to Y, too[y-know]."
orange-dunno-quip	"You [if backside is examined]re-[end if]examine the backside of settler and note how Yorpwald lines up with Wordplay--those two orange letters MEAN something. Then you both realize both orange letters go to a Y that's not in the right place[y-know]."
bye-Elmo-quip	"[if hold-it-up is false][note-gretta]A pause. 'Go, you doer. You're good. Un-retire, reuniter. Re-shift it fresh. Disable bad lies. There's an evac-cave over thataway. You'll know what to do. I think. Forsake fears, ok?'[paragraph break][gridchek]You leave, feeling less resave-averse, but run as you hear 'Get Elmo!' / 'Get ol['] me? Let me go!' 'Sympathy?' / 'My hat, spy!' ... 'A spy yaps, pays...'[paragraph break]You crawl through the evac-cave, which exits to writing behind a dune, man. UNNAMED: MUNDANE, but you look closer and see RETRAIN TERRAIN in a font that feels rantier. Behind is a carven cavern. It looks as good a place as any to visit.[end if]" [end ELMO text]

to say gridchek:
	say "[if player does not have gird grid]Elmo hands you an additional note--a Gird Grid--to help you on your way. [end if]";
	now player has gird grid;

section Gird Grid

the Gird Grid is a warpable thing. description is "[bug-report]"

after printing the name of gird grid when gird grid is examined:
	say " (X 1 through X 6 to read quickly)";

understand "x [number]" as gridxing when player has gird grid.

gridxing is an action applying to one number.

check gridxing when roved is true:
	say "You look back on what you accomplished. Perhaps [if rustic citrus is unvisited]a variable challenge awaits[else if cur-score of rustic citrus < 14]you need to mix things up all sorts of different ways, here[end if]." instead;

carry out gridxing:
	if roved is true, say "You don't need to review what you accomplished in-depth, though it's sort of fun." instead;
	if number understood < 1 or number understood > 6:
		say "You must choose 1-6 in the Gird Grid." instead;
	choose row number understood in table of griddiness;
	if there is a reg-match entry:
		if reg-match entry is solved or reg-match entry is bypassed:
			say "You're pretty sure you don't need to deal with the [reg-match entry], any more. Still, you re-read the description and take time to feel pleased with what you fixed." instead;
	say "[reg-blurb entry][line break]";
	if there is a reg-match entry and mrlp is reg-match entry:
		say "[line break][if cur-score of mrlp is 0]Hm. Maybe you'll figure out what do do, and how[else]Hm. The hints make a good deal of sense, now you've done a bit here[end if].";
	the rule succeeds;

check examining the Gird Grid:
	now gird grid is examined;
	say "The Gird Grid [one of]is the real thing--endorsed by Dr. Ridrig! It [or][stopping]is divided 2x3, into sections labeled, not quite in alphabetical order, U(1), V(2), P(3), Y(4), W(5) and T(6).[paragraph break]Just type in the part you wish to examine, (case insensitive) letter or number[one of] (in the future, you can type X # for the number you want)[or][stopping].";
	let cho be the chosen letter;
	if cho - 32 is a uc-ascii listed in the table of griddiness: [switch to lower case]
		now cho is cho - 32;
	if cho is a uc-ascii listed in the table of griddiness:
		choose row with uc-ascii of cho in table of griddiness;
	else if cho is a num-ascii listed in the table of griddiness:
		choose row with num-ascii of cho in table of griddiness;
	else:
		say "You need to chose 1-6, or one of PTUVWY. Case insensitive." instead;
	if there is a reg-match entry:
		if reg-match entry is solved or reg-match entry is bypassed, say "You're pretty sure you don't need to deal with the [reg-match entry], any more. Still, you re-read the description and take time to feel [if reg-match entry is bypassed]relieved you didn't have to deal with that[else]pleased with what you fixed[end if]." instead;
	say "[reg-blurb entry][line break]";
	if there is a reg-match entry and mrlp is reg-match entry, say "[line break][if cur-score of mrlp is 0]Hm. Maybe you'll figure out what do do, and how[else]Hm. The hints make a bit more sense, now[end if].";
	the rule succeeds;

table of griddiness
num-ascii	uc-ascii	reg-match	reg-blurb
49	85	routes	"The Poison Stripe surrounding the Same Mesa has caused people there to lose all sense of direction, physically and mentally. If one person could escape, that would change. The Oopsin['] Priest may be able to help you."
50	86	troves	"Spoiloplis was founded on self-help books, pyramid schemes, and other shady industries. Mayor Irv Lea lauds it as a center of positive thought. And not the nerdy brainy thought that goes into anagrams. You probably can't meet him, but maybe you can upset the social order."
51	80	presto	"There is rumor of a Hacks['] Shack immune to Elvira's SHATTER-THREATS legislation behind a near-nonsensical maze that may have you saying or thinking impolite words. In that Hacks['] Shack, you may feel a sense of normality that gets you back to how things were before Elvira."
52	89	oyster	"A seashore seahorse mentioned a seaside dis-ease you need freaky fakery to avoid. Something about a hideout, and a gang called DIE THOU. Vigorous action is necessary, and a lot of it."
53	87	towers	"The Bland Sad Badlands are not to be traversed lightly. People protecting their territory just because. Bandits sacking taverns for no reason. Castle Apcur, the Curst Palace, lies there, at the other side of Leak Lake. Condemned to be torn down to make a new MoneyCo office. Tax-free and all. Oh, and luxury condos endorsed by Avrile, that lifestyle maven. But if you could restore the palace somehow..."
54	84	otters	"Little is known about the region beyond Store T except that an Or-Not-O-Tron dissuades people from paying it much attention. It must be important!"
48	--	--	"You'd guess area zero would be this, here, now, but you've been doing okay so far."
55	--	--	"You vaguely dread a seventh area, as if there isn't enough already."
56	--	--	"You vaguely dread an eighth area, as if there isn't enough already."
57	--	--	"You vaguely dread a ninth area, as if there isn't enough already."
--	70	--	"You daydream back to solving Store F. Salad days!"
--	73	--	"You daydream back to solving Store I. Salad days!"
--	77	--	"You daydream back to solving Store M. Salad days!"
--	82	--	"You daydream back to solving Store R and defeating Red Bull Burdell. Salad days!"

book Farming Framing

Farming Framing is a stairy innie room in Means Manse. "Well, this was supposed to be a stable, but it never got fully built. You never actually used this stable to, say, let a foal named Olaf loaf. But you always meant to[if stair is visible]. The stair you made leads [b]DOWN[r][end if][if tables are in lalaland]. You can go [b]IN[r] or [b]OUT[r] back to the study--it doesn't matter which[end if].";

the sitar is a vanishing thing in Farming Framing. "A sitar, from your kitschy phase, sits here[one of]. You were wondering where it went[or][stopping]."

a-text of sitar is "RRYYR". b-text of sitar is "PRYYP". parse-text of sitar is "s[sp]t[sp]a[sp]i[sp]r". sitar is parse-spoilable.

description of sitar is "It possesses a one-is-many-ness about it that can lead you to dizzying heights of thought...or sink you down low. You can read it to find its previous owner."

backcheck is a truth state that varies.

check going outside in Farming Framing:
	if backcheck is true:
		now backcheck is false;
		say "You don't really need to go back inside unless you're unsure of how your powers work[if satchel is off-stage]. You haven't figured what to do with the latches, and maybe their 'right' form will give you clues[end if]. Plus, the sitar [if sitar is visible]has an odd thereness about it[else]became a nice stair to the basement[end if].[paragraph break]Still, go back to the study anyway?";
		if the player direct-consents:
			continue the action;
		else:
			say "Okay, onward." instead;

check going inside in dusty study:
	if tables are in dusty study:
		say "Hm, maybe those tables on the wall provide a clue where 'in' leads[if study is not lit], or they would, if you could see them[end if]." instead;

section girding ridging

the girding ridging is bounding scenery in Farming Framing. description is "It blocks your way out, but on the other hand, it blocks a mob's way in, which is more important right now."

instead of doing something with girding ridging:
	if action is procedural, continue the action;
	say "The girding ridging is probably holding people back from entering. You don't need to do anything. You need a hidden escape[if gallery is visited], like in the gallery below[end if]."

book highest heights

Highest Heights is an innie room in Means Manse. "Well, you're in the top room of the Means Manse, here. The floor is, of course, divided in eighths, set high, with niches up to several inches. The patented closest closets lead back down the chimney again[if ramp is visible], and the ramp you made slopes down[end if]."

after going when heights are visited and strip of profits is unvisited:
	if location of player was unvisited: [and location of player is not heights]
		say "'Oh! That's where your closets were hidden here. Handy.";
		move closets backdrop to all visited rooms;
	continue the action;

the closest closets are a backdrop. "You can't quite see where they are going. They are weird to look inside. St. Cole's designed them meticulously. But they probably lead back to the [if player is in study]Highest Heights[else]dusty study[end if]."

understand "closet" as closets.

instead of taking closets:
	try entering closets;

the closest closets are in Highest Heights.

check entering closets:
	move closets backdrop to all visited rooms;
	if player is in study:
		say "The closets sure are faster than climbing the chimney.";
		now player is in heights instead;
	if player is in heights:
		say "You go back down to the closets[if ramp is visible], not ready for the ramp yet[else], not able to figure the pram yet[end if].";
	else if player is in Largely All-Grey Gallery:
		if backcheck is false:
			now backcheck is true;
			say "You shouldn't need to go back to your study unless you want to get more points. Do you want or need to do this?";
			if the player direct-consents:
				now gallery-been is true;
				say "[if t-b are in study]You go back through the closets to your study[else]Woo! You save the effort of climbing up stairs[end if].";
				now player is in dusty study instead;
			else:
				say "Ok, probably best to find a way out." instead;
	else if player is in Farming Framing:
		say "[if tables are in study]You go back through the closets to your study[else]Woo! You save the effort of walking through where the tables are[end if].";
	now player is in study instead;

the pram is a thing in highest heights. "A pram lies here, one of those stupid gifts you never got to use."

a-text of pram is "RYRR". b-text of pram is "RYRR". parse-text of pram is "x[sp]a[sp]x[sp]x".

instead of taking the pram:
	say "It'd be hard to carry any reasonable distance."

description of pram is "It was a painfully obvious hint of a gift from someone very well-meaning. But it seemed pretty useless, what with all the stairs in the rest of the manner you had to go up and down. [painful-memory]"

to say painful-memory:
	say "[one of]You see red at a further painful memory. Relive it?[or]Re-relive the painful memory associated with it?[stopping]";
	if the player direct-consents:
		say "[one of]The person who gave it to you said it would help you [if player is female]meet[else]feel like[end if] Mr. Pa. You see red as you cringe at the memory.[or]The memory of encouragement to [if player is female]meet[else]be[end if] Mr. Pa still makes you see red after all this time.[stopping][run paragraph on]";
	otherwise:
		say "Yeah, you probably don't need to, to figure what to do with the pram.[no line break]";

the ramp is scenery. "The ramp slopes down, not too sharply."

check taking ramp:
	say "To take the ramp in the going somewhere sense, go DOWN." instead;

check going down in highest heights:
	if ramp is not visible:
		try entering closets instead;
	else:
		say "You slide down the ramp--into the basement you [if t-b are not in study]uncovered another, easier way to get to[else]nearly forgot you had[end if].";
	now player is in Largely All-Grey Gallery instead;

check going inside in highest heights:
	try entering closets instead;

chapter super purse

purse-searched is a truth state that varies.

to purse-maybe-warn:
	if purse-searched is false:
		ital-say "You can type I to take inventory in the future.";

instead of searching purse:
	say "(You can type I to take inventory in the future.)";
	try taking inventory instead;

The super purse is a warpable thing. description is "[one of]You find a small note inside, apologizing if it's [if player is male]unusual for you[else]heinously stereotypical[end if], explaining it was a choice between this and an all-wet wallet, and it's 50% bigger than a co-kept pocket. [or][stopping]The inside seems to be covered with space capes, a weird technology that lets the inside be greater than the outside. It re-ups your carrying capacity."

the space capes are part of the super purse. the space capes are useless and plural-named. description of space capes is "If I understood the science behind them, I'd be wasting my life programming games like this, wouldn't I? Okay, maybe I am, anyway."

instead of doing something other than examining space capes:
	say "The capes work--no need to futz with them or to wonder how they work.";

pursins is a truth state that varies.

check inserting into the purse:
	ignore the can't insert into what's not a container rule;
	if noun is lamp:
		say "Fire hazard." instead;
	if player does not have noun:
		if pursins is false:
			ital-say "putting something in the purse is the same as taking it.";
			now pursins is true;
		try taking noun instead;
	say "That should already be in the purse.";

instead of doing something with purse when mrlp is troves and stop post is reflexive:
	say "Do not worry about wealth you lost. [i]Only worry about the wealth you can create[r].";

chapter letters settler

The Letters Settler is a warpable thing. understand "recoded decoder" and "recoded/decoder" and "revised/deviser" and "revised deviser" as letters settler. understand "device" as letters settler.

instead of showing settler to agnostic:
	try objasking agnostic about settler;

after examining settler for the first time:
	say "You figure up some heuristics to make the settler easier to use and write them in your notepad.";
	pad-rec "the settler";
	continue the action;

understand "scanner" as settler.

a-text of letters settler is "RYRRRYR". b-text of letters settler is "RGPPRYR". parse-text is "[bug-report]".

description of the letters settler is "It's shaped like a hand-held vacuum, with an output display on the front. Weird receptors can SCAN things. Below a colorful logo, you also notice a [if cheat-on is true]glowing[else]dark[end if] button labeled TEACH/CHEAT. I guess it doesn't wish to judge.[paragraph break]You also feel a switch, some sort of slider and a decal on the backside."

check examining settler (this is the examine to scan under duress rule) :
	if rifle is visible:
		try scaning rifle instead;
	if owls are visible:
		say "You reflexively point the settler at the swooping owls as they attack.";
		try scaning owls instead;
	if raptor is visible:
		say "You reflexively point the settler at the charging raptor as it attacks.";
		try scaning raptor instead;
	if player is in bleary barley and b-b is reflexive:
		say "The barley seems to be causing readings on your settler.";
		try scaning b-b instead;

check taking:
	if noun is part of the Letters Settler:
		say "You don't want to go deconstructing the Letters Settler. It was hard enough to create for [gtmn]! (And me, too. But enough about coding.)" instead;

the receptors are part of the letters settler.

instead of doing something with the receptors:
	say "They're not important. Actually, scratch that, they're too important to fiddle with and break." instead;

the output display is undesc. the output display is part of the letters settler.

the receptors are part of the settler. description is "You know little about electronics and magic theory, and you have no time to find out."

check examining output display:
	say "You look at the display, not really expecting to see anything unless you SCAN something. So you wave the settler around, hoping to pick up something.";
	try scaning the location instead;

the colorful logo is undesc. the colorful logo is part of the settler.

seen-blues is a truth state that varies.

check examining logo:
	say "Some of the letters in the logo shimmer a bit, as if they could be changed by pushing the right button. They spell out:";
	if glulx graphics is supported:
		if cheat-on is false:
			display figure graflogo-1;
			if seen-blues is true and Elmo is off-stage:
				say "[one of]It might be wise to take note of which letters changed colors and why and how[or]The logo is in its less colorful setting now[stopping].";
		else:
			display figure graflogo-2;
			if Elmo is off-stage:
				say "The different colored e's seem interesting.";
			now seen-blues is true;
	else:
		say "LETTERS SETTLER. [if cheat-on is false]Es in yellow and everything else in red[else]first Es of each word in green, the Ts in purple, the second Es in yellow. The other letters are all red[end if]. Below, you read: teach/cheat recolors. ";
		if screenread is false:
			ital-say "you may want to get an interpreter like Gargoyle and Zoom to see the 1-kb PNG of this in all its glory.";
	the rule succeeds;

instead of doing something to the logo:
	if action is procedural, continue the action;
	say "The logo's just there to say what it is. And maybe as a hint to examine.";

check scaning (this is the scan settler and act-ruin curtain parts rule):
	if noun is part of the settler:
		say "Impossible. It's part of the settler." instead;
	if noun is small holes:
		say "They register nothing. Perhaps there's some sort of key-thing that fits in them." instead;
	if noun is act-ruin curtain or noun is part of act-ruin curtain:
		say "The act-ruin curtain registers nothing. Perhaps you need to find a way to unlock the small holes in the act-ruin curtain[if staple is off-stage]. You don't have anything that makes holes, yet[else]. Hmm, you have something that could make a small hole[end if]." instead;

the stubborn switch is part of the settler. description is "It doesn't seem to budge easily--maybe that's because it gives some unusually good hints."

instead of switching on the settler:
	try switching on the stubborn switch instead.

instead of switching off the settler:
	try switching on the stubborn switch instead.

the tcb is a privately-named thing. the tcb is part of the letters settler. understand "teach button" and "cheat button" and "teach" and "cheat" and "button" as tcb when tcb is visible. printed name of tcb is "teach/cheat button"

description of tcb is "It's a tech simple enough. Looks like you can push it to toggle it as much as you want."

cheat-on is a truth state that varies.

instead of switching on the tcb:
	try pushing the tcb instead;

instead of switching off the tcb:
	try pushing the tcb instead;

check pushing the tcb:
	say "You push the teach-cheat button, and it's now [if cheat-on is true]off. Hooray for more challenge[otherwise]on. Hooray for more information[end if][one of] when you SCAN in the future--though you can push the button to go back to normal mode[or][stopping][if cheat-on is false and seen-blues is false]. The logo seems to change colors as well[end if].";
	if cheat-on is true:
		now cheat-on is false instead;
	now cheat-on is true instead;

does the player mean doing something with the equals sign: it is unlikely.

the equals sign is part of the Letters Settler. description is "The equals sign is [if squee is false]dark[otherwise]light[end if], but you can push it to change that."

squee is a truth state that varies.

equals-pushed is a truth state that varies.

check pushing the equals sign:
	say "You push the equals sign, and it [if squee is false]lights up[otherwise]darkens[end if].";
	now equals-pushed is true;
	if squee is true:
		now squee is false;
	otherwise:
		now squee is true;
	the rule succeeds;

instead of switching on the equals sign:
	try pushing the equals sign instead;

instead of switching off the equals sign:
	try pushing the equals sign instead;

set-sw is a truth state that varies.

ever-switched is a truth state that varies.

instead of pushing or pulling or attacking the stubborn switch:
	try switching on the stubborn switch;

does the player mean switching on the stubborn switch: it is very likely.

instead of switching on the stubborn switch:
	show-bluable instead;

to show-bluable:
	if stubborn switch is not visible:
		say "[reject]";
		continue the action;
	let QQ be number of bluable things;
	let QQQ be nothing;
	if QQ is 1:
		now QQQ is a random bluable thing;
	if set-sw is false:
		now set-sw is true;
		if the player's command does not include "ss":
			ital-say "in the future, you can shorten this with SS.";
			say "[line break]";
			pad-rec-q "ss";
	if QQ is 0:
		swi-say "You see nothing unusual after shaking the settler.[line break]";
		continue the action;
	say "[one of]You switch the settler, then shake it. Your vision swirls for a minute[or]Swish, shake, swirl[stopping]. ";
	if QQ is 1:
		say "Only";
	else if QQ is 2:
		say "A couple things:";
	else if QQ < 4:
		say "A few things:";
	else:
		say "Many things:";
	say " [bluable-list] [if QQ is 1 and QQQ is not plural-named]is[else]are[end if] visible. [one of]It's a bit of a headache to stare too long, so you switch the settler off. Your view quickly returns to normal[or]You turn the settler off[stopping].[line break]";
	if ever-switched is false:
		say "[line break]Wow! That's handy! The switch shows you which items identifiably change definability!";
		now ever-switched is true;
	if ever-blur was false and ever-blur is true:
		say "[line break]You'd guess the blurry stuff clues something more important.";
	if ever-blur was false and ever-blur is true:
		say "[line break]Perhaps the blurry stuff is fully optional.";
	d "[list of bluable things].";

ever-blur is a truth state that varies.
ever-vblur is a truth state that varies.

to say bluable-list:
	let QQ2 be number of bluable things;
	let inc be 0;
	repeat with bloo running through bluable things:
		increment inc;
		if inc is QQ2 and QQ2 > 1:
			say " and ";
		if bloo is an altview listed in table of altviews:
			choose row with altview of bloo in table of altviews;
			if there is an alttext entry:
				say "[alttext entry]";
			else:
				say "!!!!";
				next;
		else:
			say "[the bloo]";
		if bloo is part of the diorama:
			say " (faint)";
		else if bloo is llpish-plus:
			say " (very blurry)";
			now ever-vblur is true;
		else if bloo is blurry:
			say " (a bit blurry)";
			now ever-blur is true;
		if inc + 1 < QQ2:
			say ", ";

definition: a thing (called lp) is llpish-plus:
	if lp is llpish, yes;
	if lp is ghoul hat or lp is p-2:
		if eels are reflexed:
			decide yes;
	if lp is eels or lp is sea cube:
		if p-2 is in lalaland:
			decide yes;
	if lp is praise and rivets are reflexed, yes;
	if lp is rivets and praise is reflexed, yes;
	if lp is merle or lp is elmer, yes;
	decide no;

definition: a thing (called mbbl) is blurry:
	if mbbl is store h and roved is false, yes;
	if mbbl is auxiliary, yes;
	if mbbl is a guardian, no;
	decide no;

table of altviews
altview	alttext
darkness	"a weird outline in the darkness" [routes]
cellar door	"a cellar door (no, it can't be THERE)" [troves]
lager	"the can of Large Regal Lager (with the rubbish story on it lit up too)"
rubbish story	--
praise	"the praise floating in the air"
rivets	"the rivets spelling PRAISE"
wzup	"a pair of hands patting Leo and Rand on the back" [presto]
pre-haun	"an outline of where something is buried" [oyster]
eeks	"some cartoony representation of EEKS"
atblock	"an aura of tentativeness about [ag-first]" [towers]
agnostic	"[ag-first]"
Merle	"Elmer and Merle" [otters]
sorer bogey	"an outline of the sorer bogey" [others]
an-a	"the A you can maybe grab somehow"
perp-priv	"the words 'PERP' forming outside the Valence Enclave"
coins	"Curtis's coins"
icons	"the icons you made"

to swi-say (sst - indexed text):
	if sss is false:
		say "[sst]";
	else:
		append "[sst][line break]" to the file of debuggery;

definition: a thing (called candi) is bluable:
	[say "[candi] [if candi is ghostly]invis[end if] [if candi is uncluing]uncluing[end if] [if candi is visible] visible[end if].";]
	if candi is unscannable, no;
	if candi is reflexed, no;
	if candi is ghostly, no;
	if candi is uncluing, no;
	if candi is clue-used, no;
	if player is in Boredom Bedroom: [troves specific]
		if candi is rubbish story, decide no; [this gets hidden]
	if player is in econ cone:
		if rivets are reflexive and candi is praise, no; [otherwise we double-print]
	if candi is tunes, no; [oyster specific]
	if player is in Dourest Detours and candi is ant, yes;
	if candi is haunter and player is in anger range and candi is off-stage, decide no; [visibility issues here. We "see" the haunter but can't see it with bluables]
	if candi is crate and player is in Lapsin' Plains:
		if c2 is in Lapsin' Plains, yes;
	if candi is elmer, no; [otters specific]
	if player is in gates stage and gate-level is 2: [others specific]
		if candi is perp-priv or candi is searcher or candi is viewer, no;
	if player is in filed field and candi is barren cries, no;
	if candi is visible, yes;
	decide no;

definition: a thing (called candi) is outlinable:
	if candi is not ghostly, no;
	if candi is uncluing, no;
	if candi is visible, yes;
	decide no;

to say outline-invis: [unused]
	if number of outlinable things > 0:
		say "You can also briefly see outlines of [a list of outlinable things]. ";

the backside is part of the letters settler. understand "back" as backside.

check examining backside:
	if glulx graphics is supported:
		display figure yorpwald-1;
	else:
		say "It reads SAVE YORPWALD WITH WORDPLAY. SAVE and WITH are dark, but in the other two words, the Y's are orange.";
		if screenread is false:
			ital-say "a glulx interpreter like Gargoyle shows things clearer.";
	say "[one of]Hmm. The orange seems odd. Perhaps it's a clue, if you need one. [or][stopping]There's also a switch below the decal.";
	the rule succeeds;

the laced decal is part of the letters settler.

description of laced decal is "[bug-report]"

instead of examining decal:
	try examining backside instead.

instead of taking decal:
	say "It's really wedged on there. You'd destroy it scraping it off. And besides, maybe it's a hint, too.".

description of backside is "[bug-report]";

before scaning (this is the don't scan part of the settler rule) :
	if noun is part of the settler:
		say "The settler's pretty powerful, but it's not four-dimensional, so it can't wrap to scan itself--or parts of itself." instead;

chapter slider

the idlers' slider is a device. the slider is switched off. the slider is part of the letters settler. description is "The slider[one of], which is red (a nice touch--slider and idlers not having any letters that match up,) [or] [stopping]is currently switched [if slider is switched on]on[else]off[end if], with a number [headaches] next to it[one of]. You'd guess that is the number of charges left, or something[or][stopping]."

after examining slider:
	toggle-slider-note;

slider-toggle is a truth state that varies.

to toggle-slider-note:
	if slider-toggle is false:
		if word number 1 in the player's command is "sl":
			now slider-toggle is true;
			pad-rec-q "sl";
			continue the action;
		ital-say "You can type SL to toggle the slider in the future.";
		pad-rec-q "sl";
		now slider-toggle is true;
		continue the action;

after entering oyster-x:
	say "You hear a click from the slider[if slider is switched on] as it switches off[else] and you notice it's jammed[end if][if cur-score of oyster is 0]. Hopefully thinking will not be at a premium here[else]. But you know action counts more here[end if].";
	continue the action;

check pushing slider:
	twiddle-slider instead;

check pulling slider:
	twiddle-slider instead;

to twiddle-slider:
	if slider is switched on:
		try switching off slider;
	else:
		try switching on slider;

check switching on slider:
	if mrlp is oyster:
		say "Geez. It's jammed[if cur-score of oyster > 0]. Well, it's harder for the slider to ascertain actions instead of ideas[else]. Hm, maybe thinking is less important than other things, here[end if]." instead;
	toggle-slider-note;
	if slider is switched on:
		say "It already is." instead;
	if headaches is 0:
		say "You can't afford any more headaches." instead;
	now slider is switched on;
	say "You switch the slider on." instead;

check switching off slider:
	if slider is switched off:
		say "It already is." instead;
	now slider is switched off;
	say "You switch the slider off." instead;

sling is an action applying to nothing.

understand the command "sl" as something new.

understand "sl" as sling.

carry out sling:
	if slider is switched off:
		try switching on slider instead;
	try switching off slider;
	the rule succeeds;

chapter teariest treatise

book pedanto-notepad

the pedanto-notepad is a warpable thing on a rich chair. understand "pad/note/notebook/pedanto/notepad" and "note book" and "note pad" and "pedanto notepad" as pedanto-notepad.

report taking pedanto-notepad:
	the rule succeeds;

understand "book" as pedanto-notepad when player is not in shack.

instead of opening the pedanto-notepad:
	say "You can just type PAD to get all the subjects, or PAD (SUBJECT) for a specific one."

instead of searching the pedanto-notepad:
	say "You can just type PAD to get all the subjects, or PAD (SUBJECT) for a specific one."

after printing the name of the pedanto-notepad while taking inventory:
	if pedanto-notepad is examined:
		say "(PAD to use[if number of prefigured things > 0] or PAD FLIPS/PF for solutions you figured in advance[end if])";

instead of dropping the pedanto-notepad:
	say "One problem with owning a pedanto-notepad is that you are wracked with silly reasons to keep it, even if you have the big-picture stuff covered. Sorry about that.";

vaguing is an action applying to nothing.

does the player mean objasking about the dingy dwelling:
	if mrlp is routes:
		it is very likely;
	it is very unlikely.

understand the commands "consult pad" and "consult about" and "pad" as something new.

understand "consult pad" and "consult about" and "pad" as vaguing.

carry out vaguing:
	if location of player is dark:
		say "You can't [if player does not have pedanto-notepad]locate[else]read[end if] your notepad right now." instead;
	if player does not have pedanto-notepad:
		try taking pedanto-notepad;
	say "[cur-has]";
	the rule succeeds.

description of pedanto-notepad is "Other people have computers, but your notepad is yours[one of]. It's made by Da Ponte, who now have a monopoly. But you just like it. The color, the feel[or][stopping]. [cur-has][no line break]"

check examining pedanto-notepad for the first time:
	say "It's your workbook. It holds bookwork. The original, from the first time you saved Yorpwald, is in some museum. But this is about the same. It's small enough to fit in a pocket, and you have clipped a pen over it, too.[paragraph break]It won't actually make you pedantic--it just stores the fourth-wall stuff that non-text-adventurers aren't even aware of. Stuff that's a nuisance for text adventurers. While most of it is marginally intuitive (he said, behind the fourth wall,) having to remember it can take away from puzzle solving and such[if player does not have pedanto-notepad]. You decide to take it. It'll help tame lots that's meta, mate[end if].[paragraph break](To use the notepad, you can type PAD (subject) or CONSULT PAD ABOUT (subject). If you forget what you've written about, you can type PAD or CONSULT PAD.)";
	if player does not have pedanto-notepad:
		now player has pedanto-notepad;
	the rule succeeds;

to decide whether (qq - a truth state) is unrelevant:
	if qq is false:
		decide yes;
	let mrl be mrlp;
	if qq is true:
		if mrl is Means Manse or mrl is stores:
			decide no;
	decide yes;

to say cur-has:
	say "Currently you can consult your pad about these general topics:[line break]--";
	let A be 0;
	let fixies be 0;
	repeat through table of pad-stuff:
		if known entry is true:
			if there is a fixed-region entry and mrlp is fixed-region entry and introtoo entry is unrelevant:
				increment fixies;
			else:
				if remainder after dividing A by 4 is 0:
					say "[if A > 0].[line break]--[end if]";
				otherwise:
					say ", ";
				increment A;
				say "[if readyet entry is false][i][end if][short entry]";
				if short entry is "flips" and pf-warn is true:
					say "/pf";
				say "[r]";
	say ".[line break]Unconsulted subjects are in [i]italics[r].";
	if fixies > 0:
		now A is 0;
		say "[line break]You can also consult your pad about [if fixies is 1]a topic[else]topics[end if] specific to this region:[line break]--";
		repeat through table of pad-stuff:
			if known entry is true and there is a fixed-region entry:
				if mrlp is fixed-region entry and introtoo entry is unrelevant:
					if remainder after dividing A by 4 is 0:
						say "[if A > 0].[line break]--";
					otherwise:
						say ", ";
					increment A;
					say "[if readyet entry is false][i][end if][short entry][r]";
		if remainder after dividing A by 4 is not 0:
			say "[line break]";
	else:
		say "There are no topics specific to this region right now.";

the pen is part of the pedanto-notepad.

description of the pen is "It's clipped there so you don't misplace it."

instead of taking the pen:
	say "Bad idea. You tend to lose those things like nobody's business if they're not nailed down."

qmspoil is a truth state that varies.

to say verb-list:
	say "[2da]N, S, E and W are the basic directions.";
	say "[2da]TALK to an NPC gives general information, while ASK X ABOUT gives detailed information.";
	say "[2da]OPTIONS or OPTS or POST OPTS gives you a list of game options that can simplify play or add detail.";
	say "[2da]PAD to see a list of topics. Then PAD VERBS, for example.";
	say "[2da]VERBS shows this, OPTIONS shows options you can change, and informational meta-commands include ABOUT, CREDITS, TECH, SITES, and RELEASE.";
	if player has settler:
		say "[2da]SCAN various things to see if they can be changed and how.";
		say "[2da]Settler shortcuts: la=recall what you scanned last, sl=turns slider on, sy=scan with cheat on, sn=scan with cheat off, ss=shake settler to see what needs to change.";
	if player has whistle:
		say "[2da]PLAY the whistle.";
	verbsplain "xray";
	verbsplain "go to";
	verbsplain "rove over";
	verbsplain "retry";

to say opts-list:
	verbsplain "access";
	verbsplain "random dialogue";
	verbsplain "parse";
	verbsplain "poss";
	verbsplain "opt in/no tip"

to verbsplain (t - text):
	choose row with short of t in table of pad-stuff;
	if known entry is true:
		say "[2da][blurb entry][line break]";

[top]
table of pad-stuff
topic (topic)	known	blurb	short	verify	fixed-region	readyet	introtoo
"verbs/verb"	true	"[verb-list]"	"verbs"	false	--	false
"options" or "opts" or "post opts"	true	"[opts-list]"	"options"	false	--	false
"parse/spare"	false	"PARSE processes the settler's data for you, but SPARE hides it."	"parse"	false	--	false
"access"	true	"Typing ACCESS toggles handicapped accessibility mode, which generally helps the visually impaired with graphics clues and avoids a stream of useless punctuation. It is currently [on-off of screenread]."	"access"	false	--	false
"free turns" or "free/turns"	true	"Some actions do not take a turn. For instance, examining, looking or taking inventory, or 'out of world' actions like SCORE, will not cost you time if you are in a tight situation."	"free turns"	false
"saying"	false	"Instead of SAYing or THINKing, you can just type the word."	"saying"	false
"talking"	false	"TALKING is the equivalent of asking someone about themselves."	"talking"	false
"sleep/sleeping"	false	"SLEEP is only advisable in a protected area."	"sleep"	false
"long commands" or "long/command/commands"	false	"Commands over 4 words long aren't necessary. You can say TAKE ALL or GET ALL, eliminate THE, or use half an open compound word without repercussions."	"long commands"
"random/ dialogue/dialog/"	false	"HUSH turns random dialogue off. UHHS turns it on. It is [on-off of talk-quiet]."	"random dialogue"	false
"diorama"	false	"[dior-scan]"	"diorama"	true
"question mark" or "question/mark"	false	"[if qmspoil is true]The question mark is often better than a red or yellow in Cheat mode, because it limits you to two possibilities[else]The question mark is, well, a question mark. But maybe it's not as vague as it seems. You can HINT it if you're stuck[end if]."	"question mark"	true
"opt in" or "opt/notip/optin/tip" or "no tip"	false	"OPT IN lets you see initial region hints. NO TIP turns them off."	"opt in/no tip"	false
"poss"	false	"POSS toggles whether you can see the maximum/minimum score for a region. It is a potential meta-spoiler, but it can be helpful, too."	"poss"	false
"go to" or "go/gt/goto"	true	"You can GO TO/GOTO  or GT a location or thing if it's a bit far away but in the region."	"go to"	false
"clues"	false	"You can LISTEN, ASK people about random stuff, or EXAMINE them to figure how to change them."	"clues"	true
"Elvira" or "necro/crone" or "necro-crone" or "necrocrone"	false	"Apparently, appreciating her is what separates us from the animals. According to Gunter[if mrlp is otters]. But you need to know more and ask around about her[end if]."	"Elvira"	true
"gretta"	false	"If you can find Gretta Garett-Tatger, she may give you something to help hit at Elvira."	"Gretta"	true
"Elmo"	false	"There are areas behind stores P, U, V, W, Y and, most cryptically, T."	"Elmo"	true
"old warpy" or "old/warpy"	true	"Old Warpy is the force that allows people to move between distant areas of Yorpwald that need help. It aided you so long ago getting to the Trips Strip, and it may aid you again. You always wondered where else it led, but you knew if you found out, Yorpwald would be in trouble."	"Old Warpy"	false
"shatter/threats" or "shatter-threats" or "shatter threats"	false	"It's that new law Elvira got passed, about how you couldn't flip things to their anagrams, because there are too few anagrams--things to change to things--left for you to save Yorpwald again. Well, outside your own house. Of course, if you protested, that would look suspicious.[paragraph break]The title was based on a really convoluted acronym you can't remember."	"SHATTER-THREATS"	false
"store p" or "p"	false	"E-Viral has managed to seize the Internet communications of almost everywhere except a small pocket of resistance behind Store P. Many people expend words on it but few take action."	"store p"	true	presto	--	true
"store t" or "t"	false	"Elvira's behind there. Who knows what she's designing. It may be worth checking to note your progress, though."	"store t"	true	otters	--	true
"store u" or "u"	false	"People have lost all sense of direction there. Rev. Ali has told them they did, and they believe it. An invisible poison stripe forces them to the same mesa."	"store u"	true	routes	--	true
"store v" or "v"	false	"Mayor Irv Lea has made Spoiloplis the richest per capita city in the land. You must infiltrate the world of money and move from 'impossible' to 'I'm possible.'"	"store v"	true	troves	--	true
"store w" or "w"	false	"A very modern socialite called Liv Rea has pushed for re-zoning Castle Apcur, the Curst Palace, in order to increase property value, which would profit only her. Maybe you can restore the Curst Palace to its former glory."	"store w"	true	towers	--	true
"store y" or "y"	false	"The subsea abuses behind Store Y are fast and furious. A rabid gang has taken over the town, headed by the ruthless Ira Lev. Plenty of unsafe sea fun."	"store y"	true	oyster	--	true
"spaces/space/son/nos" or "space on" or "no space"	false	"[if screenread is false]To put spaces in letters settler readings, type SPACEON or SON. NOSPACE or NOS reverses this[else]Spaces are on by default in accessibility mode[end if]."	"spaces"	true
"parrot"	false	"He wants to come back some time. He wants revenge. As the raptor."	"parrot"	false	otters
"asking"	false	"You will want to ASK about Elvira a lot."	"asking"	false	otters
"the settler" or "settler"	false	"c/t/cheat/teach pushes teach/cheat button[line break]la = last scan (best for vision impaired since graphic should appear in top frame) [line break]ss = switch settler or shake settler to see all transformable objects[line break]You don't ever need to SCAN X WITH SETTLER, just SCAN X."	"the settler"	true
"la"	false	"Shortcut command to recall what you scanned last."	"la"	false
"sl"	false	"Shortcut command to turn slider on."	"sl"	false
"sy"	false	"Shortcut command to scan with hints, overriding the equals sign and the current setting."	"sy"	false
"sn"	false	"Shortcut command to scan without hints, overriding the equals sign and the current setting."	"sn"
"ss"	false	"Shortcut command to shake the settler and see what all in the general area needs changing[if ever-blur is true]. Blurry stuff is a bit more auxiliary[end if]."	"ss"	true
"hacking" or "hack"	false	"A reminder that cussing won't make a computer work any better, and you need to get everything set up first on your comfy labs slab, and only then should you take action with various technical programming activities."	"hacking"	true	presto
"methods"	true	"You probably want to talk to and examine everyone. Even hostile people drop clues when asked about themselves, or stuff in general. Searching and reading writing, or even trying to run past or attack enemies, can offer information, too."	"methods"	false
"red"	true	"Stuff that's all red, or an idea that makes you or someone see red, is all wrong, which is a clue in its own way."	"red"	true
"shuffling/ around" or "shuffling around"	true	"Postmortems? Most sport em. Details: I lasted. I miss my tagged gadget and how it helped me through the Forest (store F,) Sortie (store I,) and Metros (store M) in the Trips Strip. To the resort (store R.) Redness = guised guides (letters all wrong.)"	"Shuffling Around"	true
"no-gal/logan" or "no-gal logan"	false	"No-Gal Logan may have a ship that can get you out of here. It is beyond an un-road."	"No-Gal Logan"	true	routes
"tagged/gadget" or "tagged gadget"	true	"You wrote some notes about the Tagged Gadget in here, about Certify and Rectify modes. How Certify showed all the right letters, and Rectify made the first and last right[if player does not have settler]. You could do with a new thingamabob now[else]. How Secure allowed you to keep both modes and Recuse let you skip a store. Your settler is apparently handy in a different way[end if][if cavern is unvisited]. Probably a bunch of different commands to use, though[end if]."	"tagged gadget"	true
"retry" or "terry"	true	"You wrote notes about how you can RETRY thanks to Terry if you get stuck somewhere past a store."	"retry"	true
"warp"	true	"[i][bracket]FOURTH WALL NOTE: if you solved Store P, U, V, W, or Y in an earlier release, you can type the final command to bypass it. Also, the final command changed between versions for some areas, because they were (hopefully) improved, so you can use either. The game will warn you if you used an old one.[close bracket][r]"	"warp"	true
"directions/dirs"	true	"A Roiling Original uses north, south, east and west. You may be able to go in or out, too, especially when only one exit is listed."	"directions/dirs"	false	--
"casper"	false	"Casper talked to you about how this place is full of action, how there's a haunter beneath Anger Range, and it may have lost something. Casper also explained you'll need a way through the Horned Hedron."	"casper"	true	oyster
"reagents/reagent"	false	"You need three reagents to help Brother Horbert: mushrooms[if player has mushrooms] (check)[end if], U NERD ENDUR REDUN[if player has U NERD ENDUR REDUN] (check)[end if], and pipe soot[if player has pipe soot] (check)[end if]."	"reagents"	true	routes
"Leo/Rand" or "Leo and Rand"	false	"Leo and Rand may be able to help you with heavy lifting."	"Leo and Rand"	true	presto
"haunter"	false	"The haunter is beneath Anger Range, but it is only part of what is making everyone angry. It is angry about a jewel it had stolen from it."	"the haunter"	true	oyster
"die" or "die thou" or "the/ hideout/hangout"	false	"If the Horned Hedron could be undermined or infiltrated, perhaps things would get back to normal. And perhaps the haunter could be used against them. It hates them."	"DIE THOU"	true	oyster
"progress"	false	"You note the following: means manse = stuff[other-areas]."	"progress"	false
"curst/palace" or "curst palace" or "castle/apcur" or "castle apcur"	false	"You apparently can't scan the curst palace fully with the settler [']til you're all the way there. But maybe you can guess."	"curst palace"	true	towers
"xray" or "xraying"	false	"[xray-help]."	"xray"	false	towers
"hit/ win/ button/" or "ben/ hid"	false	"Ben hid a HIT WIN button somewhere. Where?"	"hit win button"	false	routes
"scenery"	false	"St. Teri told you to look for [the entry clue-index in nextclue]."	"scenery"	false	towers
"flips" or "flip" or "pf"	false	"[what-can-flip]"	"flips"	false
"rove" or "over" or "rove over"	false	"You can just [b]ROVE OVER[r] to where Curtis is. Though he is less important than Elvira."	"rove over"	false	--
"talking"	false	"[if number of terse-warned hintrelevant people > 0]You got nothing from [list of terse-warned hintrelevant people][else]Nobody nearby seems useless...YET[end if]."	"talking"	false	--
"badlands" or "bland/sad badlands" or "bland sad badlands"	false	"Ornate Atoner Renato told you that the people guarding passage would be tough. Like, six or more letters tough. But you might be able to listen to them and talk to them. He also mentioned [if Obscurest Subsector is unvisited]Dr. Yow, whom you haven't found yet, and how [end if]the flowerpot was for a friend called Ed."	"badlands"	true	towers
"guru"	false	"You can GURU something [if arugula is in lalaland]now you've eaten[else]after eating[end if] the augural arugula."	"guru"	true	others

to say xray-help:
	if xrayvision is true:
		say "You can XRAY something you can't describe to see what it can or should be, with that pastry you ate. You can wait as long as you want/need";
	else if all hintpastries are in lalaland:
		say "You've used all the possible XRAYs";
	else if toaster is in lalaland:
		say "You can't put any more pastries in the toaster to XRAY them";
	else:
		say "You can put a[if number of hintpastries in lalaland > 1]nother[end if] pastry in the toaster to get XRAY vision to be able to describe what something can or should be"

pf-warn is a truth state that varies.

to say what-can-flip:
	if pf-warn is false:
		if word number 1 in the player's command is not "pf":
			ital-say "you can abbreviate this with PF in the future.";
			now pf-warn is true;
	if number of prefigured things is 0:
		say "You have nothing [if ever-fig is true]else [end if]you figured in advance.[no line break]";
		continue the action;
	if mrlp is demo dome:
		say "This shouldn't have happened, but it did. BUG.";
		continue the action;
	say "Stuff you figured that may be handy later: ";
	repeat with pft running through not unfigured things:
		if pft is a preflip listed in table of pres:
			say "[line break][pretodo entry]";
		else if pft is a the-from listed in regana of mrlp:
			choose row with the-from of pft in regana of mrlp;
			say "[line break]Deal with [the-from entry]: [right-word entry].";
		else:
			say "[line break]You remember you need to think [pft] at some time.";

table of pres
preflip	thereg	pretodo
bench	routes	"Find a way to be fearless so you can lean AGAINST the bench." [routes]
elbow	routes	"You can go BELOW the giant's elbow once he swings it around."
narrow cracks	routes	"You can look AROUND to find the un-road."
un-road	routes	"You can go ALONG the un-road...once you find it."
hurt hog	routes	"You can go THROUGH [if bent ewe is reflexed]once[else]now[end if] you've managed to deal with the bent ewe."
bent ewe	routes	"You can go BETWEEN the hurt hog and bent ewe."
yob den	routes	"You need to go BEYOND the yob den."
Pa Egg Pea	troves	"You can GAPE at a particularly bad page you may come across in the future."
stop post	troves	"You can't focus enough to SPOT, yet."
salt	troves	"You can LAST [if ME ARTS is in lalaland or lobster is in lalaland]now[else]once[end if] you have confidence in your skills."
lobster	troves	"You can BOLSTER yourself to eat the lobster."
ME ARTS	troves	"You can MASTER the relaxation technique seen with the ME ARTS."
song	troves	"You can DECIDE to move on from the Drain Nadir."
Sister Tressi	Troves	"You can RESIST Sister Tressi."
Blamer Balmer	Troves	"You can RAMBLE to ignore Blamer Balmer."
DIVORCES	troves	"You can DISCOVER what rubbish DIVORCES magazine is."
onyx censer	presto	"The censer can become a SCREEN once you've found a place to put it."
plebe	presto	"You can shout BLEEP at the plebe [if player wears star]now[else]once[end if] you look more authoritative."
ether	presto	"You haven't yet found the right moment to shout THERE into the ether."
trolls	oyster	"You can't quite STROLL past the trolls, yet."
haunter	oyster	"You should UNEARTH the haunter once you figure how to dig it up and handle it."
a-s	oyster	"SEARCH the arches."
dialer	oyster	"With the yapper gone, you should be able to DERAIL."
d2	oyster	"You should be able to REDIAL the dialer with the proper preparation."
lance	oyster	"CLEAN the lance once you have something to wash it with."
duck	towers	"The lone duck could make SOMETHING unlocked[if Obscurest Subsector is visited]. Maybe the prison ropins[end if]."
ropins	towers	"It would be nice if something made the prison ropins UNLOCKED[if duck is prefigured], like, maybe the duck[end if]."
rodney	towers	"Rodney can be [if roddro is false]sent YONDER[else if rodyon is false]made DRONEY[else]sent YONDER or made DRONEY[end if]."
b-b	otters	"You can make the barley be BARELY there once you get past the otters."
eels	otters	"You can tell the eels ELSE [unless player has medals]once you have[else]now you've got[end if] a token of your goodness."
sea cube	otters	"You can tell the eels in the sea cube BECAUSE once you know why."
ghoul hat	otters	"You can say ALTHOUGH to Mr. Lee and his ghoul hat [if player has medals]now you've figured[else]once you figure[end if] where the bad guys are."
p-2	otters	"You can say HOWEVER to deal with Mr. Lee and Rev. Howe."
atmo-moat	otters	"You can collapse the atmo-moat to an ATOM once you have the power."
medals	otters	"The medals can help you go QUICKLY[if adjsolve < 3 or nounsolve < 3], though they may not be fully magical, yet[end if]."
pre-mang	others	"You can look AMONG once you have currency to haggle in the clearing."

to say other-areas:
	repeat through table of region-spoilers:
		if last-loc of hint-reg entry is visited:
			if hint-reg entry is not others and hint-reg entry is not Means Manse and hint-reg entry is not stores:
				say "[spoil-expl entry]";
			else:
				say "(????)";

after objasking aunt tuna about:
	pad-rec-lump "haunter";
	pad-rec "die thou"

[tope]

chapter consulting

the block consulting rule is not listed in any rulebook.

consulting is an action applying to one thing and one topic.

pad-consult is a truth state that varies.

check consulting it about:
	if location of player is dark:
		say "Not in the dark." instead;
	if noun is not pedanto-notepad:
		say "You can only really consult your notepad. ASK something animate, if you want to." instead;
	if player does not have pedanto-notepad:
		try taking pedanto-notepad;
	repeat through table of pad-stuff:
		if known entry is true and topic understood includes topic entry:
			now readyet entry is true;
			say "[blurb entry][line break]";
			now pad-consult is true;
			the rule succeeds;
		otherwise:
			do nothing;
	say "You haven't written anything about that. [cur-has]";
	the rule succeeds;

chapter padding

understand the command "consult about" as something new.
understand "consult about [text]" as padding.

understand the command "notepad/pedanto/pad" as something new.
understand "notepad [text]" and "pedanto [text]" and "pad [text]" as padding.

padding is an action applying to one topic.

carry out padding:
	try consulting pedanto-notepad about topic understood instead;

recbuffer is indexed text that varies.

to say preefsay-nol of (pfy - a thing):
	if pfy is not prefigured:
		say "[line break]";
		preef-nol pfy;
		pad-rec-q "flips";

to say preefsay of (pfy - a thing):
	if pfy is not prefigured:
		preef pfy;
		say "[line break]";
		pad-rec-q "flips";

to pad-rec-p (q - text):
	pad-rec q;
	say "[paragraph break]";

to decide whether need-line-break:
	if player is in study and gunter is in study:
		decide no;
	if player is in frontage and gretta is in frontage:
		decide no;
	if player is in Largely All-Grey Gallery and elmo is in Largely All-Grey Gallery:
		decide no;
	decide yes;

to pad-rec (q - text):
	repeat through table of pad-stuff:
		if there is no short entry:
			say "Need short entry for [q]: [bug-report]";
		else if short entry is q:
			if known entry is false:
				now known entry is true;
				if there is no verify entry or verify entry is true or number of characters in recbuffer > 0:
					say "[if need-line-break][line break][end if][i][bracket]You record the information about [recbuffer][short entry] in [mult-if]your [one of]pedanto-[or][stopping]notepad.[close bracket][r][line break]";
			now recbuffer is "";
			the rule succeeds;
	say "BUG! Tried to write [q], a notepad entry that wasn't there. This isn't a game-breaking bug, but it's bad for user-friendliness. Please let me know at [email].";
	abort-if-bugfind;

to say mult-if:
	if recbuffer matches the text "/":
		say "multiple entries in ";

to pad-rec-lump (q - text):
	repeat through table of pad-stuff:
		if there is no short entry:
			say "[bug-report] need short entry for [q].";
		else if short entry is q:
			if known entry is false:
				now known entry is true;
			now recbuffer is "[recbuffer][q]/";
			the rule succeeds;

to pad-rec-q (q - text): [pad-rec without saying, you add the info]
	repeat through table of pad-stuff:
		if there is no short entry:
			say "[bug-report] need short entry for [q].";
		else if short entry is q:
			if known entry is false:
				now known entry is true;
			now recbuffer is "";
			the rule succeeds;
	say "BUG! Tried to quiet-write [q], a notepad entry that wasn't there. This isn't a game-breaking bug, but it's bad for user-friendliness. Please let me know at [email].";
	abort-if-bugfind;

to pad-del (q - text):
	repeat through the table of pad-stuff:
		if there is no short entry:
			say "[bug-report] need short entry for [q].";
		else if short entry is q:
			if known entry is true:
				now known entry is false;
			the rule succeeds;
	say "BUG! Tried to delete [q], a notepad entry that wasn't there. This isn't a game-breaking bug, but it's bad for user-friendliness. Please let me know at [email].";
	abort-if-bugfind;

chapter pfing

pfing is an action applying to nothing.

understand the command "pf" as something new.

understand "pf" as pfing.

carry out pfing:
	now pf-warn is true;
	if player does not have pedanto-notepad:
		say "You need your notepad to use the PF shortcut.";
	else:
		choose row with short of "flips" in table of pad-stuff;
		if known entry is false:
			say "You consult your notepad but haven't figured any flips in advance yet." instead;
		try consulting pedanto-notepad about "flips";
	the rule succeeds;

volume stores

after choosing notable locale objects when player is in strip of profits:
	if store h is in strip of profits:
		set the locale priority of store h to 0;
	if hoster is in strip of profits:
		set the locale priority of hoster to 0;
	if otters-x are in strip of profits:
		set the locale priority of otters-x to 10;
	if tokers are in strip of profits:
		set the locale priority of tokers to 1;
	if tokers are in strip of profits and nestor is in strip of profits:
		set the locale priority of nestor to 0;
	continue the action;

book definitions

to decide whether (myp - a thing) is nonpost: [nonpost is short for "a portal, but not to store h"]
	if myp is not a portal, decide no;
	if myp is hoster, decide no;
	if myp is in strip of profits, decide yes;
	decide no;

definition: a sto is game-critical:
	if it is not in Strip of Profits, no;
	if it is not flippable, no;
	if it is bedruggled, no;
	if it is Store H, no;
	if it is Store B, no;
	yes;

definition: a sto is supporting: [ie need to win before entering store T. K/N don't count]
	if it is Store T, no;
	if it is Store H, no;
	if it is Store B, no;
	if it is bedruggled, no;
	if it is game-critical, yes;
	no;

book what is a sto

does the player mean scaning a sto:
	it is very likely;

a sto is a kind of thing. a sto is usually undescribed. a sto is usually fixed in place. description of a sto is "This is some posh shop or other. But it has been integrated into the whole strip. It can't lead anywhere interesting. It's greyed out, like an area in a video game you can't get to."

a sto is usually proper-named.

a sto can be bedruggled. a sto is usually not bedruggled. [K and N are bedruggled]

specification of sto is "Something that may or may not change into a portal."

cur-hint-sto is a sto that varies. cur-hint-sto is usually Store U.

the plural of sto is stos.

does the player mean entering a sto: it is likely.

instead of entering a sto:
	if noun is store b:
		say "You [if store b is reflexive]need to say what you want a free sample of[else]already got your free sample[end if]." instead;
	if noun is store c:
		say "You'd have to show ID. Then they'd know who you were. Then Elvira would have you arrested. Plus, ew." instead;
	if noun is store h:
		say "[if roved is true]You need to figure how to convert Store H into something different[else]Store H looks so wild and confusing, you're disoriented when approaching it. Maybe take care of Elvira first[end if]." instead;
	if noun is store k or noun is store n:
		say "That looks distinctly too seedy. It actually does need to be demolished, somehow." instead;
	if noun is store r:
		say "You can't go back to your resort. Not until Elvira's dispatched." instead;
	if noun is useless:
		say "There's nothing you'd want in that store, even if you were shopping." instead;
	if noun is flippable:
		say "Probably not in its present state." instead;
	say "You're not here to shop. You're here to save Yorpwald[if noun is nonreflexive]. Not shop in some random store[one of]. You changed a few other stores to get where you needed before--maybe do that again[or]. Like this one[stopping][else], and you remember how changing stores helped you get places before[end if]."

check taking a sto:
	say "You can't take that, [if noun is flippable]but you can maybe change it and enter it[else]and you can't do much else, either." instead;

book Strip of Profits

Strip of Profits is a room in Stores. "[if roved is true]Well, those stores you took care of are gone, and so is the megaton magneto-montage. [h-or-others][else]Most of the twenty-six stores from your first time here remain, though you're not here to shop[which-stores].[paragraph break]A megaton magneto-montage[i-u] stands here[end if][if hubs bush is in strip]. The hubs bush that sprang up when you tried to escape still blocks your way out.."

understand "trips/profit" as strip of profits when debug-state is true.

to say which-stores:
	if number of visible flippable stos is 0:
		say ", but there aren't any more you can switch up";
		the rule succeeds;
	if number of visible flippable stos is 1:
		say ". Only [random visible flippable sto] is still worth investigating";
		the rule succeeds;
	let BBQ be a list of things;
	now BBQ is list of flippable not bedruggled stos in Strip of Profits;
	remove Store B from BBQ, if present;
	remove Store H from BBQ, if present;
	let nlt be number of entries in BBQ;
	if nlt is 0:
		continue the action;
	sort BBQ;
	let A be indexed text;
	now A is "[BBQ]";
	now A is "[A in title case]";
	replace the text "store " in A with "", case insensitively;
	replace the text "And" in A with "and";
	say ". Store[if nlt > 1]s[end if] [A] seem[if nlt is 1]s[end if] in decent shape[if hoster is visible], but that hoster you made looks too scary for now[end if].[no line break][tokies] Looks like near the end of the alphabet's where it's at";

to decide whether you-can-advance:
	let QQ be number of solved regions;
	increase QQ by number of bypassed regions;
	if QQ < 5:
		decide no;
	decide yes.

to say tokies:
	if number of visible bedruggled stos is 0:
		say "[no line break]";
		continue the action;
	say " Also, [list of visible bedruggled stos] seem[if number of visible bedruggled stos is 1]s[end if] nearly condemned.[no line break]";

check going inside in Strip of Profits (this is the which portal rule) : [we choose the "easiest" by default]
	if number of maingame portals in strip is 1:
		if hoster is in strip:
			say "You figure the hoster can be put off [']til later.";
		try entering a random visible maingame portal instead;
	if hoster is in strip and roved is true:
		say "Yup. Only the hoster's left.";
		try entering hoster instead;
	if number of maingame portals in strip > 1:
		say "You have more than one area you can enter[if hoster is in strip], not counting the hoster, which you'll deal with later[end if].";
		let RP be nothing;
		let curdif be 99;
		repeat with EP running through portals in strip:
			if diffic of EP < curdif:
				now RP is EP;
				now curdif is diffic of EP;
		say "[line break]The[if RP is e-s], er, spot[else if RP is oyster-x] oyster[else] [RP][end if] look[if RP is not plural-named]s[end if] le[if number of portals in strip is 2]ss[else]ast[end if] intimidating[if RP is mangiest steaming], though maybe not even worth it[end if]--try [if RP is plural-named]them[else]it[end if]?";
		if the player direct-consents:
			try entering RP instead;
		say "Okay. [if RP is plural-named]They're[else]It's[end if] not going anywhere[unless patcher is off-stage], unless you fry it with the patcher[end if]." instead;
	if mangiest steaming is in strip:
		try entering mangiest steaming instead;
	say "There's nothing you can enter--the plain old stores don't count. You don't have time to shop." instead;

last-loc of Stores is Strip of Profits.

to say i-u:
	if magneto montage is unexamined:
		say ", which looks like a directory of some sort,"

section hubs bush

the hubs bush is bounding scenery. "The hubs bush encircles the entire Strip of Profits, and it's too thorny and thick to get through. You're stuck here, unless you warp through a[if same mesa is visited or loather rathole is visited or loftier trefoil is visited or posh hops shop is visited or grey gyre is visited or bleary barley is visited]nother[end if] store."

instead of doing something with hubs bush:
	if action is procedural, continue the action;
	say "The hubs bush is there now, forcing you back to the stores to focus on whatever it is you need to do."

check going nowhere in strip of profits:
	if hubs bush is in strip of profits, say "The hubs bush forces you back to the center of the strip and the stores." instead;
	move hubs bush to strip of profits;
	say "As you try to flee the Strip of Profits, up pops a bush--a hubs bush! It's too thick to walk through. You move to the side, but the bush expands. Defeated, you turn back to the center--and when you look around, you notice the hubs bush encircles the whole Strip of Profits." instead;

section describing the Strip

to say h-or-others:
	say "[if store h is in strip]But Store H remains[else]That hoster remains where Store H was[end if]"

after printing the locale description for Strip of Profits when Strip of Profits is unvisited:
	if roved is false:
		say "You remember something from your first trip to Yorpwald--how Terry would help you RETRY if you got stuck in any stores. So you write that in your pedanto-notepad. Also, as a fourth-wall note, if you have solved any area, simply type the command you used to win it.";
		pad-rec-lump "retry";
		pad-rec "warp";

chapter all the stores

disamb-store is privately-named useless scenery in Strip of Profits. printed name of disamb-store is "the entire store bank". understand "store" and "entire/ store bank/" and "stores" as disamb-store.

description of disamb-store is "[sto-desc].".

to say sto-desc:
	say "Some stick out more than others. Some have too many shoppers around. Some seem more solitary and ready to explore[one of]. You notice stores F, I, M and R are missing--of course they are, since you got past them to the forest, sortie, metros and resort last time here[or][stopping]. You can examine one in particular with, say, X STORE Q"

check taking disamb-store:
	say "You can't take one store, much less all." instead;

instead of entering disamb-store:
	say "Hmm, you can't enter all the stores at once. You'll need to pick a store--you can also refer to it by its abbreviation, e.g. Q for Store Q.";

does the player mean examining disamb-store:it is likely.
does the player mean entering disamb-store: it is likely.

chapter store a

Store A is a sto in Strip of Profits. it is privately-named and useless.

chapter store b

Store B is a LLPish reflexive sto in Strip of Profits. understand "store/ 2/two" as Store B when player is in Strip of Profits.

a-text of store b is "RYRRYR". b-text of store b is "PYRRGR". parse-text of store b is "s[sp]o[sp]x[sp]x[sp]e[sp]x". store b is cheat-spoilable.

description of Store B is "It's not as greyed out as most of the other stores. It reads BERTO'S (crossed out) then OBERT'S BEST, OR... It also claims to be better than Dupree Pureed[if store b is reflexive]. It's probably some sort of food store, and it feels a bit cold nearby[end if][one of]. You think you see who built this--you could examine it again. Red text[or]. The builder's name is REST, BO, in red text[stopping]."

chapter store c

Store C is a useless sto in Strip of Profits. understand "store/ 3/three" as Store C when player is in Strip of Profits.

description of Store C is "[one of]To porn! Pronto! [or][stopping][randbla]".

check examining Store C for the first time:
	say "You look in, noticing a corset ideal for the escort sector--and that the doorbell if you're (lol) bored is in the basement--but She Bop Phobes cry 'Skeezer! Eekzers! Sicko! So ick!'[paragraph break]";
	ital-say "store C is no gamier mirage but a pro-sin prison--enough smut you must need Tums--so this fun fort may be a turnoff to examine again[if censor-minor is true], especially since you have profanity disabled[end if]. So, pardon da porn (hetero or the other) or call pornog no-prog. I'm not judging. I just discovered them all by intellectual curiosity and guesswork, so stop saying that. Go on. Harp. Pry.";
	the rule fails;

chapter store d

Store D is a useless sto in Strip of Profits. understand "store/ 4/four" as Store D when player is in Strip of Profits.

chapter store e

Store E is a useless sto in Strip of Profits. understand "store/ 5/five" as Store E when player is in Strip of Profits.

description of Store E is "It's bolted up but seems to be advertising a stereo sale."

chapter store f, i mean, forest

the forest is useless scenery in Strip of Profits. understand "store f" and "store/f" as forest when player is in strip of profits. "It's not really Store F any more. It's been preserved--a foster forest. But new stores have sprouted up around it since last game. Or, more accurately, at the other end of the alphabet."

instead of entering forest:
	say "[t-trap]."

to say t-trap:
	say "You don't know if you'd be welcome at that tourist trap, and there's nothing more to do there"

chapter store g

Store G is a useless sto in Strip of Profits. understand "store/ 7/seven" as Store G when player is in Strip of Profits.

chapter store h

Store H is a sto in Strip of Profits. understand "store/ 8/eight" as Store H when player is in Strip of Profits. [description of Store H is "Spray painted on this locked store is: others are in the throes of being reshot."]

description of Store H is "Store H appears broken-down. It sprawls a bit but is not particularly tall. A warning in bright red says:[paragraph break]'All who enter here risk exclusion. Closed for having a truly frightening HOSTER. Trespassers will be, er, shot. - E. S. Roth'"

a-text of store h is "YRRYRR". b-text of store h is "YPRYRR". parse-text of store h is "-[sp]t[sp]x[sp]-[sp]x[sp]x".

check scaning store h:
	if otters is not solved:
		say "The settler gives a weird noise, as if it doesn't want to scan this store--yet." instead;

after fliptoing hoster:
	it-him-her hoster;
	continue the action;

to it-him-her (x - a thing):
	set the pronoun it to x;
	set the pronoun her to x;
	set the pronoun him to x;

the hoster is a not lumpable not maingame portal. "That stupid hoster is here where Store H was. [if roved is true]Since[else]If[end if] you have nothing better to do than save Yorpwald, it's worth a shot.". description is "It's a truly terrifying open, smiling mouth, being far too welcoming. It might be worse if it had a cavity, but it's pretty bad. You're not sure you want to know where it leads.". diffic of hoster is 9.

understand "mouth" as hoster.

does the player mean entering a sto:
	it is very unlikely.

does the player mean doing something with Store Z:
	it is unlikely.

check entering hoster:
	if rustic citrus is visited:
		continue the action;
	if roved is false:
		say "You think about entering, but you remember Elmo saying it wasn't critical to save Yorpwald." instead;

chapter store i

the sortie is useless scenery in Strip of Profits. understand "store i" and "store/i" as sortie when player is in strip of profits. "The sortie leads to the erstwhile Lord Ablemiser's territory, which you were able to neutralize your first time through. You think he still likes you--but you've no time to verify that. You'll want to fix the other stores."

instead of entering sortie:
	say "[t-trap]."

chapter store j

Store J is a useless sto in Strip of Profits. understand "store/ 10/ten" as Store J when player is in Strip of Profits.

chapter store k

Store K is a bedruggled LLPish sto in Strip of Profits. understand "store/ 11/eleven" as Store K when player is in Strip of Profits.

a-text of Store K is "RYRYRR". b-text of Store K is "RYRYRR". parse-text of store k is "x[sp]-[sp]x[sp]-[sp]x[sp]x".

description of Store K is "[one of]A peculiar smell of smoke and incense seeps from Store K, but that's probably not the BIG reason this place went downhill. 'Hey! stop violating our privacy, Dude, or we will maybe, like, insult you next time![or]'Dude! We're trying to REST, OK?' someone looks briefly at you through bloodshot eyes.[or]Someone with bloodshot red eyes begins blasting the truly awful music of K. T. Rose.[or]You wonder how they can rest okay while listening to the music of K. T. Rose.[stopping]"

section mangiest steaming

the mangiest steaming is a not maingame not lumpable portal. diffic of mangiest steaming is 1. "The tokers['] mangiest steaming hovers--[if lectures is visited]but you don't want to go back[else]maybe there's a small 'adventure' inside[end if]."

description of mangiest steaming is "It hangs all around the tokers, a product of their, umm, activity[if lectures is visited]. You don't really want to go back[otherwise]. But it probably won't kill too many brain cells to ENTER it. You might even expand your consciousness[end if]."

go-region of mangiest steaming is stores.

check entering mangiest steaming:
	if nestor is off-stage:
		say "'Dude, we, like, can't share these righteous fumes unless you help us. Maybe find our friend or something.'" instead;
	if lecturer is reflexive:
		say "The tokers begin singing 'Oh sigh, so high,' then 'TO PHONY TYPHOON!' and you're all 'Rest. OK?' You step into the mangiest steaming and find yourself on a way high highway. (Proof that stuff's an entry drug.) You wind up saving lands similar to Yorpwald which speak Spanish, French, German and Italian.[paragraph break]Well, in a dream, anyway. Then you wake up. A policeman towers over, asking if you're on drugs: 'Don't cop a lie, man. No jukein['] on, junkie.'[paragraph break]After a stern lecture about how using drugs makes you miss obvious details (other than, well, a WANTED poster of you that you see) and you druggies think you're special but there's nothing magical about drugs, the no-[crap] narc-op pushes you to an anti-drug seminar.";
		min-up;
		now player is in lectures instead;
	say "Oh, no. Not that again. Country'll have a new alphabet the next time. And a worse lecture." instead;

check smelling when mangiest steaming is visible:
	say "Err. I can't tell you exactly how the smoke smells. I wouldn't know." instead;

section tokers

the tokers are plural-named people. "Some tokers are here[if Store N is visible], moaning about their friend they lost nearby[otherwise], doing their tokin['] thing[if-nest][end if]."

description of tokers is "Long-haired, lazy, babbling bums, unwilling to do anything nearing earning. Their taste in clothes is worse than their taste in music. they seem to be fervently arguing whether it is best to say dude, like, or man too much."

rule for printing a locale paragraph about tokers:
	now nestor is mentioned;
	continue the action;

to say if-nest:
	if nestor is visible:
		say ", your friend Nestor participating fervently"

chapter store l

Store L is a useless sto in Strip of Profits. understand "store/ 12/twelve" as Store L when player is in Strip of Profits.

description of Store L is "You take a peek inside but feel loster and loster as you do."

chapter store m

the metros are useless plural-named scenery in strip of profits. understand "store m" and "store/m" as metros when player is in strip of profits.

description of metros is "It's probably a quick path to Mt. Rose, which does not need your help. In fact, with public opinion as it is right now, if you showed up there, you might get beaten up for implying there was something wrong with Mt. Rose."

instead of entering metros:
	say "[t-trap]."

chapter store n

Store N is a bedruggled LLPish sto in Strip of Profits. understand "store/ 14/fourteen" as Store N when player is in Strip of Profits.

description of Store N is "Someone appears to be in there."

a-text of Store N is "RYRRYR". b-text of Store N is "RYRRYR". parse-text of store n is "x[sp]-[sp]x[sp]x[sp]-[sp]x".

section nestor

Nestor is a person. description of nestor is "[if tokers are visible or mangiest steaming is visible]Nestor is somewhere among the tokers, you'd guess[otherwise]Nestor pines for his most bummedly lost friends[end if].". initial appearance of Nestor is "Nestor mopes around, hoping his friends drop by."

rule for printing a locale paragraph about nestor:
	if mangiest steaming is visible or tokers are visible:
		do nothing instead;
	continue the action;

to say move-toners:
	now toners are in strip of profits.

check taking toners:
	say "They aren't yours. And you don't need to look good while adventuring." instead;

the bottles of toners are a plural-named cluey thing. understand "lotions" as toners. description is "They are trial-sized red bottles of toners for skin care[one of]. Thankfully, they weren't made of Sterno, which wouldn't have helped you at all and makes you see red just imagining[or]. They're so rent you can't see a brand name[or]There's lots--er, tons--to look at if you see it right[stopping]. The bottles are disgracefully red."

chapter store o

Store O is a useless sto in Strip of Profits. understand "store/ 15/fifteen" as Store O when player is in Strip of Profits.

chapter store p

Store P is a sto in Strip of Profits. understand "store/ 16/sixteen" as Store P when player is in Strip of Profits.

description of Store P is "There's a big poster in the window of this average-sized store."

a-text of Store P is "RRYRRY". b-text of Store P is "RRYRRY". parse-text of store p is "x[sp]x[sp]-[sp]x[sp]x[sp]-".

the e-s is a proper-named portal. diffic of e-s is 5. the go-region of e-s is Presto. the printed name of e-s is "an, er, spot". description is "It's hecka swirly. You're sure it goes somewhere the speech is louder and so forth.". initial appearance of e-s is "The, er, spot created when you said PRESTO swirls here."

understand "er/spot" and "er spot" as e-s.

the tropes poster is part of Store P. the tropes poster is auxiliary.

description of tropes poster is "It features many important, if mis-stated, memes, including how certain nonsense words reliably move the plot forward or make something out of nothing. When you think on them, they are so pert, you see red."

a-text of tropes poster is "RRYRRY". b-text of tropes poster is "??YRRY". parse-text of tropes poster is "x[sp]?[sp]e[sp]x[sp]x[sp]o".

chapter store q

Store Q is a useless sto in Strip of Profits. understand "store/ 17/seventeen" as store Q when player is in Strip of Profits.

description of store Q is "This is a posh shop like many others in the Strip of Profits. It doesn't look likely to hide any sort of portal, even shared with Store U."

chapter store r

Store R is a useless sto in Strip of Profits. understand "store/ 18/eighteen" as Store R when player is in Strip of Profits.

description of Store R is "It could lead back to the (not really) resort from your first time, to your Means Manse. But that would be backtracking, and you would not be welcome or safe there."

chapter store s

Store S is a useless sto in Strip of Profits. understand "store/ 19/nineteen" as Store S when player is in Strip of Profits.

description of Store S is "As you get near, you hear GO AWAY YOU TOSSER. The accent doesn't sound British, so you suspect this person just needed to use a new swear and kind of forced things a bit."

chapter store t

Store T is a sto in Strip of Profits. understand "store/ 20/twenty" as Store T when player is in Strip of Profits.

a-text of Store T is "YRRYRR". b-text of Store T is "YPRYRR". parse-text of store t is "-[sp]t[sp]x[sp]-[sp]x[sp]x".

description of Store T is "Store T is average-sized, but it seems to repel you. Its window is really lovely stained-glass--it's a depiction of a family of sea animals. There's an engraving below it."

otters-x are a privately-named plural-named not lumpable portal. printed name of otters-x is "the twin otters". understand "twin otters" as otters-x. diffic of otters-x is 8.

description of otters-x is "You see a field of barley beyond them. There's also something below their names, and it reads:"

after examining otters-x:
	try examining engravings;
	now f-o-b is in strip of profits;

rule for printing a locale paragraph about otters-x:
	say "Statues of twin otters wait here, facing each other--it's all blurry behind them.";
	now otters-x is mentioned;

understand "twins/otters/statues/statue" as otters-x.

f-o-b is privately-named scenery. printed name of f-o-b is "the field of barley".

description of f-o-b is "You look behind the otters at the field of barley. [if b-b is reflexed]There's not much left.[else]It's everywhere, up to your waist, with no end in sight.[end if]"

understand "field/ of/ barley" as f-o-b when player is in strip of profits and f-o-b is in strip of profits.

check entering otters-x:
	if number of needed regions > 0:
		d "[list of needed regions].";
		say "As you step between them, you feel mess-up spumes from the otters--maybe a passive sap-vise. Then a voice. 'To rest! To rest!' You just can't move forward, and you move back before you feel rot set. You just aren't strong enough yet. Maybe you need to build yourself up by fixing things elsewhere[if patcher is in strip of profits], or you can cheat with that patcher. I won't judge. The fate of a world is at stake[end if]." instead;

chapter store u

Store U is a sto in Strip of Profits. understand "store/ 21/twentyone" as Store U when player is in Strip of Profits.

a-text of Store U is "RYYRYR". b-text of Store U is "RYYRGR". parse-text of store u is "x[sp]-[sp]-[sp]x[sp]e[sp]x".

description of Store U is "Though Store U is the smallest of the stores that stand out, along with Store V[if store v is not visible] before you changed it[end if], you see a dizzying array of branching possibilities inside. Well, roads, except each seems to have a number or label. The roads are red and almost seem to form letters if you look at them right."

section roads

the roads are part of store u. description is "When you stare just right, the red roads reform to 'Sure to set our...'"

instead of doing something with roads:
	if action is procedural, continue the action;
	say "The roads are inside the store. You can really only examine them." instead;

a-text of roads is "RYYRYR". b-text of roads is "RYYRYR". parse-text of roads is "x[sp]-[sp]-[sp]x[sp]-[sp]x".

the routes-x are a privately-named plural-named portal. diffic of routes-x is 3. understand "routes" as routes-x. the printed name of routes-x is "routes extending many confusing directions". initial appearance of routes-x is "odd winding routes".

description of routes-x is "They appear to branch out in all directions."

chapter store v

Store V is a sto in Strip of Profits. understand "store/ 22/twentytwo" as Store V when player is in Strip of Profits.

description of Store V is "Store V would be the smallest of the stores that stand out, but for Store U[if store u is not visible] before you changed it[end if]. Strange garnets lie inside. You also see a hologram of voters."

voters are part of Store V. understand "hologram" as voters. description of voters is "The voters in the hologram seem to be complaining 'Elections? Selection. Have to vote. Ha. Pols? Slop.'[paragraph break]An impressive display of defeatist thinking."

a-text of voters is "RRYRYR". b-text of voters is "RRYRYP". parse-text of voters is "x[sp]x[sp]-[sp]x[sp]-[sp]s".

a-text of Store V is "RRYRYR". b-text of Store V is "RRGRGR". parse-text of store v is "x[sp]x[sp]o[sp]x[sp]e[sp]x".

troves-x are a privately-named plural-named portal. diffic of troves-x is 2. understand "troves/jewels" as troves-x. printed name of troves-x is "troves of glittering jewels". go-region of troves-x is troves. initial appearance of troves-x is "[if Loather Rathole is visited]empty troves[else]troves of too-good-to-be-true jewels[end if] glisten here.". understand "trove" as troves-x. description of troves-x is "[if Loather Rathole is unvisited]Shiny. Tempting. You have enough room for a few jewels your super purse[else]You could probably go through the ordeal of them vanishing to get back to Spoiloplis[end if]."

chapter store w

Store W is a sto in Strip of Profits. understand "store/ 23/twentythree" as Store W when player is in Strip of Profits.

a-text of Store W is "RYRYRR". b-text of Store W is "RYRYRR". parse-text of store w is "x[sp]-[sp]x[sp]-[sp]x[sp]x".

description of Store W is "It's the biggest structure in the strip. You see replicas of two tall, narrow buildings. You can also read a reddish inscription."

the reddish inscription is part of store w. the reddish inscription is cluey. description of reddish inscription is "WESTOR is the name of the company that built this. They used the SET-ROW method."

the towers-x are a plural-named portal. diffic of towers-x is 7. the go-region of towers-x is Towers. understand "two/twin towers" and "ivy/ivory tower" and "towers" as towers-x. the printed name of towers-x is "very tall twin towers". "Two towers, ivy or ivory, are here.". description of towers-x is "Ivy or ivory. You can't tell which is tower, er, two. Both are huge and intricate, and even one would be intimidating to enter."

the tower-base is privately-named. it is part of the towers-x. understand "base" as tower-base. the printed name of tower-base is "tower base". description is "There seems to be no reason you can't enter it if you wanted."

instead of entering tower-base:
	try entering towers-x;

the ivory tower is scenery. "You're sure it's even further from the real world of Yorpwald than Yorpwald is from, well, the real world."

the ivy tower is scenery. "You could view Troy from the top, if it existed. The ivy offers lousy privacy."

check entering ivy tower:
	say "You try to enter the ivy tower, but they keep shifting around, and you find yourself walking between them.";
	try entering towers-x instead;

check entering ivory tower:
	say "You try to enter the ivory tower, but they keep shifting around, and you find yourself walking between them.";
	try entering towers-x instead;

chapter store x

Store X is a useless sto in Strip of Profits. understand "store/ 24/twentyfour" as Store X when player is in Strip of Profits.

chapter store y

Store Y is a sto in Strip of Profits. understand "store/ 25/twentyfive" as Store Y when player is in Strip of Profits.

a-text of Store Y is "YORRYR". b-text of Store Y is "YORRGR". parse-text of store y is "o[sp]y[sp]x[sp]x[sp]e[sp]x". store y is cheat-spoilable.

description of Store Y is "The store seems filled with water. It's wide but not tall. You think you see shells. The window of store y has TOYERS in red with a line through."

the shells are part of store y. the shells are uncluing and undesc.

instead of doing something with the shells:
	say "Messing with the shells won't help you get in Store Y, but maybe they're a clue." instead;

the oyster-x is a privately-named portal. diffic of oyster-x is 6. the printed name of oyster-x is "a huge oyster". understand "oyster" as oyster-x. the go-region of oyster-x is Oyster. "The oyster that was Store Y is open. You could definitely fit in.". description of oyster-x is "It's not particularly tall, but its width suggests there's a lot to do there."

instead of eating oyster-x:
	say "In Soviet Yorpwald, oyster eat you. Plus, it's all shell, no slime."

chapter store z

Store Z is a useless sto in Strip of Profits. understand "store/ 26/twentysix" as Store Z when player is in Strip of Profits.

chapter megaton magneto montage

the megaton magneto montage is useless scenery in Strip of Profits. printed name of montage is "megaton magneto-montage"

understand "mmm/mm" as megaton magneto montage when player is in Strip of Profits.

instead of doing something with the megaton magneto montage:
	if current action is scaning:
		say "Your settler registers nothing. It looks too dense to change. Besides, it's got information on the stores, and you wouldn't want to lose that." instead;
	if action is procedural, continue the action;
	say "The magneto-montage's not good for much besides looking at. But it's a useful guide.";

description of megaton magneto montage is "It's a sort of directory of all the stores[one of]. You read it through, but you can gloss through it for interesting bits (or even call it LM,) later[or]. You gloss through for what interests you[stopping].[paragraph break][b]CLOSED ON YORPDAY (that's today)[r]: A, D, E, G, J, L, O, Q, S, X, Z[if store b is reflexive][line break][b]FREE SAMPLES: B[r][end if][if store c is not examined][line break][b]NO PRUDES, USED !!!!: C[r][end if][line break][b]DON'T BOTHER UNLESS YOU'VE NOTHING, I MEAN NOTHING, TO DO[r]: H[one of][line break][b]OF HISTORICAL SIGNIFICANCE[r]: F/Forest, I/Sortie, M/Metros, R/Resort[or][stopping][if store k is in strip or store k is in strip][line break][b]CONDEMNED[r]: K, N[line break][end if][b]NOT ELVIRA-APPROVED. ENTER AT OWN RISK[r]: P, U, V, W, Y[if store t is in profits][line break][b]ELVIRA SAYS KEEP EXTRA DOUBLE OUT[r]: T[paragraph break][engrav-note]."

to say engrav-note:
	say "[if engravings are examined]Those engravings are at the bottom, too[else]You note engravings craftily hidden below all this[end if]"

check examining magneto montage when roved is true:
	say "It's not really relevant now that there's just [if store h is visible]Store H[else]the hoster." instead;

change-warn is a truth state that varies.

after examining magneto montage when change-warn is false:
	if number of solved regions + number of bypassed regions > 1:
		say "It's kind of out of date since you got to work, but it'll be good enough reference in the future.";
		now change-warn is true;

section engravings

the engravings are part of magneto montage. the engravings are plural-named. understand "engraving" and "names" as engravings when engravings are visible.

description of engravings is "[emph of e-s]Man, [r][b]SOMEONE[r] [emph of towers-x]evil[r] [emph of troves-x]will[r] [emph of oyster-x]pay[r] [emph of routes-x]up[r], [emph of otters-x]hard[r][if note-progress is true].[paragraph break][i]NOUNED: UNDONE.[r][paragraph break]The letter emphases seem to have changed since you last read it[npoff][end if]."

to say npoff:
	now note-progress is false;

to say emph of (r - a portal):
	say "[r]";
	if go-region of r is solved or go-region of r is bypassed or go-region of r is shortcircuited:
		say "[b]";
	if r is visible:
		say "[i]";

eng-scan is a truth state that varies.

check scaning engravings:
	say "None of the words on the engravings scan to anything.";
	now eng-scan is true instead;

after examining engravings when eng-scan is false:
	say "You scan the engravings, just in case, but none of the words turn up anything special. There's probably a different hint at stake, here. Also, it's odd an anti-Elvira message would be around. Maybe it's Gretta's clue Elmo mentioned, and maybe it'll make more sense after you've made your way a bit more.";
	now eng-scan is true;
	continue the action;

chapter windows

the windows are useless plural-named scenery in Strip of Profits. the windows are undesc. understand "window" as windows.

instead of doing something with windows:
	if current action is attacking:
		say "Unfortunately, if you enter a store that way, while it's still a store, there'd be nothing worth exploring.[paragraph break]Plus Elvira'd have a field day if and when you get caught." instead;
	unless action is procedural:
		say "Unfortunately, with all those windows, it's hard to be specific. But you should be able to refer to the store with the windows you want to look in." instead;
	say "Unfortunately, you can't do much with the windows. Since stores sort of have to have them, that gets ambiguous. It's probably simpler to refer to the store you want to inspect.";

book Cruelest Lectures

Cruelest Lectures is an innie room in Stores. "You're standing in the back of an uncomfortable auditorium. There's some teasing seating, but you're not sure it'd improve the experience[one of]. People stare at a lecturer as if they've been drugged. Um, hypnotized[or][stopping]. Nearby, a passage leads to[if e-revealed is false] somewhere called[end if] Studio E."

check looking in lectures for the first time:
	say "As you march through the smoke, you hear 'Freeze! Anti-drug drag unit!' You turn around to see a tall bulky man wearing a T-shirt saying 'IAN. A DRUG GUARDIAN. QUADS SQUAD.'[paragraph break]'So! you're one of those people who have been poking around stores K and N. But these are no-drugs grounds. We finger fringe like you. [if mangiest steaming is examined]Second hand funny-smoke. No rationalizations about how you cheat drug lords that way. It's an entry drug and that's facts. [end if]Let's go.'[paragraph break]He frog-marches you to an auditorium. It's quite a crowd, and you're a bit late, so you can't even sit.";

check exiting in Cruelest Lectures:
	say "[one of]You make a half-hearted (well, 42.86%-hearted) effort to leave, but without a planned destination (jeesh! The self-help speak's already hitting you) you'll just wind up coming back around here. Even though it's so [i]tedious[r][or]You managed to leave for a bathroom break, and you were sort of curious what was in Studio E. You tried the door. It was locked[or]You might wander around inside, but you would come back. That's how you got stuck inside your cubicle at the company so long. Tedious but safe. Oops[or]They...they can't zap your severance check for ditching this tedious lecture? Probably not. But the ushers would guilt trip you into sitting back down[or]The lecturer isn't as tedious as coworker chitchat, but you never pulled yourself away from THAT, either[or]Tedious, tedious, tedious[or]Your eyes wander to the top of the screen. Um, the screen behind the lecturer, that sort of blends in with the room[stopping]." instead;

section seats

tried-seating is a truth state that varies.

to say seat-try:
	now tried-seating is true;

the teasing seating is useless scenery in lectures. "Some of it is open, but you figure it's reserved, or someone will peg you back. "

instead of doing something to the teasing seating:
	if current action is scaning, say "You consider scanning them, but it'd freak out the audience. Or Ian. Or the lecturer." instead;
	if current action is entering or current action is climbing, say "[seat-try]'If you'd gotten here earlier, you might've gotten one,' growls Ian, as you move towards empty seating. You're not sure that'd make sense even if you actually [i]were[r] stoned. The seating is apparently reserved for others. Or maybe nobody's allowed to sit in it, to show how drugs make you miss out on life." instead;
	if action is procedural, continue the action;
	try examining teasing seating instead;

section passage

the passage is scenery in lectures. "[if e-revealed is true]You don't want to go back. You already got the YYRRGRG clue for Studio E[else]The passage that leads to Studio E seems unguarded. Maybe you could sneak in there[end if]."

instead of scaning passage:
	if e-revealed is true:
		say "You already got YYRRGRG for Studio E from it.";
	else:
		say "Be brave! ENTER the passage!";

check taking passage:
	say "EXAMINE it, instead." instead;

understand "studio e" and "studio" as passage.

e-revealed is a truth state that varies.

check entering passage:
	if e-revealed is true:
		say "No. Regardless of how cynical you are, you don't need to see that again. But you remember YYRRGRG." instead;
	say "You sense that you may uncover a deeply disturbing truth if you enter. Or, you might just get a too-spoilery hint that gets you out of here. Care to continue?";
	if the player direct-consents:
		say "You step into studio E. There, you see well-known pharmaceutical industry barons discussing perfectly legal and safe substitutes to various illegal drugs, along with perfectly air-tight patents and tax avoidance schemes. You also see a bottle 'DORI'S ROIDS: for IAN' with a so-tired needle beside it.[paragraph break]You rush out of Studio E before you see anything more--although you quickly [if cheat-on is false]switch your gadget back and forth and note it[otherwise]note your gadget[end if] flashes YYRRGRG.";
		now e-revealed is true;
	otherwise:
		say "You decide to rely on what you see in the Lectures to get out.";
	the rule succeeds;

[strudel/lsd-ture and joke if eat after visiting]

chapter outsideing

outside-warned is a truth state that varies.

after fliptoing lecturer (this is the disable the macks slightly too rule) :
	now pamphlets are in lalaland;
	increase headaches by 10;
	now lectures is shunned;
	if t-tediously is in otters:
		let A be pod-num of t-tediously;
		now pod-num of t-tediously is 0; [disable "tediously" in otters]
		let B be a random number from 1 to mack-count of A;
		place-a-mack A and B;
	move player to Strip of Profits;
	continue the action;

chapter lecturer

the lecturer is a reflexive person in Cruelest Lectures. "A lecturer lectures lecturingly about why his wasting your time is better for society than how you waste your time. And how the sooner you agree, the less you'll waste HIS time, and the golden rule and stuff."

check scaning lecturer:
	say "You point your settler at the tedious lecturer.";

a-text of lecturer is "YYRRYRY". b-text of lecturer is "YYRRYRY". parse-text of lecturer is "-[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-".

understand "max p lee" and "max/lee/example" and "max lee" as lecturer.

description of lecturer is "He's wearing a very expensive suit and tie. You're not sure why they should be expensive, but you know they are. They're probably about as showy as drug dealers['] $5,000 suits and $300 ties. You read MAX P LEE, EXAMPLE projected behind him, and he is sponsored by RutCorp, who help pull you out of ruts, apparently."

chapter ian

idg is a privately-named person in Cruelest Lectures. printed name of idg is "Ian (a Drug Guardian)". description is "'What? Those biceps are from pure hard work. And a proper diet. And Nativism Vitamins.' He nods and points to the lecturer.". "Standing by the only exit is Ian (a Drug Guardian.)"

understand "ian" and "drug guardian" and "guardian" as idg.

instead of doing something with idg:
	if current action is scaning or current action is sbing:
		say "'No offense, chum, but it's me who should probably be scanning you lawbreakers.' He nods and smiles, faux-friendly, and you turn back to the lecturer." instead;
	if current action is attacking:
		say "He's too big for you." instead;
	if player does not have pamphlets:
		say "Before you can do anything with or to Ian, he thrusts pamphlets about drug use at you[one of][or] again[or] yet again[stopping]. 'It will help you in ways you don't know. And even I don't know.' Do you take them?";
		if the player yes-consents:
			now player has pamphlets;
			say "'Good choice. Say, if they're good enough, do you think you could put in a word for me--to a lecturer like THAT?" instead;
		otherwise:
			say "Ian looks hurt, then blames it on the lack of attention span from the drugs you've been taking. That cheers him up." instead;
	otherwise:
		if action is procedural, continue the action;
		say "Before you can do anything, Ian points at the pamphlets he shared on you. Or at you. But not just plain with you. He's so much bigger than you, it distracts you from whatever you meant to do.";

section reflections

The help stamp hemp SPLAT pamphlets are a plural-named thing.

after doing something with pamphlets:
	set pronoun it to pamphlets;
	continue the action;

description of pamphlets is "It's a list of thirty-odd sentences beginning I USED TO. It's in hard-hitting simple language but no less painful to read for all that. I will spare you the details--a brochure's such a borer."

a-text of pamphlets is "YYRRYRY". b-text of pamphlets is "YGRRYRY". parse-text of pamphlets is "-[sp]u[sp]x[sp]x[sp]-[sp]x[sp]-".

volume routes

last-loc of routes is Same Mesa.

check going outside:
	if mrlp is routes and outside-warned is false and cur-score of routes > 0:
		say "(That's a preposition, but it's not one you need.)";
		now outside-warned is true;

book quest-items

a quest-item is a kind of thing.

after printing the name of a quest-item while taking inventory:
	if read-list is true:
		say " (for Brother Horbert)";

after taking inventory:
	if number of carried quest-items is 3:
		say "You should go back to the Cleric Circle now.";
	if number of carried quest-items > 0:
		say "You're on your way to helping Brother Horbert.";
	continue the action;

the specification of quest-item is "One of three items needed for Brother Horbert's potion."

check objasking brother horbert about a quest-item:
	if player has second noun:
		try giving second noun to brother horbert instead;
	else:
		say "'Found it? ... Find out! Do it! Fun!' Brother Horbert looks slightly guilty at his impatience and vagary, afterwards[one of]. But the mesa doesn't seem too big--what you need can't be far off[or][stopping]." instead;

book Same Mesa

Same Mesa is a room in Routes. "Routes lead in all directions here, but they seem to twist before going anywhere[if worst ad is in mesa]. Far off, beyond the perimeter of the poison stripe, you can see the worst ad you've ever seen[go-worst][end if].[paragraph break]You see three places to enter: [if cleric is visited]back into the cleric circle[else]A cleric circle, covered by scripture picturers, looks almost welcoming[end if]. [if adobe is visited]Oscar's is back across[else]There's a dingy dwelling with lairage regalia[end if], and [if deli is visited]you can go back past to Pat's[else]a grubby restaurant advertises with an adsorbing signboard[end if].[paragraph break]Finally, [if old giant is in lalaland]that bench the giant sat on still lies here[else if old giant is visible]the giant's bench[else]there's a bench, which is rather big, so it must be a giant's[end if]."

after looking in same mesa:
	if old giant is in same mesa:
		it-him-her old giant;
	else if the-b is not in same mesa:
		set the pronoun it to bench;
	continue the action;

check going in Same Mesa (this is the pin the player to the Mesa puzzles rule) :
	if old giant is visible:
		say "Even without the giant's unavoidable tirades, your head is spinning too much for directions." instead;
	if noun is a direction:
		if noun is inside:
			if Cleric Circle is unvisited:
				if adobe is visited or deli is visited:
					if adobe is visited and deli is visited:
						if inwarn is false:
							ital-say "if you want to get back to the adobe or deli, you have to go ACROSS or PAST. Sorry for the ambiguity.";
							now inwarn is true;
					else:
						say "That isn't quite how to enter the church. Do you wish to go back to the [if adobe is visited]adobe[else]deli[end if]?";
						if the player yes-consents:
							if adobe is visited:
								move player to adobe instead;
							else:
								move player to idle deli instead;
				now in-try is true;
				say "You just can't make it through to the cleric circle. Err, well, maybe THROUGH isn't right. Something blocks you--you seemed a bit too glib about getting in, and they're not sure you're on their side[if abode is visited or deli is visited]--note, for where you already visited, you need to use [aop][end if]." instead;
			move player to cleric circle instead;
		if noun is down and the-b is visible:
			say "Well, not quite DOWN..." instead;
		if noun is up or noun is down:
			say "That won't work right now." instead;
		say "You try going [noun] and looking for that poison stripe--but it's invisible and makes you wind up taking turns unconsciously. You arrive back at... the same mesa[one of] (thank you, I'm here all game,)[or],[stopping] from the [opposite of noun], after several minutes." instead;
	else:
		say "No matter where you try to wander, you wind up back where you are.";

part verbs

chapter make sure they don't clash

insideing is an action applying to nothing.

understand the command "inside" as something new.

understand "inside" as insideing.

carry out insideing:
	if player is in mesa:
		try fliptoing picturers instead;
	try going inside instead;

check fliptoing when player is in same mesa (this is the armada keeps you in rule):
	if noun is picturers or noun is lairage or noun is signboard or noun is worst ad:
		if drama armada is in mesa or the-b is in mesa:
			say "But... [if the-b is in mesa]THE BEAN[else]the MORF-FORM[end if]! What to do with it[if armada is in mesa]? The armada mumbles nervously.[else]?[end if]" instead;
		if MORF FORM is in mesa:
			say "That MORF FORM is distracting you. Maybe you should deal with it now." instead;

check fliptoing when player is in same mesa (this is the check giant is not in mesa rule):
	if noun is picturers or noun is lairage or noun is signboard or noun is worst ad:
		if old giant is visible:
			say "Walking away would upset the giant. I mean, into doing something, not just talking. And he is bigger than you. Maybe listening will help[if noun is not prefigured and noun is not reflexed], and you can move that way later[end if].";
			preef noun;
			do nothing instead;

check fliptoing when player is in same mesa (this is the note mesa re-exit rule):
	if noun is reflexed:
		if noun is picturers:
			say "You go back inside, being a bit over-cautious with protocol. You could've just said IN.";
			move player to cleric circle instead;
		if noun is lairage:
			say "Yeah, ACROSS is fewer keystrokes than ENTER OSCAR'S, so hey...";
			move player to Adobe Abode instead;
		if noun is adsorbing signboard:
			say "You try the walking into the alley trick again, but the building stays still. You're a bit disappointed you can just walk in like that.";
			move player to idle deli instead;

part people and things

chapter old giant [NOTE: it's critical to say old giant and not giant, because giant = giant pin according to inform]

the grouchy old giant is a person. "There's a grouchy old giant here sitting on the big bench[if Rude 'N Nuder is in Same Mesa], waving something called Rude [']N Nuder in the air[otherwise], going on some [i]tirades[r] about something or other[flail]. You're not sure if he needs his space or someone to listen to[end if]."

does the player mean objasking about old giant when mrlp is routes: it is likely.
does the player mean objasking generically old giant when mrlp is routes: it is likely. [ugh, nothing else works :/ ]

description of grouchy old giant is "You can't do much more than listen to the giant. [if bench is reflexed]You're not sure what he's complaining about, but it seems he really needs to[else if elbow is reflexed]His [i]tirades are as loud as ever, his arms flailing high in the air[else]He seems to be half gesturing for you to have a seat, which is ironic, because only half a seat is left[end if]."

check taking old giant:
	say "You'll have to take his babble, but not him." instead;

after fliptoing old giant:
	now tirades are in same mesa;
	continue the action;

check scaning old giant (this is the scan other parts of giant instead rule):
	if bench-end is reflexive:
		try scaning the bench-end instead;
	if elbow is reflexive:
		say "The settler registers something only when the elbow is in its way.";
		try scaning elbow instead;
	if nuder is visible:
		say "The settler only registers when it's pointed at Rude [']N Nuder.";
		try scaning nuder instead;

section giant's elbow

the giant's elbow is part of the grouchy old giant. description is "Well, thankfully, only one is flailing. Both would be extra tough to dodge. [if elbow is reflexed]But you have the hang of it now[else]Still, there's almost a pattern to it, and maybe there's a safe spot[end if]."

the elbow is reflexive.

a-text of elbow is "RYRYR". b-text of elbow is "RYRGP". parse-text of elbow is "x[sp]e[sp]x[sp]o[sp]w". elbow is cheat-spoilable.

understand "elbows" as giant's elbow.

instead of doing something to elbow:
	if action is procedural, continue the action;
	say "You'll need to find the right way to avoid it."

to say flail:
	say "[if elbow is reflexive] and flailing each elbow all about[end if]"

to decide whether below-is-wrong:
	if player is in same mesa and U NERD ENDUR REDUN is in same mesa:
		decide yes;
	if the-b is in same mesa and player is in same mesa:
		decide yes;
	decide no.

chapter tirades

tirades are scenery. "They're not very good tirades[if nuder is visible], but they're all about Rude [']N Nuder[else if bench-end is reflexed], and you're more concerned about the giant's elbow[else], but maybe you could position yourself better to listen to them[end if]."

check scaning tirades:
	if bench-end is reflexive:
		try scaning bench-end instead;
	if elbow is reflexive:
		say "The settler lights up when the elbow flashes across.";
		try scaning elbow instead;
	say "The settler really lights up when the giant waves the book at it.";
	try scaning Nuder instead;

chapter poison stripe

the poison stripe is scenery in Same Mesa.

description of poison stripe is "You can't really see it, but you can FEEL it."

instead of doing something with the poison stripe:
	say "You can really only sense the poison stripe, which is all you need to do. You will need to look around for a way out."

chapter cler-scen

the cler-scen is privately-named scenery in Same Mesa. "The scripture picturers, a staple for any Yorpwaldian place of worship, are particularly nice here[if picturers are not reflexed]. Maybe they can show you the way in[else]. You feel you almost understand them[end if]."

understand "cleric/circle" and "cleric circle" as cler-scen when player is in same mesa.

check entering cler-scen:
	if player is in cleric circle:
		try going outside instead;
	else:
		try going inside instead;

does the player mean doing something with rs:
	if player is in Same Mesa:
		it is likely;
	it is unlikely.

chapter rs (private routes)

rs are privately-named scenery in Same Mesa. understand "routes" as rs. printed name of rs is "routes". "Staring at them makes you lose your sense of direction even further."

instead of doing something with rs:
	if action is procedural, continue the action;
	say "They're painful to think about for too long. They wind together and go off in the distance and loop around."

chapter scripture picturers

the scripture picturers are reflexive flippable scenery in Same Mesa. "[do-i-switch]Parish of Satin Saint Astin[paragraph break][if Cleric Circle is unvisited]Six letters below: [dssd][otherwise]Pal, Meet a Temple! Hubris-b-rubbish![end if]".

switch-pic-next is a truth state that varies.

switched-pics-yet is a truth state that varies.

to say do-i-switch:
	if picturers are reflexive:
		if switch-pic-next is true:
			now switched-pics-yet is true;
			now sign-other is whether or not sign-other is false;
			say "The picturers changed since you last saw them.";

understand "scripture picture/picturer" as picturers.
understand "picture/picturer" as picturers.

after examining when mrlp is routes (this is the switch picturers rule) :
	if noun is not picturers:
		now switch-pic-next is true;
	continue the action;

after examining picturers:
	if switched-pics-yet is true:
		if picturers are reflexive:
			say "You can see how the SIN DIE and DIE SIN blend back and forth to make a clever illusion. You feel clever for seeing it, but not too clever. That'd be un-pious.";
			continue the action;

a-text of scripture picturers is "YRRYRY". b-text of scripture picturers is "YRRYR[if sign-other is true]Y[else]G[end if]". parse-text of scripture picturers is "-[sp]x[sp]x[sp]-[sp]x[sp][if sign-other is true]x[else]e[end if]".

check taking the scripture picturers:
	say "Appropriation of church property! [if circle is visited]Brother Horbert[else]Whoever's in there[end if] wouldn't deserve that." instead;

sign-pushed-prompt is a truth state that varies.

after scaning scripture picturers:
	if cheat-on is true and sign-pushed-prompt is false:
		now sign-pushed-prompt is true;
		say "Man! That wasn't helpful at all! The sign does look a bit wobbly, though, and you know these things are two-sided. Give it a push?";
		if the player yes-consents:
			try pushing scripture picturers instead;
		otherwise:
			say "Well, if you feel like it later, the sign or whoever put it there will forgive you."

to say dssd:
	say "[if sign-other is false]SIN DIE (in black)[else]DIE SIN (in red)[end if]"

inwarn is a truth state that varies.

in-try is a truth state that varies.

to say aop:
	say "[if abode is not visited]PAST[else if deli is not visited]ACROSS[else]PAST or ACROSS[end if]";

before entering the cler-scen:
	if Cleric Circle is unvisited:
		say "Its doors are open to all, but one does not enter it by brute forcing directions." instead;
	otherwise:
		say "You re-enter, no longer worried about the exact preposition for doing so.";

chapter dingy dwelling

the dingy dwelling is auxiliary scenery in Same Mesa. "The lairage regalia announces its dwelling as Oscar's."

check entering dingy dwelling:
	if old giant is in mesa:
		try fliptoing lairage instead;
	if Adobe Abode is unvisited:
		now oscar-annoy is true;
		say "You try going directly to Oscar's, but the place curves away from you." instead;
	otherwise:
		if oscar-annoy is true:
			say "No more funny business from Oscar's. You walk in without having to pretend to walk away.";
			now oscar-annoy is false;
		now player is in Adobe Abode;
	the rule succeeds;

does the player mean scaning dingy dwelling: it is likely.

understand "oscar's/oscars/oscar" as the dingy dwelling.

the lairage regalia is reflexive scenery in Same Mesa. "[one of]As Yorpwaldian lairage regalia go, it's cheerless and unwelcoming. It says: [or][stopping][b][ast]Oscar's[ast][r]."

to say ast:
	say "[if screenread is true] ** [end if]"

instead of scaning dingy dwelling:
	say "The lairage regalia gives a reading.";
	try scaning lairage regalia instead;

a-text of lairage regalia is "YRRYRR". b-text of lairage regalia is "YRRYRP". parse-text of lairage regalia is "-[sp]x[sp]x[sp]-[sp]x[sp]s".

after fliptoing lairage regalia:
	now dingy dwelling is clue-used;
	continue the action;

chapter grubby restaurant

the grubby restaurant is auxiliary scenery in Same Mesa. "It looks terribly plain. There's a signboard indicating whose it is."

check entering grubby restaurant:
	if Idle Deli is unvisited:
		say "You try to do so, but the building shifts further away." instead;
	if old giant is in same mesa:
		try fliptoing signboard instead;
	say "You walk back into Pat's idle deli more confidently the second time. The building does not shift.";
	now player is in Idle Deli instead;

instead of scaning grubby restaurant:
	say "The adsorbing signboard gives a reading.";
	try scaning adsorbing signboard instead;

after fliptoing signboard:
	now grubby restaurant is clue-used;
	continue the action;

does the player mean scaning grubby restaurant: it is likely.

the adsorbing signboard is reflexive scenery in Same Mesa. "[b][ast]Pat's[ast][r][paragraph break]Only the fliest filets![paragraph break]Hopefully, that's figurative and not literal."

understand "sign/board" and "adsorbing sign/board" as signboard.

understand "pat's/pats" as the grubby restaurant.

a-text of grubby restaurant is "RYRR". b-text of grubby restaurant is "PGRR". parse-text of grubby restaurant is "p[sp]a[sp]x[sp]x". it is parse-spoilable.

a-text of adsorbing signboard is "RYRR". b-text of adsorbing signboard is "PGRR". parse-text of signboard is "p[sp]a[sp]x[sp]x". it is parse-spoilable.

does the player mean entering the dingy dwelling: it is very likely.
does the player mean entering the grubby restaurant: it is very likely.
does the player mean examining the dingy dwelling: it is likely.
does the player mean examining the grubby restaurant: it is likely.

instead of entering adsorbing signboard:
	try entering grubby restaurant instead;

chapter bench

the bench is reflexive scenery in Same Mesa. "[if old giant is in Same Mesa]The giant's on it, and he covers enough of it, you could only half squeeze in between him and the armrests[else if old giant is off-stage]It'd be a chore to sit on--it looks like it's a giant's. Probably because the words A GIANT'S are painted where you would sit. Maybe he'll come back[otherwise]The giant probably won't be around here any more[end if]."

check entering the bench:
	say "[if old giant is in lalaland]You don't need to fool with the bench any more.[else if old giant is visible]You don't quite have room. And you're not going to get the giant to scootch over.[otherwise]From the size, the bench seems to be [i]a giant's[r]. If he came along, he could sit on you pretty easily.[end if]" instead;

after fliptoing bench:
	now old giant has Rude 'N Nuder;
	continue the action;

check taking bench:
	say "The bench is too big." instead;

a-text of bench is "YRYYRRR". b-text of bench is "GPYYPRR". parse-text of bench is "a[sp]g[sp]-[sp]-[sp]n[sp]x[sp]x".

check taking bench:
	say "The bench is way too big." instead;

check scaning bench:
	if old giant is off-stage:
		continue the action;
	if bench is reflexed:
		if bench-end is reflexive:
			say "The settler blinks a bit during each lull in the giant's tirades.";
			try scaning bench-end instead;
		if elbow is reflexive:
			say "Nothing happens until his elbow gets in the way of your scanner.";
			try scaning elbow instead;
		if rude is visible:
			say "Nothing happens until the giant starts waving Rude [']N Nuder in your face.";
			try scaning rude instead;
	if old giant is in lalaland:
		say "There's no more magic in the bench. Nothing more to do." instead;

section bench-end

the bench-end is part of the bench. understand "end" as bench-end. description of bench-end is "Thick enough to sit on, with not too much pain, if you found the right way.". the bench-end is reflexive.

a-text of bench-end is "YRRRYRY". b-text of bench-end is "YRRRYRY". parse-text of bench-end is "-[sp]x[sp]x[sp]x[sp]-[sp]x[sp]-".

check taking bench-end:
	say "The bench is too well made." instead;

check fliptoing bench-end:
	if old giant is not visible:
		say "[if bench-end is reflexed]Nobody or nothing else big enough to get astride of[else]Not quite the right way to position yourself, yet[end if]." instead

chapter Rude N Nuder

Rude 'N Nuder is a thing.

description of Rude 'N Nuder is "You aren't able to see the inside, and that's probably a good thing. People do tend to get worked up a bit more than they should about this sort of 'work,' whether extolling freedom of speech or saying how tasteless it is."

instead of doing something to Rude 'N Nuder:
	if action is procedural, continue the action;
	if old giant has Rude 'N Nuder:
		say "You can't do much with Rude 'N Nuder until you have it." instead;
	say "You don't need to do anything special with Rude [']N Nuder. Well, maybe apart from the special stuff you've been doing so far this game." instead;

a-text of Rude 'N Nuder is "YRRYR". b-text of Rude 'N Nuder is "YRPG?". parse-text of Rude 'N Nuder is "u[sp]x[sp]x[sp]e[sp]x". Rude 'n Nuder is cheat-spoilable.

check fliptoing Rude 'N Nuder:
	if bench-end is reflexive:
		say "You're already below, but if you were close enough to listen, that could work." instead;

after fliptoing U NERD ENDUR REDUN:
	now grouchy old giant is in lalaland;
	continue the action;

does the player mean doing something with Rude 'N Nuder when Nuder is visible:
	it is likely.

section U NERD ENDUR REDUN

U NERD ENDUR REDUN is a proper-named uncluing quest-item. description of U NERD ENDUR REDUN is "It's definitely runed. A glimpse on the inside, though, gives you a pretty good idea that even if you understood the runes['] basic meaning, you aren't the one to grasp the subtleties needed to use it and invoke its powers. After all, ENDUR = ender or endure, and REDUN = redone, readin['] or redundant. Whew!". "U NERD ENDUR REDUN should always be in your possession."

printed name of U NERD ENDUR REDUN is "U NERD: ENDUR (REDUN)".

after printing the name of U NERD ENDUR REDUN while taking inventory:
	say " (runed)"

understand "runed/book" and "runed book" as U NERD ENDUR REDUN.

does the player mean doing something with U NERD ENDUR REDUN when U NERD ENDUR REDUN is visible: it is likely.

before listing contents while taking inventory: group quest-items together.

chapter worst ad

the worst ad is LLPish vanishing scenery in Same Mesa. "Dang it, a giant ad for RADWOST, and it's all in red, but it's too lousy to determine what RADWOST is about. Maybe if you point your settler at it, you can pick it up. You're not sure how best to approach it, with all these twisty roads. You're not sure if you need to, really."

to say go-worst:
	if worst ad is prefigured:
		say "--the one you tried to go TOWARDS with the giant around";

a-text of worst ad is "RYRYRRR". b-text of worst ad is "RGRYRRR". parse-text of worst ad is "x[sp]o[sp]x[sp]a[sp]x[sp]x[sp]x".

check taking worst ad:
	say "You'd need to get closer." instead;

chapter MORF FORM

the MORF FORM is a flippable thing. description is "It's huge all right. And it's a thing. It could cloud the stripe for a while. Perhaps it is what the priest summoned. If you could bring it down, maybe you could see what it is.". "[one of]Oh no! Above, you see a MORF-FORM! Those things are scary! Just the threat of them coming near is often worse than them being near[or]The MORF-FORM hangs menacingly above. You can't just leave it there[stopping]."

printed name of MORF FORM is "MORF-FORM"

check taking MORF FORM:
	say "It'd crush you. You need another way to bring it down." instead;

check going when MORF FORM is visible:
	say "That MORF-FORM is lingering threateningly. Maybe you should deal with it now." instead;

a-text of MORF FORM is "RRYR". b-text of MORF FORM is "?RY?". parse-text of MORF FORM is "x[sp]r[sp]o[sp]x". MORF FORM is cheat-spoilable.

chapter THE BEAN

after fliptoing the-b:
	if drama armada is off-stage:
		now drama armada is in Same Mesa;
		set the pronoun them to drama armada;
	continue the action;

the-b is a privately-named vanishing thing. printed name of the-b is "THE BEAN". "Oh, great. A bean landed on the Same Mesa. It's utterly enormous and forbidding. [i]The bean[r] has filled a drama armada surrounding it with b...unspeakable fear.". description of the-b is "It's not just any bean. It's stamped THE BEAN in all-red letters. In case you were wondering if it was an egg or something, I guess.". the-b is fixed in place.

instead of taking the-b:
	say "You can't move it. Maybe you can find a way to get inside or under--wait, no, those have been done here.";

instead of entering the-b:
	say "It doesn't appear cracked." instead;

a-text of the-b is "RYRYYRR". b-text of the-b is "RYRYYRR". parse-text of the-b is "x[sp]-[sp]x[sp]-[sp]-[sp]x[sp]x".

understand "bean" as the-b.

check pushing the-b:
	say "The drama armada joins in to push the bean, but unfortunately, they wind up pushing it from all sides and complaining it's too heavy. You need to give an order."

check going when the-b is visible:
	if noun is down:
		say "Maybe there is something below, or something. But you can't prove it." instead;
	say "The drama armada won't let you go anywhere with the bean present." instead;

section a drama armada

a drama armada is plural-named scenery. understand "crowds" as drama armada. description of drama armada is "They're all milling around, waiting on you to say the right thing and make it snappy, and staring at the enormous bean. You'd like to push it out of the way."

after doing something with drama armada:
	set the pronoun it to drama armada;
	continue the action;

Include (-
	has transparent animate
-) when defining drama armada.

book Cleric Circle

Cleric Circle is an innie room in Routes. "Things seem less confused here than outside--but oppressive, from organs['] groans to a Latiny litany to skyier kyries. Chants snatch but don't stanch[if list o toils is visible]. You see a list-o-toils on the wall[end if]. Of course, there are Spew Pews, a common legacy from Elvira's suggestions to make religion more exciting and practical, along with a lament-mantle.".

after looking in Cleric Circle:
	if number of held quest-items is 3:
		now all quest-items are in lalaland;
		say "'You have all the reagents! Wonderful!' The priest gains esprit. 'Mixture...mixture...true mix! To censor crones like the Spiter Sprite and repeal the red orb border, changing the moronic omicron to dreamiest diameters, nag ol['] No-Gal Logan beyond an un-road to dig an urn during an... rarify this friary ... act divine. Vindicate.' He rushes off to a private office.[paragraph break]No-Gal Logan. That's an odd name. You write it down.";
		pad-rec "No-Gal Logan";
		now Brother Horbert is in lalaland;
		pad-del "reagents";
		now MORF FORM is in Same Mesa;
		if worst ad is not in lalaland:
			poss-d;
	continue the action;

after printing the locale description for Cleric Circle when Cleric Circle is unvisited (this is the reveal snoop spoon rule):
	say "(press any key)[wfak][paragraph break]";
	say "Brother Horbert steps on something that flips up into the air and into your hands! He points at you. 'It...you...I was told...the spoon must be for you!'[paragraph break]He explains it is a snoop spoon, one that helps the right person--the one it chooses--to examine it for direction when needed. Apparently you have to tilt it right so all the rays or whatever get focused at the focal point, but you can figure that out as you go.";
	now player has snoop spoon;

instead of exiting in Cleric Circle:
	if toils is unexamined or pews are unexamined:
		say "You look back at the [if toils is examined]pews[else if pews are examined]list-o-toils[else]pews and list-o-toils[end if]. Perhaps closer inspection might give you [if toils is examined]the 'why'[else if pews are examined]the 'what'[else]the 'what' and 'why'[end if] for dealing with the directionless Same Mesa.[paragraph break][randbla]";
	now player is in Same Mesa instead;

check going in Cleric Circle:
	if noun is not outside:
		say "[one of]'Directions are not important here, my son. They are arbitrary, but eternal truth is eternal. Just EXIT, if you want to.' So you do.[or]'One day, my son, you will learn to put aside your need for compass directions.'[stopping][line break]You go back outside.";
	move player to Same Mesa instead;

chapter brother horbert

Brother Horbert Berroth is a person in Cleric Circle. description is "Slightly anxious, and in the usual black clerical garb.". "[one of]You see a man muttering, 'Only hope? Holy peon!' He turns and blinks. 'Greetings! I am Brother Horbert Berroth. Father Hafter and Veteran Rev. [n-t] are not here to help with the colossal local SOS from the previous viperous pious rev.'[paragraph break]'Some people call me the Oopsin['] Priest because...oops!'[or]Brother Horbert, the oopsin['] priest, paces about here.[stopping]"

printed name of Brother Horbert is "Brother Horbert".

understand "oopsin priest" and "oopsin/priest" as Brother Horbert

to say pri-who:
	if list o toils is examined:
		say "Brother Horbert";
	else:
		say "someone";

instead of giving something to Brother Horbert:
	if noun is a quest-item:
		say "You should maybe wait to give Brother Horbert all the reagents first. He would probably forget where he put the [noun]."

chapter snoop spoon

the snoop spoon is a thing. description is "The spoon looks pretty normal despite the powers Brother Horbert claims it has."

snoop-warn is a truth state that varies.

check examining snoop spoon:
	if scams is false:
		if snoop-warn is false:
			now snoop-warn is true;
			say "Examine the spoon at just the right angle, for a hint?";
			unless the player direct-consents:
				continue the action;
	now spoilit is true;
	try routes-hinting;
	now spoilit is false;
	the rule succeeds;

chapter silly circle scenery

section musical

the latiny litany is amusing scenery in cleric circle. "[not-upb]."

the chants are amusing scenery in cleric circle. "[not-upb]."

the skyier kyries are amusing plural-named scenery in cleric circle. "[not-upb]."

to say not-upb:
	say "Not the most upbeat music, but then, you aren't here for art critiques"

instead of doing something with scenery when player is in cleric circle:
	if noun is pews or noun is lament mantle or noun is list o toils or noun is red writing, continue the action;
	if the action is procedural:
		continue the action;
	say "The music is there just to provide spiritual atmosphere."

section pews

the spew pews are amusing plural-named scenery in cleric circle. "You rifle absentmindedly through the pews some more, but nothing turns up."

check searching pews:
	try examining pews instead;

check looking under pews:
	try examining pews instead;

check entering pews:
	say "A voice seems to intone: '[']Tis no sin to sit on, is...? NOT!'" instead;

check touching pews:
	try examining pews instead;

check examining the pews when summary is off-stage:
	say "You search through the pews, just as when you were a kid, looking for anything, maybe a note from the last person. You found something from yourself, once. But this time, something actually turns up! It's been hidden carefully, tucked where two woody bits are glued together.[paragraph break]An initial glance reveals nothing about Mum Ray's identity. Is it a woman with a last name of Ray? A silent fellow named Ray who preferred to write? Or just a pen name? They probably needed the anonymity, with the power Rev. Ali had, and either way, there's a lot to read.";
	now player has the summary instead;

section mum ray's summary

check closing summary:
	say "You fold up the summary and start at page 1.";
	now summary-page is 1;
	try examining summary instead;

check opening summary:
	try closing summary instead;

Mum Ray's Summary is a thing. description of Mum Ray's Summary is "[part-of-summary]";

to say part-of-summary:
	increment summary-page;
	choose row summary-page in the table of summary text;
	say "[sum-page entry]";

summary-page is a number that varies. summary-page is usually 0.

table of summary text
sum-page
"The story starts with Rev. Ali being violently opposed to Elvira. He dropped by the Same Mesa, and many people followed him. He was constantly yelling how she was too exciting, and the way to fight back was not to get swept up in her newness be happy enough, you guess."
"People listened to him, and his austerity helped prevent hearing about Elvira's latest charm offensive. But he got more and more severe, restricting where people could go, and even directions how to get there. If people knew where they wanted to go, and it was really important, they'd get there."
"Then Elvira dropped by. Rev. Ali took the time to admit he was wrong! In doing so, he informed the residents of the Same Mesa that they would do well to follow his lead. Terrified, they accepted. Elvira's excitement had matured, and he didn't realize how good she was at pointing out people's faults. It would help to improve them."
"Rev. Ali left, but with one final 'character-building' challenge. The roads out of the Same Mesa would lead nowhere until someone found a new clever way out beyond them. And if nobody found the way out--well, there were some wise guys who were all about thinking for yourself. Maybe they were not as good at it as they claimed to be."
"It was rumored Rev. Ali moved on to a new community to 'help.' His legacy remains, though. People are not willing even to visit Pat's and Oscar's. Why should they? The Same Mesa is a mix of countermanding and warnings about what you can't do, and how you can't even get the basics right, like cardinal directions. Someone needs to break through, somehow."

after examining summary (this is the notify last summary page rule) :
	if summary-page is number of rows in table of summary text:
		say "Whew. That was the last page.";
		now summary-page is 1;
	else:
		say "Push P to read the next page (you're at [summary-page] of [number of rows in table of summary text]).";
		let cho be the chosen letter;
		if cho is 80 or cho is 112:
			try examining the summary;
			the rule succeeds;
		else:
			say "OK. You'll start at the next page, next time. You can OPEN or CLOSE the summary to start at the first page.";
			the rule succeeds;
	the rule succeeds;

chapter lament mantle

the lament mantle is useless scenery in Cleric Circle. "[one of]It's full of regrets. Regrets Rev. Ali and his hangers-on have that people do certain things, and regrets those people will have that they did them[or]Another interdict[stopping]. [pious1][randbla][one of], full of tarnished sin-hatred and obliged god-bile for your sinner inners[or][stopping]. [one of]Their creeds-screed contains[or]Another no-heart rant, e-oh:[stopping] [pious1][randbla]"

check examining lament mantle for the first time:
	say "Just a small check-off: there's some religious stuff in here, poking fun at hot button issues. This might be annoying, and I don't want do do that. Do you wish to go ahead?";
	unless the player direct-consents:
		say "Okay. This warning will vanish next time." instead;
	say "Man! This guy is a grouch. You have morals and all, but geez."

check asking Brother Horbert about:
	say "Brother Horbert shrugs. 'I should know more about the exotic outside world, but it's hard, with the poison stripe.'";

to say pious1: [otherwise the picture has trouble with randbla for random stuff]
	now pious-state is whether or not pious-state is false;

pious-state is a truth state that varies.

chapter list o toils

does the player mean doing something with the list o toils:
	if player is in cleric circle:
		it is likely;
	it is unlikely.

the list o toils is scenery in Cleric Circle. "[list-o-toils-text]"

understand "list-o-toils" as list o toils.

understand "recipe" as list o toils.

read-list is a truth state that varies.

to say list-o-toils-text:
	let missing-one be false;
	say "Precise recipes # 2: Mix of reagents greatens. Fix mo['].[no line break]";
	repeat with QQ running through quest-items:
		say "[line break]";
		if QQ is enclosed by the player:
			say "(Y) ";
		otherwise:
			now missing-one is true;
			say "(N) ";
		say "[if qq is u nerd]runed bool[else][QQ][end if]";
	if read-list is false and missing-one is true and Brother Horbert is visible:
		say "[line break]";
		pad-rec "reagents";
		say "[paragraph break]Brother Horbert mumbles something about how if they had any reagents left around here, they'd have used them, but they don't.[no line break]";
		now read-list is true;

book Adobe Abode

Adobe Abode is an innie room in Routes. "A dilapidated residence with a trashy ashtray[if pipe soot is in abode], which could use some emptying[end if]. The only exit is out to the Mesa.";

after choosing notable locale objects when player is in adobe abode:
	set the locale priority of pipe soot to 0;

chapter oscar

Oscar is a person in Adobe Abode. description is "He gives a weary hi. 'Haywire.'". "[one of]Someone who must be [or][stopping]Oscar mopes around here, probably not willing to talk about more than himself."

check exiting in Adobe Abode:
	try going outside instead;

check going outside in adobe abode:
	say "You leave the adobe/abode.";
	now player is in Same Mesa instead;

check going outside in Adobe Abode:
	try exiting instead;

chapter ashtray

a trashy ashtray is scenery in adobe abode. "[if pipe soot is in abode]The ashtray is full of pipe soot, but at least, no Pepsi too[else]You emptied the ashtray[end if]."

understand "ash/tray" as ashtray.

instead of doing something with ashtray:
	if current action is sbing or current action is scaning:
		if player does not have pipe soot:
			now noun is pipe soot;
			say "Only the pipe soot does anything to the settler, so you focus on that.[paragraph break]";
			continue the action;
	if action is procedural, continue the action;
	say "You can't do much with the ashtray besides be all 'Artsy, ha!' or 'Ay, trash.'";

oscar-annoy is a truth state that varies. oscar-annoy is usually false.

chapter pipe soot

some pipe soot is a reflexive singular-named quest-item in Adobe Abode. the indefinite article of pipe soot is "some".

check taking the pipe soot when soot is in adobe:
	say "Oscar snaps at you. 'Hey! Whoa! No stealing! Even worthless stuff!'[paragraph break]Maybe if you could position yourself so he can't see you taking it." instead;

a-text of pipe soot is "YRRYRYRY". b-text of pipe soot is "YRPYPYRY". parse-text of pipe soot is "-[sp]x[sp]p[sp]-[sp]s[sp]-[sp]x[sp]-".

the description of pipe soot is "If you picked it apart, which you don't need to, there might be evidence it was once tobacco. It actually smells more like some fruit you can't, and won't, recognize."

instead of eating pipe soot:
	say "Well, it doesn't SMELL that bad, but...umm, no."

instead of doing something to U NERD ENDUR REDUN:
	if action is procedural, continue the action;
	say "Best not try anything fancy. You probably want to get that book back to [if list o toils is examined]Brother Horbert[else]someone who can use it properly[end if].";

book Idle Deli

Idle Deli is an innie room in Routes. "This restaurant has no customers, and that's no surprise, what with the seed pit in the back ruining the ambiance--not even pie crust pictures by Stu Price. But there are craving carvings, and ants be absent. You can go back out to the outback, err, the Same Mesa."

after looking in idle deli:
	set the pronoun him to pat;
	set the pronoun her to pat;
	set the pronoun it to pat;
	continue the action;

Pat is a person in Idle Deli. description is "Pat looks beaten down from the lack of business.". "[one of]'Lint? Use utensil. Fix store for exits...' mumbles some poor soul, presumably Pat. 'Oh! A customer!'[or]Pat is still plodding here.[stopping]"

check exiting in Idle Deli:
	say "You leave Pat's idle deli.";
	now player is in Same Mesa instead;

check going outside in Idle Deli:
	try exiting instead;

chapter seed pit and cravings carvings

The cravings carvings is auxiliary scenery in Idle Deli. "All sorts of food doodles are here, and if you READ them, they might form a message, too."

a-text of cravings carvings is "RYRRYRY". b-text of cravings carvings is "RGRRYRG". parse-text of cravings carvings is "x[sp]e[sp]x[sp]x[sp]i[sp]x[sp]e".

some mushrooms are a quest-item. description of mushrooms is "They have all different lengths of stems, and you're not sure which are poisonous and which aren't."

understand "mushroom" as mushrooms.

instead of eating mushrooms:
	say "One of them is probably poisonous, and not even I can tell[if list o toils is examined]. Plus, Brother Horbert needs them[end if]."

the seed pit is reflexive scenery in Idle Deli. "[if mushrooms are off-stage]It's ugly and moldy but you find yourself thinking, if I had just one reason to go in there, against any warnings...[otherwise]You got through okay once, but you don't want to know what might sit deep in there.[end if]"

after fliptoing mushrooms:
	now cravings carvings is clue-used;
	continue the action;

understand "seedpit" as seed pit.

a-text of seed pit is "RYRRYRY". b-text of seed pit is "RGRRYRY". parse-text of seed pit is "x[sp]e[sp]x[sp]x[sp]-[sp]x[sp]-".

instead of entering seed pit:
	say "[if mushrooms are off-stage]Pat holds you back, warning 'best SPEED IT away from there!' You see red at the odd-sounding admonition.[otherwise]You already got something from there.[end if]"

book Harms Marsh

Harms Marsh is an innie room in Routes.

after looking in harms marsh:
	set the pronoun them to sheol holes;
	set the pronoun it to sheol holes;
	continue the action;

description of Harms Marsh is "You are in a Harms Marsh, which you know to be full of sheol-holes, so tricky to find even in full light. [if darkness is visible][paragraph break]And this area seems like it was always unlit... but you intuit null about how to change that...[else if un-road is in Harms Marsh]Now you've found the un-road to get to No-Gal Logan, how to navigate it?[else]Now, you need to find No-Gal Logan. You need to find a good unroad...because roads and inroads will loop back.[end if]"

section Sheol Holes

the Sheol Holes are plural-named scenery in Harms Marsh. "You can't nail down where they are, but you do know you need to be careful."

understand "hole" and "sheol hole" as sheol holes when player is in harms marsh.

chapter darkness

the darkness is scenery in Harms Marsh. "It is better to create light and move forward than cast about in the darkness."

a-text of darkness is "YRRYR". b-text of darkness is "GPRGR". parse-text of darkness is "u[sp]n[sp]x[sp]i[sp]x". darkness is cheat-spoilable.

to say to-o:
	say "Brother Horbert talked about how if you had faith, and patience to see them right, they might lead you to an un-road or to No-Gal Logan if you knew how to study them."

chapter narrow cracks

the narrow cracks are plural-named scenery. "[to-o]"

check taking narrow cracks:
	say "Take a hint from them, where they may lead you." instead;

a-text of narrow cracks is "YRYYRR". b-text of narrow cracks is "YRYYRP". parse-text of cracks is "-[sp]x[sp]-[sp]-[sp]x[sp]d".

section cracks you followed

the cracks you followed are useless scenery. "They led you here on the road--no, near the un-road to near No-Gal Logan."

instead of doing something with the cracks you followed:
	if action is procedural, continue the action;
	say "There's not too much to do with them, now they've led you here."

chapter un-road

the un-road is scenery. "The un-road must lead to No-Gal Logan. But how to follow it?"

instead of doing something with un-road:
	if action is procedural, continue the action;
	say "The un-road leads somewhere, you think. But how to follow it to No-Gal Logan?";

understand "trail" as un-road.

a-text of un-road is "YRYRR". b-text of un-road is "YRYRR". parse-text of un-road is "-[sp]x[sp]-[sp]x[sp]x". un-road is cheat-spoilable.

understand "unroad" as un-road.

to decide whether told-of-logan:
	if mrlp is not routes, decide no;
	if MORF FORM is off-stage, decide no;
	if un-road is in Harms Marsh, decide no;
	decide yes;

chapter along-bogus

the along-bogus is a useless privately-named thing. description is "[bug-report]".

book Ripe Pier

Ripe Pier is a room in Routes. "[one of]You see mist on this pier[or]Da mist blocks[stopping] where a brighter rig berth should be.  No-Gal's boat must be beyond! It looks dangerous to enter without a plan[one of][or]. Perhaps you could LISTEN to recall Sad Tim's babbling[stopping]."

after looking in ripe pier for the first time:
	say "A man walks by, mumbling. 'Da mist! Da mist!' Ah, so it's not just mist. But his next babbling leaves you seeing red before he walks off. 'Sad Tim sat, dim... it's mad...' You see red at such nonsense.";
	continue the action;

after looking in ripe pier:
	set the pronoun it to da mist;
	continue the action;

chapter two ways out

section da mist

da mist is vanishing scenery in ripe pier. "My, It's misty. It phases through shapes, and there doesn't seem to be any clear way through."

a-text of da mist is "YRYRRR". b-text of da mist is "YRYRPP". parse-text of da mist is "x[sp]-[sp]x[sp]-[sp]s[sp]t". da mist is parse-spoilable.

instead of entering mist, say "Part of you admits it will be tricky to figure out. Maybe if you entered the right way, with a good plan...or a bad..."

instead of doing something to mist:
	if action is procedural, continue the action;
	if current action is taking, say "Mistake. Ha ha ha." instead;
	try examining noun instead;

after fliptoing mist:
	pad-rec-q "hit win button";
	continue the action;

chapter no-gal's boat

No-Gal's Boat is scenery in Ripe Pier. "You can barely see it, but you can't hear No-Gal Logan calling you."

instead of doing something with no-gal's boat:
	if action is procedural, continue the action;
	say "Just poking it won't help you get there. You need to find a way to it."

before going inside in Ripe Pier:
	try entering mist instead;

book Cripple Clipper

Cripple Clipper is a room in Routes. "Oh, no! You see a free reef in the distance, but you just realized you have no clue how to operate any sort of boat. About all you can see here are thickness sketchins[']."

the bad oar is a thing. description is "It looks weird, but hey, it got you aboard the Cripple Clipper.". "The bad oar that helped you aboard the Cripple Clipper lies here, but you probably need to figure how to work things in general here."

after looking in cripple clipper:
	set the pronoun it to free reef;
	set the pronoun them to thickness sketchins;
	continue the action;

chapter thickness sketchins

the thickness sketchins are plural-named vanishing scenery in cripple clipper. "They're thick, both physically (big letters) and in content, and you suspect they are Logan's opus about all his travels. They read:[paragraph break][bold type]WHAT, TAR? TA, WRATH THAT RAW! ART, THAW![roman type]"

understand "sketchin" and "thickness sketchin" as thickness sketchins.

after fliptoing thickness sketchins:
	now bad oar is in lalaland;
	continue the action;

a-text of thickness sketchins is "YRRRYRR". b-text of thickness sketchins is "?RRR?RR". parse-text of thickness sketchins is "a[sp]x[sp]x[sp]x[sp]a[sp]x[sp]x[sp]". [whattar tawrath thatraw artthaw <=> athwart]

chapter free reef

the free reef is scenery in Cripple Clipper. the free reef is undesc.

instead of doing something with the free reef:
	if current action is scaning, say "The reef is too far away to scan." instead;
	if action is procedural, continue the action;
	say "The reef is far away. You need to find a way to navigate to it." instead;

book sonancy canyons

Sonancy Canyons is a room in Routes. "[if patters are in canyons]Raptest patters spatter, distracting you from your goal[else]With the raptest patters gone, you can probably LISTEN better[end if].[paragraph break][if yob den is in canyons]The yob den nearby now provides most of the noise[else if hurt hog is reflexive]A hurt hog mumbling 'Urgh! Hot!' and a bent ewe moaning 'We be TEN!' block your progress ahead[else]The hurt hog and bent ewe are gone now. But there is red writing in their place[end if]."

chapter hurt hog

the hurt hog is reflexive scenery in sonancy canyons. "The hog [if bent ewe is reflexed]seems more relaxed than before[else]is staring the poor bent ewe down. Maybe you can act as peacemaker[end if]."

after fliptoing hurt hog:
	now bent ewe is in lalaland;
	now hurt hog is in lalaland;
	now yob den is in canyons;
	set the pronoun it to yob den;
	set the pronoun them to yob den;
	continue the action;

chapter bent ewe

the bent ewe is reflexive scenery in sonancy canyons. "The bent ewe [if bent ewe is reflexed]seems freer now with you blocking the hog's view[else]seems frozen by the hurt hog's gaze[end if]."

chapter raptest patters

the raptest patters are vanishing LLPish scenery in Sonancy Canyons. "[bug-report]"

instead of doing something with the raptest patters:
	if current action is listening, continue the action;
	if current action is examining, try listening instead;
	if action is procedural, continue the action;
	say "All you can do with the patters is LISTEN.";

chapter yob den

the yob den is vanishing scenery. "You're not sure the best way to deal with the yob den is to enter it. But what's a good way to avoid it?"

volume troves

book very basics

before going up in troves:
	say "Moving on up needs to be a state of mind here." instead;

before going down in troves:
	say "It is important to be down to earth as you work your way to the top, yes." instead;

chapter Pa Egg Pea (book)

Pa Egg Pea is a proper-named reflexive LLPish thing. printed name of Pa Egg Pea is "Pa, Egg, Pea"

after printing the name of Pa Egg Pea while taking inventory, say " ([if pa egg pea is reflexive]un[end if]grokked)";

does the player mean doing something with pa egg pea when mrlp is troves: it is likely.
does the player mean doing something with ltb when mrlp is troves: it is very likely.

description of Pa Egg Pea is "[randbla]".

a-text of Pa Egg Pea is "RYRY". b-text of Pa Egg Pea is "??R?". parse-text of Pa Egg Pea is "x[sp]?[sp]-[sp]?".

understand "book" as Pa Egg Pea.

instead of opening Pa Egg Pea:
	say "(to read it, I assume)[line break]";
	try reading Pa Egg Pea instead;

check examining Pa Egg Pea for the first time:
	say "[i]Pa, Egg, Pea[r], of course, recently topped [i][twiddle of table of self-help bestsellers and 1][r] and [i][twiddle of table of self-help bestsellers and 1][r] as the best-selling self-help book all-time in Yorpwald, at least until its promised sequels in the Tryin[']-it Trinity, [i]The MORE Theorem[r] and [i]No Guts? Go Nuts[r], appear. It combines overused success-story fables with spectacularly improbably leaps of logic to 'prove' both thinking your way to success and doing your way to success are more important than the other, and anybody who finds these to be a contradiction is just intellectually lazy.[paragraph break]The introduction explains YOU AND ONLY YOU must think up the way out of a tough situation.[paragraph break]A rudimentary flip through shows that it's full of aphorisms spouted by the main character, Gaga Pepe, and heavily invested in sustaining the personality cult of its author, Peg A. Page. You remember a suppressed review that went 'Ee! Gag! Pap!' and aren't sure of the best way to read it, if any. Though it's probably symptomatic of the times, you doubt it can help you with your specific situation[if cur-score of troves is 0], but it may help you get started[else], especially now you're started a bit[end if]." instead;

book Loather Rathole

Loather Rathole is a room in Troves. "Under the stinky tin sky, [if heat is visible]you feel the heat out on the street, but more importantly, you're feeling the loss of your super purse. You just aren't motivated to [i]race[r] after the robber and get that money back, though[otherwise]you feel nothing but bone-chilling poverty here. [i]Heat[r]. It's what you need. All you can think of[end if]. Of course, with all this lost hope, there are plenty of potholes about. Each exit looks like a hurt thru.". last-loc of troves is Loather Rathole.

the hurt thru is bounding scenery in Loather Rathole. "Every way there's a hurt thru, looking seedy and dangerous. Your sensible side knows better, but you also need to leave some way[care-hate-clue]."

understand "hurt thrus" and "thrus" as hurt thru.

instead of doing something with hurt thru:
	if action is procedural, continue the action;
	say "If you think about doing something with a hurt thru, it'll scare you away. You need to think about yourself, your situation, get emotionally involved[care-hate-clue]."

to say care-hate-clue:
	say ". [if cold is in lalaland]Race after the thief, somehow[else]find a way to generate hate[end if]"

after looking in loather rathole:
	set the pronoun it to cold;
	if heat is in loather rathole, set the pronoun it to heat;
	set the pronoun them to potholes;
	continue the action;

check looking in Loather Rathole for the first time:
	now the player has Pa Egg Pea.

check going nowhere (this is the troves general direction reject rule):
	if mrlp is troves:
		say "Nothing urgent that way. Once you figure out what you need to do, you'll figure if you need to go anywhere. Focus, focus, focus." instead;

every turn when player is in Loather Rathole (this is the Loather Rathole complaints rule) :
	say "[if heat is in Loather Rathole]You need your super purse back. But you try and fail to get stoked enough to be a race-acer![else]'Heat...' you think. Then you see red and muse [one of]'[one of]At... eh...[no line break][or]Eh... at...[no line break][in random order]' as you are not sure where you are.[or]'A...the...' your thoughts degenerate.[or]'The...a...' your thoughts degenerate, as your eyes redden.[in random order][end if]";

the Loather Rathole complaints rule is listed after the process random dialogue rule in the every turn rules.

after printing the locale description for Loather Rathole when Loather Rathole is unvisited:
	say "Skid Row, Wordski.";
	continue the action;

chapter fretful truffle

the fretful truffle is a thing. description is "It's probably a character building experience to eat it. You may learn something about how to think or what to do."

truf-warn is a truth state that varies.

spoilit is a truth state that varies. spoilit is false.

chapter potholes

the potholes are useless plural-named scenery in Loather Rathole.

instead of doing something with the potholes:
	say "The potholes symbolize lost hope. You don't need that sort of thinking right now!"

potholes are undesc.

chapter cold

the cold is flippable scenery in Loather Rathole. "[one of]Even though you wasted time watching weathercasts as a kid (boo!) and never learned to small-talk about it with important people (boo!) t[or]T[stopping]he cold's still just...cold."

a-text of cold is "RYRY". b-text of cold is "PYRY". parse-text of cold is " h[sp]a[sp]t[sp]e". cold is parse-spoilable. [cold -> heat, need to hate]

check taking cold:
	say "You have as much cold as you can take." instead;

chapter heat

the heat is flippable vanishing scenery. "The heat is nice and all, but being happy for it isn't the right emotion, here, with your possessions stolen."

a-text of heat is "RYRY". b-text of heat is "RGRG". parse-text of heat is "[sp]x[sp]a[sp]x[sp]e". heat is parse-spoilable. [heat -> care, need to race]

book Bustle Sublet

Bustle Sublet is a room in Troves. "A hopeless passe hole close to the Boorboro and Grubburg suburbs. Someone seedy owns this area, [randbla]. This messhole with its sidewalk laid askew is almost as bad as being homeless...[paragraph break]Everything seems to be going too fast for you. [if sob ever verbose is visible]Except for a stop post, and a sob ever verbose sails through the air[else]The stop post is still there, but you can deal[end if]. [if stop post is reflexive]You'll need to look around to find what to do[else]You [one of]can't see the entrance to the cellar anywhere. Perhaps you'll have to use your mind a bit[or]still can't make out the cellar entrance, yet--perhaps you could try to look back on the cellar or listen for clues[stopping][end if]."

check going nowhere in Bustle Sublet: say "The reastier arteries lead nowhere good. Stay here and figure what to do." instead;

after looking in bustle sublet:
	set the pronoun it to sob ever verbose;
	continue the action;

section reastier arteries

the reastier arteries are bounding scenery in Bustle Sublet. "They lead other places even worse, more likely. You need to focus on what to do here."

instead of doing something with reastier arteries:
	if action is procedural, continue the action;
	say "The reastier arteries will only distract you. Concentrate on what's here."

chapter useless scenery

section sidewalk

a sidewalk laid askew is useless scenery in Bustle Sublet. "You don't really have time to memorize the sidewalk's cracks."

to say more-pos:
	say "You may want to pay attention to something more positive and alive"

instead of doing something with a sidewalk laid askew:
	if action is procedural, continue the action;
	say "[more-pos].";

section ruts

the rustin ruts are useless scenery in Bustle Sublet. printed name of ruts is "rustin['] ruts". understand "rustin ruin" and "rustin/ruin" as ruts. "If you stare too long, you may get in a rut yourself."

instead of doing something with rustin ruts:
	if action is procedural, continue the action;
	say "[more-pos].";

chapter sob ever verbose

bab-lis is a truth state that varies.

the sob ever verbose is vanishing scenery in Bustle Sublet. "The sob ever verbose just rattles on and on. A sad, stupid, winding story about [one of]how Erv be SO[or]poor, poor Eve Bors[or]that Bev Oser[or]shifty Bo Evers[in random order], which makes you feel bad you don't feel bad enough about it. After a few minutes of this, you're seeing red."

after doing something with sob ever verbose:
	if sob ever verbose is not in lalaland:
		set the pronoun it to sob ever verbose;
	else:
		set the pronoun it to stop post;
	continue the action;

check taking sob ever verbose:
	say "You have as much cold as you can take." instead;

a-text of sob ever verbose is "YRRYRRY". b-text of sob ever verbose is "YRR?RR?". parse-text of sob ever verbose is "-[sp]x[sp]x[sp]?[sp]x[sp]x[sp]?".

verbose-sob-check is a truth state that varies.

check examining sob ever verbose:
	if verbose-sob-check is false:
		now verbose-sob-check is true;
		say "You wonder if the sob ever verbose might reveal TOO much information. Maybe if you figured what to do, you'd feel obliged to it. Listen closer anyway?";
		if the player yes-consents, continue the action;
		say "OK. This nag won't appear next time." instead;

chapter stop post

The stop post is reflexive scenery in Bustle Sublet. "[if sob ever verbose is reflexive]You're so distracted by it, you can't stop and see the big picture. It blocks out all but the sob ever verbose--you could look at it a while without seeing anything meaningful. You can't even remember what you just read. As if you'd lost the ability to.[else if post is reflexive]Its opts. aren't exactly tops. Apparently, though, it is made of recycled pots.[else if bee's head is reflexive]You notice an ad in red proclaiming O. Asner as Nero.[else]An ad in red for L. Clear cleaning[one of], with directions below to [one of]Evans Ave N/S[or]Weave Ave E/W[in random order][or][stopping].[end if]"

check scaning post:
	if sob ever verbose is reflexive:
		try scaning sob ever verbose instead;
	if post is reflexed:
		say "You've dealt with the post." instead;

check examining stop post when sob ever verbose is in Bustle Sublet:
	say "The sob ever verbose distracts you from getting a good look at the post. You need to find a way to step back and ignore ambient noise." instead;

check taking stop post:
	say "The post is firmly in place." instead;

check scaning stop post:
	if sob ever verbose is visible:
		try scaning sob ever verbose instead;

check fliptoing stop post:
	if sob ever verbose is visible:
		say "That should work, but you--your eyes are wandering now. You're not taking it all in. The post--and some voices you hear--are too verbose.";
		preef stop post;
		do nothing instead;

a-text of stop post is "RRYR". b-text of stop post is "?R??". parse-text of stop post is "s[sp]x[sp]o[sp]x". stop post is parse-spoilable.

every turn when player is in Boarded Roadbed:
	if what-a-bee is not reflexive or bee's head is not reflexive:
		if current action is not listening:
			say "How to get down to the cellar? The cellar. The background noise has changed...you may want to listen, too... [if what-a-bee is reflexive or bee's head is reflexive]though you may also have fun smacking the bee down a bit more.[end if][paragraph break]";

book Boarded Roadbed

Boarded Roadbed is a room in Troves. "It's odd...bare... But you know the cellar must be around somewhere. You can't quite remember where, but you can work backwards to find it, without distractions."

chapter THE BEE and 2 solutions

section bee proper (believe)

the what-a-bee is a reflexive privately-named thing in Boarded Roadbed. printed name of what-a-bee is "[if bee's head is reflexive and what-a-bee is reflexive]evil bee[else if bee's head is reflexed and what-a-bee is reflexed]live bee[otherwise]vile bee[end if]"

after looking in boarded roadbed:
	set the pronoun it to what-a-bee;
	set the pronoun her to what-a-bee;
	continue the action;

initial appearance of what-a-bee is "[one of]An[or]The[stopping] [what-a-bee] floats here[if bee's head is reflexive], emitting a snore[else], silent[end if]."

a-text of what-a-bee is "RYRYYRY". b-text of what-a-bee is "[if bee's head is reflexed]RYPYYRG[else]RYRYYRG[end if]". parse-text is "[if bee's head is reflexed]x[sp]-[sp]l[sp]-[sp]-[sp]x[sp]e[else]x[sp]-[sp]x[sp]-[sp]-[sp]x[sp]e[end if]"

check taking what-a-bee:
	say "I'll be stingy. Better me than the bee, eh?" instead;

Include (-
	has transparent animate
-) when defining what-a-bee.

description of what-a-bee is "[if bee's head is reflexed and what-a-bee is reflexed]It looks utterly defeated, but at least it didn't die[otherwise if bee's head is reflexive and what-a-bee is reflexive]It seems to know you want to go down to the cellar. Bees can smell that, especially an EVIL BEE[one of]. One thing's for sure, no free beers while this bee's freer[or][stopping][otherwise]It's buzzing a bit, but it's not moving around so fast. You're not threatened by it any more. You could probably sneak past it[end if][if bee's head is reflexive]. Bizarrely, it has NO EARS. And it's a bit red where the ears should be[end if][if bee's head is reflexive or what-a-bee is reflexive]. It seems pretty [vile-evil][end if]."

to say vile-evil:
	if bee's head is reflexive and what-a-bee is reflexive:
		say "evil";
	else if bee's head is reflexed and what-a-bee is reflexed:
		say "live";
	else:
		say "vile";

[the below is really awful but I don't see a better way]

understand "bee/evil" and "evil bee" as what-a-bee when bee's head is reflexive and what-a-bee is reflexive.
understand "bee/vile" and "vile bee" as what-a-bee when bee's head is reflexive and what-a-bee is reflexed.
understand "bee/vile" and "vile bee" as what-a-bee when bee's head is reflexed and what-a-bee is reflexive.
understand "bee/live" and "live bee" as what-a-bee when bee's head is reflexed and what-a-bee is reflexed.

check scaning what-a-bee:
	if what-a-bee is reflexive and bee's head is reflexive:
		if a random chance of 1 in 2 succeeds:
			say "The bee pokes her head in so near and disrupts your settler's reading.";
			try scaning bee's head instead;
	if what-a-bee is reflexed and bee's head is reflexive:
		say "Nothing shows up until you get to the bee's head.";
		try scaning bee's head instead;
	if bee's head is reflexed and what-a-bee is reflexed:
		say "The bee rests, silent, and so does your settler." instead;

after fliptoing what-a-bee:
	if bee's head is reflexed:
		min-up;
	else:
		say "[bee-buzz-less].";
	continue the action;

to say bee-buzz-less:
	say "Now that the bee's buzzing less, you can hear people giving directions, and maybe you can listen in. Or concentrate on the cellar"

section bee's head (reason)

the bee's head is part of the what-a-bee. the bee's head is reflexive. description is "[if bee's head is reflexed]It appears a bit duller now, after you reasoned so well against it[else]It shines brightly, as if it is ready for a battle of wits[end if]."

a-text of bee's head is "RYYRYR". b-text of bee's head is "RYYRYR". parse-text of bee's head is "x[sp]-[sp]-[sp]x[sp]-[sp]x".

instead of taking bee's head:
	say "You're not fast enough to behead the bee's head."

after fliptoing bee's head:
	if what-a-bee is reflexed:
		min-up;
	else:
		say "[bee-buzz-less].";
	continue the action;

chapter cellar door (after bee dispatched)

the cellar door that must be here somewhere is vanishing scenery in Boarded Roadbed. "You can't really examine it if you don't know where it is."

a-text of cellar door is "RYRYRR". b-text of cellar door is "RGRYRR". parse-text of cellar door is "x[sp]e[sp]x[sp]a[sp]x[sp]x".

instead of doing something to cellar door:
	if current action is taking or current action is opening or current action is closing:
		say "But you're not sure where the door is, so you can't do that." instead;
	if action is procedural, continue the action;
	say "No, you need to do something to find the cellar. Since you can't quite remember...";

derived is a truth state that varies.

after fliptoing cellar door:
	if the player's command includes "derive":
		now derived is true;
	if bee's head is reflexive or what-a-bee is reflexive:
		poss-d;
	continue the action;

check fliptoing cellar door:
	if what-a-bee is off-stage:
		say "You haven't forgotten anything important, yet." instead;
	if bee's head is reflexive and what-a-bee is reflexive:
		say "Darn it, that should work. But you can't focus on anything with that evil bee buzzing around you right now.";
		preef cellar door;
		the rule succeeds;

book Drain Nadir

Drain Nadir is a room in Troves. "You notice trappings of spiritual and material poverty: a picture of a sad pier, a box of diapers, and a spider crawling[if diapers are reflexed]. Though you're not quite held back by them so much. You want to break out of the funless fulness of Drag-grad, here, to [i]lead[r][else]. They all point to a rock bottom you haven't hit yet, but it may be necessary now[end if][if sister tressi is in drain nadir]. A likeness of Sister Tressi also stares down at you, guilt-tripping you into feeling you didn't do nearly as much as you could or should have[end if]."

chapter adeiprs

[?? small clue later with statue]

the picture of a sad pier is auxiliary scenery in Drain Nadir. "It is a warding drawing of what not to wallow in: solitude so dilute in an old suite. According to [i]Pa, Egg, Pea[r], if it were not marked as such, it should be illegal."

a-text of sad pier is "RYRRYYR". b-text of sad pier is "RYRPYYP". parse-text of sad pier is "x[sp]-[sp]x[sp]p[sp]-[sp]-[sp]r".

the box of diapers is vanishing scenery in Drain Nadir. "The diapers are a symbol of a new rebirth by starting from nothing, or something. At least, you hope they are."

a-text of diapers is "RYRRYYR". b-text of diapers is "PYRPYYR". parse-text of diapers is "d[sp]-[sp]x[sp]p[sp]-[sp]-[sp]x".

a spider is scenery in Drain Nadir. "You're don't know whether to crush it or even think 'I spared a spider.'"

a-text of a spider is "RYRRYYR". b-text of a spider is "RYRRYYP". parse-text of a spider is "x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]r".

book boredom bedroom

Boredom Bedroom is an innie room in Troves. "This is no bro-dome--it leaves you feeling all me, BROOD. Not much of a dump, um, pad. Well, it beats Get-a-Cot Cottage, or Drag-Grad."

chapter how to pre-deal

section lobster

an extra fancy lobster meal is in Boredom Bedroom. description is "Oh, man, it looks awesome. You wonder if you really deserve to eat it. If you built yourself up the right way, I'm sure you could chow down[if ME ARTS is in lalaland]--though you are feeling confident enough, having dealt with the ME ARTS[end if].". fancy lobster meal is vanishing. initial appearance of lobster meal is "A meal's on the desk. Lobster! You may or may not have the confidence to eat it."

a-text of lobster is "RYRRRYR". b-text of lobster is "RGRPPGP". parse-text of lobster is "x[sp]o[sp]x[sp]s[sp]t[sp]e[sp]r". lobster is parse-spoilable.

after fliptoing lobster:
	if ME ARTS is in Upscale Capsule, now ME ARTS is LLPish;
	continue the action;

instead of eating lobster meal:
	say "You don't quite feel you deserve to eat it, yet.";

instead of taking lobster meal:
	say "A big executive like you shouldn't worry about procedural details like taking something before eating it."

section ME ARTS

The ME ARTS is vanishing scenery in Boredom Bedroom. "It's labeled MR. EAST STREAM TAMERS. It's really weird and abstract, but maybe you can get the hang of it. It shimmers based on how you stare at it[if ME ARTS is not reflexed and lobster is in lalaland]. You doubt you need to do anything with it, since you had that delicious lobster, but then, it might be one more overachievement[end if]."

a-text of ME ARTS is "RYRRYR". b-text of ME ARTS is "??RRYR". parse-text of ME ARTS is "?[sp]?[sp]x[sp]x[sp]-[sp]x".

after fliptoing ME ARTS:
	if lobster is in Upscale Capsule, now lobster is LLPish;
	continue the action;

instead of doing something to ME ARTS:
	if action is procedural, continue the action;
	say "It doesn't need to be physically futzed with[if ME ARTS is in Boredom Bedroom]. In fact, you've already gotten use out of it[end if].";

chapter ltb

ltb is a privately-named vanishing thing in Boredom Bedroom. "A copy of LEAD[one of], the bestseller Pa, Egg, Pea dethroned,[or][stopping] lies here.". description of ltb is "It's by Dale Elda and Leda Adle, with both the last names in red. You skim it, noting the exploits of [randbla], but it doesn't soak in, yet. You aren't in the right frame of mind. Just from the cover, and the authors['] names, you bet the writing is kind of forced.[paragraph break]But if you managed not to worry about style nitpicks, it might help you focus and move on.". printed name of ltb is "LEAD". [ ltb = lead the book]

a-text of ltb is "RYYR". b-text of ltb is "???R". parse-text of ltb is "x[sp]e[sp]a[sp]x". ltb is parse-spoilable.

understand "copy" and "book" and "lead" as ltb when player is in Boredom Bedroom.

does the player mean doing something with ltb when the player is in Boredom Bedroom: it is likely.

instead of taking the ltb:
	say "You already have one motivational book. Perhaps you need to find the right way to soak up LEAD's essence."

chapter lager

The can of Large Regal Lager is a vanishing LLPish thing in Boredom Bedroom. description is "It has a picture of someone smiling as he chugs a can of Large Regal Lager--the LARGE being black and above the red Regal Lager below. A warning on the can says that important people drinking too many of these is as bad for the economy as people with nothing better to do not drinking enough. Also there's a rubbish story about how the beer is brewed."

after fliptoing lager:
	set the pronoun it to ltb;
	continue the action;

check opening Large Regal Lager:
	try drinking Large Regal Lager instead;

the rubbish story is part of the Large Regal Lager. the rubbish story is cluey and auxiliary. description is "[one of]The story on the lager is in red and about how Ergal Agler brewed the first batch long ago. I'll spare the details, but it kills almost as many brain cells as if you'd drunk it[or]Your eyes gloss over all but the red ERGAL AGLER[stopping]."

a-text of rubbish story is "RRYRY". b-text of rubbish story is "RRYRY". parse-text of rubbish story is "x[sp]L[sp]-[sp]x[sp]-".

instead of scaning rubbish story:
	try scaning Large Regal Lager instead;

a-text of lager is "RRYRY". b-text of lager is "RRYRY". parse-text of lager is "x[sp]x[sp]-[sp]x[sp]-".

instead of drinking lager:
	say "One sip is--nope. Next, a liter, retail. Though it's not as nasty as Camelot Eco-Malt, it'd make your liver viler and send you to Bum Lane seeing blue men.[paragraph break]Though you can't bring yourself to throw it out. Maybe you are not looking at things the right way.";

instead of eating lager:
	say "It drinks like a meal, you're sure, but you're too important now to risk brain cells to find out.";

instead of taking lager:
	say "No, touching or holding a can almost always leads to drinking from it. You may even be able to ignore the Large Regal Lager altogether. But you will need to steel yourself before taking it."

book Browse Bowers

Browse Bowers is an innie room in Troves. "It's very look-don't-touch here, like that dour tan rotunda off to the side and, well, the shmoe homes you can look out on. The ones you're better than now, you hope.[paragraph break]There's not much to do except stare at a brochure just lying around. But oh, what a brochure!".

after fliptoing ltb:
	set the pronoun it to brochure;
	set the pronoun them to browse bowers;
	continue the action;

chapter shmoe homes

the shmoe homes are bounding scenery in Browse Bowers. "Ugh! You're sure they're okay for people less motivated than you, and they USED to be okay for you. But you can do better. Much better! You know you can!"

instead of doing something with shmoe homes:
	if action is procedural, continue the action;
	say "You DON'T want to do anything with the shmoe homes except let out oh-mes at the thought of ever being associated with them. The brochure may suggest a way to move beyond them for good."

chapter dour tan rotunda

the dour tan rotunda is scenery in Browse Bowers. "It looks sad and neglected. It might've been really big before the Browse Bowers, bigger and slicker, came along--say, before Version 4 of this game."

instead of doing something with the dour tan rotunda:
	if action is procedural, continue the action;
	say "The rotunda has not kept up with progress. Do not worry about it.";

chapter brochure

a brochure is vanishing scenery in Browse Bowers. "[one of]'Got here? No debt to bend? Go there!'[paragraph break][or][stopping][randbla]. [one of]Obviously no un-go-ish housing here. [or][stopping]The page-end reads:[paragraph break]RESIDE! RESIDE! RESIDE! - Sir Dee."

a-text of brochure is "RYRYRY". b-text of brochure is "R???RG". parse-text of brochure is "x[sp]e[sp]s[sp]i[sp]x[sp]e". brochure is cheat-spoilable.

instead of taking brochure:
	say "No. What would the next person here read?"

book Econ Cone

Econ Cone is a room in Troves. printed name of econ cone is "Econ-Cone". "You've reached the recent center of the econ-cone, thus called because the godlings['] lodgings in the center forms the top of a cone of buildings. It's quieter here than the rathole or roadbed or even the bowers. Less rusty din, more industry (it's un-dry. Sturdyin['].)[paragraph break]While save aves branch out each way, the statue nearby looks so much more important! [if rivets is reflexive and praise is reflexive]Maybe it will help you motivate yourself even more[else if rivets is reflexive or praise is reflexive]Now you're super-motivated, maybe you need to have the right sort of think[else]However, it's taught you all it could, so maybe you can move on--or in--to the godlings['] lodgings[end if]."

understand "econ-cone" as Econ Cone.

save aves are bounding scenery in Econ Cone. "They lead out every way to less affluent and powerful places."

instead of doing something with save aves:
	if action is procedural, continue the action;
	say "The save aves are good enough for other people, but not you. You want the best!"

check going inside in Econ Cone:
	say "You can't just walk in[if statue is reflexed or rivets are reflexed] even with your desire at its level[end if]! You need the right sort of thinking. You have not achieved it yet. Your eyes turn [if astute statue is examined]back [end if]to the astute statue." instead;

after looking in econ cone:
	set the pronoun it to astute statue;
	set the pronoun him to astute statue;
	if pernod is in econ cone, set pronoun it to pernod;
	continue the action;

chapter godlings['] lodgings

understand "skyline" as godlings' lodgings

the godlings' lodgings are plural-named scenery in Econ Cone. "It's built by [trev] and is emblazoned with his twin motto, PROPERTY IS PROSPERITY and ADVERTS-STARVED? READ TVS. It doesn't let up on opulent. You remember reading a scientific study that just wanting to work there five minutes a day increases productivity by 25%."

understand "godling/lodging" and "godlings/godling lodging/lodgings" as godlings' lodgings.

after fliptoing godlings' lodgings:
	consider the region-knock rule;
	continue the action;

check fliptoing godlings' lodgings:
	if praise is reflexive and rivets are reflexive: [stri is false and asp is false:]
		say "You sit and ponder for a bit. But it is just general complaining. The whole mish-mosh about people approximately as unfortunate as you. No wish for [i]praise rivets[r] you enough for you to ponder positively." instead;

check scaning godlings' lodgings:
	if pernod is off-stage:
		say "The godlings' lodgings shows nothing. Which is sort of a relief, though it probably means you haven't found what you need to focus on. Perhaps something will come along that you can focus on." instead;
	else:
		say "Your settler seems to give the same reading for the Pernod as for the lodgings.";
		try scaning pernod instead;

chapter astute statue

The astute statue is uncluing scenery in Econ Cone. "[one of]The statue is, of course, of [trev] and built by Su Tate. It's thirty feet tall and a decent likeness, except it's a shocking red, so nobody can miss it, and he has a full head of hair instead of that ridiculous comb-over. Also, his arm is around air, because when this statue was initially commissioned, his third wife demanded to be part of it. She was removed when he remarried, replaced by his fourth wife, who divorced him when she was portrayed as shorter than he was.[or][trev] is unchanged, himself, just waiting for you to want to be like him.[stopping][paragraph break]Rivets lie at the bottom of the statue in some sort of pattern[one of]. It is not a statue of limitations, for sure[or][stopping]."

Include (-
	has transparent talkable
-) when defining astute statue.

understand "trevis/vister" and "trevis vister" as astute statue.

the rivets are part of the statue. description is "[one of]After looking for a few seconds, you realize t[or]T[stopping]he rivets spell out PRAISE. They're probably Vister's idea of art, to show there's more than one way to want to be like him. Or want to want to be like him.". the rivets are reflexive.

rivets-first is a truth state that varies.

check objhinting rivets:
	if rivets-first is false and praise is reflexive:
		try objhinting praise instead;
	if rivets are reflexed and praise is reflexive:
		try objhinting praise instead;
	if rivets are reflexed and praise is reflexed:
		all-say "You learned all you could from the statue." instead;

the praise is privately-named vanishing scenery in Econ Cone. praise is undesc. printed name of praise is "PRAISE".

understand "iarp" as praise when debug-state is true.

a-text of praise is "YRRYRY". b-text of praise is "YRRGRG". parse-text of praise is "a[sp]x[sp]x[sp]i[sp]x[sp]e". praise is cheat-spoilable.

before scaning rivets (this is the switch to praise rule):
	if rivets are reflexed and praise is reflexive:
		try scaning praise instead;

instead of doing something with rivets:
	if action is procedural, continue the action;
	if current action is taking:
		say "Petty theft is not big thinking! You'd do better to take a message from the rivets.[paragraph break]Plus, you don't have the right tool." instead;

check scaning statue for the first time: [let statue be the first thing you scan]
	say "You're pretty sure Trevis Vister did his best to make his statue couldn't be melted down by some silly mind-game, but maybe the settler will turn up something...hmm, nothing, except for the rivets.";

check scaning statue:
	try scaning rivets instead;

[?? unlock praise/rivets difference]
a-text of rivets is "RRRYRY". b-text of rivets is "RRRYRY". parse-text of rivets is "x[sp]x[sp]x[sp]i[sp]x[sp]e".

after fliptoing praise:
	if rivets are reflexive, now rivets are llpish;
	continue the action;

after fliptoing rivets:
	if praise is reflexive, now praise is llpish;
	continue the action;

chapter pernod

the bottle of Pernod is a vanishing thing. "A broken bottle of [if label is in lalaland]N-E-Prod[else]Pernod[end if] champagne lies here. There's a card that seems glued to it, with some writing on it."

a-text of pernod is "RYRRYR". b-text of pernod is "[if label is part of pernod]P[else]R[end if]YRRYR". parse-text is "[if label is part of pernod]p[else]x[end if][sp]o[sp]x[sp]x[sp]e[sp]x".

check reading pernod:
	try reading card instead;

check taking bottle of Pernod:
	say "The jagged glass would cut your hands, or your super purse's space-capes." instead;

after fliptoing when location of player is Econ Cone (this is the Pernod appears on first statue success rule):
	if noun is praise or noun is rivets:
		if pernod is off-stage:
			say "Your concentration is broken by shattering glass! When you turn around, you notice the person who originally gave you the Peg A. Page book. He has been escorted out by security. They hand him a bottle. There's an argument, he smashes the bottle, and he runs away. Perhaps this is your chance, to take his place now that he has burned out!";
			now pernod is in Econ Cone;
			set the pronoun it to pernod;
	continue the action;

after fliptoing pernod:
	if rivets are reflexive or praise is reflexive:
		poss-d;
	consider the region-knock rule;
	continue the action;

description of bottle of pernod is "It says [if label is in lalaland]N-E-Prod below where the label was[else]PERNOD on the label, which looks a bit loose[end if]. There's also a card you could read."

understand "champagne" as Pernod.

understand "prod/neprod/n-e-prod" and "bottle of prod/neprod/n-e-prod" as Pernod.

section label

the label is part of the bottle of pernod. description of label is "It says PERNOD."

check taking the label:
	say "The label comes off to reveal a much less hoity-toity label: the generic N-E-PROD is the [i]REAL[r] manufacturer! It's in red letters, too.";
	now label is in lalaland instead;

check examining the label:
	say "It looks like you could TAKE it off! You wonder if this bottle is a fake. It says PERNOD, but there's also a card tied to the bottle." instead;

instead of scaning the label:
	try scaning the pernod instead;

section card

the card is part of the bottle of Pernod. description of card is "It's got red writing on it that you could read."

check taking the card:
	say "It's glued to the Pernod." instead;

a-text of card is "RYRRYR". b-text of card is "RYRRYR". parse-text is "x[sp]o[sp]x[sp]x[sp]e[sp]x".

to say trev:
	say "Trevis Vister[one of], Ph.D in Life Success[or][stopping]";

book Upscale Capsule

Upscale Capsule is an innie room in Troves. "From the nerf fern to the tan ivy vanity[if divorces is visible],[else] and[end if] Desk-Sked[if divorces is visible], and DIVORCES magazine[end if] on your desk to the plasm lamps above, this FiefCo Office conforms to the opulent/no let-up deco-code. Including the double-plus-secure door out[if song is visible].[paragraph break]Eddie C.[']s song[one of][or], I'd Cede,[cycling] echoes, still, and the playbill is on the desk, too[else]. A shaker of salt sits on the vanity, too[end if]."

after looking in Upscale Capsule:
	if noise is in Upscale Capsule, set the pronoun it to noise;
	continue the action;

section order the flips

check fliptoing when player is in Upscale Capsule and noise is in Upscale Capsule (this is the order Upscale Capsule flips rule): [note that this trumps check fliptoing song]
	if noun is song:
		say "First things first: you need to outlast that noise.";
		preef salt;
		do nothing instead;
	if noun is not noise:
		say "Thud, thud, thud. You might be able to do that properly later, but not now, with the noise distracting you from your new job listed on your vanity.";
		preef noun;
		do nothing instead;

chapter sister tressi

Sister Tressi is proper-named vanishing scenery in Upscale Capsule. "Everyone knows Sister Tressi and her catch phrase, 'Set, Sir!' to people both emotionally and morally sluggish. She's very compelling."

a-text of sister tressi is "RYRYRR". b-text of sister tressi is "RY?Y?R". parse-text of sister tressi is "R[sp]?[sp]x[sp]?[sp]x[sp]x".

instead of doing something with sister tressi:
	if action is procedural, continue the action;
	say "Sister Tressi can't be moved by normal means. You sort of want to fight mentally against her, but you're not sure how." instead;

after fliptoing sister tressi:
	now Blamer Balmer is LLPish;
	continue the action;

chapter marble blamer

Blamer Balmer is proper-named vanishing scenery in Upscale Capsule.

a-text of Blamer Balmer is "RYRRRY". b-text of Blamer Balmer is "R?RRRY". parse-text of blamer balmer is "x[sp]-[sp]x[sp]x[sp]x[sp]-".

after fliptoing Blamer Balmer:
	now sister tressi is LLPish;
	continue the action;

chapter Trance Nectar

the Trance Nectar is a vanishing thing. "You notice some trance nectar here. It's totally different from the Large Regal Lager, which keeps you from being productive.". description is "It's guaranteed to keep you focused on what you need to do, if not thrilled about it."

check drinking trance nectar: say "No. That can't be it. You want a way to exit, to say this is not me." instead;

a-text of trance nectar is "RYRYRR". b-text of trance nectar is "R??YRR". parse-text of trance nectar is "x[sp]?[sp]?[sp]-[sp]x[sp]x".

[clap back black cap ??]

chapter silly Upscale Capsule scenery

section nerf fern

The nerf fern is useless scenery in Upscale Capsule.

description of nerf fern is "It saves time, since you don't have to water it. But you can't see how it gives any new ideas."

instead of doing something with the nerf fern:
	if current action is examining or scaning:
		continue the action;
	say "Don't futz with it. It's there for ambiance. The sort of ambiance people less busy than you care about.";

section lamps

the plasm lamps are plural-named scenery in Upscale Capsule. "They start to inspire a Psalm, until you remember you're a busy [guy] with a job to do."

to say guy:
	say "[if player is female]wo[end if]man";

instead of taking lamps:
	say "That'd be expensive and toxic."

section secure door

the secure door is scenery in Upscale Capsule. "It isn't even to be thought about."

instead of doing something with the secure door:
	if current action is opening:
		say "[if noise is in Upscale Capsule]And let that person in? No[else]You have too much to do. No sneaking out[end if]!" instead;
	if action is procedural, continue the action;
	say "You don't even want to think about that door with all you have to do."

chapter desk, checklist and vanity

the big important desk is scenery in Upscale Capsule. "Made of nice to notice eco-tin, it has a Desk-Sked (more popular and efficient than the [randbla]) on it that you could read all day."

the Desk Sked is scenery in Upscale Capsule. printed name of Desk Sked is "Desk-Sked". understand "desk-sked" as desk sked

does the player mean doing something with the big important desk: it is very likely.

description of Desk Sked is "You browse some steno-notes on your Desk-Sked: [randbla]"

check going east in Upscale Capsule:
	say "You couldn't just run out on your company and your responsibilities like that! You would engage to leave a note or something first. And, of course, you would need to mentally prepare yourself to[if salt is visible]. And you'd need to have proved yourself. You haven't, yet[otherwise]. I guess you could leave now, if you did the right thing, first[end if]." instead;

the tan ivy vanity is auxiliary scenery in Upscale Capsule. "[one of]It's utterly useless and tacky. I mean, ivy is either green or, if it's dying, brown. [or][stopping][if noise is in Upscale Capsule]There's lots of red text:[paragraph break][fixed letter spacing]  GOREN I. REGNIO[line break]Ergnio-Onregi Region[r][paragraph break]So that's who you took over from. You sense you need to...marginalize Goren's memory somehow.[else]It's now engraved CEO FOR US? OF COURSE![end if]"

instead of opening vanity:
	say "It's not a case sort of vanity. It's just a useless sort of vanity.";

instead of scaning vanity:
	say "You scan around the vanity for clues.";
	if noise is in Upscale Capsule:
		say "You note the noise and that you can read the vanity[if vanity is examined] again[end if].";
		try scaning noise instead;
	if lobster is in Upscale Capsule and ME ARTS is in Boredom Bedroom:
		say "Your settler picks up a signal when it moves to the lobster.";
		try scaning lobster instead;
	if salt is in Upscale Capsule:
		say "Your settler picks up a signal when it moves to the salt.";
		try scaning salt instead;
	if trance nectar is in Upscale Capsule:
		say "Your settler picks up a signal when it moves to the trance nectar.";
		try scaning trance nectar instead;
	say "You weren't able to find any. But there must be something to do!"

chapter the noise (IGNORE)

every turn while player is in Upscale Capsule (this is the region-knock rule):
	if noise is in Upscale Capsule:
		say "[one of]'Er...go in?' cries a voice not worth your attention[or]You hear the voice cry '[one of]Erin! Go[or]Go, Erin[cycling]!' which makes you see red. YOU'RE in charge here[or]Your 'visitor' seems to be plotting... you hear 'One: rig...' but you tune the rest out, seeing red[or]'No! I...erg!' your adversary rages[in random order].[paragraph break]If only you could tune that out!";

the noise is vanishing scenery in Upscale Capsule. "It's noise from the person you locked out."

a-text of noise is "YRRYRY". b-text of noise is "YRRYRY". parse-text of noise is "-[sp]x[sp]x[sp]-[sp]x[sp]-".

after fliptoing noise:
	now tan ivy vanity is clue-used;
	continue the action;

instead of doing something with the noise:
	if action is procedural, continue the action;
	if current action is objasking about or current action is asking about:
		say "You don't want to step down from a strong negotiating point."

chapter DIVORCES magazine

DIVORCES Magazine is vanishing LLPish scenery in Upscale Capsule. "[one of]Its motto: 'A hipper, happier paper. Hi!' You note all sorts of lurid articles and features about depravity in high society and its 'wonderful' fashion, too. One[or]Another 'worldly' article[stopping] is [randbla]"

a-text of divorces is "RYRRYRYR". b-text of divorces is "PGRRYRGR". parse-text of divorces is "d[sp]i[sp]x[sp]x[sp]o[sp]x[sp]e[sp]x".

instead of doing something to DIVORCES:
	if current action is taking:
		say "No. It's best read briefly, if at all." instead;
	if action is procedural, continue the action;
	say "DIVORCES is mostly for reading, mostly, unless you have an insight otherwise." instead;

chapter St Al Salt

instead of doing something to the salt:
	if action is procedural, continue the action;
	if current action is eating, say "That would be potentially lethal. And gross." instead;
	if current action is putting on:
		ignore the can't put what's not held rule;
		if second noun is lobster, say "That'd ruin it." instead;
		say "The salt is there for ornamental and inspirational purposes. Plus, there's nothing here to eat[if lobster is visible], except the lobster, which doesn't need it[end if]." instead;
	say "Your mind stalls at what to do with the salt, or how to ignore it."

the St Al Salt is vanishing scenery in Upscale Capsule. printed name of salt is "St. Al Salt".

understand "shaker" and "salt shaker" and "shaker of salt" as St Al Salt

description of salt is "St. Al Salt is, from what you are reading, engineered to maximize your productivity from (motivational stress * remaining years,) much better than other brands. It helps you preserve yourself, sort of. It is emblazoned with a picture of St. Al, recently enshrined as Yorpwald's patron saint of Not Faffing Around."

a-text of salt is "RYRR". b-text of salt is "R?R?". parse-text of salt is "x[sp]a[sp]x[sp]t". salt is parse-spoilable.

section Eddie's Song

Eddie's song is reflexive scenery. "Eddie C. warbles on."

a-text of eddie's song is "RYRYRY". b-text of eddie's song is "RYPYPG". parse-text is "x[sp]e[sp]x[sp]i[sp]x[sp]e". eddie's song is parse-spoilable.

instead of examining song:
	try listening instead;

section troend1 and troend2 dummy variables to flip

troend1 is privately-named useless scenery. troend1 is undesc. printed name of troend1 is "I'd Cede (Eddie C.)"

volume presto

last-loc of Presto is Grey Gyre.

section CURST CRUST

the curst crust is a thing. description of crust is "[one of]It's probably from Curt's, the worst bakery in the world. [or][stopping]You have about [swears in words] bites of this disgusting thing left to eat."

understand "bread" as curst crust.

swears is a number that varies. swears is usually 2.

section crust parsing

crust-warn is a truth state that varies.

track-crust is a truth state that varies.

every turn when player has curst crust and mrlp is presto and track-crust is true:
	increment swears;
	try eating curst crust;

section turn rules

every turn when mrlp is presto and Rand is eager (this is the Leo-Rand lackey rule):
	if location of player is nowt town:
		if Leo was visible:
			say "'Oo Boss. We ain't up to dat maze. It's makes us fink too much!' Leo and Rand wait outside.";
	otherwise:
		if location of player is adjacent to location of Leo:
			if Leo is not dismissed:
				if location of player is saps' pass and location of hogs is saps' pass:
					say "Leo and Rand follow, but they're not quite as big as the hogs. You may have to be sneaky, here.";
				else:
					say "Leo and Rand lug after[one of], grateful[or], no fear glut[or], no flat urge[stopping].";
				move Leo to location of player;
				move Rand to location of player;
				move wzup to location of player;

chapter loading

sloading is an action applying to two things.

understand the command "load [something] with [something]" as something new.

understand "load [something] with [something]" as sloading.

rule for supplying a missing second noun when sloading:
	if noun is stapler:
		now second noun is staple;
	if noun is staple:
		now noun is stapler;
		now noun is staple;
	if noun is popgun:
		if player has dart:
			now second noun is dart;

does the player mean sloading the popgun: it is likely.

carry out sloading:
	try inserting second noun into noun instead;

chapter shooting

shooting is an action applying to one thing.

understand the command "shoot [something]" as something new.

understand "shoot [something]" as shooting.

understand the command "fire [something]" as something new.

carry out shooting:
	if player does not have popgun:
		say "You have no gun." instead;
	if noun is lamb:
		say "Utter meanie. Maybe just scare it with a gun sound." instead;
	if popgun does not contain dart:
		say "Your grunty gun try fails without ammo." instead;
	if noun is hoop:
		say "But you have no basketball. I mean, the dart won't knock the hoop off." instead;
	if noun is hump:
		say "It's more a psychological barrier than a physical one." instead;
	if noun is player:
		say "You try for self-harm but your arm flesh fails you." instead;
	if noun is popgun:
		say "Try shooting whomever or whatever you want to shoot." instead;
	if noun is hoop:
		say "Shooting hoops is only a figurative expression." instead;
	if noun is Leo and Rand is off-stage:
		say "He backpedals out of range, looking a bit scared. Perhaps you can find a better target to shoot, later." instead;
	if noun is zany meter:
		say "That would just be destructive. The zany meter is there to help you." instead;
	if noun is maze walls:
		say "Too sturdy. There must be a better way for them to tumble down." instead;
	if noun is Rand or noun is Leo:
		if noun is fightin:
			say "That'd just make him madder." instead;
		if noun is Leo and Rand is fightin:
			say "That wouldn't help you beat Rand, and if it did, it'd make Leo madder." instead;
		say "After saying Whassup to him? That's be cold. Plus, [if noun is Rand]Leo[else]Rand[end if] would avenge his friend." instead;
	if noun is m-l or noun is l-m or noun is Tom Alvez:
		say "They aren't preventing you from trying to complete the maze." instead;
	if noun is dumpster:
		say "Pointless vandalism." instead;
	if noun is ether:
		say "You can't see through it. Plus, the popgun is not a gun of un-fog." instead;
	if noun is nowt town:
		say "Brute force is a better way to get maze hints." instead;
	say "Less shooting, more soothing. You'll be prepared when there is a fight." instead;
	the rule succeeds;

chapter pouring

pouring it into is an action applying to two things.
understand the command "pour [something] in/into/on [something]" as something new.
understand "pour [something] in/into/on [something]" as pouring it into.

chapter interjections

to decide whether (int - a thing) is interjective: [this is for hinting in presto: do you think something, or envision something?]
	if int is lamb or int is hump or int is star, decide yes;
	if int is dart or int is plebe or int is boing, decide yes;
	if int is leo or int is rand or int is hoop, decide yes;
	if int is volt maze or int is maze walls or int is ether, decide yes;
	if int is keys or int is hogs or int is log ons, decide yes;
	if int is alert or int is ought, decide yes;
	decide no;

book Grey Gyre

Grey Gyre is a room in Presto. "It's windy here, but nothing dangerous, and the place is just an unappetizing grey all around. It's calmer but burnt to the south, and you see a way east, too[if hump is not visible], as well as west over the hump you cleared[end if][if volt maze is in Grey Gyre]. You see a path to what looks like a maze to the north--a maze entry zany meter is nearby, too[else if ether is visible]. The maze entrance north has been replaced by ether[otherwise]. [ether-check]ou can go north[end if][if hump is in gyre].[paragraph break]A hump to the west looks much more intimidating than it should be[end if]."

does the player mean doing something with the volt maze when the player is in grey gyre: it is very likely.

to say ether-check:
	if saps' pass is visited:
		say "With the ether cleared, y";
	else:
		say "Y"

the ether is vanishing scenery. "It's trickier to see through than moist-o-mist. [if ether-try is true]Those three bums who did the business on you must be hiding, still[else]Anyone or anything could be waiting[end if]."

check entering ether:
	try going north instead;

a-text of ether is "RRYRY". b-text of ether is "RRYRY". parse-text of ether is "x[sp]x[sp]-[sp]x[sp]-". ether is cheat-spoilable.

before fliptoing:
	if noun is maze walls:
		if cur-score of presto < 3:
			say "You're not messing around! You see the best way to destroy the maze, and you're going for it.[line break]";
			continue the action;
	if noun is maze walls or noun is n-t-air:
		if Nowt Town is unvisited:
			say "No point actually going through the maze when you can destroy it.[line break]";

section maze entry zany meter

the maze entry zany meter is scenery in Grey Gyre. "It's like one of those things you hit with a carnival hammer, but you don't have any hammer. Bunched at the bottom are three bummer options for, presumably, the zaniest way to solve the maze.[paragraph break]0: be too scared to enter the maze[line break]0: run through the maze[line break]0: run through the maze again[line break]1: ignore and reject Nowt Town[line break]2: (written in red) congratulate yourself for solving the E-Z Ol['] Av(TM) Volt Maze.[line break]3: (written in red again) congratulate yourself for solving the E-Z Ol' Av(TM) Volt Maze WITHOUT EVEN GOING THROUGH IT OR ASKING FOR HINTS. "

instead of scaning zany meter:
	try scaning volt maze instead;

chapter lamb

The lamb is a vanishing LLPish female animal in Grey Gyre. "A poor lost lamb seems stuck here. She's too frightened to move."

check taking lamb:
	say "It's not a bit lamb, but it wouldn't fit in your super purse." instead;

a-text of lamb is "RRYR". b-text of lamb is "RRYR". parse-text of lamb is "x[sp]x[sp]a[sp]x". lamb is cheat-spoilable.

description is "Cute and adorable and so terrified at being away from home she's petrified with fear. Maybe you could scare her home."

check inserting something into mechanism:
	say "(You mean, loading it next to the mechanism)[line break]";
	try inserting noun into popgun instead;

check going east in Grey Gyre:
	if plebe is visible:
		say "'Atten-HUT!' The taunt, then--taut, the plebe blocks your way east. '[if player is female]Stop, Ma'am! Ammo past!'[else]You, sir! Is your...'[end if][line break]You'll need to show your authority [if star is worn]and not just with that star. Probably the right word[else]with probably some sort of medal[end if][if Leo is visible].[paragraph break]'You too, booby and yobbo!'[else].[end if]" instead;

ether-try is a truth state that varies.

check going north in Grey Gyre:
	if cur-score of presto < 3:
		say "You don't fully have your bearings here yet. You're not up to walking through a maze. Perhaps you need to figure how to deal with things before entering the maze." instead;
	if ether is in grey gyre:
		say "[one of]You walk forward. That dangerous looking ether? It[if ether-try is true]'s still hiding[else] hid[end if] some dangerous ACTING people.[paragraph break]'AMBUSH!' / 'Ah, bums!'[paragraph break]You are pushed roughly back to where you came[if Leo is visible]. Leo and Rand mutter that if you point out where those people are, they'll do the business[else]. 'Intruder? Dire runt!' You could use a meaty matey or two[end if][or]Leo and Rand might help you win the fight, but you'll need some way to find the people in the ether [if Leo is not visible]and some henchmen to tackle them[end if][stopping].";
		set the pronoun it to ether instead;
		now ether-try is true instead;
	if Saps' Pass is not visited:
		say "You stride confidently north with your two friends. You can tackle anyone!";

section dart

section volt maze path

the volt maze is vanishing scenery in Grey Gyre. "At the start of the path is tiled WELCOME TO THE [b]VOLT MAZE[r]. You can read red writing about who made it.". understand "path" as volt maze.

understand "maze/ entry" as volt maze when player is in Gyre.

a-text of volt maze is "RYRYRRYR". b-text of volt maze is "RYRYRRYR". parse-text of volt maze is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

instead of entering volt maze:
	try going north.

maze-points is a number that varies. maze-points is 0.

after fliptoing n-t-air:
	poss-d;
	shuffle-nowt-town;
	unless l-m is cscanned or l-m is ncscanned:
		poss-d;
	now maze-points is 1;
	continue the action;

after fliptoing maze walls:
	min-up;
	now maze-points is 2;
	unless l-m is cscanned or l-m is ncscanned:
		min-up;
		increment maze-points;
	shuffle-nowt-town;
	continue the action;

to shuffle-nowt-town:
	remove maze entry zany meter from play;
	remove volt maze from play;
	remove maze walls from play;
	remove n-t-air from play;
	change north exit of Grey Gyre to Phat Path;
	now ether is in Grey Gyre;
	continue the action;

before fliptoing:
	if player is in a mazeroom or player is in Unwary Runway:
		move player to Grey Gyre, without printing a room description;

section hump

the hump is vanishing scenery in Grey Gyre. "It doesn't look like it'd be too hard to get over, but as you walk over to inspect it, you feel a bit drained."

check taking hump:
	say "You can take it if you believe in yourself and motivate yourself the right way!" instead;

check going west in grey gyre:
	if hump is visible:
		say "You try to be all 'I leap a pile' but can't get over the hump. Hmph." instead;

The hump is fixed in place.

[hump: "This is more a brain game than a brawn game. Perhaps a HMM or EHH might be more useful here. Or not."]

chapter bleeping

the plebe is a vanishing person in Grey Gyre. description is "He's got the shaved head, boring monochrome clothes--nothing on him marks him as too special to be yelled at.". "A plebe is standing at attention here to the east, waiting for a command from someone in charge. Or just bossy[if plebe is prefigured and player wears star][one of]. Now that you're wearing that star, maybe you can use that semi-cuss you used earlier[or][stopping][end if]."

check taking plebe:
	say "That plebe won't be pushed aside." instead;

a-text of plebe is "RRYYR". b-text of plebe is "RPGYR". parse-text of plebe is "x[sp]l[sp]e[sp]e[sp]x". plebe is parse-spoilable.

bleep-clue is a truth state that varies. bleep-clue is false.

check fliptoing plebe:
	if player is not wearing star:
		say "You try and cuss, but the plebe is not intimidated by your civilian clothes[if Rand is in gyre] or even your companions[end if]. Perhaps you need something proclaiming your authority.";
		preef plebe;
		the rule succeeds;

check fliptoing ether:
	if Leo is not in Grey Gyre:
		say "You suspect someone is in the mist where the maze was. 'THERE!' you yell. But you doubt you fooled or intimidated them. You need backup.";
		preef ether instead;
	if player does not have popgun:
		say "Leo and Rand charge in. It's two-on-three, though, since you don't even have a weapon--and the enemies are bigger than you. You all walk back, slightly beaten up, muttering 'Ah, ow, whoa.' Leo and Rand shake off their bruises. Still, you note you started things right.";
		preef ether instead;
	if popgun does not contain dart:
		say "Leo and Rand charge in. It's two-on-three, though, since your popgun doesn't have any ammunition[if boing is reflexive] and isn't even working[end if]. You all walk back, on-ho changed to oh-no. Leo and Rand shake off their bruises.";
		preef ether instead;

after fliptoing ether:
	now dart is in gyre;
	now dart is in lalaland;
	now saps' pass is mapped north of grey gyre;
	now grey gyre is mapped south of saps' pass;
	continue the action;

book Char Arch

Char Arch is a room in Presto. "You see gasp-gaps to the west an a mad dam east, though north-south is unimpeded. And there's a dumpster here, too."

leaf-clue is a truth state that varies.

after printing the locale description for Char Arch when leaf-clue is false:
	if player has leaf:
		say "The yak briefly tries to nibble at your leaf. You pull the leaf away.";
		now leaf-clue is true;
		continue the action;

a mad dam is bounding scenery in Char Arch. "The mad dam pours water on itself. The waterfall's flaws alter as you watch, though you can't do much with it. Beautiful in its own way."

check taking dam:
	say "You take in the dam's beauty for a moment." instead;

instead of doing something to mad dam:
	if action is procedural, continue the action;
	try examining mad dam instead;

Char Arch is south of Grey Gyre.

some gasp gaps are bounding plural-named scenery in Char Arch. "You can't see much of the gaps, but you know you don't want to get close to them. Because you'd have to fall to get there."

understand "gasp-gaps" as gasp gaps.

instead of doing something to gaps:
	if action is procedural, continue the action;
	try examining gaps instead;

The bored yak is a neuter animal in Char Arch. "[one of]A yak languishes here. It looks bored, and that drab yoke around it doesn't help[or]The bored yak with the drab yoke is still hanging around[stopping]."

after doing something with the bored yak:
	set the pronoun him to the bored yak;
	set the pronoun her to the bored yak;
	continue the action;

a-text of bored yak is "RYORYYRR". b-text of bored yak is "RYORYYRR". parse-text of bored yak is "x[sp]-[sp]y[sp]x[sp]-[sp]-[sp]x[sp]x".

check giving to yak:
	if noun is leaf:
		say "The yak has gotten far too lazy already. You shouldn't encourage it by giving it more food just for staying put. You feel it, or the drab yoke, might be useful elsewhere. Just giving the yak the food would give it an excuse to stay put." instead;
	if noun is crust:
		say "That's borderline animal cruelty." instead;
	say "The yak sniffs, but that's not really something edible. Well, by a yak." instead;

understand the command "place" as "put".

check putting it on (this is the yak-skid rule):
	if second noun is skid:
		if noun is onyx censer:
			say "That would roll off the skid. Or fall over and roll off, if you stood it on end." instead;
	if noun is yak and second noun is skid:
		ignore the can't put what's not held rule;
		say "[if yak is on skid]It already is.[otherwise]The yak doesn't want to budge. Maybe if you had something tasty.[end if]" instead;
	if noun is leaf:
		if yak is visible:
			now yak is on skid;
			now leaf is on skid;
			say "The yak walks up to the leaf you dropped, sniffs, climbs on the skid and begins munching[if yak-badbook is true]. Maybe it will trust you enough to eat that really awful book, now[end if]." instead;

the yak-skid rule is listed before the can't put what's not held rule in the check putting it on rulebook;

check pushing yak:
	say "It groans lazily." instead;

check pushing yak to:
	if yak is on skid:
		try pushing skid to second noun instead;
	say "The yak groans lazily. Maybe if it were on something you could push, that would work." instead;

description of yak is "The yak eyes you [if yak is on skid]neutrally, now you fed it[else]warily[end if]. It is clearly not a shining example for beasts of burden everywhere. In fact, its odd reddish tinge is not physically shining. The yak wears a small drab yoke it probably won't let you get near on principle."

printed name of yak is "bored yak"

every turn (this is the leaf-yak rule):
	if yak is not on skid and leaf is on skid and skid is visible and yak is visible:
		say "The yak perks up, walks over and onto the skid, and starts munching away.";
		now yak is on skid;

the yak wears a drab yoke.

description of the drab yoke is "[if yak wears yoke]It doesn't look very comfortable, but it also doesn't look locked. It probably has some sort of safety catch, so if the yak runs into anything, it will break off. There are scratchings that look familiar, but you can't get close enough to read them. You could probably read it to see if it has a brand name. But one thing you can read is that the yoke may break if subjected to strong magnetic fields.[otherwise]Looking closely, you see 0123456789 )!@#$%^&*( engraved near the yoke's top, with the 26 letters of the alphabet and all manner of odd punctuation scrawled in an order that seems random--no, worse than random, if you were trying to group them sensibly.[end if]"

a-text of drab yoke is "RYORYYRR". b-text of drab yoke is "RYOPYYRR". parse-text of drab yoke is "x[sp]-[sp]y[sp]b[sp]-[sp]-[sp]x[sp]x".

the scratchings are part of the yoke. description is "[bug-report]"

understand "scratches" as scratchings.

instead of doing something with the scratchings:
	if yak wears yoke:
		say "You can't get close enough to see them." instead;
	if current action is examining:
		try examining yoke instead;
	if current action is scaning:
		try scaning yoke instead;
	if current action is objhinting:
		continue the action;
	say "Not much to do besides examine the scratchings.";

check taking yoke when yak wears yoke:
	say "The yak shifts--it may think you want to tighten the yoke or something." instead;

does the player mean showing a badbook to yak: it is very likely.

understand "bad book" as a badbook.

before giving pedanto-notepad to yak:
	say "You don't want to risk the yak nibbling at that. Maybe try something less useful." instead;

try-keyboard is a truth state that varies.

yak-badbook is a truth state that varies.

before giving a badbook to yak:
	if yak is not on skid:
		now yak-badbook is true;
		say "[one of]The yak doesn't trust you with something that doesn't look quite enough like food. Maybe you if you gained the yak's trust, first, it might...[or]Still, the yak doesn't trust you enough to eat what was THAT part of a tree. Yet.[stopping]" instead;
	say "The yak gazes blankly at the book. Then, it ignores the leaf for a second. It begins to munch on the book, for a change of pace. But the actual paper is as indigestible as the words. Some deep animal intuition makes it shudder. It almost pounds its head on the skid--and snap! The safety on the drab yoke calls it to crack and fall off. The yak, dazed, walks away. You pick up the drab yoke--it's not that heavy.";
	now yak-sol is 2;
	now yoke is in location of player;
	now player has drab yoke;
	now yak is in lalaland;
	now noun is in lalaland;
	reg-inc;
	do nothing instead;

to yak-and-yoke:
	say "[line break][if try-keyboard is true]Now, you can flip to the keyboard like you tried before, and w[else]W[end if]ith the yak off the skid, you remember the lossless compression that will let you change the skid back to a disk.";
	now yoke is in shack;
	now leaf is in lalaland;
	now yak is in lalaland;

check going south in Char Arch:
	if Leo is visible:
		say "'I don't wanna go back dere, boss. I wants adventureses. Fightses.' says [l-r]." instead;
	if Leo is dismissed:
		post-wall-arch instead;

to post-wall-arch:
	if casserole is in lalaland:
		say "You don't have another workout for Rand and Leo.";
		continue the action;
	if yak is in lalaland:
		say "[if casserole is in lalaland]You don't have another casserole. Or another chore[else]You maybe could've used Leo and Rand to push the yak around, but not now[end if].";
		continue the action;
	if yak is on skid:
		if casserole is in shack:
			say "You offer Leo and Rand the casserole in exchange for pushing the skid north. 'Fuel? Us? Useful!' It's a great workout for them, and though they're a bit careless pulling the skid into the shack, it breaks a safety catch on the drab yoke, which falls to the ground. The yak blinks, nods at all three of you, and runs off. The casserole replenishes vital carbohydrates or something for Leo and Rand. They ask to keep the dish, which is fine with you. The shack's messy enough.";
			reg-inc;
			now yak is in lalaland;
			now yak-sol is 3;
			now skid is in shack;
			now drab yoke is in shack;
			now casserole is in lalaland;
			move player to hacks' shack;
			continue the action;
		say "You'd like to ask for help, but you don't have enough muscle food for Leo and Rand after they pull the skid. Those escaroles simply aren't meaty enough.";
		continue the action;
	say "'Nyurgh! Hungry!' you recall Leo and Rand saying. [if casserole is off-stage]Maybe if you can make some food, and if[else]You've made food they might like, so[end if] once you have some manual labor they'd be better suited for, you can visit them.";

section dumpster

the dumpster is scenery in Char Arch. the dumpster is an opaque container.

check taking dumpster:
	say "Way too heavy." instead;

check examining dumpster:
	ignore the examine containers rule;

dumpster-look is a truth state that varies.

check searching dumpster:
	try examining dumpster instead;

the block burning rule is not listed in any rulebook.

burn-check is a truth state that varies.

check burning:
	if burn-check is false:
		ital-say "In this game, you should never have a burning implement, and you should never need one. So this verb is only good for cheap jokes.";
		now burn-check is true instead;
	if noun is an animal:
		say "No animal cruelty, please. Well, maybe an implausible non-violent gag or two." instead;
	if noun is a person:
		say "Amazingly, with all your abstract wordplay prowess, you're not good at getting in sick burns in arguments[if noun is a guardian and noun is not lois the hostile and noun is not hostile-is-he lot]. But maybe you can figure how to leave them burned[else]. Go figure[end if]." instead;
	if noun is a fruit or noun is lobster or noun is tea tray:
		say "Good thing this game isn't a cooking sim." instead;
	if noun is chair: [introduction]
		say "You think 'I char a rich chair' but have nothing to burn it with." instead;
	if noun is sitar:
		say "That's not the way to recover rock-star status." instead;
	if noun is a sto:
		say "[if noun is flippable]Even if it didn't look important, no[else]No senseless vandalism, please[end if]." instead;
	if noun is rude 'n nuder: [routes]
		say "I am anti-censorship, even of that sort of thing. Plus you have no source of flame." instead;
	if noun is pipe soot:
		say "It's been through enough of that." instead;
	if noun is divorces: [troves]
		say "A rubbish society rag deserves such a fate--in an incinerator or something. Maybe you can think DIVORCES into irrelevance, though." instead;
	if noun is lager or noun is pernod:
		say "It's not high enough proof. In fact, it's almost certainly watered-down." instead;
	if noun is crate:
		say "This is totally the wrong genre of game for that." instead;
	if noun is coal: [presto]
		say "You need to burn mental fuel, here." instead;
	if noun is on labs slab:
		say "You may figuratively want to, right now, but that's natural when you're programming something tough." instead;
	if noun is raft: [oyster]
		say "[if player is in raft]No way. Especially not while you're on it[else]That might be a way across. Somehow[end if]." instead;
	if noun is log gaol: [towers]
		say "Even if the badlands weren't desolate enough, you don't have anything incendiary." instead;
	if noun is ropins:
		say "The ropins aren't actual rope, so they don't burn. Even if they did, [if Dr Yow is in prison ropins]Dr. Yow might die inside[else]you don't need to any more[end if]." instead;
	if noun is bot boat:
		say "Destroy a possible way to the Palace and hurt someone's feeling at once? That's a special kind of spiteful meanness. Congratulations!" instead;
	if noun is flowerpot or noun is crocus:
		say "Renato would be so upset." instead;
	if noun is yurts:
		say "Perhaps another more natural way of decomposition would work better." instead;
	if noun is curst palace:
		say "You're going to need fireworks, but that's counterproductive[if player is not in Mislit Limits]. Plus you are [way-tow]too far away[end if]." instead;
	if noun is a hintpastry:
		say "There aren't many ways to botch food like that, but that's one[if toaster is visible]. Anyway, you don't see how to set the toaster to eleven or whatever[else]. But maybe there's something that could heat that up[end if]." instead;
	if mrlp is towers and topside deposit is unvisited:
		say "Don't be a brushfire furbisher." instead;
	if noun is b-b: [otters]
		say "You'd be right in the middle. So, bad idea." instead;
	if noun is atmo-moat:
		say "It's nowhere near greasy enough." instead;
	if noun is storage:
		say "It's meant to be nearly indestructible." instead;
	say "You're a ropy pyro. There's no igniter tiering nearby." instead;

to say way-tow:
	if Mislit Limits is unvisited:
		say "way ";

instead of burning the dumpster:
	say "That would be a dumpster fire of an idea. Plus the Char Arch is burnt enough already."

instead of entering dumpster:
	say "It's potentially too toxic to enter, what with the permadust and spumed tar and other dreamt-ups inside."

description of dumpster is "Property of Sinbad's Sad Bins, it reeks of bad sins--permadust and spumed tar and other dreamt-ups[if dart is in dumpster], but you take a peek anyway--to see [one of]a dart in[or]that dart still[stopping] there[end if]."

a thing can be irrelevant. a thing is usually not irrelevant.

some permadust is irrelevant scenery in Char Arch. "It's settled nicely in the dumpster, blending with the spumed tar."

some spumed tar is irrelevant scenery in Char Arch. "It's settled nicely in the dumpster, blending with the permadust."

instead of doing something with an irrelevant thing:
	if action is procedural, continue the action;
	repeat through table of irrelevance:
		if noun is irr entry:
			say "[irrtext entry]";

to say not-much:
	say "There's not much to do with that. It belongs in the dumpster.";

table of irrelevance
irr	irrtext
spumed tar	"[not-much]"
permadust	"[not-much]"

section dart

check throwing it at (this is the don't throw dart rule) :
	if noun is dart:
		if noun is part of popgun:
			say "You'd do better to SHOOT someone or something." instead;
		if noun is rand or noun is leo:
			say "It wouldn't hurt such a big fellow." instead;
		say "The dart is some weird foam that is tough to throw. It's probably better to shoot it." instead;
	say "You don't have many good rangy weapons in this game. Attacking instead (though that's useless too)...";
	try attacking the second noun instead;

the dart is a reflexive thing. description is "[if dart is in popgun]Locked and loaded[else if dart is not in dumpster]It's long and narrow, made more for stunning than killing, for propulsion than throwing[else]The dart is in the dumpster, just out of reach[end if]."

the dumpster contains the dart.

a-text of dart is "RRYR". b-text of dart is "PRYP". parse-text of dart is "d[sp]r[sp]a[sp]t". dart is parse-spoilable.

check taking the dart when dart is in dumpster:
	say "You grunt and stretch, but you can't quite reach the dart. You [if cur-score of presto is 0]may not have found how to get things done here[else]probably didn't grunt the right thing[end if]. Maybe you'll unexpectedly get it if you get disgusted the right way." instead;

section throwing

understand the command "throw" as something new.

plainthrowing is an action applying to one thing.

understand "throw [something preferably held]" as plainthrowing.

understand "throw [something preferably held] at [something]" as throwing it at.

the block throwing at rule is not listed in any rulebook.

carry out plainthrowing:
	if noun is flowerpot:
		say "But it's Renato's. You don't have to help him out, but it'd be best not to give up." instead;
	if noun is dart:
		say "The dart was more made for shooting than throwing.";
		the rule succeeds;
	if noun is prod:
		say "Almost. Try something simpler that will cause the prod to fall." instead;
	if throw-warn is false:
		ital-say "throwing isn't a useful verb in this game and will default to dropping in the future, except to hint a few items. Also, Inform/gblorb games generally use THROW X AT Y. Also, dropping itself isn't widely useful in this game.";
		now throw-warn is true instead;
	try dropping noun instead;

section star

a decorative star is a reflexive wearable thing in Char Arch. "A decorative star--the sort you pin to your clothes--is lodged in a red stump here. Sort of like how Excalibur was stuck in a stone. Or not."

check scaning stump:
	if star is reflexive:
		say "Nothing, until you aim at the star.";
		try scaning star instead;

the red stump is scenery in Char Arch. "It's [if star is in stump]cracked where the star was[else]got a star wedged in it."

a-text of decorative star is "RYRR". b-text of decorative star is "RYRR". parse-text of star is "x[sp]a[sp]x[sp]x". star is cheat-spoilable.

description of decorative star is "It's not some paper gold star from Mrs. Crabtree's third grade class. It's actual dull metal. Shows you are a tsar of some sort of arts."

instead of doing something to decorative star when star is in Char Arch:
	if current action is taking:
		say "It's wedged in just enough to frustrate you. You mutter 'bad star' under your breath, but that's almost a bit too harsh even for this area. You figure you'll probably see how to get it once you give up, but you can't give up just to take it." instead;
	if action is procedural, continue the action;
	say "Straightforward taking won't work, and neither will other manipulation. You wonder what sort of magic might get it out.";

after fliptoing star:
	now player wears decorative star;
	continue the action;

instead of taking off decorative star:
	say "[if plebe is in lalaland]But it looks so jaunty and reminds you of how you got rid of that plebe[else]You shouldn't remove it. You might need to impress someone with it[end if]."

book Dirge Ridge

Dirge Ridge is a room in Presto. Dirge Ridge is south of Char Arch. "It's sort of sad here, leaving you thinking and saying 'Erg ... I'd ...'. A vile veil covers any way except back north."

the vile veil is bounding scenery in Dirge Ridge. it is undesc.

after looking in dirge ridge:
	set the pronoun it to vile veil;
	continue the action;

instead of doing something with vile veil:
	say "The veil's oppressive to even think about, but it also protects you from falling off. You don't need to do anything with it."

check going north in Dirge Ridge:
	if Leo is fightin or Rand is fightin:
		say "You're able to run away. [if Rand is in dirge ridge]Leo's down, and Rand's only interested in his turf, maybe protecting his new friend[else]Leo doesn't seem up to chasing you, so maybe he's not a real bad guy[end if].";

check going to Dirge Ridge for the first time:
	say "A rather big fellow has his back to you, wishfully blubbing 'Oblige Big Leo. I want a twin.' He turns around and sees...you, a lot smaller than him. 'Sneak! Snake!' Leo runs at you! He's a bit slow, fortunately. But he's a bit mad you caught him in a less-than-macho moment."

after fliptoing a fightin person:
	if noun is Rand:
		now Rand is in dirge ridge;
		set the pronoun him to Rand;
		set the pronoun them to wzup;
	now noun is washed up;
	continue the action;

a person can be bruisin. a person is usually not bruisin.

before scaning a washed up person (this is the clue whassup if washups rule) :
	if Leo is washed up and Rand is washed up:
		try scaning wzup instead;

check scaning Leo when Rand is in Ridge and Rand is fightin:
	say "It's Rand you need to deal with, now." instead;

Leo is a fightin bruisin reflexive person. Leo is in Dirge Ridge. description is "[if Rand is off-stage]Huge but lumbering. Almost like a bull[else]Leo is Rand's mirror image--violent, not evil. A naughty anythug on a gay hunt[end if][if Leo is washed up]. He seems upset. For all their macho talk, he and Rand might just need someone to talk to[end if]."

to say r-l of (p - a person):
	say "[if p is Leo]Rand[else if p is Rand]Leo[else]BUG[end if]"

check taking a fightin person:
	say "You can 'take' them by trickery." instead;

to say l-r:
	say "[if a random chance of 1 in 2 succeeds]Leo[else]Rand[end if]"

to say lrp:
	say "[if a random chance of 1 in 2 succeeds]Leo and Rand[else]Rand and Leo[end if]"

Rand is a fightin bruisin reflexive person. description is "Rand is Leo's mirror image, loutish and muscular and taller than you[if Rand is washed up]. He seems upset. For all their macho talk, he and Leo might just need someone to talk to[else if rand is fightin]. He looks over-focused, like he can be suckered by a feint, but nothing TOO subtle[end if]."

a-text of Leo is "YRY". b-text of Leo is "YRY". parse-text of leo is "o[sp]l[sp]e". leo is any-spoilable.

a-text of Rand is "RYRR". b-text of Rand is "RGRR". parse-text of Rand is "x[sp]a[sp]x[sp]x". rand is cheat-spoilable.

to say other-guy of (rl - a person):
	say "[if noun is Rand]Leo[else]Rand[end if]";

initial appearance of Rand is "[bug-report]".
initial appearance of Leo is "[bug-report]".

persuasion rule for asking an eager person to try pulling the sled:
	say "[noun] says 'If somethin['] useful an['] heavy was onnit, sure, boss.'";
	persuasion fails;

persuasion rule for asking an eager person to try attacking the hogs:
	say "[noun] counts on his fingers, reasoning that three is more than two and a haff. 'Sorry, boss.'";
	persuasion fails;

persuasion rule for asking a bruisin person to try doing something:
	if noun is not eager:
		say "[noun] isn't up to that.";
		persuasion fails;
	say "Alas, Leo and Rand are men of action.";
	persuasion fails;

before scaning a fightin person:
	if Rand is washed up and Leo is washed up:
		try scaning wzup instead;

for writing a paragraph about a bruisin person:
	if Rand is not visible:
		say "Leo is here, looking strong if not fast.";
		now Leo is mentioned instead;
	now Leo is mentioned;
	now Rand is mentioned;
	if Rand is fightin:
		say "Rand is here, looking to do a little better than Leo." instead;
	if Leo is eager:
		say "Leo and Rand are here, [if rebuked is true]tentatively[else]eagerly[end if] waiting to follow you[if harpings phrasing is visible] into that computer area they probably don't need to be[end if]." instead;
	if Rand is washed up and Leo is washed up:
		say "Leo and Rand are here[r][one of], commiserating. Maybe a bit of a talk and listen would help, or the right word might help them feel less like [i]washups[r][or], half wanting a third party to drop a nice word, maybe listen a bit, and assure them they aren't [i]washups[r][stopping]." instead;

every turn when player is in dirge ridge:
	if Leo is fightin:
		say "Leo bulls at you, but you're easily able to outrun and outwit him. Maybe it's as easy to take him down for good." instead;
	if Rand is fightin:
		say "Rand charges at you straightforwardly, but as lumbering as Leo. He can probably be tricked by a similar fake-out." instead;

check dropping while in Dirge Ridge:
	say "You have nothing worthless enough to leave lying around in or by here." instead;

lr-acq is a truth state that varies.

to say lrblab:
	say "[if lr-acq is true]recount[else]discover";

chapter whassuping

the wzup is privately-named reflexive scenery in Dirge Ridge. printed name of wzup is "Leo and Rand". description of wzup is "bug".

instead of doing something with wzup:
	if current action is scaning, continue the action;
	if current action is objhinting, continue the action;
	if current action is fliptoing, continue the action;
	say "You don't need to refer to Rand and Leo at once. Referring to one is as good as referring to the other.";

a-text of wzup is "RRYRRYR". b-text of wzup is "PRYRRYR". parse-text of wzup is "w[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

check fliptoing wzup:
	if Rand is fightin:
		say "Actions first, then words." instead;
	if Leo is eager:
		say "You've already got their attention. You wouldn't want to get caught in an endless cycle of whassups. You'd probably need to drink a lot of cheap beer to recover from that." instead;
	if Leo is washed up and Rand is washed up:
		now Leo is eager;
		now Rand is eager;
		continue the action;
	else if Leo is washed up:
		say "That'd be a bad idea, what with Rand still to take care of." instead;
	else:
		say "Leo doesn't seem interested in explaining why he's fighting you." instead;
	the rule succeeds;

check asking about "whassup":
	if noun is Leo or noun is Rand:
		try fliptoing wzup instead;

book Austerer Treasure

Austerer Treasure is an innie room in presto. Austerer Treasure is west of Grey Gyre. "[if ye hoop is visible]This room's pretty barren. I mean, a lot of treasure rooms generally get looted of unicorns['] coin urns and all before text adventurers without weapons make it there, but man. All that remains is an ancient-looking hoop about nine feet up labeled YE HOOP.[paragraph break]Looking at how it's out of reach sort of makes you want to give up, or maybe just pretend to give up and maybe something'll turn up[else]You've completely looted this place[end if]."

after looking in austerer treasure:
	if ye hoop is in austerer treasure, set the pronoun it to ye hoop;
	continue the action;

Ye Hoop is vanishing scenery in Austerer Treasure. Ye Hoop is proper-named. "It's a hoop rather high up. 'Yo, hope,' you think to yourself, imagining it would totally crumble and reveal a treasure if you could grab it. But then you think 'Ooh, yep,' seeing how high it is."

check taking Ye Hoop:
	say "It's too high up to grab. Especially with your possessions weighing you down. You may need to find the right way to say you don't need them for a moment." instead;

instead of pulling Ye Hoop:
	try taking ye hoop instead;

instead of pushing Ye Hoop:
	try taking ye hoop instead;

instead of attacking Ye Hoop:
	try taking ye hoop instead;

a-text of Ye Hoop is "[if ye-rec]RRYYYO[else]RYYR[end if]". b-text of Ye Hoop is "[if ye-rec]RRYGYO[else]RGGR[end if]". parse-text of ye hoop is "[if ye-rec]x[sp]x[sp]-[sp]o[sp]-[sp]y[else]POOH[end if]". ye hoop is cheat-spoilable.

ye-scan is a truth state that varies.
no-ye-scan is a truth state that varies.
ever-hoop-both is a truth state that varies.

after scaning ye hoop:
	if ye-rec:
		now ye-scan is true;
	else:
		now no-ye-scan is true;
	if no-ye-scan is true and ye-scan is true:
		if ever-hoop-both is false:
			say "Hm, different readings whether it's ye hoop or not.";
			now ever-hoop-both is true;
	continue the action;

to decide whether ye-rec:
	if the player's command includes "ye":
		decide yes;
	decide no;

check going outside in Austerer Treasure:
	try going east instead.

phooeyed is a truth state that varies.

after fliptoing onyx censer (this is the pooh-phooey rule):
	if the player's command includes "pooh":
		poss-d;
	else:
		min-up;
		now phooeyed is true;
	continue the action;

the onyx censer is a thing. description of onyx censer is "It's dark with blocky flecks of bright green. If they were lumped together and you stared too long, you'd get a headache. The year 1983 is scratched in, possibly AD or BC.". "An onyx censer, dark with flecks of black green, rests here."

after printing the name of the onyx censer while taking inventory:
	if censer is prefigured:
		say " (which could become a screen)";
	continue the action;

a-text of onyx censer is "RRRYYR". b-text of onyx censer is "RRRYGR". parse-text of onyx censer is "x[sp]x[sp]x[sp]e[sp]e[sp]x".

the switch computer pieces rule is listed before the can't switch on unless switchable rule in the check switching on rules.

check switching on (this is the switch computer pieces rule) :
	if noun is hard drive:
		say "There [if hard drive is reflexed]was[else]is[end if] a button for that." instead;
	if noun is computer screen or noun is keyboard or noun is dongle:
		say "You don't need to switch any auxiliary equipment on or off." instead;

the computer screen is a thing. description is "[if computer screen is not on labs slab]Vid-o-Void, since it's not hooked up to anything[else if compiled code is part of the computer screen]Ugh. It's got compiled code, but it doesn't work RIGHT[else]A bunch of nonsense code that might not even work[end if]."

Include (-
	has transparent talkable
-) when defining computer screen.

check putting screen on skid:
	say "It's just the wrong shape to do that. It is far enough from a perfect cube that any sort of wobbling will make it tumble over, and given how old-school the screen is, that could break it. When you need it, you can just carry it." instead;

check fliptoing the computer screen:
	if onyx censer is visible:
		if hacks' shack is unvisited:
			say "[one of]You don't have any apparatus to hook the screen up to. Yet. It'd get damaged on your further adventures, even in your super purse. Technology is like that. But you file the idea for later, in case you find some tech den[or]Not yet[stopping].";
			preef onyx censer instead;

the keyboard is a thing.

description of keyboard is "[if caps lock is part of keyboard]It's complete, now, since you put the caps lock button in[otherwise]It's missing a button on the left[end if][if t-key is part of keyboard]. Also, there's a weird 'TBA' key[else]. You fixed the TBA key to a tab key[end if]."

a-text of hump is "YRRR". b-text of hump is "YRRR". parse-text of hump is "u[sp]x[sp]x[sp]x". hump is cheat-spoilable.

book Marines Seminar Remains

Marines Seminar Remains is in presto. Marines Seminar Remains is east of Grey Gyre. "The only way out is back west. The sport ports in the other directions indicate this WAS a busy seminar, but you aren't and won't be equipped to handle them. Nothing [if popgun is in Marines Seminar Remains]besides a popgun[else]else[end if] is left."

after printing the locale description for Marines Seminar Remains when Marines Seminar Remains is unvisited:
	say "You hear a loud voice yell 'REISMAN! Snare [']im!' / 'Mean, sir!' Uh oh. That plebe might be in trouble. But it's nice to know his name. You resolve to do what you can to lobby for his amnesty once Elvira's out of the way.";
	continue the action;

The PG-on-up popgun is a container in Marines Seminar Remains.

after printing the name of the popgun while taking inventory:
	say " ([if dart is in popgun]loaded with the dart[else]unloaded[end if])";
	omit contents in listing;

understand "PG-on-up/ pop/ gun/" as popgun.

rule for printing room description details of the PG-on-up popgun:
	if number of things in popgun is 0:
		do nothing.

check scaning popgun when boing is reflexive:
	say "No reading until you hit the boing mechanism.";
	try scaning boing instead;

a-text of popgun is "RYRRY". b-text of popgun is "PYRRY". parse-text of popgun is "b[sp]-[sp]x[sp]x[sp]-". popgun is cheat-spoilable.

understand "PG-on-up pop/ gun/" as popgun.

report taking popgun:
	say "You take the gun and look it over. You're not one for violence, but the gun doesn't look lethal. But since it's PG- and not G-rated, it can't be totally useless. It could stun an opponent, with the right ammo.";
	the rule succeeds;

description of PG-on-up popgun is "It's cheap plastic but probably packs a punch with the right ammo--but if it were G? No, pup[if boing is reflexed]. Its boing mechanism is fixed, now[otherwise]. You notice its boing mechanism is broken. It may take a eureka moment to figure out how to fix this spoilt pistol[end if][if dart is in popgun]. Loaded, too, with that dart![end if]. You notice a serial number."

check examining popgun:
	ignore the examine containers rule;

understand "spoilt/pistol" and "spoilt pistol" as popgun.

The boing mechanism is part of the popgun. the boing mechanism is reflexive. description is "[if boing is reflexive]It's sort of springy, but it doesn't seem to really bounce around. You may need a eureka moment to figure how to fix it[else]The boing mechanism is fully equipped to go boing again. Yay[end if]."

a-text of boing is "RYRRY". b-text of boing is "PYRRY". parse-text of boing is "b[sp]-[sp]x[sp]x[sp]-". boing is cheat-spoilable.

instead of doing something with the boing mechanism:
	unless action is procedural:
		say "Your mechanical abilities won't help[if boing is reflexed], but they don't need to[else], but there may be a slick way to get the BOING back[end if]." instead;
	continue the action;

The serial number is part of the popgun.

Instead of doing something with the serial number:
	if the current action is scaning:
		try scaning the popgun instead;
	if action is procedural, continue the action;
	say "You can't do much with it except examine it.";

description of serial number is "B09140715."

check inserting it into (this is the dart-popgun rule):
	if second noun is popgun and boing is reflexive:
		if noun is dart:
			say "It seems like it should fit, but it doesn't. You can't quite compress the boing mechanism right, but if you had a moment of insight, you could." instead;
		else:
			say "That's not the right shape to fit in the gun to fire. Anyway, the boing mechanism looks broken." instead;
	if noun is dart and second noun is not popgun:
		say "How could that launch the dart?" instead;
	if noun is not dart and second noun is popgun:
		say "That's not the right shaped ammo for the popgun." instead;
	if noun is dart and second noun is popgun:
		if dart is in popgun, say "It already is!" instead;
		ignore the can't insert into what's not a container rule;

chapter bingoing

after fliptoing boing mechanism:
	set the pronoun it to popgun;
	continue the action;

check fliptoing boing mechanism (this is the take popgun to fix it rule) :
	if player does not have the PG-on-up popgun and popgun is visible:
		say "(taking the popgun first while you mess with the boing mechanism)[paragraph break]";
		now player has popgun;

chapter sport ports LLP

the sport ports are plural-named reflexive LLPish scenery in Marines Seminar Remains. description is "As you get close, you see how tough they might be and think to yourself 'I'm saner.' They won't help with your main quest, and [if sport ports are reflexed]yet, you feel there may be a right way to salute them and the challenge they provide[else]you already showed them some respect[end if]. You can READ the firm who made them."

a-text of sport ports is "RRYRR". b-text of sport ports is "?R?R?". parse-text of sport ports is "?[sp]x[sp]?[sp]x[sp]?".

instead of doing something with sport ports:
	if action is procedural, continue the action;
	say "The sport ports would probably do something unfavorable to you. You don't need to do anything with them."

book Saps' Pass

Saps' Pass is a room in Presto. "This path cuts between two lethally beautiful areas, for a dope combination of safety and aesthetics.[paragraph break]Mount Um-Not blocks you to the east, with Deil's Slide to the west. There's also a big wall here, blocking the way north. Feels like it's taunting you--must be a lawl wall. It's got keys hanging from it. You can retreat south, too, of course."

check going south in saps' pass:
	say "The hogs snicker as you walk away.";

Mount Um-Not is bounding scenery in Saps' Pass. understand "mount/um/not" as Mount Um-Not. "It's as huge and unwelcoming as Cupid's Cuspid isn't." [climb it ??]

check taking um-not:
	say "Stronger adventurers than you couldn't take Mount Um-Not." instead;

[	say "Saps['] Pass is not to be trod, man. It's a mordant, dormant mtn road. It may lead to No-Goal Lagoon, anyway." instead; ?? ]

Deil's Slide is bounding scenery in Saps' Pass. "You swear you can see the toxic fumes seeping from it. It's too dangerous to explore[swan-puma]."

check taking Deil's Slide:
	say "The Deil's Slide is more likely to take YOU." instead;

check entering Deil's Slide:
	try going west instead;

book Phat Path

Phat Path is a room in Presto. "This path cuts between two lethally beautiful areas, for a dope combination of safety and aesthetics.[paragraph break]Mount Um-Not blocks you to the east, with Deil's Slide to the west. [if lawl wall is in Phat Path][otherwise]There's not much left with the wall gone, except for a sign to the north and a shack beyond that[end if][if hawt thaw is in phat path]. There's also an odd clump of Hawt Thaw off to the side[end if]. You can retreat south, too, of course."

the priv-shack is privately-named proper-named scenery in Phat Path. "[if shack is visited]It looks just as you left it[else]The shack looks cozy and inviting[end if].". printed name of priv-shack is "the shack"

understand "shack" as priv-shack when player is in phat path.

check entering priv-shack:
	try going north instead;

instead of doing something with priv-shack:
	if current action is entering:
		try going north instead;
	if current action is attacking:
		say "Whack the shack? Back!" instead;
	if action is procedural, continue the action;
	say "Not much to do but enter the shack by going north." instead;

check going west:
	if player is in Saps' Pass or player is in Phat Path:
		say "The Deil's Slide would make quick work of even [if Leo is in dirge ridge]your old friends [end if]Leo and Rand[swan-puma], with or without a goop-pogo." instead;

to say swan-puma:
	say "[one of], with or without the fabled Sawn Swan (whose victims emit tearful NAWs) and Ampu-Puma (whose victims plaintively cry 'Um, PA') or even the LMAO-loam which lures unwary travelers to their death[or][stopping]";

check going east in Phat Path:
	if player is in Saps' Pass or player is in Phat Path:
		say "[if Leo is visible]Leo and Rand don't have the endurance to climb Mount Um, Not. Neither do you[else]You don't want to climb Mount Um, Not[end if]. The rest of your journey lies north." instead;

Check going inside in Phat Path:
	Try going north instead;

the harpings phrasing is scenery in Phat Path. description of harpings phrasing is "It's got warnings against entering the shack:[paragraph break]'ALERT! ALTER! RETREAT, ALL![paragraph break]LOG ONS? NO! SLOG![paragraph break]UGH! GOTH, OUT! THUG TOO? UGH! GO, HUT!"

check taking harpings phrasing:
	say "Removing the warning won't make the warning any less valid." instead;

check scaning harpings phrasing:
	say "It's all over the place. Maybe you should focus on a specific row[if rebuked is true] you haven't worked with yet[end if].";

the lawl wall is vanishing scenery in Saps' Pass.

check taking lawl wall:
	say "You'll need to take the keys, somehow." instead;

instead of touching lawl wall:
	say "It feels like it is in a state of thaw. Which makes no sense."

description of lawl wall is "A spams-spasm of bad jokes, and I'd tell you a few, but it'd be a bigger time sink than playing games where you point and click instead of just sensibly typing. It seems to be laughing at your lack of progress. You can see keys on the wall."

some keys are part of the lawl wall. the keys are vanishing and plural-named. description is "You're pretty sure the keys open the lawl wall, since the hogs are keeping an eye on them, but you can't be sure."

a-text of keys is "RORY". b-text of keys is "RORY". parse-text of keys is "x[sp]y[sp]x[sp]e". keys is any-spoilable.

the hogs are vanishing plural-named people in Saps' Pass. description is "They're as big as Leo and Rand but meaner. Plus there are three of them. They look much more pompous, though--maybe distracting them just right can get under their skin or sneak those keys on the wall.". "Hogs are stretched against the lawl wall, in no hurry to try to get by. They look like tough customers, too tough for the sort of words that got you here. OR ARE THEY."

after printing the locale description for Saps' Pass when Saps' Pass is unvisited:
	say "Shouldn't be much of a problem to get the keys and...oh no! you hear...[wfak][line break]";
	say "A 'PSS!' Suddenly three hogs, all Rand and Leo's size, block your way. One just up and takes your popgun, smashes it, laughs, and even rips off your star and crumples before going to guard the keys, the big jerk. What to do?";
	now decorative star is in lalaland;
	now popgun is in lalaland;

a-text of hogs is "RYRR". b-text of hogs is "RGRR". parse-text of hogs is "x[sp]o[sp]x[sp]x". hogs are cheat-spoilable.

check taking hogs:
	say "You and Rand and Leo can take [']em. But not literally." instead;

check going north in Phat Path:
	if lawl wall is visible:
		say "Not with those hogs guarding the wall you're not." instead;
	if Leo is visible:
		say "[one of]You walk north into the hacks['] shack. Leo and Rand follow. An electronic voice booms at them! 'YrNet Entry rejects N-E-Try!' It's one of those high-tech alarm devices, and it's detected them as not smart enough! It's not fair, and it's not nice, but if you need to do some programming, maybe they won't be a help anyway, to say the least.[paragraph break]It'd be sad to see Leo and Rand go, but perhaps a nicer way than yelling at them could help give them time to get to know each other without you standing in the way. Perhaps you could take a cue from that sign by the shack--it might give you some authority[or]You don't want that electronic warning. Leo and Rand don't, either. You glance at the sign again. Whether or not they can read it, you can tell them the gist. It'll be a softer letdown, coming from you[stopping]." instead;
	if shack is unvisited:
		say "You feel a small tingle--you've felt it before, from the YrNet Entry which disrupts unwanted visitors. But only people. Sometimes it also breaks up really oppressive software and hardware, too. It doesn't reject you, and that's good."

check scaning in Phat Path when Leo is in phat path:
	say "Leo and Rand ooh and ah at how you're using a thing to find out about things.";

byebyes is a list of things variable. byebyes is { log ons letters, alert letters, ought letters}.

to say sl-t-l:
	repeat with AA running through byebyes:
		if AA is reflexive:
			say "[if AA is log ons]SO LONG[else if AA is alert]LATER[else]TOUGH[end if]";
			continue the action;
	say "BUG--sign should've said something";

bye-disambig is a truth state that varies.

does the player mean doing something with entry 1 of byebyes:
	if bye-disambig is false:
		say "(picking one of the capitalized sets of letters on the sign at random)";
		now bye-disambig is true;
	it is likely.

after fliptoing when player is in phat path (this is the update byebyes rule) :
	if noun is part of the harpings phrasing:
		remove noun from byebyes, if present;
		set the pronoun it to harpings phrasing;
	continue the action;

the log ons letters are a plural-named reflexive thing. the log ons letters are part of the harpings phrasing. description is "[if log ons are reflexed]The letters seem dull now you said so long[else]They're bolded, IN CAPS and slightly raised[end if]."

understand "logons/letters" and "logons letters" as log ons letters.

a-text of log ons is "RYRYRR". b-text of log ons is "RGRGPR". parse-text of log ons is "x[sp]o[sp]x[sp]o[sp]n[sp]x". log ons is cheat-spoilable.

the alert letters are a plural-named reflexive thing. the alert letters are part of the harpings phrasing. description is "[if alert letters are reflexed]The letters seem dull now you said later[else]They're bolded, IN CAPS and slightly raised[end if]."

understand "alter letters" and "alter/letters" as alert letters.

a-text of alert is "RYRYR". b-text of alert is "RY???". parse-text of alert is "x[sp]-[sp]?[sp]?[sp]?".

the ought letters are a plural-named reflexive thing. the ought letters are part of the harpings phrasing. description is "[if ought letters are reflexed]The letters seem dull now you said tough[else]They're bolded, IN CAPS and slightly raised. They're also red[end if]."

a-text of ought is "RYYRR". b-text of ought is "RYYRR". parse-text of ought is "x[sp]-[sp]-[sp]x[sp]x". ought is cheat-spoilable.

rebuked is a truth state that varies.

to say increm:
	if the player's command includes "tough":
		say "You add an extra 'Hut! Go!' for emphasis.[paragraph break]";
	if rebuked is false:
		say "'But we ain't bored yet, boss!' You convince them they sort of are, what they are getting there, and it works a bit, without using any too-charged words. A bit more, and you'll veto their vote.[no line break]";
		now rebuked is true;
	else:
		say "'Us? Lot louts?' You manage to be firm but fair. You convince Leo and Rand that the computers inside may have viruses, and they understand.[paragraph break]'Real brave of ya, boss.'[paragraph break]'Dat was a good dust-up, wadn't it, boss? We'se sure glad we could helps ya. Tanks for makin['] us stuges feel like guests. You do good in da Sekret Sekter, now. Friend finder.' They go back to Dirge Ridge, muttering about workouts and high-powered workout food. 'Nyurgh! Hungry!' Maybe you can bribe them later to help you.[no line break]";
		pad-rec-q "Leo and Rand";
		now Leo is in Dirge Ridge;
		now Rand is in Dirge Ridge;
		now Leo is dismissed;
		now Rand is dismissed;
		now alert letters are reflexed;
		now log ons letters are reflexed;
		now ought letters are reflexed;

chapter hawt thaw

the clump of hawt thaw is LLPish vanishing scenery in Saps' Pass. "It doesn't make much immediate sense, and it's probably not critically important to your quest. It's not in the way. But maybe thinking about it right will widen your horizons a bit."

a-text of hawt thaw is "RRYR". b-text of hawt thaw is "R???". parse-text of hawt thaw is "?[sp]?[sp]?[sp]?". hawt thaw is parse-spoilable.

instead of doing something with hawt thaw:
	if action is procedural, continue the action;
	say "From what you know of hawt thaw, it may not be entirely safe. It sort of appears and disappears with little rhyme or reason."

chapter thising

thising is an action applying to nothing.

understand the command "this" as something new.

understand "this" as thising.

carry out thising:
	if location of player is location of plebe:
		say "The plebe flinches a bit, but maybe you need something more general?";
	otherwise:
		say "No excuse for that sort of language. Really.";
	the rule succeeds;

chapter chewing

chewing is an action applying to one thing.

understand the command "chew" as something new.

understand "chew" as chewing.
understand "chew [something]" as chewing.

carry out chewing:
	if noun is gum:
		say "The gum looks like it tastes like clay." instead;
	try eating noun instead;

book Phat Path

book Hacks' Shack

Hacks' Shack is an innie room in Presto. Hacks' Shack is north of Phat Path. "[if shack was unvisited]You feel a sense of peace here but also one of mission. You feel the magnetic magic-net, the rebuff-buffer that will let you change stuff to stuff and keep out of E-Viral's snooping eye, but all those interjections you've been using need to give way to problem solving[otherwise]You're in the shack where you probably need to write a program or something[end if]. A [unless caps lock is off-stage]no longer [end if]dripping clock hangs on the wall[if scratch paper is reflexed]. You feel obliged not to [i]budge[r] [']til you figure out that computer. You must be close[end if]."

to say my-auth:
	say "[author of random visible badbook]";

after choosing notable locale objects when player is in shack:
	set locale priority of slab to 9; [slab should appear first]

to say a-the:
	say "[one of]a[or]the[stopping]";

for writing a paragraph about a thing (called gbg) in hacks' shack:
	if gbg is slab or gbg is futon or gbg is fount:
		say "The shack is prominently furnished with a [if fount is visible]restful looking fount too small to be a fountain[else]futon[end if] and a labs slab, which [one of]still [or][stopping]holds [a list of things on labs slab][if number of badbooks in hacks' shack is 1]. And oh dear, a copy of [my-auth]'s [my-bad], too[end if].";
		now all visible badbooks are mentioned;
		now labs slab is mentioned;
		now futon is mentioned;
		now fount is mentioned;
		continue the action;
	if gbg is listed in shack-mess:
		let a be 0;
		repeat with gbg2 running through shack-mess:
			if gbg2 is in shack:
				increment a;
		let b be a;
		say "[one of]This shack is a bit of a mess, too, because PROGRAMMERS. Maybe you could clean up (in your own way)[or]Still part of the mess here:[stopping] ";
		let firsts be true;
		repeat with myitm running through shack-mess:
			if myitm is in shack:
				if firsts is false and number of entries in shack-mess > 2:
					say ", ";
				now firsts is false;
				decrement a;
				if a is 0 and b > 1:
					say "and ";
				say "[if myitm is disk]that disk lying on the floor[else if myitm is flea][a-the] flea which looks dead[else if myitm is trim socks][one of]some[or]the[stopping] trim socks, though you don't need to dress up[else if myitm is gum][a-the] stick of gum[else if myitm is coal]the pile of coal[else if myitm is escaroles]some escaroles[else if myitm is casserole]a hot casserole[else][a-the] piece of scratch paper[end if]";
				now myitm is mentioned;
		say ".";
		continue the action;
	continue the action;

shack-mess is a list of thing variable. shack-mess is { disk, coal, socks, gum, scratch paper, flea, escaroles, casserole }.

chapter coal and cola

the pile of coal is a thing in shack. description is "Black and disgusting as rotted teeth. Good for energy, apparently.". "Coal lies here in a corner."

instead of taking coal:
	say "You don't need an armful of THAT."

a-text of coal is "RYRY". b-text of coal is "PGRY". parse-text of coal is "c[sp]o[sp]l[sp]a". coal is cheat-spoilable.

the fizzy cola is a singular-named thing. description is "The mug it's in seems to make it is more than usual, too. Cool.". the indefinite article of fizzy cola is "some"

Instead of doing something with the fizzy cola:
	if action is procedural, continue the action;
	say "Now that the fizzy cola's in the mug, you will ration it as you need to."

the bottle of dirty looking cola is a thing. description is "It's Café Fine Caffeine cola, and it's almost empty. In place of nutritional information, you read the following:[paragraph break]O-CAL!!! Soda -> A sod. Pop !-> O.P.P."

Does the player mean drinking dirty looking cola: it is very likely

check drinking dirty looking cola:
	say "[if mug contains dirty looking cola]You can sip it as you do your programming[otherwise]You don't want to guzzle it before you need to. In fact, you wish there would be a way to make more of it, because there really isn't much left. It'd be outstanding to have giant donuts, but you have what you have[end if]." instead;

check drinking mug:
	if mug contains fizzy cola:
		try drinking fizzy cola instead;
	otherwise:
		say "The mug's empty." instead;

understand "can" as dirty looking cola.

before inserting dirty looking cola into mug:
	if fizzy cola is in mug:
		say "This isn't a gross-out game. Plus, there's enough cola in the mug." instead;
	say "You drain the cola bottle. It fills the mug, and you take a tiny sip. The liquid level refills after a minute. It tastes like car fuel, which makes you careful--and hopeful for a far clue.";
	now dirty looking cola is in lalaland;
	now fizzy cola is in mug instead;

check inserting into mug:
	say "Only liquids would belong there." instead;

check inserting into (this is the cola/mug/censer rule) :
	if noun is fizzy cola:
		say "Bad idea to pour the fizzy cola out of the mug." instead;
	if noun is dirty looking cola:
		if second noun is on slab:
			say "Programmer rage! Love it!" instead;
		if noun is onyx censer:
			say "The censer wasn't made for that." instead;
		if second noun is not mug:
			say "You need to pour into something that can contain a liquid." instead;

chapter fount

the fount is a thing in shack. "A fount--too small to be a fountain[one of] (three keystrokes)[or][stopping]--is here. It is dry."

understand "fountain" as fount.

instead of drinking fount:
	say "It's dry, and besides, you need to drink literally of knowledge, not figuratively.[paragraph break]Besides, water doesn't have enough energy for the task ahead."

instead of switching on fount:
	say "You can't find a way to turn it on. It might overflow the shack as-is, anyway, so maybe it'd be better as something else."

instead of switching off fount:
	say "It already is."

a-text of fount is "RYRYR". b-text of fount is "PYRYR". parse-text of fount is "f[sp]-[sp]x[sp]-[sp]x". fount is cheat-spoilable.

Instead of taking the fount:
	say "It is heavier than it seems. Plus, it's too bulky."

description of fount is "It's relaxing to look at, even if it isn't running. Perhaps it was a fount of knowledge, and knowledge was just too dry for the water that was in it."

the futon is a thing. description is "It doesn't have any brand name like [randbla]. [unless cpuready]Like most futons, it's unsoft. You wouldn't want to sleep there unless you had some really tiring task ahead[else if slept is false]It looks almost comfortable. It's sewn with designs of all sorts of peels--banana, orange, apple, and some you can't identify. Like most futons, it's unsoft[otherwise]You're impressed you slept on it for so long. It looks lumpy now[end if].". "The futon you [if slept is false]made from the fount[else]slept on[end if] lies here."

instead of entering futon:
	say "It's not quite for sitting, but it may help you make [i]leeps[r] of logic."

Instead of taking the futon:
	say "You need to get programming, here, not interior decorating."

slept is a truth state that varies.

to decide whether cpuready:
	if keyboard is not on slab, decide no;
	if computer screen is not on slab, decide no;
	if caps lock is not part of keyboard, decide no;
	if disk is not in hard drive, decide no;
	if rebooted is false, decide no;
	decide yes.

chapter trim socks

a pair of trim socks are plural-named things in hacks' shack. "Trim socks lie here. They're too small for you to wear, but they look comfortable and efficient."

a-text of trim socks is "RYRRRYRRR". b-text of trim socks is "RYRRRYPPP". parse-text of trim socks is "x[sp]-[sp]x[sp]x[sp]x[sp]-[sp]c[sp]k[sp]s".

description of trim socks is "Small and narrow. Probably not critical to figure what they do, but they might save time down the road."

check taking socks:
	say "They're way too narrow for your feet. Plus, you don't know if someone wore them. If they can't help you do things more efficiently, then probably best not to mess with them." instead;

a pair of rom sticks are plural-named LLPish things. description is "You imagine it can't be too hard to open up the disk drive[if location of player is not hacks' shack] back at the shack[end if] and put them in.". the indefinite article of rom sticks is "a".

chapter escaroles

the escaroles are a plural-named thing in shack. description is "Typical bleah garnish. Nothing close to a hearty meal."

the casserole is an LLPish thing. description is "Piping hot, but not your style to eat. You're not sure what's in it, and you don't want to look too closely."

a-text of escaroles is "RYRRYRYRY". b-text of escaroles is "RYRRYRYRY". parse-text of escaroles is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-".

check taking casserole:
	say "It's a bit too hot for that. It'll probably stay that way. Plus, it's kind of icky and gross unless you need a ton of calories after a big workout." instead;

check giving the casserole to the yak:
	ignore the can't give what you haven't got rule;
	say "The yak makes an unfortunate noise and turns its nose up. You probably want to give it something a little more herbivorous. Or save it for those with more carnivorous tastes. Or both." instead;

check putting the casserole on the skid:
	ignore the can't put what's not held rule;
	say "The container is annoyingly slick. It would probably roll off, or maybe even shatter if you hit a bump. You would be better off bringing someone back to the shack, if you wanted to give it to them later. You know, after they finished a workout. Like carrying something even heavier on the skid.[paragraph break]";
	ital-say "if you're thinking of giving it to the yak, yaks are herbivores.";
	do nothing instead;

check taking the escaroles:
	say "Bleah. They seem like useless garnish." instead;

before fliptoing when mrlp is demo dome:
		say "This game tried to flip something, but it should not have. BUG." instead;

before fliptoing when mrlp is presto (this is the warn against SHATTER THREATS rule) :
	if noun is leaf or noun is mug or noun is dirty looking cola or noun is keyboard or noun is t-key or noun is skid or noun is disk or noun is rom sticks:
		if mrlp is not presto:
			say "[bug-report]" instead;
		if player is not in hacks' shack:
			if noun is keyboard:
				now try-keyboard is true;
			if yak is visible:
				say "The air of apathy the yak generates spreads to its yoke, which refuses to do what it should. You will need to find a nonviolent way to separate the yak from its yoke. Maybe you can find a way to put the bored yak to sleep." instead;
			if shack is not visited:
				say "You might not be safe from Elvira's SHATTER-THREATS legislation here. And you're not sure what to do with that, yet. But that feels right.";
				preef noun;
				do nothing instead;
			if noun is disk and yak is in lalaland:
				say "You probably want to go inside the shack before doing that. That stupid SHATTER-THREATS law and all. Do so now?";
				if the player yes-consents:
					say "Great!";
					move player to shack;
					move skid to shack;
					continue the action;
				else:
					say "You can't see much more to do with the skid now, though.";
					preef disk;
					do nothing instead;
			if noun is screen and shack is visited:
				say "You probably want to go inside the shack before doing that. That stupid SHATTER-THREATS law and all. Do so now?";
				if the player yes-consents:
					say "Great!";
					move player to shack;
					now player has censer;
					continue the action;
				else:
					say "OK, but you'll need to do so anyway to get out of here.";
					preef screen;
					do nothing instead;
			if noun is keyboard and yak is in lalaland:
				say "You probably want to go inside the shack before doing that. That stupid SHATTER-THREATS law and all. Do so now?";
				if the player yes-consents:
					say "Great!";
					move player to shack;
					move drab yoke to shack;
					continue the action;
			say "That stupid SHATTER-THREATS law might pick you up out here. Best to go in the shack and try again.";
			preef noun;
			do nothing instead;

the compiled code is a reflexive thing. description is "It's too much to consider, at once. It--doesn't quite work, but it does something, but it needs to budge."

after fliptoing compiled code:
	now USB is in shack;
	now golden dongle is in lalaland;
	continue the action;

a-text of compiled code is "RYRYR". b-text of compiled code is "RYRYR". parse-text of compiled code is "x[sp]-[sp]x[sp]-[sp]x".

check scaning computer screen:
	if compiled code is visible:
		try scaning compiled code instead;

instead of doing something with the compiled code:
	if action is procedural, continue the action;
	say "You can really only examine it--or--what do you do with code that won't budge or be dug?" instead;

check restarting the game when player is in shack:
	say "[if rebooted is false]You look over at the hard drive--and the blue and orange buttons--it doesn't quite need a restart. Hmm, what's the word, now. Or maybe you want to restart the game.[else]You've already restarted the computer. So if you're trying to restart it and not the game, you don't need to.[end if]";

after printing the locale description for shack when shack is unvisited:
	if computer screen is in austerer treasure:
		say "That hard drive could use a screen. Like the one you uncovered in the treasure room. Which you run back and get.";
		now player has computer screen;
	else if onyx censer is in austerer treasure and censer is prefigured:
		say "You remember that censer it would've been awkward to carry around. You decide to go back for it.";
		now onyx censer is in lalaland;
		now player has computer screen;
		reg-inc;
	else:
		say "That hard drive on the slab looks lonely without a monitor. No, not quite a monitor[if censer is prefigured]--you can probably change the onyx censer now.[else if player has the screen]--yours would do.[else if player has onyx censer]. Maybe something in your inventory can change up.[else]. Where to get one?[end if]";
	continue the action;

after fliptoing the computer screen (this is the turbo back to the shack rule):
	if shack is visited and player is not in shack:
		say "That screen would go great with the hard drive in the shack. So you go back there.";
		go-back hacks' shack;
		now player has screen;
	continue the action;

to go-back (rm - a room):
	say "[bold type]Back at [rm][roman type][paragraph break]";
	move player to rm, without printing a room description;

the block tying rule is not listed in any rulebook.

check tying it to (this is the put on the slab rule) :
	if noun is second noun:
		say "Tautology? Got ya, lout!" instead;
	if noun is dongle and second noun is drive:
		say "The drive and dongle are already tied together." instead;
	if noun is drive or noun is dongle:
		try tying second noun to noun instead;
	if second noun is hard drive or second noun is dongle or second noun is labs slab:
		try putting noun on labs slab instead;
	if noun is keyboard and second noun is screen:
		try tying second noun to noun instead;
	if second noun is keyboard and noun is screen:
		if keyboard is on slab and screen is on slab:
			say "They're both connected to the drive. No need to tangle things." instead;
		if keyboard is on slab:
			try putting screen on slab instead;
		if screen is on slab:
			try putting keyboard on slab instead;
		say "They keyboard and screen don't tie to each other but to the hard drive." instead;
	say "This game doesn't recognize the ATTACH/TIE verb for either of those objects. Perhaps it should, but you may be better off using PUT ABC ON/IN XYZ." instead;

after fliptoing scratch paper:
	now compiled code is part of the computer screen;
	if hawt thaw is in phat path:
		poss-d;
	if lamb is in Grey Gyre:
		poss-d;
	if sport ports are reflexive:
		poss-d;
	if player has rom sticks:
		now rom sticks are in lalaland;
	continue the action;

before gotoing in Hacks' Shack:
	consider the shack-south rule;
	if the rule failed:
		do nothing instead;

check going in Hacks' Shack (this is the maybe lock player in rule): [check going in shack]
	if noun is outside:
		try going south instead;
	if noun is not south:
		if keyboard is not off-stage and censer is not off-stage:
			say "Nothing [noun], but you need to just sit and finish things here anyway." instead;
	else:
		consider the shack-south rule;
		if the rule failed:
			do nothing instead;

after printing the locale description for hacks' shack (this is the auto-screen rule):
	if player has onyx censer:
		if censer is prefigured:
			now hacks' shack is visited;
			try fliptoing screen;
			if player has screen:
				say "You decide to put the screen you just made on the labs slab so you don't have to lug it around any more.";
				now screen is on labs slab;
	check-trivial-presto-llp;
	continue the action;

pt-discounted is a truth state that varies.

to check-trivial-presto-llp:
	if pt-discounted is true:
		continue the action;
	if player has censer or player has screen:
		if yak is in lalaland and player is in hacks' shack:
			if keyboard is in hacks' shack or keyboard is on slab:
				if lamb is in gyre:
					poss-d;
					now pt-discounted is true;
				if sport ports are reflexed:
					poss-d;
					now pt-discounted is true;
				if hawt thaw is in phat path:
					poss-d;
					now pt-discounted is true;
	continue the action;

this is the shack-south rule:
	if scratch paper is reflexed:
		say "You're so close. You must be. You can't [i]budge[r] until you...";
		the rule fails;
	if keyboard is not off-stage and screen is not off-stage:
		say "You should have what you need. It might be dangerous, or just plain distracting, to go back out with all this computer work.";
		the rule fails;
	if screen is off-stage:
		say "You feel you're missing something. You probably should see about [treas-west].";
	else if keyboard is off-stage:
		if yak is not in lalaland:
			say "That yak. Maybe you could release it from its yoke.";
		else:
			say "That drab yoke. What could it become?";
	the rule succeeds;

to say treas-west:
	if austerer is not visited:
		say "the area west of the hump you didn't get past yet";
	else if hoop is in austerer treasure:
		say "the hoop in Austerer Treasure";
	else:
		say "what the onyx censer could become";

a giant dead flea is a thing in hacks' shack. "A giant dead flea is here, probably not decomposing yet."

check taking flea:
	say "Eww. Gross. Germy. Taking dead plants? Okay. Dead pests? Not so okay." instead;

a-text of flea is "RYYR". b-text of flea is "RYYR". parse-text of flea is "x[sp]-[sp]-[sp]x". flea is cheat-spoilable.

description of giant dead flea is "It's not been dead too long, fortunately. It's already turning some combination of dark oranges, reds and browns. Which is nicer than how animals usually biodegrade."

a giant fallen leaf is a thing. description is "It's a beautiful collection of colors. If you were a herbivore, and you weren't colorblind, you probably couldn't resist eating it."

report putting leaf on skid:
	say "The leaf fits nicely there. It won't fall off.";
	set the pronoun it to the skid;
	the rule succeeds;

check taking leaf when leaf is on skid:
	ignore the can't put what's not held rule;
	if yak is visible:
		say "The yak might bite you if you tried." instead;
	say "No, it's probably easier to move on the skid." instead;

instead of eating the leaf:
	say "You are the wrong sort of animal for that.";

the gum is a singular-named thing in hacks' shack. description of gum is "It's wrapped and unchewed. The wrapper says it's never-ending gum that provides potentially infinite energy from one stick and a not-total-loss of flavor. It carries a warning against programming and chewing gum at the same time.". indefinite article of gum is "some".

a-text of gum is "RYR". b-text of gum is "RGR". parse-text of gum is "x[sp]u[sp]x". gum is any-spoilable.

instead of eating or chewing gum:
	say "Seriously. It's tough to program and chew gum at the same time.[paragraph break]No, I didn't mean it that way! I meant, the noise from your gum chewing would be distracting, with all that deep thinking you would have to do."

the mug is a container.

after printing the name of the mug while taking inventory:
	say " ([if fizzy cola is in mug]full of fizzy cola[else]empty[end if])";
	omit contents in listing; [trix]
	continue the action;

description of mug is "Beneath text ('CPU CUP' over a UPC symbol) is a message explaining it slowly refills whatever beverage you put in there, but only very slowly."

before exiting (this is the exiting is the only way out rule):
	unless the room outside of location of player is nowhere:
		continue the action;
	if number of viable directions is 1:
		let XY be a random viable direction;
		d "Going [XY].";
		if XY is not the noun:
			try going XY instead;
		else:
			move player to the room outside of location of the player;
	if location of player is cripple clipper:
		say "Drowning ails or roils a sailor." instead;
	if mrlp is troves:
		say "Exiting is not an option. You must earn the right to move on." instead;

before going outside (this is the out is the only way rule):
	unless the room noun of location of player is nowhere:
		continue the action;
	if number of viable directions is 1:
		let XY be a random viable direction;
		if XY is not the noun:
			try going XY instead;
		else:
			move player to the room outside of location of the player;
	if location of player is cripple clipper:
		say "Drowning ails or roils a sailor." instead;
	if mrlp is troves:
		say "Exiting is not an option. You must earn the right to move on." instead;

check an actor exiting (this is the custom not in anything rule):
	let the local room be the location of the actor;
	if the container exited from is the local room, say "EXIT/OUT isn't usable here--it's used when there's only one direction, or you are told you can go OUT." instead;

the custom not in anything rule is listed before the can't exit when not inside anything rule in the check exiting rulebook.

The dripping clock is scenery in Hacks' Shack. "It's motionless[if caps lock is off-stage], except for a very slow drip from the bottom. (If you want, you can pretend it symbolizes time slowly dripping away.) A small thick opaque puddle registers how much has leaked from the clock[otherwise] and no longer leaking, and you can't see the puddle below where the clock sap used to be[end if]."

instead of taking dripping clock:
	say "Whatever it leaked might be, like, radioactive or something. No thanks.";

does the player mean doing something with clock sap: it is unlikely. [disambig vs dripping clock]

the labs slab is a supporter in Hacks' Shack. it is fixed in place. understand "table" as labs slab.

port-warn is a truth state that varies.

check inserting into labs slab (this is the on not in slab rule):
	say "[if port-warn is false]The labs slab has no ports, but you can put stuff on it.[else](on, not in)[line break][end if]";
	now port-warn is true;
	try putting the second noun on the labs slab;

check putting a thing on labs slab (this is the check what to put on labs slab rule):
	if noun is on labs slab:
		ignore the can't put what's not held rule;
		say "It already is!" instead;
	if second noun is labs slab:
		if noun is disk or noun is caps lock:
			say "That sort of belongs on the labs slab, but it needs to be a part of something." instead;
		if noun is rom sticks:
			try inserting noun into drive instead;
		if noun is not computer screen and noun is not keyboard:
			say "That's not something that you can hook up to the computer." instead;

after putting a thing on the labs slab:
	if number of things on labs slab is 3:
		say "Only one more piece of hardware is needed, and the computer will work." instead;
	else if number of things on labs slab is 4:
		say "You can now do computery things unimpeded! Hooray!" instead;
	else:
		say "Too [if number of things on labs slab > 3]much[else]little[end if] is on the labs slab. This is a bug but not a game-breaker." instead;

instead of taking labs slab:
	say "The labs slab is there so you don't have to take stuff. Plus it's too heavy."

description of labs slab is "It's far from a plain old table, but you can call it that if you want. It's quite ergonomic and sturdy and not just because none of the twenty-two other things you (yes, you) could zap it to make any sense."

the hard drive is a container on the labs slab. understand "disk drive" and "eco-trump computer" and "computer" as hard drive.

does the player mean doing something with hard drive: it is likely;

instead of opening drive:
	say "You don't need to. You can just put the sort of stuff that goes in disk drives in the drive.";

the golden dongle is part of the hard drive. description of golden dongle is "The golden dongle looks powerful and important. Computers in Yorpwald don't have one unless they're really important. It can do stuff like dual-op upload, whatever that is, but even better, it's more universal than a USB port, and you can attach all sorts of things to it."

instead of doing something with dongle:
	if action is procedural, continue the action;
	if current action is taking:
		say "You need the dongle to connect the hard drive to other computer parts." instead;
	say "You don't need to do anything fancy with the dongle."

the USB is a vanishing thing. description is "It's an ordinary USB. Or it would be, around anyone but you.". "The USB that the golden dongle degenerated into lies here."

a-text of USB is "RYR". b-text of USB is "RY?". parse-text of usb is "x[sp]u[sp]x". usb is any-spoilable.

usb-scan-warn is a truth state that varies.

check scaning USB:
	if usb-scan-warn is false:
		now usb-scan-warn is true;
		say "You wonder if you need to. There aren't many possibilities. There may even be two ways to change it. After all, it's pretty universal. Scan anyway?";
		if the player yes-consents:
			say "Ok.";
		else:
			say "Good sport!" instead;

instead of doing something with usb:
	if action is procedural, continue the action;
	if current action is taking:
		say "Well, you don't need to take it in THAT sense." instead;
	say "No need to do anything fancy with the USB. Well, anything fancy other than using your fancy powers. Really, anything fancy with them. It's only three letters." instead;

to say sub-bus:
	let issub be false;
	if the player's command includes "sub":
		now issub is true;
	now crust is in lalaland;
	say "You hear music by Verdi. '[if issub is true]Diver[else]Drive[end if] time!' intones the mechanical [if issub is true]sub[else]bus[end if] your USB turned into. Man, it really is universal. The [if issub is true]pilot[else]driver[end if] is...one of the nerds from the Anti-Cool Location way back in the metros! He welcomes you in. 'Navig-Gavin. Nice work.' / 'I know.' / 'Rec.' This SecuriCruise is not a Dire Ride (a ton...)' but you fall asleep before you can hear the rest. Wham, doer! Homeward";

does the player mean doing something with the hard drive: it is unlikely.

description of hard drive is "It's an old-school hard drive (brand name: Eco-Trump Computer) where you put clunky square disks. It has a small blue button and a small orange button, as well as a golden dongle you don't want to mess with."

The small blue button is part of the hard drive. understand "reboot/ button" as small blue button. it is flippable.

The small orange button is part of the hard drive.

a-text of small blue button is "RYRYYR". b-text of small blue button is "RYPYGR". parse-text of blue button is "x[sp]-[sp]b[sp]-[sp]o[sp]x". blue button is cheat-spoilable.

description of small blue button is "'To be or'"

description of small orange button is "'Not to be'"

rebooted is a truth state that varies.

check pushing small blue button:
	if the player's command does not include "reboot":
		say "You're not sure what that button does. You see red thinking it's a [i]bore to[r] push again. Or I'm not sure you are, and I'm looking out for my fellow computers, here." instead;
	if player has keyboard and keyboard is not on slab:
		say "The keyboard isn't connected. This probably wouldn't be fatal, but why not do first things first?";
		preef small blue button instead;
	if disk is not in hard drive:
		say "It's risky to boot without a disk, like that [if disk is in shack]disk right there[else]skid used to be[end if], in the disk drive. Much less reboot.";
		preef small blue button instead;
	if computer screen is not on slab:
		say "You wouldn't know if anything happened, since there's no screen on the table[if player has computer screen]. The one in your inventory should do[end if].";
		preef small blue button instead;
	if keyboard is not visible:
		say "You have nothing to type with, so it doesn't do much good.";
		preef small blue button instead;
	if rebooted is true:
		say "No need to reboot twice." instead;
	now small blue button is unfigured;
	now small blue button is reflexed;
	say "The button changes into a REBOOT button, which you press[if player has rom sticks]--though first those ROM sticks will put your PPC on PCP to code in CPP and avoid PCRam Cramp[end if]. The disk drive hums for a while, the computer screen lights up with a fractal shaped like a flatcar, and after a stallin['] install (and several booster-reboots,) the code you saw before reappears on the screen.";
	set the pronoun it to computer screen;
	if player has rom sticks:
		now rom sticks are in lalaland;
	reg-inc;
	now rebooted is true instead;

understand "code/program" as screen when rebooted is true and player is in shack.

check pushing small orange button:
	say "It's too bent to push. You can probably just restart the computer when you need to." instead;

check taking (this is the can't remove computer parts from labs slab rule):
	if noun is in hard drive:
		say "The disk is where it should be." instead;
	if noun is on labs slab:
		say "[The noun] is where it needs to be." instead;

check inserting it into (this is the disk in drive and wired computer rule):
	if noun is disk:
		ignore the can't insert what's not held rule;
		if noun is in hard drive:
			say "The disk's already in the hard drive." instead;
	if second noun is hard drive:
		if noun is not disk:
			say "[if noun is rom sticks]You'll wait [']til you're ready to program[else]It's a disk drive. Only disks fit in there[end if]." instead;
		if keyboard is off-stage:
			say "You don't have enough pieces to the computer to make it work. Specifically, no input device." instead;
		if computer screen is off-stage:
			say "(Protip: you might want to get something like a screen to figure what's going on.)" instead;

chapter badbooks

to say my-bad:
	say "[random badbook in shack]";

report taking a badbook:
	say "You look around guiltily. Thankfully, nobody's here to see you take it.";
	the rule succeeds;

check opening a badbook:
	say "Try reading it instead." instead;

check closing a badbook:
	say "It is, but you can try READing it." instead;

a badbook is a kind of thing. a badbook has text called theme. a badbook has text called author. a badbook is usually cluey.

does the player mean doing something with a badbook when player is in shack: it is likely.

does the player mean giving a badbook to the yak: it is likely.

does the player mean reading catechism when yak is in lalaland: it is very likely.

a-text of a badbook is usually "RYORYYRR".

understand "book" and "bad book" as a badbook.

does the player mean doing something with a visible badbook: it is very likely.

Bakery Do is a badbook. author of Bakery Do is "DeRoy Bak". theme of Bakery Do is "overoptimistic views on enterpeneurism".

a-text of Bakery Do is "RYORYYRR". b-text of Bakery Do is "RYORYYRR". parse-text of bakery do is "x[sp]-[sp]y[sp]x[sp]-[sp]-[sp]x[sp]x".

Bred Okay is a badbook. author of Bred Okay is "Bad Korey". theme of Bred Okay is "pointless rebellion".

a-text of Bred Okay is "RYORYYRR". b-text of Bred Okay is "RYORGYRR". parse-text of bred okay is "x[sp]-[sp]y[sp]x[sp]o[sp]-[sp]x[sp]x".

Day Broke is a badbook. author of badbook is "Rob Keady". theme of Day Broke is "schmaltzy supernatural love affairs".

a-text of Day Broke is "RYORYYRR". b-text of Day Broke is "RYBPYYRR". parse-text of day broke is "x[sp]-[sp]y[sp]b[sp]-[sp]-[sp]x[sp]x".

Dear Koby is a badbook. author of Dear Koby is "Yoda Berk". theme of Dear Koby is "thinly-veiled wishful-thinking autobiography and cyberspace epistles".

a-text of Dear Koby is "RYORYYRR". b-text of Dear Koby is "RGORYYRR". parse-text of dear koby is "x[sp]e[sp]y[sp]x[sp]-[sp]-[sp]x[sp]x".

eBay Dork is a badbook. author of eBay Dork is "Kary Bode". theme of eBay Dork is "puberty and predictable nonconformity".

a-text of eBay Dork is "RYORYYRR". b-text of eBay Dork is "RYORYYPR". parse-text of ebay dork is "x[sp]-[sp]y[sp]x[sp]-[sp]-[sp]r[sp]x".

Yo Be Dark is a badbook. author of Yo Be Dark is "Dr. Bo Kaye". theme of Yo Be Dark is "the hopelessness of hopelessness". printed name of Yo Be is "Yo, Be Dark".

a-text of Yo Be Dark is "RYORYYRR". b-text of Yo Be Dark is "RYORYGPR". parse-text of Yo Be Dark is "x[sp]-[sp]y[sp]x[sp]-[sp]a[sp]r[sp]x". yo be dark is cheat-spoilable.

description of a badbook is "[the item described], by [author], is a hopelessly simplistic look at [theme of item described] that rose to inexplicable bestsellerdom and consequent bestseller-movie adaptation. You've never read it, though you recall it's even worse than [ev-worse]. Or maybe it's the other way around. Or maybe it's true both ways, somehow."

a badbook can be unalluded or alluded. a badbook is usually unalluded.

to say ev-worse:
	if number of unalluded badbooks is 0:
		let mybk be a random off-stage badbook;
		say "[mybk] by [author of mybk]";
	else:
		let mybk be a random off-stage unalluded badbook;
		now mybk is alluded;
		say "[mybk] by [author of mybk][if number of unalluded badbooks is 0] (that's the last one)[end if]";

check reading a badbook:
	if yak is in lalaland:
		say "You shouldn't. You really shouldn't. But you do. It...it's pretty indigestible. Nothing lasting, but enough to inspire an animal urge to bang your head against the floor." instead;
	say "It would probably make you dumber just reading it for ironic laughs. That's the last thing you need right now." instead;

chapter pouring

Understand the command "put [other things] in/inside/into [something]" as something new.

Understand "put [other things] in/inside/into [something]" as pouring it into.

check pouring it into:
	if noun is fizzy cola:
		say "It's already in the mug." instead;
	if noun is dirty looking cola:
		try inserting noun into second noun instead;
	say "That won't work. You need to pour a liquid (a small amount) into something." instead;

chapter rebooting

rebooting is an action applying to nothing.

understand the command "reboot" as something new.

understand "reboot" as rebooting.

carry out rebooting:
	if player is not in hacks' shack:
		say "There's nothing to reboot here." instead;
	try pushing blue button instead;

chapter clock sap

some clock sap is scenery in Hacks' Shack. description is "WHAT IS THIS, you think to yourself as you inspect the clock sap closer. You wonder how THE CLOCK ISN'T DRAINED since it's dripping at a pretty constant rate. CONFUSING!"

check taking clock sap:
	say "The sap is too sticky." instead;

a-text of clock sap is "RYRRRYRR". b-text of clock sap is "PYRRRYRR". parse-text of clock sap is "c[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x[sp]x".

understand "puddle" as clock sap.

a disk is a thing. description is "This disk is plain, chunky and 3 1/4' square. Small print indicates the disk contains not only a powerful compression algorithm that allows portability but also critical system repair programs that only run on startup."

a-text of disk is "RRYR". b-text of disk is "RRYR". parse-text of disk is "x[sp]x[sp]i[sp]x". disk is cheat-spoilable.

instead of eating the clock sap:
	say "DUDE DON'T EVEN!!!"

check taking the clock sap:
	say "You start to grab it, but you imagine a loud voice. Something like WHAT DOES CLOCK SAP HAVE TO DO WITH A COMPUTER." instead;

the caps lock button is a thing. understand "capslock" and "capslock button" as caps lock.

description of caps lock is "[if caps lock is part of the keyboard]It is fitting into the keyboard nicely[otherwise]You could probably snap it into a keyboard[end if]."

the t-key is part of the keyboard. the t-key is llpish, reflexive and privately-named. printed name of t-key is "[if t-key is reflexive]TBA[else]TAB[end if] key". description is "[if t-key is reflexive]It says TBA but could be...abort or...hmm[else]It's a tab key, useful for keeping code organized[end if]."

check fliptoing t-key:
	if yak is in location of player:
		say "The yak generates an apathy that doesn't allow this. Yet." instead;

check scaning t-key:
	say "You sense there can't be much to do with something saying TBA. Still, go ahead and scan?";
	unless the player yes-consents:
		say "OK, you should get it." instead;

a-text of t-key is "RYR". b-text of t-key is "PYR". parse-text of t-key is "t[sp]a[sp]b". t-key is any-spoilable.

understand "tba key" and "tba/key" as t-key when t-key is reflexive.

understand "tab key" and "tab/key" as t-key when t-key is reflexed.

The schematic catechism is a thing. it is on the labs slab.

does the player mean doing something with catechism when player is in shack: it is likely;

instead of scaning catechism:
	say "You think back to an annoying computer science professor who raved you just can't scan books like this and hope to get useful information.[paragraph break]He's literally right, here, but he probably meant just reading, though[if catechism is examined]. As you already did[end if].";

understand "algorithms logarithms" and "algorithms/logarithms" and "textbook" and "text/book" as schematic catechism.

instead of taking catechism:
	say "It's pretty much tied to the table and not worth untying--it's too heavy, anyway."

after examining catechism for the first time:
	d "[list of things on labs slab].";
	d "[number of things on labs slab].";
	say "Well, that was probably too technical. You peek at the introduction. Page 1, 'Noob-Boon: Hi-Tech Itch, Eh?' condescendingly but effectively lays out the basics:[line break]--your favorite frustration word, major or minor, doesn't make you a better programmer.[line break]--create and assemble your materials first[line break]--then and only then, get to the programming actions and stuff[if number of things on labs slab > 2].[paragraph break]Well, you already started assembling stuff. Yay[end if]. You tackle a whole droll hello world--the rest will come later. You can, of course, look for random information for fun, but you'll probably naturally use the book for reference once you get seriously programming.[line break]";
	pad-rec "hacking";
	the rule succeeds;

description of schematic catechism is "[one of]The title is ALGORITHMS, LOGARITHMS, and it's by Olga Smirth. Olga's goals seem to be a slog, all 1337 pages, and they footnote too often. There's probably far more than you need to know here to get basic programming done[or]Maybe something new'll turn up[stopping]. You flip to a random page, which burgeons with information useless to your task at hand: [randbla]"

no-yak is a truth state that varies.

after reading catechism when yak is in shack and no-yak is false:
	say "The yak's ears perk up a little as you mumble to yourself on reading. It's all pretty neutral and over the yak's head. Perhaps something simpler would give it more of a reaction.";
	now no-yak is true;
	continue the action;

the disk is in Hacks' Shack. "[if disk is handled]You see a disk lying on the labs slab here[else]A disk is lying on the floor here[end if]."

the skid is a supporter. "The skid lying here [skid-do]."

to say skid-do:
	if yak is in lalaland:
		say "has done its job. Well, as the skid. Perhaps it's more useful as what it was";
		continue the action;
	say "can probably be pushed around[if number of things on skid > 0]. It's currently carrying [the list of things on skid][end if]";

the skid is pushable between rooms.

a-text of skid is "RYRR". b-text of skid is "RYRR". parse-text of skid is "x[sp]i[sp]x[sp]x". skid is cheat-spoilable.

instead of taking the skid:
	say "It's too heavy, but you can pull or push it in the direction where you want it to go."

the description of the skid is "It's three feet wide by six feet, and it's got small straps and niches so you can put an animal on them. It's also got a handy rope so you can PULL it even without sledge ledges."

the skidrope is a privately-named thing. The skidrope is part of the skid. understand "rope" as skidrope when skidrope is visible.

description of skidrope is "It's attached so you can pull the skid from room to room."

check pulling skidrope:
	try pulling skid instead;

check fliptoing scratch paper:
	if player is not in hacks' shack:
		say "There is no computer around.";
		preef scratch paper instead;
	if computer screen is not visible:
		say "Good idea, but tough without a screen.";
		preef scratch paper instead;
	if keyboard is not visible:
		say "Good idea, but tough to program without a keyboard.";
		preef scratch paper instead;
	if keyboard is not on slab:
		say "Good idea, but first, you probably want to put the keyboard on the slab.";
		preef scratch paper instead;
	if caps lock is not part of the keyboard:
		say "[one of]You try but get EXCESSIVE UPPERCASE ERROR. Even converting the code in all upper case, you'd also have to refer to lower-case include files and so forth. You try other work-arounds, like the shift key, but the computer holds all the chips, somehow. (Sorry.) You must be close to a successful compile[or]You need to get rid of that uppercase to successfully compile your code[stopping].";
		preef scratch paper instead;
	if disk is not in hard drive:
		say "A DISK, I'D ASK pops up. You realize that [if disk is in lalaland]you can change the skid back, due to the lossless compression algorithm[else]the disk would fit fine[end if]." instead;
	if rebooted is false:
		say "You get one of those annoying NEGLECT A CLEAN GET?! errors that proclaims this version so riven needs a raged-up upgrade with autolibs['] bailouts. The automatic installer is on nil-alerts. They'll need a manual un-maul. Perhaps you need to do something to reset the computer--a[if hard drive is examined]nother[end if] look at the drive might help.";
		preef scratch paper instead;
	if disk is not in hard drive:
		say "You probably want to save your work to disk.";
		preef scratch paper instead;
	if slept is false:
		if speel is off-stage:
			say "You get an NEED IF-DEFINE error the first time you try to compile. 'Up late, a letup,' you think restlessly and dreamily to yourself, 'Then fail the final!'[paragraph break]You're just too exhausted to put up with another compiling speel (you're too tired to check if that's spelt right)...slipping on virtual peels...probably you just switched something or got something backwards.";
			now speel is in hacks' shack;
		else:
			say "That stupid NEED IF-DEFINE and that speel, still. You're slipping on peels, unsure what you switched or got backwards[one of][or]. Maybe you misspelled a variable, but you aren't up to logic leeps[stopping].";
		preef scratch paper instead;

the speel is auxiliary scenery. "The jargon's a bit beyond you. Maybe if your mind were fully sharp, you'd know what to do."

instead of doing something with the speel:
	if action is procedural, continue the action;
	say "It's just plain computer text.";

a-text of speel is "RRYYR". b-text of speel is "PRGGR". parse-text of speel is "s[sp]x[sp]e[sp]e[sp]x". speel is cheat-spoilable.

check inserting into the keyboard (this is the insert-keyboard rule):
	ignore the can't insert into what's not a container rule;
	try putting noun on second noun instead;

check putting the keyboard on (this is the keyboard-on-something rule):
	ignore the can't put what's not held rule;

check putting on the keyboard (this is the complete-keyboard rule):
	ignore the can't put onto what's not a supporter rule;
	if noun is caps lock:
		if caps lock is part of the keyboard:
			say "It already is." instead;
		say "It fits in perfectly, right beneath the [if t-key is reflexed]TAB[else]TBA (ehh? That's not quite right)[end if] key.";
		now caps lock is part of the keyboard instead;
	otherwise:
		say "That's not a key that needs to fit in the keyboard." instead;

does the player mean doing something with compiled code: it is likely.

check fliptoing compiled code:
	if scratch paper is not reflexed:
		say "No hope of debugging when you can't even build! No, what is it? Something in the polemic, all garbled.";
		preef compiled code instead;
	if fizzy cola is not in mug:
		say "The process of debugging is going to take a while. You will need some sort of energy[if dirty looking cola is visible]. That bottle of cola just won't be enough for the task ahead[otherwise]. That coal won't cut it. Too early 20th century[end if].";
		preef compiled code instead;

chapter showing

block showing rule is not listed in any rulebook.

show-warn is a truth state that varies.

carry out showing it to:
	if show-warn is false:
		say "(Showing usually means giving. I'll try that. Either will work okay.)[paragraph break]";
		now show-warn is true;
	try giving noun to second noun instead;

chapter keyboarding

check fliptoing keyboard when yak is visible:
	say "The yak emits an air of aggressive apathy. It's like the yak is foiling your attempts, or perhaps you wonder if the yoke might do something nasty to the yak when it changes.[paragraph break]Perhaps it would be an act of kindness to move the yak from bored to sleepy. A bedtime song or story or something.";
	preef keyboard instead;

after fliptoing keyboard:
	now leaf is in lalaland;
	check-trivial-presto-llp;
	continue the action;

the piece of scratch paper is a reflexive thing in hacks' shack.

every turn when scratch paper is reflexed and usb is not in shack and player is in shack and gum is in lalaland (this is the hint debug verb rule) :
	say "You find yourself pacing around muttering at the computer. BUDGE, BE DUG, BUDGE.";

check fliptoing scratch paper:
	if computer screen is not visible:
		say "Very hard without seeing what you're doing." instead;
	if computer screen is not on slab:
		say "Hmm. You may want to hook the screen up. Do so?";
		if the player direct-consents:
			now computer screen is on slab;
		else:
			say "Ok, but by 'may want' I meant 'really probably need to.'" instead;

does the player mean doing something with the teariest treatise when Strip of Profits is visited: it is unlikely.

description of scratch paper is "[one of]It's a [i]polemic[r] about programming languages, processors, and user-friendliness in general. E-trash haters too. The no-decor coder credo seems right, but he's probably leaving some obvious computer action out, and you would hate to have to meet him[or]The polemic doesn't make any more sense the second time through[stopping]. You see a messy signature at the bottom."

a-text of scratch paper is "RYRRYRY". b-text of scratch paper is "RGRRYRY". parse-text of scratch paper is "x[sp]o[sp]x[sp]x[sp]-[sp]x[sp]-".

the signature is part of the scratch paper.

description of signature is "It's in red and takes a bit of time to decipher. [one of]MEL COPI is this guy's name. There's a bit more[or]The author rails against the McPoeil method[or]The author compares a manual to a lice mop[cycling]."

understand "polemic" as scratch paper.

book Volt Maze [L to V]

a mazeroom is a kind of room. the printed name of a mazeroom is usually "Nowt Town". a mazeroom is usually innie.

the specification of mazeroom is "A room you don't need to visit at all but which might give clues."

l-m is a privately-named person. understand "lev matzo" and "lev/matzo" as l-m when lev-first. printed name of l-m is "Lev Matzo".

to decide whether lev-first:
	if m-l is not off-stage, decide no;
	if l-m is in Unwary Runway or l-m is in lalaland, decide yes;
	decide no;

m-l is a privately-named person. understand "matzo lev" and "lev/matzo" as m-l when m-l is not off-stage. printed name of m-l is "Matzo Lev".

m-l is a person. "[one of]A man introducing himself as[or][stopping] Matzo Lev is here, more scannable than Lev Matzo."

Tom Alvez is a person. "[one of]A man introducing himself as[or][stopping] Tom Alvez is here, more scannable than his predecessors."

a-text of m-l is "RYRYRRYR". b-text of m-l is "PGRYRRYP". parse-text of m-l is "m[sp]a[sp]x[sp]-[sp]x[sp]x[sp]-[sp]v". m-l is cheat-spoilable.

a-text of l-m is "RYRYRRYR". b-text of l-m is "RYRYRPYR". parse-text of l-m is "x[sp]-[sp]x[sp]-[sp]x[sp]t[sp]-[sp]x".

a-text of Tom Alvez is "RYRYRRYR". b-text of Tom Alvez is "RYRYPRYR". parse-text of tom alvez is "x[sp]-[sp]x[sp]-[sp]l[sp]x[sp]-[sp]x".

description of l-m is "Perfectly unremarkable and unimpressed with your (not) solving this maze. He looks curiously at your settler."

description of m-l is "Perfectly unremarkable and unimpressed with your (not) solving this maze. He looks curiously at your settler."

description of Tom Alvez is "Perfectly unremarkable and unimpressed with your (not) solving this maze. He looks curiously at your settler."

voltzap is a truth state that varies.

symp-yet is a truth state that varies.

check going nowhere (this is the zaphint rule) :
	if location of player is a mazeroom or location of player is Unwary Runway:
		now voltzap is true;
		say "[one of]You walk into a wall, which goes ZVT. 'Lame-o,' you think, seeing red. Maybe that ZVT was a VZT[or]You decide against touching a wall to see the (ZVT/VZT)/Lame-o routine and see red again at the memory[stopping]";
		if number of npcish people > 0 and symp-yet is false:
			say ". [random npcish person] cringes";
			now symp-yet is true;
		say "." instead;

before going up when location of player is a mazeroom or location of player is Unwary Runway (this is the photopia reference rule) :
	say "You know, there was one really fun text adventure where this was the solution. I'd be plagiarizing if that was here. And if you haven't played it, I don't want to spoil it." instead;

a direction can be viable.

definition: a direction (called dir) is viable:
	if player is in phat path and dir is north:
		decide no;
	if player is in Lapsin' Plains and dir is inside and span pans are in Lapsin' Plains:
		decide no;
	if player is in frontage and atmo-moat is in frontage and dir is west:
		decide no;
	if player is in alcoves and merle is in frontage and dir is west:
		decide no;
	if player is in gates stage and player does not have passport and dir is north:
		decide no;
	if player is in arches and sardine is in arches and dir is north:
		decide no; [these are individual cases]
	unless the room dir from location of player is nothing:
		decide yes; [this is the main one. If a room's there, go]
	if player is in Horned Hedron and dir is inside and walleyes are in lalaland and o-t is reflexed:
		decide yes; [these are fringe cases. Again, you can enter certain places etc. once traps are removed]
	if player is in Largely All-Grey Gallery and dir is inside:
		decide yes;
	if player is in cavern and dir is inside and act-ruin curtain is in lalaland:
		decide yes;
	decide no;

to say exits-lead:
	say ". The walls glow[if voltwarn is false] like an old static electricity ball from that physics class where you learned so much[end if]";
	say ". [if number of viable directions is 1]The only exit leads[otherwise]Exits lead[end if] [list of viable directions]";

voltwarn is a truth state that varies.

after printing the locale description for r22 when voltzap is false and voltwarn is false:
	say "Boy, this maze is getting annoying quickly. You briefly wonder if running into a wall might give a hint about what to do.";
	now voltwarn is true;
	continue the action;

the description of mazeroom is "You're in a maze room with no distinguishing features[exits-lead].";

check going to nowt town when player was in Grey Gyre:
	say "[one of]You hope the maze isn't too big. Then you hope there's a quick way around it--[if zany meter is examined]the zany meter seems to indicate there might be[else]maybe the zany meter has advice[end if][or]You re-enter, not knowing whether to feel bad you're [if Unwary Runway is visited]trying[else]not even patient enough[end if] to brute-force things and run through the maze or bad you want an easy way through[if voltzap is false and Unwary Runway is visited] or too scared to touch any walls[end if][if Unwary Runway is visited and zany meter is unexamined] or too hasty to even read that zany meter this time around[end if][stopping]."

Nowt Town is north of Grey Gyre. Nowt Town is in Presto. "You can exit back south or hit the maze proper to the west. A big L is tiled into the floor here[if m-l is in lalaland]. Nothing really seems to have changed about the maze several times through, and you may flip if you have to go through the L-to-V maze again[end if]."

the big l is scenery in nowt town. "It's a decent enough example of an L[if r00 is unvisited]. Maybe there are other letters in the maze[end if].". understand "letter" and "letter l" as big l when player is in nowt town.

[is a mazeroom/a mazeroom is usually in presto]

big-let is a privately-named backdrop. big-let is in r10,r00,r01,r02,r12,r22,r32,r33,r23,Unwary Runway. printed name of big-let is "the big letter"

the maze walls are a reflexive plural-named uncluing useless backdrop. the walls are in grey gyre, r00, r01, r02, r03, r04, r10, r11, r12, r13, r14, nowt town, r21, r22, r23, Unwary Runway, r30, r31, r32, r33, r34, r40, r41, r42, r43, and r44.

n-t-air is a reflexive plural-named privately-named backdrop. description is "[bug-report]". n-t-air is in grey gyre, r00, r01, r02, r03, r04, r10, r11, r12, r13, r14, nowt town, r21, r22, r23, Unwary Runway, r30, r31, r32, r33, r34, r40, r41, r42, r43, and r44.

a-text of maze walls is "RYRYRRYR". b-text of maze walls is "RYRYRRYR". parse-text of maze walls is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

check fliptoing maze walls:
	if player is not in Grey Gyre:
		say "You figure it would be a very good idea to move out of the maze before saying that, in case you wind up vanishing along with the maze. So you head back outside as you came. This thinking ahead will be one more thing to congratulate yourself about, at any rate.";
		move player to Grey Gyre, without printing a room description;

description of maze walls is "[if player is in grey gyre]Up north[else]This[end if] is a volt maze, but they don't seem juiced enough to zap you good. Running into them might be a useful lesson in character building. Or an outright clue."

instead of touching walls:
	say "[if player is in grey gyre]Nothing. Maybe it's the inside of the walls, in the maze, that is charged[else][one of]You feel a[or]The same[stopping] small electric jolt[one of][or], again[stopping][end if]."

description of big-let is "It's a letter[if r10 is visited]. Much like back to the L you saw at the beginning[else]. Maybe there are others later along[end if]."

understand "floor" as big-let.

understand "big/letter m" and "letter/m" as big-let when player is in r10.
understand "big/letter n" and "letter/n" as big-let when player is in r00.
understand "big/letter o" and "letter/o" as big-let when player is in r01.
understand "big/letter p" and "letter/p" as big-let when player is in r02.
understand "big/letter q" and "letter/q" as big-let when player is in r12.
understand "big/letter r" and "letter/r" as big-let when player is in r22.
understand "big/letter s" and "letter/s" as big-let when player is in r32.
understand "big/letter t" and "letter/t" as big-let when player is in r33.
understand "big/letter u" and "letter/u" as big-let when player is in r23.
understand "big/letter v" and "letter/v" as big-let when player is in Unwary Runway.

nowt-town-p is a privately-named room. it is in lll. description of nowt-town-p is "[bug-report]." [this is a small internal-map hack]

r10 is a privately-named mazeroom in Presto. r10 is west of nowt-town-p. "A big M is tiled into the floor here[exits-lead]."

r00 is a privately-named mazeroom in Presto. it is west of r10. "A big N is tiled into the floor here[exits-lead]."

understand "r00" as r00 when debug-state is true. [this is a very silly hack for testing a specific mistake case]

r01 is a privately-named mazeroom in Presto. it is north of r00. "A big O is tiled into the floor here[exits-lead]."

r02 is a privately-named mazeroom in Presto. it is north of r01. "A big P is tiled into the floor here[exits-lead]."

r03 is a privately-named mazeroom in Presto. it is north of r02.

r12 is a privately-named mazeroom in Presto. it is east of r02. "A big Q is tiled into the floor here[exits-lead]."

r11 is a privately-named mazeroom in Presto. it is south of r12.

r21 is a privately-named mazeroom in Presto. it is east of r11.

r31 is a privately-named mazeroom in Presto. it is east of r21.

r22 is a privately-named mazeroom in Presto. it is east of r12. "A big R is tiled into the floor here[exits-lead]."

understand "r22" as r22 when debug-state is true. [this is a very silly hack for testing a specific mistake case]

r32 is a privately-named mazeroom in Presto. it is east of r22. "A big S is tiled into the floor here[exits-lead]."

r42 is a privately-named mazeroom in Presto. it is east of r32.

r41 is a privately-named mazeroom in Presto. it is south of r42.

r40 is a privately-named mazeroom in Presto. it is south of r41.

r30 is a privately-named mazeroom in Presto. it is west of r40.

r43 is a privately-named mazeroom in Presto. it is north of r42.

r44 is a privately-named mazeroom in Presto. it is north of r43.

r34 is a privately-named mazeroom in Presto. it is west of r44.

r33 is a privately-named mazeroom in Presto. it is north of r32. "A big T is tiled into the floor here[exits-lead]."

r23 is a privately-named mazeroom in Presto. it is west of r33. "A big U is tiled into the floor here[exits-lead]."

r13 is a privately-named mazeroom in Presto. it is west of r23.

r14 is a privately-named mazeroom in Presto. it is north of r13.

r04 is a privately-named mazeroom in Presto. it is west of r14.

Unwary Runway is an innie room in Presto. it is north of r23. "A big V is tiled into the floor here. You can go back south, but ahead things narrow--it's a bit scary, and you could be ambushed. Maybe it's worth a try[if l-m is off-stage and m-l is off-stage]![else], and maybe that riddle dreidl won't push you back this time!"

to say l-or-m:
	say "[if l-m is visible][l-m][else][m-l][end if]";

to say zztrue:
	now voltzap is true;

check going south in Unwary Runway:
	if m-l is in Unwary Runway or l-m is in Unwary Runway:
		say "'If you go north, someone might relieve me. I'm kinda getting bored here.'";

check going north in Unwary Runway:
	say "The exit! [if l-m is visible]'Shalom, ol['] sham' calls [l-or-m].[paragraph break][end if]You've mapped it out...and just as you are about to cross, [one of]a[or]that[stopping] giant spinning robot dreidl pushes you back to the start of the maze as it belts riddle after riddle. It spins back with a monotone 'OY VEY.' [if l-m is off-stage]You see someone coming from the north to check on the noise, but you can't get a really good look.[else][paragraph break][end if]";
	say "[if voltzap is false]You find the walls really are electric--not too nasty, but bad enough, and you see red and say, with each ZVT(VZT?), Lame-o[zztrue].[else][one of]You manage to avoid the walls this time, but you doubt that dreidl's going away[or]There must be a better way through[stopping].";
	if l-m is off-stage:
		now l-m is in Unwary Runway;
	else if l-m is in Unwary Runway:
		if l-m is cscanned:
			say "[drei-you]see someone walk into view to replace Lev Matzo.";
			now m-l is in Unwary Runway;
			now l-m is in lalaland;
		else:
			say "[drei-you]see Lev Matzo throwing his hands up as if he wished he could have done more.";
	else if m-l is in Unwary Runway:
		if m-l is cscanned:
			say "[drei-you]see someone else walk into view to replace Matzo Lev.";
			now m-l is in lalaland;
			now Tom Alvez is in Unwary Runway;
		else:
			say "[drei-you]see Matzo Lev throwing his hands up as if he wished he could have done more.";
	else if Tom Alvez is in Unwary Runway:
		say "[drei-you]hear Tom Alvez moan 'Wait! I don't have a replacement?!'";
	go-back grey gyre;
	the rule succeeds;

to say drei-you:
	say "[line break]As the dreidl chases you away, you "

after scaning when player is in Unwary Runway (this is the new random guy in volt maze rule):
	d "[noun][if noun is cscanned] cscanned[end if][if noun is ncscanned] ncscanned[end if].";
	if noun is not cscanned:
		if noun is l-m:
			say "That helped, but maybe cheat mode would be really useful. At eight letters for the 'best' word, this volt maze is pretty tricky!";
		else:
			say "That didn't show anything new. Maybe cheat mode would be better.";
	continue the action;

volume oyster

last-loc of Oyster is Posh Hops Shop.

book Posh Hops Shop

Posh Hops Shop is an innie room in oyster. "This toastin['] station isn't a dive bar I'd brave. Gulpers splurge on Trance Nectar and recant later. Crabs ignore carbs, forgetting what caused them to get sauced. A sign is posted here[if tunes are in hops shop], tunes you'd do ANYTHING to get rid of emit from a jukebox[end if][if tumblers are in hops shop], stumbler tumblers lie within reach[end if], and trolls block the way out."

after choosing notable locale objects when player is in posh hops shop:
	set the locale priority of patrons to 0;

the patrons are useless plural-named people in Posh Hops Shop. description of patrons is "Indistinguishable from most barflies, er, bar-fish."

instead of doing something with patrons:
	if current action is attacking:
		say "You'd be outnumbered." instead;
	else if current action is examining:
		say "They are pretty much nameless and faceless." instead;
	else if current action is objasking or current action is asking generically or current action is talking to:
		continue the action;
	say "The patrons aren't important. They're just trying to get drunk[if silly-acts > 0], and you've already started to distract them from that[end if]."

the stumbler tumblers are reflexive plural-named scenery in posh hops shop. "They are labeled TIPS in red but don't have any money in them. Some red writing is at the bottom of one."

instead of taking tumblers:
	say "The people who didn't give tips would notice your rudeness.";

the gins sign is reflexive scenery in Posh Hops Shop. "It advertises various gins and intox-toxin-tonix--'Thirsty? Try this,' though someone scribbled 'Embrace Beer, Mac!' at the bottom. It advises against sharing garnish as well as making your own music."

instead of taking gins sign:
	say "That'd load you down as you tried to get out.";

a-text of gins sign is "RYRR". b-text of gins sign is "?G?R". parse-text of gins sign is "x[sp]i[sp]x[sp]g". sign is parse-spoilable.

m-bk is useless privately-named scenery in Posh Hops Shop. "[bug-report]". printed name of m-bk is "Posh Hops Shop"

instead of doing something with m-bk:
	if current action is looking or examining or scaning:
		try looking instead;
	say "You can only really try looking in the Posh Hops Shop."

understand "posh/ hops/ shop" as m-bk when player is in posh hops shop.

instead of exiting when in Posh Hops Shop:
	try going outside;

the tines are plural-named reflexive scenery in Posh Hops Shop. "They look perfect for fitting a stein into, for refills."

check taking tines:
	say "[if stein is in lalaland]You destroyed them already[else]Wrong way to vandalize things, here[end if]." instead;

a-text of tines is "YRRYR". b-text of tines is "YRRGR". parse-text of tines is "i[sp]x[sp]x[sp]e[sp]x". tines is cheat-spoilable.

does the player mean inserting into tines: it is likely.
does the player mean inserting stein into: it is likely.

rule for supplying a missing second noun when inserting into:
	if tines are visible:
		now second noun is tines;

rule for supplying a missing noun when inserting into:
	if stein is visible:
		now noun is stein;

The tunes are plural-named 	vanishing scenery in Posh Hops Shop. "The tunes really are awful. You wish you could just get rid of them with some technical know-how."

check taking tunes:
	say "Ironically, they're the sort of tunes you really can't take." instead;

a-text of tunes is "YRRYR". b-text of tunes is "YRRGR". parse-text of tunes is "u[sp]x[sp]x[sp]e[sp]x". tunes is cheat-spoilable.

The jukebox is uncluing scenery in Posh Hops Shop. It is fixed in place. "[if tunes are reflexed or perma-amper is reflexed]The jukebox is finally silent, but the patrons aren't.[else]It has the usual bunch of song buttons and probably a perma-amper inside to make sure the terrible tunes it's spewing are loud and continuous. You notice writing on the side.[end if]"

a-text of tumblers is "RRYR". b-text of tumblers is "RRYR". parse-text of tumblers is "x[sp]x[sp]i[sp]x". tumblers are cheat-spoilable.

before scaning jukebox:
	if tunes are visible:
		say "You wind up scanning the tunes that come from the jukebox.";
		try scaning tunes instead;
	else:
		say "The jukebox gives nothing with the tunes gone." instead;

the perma-amper is part of the jukebox. understand "perma/amper" as perma-amper.

the perma-amper is auxiliary. description is "It's--well, I'm not big on electronics, but futz with it wrong and you'll get a perm. Or worse."

a-text of perma-amper is "RYRYR.". b-text of perma-amper is "R?RYR". parse-text is "x[sp]-[sp]m[sp]a[sp]x". perma-amper is cheat-spoilable.

instead of doing something with the perma-amper:
	if action is procedural, continue the action;
	if current action is remaping:
		continue the action;
	say "You really aren't sure of the right way to fiddle with it. Maybe there is one.";

the song buttons are part of the jukebox. description is "They're number and letter, though you're not familiar with the song, so no one button seems worse than any other. You hope."

check pushing the song buttons:
	say "They're probably all pretty terrible. You need to focus on exactly what you want to do, to muck with the tunes." instead;

does the player mean doing something with song buttons when player is in posh hops shop: it is likely.

the trolls are plural-named reflexive people in Posh Hops Shop. description is "Each is bigger and stronger than you and eyeing you as a fishy character. Each has got a mohawk that says WHAM! OK! and is wearing a skin-tight t-shirt. They're hired to cram patrons back in. No sprat parts til he traps them with his strap.". "[if silly-acts > 0]Trolls return your gapin['] with aping, menacingly. They probably don't want an apology[otherwise]Trolls block the door out[end if][one of]. They're not exactly froodish doorfish[or][stopping]."

the skin-tight t-shirt is a useless thing. description is "It reads: [i]We toss sots. Ew![r] You suspect he means probably only the disruptive, broke sots who patronise this noise trap."

instead of scaning skin-tight t-shirt:
	say "The trolls are the security force here, not you. Starting trouble with them directly would be unwise."

the trolls wear the skin-tight t-shirt.

a-text of trolls is "RRRYRR". b-text of trolls is "RRRYPR". parse-text of trolls is "x[sp]x[sp]x[sp]o[sp]l[sp]x".

Casper Spacer is a person in Posh Hops Shop. description is "He hides the writing in his Capers Recaps from your prying eyes.". "Casper Spacer, the famous fish author, is here, working on his latest book, Capers Recaps[one of]. He seems to want to be bothered and not want to be at the same time. Writers have a way of massaging life's contradictions[or][stopping]."

before objasking casper spacer about:
	if casper-talk is false:
		casper-chat instead;

before asking casper spacer about:
	if casper-talk is false:
		casper-chat instead;

to casper-chat:
	say "'Before you can pull a bar seat abreast... 'Here's a hint, mac. GO HUNT A HANGOUT. Write that in your pedanto-notepad.' He touches on the Die Thou Hideout in the Horned Hedron. An Absolute Lout Base. And the ghost that may be haunting the area. You congratulate him on his storytelling, but he says 'Pff, nothing on this new novel of mine. Which I need to get back to. To which I need to get back.'[add-hangout]"

understand "author" as Casper Spacer.

understand "fish" as Casper.

a-text of casper is "RRRYRY". b-text of casper is "?RRYRY". parse-text of casper is "x[sp]x[sp]x[sp]-[sp]x[sp]-".

Capers Recaps is reflexive scenery in Posh Hops Shop. description of Capers is "It's Casper's latest rough draft journal. A quick glance references an OCD cod named Doc. Capers and looks to be, due to its blackboardy texture, even grittier than Consider I Scorned No Ciders, Pincer Prince or Some Urge Gruesome or This Bane Bathes in the Basin. Which Casper wrote drunk on absinthe."

does the player mean doing something with capers recaps when player is in posh hops shop: it is likely.

understand "book" as Capers Recaps.

check scaning casper:
	if recaps are reflexed:
		try scaning recaps instead;

check scaning recaps:
	if recaps is not reflexed and cheat-on is true:
		say "Your settler is not giving a full readout. Spacer's books are known for deceptive simplicity, for stringing together short words everyone knows confusingly. Still, those three reds at the start must be a clue."

a-text of capers is "RRRYRY". b-text of capers is "RRR??Y". parse-text of capers is "x[sp]x[sp]x[sp]-[sp]x[sp]-".

instead of taking capers recaps:
	say "The whole bar would beat you up for that. Think of other ways to distract the trolls. Disturb the peace more directly."

a stein is a thing in Posh Hops Shop. initial appearance is "You see a stein here by some tines. It looks like it'd almost fit in."

check inserting stein into tines:
	say "It almost fits when you try to insert it. About five-sixths of the way. Perhaps you could find some other way to do things." instead;

a-text of stein is "YRRYR". b-text of stein is "YRRYR". parse-text of stein is "-[sp]x[sp]x[sp]-[sp]x". stein is cheat-spoilable.

description of stein is "It's undoubtedly from the Set-In-Nites corporation, mostly black but with red writing[one of]. You mentally compare it to the tines, and you reckon if you inserted it, it'd be 20% too big[or][stopping]."

shop-hint-items is a list of thing variable. shop-hint-items is { tines, stumbler tumblers, recaps, gins sign, tunes }.

chapter min up rule

to silly-min:
	increment silly-acts;
	if silly-acts < 3:
		min-up;

chapter remaping

remaping is an action applying to one thing.

understand the command "remap" as something new.

understand "remap [something]" as remaping.

does the player mean remaping the perma-amper: it is very likely.

carry out remaping:
	if noun is perma-amper:
		if tunes are in lalaland:
			say "The tunes have already been altered. Remapping won't do any good. Or bad." instead;
		try fliptoing tunes instead;
	say "Remapping could break something. So maybe try something else.";
	the rule succeeds;

remapped is a truth state that varies.

after fliptoing tunes:
	if the player's command includes "remap":
		now remapped is true;
	else:
		now remapped is false;
	continue the action;

chapter spiting

spiting is an action applying to one thing.

understand the command "spit" as something new.

understand "spit [something]" as spiting.
understand "spit in/at/on [something]" as spiting.

does the player mean spiting the location: it is very likely.

carry out spiting:
	if noun is tumblers:
		try fliptoing tumblers instead;
	if noun is a person:
		say "You don't want to start a fight." instead;
	if player is in cripple clipper:
		say "Pointless." instead;
	say "How rude[if player is in hops shop and tumblers are reflexive], but you could be even ruder spitting elsewhere[end if]!" instead;

chapter inseting

inseting is an action applying to one thing.

understand the command "inset" as something new.

understand "inset [something]" as inseting.

carry out inseting:
	if noun is tines:
		say "I think you meant inseting the stein.";
		try inseting stein instead;
	if noun is stein:
		if player does not have stein:
			say "(Taking the stein)";
			try fliptoing tines instead;
	say "You can't really inset that--you might be better off inserting it." instead;

chapter unseting

unseting is an action applying to one thing.

understand the command "unset" as something new.

understand "unset [something]" as unseting.

does the player mean unseting tunes: it is very likely.

carry out unseting:
	if tunes are in lalaland:
		say "You already dealt with the tunes[if unset-not-remap is false] when you mucked up the perma-amper[end if]." instead;
	if noun is tunes:
		try fliptoing tunes instead;
	if noun is jukebox:
		say "The jukebox--or the tunes?" instead;
	say "That doesn't quite make sense here." instead;

chapter scrapeing

scrapeing is an action applying to one thing.

understand the command "scrape" as something new.

understand "scrape [something]" as scrapeing.
understand "scrape" as scrapeing.

does the player mean scraping capers recaps: it is very likely.

carry out scrapeing:
	if noun is casper or noun is capers:
		if capers is reflexed:
			say "Casper would be alert to that, now." instead;
		if noun is casper:
			say "Hm, what he's writing on would make even more noise...so, let's try that.";
		try fliptoing recaps instead;
	d "scrape to attack.";
	try attacking noun instead;
	the rule succeeds;

section insert-shorting

insetring is an action applying to one thing.

understand the command "insert [something]" as something new.

understand "insert [something]" as insetring.

carry out insetring:
	if noun is tines or noun is stein:
		try inserting stein into tines instead;
	say "You need to specify what to insert that into." instead;
	the rule succeeds;

chapter inseting

silly-acts is a number that varies.

strolled is a truth state that varies.

to annoy-trolls:
	silly-min;
	if silly-acts is 1:
		say "Your singular antic seems to have attracted the attention of a few patrons, and the trolls look up, too.";
	else if silly-acts is 2:
		say "'Job perks: bop jerks.' say the trolls. The patrons have formed a half-circle around you now.";
	else:
		say "The trolls and patrons have almost completely surrounded you, but they are so shocked, even waiting for an explanation, they won't jump at you yet. Best play it cool and find a way out[if trolls are prefigured]--now's a good time to STROLL[end if].";

after fliptoing when player is in Posh Hops Shop:
	if noun is not trolls:
		annoy-trolls;
		remove noun from shop-hint-items, if present;
	continue the action;

to say gloaty:
	say "[one of]. The galoots gloat so[or]. They say, what a LOLstr[or]. They act sore to scare, sure you stole a coaster[or][stopping]. Perhaps if you were more obnoxious, they'd be less inclined to keep you in";

check fliptoing when player is in Posh Hops Shop:
	if noun is reflexed:
		say "You need to mix it up a bit. You've already done that." instead;
	if noun is trolls:
		if silly-acts is 0:
			say "The trolls seem concerned you haven't had any fun at all. You try to argue with them, but it's hopeless. They claim, bored, they're just the messenger as they escort you back inside[gloaty].";
			preef trolls;
			the rule succeeds;
		if silly-acts is 1:
			say "The trolls seem concerned you have been kind of obnoxious, and what better way to make up for that than to order a little something, to get on management's good side, now[gloaty].";
			preef trolls;
			the rule succeeds;
		if silly-acts is 2:
			say "The trolls make you feel like you're the jerk here and maybe you can spend some money to make up for the nuisance you caused[gloaty]. They're not fully on their game, though. Maybe you can be even more annoying.";
			preef trolls;
			the rule succeeds;
		continue the action;
	if silly-acts is 3:
		check-silly-death instead;

to check-silly-death:
	say "You've caused enough damage for the trolls to kick you out. Any more and they might just kick you. Still, you sure?";
	unless the player yes-consents:
		say "The trolls nod as if they were the ones who stopped you from further nonsense.";
		continue the action;
	say "The patrons still stare in belief, but the trolls are onto you. They give you a (self-) righteous beat-down. As the trolls beat you up, they mention you're probably the sort of punk who needs to undo stuff a lot to win a game, and that's not really hardcore.[paragraph break]Perhaps you should've played it cool and fled, instead.";
	now undo-code is 8;
	get-dead;
	follow the shutdown rules;

chapter spilling

the jar of pills is in Posh Hops Shop. "A jr. jar of pills lies off to the side here. It's not quite pretzels or peanuts, but it doesn't seem to be anyone's.". description is "Official Yorpwaldian Jumping Pills, a product of CopeLabs Placebos. The obligatory weird pictorial warning suggests that dumping the pills out may cause stick figures and possibly even real people to fall over, and once spilt, it will be split[one of].[paragraph break]It's not very big--just a jr. jar[or][stopping]. There's a lil['] PS in red to read, too."

printed name of jar of pills is "jr. jar of pills". the indefinite article of jar of pills is "a"

after printing the name of the jar of pills while taking inventory:
	if jar-empty is true:
		say " (empty)";

Rule for clarifying the parser's choice of pills: do nothing.

the lil['] ps is part of the jar of pills. description is "WARNING: find any use uneasy. These don't solve all your problems. In fact you may look back and wish you had them and we are not responsible for any withdrawal symptoms. Not even that anagrammer person can make anything of a junkie!". the lil['] ps is cluey.

jar-empty is a truth state that varies.

instead of eating the jar:
	say "[if jar-empty is true]Eating the empty jar would be even unhealthier than popping the pills[else]They're placebos. And you're not sick. Okay, maybe you're sick of a puzzle. But you need to do something else with them[end if]."

instead of opening the jar:
	say "[if jar-empty is true]The jar's kind of empty now.[else]It's tamper proof. It's one of those jars you can't open until you're thinking about doing something other than eating them--but what could you do with pills?[end if]";

pill-warned is a truth state that varies.

spilling is an action applying to one thing.

understand the command "spill [something]" as something new.

understand "spill [something]" as spilling.

does the player mean spilling pills: it is very likely;

cheated-guy is an object that varies. cheated-guy is nothing.

after spilling:
	if pills are in lalaland and cheated-guy is nothing:
		d "BUG I mistracked a pill spill.[line break]";
	else if scams is true:
		if cheated-guy is nothing:
			say "PILLS NOT USED SUCCESSFULLY.";
		else:
			say "[how-pills-used].";
	continue the action;

to guy-cheat (gc - a thing):
	if produce-redo-cup is false:
		now cheated-guy is gc;
		now jar-empty is true;
		now undo-code is 3;
	else:
		say "You blink and notice the jar has filled up again. It's probably less safe to eat the pills than ever, but they could still hint stuff.";
		now player has the pills;

table of pill-comments
pill-thing	pill-do
eeks	"The pills make a racket as they bounce around. A matronly tuna sticks her head out a window and yells IF YOU PLEASE. You notice your friend the trout behind her. He waves to you. The tuna invites you up."
c2	"The pills jump over to the debris and then off somewhere. You think they showed you where the throwing came from."
crate	"The pills jump over to the debris and then swarm in the air like bees, causing your hidden tormentor to shriek and run away."
knob	"The pills gravitate to the knob and turn it forcefully. It won't act up again."
skis	"The pills fly to the skis with a bizarre smooching noise. The skis dissolve, perhaps out of inanimate shame."
clam	"The pills form a large maze with no dead ends. The clam goes after the bouncing pills and eats some, zigzags crazily, and runs himself tired tracking new ones down. Then, suddenly, it looks as if it's seen a ghost. It shrivels to a point with a sad deflating noise, then vanishes with a pop!"
urn	"The urn, being possessed of greed, seems to suck in the pills, which cause it to shake. You run in a random direction as it explodes. Hm, run, urn. You could've figured that, but, well, time to move on."
boats	"A boat pulls over as you spill the pills. 'If ye need a ride, come aboard! We'll collect yer coins...'[paragraph break]Before you can protest, you're aboard. You hear yelling as several of the fish realize the 'coins' are pills. They don't like freeloaders..."
oars	"The pills must've been energy pills, because they jump up and down and attach to the oars and create a reaction that blasts your raft into the air to the other side! With a bump, you tumble out and walk a bit..."
plea	"Some of the crays are dumb enough to think that the pills might be coins. In the ensuing hubbub of arguments between smart fish and dumb fish, you jump over the edge and swim to shore."
carps	"The carps and pikes, distracted by the pills that fall out and keep jumping, ignore the trout. 'You stupid! Those pills are valuable. Out of our way, mouth-breather.' The range anger wells up in you."
tubs	"You spill the pills and slip on them, because no bathmat is around. In the process, you smack your elbow against the tubs. Right on the funny bone. You find it so unfunny you beat the tubs into waste. Which might be hiding more than just that prod you found inside."
prod	"You spill the pills, which bounce around at your legs until you're annoyed enough to start hitting at them with the prod. Foomp! A hidden switch triggers, and the prod transforms to a rigged digger."
heaps	"The pills you spill on the heaps cause a bizarre chemical reaction. You don't feel poisoned, so it can't be too dangerous. You think."
waste	"The pills perform a disturbing chemical reaction with the waste, dissolving to leave a dirty lance."
wrap	"'Man! That might just be the cure for my ears!' The sardine grabs the pills as the first one falls, and in a brief melee, your bubble wrap falls. He flees, and as you run after him, you step on the bubble wrap, causing it to tear and pop.[paragraph break]The wrap feels ruined, now, like you can't warp it, but you do notice a ruby inside. It seems valuable. So you take it."
a-s	"The pills bounce over by the arches. You try to grab them back but wind up grabbing a hidden pearl by mistake."
gleaner	"You absent-mindedly shake the pills out. Some bounce off the general gleaner, which swells oddly, and as you look for cracks or damage, you see a pattern within. A way through a maze."
o-t	"The pills thump all over the floor, but you notice one segment sounds hollow. You go over, look under and--voilà! You are able to defuse the ol['] trap with a switch. Alas, the pills are too scattered to replace. Some kind of spilled into the floor too, but yeah, the five second rule, anyway."
ant	"With the pills dropping around, the ant is distracted, and your wild hacks with the lance easily chase it. But your lance breaks in the process."
ruby	"The pills swarm your ruby so you drop it. They sink into the dirt, the ruby close behind. The dirt fills, leaving a thin hint."
scrawl	"The pills slip into the scrawl, flaring it up. The ground looks extra soft, and you look to see what you can--what's the word? UNEARTH. It's a big weird undead sausage! The sausage cries for its lost ruby!"
haunter	"The haunter stays your hand. Perhaps it had a sad incident in its past which sent it to earth sooner--or made it lose its ruby. It nods at you in understanding."
yapper	"The yapper begins bellyaching about picking up the pills. He complains about how it's HIS job to clean things up. He goes off to look for a wastebasket--but you think you see him popping a pill as he leaves."
d2	 "You spill the pills and hook yourself on the dialer trying to catch them. You wind up REDIALing, and all sorts of hubbub ensues as Elvira's voice crackles, and she accuses the Horned Hedron's leaders of double crossing her, and the Horned Hedron's leaders accuse her. It's great fun to eavesdrop."
dialer	"You spill the pills on the dialer, and they change DIALER to enough of the 720 possibilities that they settle on DERAIL."

pill-use is a truth state that varies.

every turn when mrlp is oyster:
	d "Current hint item = [oyster-item].";

carry out spilling:
	if noun is not pills:
		say "You can't spill that. Or you can, but it won't help you or distract anyone or anything blocking you." instead;
	if jar-empty is true:
		say "You already spilled the pills. None are left." instead;
	if player does not have pills:
		say "(Taking them first, to be pedantic.)";
		now player has pills;
	if the player's command includes "jar":
		if the player's command does not include "pills":
			say "You can't spill the jar--just what's in it.";
	now cheated-guy is nothing;
	if player is in Achers' Arches:
		if a-s is prefigured:
			say "You remember that SEARCHing might've worked better with the sardine gone." instead;
	if location of haunter is location of player:
		if haunter is reflexed:
			say "[one of]The haunter-sausage points at the pills and wags its finger at you. It is beyond the help of medication. Perhaps it was killed off by medication and you were extra rude to remind it[or]You don't need the haunter-sausage's anti-drug message again[stopping]." instead;
	if player is in Rascal Craals:
		if ruby is off-stage or digger is off-stage:
			say "A solitary pill tries to burrow into the ground but fails. Hm. Maybe you should come back later if you need to hide something." instead;
	if player is in End Den:
		say "Unfortunately, the pills won't roll off and lead the way to where you need to go. You need some sort of map[if player has gleaner and gleaner is reflexed]. One might be in your inventory, and you just need to examine it[end if]." instead;
	let oi be oyster-item;
	d "Spilling [oi].";
	if pill-warned is false and scams is false:
		say "[if anger range is not visited]You briefly wonder if the pill jar might be better saved for later[else]You have a brief vision of Elvira trolling '[he-she-c] needed DRUGS!' which is silly, but yeah[end if]. Release the pills anyway?";
		now pill-warned is true;
		unless the player yes-consents:
			do nothing instead;
		say "Okay.";
	if player is in Lean Lane:
		if bubble wrap is off-stage:
			if produce-redo-cup is false:
				if dent-tend is false:
					poss-d; [can't fix dent again]
				if wipes are in Lean Lane:
					decrease poss-score of oyster by 4; [swipe sweat clean shape (not part of the quest but not doable without it) tan]
			now player has wrap;
			say "You spill the pills. 'That is some way to repay the nice meal I gave you! You will not get to see what is in that drawer and not just because you barely did anything for poor Tortu!' clucks Aunt Tuna. 'I will thank you to leave immediately.'[paragraph break]You do, but soon after, Tortu hands you a pack of bubble wrap[if tea is not in lalaland] and something from the tea tray, too--a paler pearl[end if]. 'Man! That's the funniest mad my aunt has been in a while! I guess she is nice and all but sometimes I sort of want to rebel don't know how. Anyway, once you left, she kept muttering how she wanted to get rid of this bubble wrap to somebody. So I snuck it for you.'";
			guy-cheat trout;
			now aunt-tuna-cross is true;
			move player to anger range;
			pearl-check;
			do nothing instead;
		else:
			say "That would be a rude parting gift. You've claimed your reward--the bubble wrap[if tea tray is not in lalaland]. Though it would seem polite--and straightforward--to try something from the tea tray[end if]." instead;
	if player is in Posh Hops Shop: [special case for spilling pills. This overrides the current hint item and takes out the trolls]
		say "The pills scatter all over the bar, leaving everyone to slip and fall. You make a break.";
		increase min-score of oyster by cur-score of oyster;
		guy-cheat trolls;
		reg-inc;
		if cur-score of oyster < 3:
			now poss-score of oyster is poss-score of oyster + cur-score of oyster - 3; [you can skip up to 3 points but will not lose a point using the pills later to tutor Tortu the trout if you use the pills now. So really the maximum to lose is 2.]
		move player to olde lode instead;
	if player is in anger range and carps are in lalaland::
		if digger is off-stage:
			say "A single pill jumps out, tries to burrow in the ground, and pops back in the jar. Looks like you need to dig somehow for the haunter, but you don't have an instrument." instead;
		if pre-haun is in anger range:
			if thin hint is not in Rascal Craals:
				say "A single pill jumps out and you could swear it yelped before jumping back in the bottle. Maybe you need to prepare before digging up whatever's under Anger Range." instead;
	if player is in Horned Hedron and walleyes are in Horned Hedron: [walleyes can't really be flipped. You need to go through the sausage.]
		say "You don't have one for everyone, and there's too many everyone, anyway. You'll need to outsmart the walleyes." instead;
	if oi is the player:
		say "You spill out a pill, cautiously, but nothing happens. Maybe you're done here. You replace the pill. It wasn't on the ground that long." instead;
	if player is in Shadier Airshed:
		if oi is waste or oi is heaps or oi is lance:
			say "That might be a bit dirty, and you wonder if it's really worth it to use the pills on beautification (fourth wall note: this will only help with an optional side quest). Go ahead anyway?";
			if the player direct-consents:
				do nothing;
			else:
				say "[if oi is heaps]Yeah. Maybe writers and musicians need to pop pills to do their work, but sculptors don't. Maybe you can make the heaps more beautiful on your own[else]Yeah, it's not wise to put off general sanitation tasks with pills[end if]." instead;
		if oi is lance:
			say "The pills stick to the lance, making it so gross you feel compelled to CLEAN the lance, finally. Turns out it's the retractable sort, which is handy for carrying until you need to use it.";
			now lance is cleaned;
			now lance is unfigured;
			now player has lance;
			now cheated-guy is lance;
			min-and instead;
	if oi is pre-haun:
		if ruby is not in lalaland:
			say "As you turn the pill jar upside-down, the pills stay in--as if some supernatural force is pushing them up, because they aren't ready to come out yet.[paragraph break]Hmm. Maybe you have more to do before you find what's under, here." instead;
		now cheated-guy is pre-haun;
		say "The pills attach to your digger with a clang. They can't be removed normally, so you start to dig and dig.";
		now cheated-guy is pre-haun;
		try fliptoing pre-haun instead;
	if oi is ant:
		now cheated-guy is ant;
		try taning ant instead;
	if oi is haunter and haunter is reflexed:
		say "As you go to spill the pills, the haunter moans 'My ruby!' You won't need memory pills to recall where you buried it." instead;
	if oi is d2 and lev-pull is false:
		say "Nothing happens, so you pull the lever...";
		now lev-pull is true;
	if oi is a pill-thing listed in table of pill-comments:
		now pill-use is true;
		repeat through table of oyster anagrams:
			if oi is the-from entry:
				if oi is ruby:
					now ruby is in location of player;
				try fliptoing the-to entry;
				now pill-use is false;
				the rule succeeds;
		say "I should've tried to flip something, but I couldn't. BUG.";
		d "[oi] was not a the-from in the oyster anagrams.";
	else:
		say "You should be able to spill the pills to work on the [oi] but you can't. This is a BUG and I need to put an entry in a table for the [oi].";
	the rule succeeds;

report spilling pills:
	if scams is true:
		d "Let's refill the pills, since we're scam-testing.";
		now jar-empty is false;
		now player has pills;

chapter produceredocuping

produceredocuping is an action out of world.

understand the command "produce redo cup" as something new.

understand "produce redo cup" as produceredocuping.

produce-redo-cup is a truth state that varies. produce-redo-cup is false.

carry out produceredocuping:
	if mrlp is not oyster:
		say "[reject]";
	if pills are in lalaland:
		say "Through magic, you get your pills back.";
		now player has pills;
	if produce-redo-cup is true:
		say "You already said the magic words.";
	else:
		say "The jar of pills is now un-lose-able.";
		now produce-redo-cup is true;
	the rule succeeds;

book Olde Lode

Olde Lode is a room in Oyster. "You've reached what was probably an old mining pit. As in the Hops Shop, you can't tell one direction from another--you probably just want to keep things from blowing up and get out."

after looking in olde lode:
	if clam is in olde lode, set the pronoun it to clam;
	continue the action;

the clam is a vanishing animal in Olde Lode. initial appearance of clam is "A clam snaps here, unwilling to let you pass.". description is "Full of chargin['] Chagrin! It's not letting you near the river."

after fliptoing clam:
	now urn is in olde lode;
	set the pronoun it to urn;
	continue the action;

instead of eating clam:
	say "Biting its shell would make you shout hells."

instead of taking clam:
	say "It would put the clamps on your hand."

a-text of clam is "RYRR". b-text of clam is "PYRP". parse-text of clam is "c[sp]a[sp]l[sp]m". clam is parse-spoilable.

the urn is a vanishing thing. "An urn lies here, drawing you in unnaturally, with the lure of riches. No wonder the clam was so aggressive. It feels a bit evil, even."

a-text of urn is "RYR". b-text of urn is "RYP". parse-text of urn is "x[sp]u[sp]x". urn is parse-spoilable.

description of urn is "It's--well, beautiful, like you could take it and forget all about this quest."

check taking urn:
	say "As you take the urn and peek inside, the cursed wealth inside possesses your mind. You spend the rest of your free time gazing at it, until Elvira's goons catch you. A-ha! Proof you were a greedbag! Your loot is confiscated--for the public good, of course. A small fraction of it is donated to endow a scholarship to the agnostic who writes the best essay about why you should never have been trusted in the first place.";
	now joke-death is true;
	get-dead;
	follow the shutdown rules instead;

check opening urn:
	try taking urn instead;

the block vaguely going rule is not listed in any rulebook.

chapter calming

calming is an action applying to one thing.

understand the command "calm" as something new.

understand "calm [something]" as calming.

does the player mean calming the clam: it is very likely.

carry out calming:
	if noun is aunt tuna:
		say "No way." instead;
	if noun is clam:
		try fliptoing clam instead;
	if noun is haunter:
		say "It's a sausage. It needs more. Like an explanation, or where the ruby is." instead;
	if noun is player:
		say "[if clam is visible]You can take a good calming, but you need to dish it out[else]That felt nice, if ineffective[end if]." instead;
	if noun is a person:
		say "You don't need to calm [if noun is plural-named]them[else if noun is a male person]him[else if noun is a female person]her[else]that[end if]." instead;
	if noun is marcel:
		say "Er...close." instead;
	if noun is not a person:
		say "You can't really speak the language." instead;
	say "You just aren't good enough with words to do that. Well, schmoozy words." instead;

chapter runing

understand the command "run" as something new.

understand "run [direction]" as going.

book Disease Seaside

Disease Seaside is a room in Oyster. "A super cult sculpture of Shoer Osher sits on this side of a river. One you can just begird or bridge. Boats block the whole river, and there's a raft docked here. A canoe too!"

after looking in Disease Seaside:
	set the pronoun them to boats;
	set the pronoun it to raft;
	continue the action;

the canoe is scenery in Disease Seaside. "The canoe is all red and has a fish carved into it. The fish seems to be trying to cut...a tree?!"

check taking canoe:
	try entering canoe instead;

the fish is part of the canoe. description of fish is "You can't tell what sort of fish it is. It may not be important. It seems to be cutting down a tree, but you can't tell."

instead of entering canoe:
	say "It's too narrow. How stupid of the designer. Plus it has no oars. Maybe the raft or boats can get you across.";

instead of doing something with fish:
	if action is procedural, continue the action;
	say "Not much you can do with the fish."

a-text of canoe is "YRYYR". b-text of canoe is "YRYYR". parse-text of canoe is "-[sp]x[sp]-[sp]-[sp]x".

joke-death is a truth state that varies.

to say uurrgg:
	now joke-death is true;
	get-dead;

The boats are vanishing plural-named scenery in Disease Seaside.

check fliptoing boats when raft is reflexed:
	say "You're a bit too winded to make a really good boast after your recent exertions, so it isn't your best, but..."

a-text of boats is "RYYRR". b-text of boats is "PGGRR". parse-text of boats is "b[sp]o[sp]a[sp]x[sp]x". boats is cheat-spoilable.

the raft is scenery.

a-text of raft is "RYRR". b-text of raft is "RGRP". parse-text of raft is "x[sp]a[sp]x[sp]t". raft is parse-spoilable.

instead of doing something with boats:
	if action is procedural, continue the action;
	if current action is sobating:
		continue the action;
	say "You're too far away from the boats to do anything to them. Or have them do something to you.";

description of boats is "They're boats, not shippish, and too dense to swim through[if player is on raft]. Probably even to raft through[else][end if][if clam is in lalaland]. You can hear loud voices from the boats[end if]."

a river is scenery in Disease Seaside. "Boats pass on the river. A raft is also docked to it. You probably need to cross it, but you can't expect a groupie pirogue to show up."

check taking river:
	say "The river drips through your fingers." instead;

instead of entering river:
	say "You dip a toe in but are overwhelmed by some schmaltzy philosopher asking, how does one enter a river, and can one truly cross a river, and why does one cross a river.[paragraph break]The answer is probably something stupid, passive, and impractical. You need a way across that'll avoid all those boats. Or at least their potentially lethal undersides."

check going in Disease Seaside:
	if noun is north:
		say "You can't cross the river on your own. One of the boats would hit you." instead;
	say "You're not sure how to get back to the Posh Hops Shop, and you're not sure it's worth it. The boats seem hard to get by, and you're not amphibious enough to speed through the deeps." instead;

the raft is an enterable reflexive supporter in Disease Seaside. the raft is fixed in place.

instead of taking raft:
	say "You probably want to ENTER or CLIMB or GET ON the raft. It's too big to take, physically.";

instead of pushing raft:
	say "It would crash into a boat if you tried to cross the standard way." instead;

instead of pulling raft:
	say "It would crash into a boat if you tried to cross the standard way." instead;

check going when player is in raft:
	say "The raft is a bit clunky. You can't even move the oars." instead;

description of raft is "It's made of oaks which soak and carry interlocking--and completely locked--oars."

the interlocking oars are part of the raft. description is "The oars are some red metal, more like containers than something that could get you through the water. They don't seem mobile[if raft is reflexed]--they seem a bit bulkier than before you, um, gave a gas refill[end if].".

pushing oars is futiling. pulling oars is futiling.

instead of futiling:
	say "[if player is not on raft]They're too far away--you'll need to get on the raft[else]They are not just interlocking but locked in[end if]."

the interlocking oars are reflexive.

a-text of oars is "RYYR". b-text of oars is "RYYR". parse-text of oars is "x[sp]-[sp]-[sp]x". oars is cheat-spoilable.

check taking oars:
	say "The oars won't budge from the raft." instead;

check fliptoing oars:
	if raft is not reflexed:
		say "The oars have no gas, or whatever they might run on[if player is not on raft]. Plus you're not on the raft anyway[end if]." instead;
	if player is not on raft:
		say "That'd leave the raft behind you. Get on it first." instead;

check fliptoing raft:
	if player is not on raft and raft is reflexive:
		say "Like a butterfly's wings in China, your fart causes the raft to waver. Maybe if you got on the raft, something more would happen.";
		preef raft;
		the rule succeeds;

section matterless streamlets

the matterless streamlets are plural-named bounding scenery in Disease Seaside. "The streamlets flow everywhere. They actually HAVE matter, but they don't, um, matter."

instead of doing something with matterless streamlets:
	if action is procedural, continue the action;
	say "The streamlets are nice to look at, but they're not good for much."

chapter sobating (joke reject verb)

sobating is an action applying to one thing.

understand the command "sob at" as something new.

understand "sob at [something]" as sobating.

does the player mean sobating the boats: it is very likely.

carry out sobating:
	if player is not in shore:
		say "[reject]" instead;
	if noun is not boats:
		say "That's not a good thing to sob at. At which to sob. Actually, nothing is." instead;
	say "Show some confidence! Boats are no places for whining." instead;
	the rule succeeds;

book Fighter Freight

Fighter Freight is a room in Oyster. "You're near the edge of a fighter freight. You're half-paralyzed with fear. With or without that pale plea echoing from below."

after looking in fighter freight:
	set the pronoun it to pale plea;
	continue the action;

some scary crays are plural-named terse people in Fighter Freight. "Scary crays hover here, on the verge of attacking.". description is "They don't have any weapons, but they are staring intently at you, ready to take you down."

understand "scary/ cray" as crays.

the pale plea is scenery in Fighter Freight. "[one of]'A... [']elp!'[or]'Pal! Pal! Ee!'[or]'Apple...ale...'[in random order]". the pale plea is vanishing.

a-text of pale plea is "RYYR". b-text of pale plea is "RYYR". parse-text of pale is "x[sp]-[sp]-[sp]x". pale plea is cheat-spoilable.

scray-scan is a truth state that varies.

check scaning when player is in freight:
	if scray-scan is true:
		say "You already scanned around here. You saw RYYR, probably from the pale plea." instead;
	say "The crays are till slightly leery the settler might be a weapon. During the moment of delay, you point it towards the pale plea and see something.";
	now scray-scan is true;
	if noun is not plea:
		try scaning plea instead;

instead of doing something with pale plea:
	if action is procedural, continue the action;
	say "You can't do much besides listen to the plea." instead;

chapter leaping

leaping is an action applying to nothing.

understand the command "leap" as something new.

understand "leap" as leaping.

carry out leaping:
	if location of player is not fighter freight:
		try jumping instead;
	try fliptoing pale plea instead;

book Anger Range

Anger Range is a room in Oyster. "This place [if haunter is in lalaland]no longer [end if]manages to n-rage you, [if haunter is in lalaland]and the area seems to have calmed down[else if carps are visible]as well as the fish who live here[otherwise]and you sense there may be something else angré in the area. Some sort of scrawl sears the ground near the center, which feels unusually boiling[hau-clue][end if][if player has ruby or player has wrap]. You feel a pin nip from your [rub-wr] as you walk across[end if]. You see plains to the north, and you can go west or east, too[one of]. You think back to someone annoying named Regan[or][stopping]."

printed name of Anger Range is "[if haunter is in lalaland]Disease Seaside[else]Anger Range[end if]"

after looking in anger range:
	if trout is in anger range, set the pronoun it to trout;
	if pikes are in anger range, set the pronoun it to pikes;
	continue the action;

to say hau-clue:
	say "[if ruby is in lalaland and haunter is off-stage], even more than before you buried the ruby[end if]";

to say rub-wr:
	say "[if player has ruby]ruby[else]wrap[end if]";

check going south in Anger Range:
	say "You don't want to go back over that river. Your goal must be here." instead;

the scrawl is scenery. "[if carps are visible][reject][else]All in red:[paragraph break]Etahn Ru. Near-Hut Haunter.[end if]"

check scaning scrawl:
	say "Nothing from your settler. Maybe it's what the scrawl says." instead;

carps-pref is a truth state that varies.

understand "fish" and "bullies" as carps when carps-pref is true.

the carps are plural-named nasty vanishing people in Anger Range. "They are sneering and teasing the poor trout."

description of carps is "They are sneering and teasing the poor trout. You're bigger than them, by two feet."

a-text of carps is "RRRYR". b-text of carps is "RRPYR". parse-text of carps is "x[sp]x[sp]r[sp]a[sp]x". carps are cheat-spoilable.

The trout is a reflexive person in Anger Range. description is "[if carps are visible]He is about half your size, cringing in terror from the other fish bullies[else if trout is reflexive]He is looking up at you, as if a thing you could show him how you dealt with those big mean fish[otherwise]He has an air of confidence about him now[end if].". "Your friend [one of][or]Tortu [stopping]the trout is here, looking [if trout is reflexive]timid[else]confident[end if]."

check scaning trout when player is in anger range:
	say "The trout doesn't need that right now. He needs someone who can help him deal with the pikes and carps." instead;

understand "tortu" as trout.

a-text of trout is "RYRYR". b-text of trout is "PYRYR". parse-text of trout is "t[sp]-[sp]x[sp]-[sp]x". trout is cheat-spoilable.

the pikes are plural-named flippable nasty people in Anger Range. initial appearance of pikes is "[bug-report]"

check taking pikes:
	say "That's the wrong way to 'take' them.'" instead;

check taking carps:
	say "That's the wrong way to 'take' them.'" instead;

check taking trout:
	say "You can't just take him and run. You need to fight back." instead;

the chum of the pikes is the carps.

understand "fish" and "bullies" as pikes when carps-pref is false.

a-text of pikes is "RRYRY". b-text of pikes is "RRYRY". parse-text of pikes is "x[sp]x[sp]-[sp]x[sp]-".

description of pikes is "They are sneering and teasing the poor trout. You're bigger than them, by two feet."

for printing a locale paragraph about a person (called xyzyx) in anger range:
	if xyzyx is carps:
		say "Some carps and pikes re-nag and re-nag a poor little trout here. Another reason for anger!";
		now trout is mentioned;
		now carps are mentioned;
		now the player is mentioned;
		now pikes are mentioned;
	else if xyzyx is not haunter:
		set the locale priority of xyzyx to 0;
		continue the activity;

aunt-tuna-cross is a truth state that varies. aunt-tuna-cross is false.

check going east in anger range:
	if haunter is in anger range:
		say "Aunt Tuna has a weak heart. That would not be nice! To her or the people she'd complain about the haunter to later." instead;
	if aunt-tuna-cross is true:
		say "Not after you so rudely spilled those pills." instead;

check going in anger range:
	if carps are in anger range, say "Nagger-rage fills you as you notice the trout's getting bullied. You could probably take the carps or the pikes or, well, both, really. You're bigger than they are." instead;

chapter Shoer Osher

Shoer Osher is scenery. "Everyone knows the story of Shoer Osher and [if player is male]his[else]her[end if] rise to fame from humble farm life, and everyone knows it's sort of fake, but nobody can say much. The statue itself improves Osher's looks and muscle tone. It's quite frankly creepy enough, making you wonder if perhaps you should be looking in the river instead for ways to cross it."

Understand "sculpture" and "super/ cult/ sculpture" as Osher.

check taking Osher:
	say "You have enough heroism by yourself." instead;

chapter scraping

scraping is an action applying to one thing.

does the player mean scraping the carps: it is very likely.

understand the command "scrap" as something new.

understand "scrap with [something]" as scraping.
understand "scrap at [something]" as scraping.
understand "scrap [something]" as scraping.

carry out scraping:
	if the player's command matches "carps":
		try fliptoing carps instead;
	if noun is pikes:
		say "Right action...wrong name." instead;
	try attacking noun instead;

chapter spikeing

spikeing is an action applying to one thing.

understand the command "spike" as something new.

understand "spike [something]" as spikeing.

does the player mean spikeing the pikes: it is very likely.

carry out spikeing:
	if noun is carps:
		say "Right action...wrong name." instead;
	if noun is pikes:
		try fliptoing carps instead;
	try attacking noun instead;

chapter unearthing

rule for supplying a missing noun when unearthing:
	if player is in Rascal Craals:
		if thin hint is in Rascal Craals:
			now noun is thin hint;
		else:
			now noun is location;

unearthing is an action applying to one thing.

understand the command "unearth" as something new.

understand "unearth [something]" as unearthing.

the pre-haun is privately-named proper-named vanishing scenery. printed name of pre-haun is "the haunter in Anger Range". description of pre-haun is "You can't see it, but you can feel it."

a-text of pre-haun is "YRYYRRR". b-text of pre-haun is "YRYYRRR". parse-text of pre-haun is "-[sp]x[sp]-[sp]-[sp]x[sp]x[sp]x".

understand "haunter" as pre-haun when pre-haun is in anger range.

does the player mean unearthing the pre-haun: it is very likely.

check fliptoing pre-haun:
	if player has digger and ruby is in lalaland:
		continue the action;
	d "[whether or not player has digger], [location of ruby].";
	say "[h-not-yet].";
	preef pre-haun;
	the rule succeeds;

to say h-not-yet:
	say "You [if player does not have digger]can feel the haunter, but you have nothing to dig it up with[else if player has digger and ruby is in lalaland]shouldn't dig the haunter back up. You've no reason to[else]don't know what you'd do if you'd unearth the haunter[end if]"

after fliptoing pre-haun:
	now haunter is in anger range;
	continue the action;

before doing something with pre-haun:
	if current action is unearthing or current action is scaning or current action is fliptoing or current action is objhinting:
		continue the action;
	say "[h-not-yet]." instead;

before doing something with ruby when ruby is in lalaland:
	if current action is unearthing or current action is objhinting:
		continue the action;
	if current action is objasking about or current action is objasking generically:
		continue the action;
	say "You must forget about the ruby." instead;

carry out unearthing:
	if mrlp is not oyster:
		say "[reject]";
	if player is in Rascal Craals:
		if noun is location:
			say "You haven't buried anything, and you're not aware of treasure here. Plus, if you dig too long without knowing what to look for, you might attract attention." instead;
		if noun is ruby:
			say "That is wasted work." instead;
		if noun is thin hint:
			say "That would be wasted work, unearthing the thin hint[if haunter is not in lalaland] and the ruby below it[end if]." instead;
	if player is not in anger range:
		say "Nothing to unearth here. Maybe somewhere more wide-open." instead;
	if noun is not pre-haun:
		say "Not worth unearthing, but that's the right idea.";
		preef pre-haun;
		the rule succeeds;
	if player does not have rigged digger:
		say "You need something to dig here[if Shadier Airshed is visited]. Maybe something from a hut you visited[else]. You haven't found a place with that something, yet. Still, hooray for thinking ahead[end if].";
		preef pre-haun;
		the rule succeeds;
	if noun is haunter:
		say "It already is." instead;
	if haunter is not off-stage:
		say "The haunter has been unearthed." instead;
	say "Ravage a grave!";
	if player has ruby:
		say "[line break]As you begin to dig, you hear 'My...jewel...close...thieves...pay.'[paragraph break]It wouldn't do to be caught (ruby-)red-handed. Maybe you can frame someone or some people-forms. People-forms who deserve SOMETHING pinned on them.";
		preef pre-haun;
		do nothing instead;
	if ruby is not in lalaland:
		say "[line break]You scry a cry as scary... 'My...jewel...off...east...I...feel...don't...disturb...unless...'[paragraph break]You haven't found or discovered a jewel, yet.";
		preef pre-haun;
		do nothing instead;
	now haunter is unfigured;
	say "[line break]A haunter's underneath--[']n unearthed! You're almost unhearted. It's--a weird [b]sausage[r]. You scry a cry as scary...'My lost ruby!'";
	reg-inc;
	now haunter is in anger range;
	set the pronoun it to haunter;
	set the pronoun him to haunter;
	set the pronoun her to haunter;
	now scrawl is in lalaland;
	the rule succeeds;

the haunter is a reflexive neuter person. description is "It's a seven-foot tall sausage--or, rather, a stick figure of several sausages tied together, with a bacon comb-over, a ham hock shield and a pork chop bone for a weapon."

check taking haunter:
	say "It's incorporeal. But maybe you can take it somewhere." instead;

check answering haunter that (this is the ruby answer rule):
	if the player's command includes "ruby":
		try objasking haunter about ruby instead;

understand "sausage" as haunter.

understand "ghost" as haunter when haunter is visible.

a-text of haunter is "YRRYYRY". b-text of haunter is "YRRYGPG". parse-text of haunter is "-[sp]x[sp]x[sp]-[sp]a[sp]g[sp]e". haunter is cheat-spoilable.

check going when location of haunter is location of player:
	if haunter is reflexive:
		say "Running would be an admission of guilt. That sausage needs to hear good words." instead;

every turn (this is the track haunter rule):
	if location of player is location of haunter:
		if haunter is reflexive:
			say "You should really get on good terms with the sausage." instead;
	if haunter has been in anger range:
		if location of haunter is adjacent to location of player:
			say "The haunter follows you.";
			move haunter to location of player;
			if location of player is Horned Hedron and walleyes are in Horned Hedron:
				say "[line break]The walleyes spout yea-wells. Their toothy cackling becomes toothy clacking as the haunter hovers over you protectively.";
				the rule succeeds;
			if location of player is Rascal Craals:
				say "[line break]The haunter sees the thin hint! It gestures as if you should dig. You do. With the ruby, the haunter becomes a wholer howler. 'Scaring me?' you hear to the east, then, after the haunter flies...SCREAMING. 'Run! A - the - a hunter!'[paragraph break]You can probably enter the ol['] trap back in the Horned Hedron now. [if o-t is prefigured]It'll be easier to PATROL with the walleyes gone[else]Well, once you find where to disarm it[end if].[paragraph break]The haunter did a lot of damage. You go back east to the Hedron before several craals collapse.[wfak]";
				now walleyes are in lalaland;
				now haunter is in lalaland;
				now thin hint is in lalaland;
				move player to Horned Hedron;
				reg-inc;
				the rule succeeds;
		else if haunter is visible:
			say "The haunter moans impatiently and shifts restlessly, hoping to be led somewhere[one of][or][or][or][or]! It cries for any news of its lost jewel[cycling]!";

[of such extreme action that you may wind up using extra nouns at your own risk]

after fliptoing carps:
	now trout is in Lean Lane;
	now carps are in lalaland;
	now pikes are in lalaland;
	now scrawl is in anger range;
	now pre-haun is in anger range;
	continue the action;

check fliptoing dialer:
	if yapper is visible:
		say "The yapper'd totally tell on you. As it is, it's a good thing he's more interested in telling you off.";
		preef dialer instead;

after fliptoing dialer:
	now d2 is in tenfold;
	now pins are in tenfold;
	continue the action;

chapter assuageing

assuageing is an action applying to one thing.

understand the command "assuage" as something new.

understand "assuage [something]" as assuageing.

does the player mean assuageing the haunter: it is very likely.

Rule for clarifying the parser's choice of haunter while assuageing:
		say "(sausage)[line break]";

carry out assuageing:
	if noun is haunter:
		if number of words in the player's command > 1:
			if player's command does not include "sausage":
				say "Right verb, wrong noun. I'm being strict, here." instead;
		try fliptoing noun instead;
	if noun is Elvira:
		say "A peace treaty is not an option." instead;
	if noun is walleyes or noun is carps or noun is pikes:
		say "Bullies never work that way." instead;
	if noun is trout:
		say "[if noun is in anger range]Concentrate on the carps and pikes instead[else]He's already happy with you[end if]." instead;
	if noun is the player:
		say "Believe in yourself! You can do it! Yeah!" instead;
	if noun is not a person:
		say "There's only one living thing you need to assuage." instead;
	say "You don't need to use your charisma, there." instead;

chapter traceing

traceing is an action applying to one thing.

understand the command "trace" as something new.

understand "trace [thing]" as traceing.

does the player mean traceing the crate: it is very likely.

carry out traceing:
	if noun is not crate:
		say "[reject]" instead;
	if c2 is in lalaland:
		say "You already did that. If you retrace, you might get lost at a terrace." instead;
	try fliptoing c2 instead;

check scaning crate:
	if c2 is in Lapsin' Plains:
		try scaning c2 instead;

check fliptoing crate:
	if c2 is in Lapsin' Plains:
		say "That's a good idea, but you're not sure HOW to react. You need a bit of data, first.";
		preef crate;
		the rule succeeds;

check opening span pans:
	try going inside instead;

check going inside when player is in Lapsin' Plains:
	if crate is reflexive:
		say "As you go for the door, you [one of]feel[or]remember[stopping] something hitting you in the [one of]back[or]head[or]leg[or]kidney[or]foot[or]patookus[or]appendix[in random order]. It's not particularly harmful, but it's distracting enough that you won't be able to [if knob is reflexive]smack the door around the right way[else]get through the door[end if] until you reckon about that conker." instead;
	if skis are visible:
		say "Those skis block the door pretty handily." instead;
	if knob is not in lalaland:
		say "The knob seems stuck--and attached to the pans." instead;
	if span pans are in Lapsin' Plains:
		say "The span pans still block your way, but it should be a breeze to get by them. No that's not quite it. A cinch? No..." instead;
	if Shadier Airshed is unvisited:
		say "You've made it past the pans but have a new problem. You need a hut in the circle of huts. But how to identify it? Disturbing a resident could be troublesome. They are in all shapes and sizes. Hmm, a hut, a hut...[wfak][paragraph break]Wait! Maybe it's this one, or...[wfak][paragraph break]That one! A hut shaped like Utah! Of course! You'd recognize that rectangle with a rectangle bitten out of one corner anywhere. You feel slightly...haut.";
	else:
		say "You go back into a hut shaped like Utah."

does the player mean bonking the knob: it is very likely.

the can't search unless container or supporter rule is not listed in any rulebook.

carry out searching:
	if noun is o-t:
		say "That's the right idea. But not the right way to search. You need to walk all over the floor, here, to disable the ol['] trap." instead;
	if noun is a-p:
		say "The portal has nothing." instead;
	say "You're not able to find anything hidden." instead;

book Hardest Trashed Dearths

Hardest Trashed Dearths is a room in oyster. Hardest Trashed Dearths is east of Anger Range. "Somewhere, you may find your friend. But he ran too fast. You could go back west if you want, or you can try to find him. With all the crackling and general blurriness, you suspect you are surrounded by potentially lethal spark parks, with no quick directional way out.[paragraph break]You do hear something, though[if cans are visible], and the ground is littered with cans[end if]."

the spark parks are plural-named bounding scenery in Hardest Trashed Dearths. "You can't clearly see or feel the spark parks, and it might hurt if you got close. But you know they're there."

instead of doing something with spark parks:
	if action is procedural, continue the action;
	say "You don't want to do anything with the spark parks, as they might do something to you. You need to find a safe way out."

after looking in Hardest Trashed Dearths:
	set the pronoun them to eeks;
	if cans are in Hardest Trashed Dearths, set the pronoun them to cans;
	continue the action;

scan-cans is a truth state that varies.

the cans are vanishing flippable LLPish scenery in Hardest Trashed Dearths. "The cans are all icky and sticky and--eww. It'd take something weird to counter the chemical reaction that made--whatever's non-biodegradable in there."

a-text of cans is "RRYR". b-text of cans is "RRYR". parse-text of cans is "x[sp]x[sp]a[sp]x".

check taking the cans:
	say "There are too many. Even one or two would be too icky and mess up your super purse. You don't even have a garbage sticker, but maybe another tool would work." instead;

check scaning the cans (this is the bonus point rule) :
	if the player's command includes "scan":
		say "You scan the cans, and at first they flash RRYR, as expected. Then you hear a rip in the fabric of reality. Apparently, you caused it by 1) not knowing what to do with the cans, so you scanned them and 2) knowing you needed to scan the cans. It's not very big, but between the logical paradox and infraviolet rays or whatever, the sludge in the cans (itself created through an abuse of quantum physics of infraviolet rays or whatever--hey, I'm a programmer, not a physicist) bursts into water and dirt. [paragraph break]If you get rid of Elvira, you'll see if you can replicate this. It'd make recycling pretty darned efficient. You feel more socially conscious, and less of a plain wordslinger, for having partially cleaned up the Hardest Trashed Dearths.";
		min-and;
		now cans are in lalaland instead;
	say "You're over-thinking this one.";
	the rule fails;

to say wipes-too:
	if wipes are on drawer:
		say ", and you notice some wipes on it";

the eeks are plural-named vanishing scenery in Hardest Trashed Dearths. "[bug-report]"

a-text of eeks is "RYYR". b-text of eeks is "RGYR". parse-text of eeks is "x[sp]e[sp]e[sp]x". eeks are parse-spoilable.

instead of doing something to eeks:
	if action is procedural, continue the action;
	if current action is seeking, continue the action;
	if current action is not listening, say "Can't do much more than listen, to find how to follow.";
	try listening instead;

Lean Lane is an innie room in Oyster. "You're in a dingy but comfortable residence. A raw red [if trout is reflexed]reward[else]warder[end if] drawer leans against one wall[wipes-too]. You may leave to the west--anywhere else is probably a bit too private."

after looking in Lean Lane:
	if tea tray is in lean lane, set the pronoun it to tea tray;
	if wipes are in lean lane, set the pronoun them to wipes;
	continue the action;

Aunt Tuna is a female person in Lean Lane. description is "Grayin['], grainy. 'Staring at people you barely know! Where are your manners?'". "Aunt Tuna putters around here, nodding and clucking and shaking her head. Well, as much as a fish can[if tea tray is visible]. She occasionally motions to the tea tray she laid out for you[end if]."

does the player mean eating the tea tray: it is very likely;

The tea tray is edible flippable scenery in Lean Lane. description is "Arty, with tea on it. The meal, not the drink[one of]. And no beak-bake in it[or][stopping]. But why stare at it? That's not what food is for."

a-text of tea tray is "YYR". b-text of tea tray is "YYR". parse-text of tea is "e[sp]a[sp]t". tea tray is parse-spoilable.

check drinking tea:
	say "It's food-tea, not drink-tea." instead;

after scaning tray:
	if the player's command includes "tray":
		say "Hm, three letters. You reckon it's the tea on the tray, not the tray itself.";
	continue the action;

the paler pearl is an undesc. description is "It's a nice pearl but too small to be valuable on its own."

the general gleaner is a reflexive thing. description is "[if gleaner is reflexed]You see a map of all the paths in the Horned Hedron. They twist around a lot, and once you re-angle, it dilates details so you can see the way to get to...the Tenfold Teflon'd Den Loft (avec evac-cave,) with even a separate pest area on the side[oy-can-win][otherwise]You hope to have peered deeper for a vision, but it's too small. All you can make out in the morbid dim orb is [ho-he] and the words GENERAL GLEANER, though if you look closely you may be able to read some red writing--the artist's name, too[end if]."

after printing the name of the general gleaner while taking inventory:
	say " ([if gleaner is reflexed]enlarged[else]neat but small[end if])";
	continue the action;

check examining gleaner when player is in loft:
	say "You found the way in and know the way out. Better deal with the [if yapper is visible]yapper and [end if]dialer, now." instead;

to say ho-he:
	say "[if end den is visited]maybe the maze you [are-were-hedron] stuck in[else if player is in Horned Hedron]somewhere, maybe somewhere close[else if Horned Hedron is visited]the horned hedron[else if Achers' Arches is visited]a structure, possibly the Horned Hedron north of [arch-here],[else]some structure[end if]";

to say are-were-hedron:
	say "[if player is in end den]are[else]were[end if]"

to say arch-here:
	say "[if player is in arches]here[else]Achers['] Arches[end if]"

after examining general gleaner when player is in end den and gleaner is reflexed:
	check-detours;
	continue the action;

a-text of gleaner is "YRRYRRY". b-text of gleaner is "YRR??RY". parse-text of gleaner is "-[sp]x[sp]x[sp]?[sp]?[sp]x[sp]-".

find-base is a truth state that varies.

to say oy-can-win:
	now find-base is true;

after fliptoing eeks:
	bowl-to-home;
	if cans are in Hardest Trashed Dearths:
		poss-d;
	continue the action;

to bowl-to-home:
	now Hardest Trashed Dearths is shunned;
	change the east exit of anger range to Lean Lane;
	change the west exit of Lean Lane to anger range;

chapter enlargeing

enlargeing is an action applying to one thing.

understand the command "enlarge" as something new.

understand "enlarge [something]" as enlargeing.

carry out enlargeing:
	if noun is not gleaner:
		say "That's not part of your powers. Well, not generally[if gleaner is reflexed], and you already did that to the gleaner, anyway[end if]." instead;
	try fliptoing gleaner instead;
	the rule succeeds.

does the player mean enlargeing the gleaner: it is very likely.

chapter seeking

seeking is an action applying to one thing.

understand the command "seek" as something new.

understand "seek [something]" as seeking.

does the player mean seeking the eeks: it is very likely.

carry out seeking:
	if noun is eeks:
		try fliptoing eeks instead;
	if noun is a-s:
		say "Not quite the right way to poke through the arches." instead;
	try searching noun instead;
	the rule succeeds.

chapter ruby

warp-try is a truth state that varies.

After printing the name of the wrap while taking inventory:
	if warp-try is true:
		say " (to warp in the right place)";

check fliptoing ruby:
	if wrap is visible:
		now warp-try is true;
		if Aunt Tuna is visible:
			say "'Goodness me!' cries Aunt Tuna. 'I do not approve of warping the bubble wrap! You ought to be sent from THIS nest for that noise!'[paragraph break]Like all good bubble wrap, maybe it needs to be saved [']til you find the right person to annoy.";
			preef ruby;
			the rule succeeds;
		if player is not in Achers' Arches:
			say "That would be fun but useless here. Perhaps you could annoy someone with it. Someone worth getting rid of.";
			preef ruby;
			the rule succeeds;

after fliptoing ruby:
	now sandier sardine is in lalaland;
	continue the action;

some bubble wrap is a flippable thing. indefinite article of bubble wrap is "some". understand "bubbles" as bubble wrap.

a-text of wrap is "RYRR". b-text of wrap is "PYRP". parse-text of wrap is "w[sp]a[sp]r[sp]p". wrap is parse-spoilable.

description of wrap is "It's about two feet in diameter, all twisted up and thick enough to be covering something. But you don't have time to pop each bubble individually."

chapter warping

warping is an action applying to one thing.

understand the command "warp" as something new.

understand "warp [something]" as warping.

does the player mean warping the bubble wrap: it is very likely.

carry out warping:
	if noun is bubble wrap:
		try fliptoing ruby instead;
	if sardine is in lalaland:
		say "You already warped what you needed to";
	else:
		say "There's only one thing you can warp, and [if noun is plural-named]those aren't[else]that's not[end if] it";
	say ".";
	the rule succeeds;

chapter eat stub

check taking the tea tray:
	say "'Goodness me, no! It is rude to TAKE all the tea! You can have it without taking it!' says Aunt Tuna." instead;

instead of eating tea tray:
	if the player's command includes "tray":
		say "You probably just want the tea on the tray. Not the tray." instead;
	if the player's command does not include "eat":
		say "Be straightforward, here." instead;
	if trout is reflexive:
		say "You feel slightly guilty eating before helping the trout, but Aunt Tuna nods, it's okay for you to eat first.";
	say "Gosh, tea, and you don't feel hostage[if aunt tuna is visible] to manners or anything[end if]! Not just fringy frying! A dose of seafood (Not, like, fish. But what they eat. Tressed dessert.) A dish is had. Being fed is def! There's a whole crumpets spectrum in here, treats taster, all free of nitrate tainter! Muy yum! But while being a chompin['] champion, you bite half a paler pearl.[paragraph break][if aunt tuna is visible]'Oh my goodness!' says Aunt Tuna. 'I am so sorry! I do not know how that got in there. You may keep it. I hope it is a decent apology for my being such a negligent hostess.' She [tray-sez].[else]Well, you can't exactly go complaining to Aunt Tuna now for this, after making a mess in her place.[end if]";
	pearl-check;
	now tea tray is in lalaland;
	reg-inc;

to say tray-sez:
	say "[if trout is reflexive]hints you've got enough nourishment to help Tortu stand up to the bullies as you did[else]thanks you for doing so much. She can't imagine anything more you could do for Tortu[end if]";

after fliptoing (this is the oyster min score annoying details rule):
	if noun is trolls and player does not have pills, min-up;
	if noun is trout and player has pills and jar-empty is false, min-up;
	continue the action;

tuna-first is a truth state that varies.

check objasking tuna about:
	if tuna-first is false:
		tuna-chat instead;

check asking tuna about:
	if tuna-first is false:
		tuna-chat instead;

to tuna-chat:
	say "Aunt Tuna ignores your specific question and instead launches into a tirade about innocent people not being able to hide from the Die Thou Hideout in the Horned Hedron, and what with the haunter running around, that's one more thing to worry about! And it would be nice if they could be played against each other, but the real world doesn't work that way, even though she TRIES to be optimistic.";
	pad-rec-lump "the haunter";
	pad-rec "DIE THOU";
	now tuna-first is true;

to pearl-check:
	say "[line break]";
	if player has paler pearl:
		say "The two halves of the paler pearl seem to fit together. You can see something in there, but you're not sure what. It's quite simply not big enough. It's scratched over so the words GENERAL GLEANER engulf it.";
		now player has general gleaner;
		set the pronoun it to general gleaner;
		now paler pearl is off-stage;
	otherwise:
		say "The pearl seems only half a sphere. Maybe the other half is elsewhere.";
		set the pronoun it to paler pearl;
		now player has paler pearl;

check fliptoing trout (this is the no teaching while fighting rule) :
	if player is in anger range:
		say "[if carps are visible]You probably can't help the trout until they're off his case, but they wouldn't be on his case if he had tutoring in fighting earlier. Catch-22. At least, here[otherwise]The poor trout's probably getting beaten up for learning in the first place[end if]." instead;

book sanctum

Dourest Detours is an innie room in oyster. "It's a bit disorienting here, but your lance helps you feel rousted from just a true sod and glad you've suffered no redouts."

detours-warn is a truth state that varies.

check going outside in detours:
	if detours-warn is false:
		now detours-warn is true;
		say "This shouldn't be hard. It's an easy extra point to kill the, well, ant. But if you exit again, I'll let you move on." instead;
	say "You chicken out! Or, well, maybe you just want to get on with it.";
	poss-d;
	move player to Den Loft instead;

after looking in dourest detours:
	it-him-her the ant;
	continue the action;

the ant is a flippable animal. "An oddly colored ant is here! It seems more threatening than anything, but your lance seems to hold it at bay.". description of ant is "If you look at it one way, it's a light brown--no, that's not it--but another way, it's a bright red, a simulacrum of the legendary Tar Rat Art. You're glad you have that lance to do something simple to fend it off, or maybe even run it off."

check taking ant:
	say "Dealing with the ant is even easier than TAKE." instead;

a-text of ant is "RYR". b-text of ant is "RYR". parse-text of ant is "x[sp]a[sp]x". ant is any-spoilable.

chapter taning

taning is an action applying to one thing.

understand the command "tan" as something new.

understand "tan [something]" as taning.
understand "tan" as taning.

rule for supplying a missing noun when taning:
	if location of player is Dourest Detours:
		now noun is ant;

does the player mean taning the ant: it is very likely;

carry out taning:
	if noun is not ant:
		try attacking noun instead;
	say "Whack! Pow! 'Scum ant! Can...must...must tan mutants!' After your glancing clanging, the lance turns into a red-hot hate rod and breaks in the process as the ant runs away. You completed a mini-SOS mission!";
	min-and;
	now ant is in lalaland;
	now lance is in lalaland;
	now Dourest Detours is shunned;
	now player is in Tenfold Teflon'd Den Loft instead;

book Den Loft

Tenfold Teflon'd Den Loft is an innie room in Oyster. "[one of]You're at the center of what's really a nice mob combine, all things considered. I mean, the mob isn't nice, but it's obviously a spendy spy den. It's unclear if it's above or below ground, it's so well protected a city-fail facility. [or][stopping]You can exit or go out to leave this place, though it's probably better just to find a way to mess up the whole Horned Hedron.[paragraph break]A huge dialer takes up the bulk of the wall--it seems to have settings to tell it what to do[if yapper is not in den loft], then a lever to pull[end if]."

lev-pull is a truth state that varies.

instead of doing something with lever:
	if current action is pushing or current action is pulling or current action is taking: [check pulling lever/check pushing lever]
		say "[if lever is reflexed]It's not fun enough to tinker with, any more.[else]Nothing happens, but you're still just excited to find it. Maybe you can do something superfluous to show that![end if]" instead;
	if action is procedural, continue the action;
	say "You're not sure what you can do with the lever, really[if lever is reflexed], and it doesn't seem as fun any more anyway." instead;

check going outside in Den Loft:
	if lev-pull is true:
		say "You can't leave now. You're so close. The lever doesn't seem to work any more, but the dialer...maybe..." instead;

the papery yapper is a vanishing neuter person in Den Loft. "A papery yapper, full of sharp edges that would bleed you to death, blocks access to the dialer. He is wearing a stupid paper necklace."

after looking in den loft:
	if yapper is in den loft, it-him-her yapper;
	continue the action;

after fliptoing yapper (this is the A Briber is You rule):
	now gleaner is in lalaland;
	now lever is in tenfold teflon'd den loft;
	continue the action;

a-text of papery yapper is "RRYRYO". b-text of papery yapper is "?RY?Y?". parse-text of yapper is "?[sp]x[sp]-[sp]?[sp]-[sp]?".

the stupid paper necklace is a cluey thing. description is "It's red and is cut out to read 'Rap? Yep!' It's not very gangsta, but it shows a likely weakness for bling."

the papery yapper wears the stupid paper necklace.

instead of doing something with stupid paper necklace:
	if action is procedural, continue the action;
	say "The necklace isn't worth meddling with beyond maybe giving an odd clue."

description of papery yapper is "He looks precisely folded, but also shifty, like he could be bribed. But you probably can't just bribe him directly."

check giving the gleaner to the papery yapper:
	say "'Nonsense! I would love one of those, but I couldn't take such an overt bribe.' You're not sure if he winked." instead;

check giving something to the papery yapper:
	say "'Bribe? Sigh. Gibberish. Maybe we could reclassify the donation with creative financing[if noun is not gleaner], and make it a better donation, too[end if].' You're not sure if he rolled his eyes." instead;

after printing the locale description for Den Loft when Den Loft is unvisited:
	if player has lance:
		say "The yapper, seeing your lance, flees! Shortly after, some static from the dialer causes the lance to shatter, but it did its job. Perhaps you didn't need to be so threatening, but hey, you're in.";
		min-up;
		poss-d;
		now yapper is in lalaland;

the dialer is reflexive scenery in Den Loft.

Include (-
	has transparent talkable
-) when defining dialer.

the NotCrime intercom is scenery in Den Loft. "The NotCrime intercom, the let-in-intel device of choice for the shadier denizens of Yorpwald. It probably works with the dialer in some way."

Include (-
	has transparent talkable
-) when defining intercom.

check taking intercom:
	say "You'd probably get a nasty shock and set off an alarm." instead;

description of dialer is "It's a big intimidating important looking thing. You probably won't understand details of how it works. A jumble on the dialer spells out, conveniently, [if dialer is reflexive]DIALER[else]DERAIL[end if]. It looks like you could shift it. You also see some red writing, in small print."

the jumble is part of the dialer. description is "[if dialer is reflexive]DIALER[else]DERAIL[end if] seems to indicate its current task."

instead of doing something with jumble:
	if action is procedural, continue the action;
	say "The lettering looks like it can be shifted around to things you can do."

check scaning jumble:
	try scaning dialer instead;

check scaning dialer:
	if dialer is reflexed:
		try scaning d2 instead;

a-text of dialer is "RYRYYR". b-text of dialer is "[if dialer is reflexive]PYRYYR[else]RYRYYR[end if]". parse-text of dialer is "[if dialer is reflexive]d[sp]-[sp]x[sp]-[sp]-[sp]x[else]x[sp]e[sp]x[sp]-[sp]-[sp]l[end if]".

instead of taking or attacking dialer:
	say "That would only sabotage communications here. You need to sabotage the supplier."

The lever is reflexive LLPish scenery. "You're quite glad you found it, even if you're not sure how or why to pull it, yet." [it's moved here after the yapper is gone]

a-text of lever is "RYRYR". b-text of lever is "RGPGR". parse-text of lever is "x[sp]e[sp]v[sp]e[sp]x". lever is parse-spoilable.

check exiting in Den Loft:
	say "You can always find your way back easily enough.";
	now player is in Horned Hedron instead;

check fliptoing lever:
	if yapper is visible:
		preef lever;
		say "Nothing to celebrate yet--dispose of the yapper first." instead;

chapter pins

[?? if player has pills then reg-inc]

some pins are reflexive plural-named scenery. "The pins cover the dialer. There's probably more than one way to get rid of them, but right now, they're blocking you from using it again. Or, in other words, from...wait for it...[paragraph break]PS'in."

after fliptoing pins:
	now d2 is in den loft;
	continue the action;

instead of doing something with pins:
	if current action is sniping or current action is spining, continue the action;
	if current action is dropping, say "Only twenty-four combinations. Two work. The pin(s) will drop." instead;
	if current action is taking, say "They'd poke you nastily. Give you nips and all." instead;
	if action is procedural, continue the action;
	say "You need to get the pins out of the way, but don't worry, it's pretty simple." instead;

a-text of pins is "RRYR". b-text of pins is "RRYR". parse-text of pins is "x[sp]x[sp]I[sp]x".

chapter sniping

sniping is an action applying to one thing.

understand the command "snip" as something new.

understand "snip [something]" as sniping.

carry out sniping:
	if pins are reflexed, say "You've dealt with the pins. Now to mess with the dialer, again." instead;
	if noun is pins, say "You don't have anything with a small enough blade to cut the pins. And even then, they'd still be in the way of operating the dial again. But that has to be close to what you need to do." instead;
	say "There's no scissors or anything in this game. Sorry." instead;

chapter spining

spining is an action applying to one thing.

understand the command "spin" as something new.

understand "spin [something]" as spining.

does the player mean spining the pins: it is very likely.

carry out spining:
	if noun is pins, try fliptoing noun instead;
	say "You need to spin letters around, but spinning things around isn't useful except maybe in one special case[if pins are in lalaland]. Which you found[end if]." instead;

chapter redialing

the d2 is privately-named unscannable reflexive scenery. d2 is undesc. printed name of d2 is "dialer[if debug-state is true] (part 2)[end if]"

a-text of d2 is "RYRYYR". b-text of d2 is "RYRYYR". parse-text of d2 is "x[sp]-[sp]x[sp]-[sp]-[sp]x".

check fliptoing d2:
	if pins are reflexive:
		say "Hm. Nothing happened. You may need to reset things, here, with the pins in the dialer. It can't be too hard..." instead;

book bubble wrap and drawer

check fliptoing bubble wrap:
	if player is in Lean Lane:
		if trout is reflexive:
			say "'You have things backward. You haven't done enough yet to deserve a reward,' clucks Aunt Tuna with the staidest distaste. 'Show me you won't restack rackets with some other poor innocent!'" instead;

the dent is part of the raw red drawer. the dent is LLPish and flippable. description is "It'd probably take the right sort of futzing to get rid of."

after fliptoing dent:
	set the pronoun it to raw red drawer;
	continue the action;

a-text of dent is "RYRR". b-text of dent is "RGPR". parse-text of dent is "t[sp]e[sp]n[sp]d". dent is parse-spoilable.

some wipes are plural-named and auxiliary and reflexive. the wipes are on the raw red drawer.

description of wipes is "I-SPEW wipes is written in red on them."

a-text of wipes is "RRYRY". b-text of wipes is "RRYRY". parse-text of wipes is "x[sp]x[sp]-[sp]x[sp]-".

check taking the wipes:
	say "Aunt Tuna asks 'Really, what COULD you want with those.' She nods at you, and you pull your hand back. Maybe if you were quicker, you could take them." instead;

instead of doing something with the raw red drawer:
	if action is procedural, continue the action;
	say "'Disturb? I'd burst!' says Aunt Tuna[if dent is visible], as she mentions that DENT is ugly enough[end if].";

the raw red drawer is scenery in Lean Lane. the raw red drawer is a supporter.

understand "raw/-- red/-- warder drawer" as raw red drawer when trout is reflexive.
understand "raw/-- red/-- reward drawer" as raw red drawer when trout is reflexed.

to say rew-war:
	say "[if raw red drawer is reflexive]warder[else]reward[end if]"

check putting on raw red drawer:
	say "No. Aunt Tuna keeps her place tidy." instead;

description of raw red drawer is "It's, well, raw and red[if dent is part of raw red drawer], with a visible dent[end if][if trout is reflexive]. Aunt Tuna nods and points to Tortu as you look at it, indicating you could get what's in there if you help him[end if]."

check opening the drawer:
	if bubble wrap is not off-stage:
		say "There's no secret compartment or anything. No need to be greedy." instead;
	if trout is not reflexed:
		say "Aunt Tuna mentions subtly-not-so-subtly that a guest is not a thief." instead;
	if trout is reflexed:
		say "Aunt Tuna exclaims 'Re-treat? Retreat!' Abashed, you assure yourself she shuffled the duplicate letters around, somehow." instead;

chapter tending

tending is an action applying to one thing.

understand the command "tend" as something new.

understand "tend [something]" as tending.

does the player mean tending the dent: it is very likely.

dent-tend is a truth state that varies.

carry out tending:
	if noun is not dent:
		say "You're not sure how to tend that." instead;
	if dent-tend is false:
		say "You fiddle with the dent, joggling the [rew-war] drawer from side to side, then--wham! Something inside knocks the dent back out, and the drawer is in perfect order again. Aunt Tuna is pleased, and Tortu is impressed.";
		reg-inc;
		min-up;
		now dent-tend is true;
		now dent is in lalaland;
	the rule succeeds;

chapter swipeing

swipeing is an action applying to one thing.

understand the command "swipe" as something new.

understand "swipe [something]" as swipeing.

does the player mean swipeing the wipes: it is likely.

after fliptoing wipes:
	min-up;
	continue the action;

carry out swipeing:
	if noun is wipes:
		if player has wipes:
			say "Better to swipe the wipes across something dirty[if lance is visible]--hmm, there's that lance, there[end if]." instead;
		try fliptoing wipes instead;
	if noun is a person:
		say "Whether pickpocketing or attacking something living...that's not cool!" instead;
	say "You don't need to take that so quickly.";
	try taking noun instead;

chapter cleaning

cleaning is an action applying to one thing.

understand the command "clean" as something new.

understand "clean [something]" as cleaning.

does the player mean cleaning the lance:
	it is very likely.

does the player mean cleaning the player when player does not have lance:
	it is very likely;

carry out cleaning:
	if noun is the player:
		say "You are morally and physically okay." instead;
	if noun is lance and lance is cleaned:
		say "The lance is as shiny as can be." instead;
	if player does not have wipes:
		say "You have nothing to clean [if noun is lance]the lance[else]anything[end if] with.";
		if noun is lance:
			preef lance;
		the rule succeeds;
	if noun is waste:
		say "The wipes won't begin to clear away the waste. You need good old fashioned physical effort." instead;
	if noun is not lance:
		say "You don't need to clean that." instead;
	now lance is cleaned;
	now lance is unfigured;
	now player has lance;
	say "The lance becomes much less grungy as you swipe the wipes across it. You can actually pick it up, now. So you do. But it's obviously a very righteous lance. Only to be used against an enemy of great annoyance. It won't help against multiple opponents, either, but at least it is collapsible, so it fits easily in your purse.[paragraph break]The wipes biodegraded kind of nastily in the process, but that is one less thing to carry.";
	now wipes are in lalaland;
	min-and instead;

book Lapsin' Plains

to say knob-link:
	say "[if knob is in plains], linked by a knob,[end if]"

Lapsin' Plains is north of anger range. Lapsin' Plains is in oyster. "Boy, it's desolate here! [if span pans are visible]Span pans[knob-link] guard your way into Shut huts[else]Shut huts lie thus here, and you can go inside[end if][if fragments are visible]. You see debris from a crate[end if][if bogus-plains is reflexive], and you have this weird urge to say something, even with nobody around[end if]. Sloppy polyps make travel advisable everywhere except past [if pans are in plains]the pans[else]where the pans were[end if] and back south."

the sloppy polyps are plural-named bounding scenery in Lapsin' Plains. "Maybe it's holding the plains together, but crossing it would be inadvisable. You can guess why."

instead of doing something with the sloppy polyps:
	if action is procedural, continue the action;
	say "It's more likely the sloppy polyps would do something with you instead of the other way around. You don't need to go beyond."

c2 is vanishing privately-named scenery in Lapsin' Plains. c2 is undesc. printed name of c2 is "wherever the crate is coming from"

a-text of c2 is "RRYRY". b-text of c2 is "RPGRG". parse-text of c2 is "x[sp]r[sp]a[sp][sp]e". c2 is parse-spoilable.

instead of doing something with the crate:
	if action is procedural, continue the action;
	say "You don't need to fiddle randomly with the debris." instead;

does the player mean opening the span pans: it is likely.

the crate is reflexive scenery in Lapsin' Plains. "[if crate is reflexed]You can only see fragments of what it was, and they're not worth paying attention to[else]You can't see the crate but you know it, or one just like it, is about to be thrown at you. Crates are a dime a dozen for any bad guys, so that could go on for a while[end if]."

a-text of crate is "RYYRR". b-text of crate is "RYGRR". parse-text of crate is "x[sp]r[sp]a[sp]x[sp]t". crate is parse-spoilable.

understand "debris" and "crates" as crate.

the shut huts are plural-named scenery in Lapsin' Plains. "They're shaped like a big ol['] upended tush.". understand "tush" and "hut" as shut huts.

check taking shut huts:
	try entering shut huts instead;

instead of entering huts:
	try opening span pans instead;

after printing the locale description for Lapsin' Plains when Lapsin' Plains is unvisited:
	say "You hear splintering and notice a crate that fell near you. Someone or something doesn't like you here.";
	now fragments are in Lapsin' Plains;

instead of cutting denim:
	try attacking denim;

the skis are a plural-named flippable thing in Lapsin' Plains. the skis are fixed in place. "Skis criss-cross over the pans, blocking you from entry."

a-text of skis is "RYRR". b-text of skis is "RYRP". parse-text of skis is "x[sp]i[sp]x[sp]s". skis is cheat-spoilable.

check fliptoing skis:
	if c2 is reflexive:
		say "[one of]As you reach to kiss the skis, you feel something on the back of your head, then a splintering noise. You see a bunch of wood fragments behind you. You're not sure how you survived without feeling dizzy, but someone's out to get you. You'll need to get rid of distractions before doing that again[or]You don't need to be hit with another crate[stopping].";
		preef skis;
		now bonkies is true;
		the rule succeeds;
	if crate is reflexive:
		say "[if bonkies is true]You would, but you would probably get hit with the crate. You need to anticipate, somehow[else]You flinch, a second too late, from a crate thrown at you. You can trace the crate, but you can't -- use your reflexes. But that seems right[end if].";
		preef skis;
		now bonkies is true;
		the rule succeeds;

to say ski-la:
	if skis are in lalaland:
		say ", and you already nailed that";

description of skis is "They're [one of]SISK brand (of course) and[or][stopping] criss-cross over the span pans. You won't make it through without getting rid of them."

the skis are vanishing.

instead of taking skis:
	say "They're wedged to the door right now. The more you force them, the more they seem to pull away. But how to be nice to skis?"

section huging

understand the command "hug" as something new.

understand the command "embrace" as something new.

chapter splaining

bogus-plains is privately-named LLPish reflexive scenery in Lapsin' Plains. understand "plains" as bogus-plains when player is in Lapsin' Plains and debug-state is true. bogus-plains is undesc. printed name is "all around the plains"

understand "bp" as bogus-plains when debug-state is true.

a-text of bogus-plains is "RRRYYR". b-text of bogus-plains is "RRRY??". parse-text of bogus-plains is "x[sp]x[sp]x[sp]a[sp]?[sp]?".

chapter bonking

the span pans are plural-named vanishing scenery in Lapsin' Plains. "They're squarish, so you can't scootch under them. But there are a bunch of messages, all probably just to distract you: 'HI, ENTER? IN THERE? NEITHER!' / 'OPEN? NOPE!' / 'TRY, O TYRO!'[paragraph break]You're probably better off just focusing on the pans.[paragraph break][if skis are in plains and knob is in plains]Skis and a knob hold the pans together[else if skis are in plains]Skis crisscross over the pans[else]A knob still holds the pans together[else]You got rid of the knob and skis, but the pans are still in the way[end if]."

to say pan-block:
	if knob is in lapsin' plains and skis are in lapsin' plains:
		say "[one of]skis and knob[or]knob and skis[at random]";
	else if knob is in lapsin' plains:
		say "knob";
	else:
		say "skis"

check fliptoing span pans:
	if crate is reflexive:
		say "You hear a crate crash nearby. You can't snap just RIGHT, though you must be on the right track.";
		preef span pans;
		the rule succeeds;
	if knob is in lapsin' plains or skis are in lapsin' plains:
		say "The pans rumble a bit but are held together by the [pan-block]. You'll need to unblock the pans for that to work.";
		preef span pans;
		the rule succeeds;

check fliptoing span pans:
	if knob is in plains or skis are in plains:
		say "The pans wobble, but the [pan-block] still hold[if skis are not in plains]s[end if] them together.";
		preef span pans;
		the rule succeeds;

a-text of span pans is "RRYR". b-text of span pans is "?R?R". parse-text of span is "?[sp]?[sp]?[sp]p". span pans are cheat-spoilable.

understand "pan" and "snap pan" as span pans when player is in Lapsin' Plains and span pans are in Lapsin' Plains.

after doing something with span pans:
	set the pronoun it to span pans;

instead of taking span pans:
	say "Much too heavy."

instead of entering span pans:
	try opening span pans instead;

the knob is vanishing scenery in Lapsin' Plains. the knob is flippable and vanishing. description of knob is "It's just a doorknob, though you can imagine it saying 'Noob! Dork!' You'd just love to give it a good effective smack."

understand "doorknob" as knob.

a-text of knob is "RYRR". b-text of knob is "RYRR". parse-text of knob is "x[sp]o[sp]x[sp]x". knob is cheat-spoilable.

does the player mean bonking the knob: it is very likely.

check scaning span pans:
	if knob is in lalaland and skis are in lalaland, continue the action;
	say "The settler gives weird readouts depending on if you go over [if knob is in Lapsin' Plains and skis are in Lapsin' Plains]the knob, skis or pans[else if knob is in lapsin' plains]the knob or pans[else]the skis or pans[end if], but when you focus on the skis, this is what you get:[paragraph break]";

chapter snaping

snaping is an action applying to nothing.

understand the command "snap" as something new.

understand "snap" as snaping.

carry out snaping:
	if player is in lapsin' plains:
		if span pans are in lalaland:
			say "After a bit of thought, you decide against 'losing it.'" instead;
		try fliptoing span pans instead;
	say "This isn't the time or place to snap. With your fingers or with your brain.";
	the rule succeeds;

chapter bonk

bonking is an action applying to one thing.

understand the command "bonk [something]" as something new.

understand "bonk [something]" as bonking.

bonkies is a truth state that varies.

carry out bonking:
	if location of player is not Lapsin' Plains:
		say "[reject]" instead;
	if noun is door:
		say "I'll assume you meant the knob instead...";
		try bonking the knob instead;
	if noun is not knob:
		d "bonk to attack.";
		try attacking noun instead;
	try fliptoing knob instead;

check fliptoing knob:
	if knob is reflexed:
		say "That might undo what you did[if bonkies is true], and it might get you another knock on the noggin anyway[end if]." instead;
	if c2 is reflexive:
		say "[one of]As you reach to smack the knob, you feel something on the back of your head, then a splintering noise. You see a bunch of wood fragments behind you. You're not sure how you survived without feeling dizzy, but someone's out to get you. You'll need to get rid of distractions before doing that again[or]You don't need to be hit with another crate[stopping].";
		preef knob;
		now bonkies is true instead;
	if crate is reflexive:
		say "[if bonkies is true]You would, but you would probably get hit with the crate. You need to anticipate, somehow. Trace was the first step with the crate[else]You flinch, a second too late. You can trace the crate, but you can't -- use your reflexes. But that seems right[end if].";
		preef knob;
		now bonkies is true instead;

fragments are plural-named scenery. "Rotten brown fragments. Annoying and gross, but not harmful. They seem to be from a crate."

instead of taking the fragments:
	say "Eww. You would rather trace where they came from."

check opening the span pans:
	if knob is reflexive:
		say "It's jammed and there's no key. Or keyhole under the knob[one of]. And no, there's no mat to look under anywhere for a key. Just FYI[or][stopping]." instead;

book Uh at a Hut

to say mr-miss:
	say "[if player is male]Mr.[run paragraph on][else]Miss[end if]";

to say heepy:
	say "[if waste is visible]waste lying around, though you probably don't need to expend the physical effort to clean it unless you want to be [mr-miss] Perfect[else if heaps are reflexive]ugly looking heaps, though you may not care about aesthetics[else]the heaps you beautified[end if]"

Shadier Airshed is inside of Lapsin' Plains. It is in Oyster. it is innie. "[one of]Man! This hut was much bigger than you expected. It's so big, you probably could store a plane in here. Not that it would be useful or desirable to drag one in[or]You're [uaah]. A big one[stopping]. [if digger is not off-stage]You squint through the relative lack of light and notice some random stuff[else]Looks like you got most of the useful stuff from here[end if][if heaps are visible or waste is visible]. You see [heepy][end if]. You can only go back outside."

understand "hut" as Shadier Airshed.

to say uaah:
	say "[one of]uh, at[or]at, uh,[in random order] a hut".

the prod is a thing. description is "It's a corroded decor-rod--nah, just a prod. But it's rather thick and not uniformly smooth. It reminds you of one of those umbrellas you can't open up until you figure how by accident. One of those deals that are both really easy and not easy at all at the same time.[paragraph break]So you'll probably have to do something that'll feel obvious once you did it[if drop-try is true], something I already said wasn't usually useful[end if]."

does the player mean dropping the prod: it is very likely.

a-text of prod is "RRYR". b-text of prod is "RPGR". parse-text of prod is "x[sp]r[sp]o[sp]x". prod is parse-spoilable.

check opening prod:
	say "You flash back to the door saying NOPE. You can't figure a way to open the prod, but maybe brute force will work, instead." instead;

check dropping prod:
	if word number 1 in the player's command is not "drop":
		say "That's not the right way to abuse the prod to open it." instead;
	try fliptoing rigged digger instead; [eg flipping the prod to the digger]

the tubs are a plural-named thing in Shadier Airshed. "Tubs lie here--two glued together by their tops--and perhaps there's something inside."

check taking tubs:
	say "Way too bulky. But actually not as heavy as you thought." instead;

description of tubs is "They seem glued together. Maybe there is a way to break them open to see if there's anything inside."

instead of touching tubs:
	say "They seem to be made of something fragile, something you could break--porcelain, maybe? You hear something rattling inside.";

a-text of tubs is "RYRR". b-text of tubs is "RGRR". parse-text of tubs is "x[sp]u[sp]x[sp]x". tubs is cheat-spoilable.

the heaps are reflexive plural-named LLPish scenery. "[if heaps are reflexed]You have beautified them. Yay, you.[else]They are just a mess. You're not obligated to beautify Yorpwald, but maybe something could be done to them.[end if]"

a-text of heaps is "RRYRY". b-text of heaps is "RRGPY". parse-text of heaps is "x[sp]x[sp]a[sp]p[sp]e". heaps are parse-spoilable.

the rigged digger is a thing. description is "It is, unsurprisingly, a product of Shovel Hovels. It looks suited to its advertised purpose.". understand "shovel" as digger.

to say dig-purpose:
	if haunter is in lalaland and ruby is in lalaland:
		say "You're finished with the digger";
		continue the action;
	if ruby is in lalaland:
		say "You managed to bury the ruby. On to the next bit.";
		continue the action;
	if player is in Rascal Craals and hint is in Rascal Craals:
		say "Now you've buried the ruby, you could maybe show what you've found. No point undoing what you did";
		continue the action;
	say "You need to dig to some purpose";
	if player is in anger range and haunter is off-stage:
		say ", like uncovering the haunter";
	else if player is in Rascal Craals and player has ruby:
		say ", maybe to hide something here to frame the walleyes";
	else:
		say ", though maybe somewhere else";
	say "--and not just dig";

check searching the heaps:
	say "[if player has rigged digger]Don't get greedy[otherwise]That'd be too boring. You might have more fun creating something with the heaps. You don't know why, but you just do[end if]." instead;

the waste is vanishing scenery. "It'd take strength and effort to move or pick through." [it is not LLPish because you flip the tubs to it]

check fliptoing lance:
	if waste is reflexed:
		say "You've had enough of that." instead;

instead of taking waste:
	say "Waste of inventory space. Even with the purse."

instead of taking heaps:
	say "[if heaps are reflexive]They're too big and amorphous to fit in the purse[else]Alas, there is no art teacher nearby to show them to[end if]."

a-text of waste is "RRYYR". b-text of waste is "RRYYR". parse-text of waste is "x[sp]x[sp]-[sp]-[sp]x". waste is cheat-spoilable.

the clean lance is an LLPish reflexive thing. description of lance is "[if lance is cleaned]Clean and ready for righteous smiting[else]Too grimy and dirty[end if].". "A lance lies here, too dirty and gross to pick up."

printed name of lance is "[if lance is cleaned]clean [end if]lance"

the lance can be cleaned. the lance is not cleaned.

a-text of lance is "RRYYR". b-text of lance is "RRYYR". parse-text of lance is "x[sp]x[sp]-[sp]-[sp]x".

instead of taking lance:
	say "It's too icky."

chapter shapeing

shapeing is an action applying to one thing.

understand the command "shape" as something new.

understand "shape [something]" as shapeing.
understand "shape" as shapeing.

does the player mean shapeing heaps: it is very likely.

carry out shapeing:
	if noun is heaps:
		try fliptoing heaps instead;
	say "[reject]" instead;
	the rule succeeds.

chapter busting

busting is an action applying to one thing.

understand the command "bust" as something new.

understand "bust [something]" as busting.

does the player mean busting tubs: it is very likely.

carry out busting:
	if noun is tubs:
		try fliptoing waste instead;
	try attacking noun instead;

after fliptoing waste (this is the tubs give prod and waste rule):
	now player has prod;
	now heaps are in Shadier Airshed;
	set the pronoun them to heaps;
	set the pronoun it to prod;
	continue the action;

book Achers' Arches

Achers' Arches is a room in oyster. Achers' Arches is west of anger range. "Arches lead north to [if Horned Hedron is unvisited]what could be [end if]the Horned Hedron[if a-s is reflexed], but you already searched them[else]. They could maybe also be called Chaser Arches since there are lots of hidden places you could ambush someone from[end if][if a-s is reflexive and sardine is in lalaland] or hide yourself, or things[end if].[paragraph break]You can go back east to Anger Range, too[if sardine is in lalaland], as well as north[hedron-if-v][end if]. A handsome sand home blocks the way south and west."

check going in Achers' Arches:
	if noun is west or noun is south:
		say "The handsome sand home isn't where it's at. The Horned Hedron to the north looks more adventurous." instead;

the handsome sand home is bounding scenery in Achers' Arches. "It's definitely not mean-shod. But you probaby don't want to disturb a private residence."

instead of doing something with handsome sand home:
	if action is procedural, continue the action;
	if current action is entering, try going south instead;
	say "There's not much to do with the handsome sand home." instead;

to say hedron-if-v:
	if Horned Hedron is visited:
		say " to the Horned Hedron"

h-h is privately-named scenery in Achers' Arches. "You can only see the arches leading into the Horned Hedron.". understand "horned/hedron" and "horned hedron" as h-h. printed name of h-h is "the Horned Hedron".

instead of doing something with h-h:
	if current action is entering:
		try going north instead;
	if action is procedural:
		try examining h-h instead;
	continue the action;

the a-s are plural-named privately-named reflexive scenery in achers' arches. description of a-s is "[if a-s is reflexed]You already searched the arches and found something[else]A quick examination turns up nothing, but maybe if you were more methodical, something might turn up[end if].". the printed name of the a-s is "arches"

check taking a-s:
	say "[if a-s are reflexed]You got enough from the arches[else]You might find something in there. How to do that without taking them[end if]." instead;

understand "achers/arches" and "achers arches" as a-s.

understand "a-s" as a-s when debug-state is true. [for showme a-s]

[note that they can be CHASER arches too, hence the question mark. Need to check that cheat-scanning mentions CHASER too. ??]
a-text of a-s is "RYYRRR". b-text of a-s is "RY?RRR". parse-text of a-s is "x[sp]-[sp]-[sp]x[sp]x[sp]x".

does the player mean searching the a-s: it is very likely.

check fliptoing a-s:
	if sardine is visible:
		say "A snider near-dis from the sardine keeps you in check. You'll need to get rid of him to have a serious look.";
		preef a-s instead;

instead of searching a-s:
	if sardine is visible:
		say "A snider near-dis from the sardine keeps you in check. You'll need to get rid of him to have a serious look.";
		preef a-s instead;
	if the player's command includes "search":
		try fliptoing a-s;
		now a-s are unfigured;
		the rule succeeds;
	if a-s are reflexed:
		say "You already searched, which should work.";
	else:
		say "No, that is not quite the way to look through the arches.";

after fliptoing a-s:
	pearl-check;
	continue the action;

check going north in Achers' Arches:
	if sardine is in Achers' Arches:
		say "'Sop, no snoop,' says the sardine, pulling you back." instead;

The sandier sardine is a person in Achers' Arches. description is "He keeps putting his hands to his ears every so often, as if to avoid sudden noise. The right one might set him off.". "A sandier sardine waits nervously here. He seems armed, so you probably can't go north while he's still around."

check scaning sardine:
	say "[one of]The sardine smirks a bit then comments he's glad he can't hear the worst of the infrared noises now that he's a bit older.[or]The sardine barely notices, this time.[stopping][line break]The settler didn't seem to light up when pointed at the sardine. Perhaps you don't need to do anything with him directly." instead;

chapter burying

[we can't quite get away with doing nothing here]

burying is an action applying to one thing.

understand the command "bury [something]" as something new.

understand "bury [something]" as burying.
understand "bury" as burying.

does the player mean burying the ruby:
	it is very likely;

rule for supplying a missing noun when burying:
	if player has ruby:
		now noun is ruby;
	else:
		now noun is the player;

the ruby is a reflexive thing.

a-text of ruby is "RYRO". b-text of ruby is "RGRB". parse-text of ruby is "b[sp]u[sp]r[sp]y". ruby is parse-spoilable.

description of ruby is "[one of]See ruby, rub eyes. [or][stopping]You feel heat run from you as you see the words HAUNTER on it."

carry out burying:
	if noun is not ruby:
		say "That's not something worth BURYing." instead;
	if ruby is in lalaland:
		say "You half forgot where you dug the ruby. You're not sure if you want it back." instead;
	if player does not have ruby:
		say "Nothing you have is valuable enough to bury." instead;
	if player is in anger range:
		say "That would reunite the haunter with the ruby, but you might be a prime suspect for taking it. Maybe you can use the haunter to take out an enemy." instead;
	if player is in Horned Hedron:
		say "The walleyes would find the ruby and take it, and you'd be out--but maybe you could frame them for its theft by burying the ruby somewhere near." instead;
	if player is not in Rascal Craals:
		say "You don't need to sock away wealth. You have enough. But that ruby--you've heard of it before. Maybe this is not the right place. If you want to hide the ruby, hide it somewhere hidden." instead;
	now ruby is in Rascal Craals; [necessary for flipping to work]
	try fliptoing thin hint;
	the rule succeeds;

check fliptoing thin hint:
	if player does not have rigged digger:
		if player has prod:
			say "Your prod from the Shadier Airshed should be able to bury stuff if you tinker right. Jar it the right way." instead;
		say "Nothing to bury anything with. Well, there's your fingers, but that'd take too long[one of][or][if Lapsin' Plains are unvisited]. Maybe you can explore north of Anger Range to find something[else if Shadier Airshed is unvisited]. Maybe there's something behind the span pans[else]. Maybe you missed something in a hut[end if][stopping]." instead;

book Horned Hedron

Horned Hedron is north of Achers' Arches. Horned Hedron is in Oyster. Horned Hedron is innie. "[one of]Nothing to see here. It's an ominous nothing to see here, like a flower store or a restaurant that never has customers or even running water. [stopping]There're also some theses sheets tacked here[if o-t is in Horned Hedron]. An ol['] trap[else]. A portal[end if] leads into the Horned Hedron proper[if o-t is in Horned Hedron]. You probably can't just walk in, but all the same, there must be some way to disarm it[end if]. [if walleyes are in lalaland]Collapsed old places[else]Rascal craals[end if] lie west."

check going west when player is in Horned Hedron:
	if haunter is in lalaland:
		say "Collapsed old places are that way. No need to go back." instead;

thug-tell is a truth state that varies.

check going south when player is in Horned Hedron and ruby is in lalaland:
	if thug-tell is false:
		say "You hear snickers as DIE THOU thugs are, presumably, digging up your ruby. If anyone finds them with it, the thugs will be the ones who have it.";
		now thug-tell is true;

chapter theses sheets

the theses sheets are plural-named amusing scenery in Horned Hedron.

instead of taking sheets:
	say "No denial they're nailed."

instead of scaning sheets:
	say "The words on the theses can certainly be twisted into something worse, but the sheets cannot be changed for the better."

description of theses sheets is "[one of]They could be a heists thesis except they're definitely not shiest. They're a MEAN FIST MANIFEST written in praise of Ulf-Theo The Foul ('Feh, lout!')[paragraph break]Beneath the main HIDEOUT! DIE THOU! slogan (OH, ENTER NOT HERE) one[or]Another[stopping] point reads: [randbla]"

chapter ol trap and portal

the o-t is privately-named flippable scenery in Horned Hedron. understand "ol/ol' trap" and "trap/oltrap" as o-t. printed name of o-t is "ol['] trap".

a-text of o-t is "RYRRYR". b-text of o-t is "RYRRGR". parse-text is "x[sp]-[sp]t[sp]r[sp]-[sp]x".

check taking o-t:
	say "That'd be a good way to spring it." instead;

description of o-t is "Naturally, it is there to make it hard for you to enter. But there must be some way to disarm it. Somewhere hidden in this room."

check fliptoing a-p:
	if walleyes are not in lalaland:
		say "Now there's a good plan. But right now, that gang of walleyes might rough you up. You need a way to get the gang to vacate these premises.";
		preef o-t;
		do nothing instead;

The weaselly walleyes are plural-named people in Horned Hedron. "[one of]Some weaselly walleyes whisper to each other and smirk at your every move[or]Those weaselly walleyes are still acting and looking all shifty[stopping]."

say-something is a number that varies. say-something is 0.

every turn when player is in Horned Hedron and walleyes are in Horned Hedron (this is the talking henchmen rule):
	if say-something is 3:
		now say-something is 0;
	if say-something is 0:
		say "[one of]One relates a story of framing someone else for burying a hidden treasure, then getting the treasure as a reward. Some sub-henchman who worries it'll happen to him is beaten up[or]One remarks he's heard there's buried treasure where you'd least expect it in the Horned Hedron--he speculates where that is, then says, oops, it's not least expected any more[or]One speculates on where the Horned Hedron's treasure stash might be[or]One sneers it'd be funny if the ruby turned up in some innocent person's home, and the haunter took them out[cycling].";
	increment say-something;

description of walleyes is "Oh, they are seedy, all right. But they seem more interested in laughing at you than attacking. They're probably just flunkies who will take a fall."

check going inside in Horned Hedron:
	if a-p is visible:
		try entering a-p instead;
	if o-t is visible:
		try entering o-t instead;

check entering o-t:
	say "It's an obvious ol['] trap but likely an effective one." instead;

a-p is privately-named auxiliary scenery. printed name of a-p is "the portal". description of a-p is "It looks safe. It doesn't crackle or anything. The only question is where it leads."

a-text of a-p is "RYRRYR". b-text of a-p is "RYPPYR". parse-text of a-p is "p[sp]-[sp]x[sp]x[sp]-[sp]l". a-p is cheat-spoilable.

understand "portal" as a-p.

check entering a-p:
	if ruby is not in lalaland:
		say "Weaselly walleyes jump out and buffet you and throw you back into the main entrance of the Horned Hedron. 'Boss told us not to let you air-breathers in. Even with a gift. But we'll be watching you.' They run back out of view." instead;
	if walleyes are in Horned Hedron:
		say "Not with those walleyes waiting and watching." instead;
	if find-base is true:
		check-detours instead;
	else:
		say "You try to make your way through the Horned Hedron, but you eventually wind up in an[one of][or]other (?)[run paragraph on][stopping] end den.[paragraph break]";
		move player to End Den instead;

to check-detours:
	if player has lance:
		say "You use your gleaner to [one of][or]re[stopping]trace the path to the Den Loft. Halfway through, your lance begins to glow as you pass a small passage. Explore?";
		if the player yes-consents:
			now ant is in Dourest Detours;
			now player is in Dourest Detours;
		otherwise:
			say "Ok, no nook.";
			now player is in Den Loft;
		continue the action;
	say "[one of]You remember the path to the Den Loft from the gleaner. It is not too bad[or]It's easier to find the second time around[stopping].";
	now player is in Den Loft;

chapter patroling

patroling is an action applying to nothing.

understand the command "patrol" as something new.

understand "patrol" as patroling.

carry out patroling:
	if player is in Horned Hedron:
		if o-t is visible:
			try fliptoing a-p instead;
		else:
			say "You already patrolled." instead;
	if Horned Hedron is visited:
		if walleyes are in lalaland and o-t is in Horned Hedron and mrlp is oyster:
			say "You suddenly realize how to search out the ol['] trap in the Horned Hedron.";
			move player to Horned Hedron, without printing a room description;
			try fliptoing a-p instead;
		if walleyes are in Horned Hedron and mrlp is oyster:
			say "That's a good idea. Maybe you can search the Horned Hedron once if the walleyes are gone.";
			preef o-t;
			do nothing instead;
	say "You pace around for a bit, but nothing happens. Maybe this isn't quite the place to look[if o-t is in lalaland]--it already worked in the Horned Hedron, and once is enough[end if]." instead;
	the rule succeeds;

book Rascal Craals

Rascal Craals is west of Horned Hedron. "The rascal craals, where the Hedron workers live, are lined up nice and scalar[if ruby is not in lalaland]. This would be a good place to hide something, because nobody who fears for their life would want to go here[else]. You [one of]still [or][stopping]see the thin hint you marked in the ground with your rigged digger[end if]. A round bay boundary blocks all ways out except back east.". Rascal Craals is in Oyster. Rascal Craals is innie.

section round bay boundary

the round bay boundary is bounding scenery in rascal craals. "It's pretty scenic, and it's also big enough to keeping you from going any way except back east."

instead of doing something with round bay boundary:
	if action is procedural, continue the action;
	say "The boundary is nice to look at, but you don't have to do anything with it.";

section thin hint

the thin hint is scenery. "The thin hint marks where you buried the ruby. You will be able to find it if you leave and come back."

after fliptoing thin hint:
	now ruby is in lalaland;
	continue the action;

before doing something with thin hint:
	if action is procedural, continue the action;
	if current action is taking:
		say "You don't need to take a hint you yourself dropped." instead;
	say "There's nothing to do with that hint except point it out to someone else, later." instead;

book End Den

End Den is an innie room in Oyster. "You look around, but this probably isn't where you're supposed to be. You can probably go back out[if player has gleaner]. Or maybe you have something that could get you to the right place[end if]."

check exiting in End Den:
	say "You find your way back to the Horned Hedron entrance.";
	if haunter is visible:
		move haunter to Horned Hedron;
	now player is in Horned Hedron instead;

volume towers

[this is the biggest area of the game, though Oyster has almost as many lines. Guardians are a sort of specific person, as are warriors. Because warriors are only in the Trefoil, they will be in that section.]

book towers specific verbs

chapter toasting

xrayvision is a truth state that varies.

check inserting into the rosetta toaster:
	if xrayvision is true:
		say "You've already got some x-ray vision. So you can just XRAY whatever you want." instead;
	if noun is not a hintpastry:
		say "That's not a toaster pastry." instead;
	if noun is strudel and noun is reflexive:
		say "You pause momentarily, wondering if you could've done something with the strudel to make it feel--well, yours. But you don't need style points.";
	now noun is heated;
	now xrayvision is true;
	say "[if xray-warn is false]Looking at yourself after eating the pastry, you see you can see what you'd want to be--stronger, slimmer, etc. You feel like you could look through something else to see what it really should be now. Just XRAY it[else]The x-ray vision comes back. Once again, you can XRAY what you want to[end if].";
	now xray-warn is true;
	if noun is strudel and strudel is reflexive:
		poss-d;
	pad-rec "xray";
	now noun is in lalaland instead;

toasting is an action applying to one thing.

understand the command "toast/heat/warm" as something new.

understand "toast [something]" and "heat [something]"  and "warm [something]" as toasting.

carry out toasting:
	if noun is the player and toaster is visible:
		say "That's not the way to get on a hot streak." instead;
	if player does not have the toaster:
		if toaster is visible:
			try taking the toaster;
			if player does not have toaster:
				say "You can't get the toaster to do that." instead;
		else:
			say "You have no toasting device." instead;
	if noun is a guardian or noun is reflexive or noun is vanishing:
		if noun is strudel:
			do nothing;
		else:
			say "The correct usage is to toast something edible, and then you can xray something." instead;
	if noun is a person:
		say "The toaster is not a weapon. It's not that big, either." instead;
	try inserting the noun into the toaster;

chapter xraying

xraying is an action applying to one thing.

does the player mean xraying a guardian: it is very likely.

understand the command "xray/x-ray [something]" as something new.

understand "xray [something]" as xraying.
understand "x-ray [something]" as xraying.
understand "xray" as xraying.

rule for supplying a missing noun when xraying:
	say "I'm going to force you to be specific about what to x-ray, since this is a quasi-cheat.";
	reject the player's command;

to say if-duck:
	if duck is not visible:
		say "--but nothing [if shaven havens is visited]here [end if]seems to fit with UNLOCKED";

to say big-hint of (rayx - a thing) :
	if rayx is a guardian or rayx is a warrior:
		choose row with the-from of rayx in the table of towers anagrams;
		say "[right-word entry in upper case]";
	else: [only for non guardians/non warriors] [if rayx is tetris sitter TRISTE] [the order is southeastish and north, 1st place you can use something]
		say "[if rayx is yurts]RUSTY[else if rayx is keycar]CREAKY[else if rayx is old ice]COILED[else if rayx is ego drains]ORGANISED[else if rayx is ripostes]PROSIEST[else if rayx is strudel]RUSTLED[else if rayx is denim]MINED[else if rayx is weeds]SEWED[else if rayx is raves saver]PEARLY[else if rayx is atblock]ATTENTIVE[else if rayx is duck]UNLOCKED--well, maybe the duck will help something become unlocked[else if rayx is prison ropins]UNLOCKED[if-duck][else if rayx is fissure]FUSSIER[else if rayx is Dinger]GRAINED[else if rayx is turbos]ROBUST[else if rayx is blaster]STABLER[else if rayx is weirder red wire]REWIRED[else if rayx is eastern]NEAREST[else if rayx is serpent]PRESENT[else if rayx is Tetris Sitter]TRISTE[else if rayx is ur-pine]PUNIER[else if rayx is palace]SPECTACULAR[else]BUG[end if]";

xray-warn is a truth state that varies.

check giving hintpastry to Tetris Sitter:
	say "He's used to loftier meals than that." instead;

check giving hintpastry to a guardian:
	if second noun is diners:
		say "They scoff at what your idea of fine cuisine seems to be." instead;
	say "Bribery won't work." instead;

palace-warn is a truth state that varies.

check xraying:
	if noun is crocus:
		try xraying flowerpot instead;
	if noun is flowerpot:
		if noun is reflexed:
			say "The flowerpot has a plant in it. You decline to speculate in molecular biology or whatever." instead;
		if mislit limits is unvisited:
			say "Nothing, yet. Maybe you're not far enough along." instead;
		if player is not in mislit limits:
			say "Maybe you should go back outside." instead;
	if noun is rayed and xraytrump is false:
		ital-say "you already xrayed this, so you're just remembering what it was...";
	else if xrayvision is false and xraytrump is false:
		say "You don't have x-ray vision now." instead;
	else if xraytrump is true:
		d "using x-ray trump.";
	if mrlp is not towers:
		if Topside is unvisited:
			say "[reject]" instead;
		say "That was for the towers. It doesn't work anywhere else because, well, different areas are different." instead;
	if noun is prefigured:
		choose row with the-from of noun in table of towers anagrams;
		say "You already remember trying [right-word entry in upper case]--which seems right, just a matter of getting other things right first. Maybe they already are." instead;
	if noun is thruhinted:
		choose row with the-from of noun in table of towers anagrams;
		say "You remember, from somewhere behind a fourth wall, reading you could just say [right-word entry in upper case]." instead;
	if noun is the player:
		say "You might expose yourself to harmful rays and stuff, looking that close." instead;
	if noun is agnostic:
		if Dinger is in Actionless Coastlines, try xraying Dinger instead;
		if agnostic is in Obscurest Subsector and atblock is in Obscurest Subsector, say "You realize [ag-first] could be a little more ATTENTIVE.";
	if noun is sled rut:
		if strudel is visible:
			try xraying strudel instead;
		else:
			say "Without the strudel, you can't really see into the sled rut." instead;
	if noun is Dr Yow:
		if Dr Yow has been rowdy and Dr Yow has been wordy:
			say "You've done what you can with Dr. Yow. [he-she-c] can still be rowdy or wordy." instead;
		if Dr Yow has been wordy:
			say "You realize Dr. Yow has a rowdy side, too.";
		else if Dr Yow has been rowdy:
			say "You realize Dr. Yow has a wordy side, too.";
		otherwise:
			say "You see Dr. Yow has both a wordy and rowdy side that have been crushed by prison.";
	if noun is bot boat:
		if turbos are reflexed and blaster is reflexed:
			if red wire is part of the bot boat:
				try xraying red wire instead;
			say "The bot boat and its parts appear as workable as it can be." instead;
		if t-or-b is reflexive:
			try xraying t-or-b instead;
		if blaster is reflexive:
			try xraying blaster instead;
		if turbos are reflexive:
			try xraying turbos instead;
	if noun is reflexed or noun is nonreflexive:
		say "[if noun is plural-named]Those don't[else]That doesn't[end if] seem to need internal changing. Maybe find something or someone else to x-ray." instead;
	if noun is palace:
		if palace-warn is false:
			now palace-warn is true;
			say "Boy! This is a big one. You are overwhelmed by the superlativeness of the way to describe the castle. You are pretty sure you can handle that word being spoiled. Well, I'm pretty sure you are pretty sure. Are you pretty sure you can handle the spoiler?";
			if the player yes-consents:
				do nothing;
			else:
				say "You decide to be pretty sure you can figure it on your own, instead." instead;
	if noun is guardian:
		say "Hmm. You bet you could get past if [the noun] were [big-hint of noun].";
	else if noun is warrior: [do I need this? Since warriors moved to start]
		say "Boy! Sure would be nice if [noun] were [big-hint of noun].";
	else if noun is rayed:
		say "You remember you could still think [big-hint of noun]." instead;
	else if noun is prefigured or noun is thruhinted:
		say "You remember trying to make things [big-hint of noun], so you won't waste your x-ray vision here." instead;
	else:
		say "You have a good gaze, and you know what to do and say and think. Gotta be [big-hint of noun].";
	if used-ray is false:
		poss-d;
	now used-ray is true;
	now noun is rayed;
	if scams is false:
		now xrayvision is false;
		now undo-code is 2;
		prevent undo;
	else:
		d "Xray cheat retains x-ray vision.";
	the rule succeeds;

used-ray is a truth state that varies.

xraytrump is a truth state that varies.

chapter xring - not for release

xring is an action out of world.

understand the command "xr" as something new.

understand "xr" as xring.

carry out xring:
	now xraytrump is true;
	the rule succeeds;

chapter xaing - not for release

xaing is an action out of world.

understand the command "xa" as something new.

understand "xa" as xaing.

carry out xaing:
	now xraytrump is true;
	repeat with xc running through all things in location of player:
		if xc is not curst palace and xc is not the player:
			say "[xc]:[line break]";
			try xraying xc;
	the rule succeeds.

book all about guardians

section initalization

when play begins (this is the place guardians rule):
	repeat through table of guard-org:
		now guadir of guy entry is blockdir entry;
		now gualoc of guy entry is loc entry;
		if there is a kloozorz entry:
			now guy entry is clueneedy;

book which room is how far

to decide which number is palace-let: [I could've defined a new variable but it's nice to have this in one place. This shows how many letters the settler gives.]
	if location of player is topside deposit or location of player is Outer Route, decide on 4;
	if location of player is Scope Copse, decide on 5;
	if location of player is lost lots or location of player is Fringe Finger or location of player is unblest sunbelt or location of player is baldest blasted saltbed, decide on 6;
	if location of player is treading gradient or location of player is obscurest subsector or location of player is Danger Garden or location of player is Shaven Havens or location of player is Anemic Cinema, decide on 7;
	if location of player is salted deltas or location of player is Strati Strait, decide on 8;
	if location of player is actionless coastlines or location of player is rawest waters, decide on 9;
	if location of player is Mesprise Premises, decide on 10;
	if location of player is Mislit Limits, decide on 11;
	decide on 2;

book drawing the map

to decide whether can-see-map:
	if rawest waters is visited or Mislit Limits is visited, decide no;
	if spec-o-scope is unexamined, decide no;
	if mrlp is towers, decide yes;
	decide no.

tow-x-start is a number that varies. tow-x-start is 320.
tow-y-start is a number that varies. tow-y-start is 8.
tow-delta is a number that varies. tow-delta is 16.
square-from-center is a number that varies. square-from-center is 4.

after examining spec-o-scope (this is the specoscope draw rule):
	draw-my-loc;
	continue the action;

to draw-my-loc: [this draws a black square in your current location]
	let myx be 0;
	let myy be 0;
	draw-towers-map;
	repeat through table of towers-locs:
		if location of player is my-loc entry:
			change current foreground-color to (R 0 G 0 B 0);
			now myx is tow-x-start + (tow-delta * my-x entry) - 2;
			now myy is tow-y-start + (tow-delta * my-y entry) - 2;
			draw a rectangle (current foreground-color) in current graphics window at myx by myy with size 5 by 5;

carry out looking when mrlp is towers (this is the towers YOU ARE HERE redraw rule):
	now location of player is visited;
	if can-see-map:
		draw-my-loc;
	continue the action;

to wipe-towers-map:
	if can-see-map:
		change current foreground-color to (R 255 G 255 B 255);
		let x-start be tow-x-start - square-from-center;
		let y-start be tow-y-start - square-from-center;
		draw a rectangle (current foreground-color) in current graphics window at x-start by y-start with size 1 + (2 * square-from-center) + (4 * tow-delta) by 1 + (2 * square-from-center) + (4 * tow-delta);

to draw-towers-map:
	let sqsz be (square-from-center * 2) + 1;
	let myx be 0;
	let myy be 0;
	repeat through table of towers-locs:
		if my-loc entry is accessible:
			if my-loc entry is unvisited:
				change current foreground-color to (R 42 G 126 B 126);
			else:
				change current foreground-color to (R 42 G 210 B 42);
		else if my-loc entry is sideview:
			change current foreground-color to (R 168 G 168 B 42);
		else if my-loc entry is mightaswell:
			change current foreground-color to (R 84 G 84 B 84);
		else:
			change current foreground-color to (R 210 G 42 B 42);
		now myx is tow-x-start + (tow-delta * my-x entry) - square-from-center;
		now myy is tow-y-start + (tow-delta * my-y entry) - square-from-center;
		draw a rectangle (current foreground-color) in current graphics window at myx by myy with size sqsz by sqsz;
	repeat through table of guard-org:
		if guy entry is stinger and bonker is not in lalaland, next; [the stinger is tricky because it's artificially placed a bit]
		[if debug-state is true, say "Gendermatching [guy entry].";]
		unless guy entry gendermatches, next;
		if guy entry is in lalaland:
			change current foreground-color to (R 42 G 210 B 42);
		else:
			change current foreground-color to (R 210 G 42 B 42);
		if guy entry is stinger:
			draw-line obscurest subsector and west;
			continue the action;
		[if debug-state is true, say "[loc entry] [blockdir entry] [current foreground-color].";]
		draw-line loc entry and blockdir entry;

to draw-line (lcc - a room) and (bd - a direction):
	choose row with my-loc of lcc in table of towers-locs;
	let x-start be tow-x-start + (tow-delta * my-x entry);
	let y-start be tow-y-start + (tow-delta * my-y entry);
	let x-end be tow-x-start + (tow-delta * my-x entry);
	let y-end be tow-y-start + (tow-delta * my-y entry);
	if bd is north:
		decrease y-start by square-from-center;
		decrease y-end by (tow-delta - square-from-center) - 1;
	if bd is south:
		increase y-start by square-from-center + 1;
		increase y-end by (tow-delta - square-from-center);
	if bd is east:
		increase x-start by square-from-center + 1;
		increase x-end by (tow-delta - square-from-center);
	if bd is west:
		decrease x-start by square-from-center;
		decrease x-end by (tow-delta - square-from-center) - 1;
	linedraw (current foreground-color) in current graphics window from x-start by y-start to x-end by y-end with 1;
[To linedraw (hue - a number) in (win - a g-window) from (x1 - a number) by/x (y1 - a number) to (x2 - a number) by/x (y2 - a number) with (wgt - a number):]

table of towers-locs [arranged n to s then w to e]
my-loc	my-x	my-y
shaven havens	1	0
Fringe Finger	0	1
anemic cinema	1	1
salted deltas	2	1
actionless coastlines	3	1
baldest blasted saltbed	1	2
Treading Gradient	2	2
Strati Strait	3	2
Outer Route	0	3
scope copse	1	3
unblest sunbelt	2	3
Danger Garden	3	3
obscurest subsector	4	3
topside deposit	1	4
lost lots	3	4
Mislit Limits	4	0

book basic guardian work

for writing a paragraph about a guardian (called gua):
	if gua is unripe ur-pine or gua is reed's ale:
		continue the action;
	let so-far be 0;
	repeat with myg running through not prevseen guardians in location of player:
		if myg is mas and player is female, next;
		if myg is female and player is male, next;
		if so-far > 0, say "[line break]";
		guar-pro myg;
		say "[if so-far is 0]Oh, look[else if so-far is 1][line break]But there's more[else if so-far is 2][line break]And that's not all[else][line break]Man, it's busier than it should be here[end if]! [initial appearance of myg]";
		increment so-far;
		now myg is mentioned;
	if so-far > 0, say "[line break]";
	let psg be number of prevseen guardians in location of player;
	let guasofar be 0;
	if psg > 0:
		say "You can [if number of prevseen guardians is 0]also [end if]still see ";
		repeat with myg running through prevseen guardians in location of player:
			increment guasofar;
			guar-pro myg;
			say "[the myg] blocking passage [if gualoc of myg is location of player][guadir of myg][otherwise][opposite of guadir of myg][end if]";
			if guasofar < psg - 1:
				say ", ";
			if guasofar is psg - 1:
				say " and ";
		say ".";
	now all guardians in location of player are prevseen;
	now all guardians in location of player are mentioned;
	continue the action;

to guar-pro (g - a person):
	if g is neuter, set the pronoun it to g;
	if g is female, set the pronoun her to g;
	if g is plural-named, set the pronoun them to g;

guardians-seen is a number that varies.

before looking:
	now guardians-seen is 0.

towerclose is a number that varies.

after printing the locale description when mrlp is towers (this is the castle near/far rule) :
	let rm be location of player;
	let any-reveal be false;
	repeat with adude running through guardians in location of player:
		if adude is clueneedy and any-reveal is false:
			now adude is not clueneedy;
			now any-reveal is true;
			say "[kloozorz corresponding to a guy of adude in table of guard-org][paragraph break]";
	if rm is unvisited and rm is a towloc listed in the table of towercomments:
		choose row with towloc of rm in table of towercomments;
		if there is a towquo entry:
			say "[towquo entry][paragraph break]";
			if there is a towdist entry:
				if towdist entry > towerclose:
					now towerclose is towdist entry;
		else if there is a towdist entry:
			if towdist entry > towerclose:
				let tempint be towdist entry;
				say "[which-cue of towdist entry][paragraph break]";
				now towerclose is towdist entry;
		else:
			d "Room not defined but not critical";
	if player is in actionless coastlines:
		if agnostic is off-stage:
			say "You think you hear rustling off to the side, as if someone or something is hiding from the [random visible guardian].[paragraph break]";
	continue the action;

the castle near/far rule is listed last in the after printing the locale description rulebook.

to say which-cue of (therow - a number) :
	say "[observ in row therow of table of townarr]";

table of townarr
observ
"[line break]The palace is barely visible now."
"The palace seems a bit closer now. You probably have a way to go, but it's a start. Maybe the scope could provide some sort of map. And those three guardians--well, maybe you can bribe, attack or talk to them. For information if nothing else. The bluster butlers, particularly, keep their eyes on you. Maybe they're guarding something important."
"You still can't make out any details of the palace, but it's certainly there, across the big lake to the northeast. But there are more stupid guardians here--they look more resolute and tougher to figure, but you are getting the hang of things. You think."
"The castle looks a little bigger now--but you may eventually need to cut [if location of player is Anemic Cinema]east[else]north[end if] a bit to get to it. It looks like there're dead ends [if location of player is Anemic Cinema]north and west[else]south and east[end if], and you still aren't sure how to cross Leak Lake."
"You're a good deal closer to the palace than at the copse, but you can probably go northeast a bit more to get closer. That still leaves Leak Lake to pass."
"Now that you're at the shores of Leak Lake, it's too far to swim. You may need some craft. And crossing here might leave you far from the palace."
"You can see the other side of Leak Lake from here. It's still too far to swim, but it's clearly closer than anywhere else you've been."
"Since your head's barely above water, you can't see a shore any more. But you know it must be there."
"The palace--well, you can see why it was spectacular, once."

table of towercomments
towloc	towdist	towquo
loftier trefoil	0	"The castle--well, you couldn't even see it outside. Maybe someone will help you, once you've sorted this mess out."
Outer Route	--	"The palace has receded a bit, but--well--that machine's got to be good for something."
scope copse	2	--
saltbed	3	--
sunbelt	3	--
anemic cinema	4	--
Treading Gradient	4	--
Danger Garden	5	--
salted deltas	6	--
Strati Strait	6	--
shaven havens	--	"You're going side-to-side to see the curst palace without getting closer, but hooray to seeing some other life form."
obscurest subsector	--	"You're going side-to-side to see the curst palace, but hooray to seeing some other person. Even if he is locked up."
lost lots	--	"This may've been a step away from the palace, but hooray, stuff to pick up."
Fringe Finger	--	"This may've been a step away from the palace, but hooray, stuff to pick up."
actionless coastlines	7	--
rawest waters	8	--

to say tow-dirs:
	let golist be a list of directions;
	repeat with DR running through directions:
		unless the room DR of location of player is nowhere:
			add DR to golist;
	repeat with VG running through visible guardians:
		if gualoc of VG is location of player:
			remove guadir of VG from golist, if present;
		else:
			remove opposite of guadir of VG from golist, if present;
	if number of entries in golist > 0:
		say ". You have clear passage [golist]";

chapter keycar

the yacker keycar is a LLPish vanishing thing. description of keycar is "The yacker keycar zips around randomly, probably just to distract you from bigger things. It's red, but it has entirely different red writing all around. You'd be able to read it with out too much difficulty.". "The red yacker keycar continues to zip back and forth here, but it's not actually blocking you."

understand "key" and "key car" and "car" as keycar.

[?? talk to the keycar]

check taking keycar:
	say "The keycar zooms around, bantering about how it's a bit too fast for you." instead;

a-text of keycar is "RRYYRO". b-text of keycar is "RRYYRO". parse-text of keycar is "x[sp]x[sp]-[sp]-[sp]x[sp]y". keycar is cheat-spoilable.

book Loftier Trefoil

Loftier Trefoil is an innie room in Towers. "This opt-outs['] outpost is slightly classier than servant taverns. Still, you can't afford to stay, and you can't leave it with Rodney around. It has other rooms, but since this isn't an RPG, the cellar below and rooms upstairs are off-limits.".

after looking in loftier trefoil:
	set the pronoun him to rodney;
	set the pronoun them to w-p;
	continue the action;

w-p is privately-named plural-named scenery in loftier trefoil. printed name of w-p is "warriors".

instead of objhinting w-p:
	if number of warriors in trefoil is 1, try objhinting rodney instead;

instead of doing something with w-p, say "Deal with the warriors individually."

after printing the locale description for Loftier trefoil when Loftier trefoil is unvisited:
	say "The ambience here makes you think 'Lo, I fret.'";
	continue the action;

rule for printing a locale paragraph about a warrior (called ww):
	if ww is not Rodney:
		The rule succeeds;
	now Rodney is mentioned;
	say "Sir Rodney, still loud and boastful, is [if number of visible warriors is 1]making his last stand--he won't attack anyone unprovoked, but nobody's going out with him around[else][one of]calling to[or]leading[stopping] [a-bunch] of warriors blocking the way out. [they-just] [list of followy warriors][end if][one of].[paragraph break]But maybe this show of force will backfire. They don't look as gung-ho as they could, and once you pick off one weak link, you'll know what people--or things--are like, here[or][stopping].";
	now all visible warriors are mentioned;

to say they-just:
	say "[if number of visible warriors is 2]Well, there's just[else]They include[end if]"

section escaping or not

check asking Sir Rodney about:
	say "He yells 'None shall pass!' [one of]when you get close[or]and thus lives up to his name[stopping]." instead;

check going outside in Loftier Trefoil:
	if Sir Rodney is visible:
		say "Sir Rodney is blocking the way." instead;
	else:
		say "BUG! you should have been kicked out after talking to Renato.";

check going up in Loftier Trefoil:
	say "One stare at the rates for an overnight room almost leads you to tears. You exit the large inn with a lean grin and no learning." instead;

check going down in Loftier Trefoil:
	say "'Don't loot the wines. Swine.' someone calls. Harsh." instead;

book Topside Deposit

Topside Deposit is a room in Towers. "A fire-torn frontier leads everywhere but north. That way's [if adders are in deposit]un[end if]blocked."

for printing a locale paragraph about a thing (called nongua) in topside deposit (this is the lump tarts with toaster rule):
	if nongua is start tarts and toaster is in Topside Deposit:
		now start tarts are mentioned;
	continue the action:

check taking a guardian:
	say "Sadly, you can't just move anyone or anything out of the way in the Badlands." instead;

the fire torn frontier is bounding scenery in Topside Deposit. description is "It's pretty rough. You don't know what's beyond it, but it can't be anything useful."

instead of doing something with fire torn frontier:
	if action is procedural, continue the action;
	say "The frontier is just there to block and intimidate you. You can't do anything with it. [if adders are in topside deposit]You should probably find a way past the adders[else]You got rid of the adders, and that's all you need to do[end if].";

chapter dreads adders

The dreads adders are a plural-named purple guardian in Topside Deposit. "Dreads adders may or may not be lethal, but you're scared of passing them to the north. [one of]If you look at them again, you may remember the two people who created them[or][sade-sard][stopping].". description is "They look like they're trying to invoke fear, but perhaps there's another emotion?" [unfortunately the move-to rule fires before the reorg-guardians rule so we need to specify where the dreads adders are. And it'd take longer to rewrite the rules than just to add what room the adders are in.]

to say sade-sard:
	say "[one of]Dr. Sade[or]Ed Sard[in random order] was one of their creators, you remember now, as you see red"

a-text of dreads adders is "RYRRYR". b-text of dreads adders is "RY?RYR". parse-text of dreads adders is "x[sp]-[sp]?[sp]x[sp]-[sp]x".

inside of Topside Deposit is nowhere.

check going north in Topside Deposit:
	if player does not have Rosetta Toaster and dreads adders are not visible:
		say "[one of]The Rosetta Toaster looks handy, you have to admit, looking back at it[or]You ignore the toaster, again[stopping].";

a pack of start tarts is a hintpastry in Topside Deposit. description is "They are a mystery flavor. They're that breakfast pastry with goo on the inside that everyone eats but nobody admits to, or particularly likes. You remember they taste gross cold but help get your day started with a good strat. You can probably eat them whenever, though.". "A pack of start tarts lies here."

section toaster

The Rosetta Toaster is a container. It is in Topside Deposit. "A Rosetta Toaster rotates here[if start tarts are in Topside Deposit], with a pack of start tarts nearby[end if]."

check scaning toaster:
	say "[one of]The toaster looks like a pretty good diagnostic item as-is, and it doesn't need an upgrade, so you're not disappointed when nothing pops up[or]Still nothing. The toaster probably doesn't need an upgrade[stopping]." instead;

check taking toaster when player is in actionless coastlines:
	say "You don't need to take it again.";

Rule for printing room description details of the Rosetta Toaster:
	do nothing instead.

the Rosetta Toaster has a number called charges. the charges of the Rosetta Toaster is usually 0.

the description of the Rosetta Toaster is "[one of]You begin to stare.[paragraph break][or][stopping]This nutriments instrument, according the writing beneath 'O Treats,' automatically applies a much more appropriate description to the target of your choice than the most obvious one. Which makes up for it not having a dial for how dark you toast your preferred flat bread product. It's not available at-store and known to cause conflicts with namer ramen[one of].[paragraph break]it'as also known as a toast-o-stat[or][stopping]."

understand "toast-o-stat" and "stat" as toaster.

Report taking the Rosetta toaster:
	say "Though you feel a small surge as you pick up the toaster, it stops spinning nonetheless. Yup, this thing could be powerful." instead;

after fliptoing strudel:
	now player has strudel;
	now sled rut is in lalaland;
	continue the action;

check fliptoing strudel:
	if player has strudel and strudel is reflexive:
		say "(Yeah, okay. You were supposed to pick the strudel up this way in the first place. But hey, have a point anyway.)";

Report taking the strudel:
	say "You take it from the rut with no problem. Maybe you could've done it fancier, but eh, well." instead;

book Scope Copse

Scope Copse is north of Topside Deposit. Scope Copse is in Towers. "A [one of]spec-o-scope (scope, for short)[or]scope[stopping] looks into the ground in the center of this wooded area[if yurts are visible], with some yurts looking out of place here[end if]. Paths lead in all directions, though things open up to the north and east."

the yurts are plural-named vanishing scenery in scope copse. "The yurts, of dull sturdy metal, don't look very lived-in. Maybe it's because there's no easy way in. They read TRY US in red letters." [yurts are not llpish but brownies--the objects you get from the yurts--are. That's how I wrote the code. I could do it better, but I didn't.]

instead of entering yurts:
	say "There's no easy way in. They'd be too cramped once you were inside, anyway."

understand "yurt" as yurts.

check taking yurts:
	say "They're too strongly built to even flake a piece off." instead;

some Owers'-Bin Brownies are a plural-named LLPish hintpastry. description of Brownies is "These cheap brownies don't look too appetizing. However, nobody wanted to eat them until it was re-advertised as food that helps you think your way out of your problems, because it definitely can't be served at parties. Nobody much still wants to eat them, because doing so is now an admission you have, well, problems."

understand "brownie" as brownies.

a-text of yurts is "RYRRO". b-text of yurts is "RGRPO". parse-text of yurts is "x[sp]u[sp]x[sp]t[sp]y". yurts are cheat-spoilable.

the spec-o-scope is scenery in Scope Copse. understand "map/scope/specoscope/spec" and "copse scope" as spec-o-scope.

Include (-
	has transparent talkable
-) when defining spec-o-scope.

instead of taking spec-o-scope:
	say "It's firmly stuck in place. And it might lose its powers if you moved it.";

instead of searching spec-o-scope:
	try examining spec-o-scope;

before examining spec-o-scope for the first time:
	say "A telescope! Place to see!"

check examining spec-o-scope:
	say "[one of]It seems like an OK tool to look. You notice the word HI carved in big block letters on the scope--the I being just the H rotated.[paragraph break][or][stopping][i][bracket][one of]Fourth wall time--w[or]W[stopping]ould you prefer a textual summary of the map in the scope to a visual one?[close bracket][r][line break]";
	if the player direct-consents:
		say "An area three rooms square. A river, maybe a lake, borders it on the north and east. About [number of accessible rooms in words] area[if number of accessible rooms is not 1]s are[else] is[end if] open in the center, with [number of sideview rooms in words] open off to the side. In particular, the highlighted area just north of the north shore is [unless admirer is in lalaland]un[end if]available, another just west is [unless ingrates are in lalaland]un[end if]available, a particularly important location east of the east shore seems [unless bonker is in lalaland]un[end if]available, and just south of it, an area looks [unless natives are in lalaland]un[end if]available. It also appears the area just west of you is highlighted, there's something northeast of the water.";

description of spec-o-scope is "You look into the scope and see:[paragraph break][fixed letter spacing]
[line break]  !      *
[line break]  [pc of cinema and north]~~~~~~
[line break]+[pc of cinema and west].[pc of cinema and east].[pc of deltas and east].~ +
[line break]  [pc of saltbed and north] [pc of gradient and north] [pc of strati and north]~
[line break]  .[pc of saltbed and east].[pc of gradient and east].~
[line break]  [pc of copse and north] [pc of sunbelt and north] [pc of garden and north]~
[line break]![pc of copse and west].[pc of copse and east].[pc of sunbelt and east].[pc of garden and east]!
[line break]  [pc of topside and north]   [pc of garden and south]
[line break]  !   +[variable letter spacing][paragraph break]| = passage, x = no passage, . = location, ! = important, + = treasure."

to decide whether (g - a guardian) gendermatches:
	if g is admirer, yes;
	if g is female and player is male, decide no;
	if g is male and player is female and other-g of g is not dreads adders, decide no;
	decide yes;

to say pc of (myr - a room) and (myd - a direction): [passage character]
	let maybe be true;
	repeat through table of guard-org:
		now maybe is false;
		if myr is loc entry and myd is blockdir entry, now maybe is true;
		if myr is the room myd of loc entry and myd is opposite of blockdir entry, now maybe is true;
		if maybe is true and guy entry gendermatches:
			say "[if guy entry is not in lalaland]x[else if myd is west or myd is east]-[else]|[end if]";
			continue the action;
	say "?[run paragraph on]"

book Outer Route

Outer Route is west of Scope Copse. Outer Route is in Towers. "It's a bit outre here, but nothing to rue. You can only go back east. Well, you could try other directions, but the sway-ways would be unreliable."

section sway ways

sway ways are plural-named bounding scenery in Outer Route. "Just looking at the yaws makes your head swim. They're meant to be tricky to walk on without the proper ways through. An extra level of security. But then they probably lead back to even more dangerous parts of the badlands, anyway."

understand "yaws" and "sway-ways" as sway ways.

instead of doing something with sway ways:
	if current action is entering:
		try going west instead; [west is arbitrary here. Any direction gives the same message.]
	if action is procedural, continue the action;
	say "You have no idea how to fix the sway-ways to make them less unsafe, but you don't need to."

section Campiest Campsite

the campiest campsite is useless scenery in Outer Route. understand "camp/site/campsite" and "yon camp" as campsite. "My goodness! The campiest campsite is the MOST! It's a bit redundant and over-the-top, so you might not sensibly make a whole room out of it, but...this is a good place for it."

instead of doing something with campiest campsite:
	if action is procedural, continue the action;
	say "Well, gosh! There's not a whole lot to do with the camp but have fun being around it! Oh, and maybe figure what goes in the rapier repair." instead;

A rapier repair machine is in Outer Route. "A shiny machine labeled RAPIER REPAIR [if dagger is in lalaland]fizzles[else]chugs[end if] along in the campiest campsite nearby. At least [one of]yon camp has no campy company (copy, man?)[or]no campers scamper[or]saucy yucas haven't burst from the ground[in random order] here.". description is "It's a hi-watts whatsit that reads 'Paranoid? A poniard!' It looks like what you imagined a left-handed smokebender did, back when you were being hazed in [if player is male]Boy[else]Girl[end if] Scouts. [if dagger is not in lalaland]It's nowhere near big enough to clean a lance, but you could probably PUT any blade smaller than a rapier in there[otherwise]You seem to have broken it creating the gizmo[end if]."

instead of taking rapier repair:
	say "Heavens, no! It fits in TOO well with the campiest campsite! Plus, it's at best impractical and at worst impossible to take. [if dagger is in lalaland]Plus you already used it[else]Better to carry something that'd fit into IT[end if]."

the I ZOMG Gizmo is a thing. description is "[one of]Whew. I'm buffaloed on this one. Somebody who knows how to build things would probably understand how to activate, much less use, the [randbla] or [randbla]. Hey, if I understood, I would be writing stuff far less silly than this game[or]You find yourself baffled by the [giz-part][stopping]."

to say giz-part:
	choose row with mytab of table of gizmo parts in table of megachatter;
	if curidx entry is maxidx entry:
		say "[randbla]";
	else if curidx entry is maxidx entry - 1:
		say "[randbla]. Or, still, the [randbla]";
	else:
		say "[randbla] and [randbla]";

check opening gizmo:
	say "It's too complicated to learn about." instead;

check inserting into rapier repair machine:
	ignore the can't insert into what's not a container rule;
	if noun is gizmo:
		say "The gizmo is so cool, the machine broke itself producing one." instead;
	if ragged dagger is in lalaland:
		say "The machine has already given its all to create the gizmo." instead;
	if noun is toaster:
		say "In a different Wasteland, that would be very practical, indeed. Especially if you know the bit-flip infinite skill trick. But not here." instead;
	if noun is not ragged dagger:
		say "That's nothing like a rapier. It's not sharp, metal and pointed. You'll need to find something else." instead;
	say "The dagger is sucked into the machine, which gets raspier as it repairs. A couple minutes of proclaiming itself 'the sharpener that resharpens,' and a final wheezing choke later, you open it. Instead of a riper rapier, or a clever cleaver, it's a gizmo--bearing the label of the famed novelty company I ZOMG.";
	now player has the I ZOMG Gizmo;
	now ragged dagger is in lalaland;
	set the pronoun it to I ZOMG Gizmo;
	reg-inc instead;

chapter repairing

repairing is an action applying to one thing.

understand the command "repair" as something new.

understand "repair [something]" as repairing.

carry out repairing:
	if repair machine is not visible:
		say "You need to be by a repair machine." instead;
	try inserting noun into repair machine instead;
	the rule succeeds.

book Baldest Blasted Saltbed

Baldest Blasted Saltbed is north of Scope Copse. "This is a dreary place that doesn't seem worth guarding, [if number of visible guardians is 0]but you took care of everyone here[else]so maybe people, or things close enough, are just stopping you leaving[end if]. Some old ice is to the west[if old ice are reflexive][one of]. You doubt it's blocking anything, but it might look more impressive if it were less, well, flat[or][stopping][else]. You made it coiled, so it looks cool[end if][tow-dirs]."

Baldest Blasted Saltbed is in Towers.

check going west in Baldest Blasted Saltbed:
	say "[if old ice is reflexed]Even though you made it look cooler, t[else]T[end if]he old ice is in the way[if old ice is reflexive], but maybe you could prettify it a bit[end if]." instead;

section docile old ice

the docile old ice is LLPish reflexive scenery in Baldest Blasted Saltbed. "[if old ice is reflexed]It's coiled into a really cool pattern now, thanks to you[else]Big chunks of ice are always impressive, but this could be more artistic if it weren't so flat[end if][one of]. Another look and you'll remember where you saw a beautiful carved ice sculpture[or]. You see red remembering an LiedCo sculpture that showed this[stopping]."

a-text of docile old ice is "RYYRYR". b-text of docile old ice is "R?YRYR". parse-text of docile old ice is "x[sp]?-[sp]x[sp]-[sp]x"

check taking old ice:
	say "You'd get your hands stuck. And I won't double dog dare you." instead;

book unblest sunbelt

Unblest Sunbelt is east of Scope Copse. Unblest Sunbelt is in Towers. "The land here is dry and unforgiving. You doubt there's much to do here besides get on[if number of visible guardians is 0], especially since you got rid of the guardians here[end if]. Organised ego drains block your way south[if ego drains are reflexive]. You might not be able to step over them, but maybe you could neutralize them[else]Though they're neutralized, you know better than to step over then[end if][tow-dirs]."

section organised ego drains

the organised ego drains are plural-named LLPish reflexive scenery in Unblest Sunbelt. "Staring at them makes you feel small and insignificant, and what's more, they seem incredibly factual and precise. You could probably get away with not removing them, but Yorpwald would be nicer if you did.[paragraph break]'[one of]NO, SIR! EGAD[or]NO, EGAD, SIR[or]SIR, EGAD, NO[at random]!' you seem to hear as you look at them more closely, through a mist that turns red. [if player is female]You lack the confidence even to mention you are female, so they're wrong like that, at least. [end if]You also get this idea in your mind--why bother going that way? It's coherent and not over-the-top, [one of]why not to visit that SAD REGION[or]that you could get there some other way, DIG, REASON[or]that you're lucky you got no EAR DOSING[or]capped with a motto, DOERS GAIN[in random order]. So few words, so much seeing red."

a-text of organised is "RRYRRYYRY". b-text of organised is "RRYRRYYRY". parse-text of organised is "x[sp]?[sp]-[sp]x[sp]x[sp]i[sp]-[sp]x[sp]-".

instead of doing something with organised ego drains:
	if action is procedural, continue the action;
	say "The ego drains are there, just waiting to mess with your mind. You [if ego drains are reflexed]dealt with them as well as you could[else]may be able to deal with them partially, though[end if]."

check going south in unblest sunbelt:
	say "Not wise to mess with the ego drains, whether or not they're at full power." instead;

book Anemic Cinema

Anemic Cinema is north of Baldest Blasted Saltbed. "Well, you're not [i]in[r] the cinema. It's off to the side[if ingrates are visible]. Something smells to the west, too[end if][tow-dirs].". Anemic Cinema is in Towers.

after printing the locale description for Anemic Cinema when Anemic Cinema is unvisited:
	say "The ingrates grumble about how their territory is useless, and that's really not their fault. Maybe you don't really need to get rid of them.[paragraph break]";

The theater thereat is useless scenery in anemic Cinema. description of theater is "[bug-report]"

understand "theatre" and "theatre thereat" as theater thereat.

understand "anemic/cinema" and "anemic cinema" as theater when player is in Anemic Cinema.

check going inside when player is in Anemic Cinema:
	try entering theater;

instead of doing something with theater:
	if current action is entering:
		try entering theater;
	say "The theater thereat, with such lame titles as 'Me, I can,' / 'Nice, Ma!' and 'I, Manic Menace,' has been abandoned. And really, you shouldn't be staring at some screen when you are trying to save a world."

book Treading Gradient

Treading Gradient is north of Unblest Sunbelt and east of Baldest Blasted Saltbed. "This place is just a total mess. You see [if weeds are visible and denim is visible][we-g] along with the denim patching what's probably a hole[else if weeds are visible][we-g][else if denim is visible]denim patching a hole[else]nothing else you can shake down for items[end if]. Paths in all four directions here[if number of visible guardians is 0], all unobstructed[else if number of visible guardians is 1], even if one's blocked[else], even if some are blocked[end if].". Treading Gradient is in Towers.

to say we-g:
	say "weeds swaying, despite no wind,"

every turn when player is in Treading Gradient and weeds are in Treading Gradient and player was in Treading Gradient:
	say "The weeds [one of][or]continue to [stopping]sway freely and menacingly[one of]. Perhaps you can get rid of them, since they're not actual people blocking passage[or], but they can't be THAT tough[stopping].";

before going down in Treading Gradient:
	say "[if denim is in Treading Gradient]The denim is too thick[else]You try to look into the dark where the denim was. Going in would be the dopiest posited thing you could do, even with a light source[end if]." instead;

the denim is LLPish vanishing scenery in Treading Gradient. the indefinite article of denim is "some".

check taking denim:
	say "You can't get a good grip on the denim to pull it." instead;

a-text of denim is "RYRYR". b-text of denim is "RYPYR". parse-text of denim is "x[sp]-[sp]n[sp]-[sp]x". denim is cheat-spoilable.

description of denim is "Too heavy for normal tools to cut."

the weeds are vanishing scenery in Treading Gradient. "They look like some sort of mutant weeds from the future, maybe a crazy one with multi-layered cities. They blow in some undetectable wind: west, then east a while, then down and south. There may be something inside them, but you can't tell."

check taking weeds:
	say "They spin around you like a garment before picking you up and placing you away." instead;

a-text of weeds is "RYRYR". b-text of weeds is "RGRYR". parse-text of weeds is "x[sp]e[sp]x[sp]e[sp]x". weeds are cheat-spoilable.

the raves saver is a reflexive LLPish thing. the raves saver can be yow-talk, yow-yell, goosey, ducky, or silent. the raves saver is silent.

understand "replay/player" and "replay player" as raves saver.

understand "tape recorder" and "tape/recorder" as raves saver.

check opening raves saver:
	say "It's cheap and rickety enough, the tapes are stuck in like paste. It has no open button or mechanism." instead;

a-text of saver is "RYYRRO". b-text of saver is "???RR?". parse-text of saver is "?[sp]?[sp]?[sp]l[sp]a[sp]?".

description of raves saver is "[if saver is reflexive]It has an inscription REPLAY PLAYER, which is a violation of copyright law--those have video--but nobody's going to sue or care. But[else]It's slightly more polished now you made it pearly, and[end if] it also has a REPEAT button and a RETAPE button[one of].[paragraph break]It doesn't even have a socket for Hears-Share earphones.[stopping]"

repeat button is part of the raves saver.

description of repeat button is "It looks as pushable as the retape button."

retape button is part of the raves saver.

description of retape button is "It looks as pushable as the repeat button."

the ragged dagger is a thing.

description of ragged dagger is "It can't shag much less gash. For cutting, it's worse than grade f. It's grade g. (See what I did there?)[paragraph break]Written on it is evidence it was once Hank's shank."

does the player mean doing something with repeat button when repeat button is not visible: it is unlikely.

check pushing retape button:
	if rawest waters is visited or Mislit Limits is visited:
		say "The saver has suffered permanent water damage. It doesn't even make any weird warpy noises." instead;
	if raves saver is not silent:
		if arid den is visible:
			say "Fortunately no advertisement from the arid den is loud enough for the raves saver to catch it." instead;
		if number of visible guardians > 0:
			say "Nothing on your saver is abrasive enough to move a guardian out of your way." instead;
	if Dr Yow is visible:
		if agnostic is visible:
			say "You don't need to record the two of them, now." instead;
		if Dr Yow is calm:
			say "Recording the awkward silence with Dr. Yow around would do little." instead;
		if Dr Yow is wordy:
			if raves saver is yow-talk:
				say "That's already on the saver." instead;
			say "You record Dr. Yow talking[prev-rec].";
			now raves saver is yow-talk instead;
		if Dr Yow is rowdy:
			if raves saver is yow-yell:
				say "That's already on the saver." instead;
			say "You record Dr. Yow ranting[prev-rec].";
			now raves saver is yow-yell instead;
	if duck is visible:
		if raves saver is ducky:
			say "The duck's already on the saver." instead;
		say "The clicking of the RETAPE button causes the duck to quack inquisitively. The saver records the quacks[prev-rec].";
		now raves saver is ducky instead;
	if player is in Danger Garden:
		if raves saver is goosey:
			say "The duck's already on the saver." instead;
		say "You record the geese's honks[prev-rec].";
		now raves saver is goosey instead;
	if agnostic is visible:
		say "'Whoah! That thing looks ancient!' the agnostic yells before you push the button[if saver is yow-talk or saver is yow-yell]. Maybe you meant to push repeat...the agnostic is interested in science, and Dr. Yow's voice is in the recorder[end if]." instead;
	say "There's nothing that seems worth re-taping here, so you decide against doing so." instead;

to say prev-rec:
	say " over [if saver was silent]the previous silence[else if saver was ducky]the duck's quacking[else if saver is goosey]the geese's honking[else if saver is yow-yell]Dr. Yow's rants[else if saver is yow-talk]Dr. Yow's talking[end if]";

check pushing repeat button:
	if rawest waters is visited or Mislit Limits is visited:
		say "The saver has suffered permanent water damage. It doesn't even make any weird warpy noises." instead;
	if agnostic is visible:
		if raves saver is goosey or raves saver is ducky:
			say "'Yawn. The zoo is kind of boring. I like making stuff.'" instead;
		if raves saver is yow-yell or raves saver is yow-talk:
			try objasking agnostic about Dr Yow instead;
		say "'Whoah! That thing looks ancient!' the agnostic yells before you push the button." instead;
	if Dr Yow is visible:
		if raves saver is yow-yell or raves saver is yow-talk:
			say "Dr. Yow doesn't need to be mimicked." instead;
	if player is in Danger Garden and saver is ducky:
		say "The geese honk in protest. One tries to attack your saver until the recording dies down." instead;
	if duck is visible and saver is goosey:
		say "The duck cowers in fear, unable to locate the source of the noise[if Dr Yow is visible], and Dr. Yow seems to glare at you a bit[end if]." instead;
	if raves saver is yow-yell and duck is visible:
		say "The duck seems to walk forward but gets scared by the volume and rapidity of the noise." instead;
	if raves saver is yow-talk and duck is visible:
		if duck is friendly:
			say "You've already got the duck's attention." instead;
		otherwise:
			say "The duck perks up. It recognizes Dr. Yow's voice! It gives a hankering honk.";
			now duck is friendly instead;
	say "[if raves saver is silent]Silence. Nothing has been recorded, yet.[else if raves saver is yow-yell]You hear someone yelling.[else if raves saver is ducky]Quack, quack.[else if raves saver is goosey]Honk, honk.[otherwise]You hear Dr. Yow talking.[end if]" instead;

after going somewhere (this is the duck-follows-you rule):
	if duck was visible and duck is friendly:
		say "The duck [one of]quacks along[or]waddles[or]trudges[or]schleps[in random order] behind you.";
		move duck to location of player;
	continue the action;

chapter éclairs

a pack of Claire's Scalier Éclairs is a hintpastry. description is "To those who eat these scalier éclairs (O CALORIES,) much is clear. However, it is not recommended that you eat them cold."

understand "eclair/eclairs" as Éclairs.

after doing something with Éclairs:
	set the pronoun them to Éclairs;
	continue the action;

chapter retapeing

retapeing is an action applying to nothing.

understand the command "tape/retape/record" as something new.

understand "tape" and "retape" and "record" as retapeing.

carry out retapeing:
	if raves saver is not visible:
		say "[reject]" instead;
	try pushing retape button instead;

chapter repeating

repeating is an action applying to nothing.

understand the command "repeat" as something new.

understand "repeat" as repeating.

carry out repeating:
	if raves saver is not visible:
		say "[reject]" instead;
	try pushing repeat button instead;

book Danger Garden

Danger Garden is a room in Towers. Danger Garden is east of Unblest Sunbelt. printed name of Danger Garden is "[if bonker is visible]Danger[otherwise]Gander[end if] Garden". "[if bonker is visible]This garden seems both describable and indescribable. You're sure it's inspired its share of overblown prose and poetry, and of thinking how things are or should be, but there's no time for that now[otherwise]You hear the geese honking now with the bonker gone, but they are too scared of you[end if]. The curst palace is barely visible in the distance north-ish, and you can take a path any which way.".

understand "danger/gander/ garden" as Danger Garden when mrlp is towers.

after printing the locale description for Danger Garden when Danger Garden is unvisited:
	say "The natives look, well, restless, as if they might want to find a more important territory to guard.";
	continue the action;

the geese are useless plural-named scenery. description of geese is "You can't get a glimpse of the geese for all their noise."

understand "gander" as geese.

instead of doing something with geese:
	if action is procedural, continue the action;
	say "The geese are noisy but not worth poking at." instead;

after fliptoing bonker:
	now geese are in Danger Garden;
	now stinger is in Danger Garden;
	now gualoc of stinger is Danger Garden;
	choose row with guy of stinger in table of guard-org;
	now loc entry is Danger Garden; [need to undo the silly hack I have for the stinger being not-really in mislit limits according to the table]
	continue the action;

book Salted Deltas

Salted Deltas is north of Treading Gradient and east of Anemic Cinema. "Leak Lake, with its shoals aslosh, is to the north and far too wide to cross[tow-dirs].". Salted Deltas is in Towers.

s-d are useless scenery in salted deltas. understand "salted/ deltas" as s-d. printed name of s-d is "salted deltas".

to say vis-guar:
	if number of guardians in salted deltas > 0:
		say ". Might be more productive to deal with [the list of guardians in salted deltas], instead";
		if number of guardians in salted deltas is 2:
			say ". Especially the Atheists";
	else:
		say ". You've gotten rid of all nuisances here, anyway";

description of s-d is "[bug-report]".

instead of doing something with s-d:
	say "The salted deltas are scenery. No need to futz."

to say agnostic-first:
	say "[if agnostic is male]Scot[else]Staci[end if]"

the Coasting Agnostic is a person. "[Agnostic], the Coasting Agnostic, [if dinger is in coastlines]continues to read listlessly[else]smiles happily[end if] half lost in technical abstract thought."

understand "idk/kid" and "idk kid" as Coasting Agnostic.

printed name of Coasting Agnostic is "[if player is male]Scot Agin[else]Staci Ong[end if]"

understand "staci/ong" and "staci ong" as Agnostic when player is female.
understand "scot/agin" and "scot agin" as Agnostic when player is male.

to say ag-first:
	say "[if player is female]Staci[else]Scot[end if]"

check objhinting agnostic:
	if player is in subsector and agnostic is in subsector, try objhinting atblock instead;

before objasking agnostic about when dinger is in coastlines:
	ag-fid instead;

before asking agnostic about when dinger is in coastlines:
	ag-fid instead;

to ag-fid:
	say "[ag-first] says 'Sorry, I'm too distracted...I'm even distracted by how I'm distracted, and why I am, and why I shouldn't be, and how I'm wasting my smarts, but I better not think I'm TOO smart. Anyway, I'd f'get...'[paragraph break]Fidget, fidget, fidget.";

every turn when player is in actionless coastlines and dinger is in actionless coastlines:
	say "[agnostic] continues perusing [i]Reading a Dinger[r], not looking particularly thrilled."

the atblock is privately-named LLPish vanishing scenery. printed name of atblock is "tentativeness". description is "[bug-report]".

ag-atten is a truth state that varies.

after fliptoing atblock:
	now ag-atten is true;
	continue the action;

understand "atblock" as atblock when debug-state is true.

a-text of atblock is "YRRYRRYRY". b-text of atblock is "YRRYRPGPG". parse-text of atblock is "-[sp]x[sp]x[sp]-[sp]x[sp]t[sp]i[sp]v[sp]e".

a bot boat is a reflexive thing. understand "botboat" and "bot-boat" as a bot boat.

the weirder red wire is part of the bot boat. description is "You know, it's not really red, more reddish, if you look at it right. But it just seems superfluous and tangled. You're too worried about electricity to touch it, but maybe with the right plan...you could make it neater.".

the weirder red wire is LLPish and vanishing.

a-text of weirder red wire is "RYRYRYR". b-text of weirder red wire is "?GRYR?R". parse-text of weirder red wire is "x[sp]e[sp]x[sp]-[sp]x[sp]*[sp]x".

check scaning bot boat (this is the scan boat components and not boat rule):
	[showme whether or not blaster is reflexive;
	showme whether or not turbos are reflexive;]
	if blaster is reflexive and turbos are reflexive:
		say "The blaster and turbos both give something different, but you focus on [the t-or-b].";
		try scaning t-or-b instead;
	if blaster is reflexed and turbos are reflexed:
		if bot boat is reflexive:
			say "With the boat's components fixed, you focus on the weirder red wire.";
			try scaning weirder red wire instead;
		say "Nothing any more. You probably fixed the boat all you can." instead;
	if blaster is reflexed:
		try scaning turbos instead;
	try scaning blaster instead;

to say if-tent:
	if player is in actionless coastlines:
		say ", looking far-off, as if for inspiration [he-she] hasn't found yet";
	if player is in Obscurest Subsector:
		say ", looking [if atblock is in lalaland]attentive[else]tentative[end if]"

check answering agnostic that:
	if the player's command matches the regular expression "\b(doctor|dr|yow)\b":
		try objasking agnostic about Dr Yow instead;

check sbing agnostic:
	if agnostic is in Obscurest Subsector and atblock is in Obscurest Subsector:
		try sbing atblock instead;

check scaning agnostic:
	if agnostic is reflexed:
		say "'Oh! Yeah! I bet I could make one of those, one day." instead;
	if dinger is in coastlines:
		say "Nothing, but that book...[paragraph break]";
		try scaning dinger instead;
		continue the action;
	if player is in Obscurest Subsector and atblock is in Obscurest Subsector:
		say "[agnostic] doesn't fidget, but [he-she] is kind of tentative now.[paragraph break]";
		try scaning atblock instead;

to say what-ag-sez:
	say "[if agnostic has gizmo][agnostic] stands proudly by a bot-boat [he-she] made. [he-she-c] looks nervously at you--[he-she] can't bring [him-her]self to ask you to try them.[no line break][else]The Coasting Agnostic potters around here. 'Aww man! I have a wicked awesome plan for a bot-boat! But I don't have the right tools.' [he-she-c] kicks at the ground[end if]";

before taking gizmo:
	if agnostic has gizmo:
		say "That'd be mean, since you gave it to the agnostic in the first place." instead;

check giving hintpastry to agnostic:
	say "[he-she-c] has had enough empty short-term gratification with [i]Reading: a Dinger[r]." instead;

check giving hintpastry to Dr Yow:
	say "[he-she-c] doesn't seem hungry." instead;

check giving hintpastry to duck:
	say "It turns away as if to say, yuck." instead;

check giving raves saver to agnostic:
	say "[one of][he-she-c] frowns at it. 'No way! That's way too ancient! Maybe it's useful for you, cause you're one of a few people remembers how it works, but...' [he-she] pauses awkwardly.[or]That won't help the agnostic build anything.[stopping]" instead;

before giving something to Dr Yow when Dr Yow is in prison ropins:
	say "Nothing fits through the fence." instead;

check objasking Dr Yow about gizmo when player has gizmo:
	if Dr Yow is not in prison ropins:
		try giving gizmo to Dr Yow instead;

check giving gizmo to Dr Yow:
	say "'A bit too applied for me.'" instead;

check objasking agnostic about gizmo:
	try giving gizmo to agnostic instead;

to say heat-remain:
	if number of hintpastries carried by the player > 0:
		say ", first heating your remaining pastr[if number of hintpastries carried by the player is 1]y[else]ies[end if] to get x-ray vision";
	now xrayvision is true;
	now all carried hintpastries are heated;

check giving gizmo to agnostic:
	if Dr Yow is in lalaland:
		say "[he-she-c] takes the gizmo. 'Gee! Not as stone age...stage one...' He activates the gizmo's pliers, ignoring design perils--but he doesn't have enough. You [if player has toaster]offer your toaster[heat-remain][else]remember that toaster in the garden[end if]--the toaster would've caused an electric shock in the water anyway. After frantic craftin['], the spare parts just allow [him-her] to craft a bot boat, with turbos and a blaster. They don't look TOO sturdy, but maybe you can fix that.";
		now agnostic has gizmo;
		now toaster is in lalaland;
		now bot boat is in actionless coastlines;
		now blaster is part of bot boat;
		now turbos are part of bot boat instead;
		now agnostic is following;
	else:
		say "'Wow! That'd be neat if I had something to build.'" instead;

description of agnostic is "Freckly-faced and buck-toothed and talking to [him-her]self[if Dr Yow is visible]. [he-she-c]'s visibly [i][at-ten][r] just being around Dr. Yow[end if].";

to say at-ten:
	say "[if agnostic is reflexed]attentive[else]tentative[end if]"

the agnostic can be lonely or following or found. agnostic is lonely.

section agnostic shows up

to check-agnostic:
	if agnostic is off-stage:
		if atheists are in lalaland and the-hostile are in lalaland:
			now agnostic is in actionless coastlines;
			now dinger is in actionless coastlines;
			if player is in actionless coastlines:
				say "Someone comes ... coasting into view with the atheists and [relig-mf] gone, reading a book. And not just any book, but the inexplicable bestseller [i]Reading a Dinger[r]. While it's not particularly good, you can wind up reading more than you wanted of it. They look up. 'Oh, hi, I'm the coasting agnostic. Thanks for releasing me from having to think about...those people. I can read my book now. I guess smart people read, and they read stuff like this. I hear it has lots of smart tidbits! And I don't have anything more constructive to do. Plus the book's so well presented. No excuse not to read it...'";
				guar-pro agnostic;
			else:
				say "You hear someone yell, 'Yay! They're all gone! I can read in peace, now!' to the [if player is in Strati Strait]north[else]east[end if].";
		else:
			say "You hear [if the-hostile are not in lalaland]voices[else]a voice[end if] yell [one of]'[if player is female]Nay, slog, nosy gal[else]Sadly no, nosy lad[end if][or]a bizarrely accented 'Abort, o brat[in random order]!' to someone you can't see.";

to say what-ag-does:
	if dinger is in actionless coastlines:
		say "nodding at the trashy [i]Reading a Dinger[r]";
		continue the action;
	if agnostic is in obscurest subsector:
		say "looking [if agnostic is reflexed]attentive[else]tentative[end if]ly at Dr. Yow";
		continue the action;
	say "[if bot boat is in coastlines]looking proud of [his-her] bot bot boat[else]pacing slightly, looking for more than a silly bestseller could ever give [him-her]"

after fliptoing the-hostile:
	check-agnostic;
	continue the action;

after fliptoing atheists:
	check-agnostic;
	continue the action;

chapter reading a dinger

a thing called Reading a Dinger is vanishing scenery. "It's certainly impressively presented, but the writing inside is, well, not so great. It involves silliness like someone figuring out world secrets because they know the Fibonacci sequence. But it's popular in Yorpwald. This wouldn't happen in saner places."

check taking dinger:
	say "You hear a rage din from the coasting agnostic. They might not like the book, but they like being robbed even less." instead;

a-text of dinger is "RRYYRYR". b-text of dinger is "RR?YR?R". parse-text of dinger is "x[sp]x[sp]?[sp]-[sp]x[sp]?[sp]x".

book Strati Strait

to say relig-mf:
	if player is male:
		say "the Hostile-Is-He Lot";
	else:
		say "Lois the Hostile";

to decide which guardian is the-hostile:
	if player is male, decide on hostile-is-he lot;
	decide on lois the hostile;

Strati Strait is north of Danger Garden and east of Treading Gradient. "Coulds-Clouds above (strati) give this strait a feeling of reflective gloom. Leak Lake spans to the east, too far to cross. A Thearchy Hatchery[if the-hostile is in lalaland], where [relig-mf] went,[else], possibly for [relig-mf],[end if] lies disused here, not to be confused with a lone shire[tow-dirs].". Strati Strait is in Towers.

the coulds clouds are useless scenery in Strati Strait. "The strati are definitely coulds-clouds, full of possibility. Just looking at them feels like you have artist traits.". understand "coulds-clouds" as coulds clouds.

understand "strati" as coulds clouds when player is in strati strait.

instead of doing something with coulds clouds:
	if action is procedural, continue the action;
	say "The clouds are too far away to do anything other than look at. They won't help you solve anything. They're just there.";

book important side rooms

chapter Shaven Havens

Shaven Havens is north of Anemic Cinema. Shaven Havens is in Towers. "This place wasn't, like, shaved with a razor. It's just free of anything that could hide bad guys, so hooray for small things. Savager ravages impede you any way except back south."

the savager ravages are scenery in Shaven Havens. "They're pretty forbidding. Trust me, you don't want to go any way but back south."

instead of doing something with savager ravages:
	if action is procedural, continue the action;
	say "You don't want to mess with the savager ravages." instead;

havens-visit is a truth state that varies.

after printing the locale description for shaven havens when havens-visit is false:
	ital-say "you may wish to GO TO DUCK or even GT DUCK to get back here with less hassle.";
	now havens-visit is true;
	continue the action;

The lone duck is an animal in Shaven Havens. "[if lone duck is friendly]That[otherwise]A[end if] lone duck is quacking along here[if id tag is examined]. It is wearing a small ID tag[end if][if agnostic is visible], and it's ignoring the agnostic[end if]."

a-text of lone duck is "YRRYRRYR". b-text of lone duck is "YRRYRRYR". parse-text is "-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

understand "loud neck" and "loud/neck" as lone duck when id tag is examined.

check giving something to duck:
	say "The duck doesn't seem interested in anything edible. Or inedible." instead;

instead of touching the duck:
	say "It waddles away[if Dr Yow is in Obscurest Subsector] behind Dr. Yow[else if lone duck is friendly], even though it seems attracted to your raves saver[else]--maybe it needs some way to trust you[end if]."

instead of taking the duck:
	if lone duck is returned:
		say "It's Dr. Yow's. No stealing." instead;
	say "It gives you a wobbly blowby [if lone duck is friendly]despite your raves saver[otherwise]and gives a warning honk. Maybe you need to find some way to befriend it[end if]."

description of lone duck is "A pretty normal duck, but it doesn't seem that interested in you. It's not running away, though. So it's probably domesticated, but a bit timid--so don't make any loud noises[one of]. It pecks at a speck you can't see[or][stopping][if ropins are reflexive].[paragraph break]You see red at how lonely it seems[end if]."

the ID tag is part of the lone duck.

instead of taking the ID tag:
	say "It's for identification. It's not worth removing."

description of the ID tag is "'  Loud Neck (in red)[paragraph break]Dr. Yow's Duck'"

the lone duck can be aloof, friendly or returned. the lone duck is aloof.

chapter Obscurest Subsector

Obscurest Subsector is east of Danger Garden. Obscurest Subsector is in Towers. "A place this obscure is perfect for prison ropins, which [if duck is returned]lie here useless, thanks to the duck[else]are holding someone in captivity[end if]. The ropins hold together a log-gaol that keeps the subsector obscurest and you from going anywhere except back west.".

a log gaol is scenery in obscurest subsector. "It surrounds the subsector on four sides, helping keep it obscure."

subsector-visit is a truth state that varies.

after printing the locale description for Obscurest Subsector when subsector-visit is false:
	ital-say "you may wish to GO TO GAOL to get back here with less hassle.";
	now subsector-visit is true;
	continue the action;

after choosing notable locale objects when player is in Obscurest Subsector:
	set locale priority of prison ropins to 0;

instead of cutting prison ropins:
	say "[no-rips]";

instead of cutting gaol:
	say "[no-rips]";

to say no-rips:
	say "[if player has dagger]The dagger is too ragged[else if player has gizmo]The gizmo is too unwieldy to fit between the mesh. You try to cut it, but the blade squeaks against the steel[else]You have nothing that could cut anything[end if]."

The prison ropins are a reflexive plural-named transparent container in Obscurest Subsector. ropins are fixed in place. "The prison ropins are dense and strong enough that they will cause no rips, but you can see through them. They're made to ensure no rips (of course!) [if duck is returned]though you found another way in[else]and look locked, but there must be some way to make them openable--[one of]ah, there's a[or]there's that[stopping] small fissure which is the closest thing to a keyhole, and some writing, too[end if]."

check taking ropins:
	say "WAY too heavy and big." instead;

understand "jail" as prison ropins.

instead of entering prison ropins:
	say "It's not very full of fun or useful things. If it were, Dr. Yow would've gone all MacGyver and burrowed out without your help.";

instead of going inside in Obscurest Subsector:
	try entering prison ropins instead;

a-text of prison ropins is "YRRYRRYR". b-text of prison ropins is "YRRYRRYR". parse-text is "-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

description of ropins is "[if duck is returned]It's open now, not that you want to enter.[else]The gaol advertises itself as the involuntary home of one Dr. Yow.[end if]"

check examining ropins:
	ignore the examine containers rule;

check scaning ropins:
	say "The settler does very little until you get near [if ropins are examined]a fissure you didn't see at first[else]the fissure[end if]. The result makes you think you don't need to do anything to the prison as a whole.";
	now ropins are examined;

to decide whether (n - a thing) is spoilable-now:
	if n is cheat-spoilable, decide yes;
	if n is any-spoilable, decide yes;
	if n is parse-spoilable and parse-now is true, decide yes;
	decide no.

squee-warn is a truth state that varies.

before scaning (this is the check for cheats the player doesn't want rule):
	if noun is a location:
		continue the action;
	if cheat-on is true and noun is spoilable-now:
		if squee is true:
			say "You hear loud squealings from the equals sign. This may be a near or total spoiler. Go ahead anyway?";
			if the player direct-consents:
				continue the action;
			else:
				say "OK." instead;
		if squee-warn is false and equals-pushed is false:
			now squee-warn is true;
			ital-say "this may be a bit of a spoiler. If you want to disable it, you can push the equals sign. This warning will not appear again.";
			say "You feel foreboding this may be a bit too much of a clue. Do you still want to see the settler reading?";
			if the player yes-consents:
				continue the action;
			else:
				say "OK." instead;

check-spoil is a truth state that varies.

after scaning (this is the note equals sign rule):
	if noun is spoilable-now and squee is true and check-spoil is false:
		say "NOTE: if you want to disable/warn a spoiler like this in the future, push the equals sign.";
		now check-spoil is true;
	continue the action;

ever-parse is a truth state that varies.

after scaning (this is the tell us about x in parse mode rule) :
	if parse-now is true and ever-parse is false:
		now ever-parse is true;
		ital-say "x means a consonant, as nothing in this game becomes anything with an x in it, and the dash means a vowel.";

before scaning a clue-used thing:
	say "You read what the settler says--and you realize you already took care of something else like [the noun]." instead;

before scaning a reflexed thing:
	if noun is not dialer and noun is not bench:
		say "The settler emits a BEEEOOOP as if to say there's no need to do any more, there." instead;

check opening prison ropins:
	if Dr Yow is in prison ropins:
		say "You rattle it a bit, but it's too strong. Probably dead-bolted too, so it's physically impossible to use brute force.";
	otherwise:
		say "It's got nothing you want there any more.";
	the rule succeeds;

check opening ropins:
	say "It's too sturdy, and you've no reason to believe what's behind it is worth visiting." instead;

check unlocking ropins with duck:
	if prison ropins is reflexed:
		say "Almost. You're going about it wrong, though. What do you want the fence to BE? Or be described AS?" instead;

before locking (this is the yow unlock rule) :
	if noun is ropins or noun is fissure:
		say "[if Dr Yow is in prison ropins]It already is, and two locks won't make an unlock[else]No need to fuss any more[end if]." instead;
	say "There's no need to lock anything in this game." instead;

does the player mean unlocking with dagger: it is very likely;
does the player mean unlocking with settler: it is likely;

does the player mean unlocking with pedanto-notepad when settler is off-stage: it is likely.

does the player mean locking with dagger: it is very likely;
does the player mean locking with settler: it is likely;

the can't unlock without a lock rule is not listed in any rulebook.

check unlocking:
	if player is in Obscurest Subsector:
		if noun is prison ropins or noun is fissure:
			if prison ropins is reflexed:
				say "The prison is already open." instead;
			if second noun is gizmo:
				say "You fumble with the gizmo but have utterly no luck. The prison remains locked." instead;
			if duck is visible:
				say "The duck looks curiously at what you're trying to do. You can't pick it up, but maybe you can coax the duck with the right word..." instead;
			if noun is fissure:
				say "Nothing you have seems to fit in there." instead;
			say "The prison doesn't seem like something you can unlock--well, not with a key. 'Luck...done,' you mumble as you try. 'Done, luck.' You see red. There's nothing that resembles a keyhole. That weird fissure, maybe..." instead;
	if noun is drab yoke:
		say "It doesn't seem to have a key or anything. But whatever's inside it might." instead;
	if noun is side door:
		say "[if Gunter is off-stage]Just open it instead[else]With what's outside? Bad idea[end if]." instead;
	if noun is span pans:
		say "There's no keyhole in the span pans." instead;
	if noun is prison ropins:
		say "[if duck is returned]You already did[else]Yes. There should be a way to open it...but you haven't found a key, or anything like it, anywhere[end if]." instead;
	say "You don't have anything resembling a key, and that doesn't seem to need to be unlocked." instead;

the fissure is part of the ropins. description is "It's rounded, more ovular than elliptical. It doesn't seem to fit any sort of keycard--and you can't see any tumblers in it. It's shaped like a mouth mid-complaint. A name by the fissure reads [one of]Doc Lunke[or]Ned Lucko[or]Ed Clunko[or]O'Kendluc[or]Ockeldun[in random order]". the fissure is vanishing and auxiliary.

a-text of fissure is "RYRRYYR". b-text of fissure is "PYPPYYR". parse-text of fissure is "f[sp]u[sp]s[sp]s[sp]i[sp]e[sp]r". fissure is parse-spoilable.

after fliptoing when player is in Obscurest Subsector (this is the yow is free rule) :
	if noun is fissure or noun is prison ropins:
		now duck is unfigured;
		now prison ropins is unfigured;
		now fissure is unfigured;
		now fissure is in lalaland;
		now prison ropins is reflexed;
		now Dr Yow is in Obscurest Subsector;
		now duck is returned;
	continue the action;

check inserting into the fissure:
	say "Nothing from your inventory seems to fit it. It's really oblong."

Dr Yow is a flippable person in prison ropins. description is "[one of]You remember a slanderous (or is it libelous?) article claiming [he-she] was really Dr. Ieow, but [he-she] does look a[or]A[stopping] bit wonky, y'know? But with an intense look in [his-her] eyes[if Dr Yow is rowdy] as [he-she] yells[else if Dr Yow is wordy] as [he-she] babbles[end if][what-can-doc-say].". "Dr. Yow is pacing around semi-absent-mindedly[if Dr Yow is not in prison ropins] enjoying[otherwise] pining for[end if] [his-her] freedom."

printed name of Dr Yow is "Dr. Yow"

check taking Dr Yow:
	say "[if Dr Yow is in ropins]You'll need to open the gaol first[else]Dr. Yow doesn't need that, after a spell in gaol[end if]." instead;

to say what-can-doc-say:
	let tosay be 0;
	if Dr Yow has been rowdy:
		increment tosay;
	if Dr Yow has been wordy:
		increment tosay;
	say "[if tosay is 2]. He looks repressed, as if he has so many ways to say things, but he needs someone to bring it out of him[else if tosay is 1]. He looks slightly agitated, as if he's only said half of what he wants to say[end if]"

a-text of Dr Yow is "RYRRO". b-text of Dr Yow is "RYRRO". parse-text of Dr Yow is "x[sp]o[sp]x[sp]x[sp]y". Dr Yow is cheat-spoilable.

understand "doctor/doc yow" and "doctor/doc" as Dr Yow.

Dr Yow can be rowdy, wordy or calm. Dr Yow is calm.

check fliptoing prison ropins:
	if duck is not visible:
		say "You fiddle with the fence but probably need someone or something to MAKE it unlocked due to how it's configured. You don't have anything on you[if shaven havens is unvisited]. You haven't explored up north yet[else if duck is prefigured]. You remember trying 'unlocked' with the duck[end if]. Then, UNLOCKED should work. It just feels right.";
		preef prison ropins;
		do nothing instead;

check fliptoing fissure:
	if duck is not visible:
		say "The fissure squirms a bit but settles back down. When it was open, maybe something could've gone in, but you're carrying nothing close to the right shape.";
		preef fissure;
		do nothing instead;

instead of entering a rut:
	say "It's not the right size or shape for you."

instead of eating a person:
	if noun is the player:
		try swearing obscenely instead;
	say "You have no fork, or anything that could become a fork. Plus, gross." instead;

section rowdying

every turn (this is the cool rowdy rule):
	if doc-cool > 0:
		decrement doc-cool;
		if doc-cool is 1:
			if Dr Yow is visible:
				say "Dr. Yow was [if Dr Yow is rowdy]rowdier[otherwise]wordier[end if] a bit ago. Now [he-she]'s worried.";
		if doc-cool is 0:
			if Dr Yow is visible:
				say "Dr. Yow quits talking. [he-she-c]'s not [if Dr Yow is rowdy]rowdy[otherwise]wordy[end if] any more.";
			now Dr Yow is calm;

doc-cool is a number that varies. doc-cool is usually 0.

rowdying is an action applying to nothing.

understand the command "rowdy" as something new.

understand "rowdy" as rowdying.

carry out rowdying:
	if Dr Yow is not visible:
		if location of player is not obscurest:
			say "[reject]" instead;
	if Dr Yow is rowdy:
		say "You recharge Dr. Yow's rowdiness.";
	otherwise:
		say "Dr. Yow appears charged! [he-she-c] begins ranting about scientific solutions and implementations and so forth, and how [one of][he-she] was called [if player is male]wormy Mr. Yow[else]My Sow Ms. Yow[end if] until [he-she] got [his-her] Ph.D., and the worst [he-she] gets is 'Wooly Ol['] Yow' now[or]someone needs to grundy Dr. Yung[or]you can be a weirdo AND woe-rid[or]Dr. Ney is [his-her] idol[cycling]. It's quite a sight[if Dr Yow is in prison ropins], even through the jail door[end if][unless Dr Yow has been rowdy][one of]. You doubt [he-she]'s like this all the time, though. Maybe [he-she] can speak more calmly, in other situations[or][stopping][end if].";
	unless Dr Yow has been rowdy:
		reg-inc;
	now Dr Yow is rowdy;
	now doc-cool is 3;
	if agnostic is in location of player, ag-gets-it instead;
	the rule succeeds;

[rowdy -> attentive]

to ag-gets-it:
	say "The agnostic's understanding is paltry at first, but [he-she]'s attentive, so [he-she] gets it partly, before raptly exclaiming 'Droll Dr. LOL!' Dr. Yow's confident now, explaining patly and aptly. 'Call me Dr. Leo--older version of you.' They converse animatedly about the dream of no-silage gasoline, but Dr. Yow convinces [him-her] to start small.";
	if ag-atten is false:
		say "[line break]It seems to take a bit longer than it should, but Dr. Yow is patient and even having fun. You wonder if you could've helped a bit more, but you did enough--and [ag-first] will find [his-her] own clever life hacks to focus more.";
	else:
		say "[line break]The lecture goes extra quickly with [ag-first] attentive! So much common sense, but there's lots of deep stuff, too. Suddenly you understand how certain machines that confused you as a kid worked.";
	say "[line break]The lecture over, [ag-first] says, 'Dr.?'[paragraph break]'Toy! Try! Do!'[line break][agnostic] smacks [his-her] forehead and runs off 'It--it won't just be pseudo-souped! Pen lids, spindle...'[paragraph break]'Wait! I have this lots-o-tools stool...' but the agnostic's gone.[paragraph break]'Wait! Where is it? O lost!' [he-she-c] searches [his-her] pockets, just in case.[paragraph break]'Dr. Yow's Drowsy. My lab: balmy. Long cameo.' Then, above [his-her] duck's quack, 'come along.' [he-she-c] follows a loading diagonal, off for some [if player is female](sic) [end if]bachelor lab chore. Before [he-she] does, [he-she] shows you a picture labeled CURSEE RESCUE, featuring--a very unflattering portrait of yourself, before sticking it in [his-her] pocket. 'That dude[if player is female], um, dudess[end if] with the powers. House arrest, I heard. You look like someone who cares.' Unintentional compliments are the nicest.";
	now Dr Yow is in lalaland;
	now duck is in lalaland;
	if atblock is in Obscurest Subsector:
		now ag-atten is false;
	now atblock is in lalaland;
	now agnostic is in Actionless Coastlines;

section wordying

wordying is an action applying to nothing.

understand the command "wordy" as something new.

understand "wordy" as wordying.

carry out wordying:
	if Dr Yow is not visible:
		if location of player is not obscurest:
			say "[reject]" instead;
	if Dr Yow is wordy:
		say "You recharge Dr. Yow's wordiness.";
	otherwise:
		say "[if agnostic is visible]Dr. Yow starts discussing Wry Do too theoretical for adolescent ears to appreciate. You hear the agnostic mutter 'Ow. Dry.'[line break][else]Dr. Yow just starts talking about stuff like the weather, etc. It's drivel, a nice version of Dr. Evil[wordy-hinty].[end if]";
	unless Dr Yow has been wordy:
		reg-inc;
	now Dr Yow is wordy;
	now doc-cool is 3;
	if agnostic is visible:
		say "[line break][if Dr Yow was wordy]Dr. Yow's wordiness isn't helping the agnostic[else]The agnostic initially seems excited as Dr. Yow begins to talk, but it's all a bit too wonky, y'know? It quickly becomes dry--ok, dorky. Perhaps if the presentation were more exciting[end if].";
	the rule succeeds;

to say wordy-hinty:
	say "[unless Dr Yow has been wordy][one of]. You doubt [he-she]'s like this all the time, though. Maybe [he-she] can speak more excitingly, in other situations[or][stopping]"

book Actionless Coastlines

Actionless Coastlines is north of Strati Strait. Actionless Coastlines is east of Salted Deltas. Actionless Coastlines is in Towers. "Leak Lake is calmer and narrower here, but even with no rocks, you can't make it across on your own. Thankfully, no sectionals are being held here right now. If you had some sort of craft, maybe you could[if atheists are visible]. You can go back south, however[else if the-hostile are visible]. You can go back west, however[else]. You can go west and south, though[end if][one of]. There's no sign of sectionals, past, present or future[or][stopping].[paragraph break]A maturation natatorium and Thearchy Hatchery provide local flavor."

section Maturation Natatorium

the Maturation Natatorium is a backdrop. the Maturation Natatorium is in actionless coastlines and Salted Deltas. description is "It extends [if player is in actionless coastlines]west[else]east[end if]. There's no clear way in[if atheists are in lalaland], but you probably don't want to see the atheists again[else], and the atheists would probably pull you back if you tried[end if], anyway. Inscribed on the front is HE SITS AT THIS SEAT."

instead of doing something with Maturation Natatorium:
	if current action is entering and player is in Salted Deltas:
		say "[if atheists are in lalaland]No need to disturb [relig-mf] now you're past[else]You're worried the atheists might give you a working over, verbal or physical might have you strung up for sacrilege. So HOSTILE[end if]." instead;
	if action is procedural, continue the action;
	if current action is entering:
		say "It doesn't look very fun, whether or not you'd be pestered by atheists." instead;
	say "There's nothing much to do with the maturation natatorium. It's just a gaudy structure.";

section Thearchy Hatchery

the Thearchy Hatchery is a backdrop. Thearchy Hatchery is in actionless coastlines and Strati Strait.

instead of doing something with Thearchy Hatchery:
	if current action is entering and player is in Strati Strait:
		if player is in strati strait:
			say "[if the-hostile are in lalaland]No need to disturb [relig-mf] now you're past[else]You're worried [relig-mf] might have you strung up for sacrilege. So HOSTILE[end if]." instead;
		say "That would probably be sacrilegious. You'd get a good scolding, I'm sure." instead;
	if action is procedural, continue the action;
	say "There's nothing much to do with the Hatchery. It's just a gaudy structure.";

description of Thearchy Hatchery is "It's a pretty impressive structure, with a note 'RIP once-sad deacons: aced, son (just before release 4).' Hmm[if the-hostile is visible]. You'd think [relig-mf] would belong there, but maybe they are trying to preach to whatever masses drop by[end if]."

book side-path rooms

chapter Lost Lots

Lost Lots is south of Danger Garden. Lost Lost is in Towers. "[one of]Well, I guess those annoying natives were right. [or][stopping]This is a dead-end area, without even a useful slot. A gadflies['] gasfield surrounds you every way except back north[if organised ego drains are in lost lots], and worse, sporties['] ripostes mock you[end if]."

after looking in lost lots:
	if strudel is carried by player or strudel is in lalaland, set the pronoun it to gasfield;
	continue the action;

the gadflies' gasfield is bounding scenery in Lost Lots. "You can't 100% see the gasfield, since it's hazy. But it's there, and it blocks you."

check opening a hintpastry:
	say "You can just try to [if player has toaster]TOAST or [end if]EAT that if you want." instead;

section sporties' ripostes

the sporties' ripostes are plural-named LLPish vanishing scenery in Lost Lots.

instead of doing something with sporties' ripostes:
	if action is procedural, continue the action;
	if current action is taking, say "Actually, you want to find a way to say, you're NOT going to take them any more." instead;
	say "The ripostes are annoying to deal with, because they are so quick and witty, but maybe you can find a way."

description of sporties' ripostes is "They're mocking you, not enough to feel like you have a right to be mad, but enough to annoy you. Both clever and dumb at the same time, they're also very quick and don't drag it out."

a-text of sporties' ripostes is "RRYRYYRR". b-text of sporties' ripostes is "RR?RYYRR". parse-text of sporties' ripostes is "-[sp]x[sp]x[sp]-[sp]a[sp]l".

chapter Fringe Finger

Fringe Finger is west of Anemic Cinema. Fringe Finger is in Towers. "This fringe finger leads to a dead end pretty much every which way. So there's not much to do except go back east."

some solve-a-loaves are an edible plural-named hintpastry in Fringe Finger. "Some solve-a-loaves have been left here.". description is "They are not huge loaves and could probably fit in a small oven[if player has toaster], like your toaster[end if]. Solve-a-Loaves is an actual brand here in Yorpwald, fortified with brain enriching nutrients."

understand "loaves" and "loaf" as solve-a-loaves.

section strudel

some strudel is a LLPish reflexive hintpastry in Fringe Finger. "Some strudel sits here in a sled rut[one of]. Whoever lost it probably forgot it[or][stopping].". description is "It reminds you of stuff stolen from parents' cabinets during sleepovers--wouldn't ordinarily taste great, but stolen? A bit better. You notice the letters [i]Certified Nutritious by Dr. Eltus[r] stamped on it, in red. Magically, it doesn't look dirty from having spent time on the ground."

understand "rustle" and "rustle strudel" as a mistake ("Wrong type of word, and you're missing a d.") when strudel is reflexive and strudel is visible

a-text of strudel is "RYRRRYR". b-text of strudel is "RYRRRGR". parse-text of strudel is "x[sp]u[sp]x[sp]x[sp]x[sp]e[sp]x".

check scaning strudel:
	if strudel is reflexed:
		say "You already rustled it." instead;
	say "You don't suspect you need to do anything with the strudel, but the settler still pops something up. Maybe it'd be practice to figure how you could've taken it.";

The sled rut is auxiliary scenery in Outer Route. "It's flecked with red, oddly[if strudel is in Outer Route], and the strudel's still in it[else if strudel is reflexed], though you think you know why, now[end if]."

a-text of sled rut is "RYRRRYR". b-text of sled rut is "RYRRRYR". parse-text of sled rut is "x[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x".

check taking sled rut:
	say "[if strudel is in Outer Route]Maybe take the strudel instead[else]The sled rut is nothing and holds nothing[end if]." instead;

book rawest waters

Rawest Waters is a room in Towers. "Ew. Rats. You're splashing around in a spry raspy spray, unable to go back southwest, and unable to decide if the northern or eastern shore is closer."

after printing the locale description for Rawest Waters when Rawest Waters is unvisited (this is the adjust min towers score in the waters rule):
	now poss-score of Towers is 5 + cur-score of towers;
	now min-score of Towers is 1 + cur-score of towers;
	if player has strudel and strudel is not reflexed:
		increment poss-score of towers; [ First, you need to say SPECTACULAR. But you can also DINGY, GREEDY, PRESENT and give Ed the flowerpot. And the strudel can always be rustled.]

the eastern shore is reflexive scenery in rawest waters. "The eastern shore's not necessarily closer than the other two, unless you want it to be."

southwestern shore is scenery in rawest waters. "You can barely see it--the agnostic isn't there either."

northern shore is scenery in rawest waters. "You can barely see it--it's as far as the eastern shore--but it seems darker and more foreboding.". northern shore is undesc.

instead of doing something with the southwestern shore:
	if action is procedural, continue the action;
	say "No way to get back to the southwestern shore, really."

instead of doing something with the northern shore:
	if action is procedural, continue the action;
	say "It's too far to swim or do much more than magick."

does the player mean doing something with eastern shore: it is very likely.

a-text of eastern shore is "RYYRYRR". b-text of eastern shore is "RYYRGRR". parse-text of eastern is "x[sp]-[sp]-[sp]x[sp]e[sp]x[sp]x".

every turn when player is in rawest waters:
	say "[one of]Gurgle, er, glug... [or]Waters waster, you think... [or]Spirited riptides... [in random order]your eyes go red [one of]thinking of Ernesta, the lady of finding directions[or]half-praying to St. Renae[or]half-praying to St. Earne[in random order]."

the raspy spray is bounding scenery in rawest waters. the spray is undesc.

does the player mean drinking the spray:
	it is very likely.

instead of doing something with spray:
	if current action is drinking:
		say "You'd hate the taste of the sips." instead;
	if current action is xraying:
		continue the action;
	say "You need to worry about getting out of the spray."

chapter a bot boat

check going inside when player is in Actionless Coastlines:
	if bot boat is in Actionless Coastlines, try entering bot boat instead;
	say "You can't make up your mind which of the natatorium and hatchery would annoy you less, so you opt for neither. They can't be relevant." instead;

check examining bot boat:
	if turbos are not part of bot boat:
		say "The bot boat seem bare-bones at the moment, not ready to ride." instead;

description of bot boat is "You don't see much on the boat you understand, except some turbos and a blaster. [if turbos are reflexed]The turbos seem robust enough[otherwise]A pair of turbos doesn't look quite ...hardy? No, some other word ... to help propel you across the river[end if]. [if blaster is reflexed]The blaster seems stabler than it used to be[otherwise]The blaster hums and shakes erratically[end if].[paragraph break][if bot boat is reflexed]The bot boat is nicely rewired, now[else]Some wires inside are also connected [i]weirder[r] than they should be. Maybe they can be fixed, though that's probably not as important as the main hardware[end if]."

the turbos are a reflexive plural-named thing. description of turbos is "You're not sure how they should work, but [if turbos are reflexed]you managed to[else]maybe you can[end if] counter the agnostic's technical knowledge by tweaking it."

the blaster is a reflexive thing. description of blaster is "You're not sure how it should work, but [if blaster is reflexed]you managed to[else]maybe you can[end if] counter the agnostic's technical knowledge by tweaking it. You see red writing on it."

t-or-b is a thing that varies.

instead of doing something to the turbos:
	if the action is procedural, continue the action;
	say "The turbos are too technical for you--you can probably just examine or scan them."

instead of doing something to blaster:
	if the action is procedural, continue the action;
	say "The blaster is too technical for you--you can probably just examine or scan it."

a-text of turbos is "RYRYRR". b-text of turbos is "RYRYRR". parse-text of turbos is "x[sp]-[sp]x[sp]-[sp]x[sp]x".

a-text of blaster is "RRYRRYR". b-text of blaster is "RRGRRGP". parse-text of blaster is "x[sp]x[sp]a[sp]x[sp]x[sp]e[sp]r".

no-pastries is a truth state that varies.

to towers-min-adj: [this is when you leave the mainland]
	wipe-towers-map;
	d "Left [number of guardians not in lalaland] guardians: [list of guardians not in lalaland].";
	if denim is in Scope Copse, d "Left denim.";
	if old ice is not in lalaland, d "Left old ice.";
	if sporties' ripostes are not in lalaland, d "Left sporties['] ripostes.";
	now poss-score of towers is cur-score of towers + 5; [dingy, present, spectacular, greyed, give flowerpot]
	now min-score of towers is cur-score of towers + 1; [spectacular]
	unless turbos are reflexed and blaster is reflexed:
		increment poss-score of towers; [we get another point for Rawest Waters]
		min-up;
	if used-ray is false:
		increment poss-score of towers;
		if number of carried hintpastries is 0, min-up; [no way to cheat if we have no hintpastries]
	if player has strudel and strudel is reflexive, increment poss-score of towers; [we can still make it RUSTLED]

to say mrmamu:
	say "[if player is female]Ma'am[else]Mister[end if]";

check taking toaster:
	if toaster is in actionless coastlines:
		say "Best leave it with the agnostic." instead;

check taking bot boat:
	try entering bot boat instead;

check entering bot boat:
	if turbos are not part of bot boat:
		say "'It's not even built yet, [mrmaam]! I need a tool to get the blaster and turbos working!'" instead;
	if player has toaster:
		say "'Hey! [mrmamu]! It'd be dangerous to take that toaster across the water!' [he-she-c]'s right[if number of carried hintpastries > 0]. But you decide to heat up what you have[end if]. You leave the toaster--you bet the agnostic could do some cool stuff with it. It will be a decent enough payment for [his-her] time and efforts. The agnostic leaves the toaster on the sand.[line break]";
		now all carried hintpastries are heated;
		now toaster is in actionless coastlines;
	else if toaster is visible:
		if number of carried not heated hintpastries > 0:
			say "You heat up the food you found since you were last here.";
		now all carried hintpastries are heated;
	if turbos are reflexive and blaster is reflexive:
		say "[one of]'Go, [mrmaam]!' The boat sinks as you enter it. You fiddle with the controls--but they choke. The turbos conk out, and the blaster fizzes, too. 'Dang! What do I need to do?' the agnostic mutters to herself.[or]Unfortunately, nothing's changed since the last time you were here. 'Man! I still need to fix the blaster. Or the turbos. Maybe both.'[stopping]" instead;
	say "BRRRRM! The boat works great. 'I'll make a glider girdle next!' the agnostic shouts, out of view.";
	if turbos are reflexed and blaster is reflexed:
		say "You speed across the deeps of the rawest waters as if on nine-seg engines and to the shore on the other side--so hard, they snap in two. Well, it would've been hard to return them to the agnostic anyway. You've made it!";
		towers-min-adj;
		now player is in Mislit Limits instead;
	say "Then you hear a voice call AIR FLUE FAILURE as you hear the [if turbos are reflexive]turbos go burst-o[otherwise]blaster, er, blast[end if]. You fall in the waters, about halfway to the opposite shore.";
	towers-min-adj;
	now player is in rawest waters instead;

check going in rawest waters:
	say "Spirited riptides! You panic a bit, unsure which shore would take the least time to get to--northern, southwestern or eastern. They all seem about the same distance. If only you could force the issue somehow--the [i]eastern[r] looks a bit more pleasant." instead;

book mislit limits

the accurst leap is auxiliary cluey scenery. "It would be sad if you jumped off it, so close to your goal."

a-text of accurst leap is "RRYRRYRYRYR". b-text of accurst leap is "RRYRRYRYRGR". parse-text of accurst leap is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]a[sp]x".

check jumping when accurst leap is visible:
	say "I won't let you! You're too close! You can't do it!" instead;

the packet of clear catsup is auxiliary cluey scenery. "The packet of clear catsup is something you'd have missed without knowing about it. It is the sort of litter that keeps the castle seeming worse than ordinary."

instead of eating clear catsup:
	say "Yuck.";

instead of opening clear catsup:
	say "Not only is it litter, but it doesn't have any ridged bits to make it open easier. Still, a potential clue is a potential clue."

a-text of clear catsup is "RRYRRYRYRYR". b-text of clear catsup is "RRGRRYRYRYR". parse-text of clear catsup is "x[sp]x[sp]e[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

the pest accrual is auxiliary cluey scenery. "Eww! Maybe they're good for nature or something."

a-text of pest accrual is "RRYRRYRYRYR". b-text of pest accrual is "RRYRRYPYRGR". parse-text of pest accrual is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]c[sp]-[sp]x[sp]a[sp]x".

the c-p is privately-named auxiliary cluey scenery. printed name of c-p is "cactus pearl.". "You're pretty sure it's not a pearl cactus. That'd be bigger."

a-text of c-p is "RRYRRYRYRYR". b-text of c-p is "RRYRRYRYRYR". parse-text of c-p is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

does the player mean doing something with the c-p when c-p is visible: it is likely.
does the player mean doing something with the pearl cactus when c-p is not visible: it is likely.

the pearl cactus is auxiliary cluey scenery. "You're pretty sure it's not a cactus pearl. That'd be smaller and rounder."

a-text of pearl cactus is "RRYRRYRYRYR". b-text of pearl cactus is "RRYRRYRYRYR". parse-text of pearl cactus is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

the accu-plaster is auxiliary cluey scenery. "It was meant to hold some of the curst palace together, but it's crumbling now."

a-text of accu-plaster is "RRYRRYRYRYR". b-text of accu-plaster is "RRYRRYRYRYP". parse-text of accu-plaster is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]r".

the capsule cart is auxiliary cluey scenery. "It is bright red and could've held anything, really, but it reads CAPSULE CART."

a-text of capsule cart is "RRYRRYRYRYR". b-text of capsule cart is "RRYRRYRYRYR". parse-text of talc spa cure is "x[sp]x[sp]-[sp]c[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

the Last Acre Cup is auxiliary cluey scenery. "A reward for a forgotten and useless contest, just part of the garbage here."

a-text of last acre cup is "RRYRRYRYRYR". b-text of last acre cup is "RRYRRYRYRYR". parse-text of last acre cup is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

the Talc Spa Cure is auxiliary cluey scenery. "It's empty, but it's another sort of luxury item that people moving into the Curst Palace's old location would love."

a-text of Talc Spa Cure is "RRYRRYRYRYR". b-text of Talc Spa Cure is "RRYPRYRYRYR". parse-text of capsule cart is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

nextclue is a list of thing variable. nextclue is { accurst leap, clear catsup, pest accrual, cactus pearl, pearl cactus, accu-plaster, capsule cart, last acre cup, talc spa cure }

clue-index is a number that varies.

after going to mislit limits:
	if flip-final-clue is true:
		say "You notice something [if clue-index > 0]else [end if]you wouldn't have seen without St. Teri's help.[run paragraph on]";
		if clue-index > 0:
			move entry clue-index in nextclue to lalaland;
		increment clue-index;
		if clue-index > number of entries in nextclue:
			now clue-index is 1;
		move entry clue-index in nextclue to mislit limits;
		say " That [entry clue-index in nextclue] must be important. You note it as further scenery in your pedanto-notepad.";
		pad-rec-q "scenery";
		now flip-final-clue is false;
	continue the action;

check taking scenery in mislit limits:
	if noun is curst palace:
		say "You need to make it worth taking back." instead;
	if noun is clear catsup:
		say "Picking up litter is admirable, but it's small thinking with your powers." instead;
	if noun is accurst leap:
		say "Take a leap of logic instead." instead;
	say "You can't and don't need to take it, but maybe you can take a clue from it." instead;

to say 3-random:
	sort table of magnifs in random order;
	say "[blurb in row 1 of table of magnifs]! [blurb in row 2 of table of magnifs]! [blurb in row 3 of table of magnifs]! He-he. Eh";

table of magnifs
blurb
"Breathtaking"
"Exceptional"
"Fantastic"
"Magnificent"
"Marvelous"
"Miraculous"
"Outstanding"
"Overwhelming"
"Sensational"
"Stupendous"
"Superlative"
"Unsurpassed"

to say a-bunch:
	say "[if number of visible warriors is 2]an ex-bunch[else]a bunch[end if]"

definition: a room (called twr) is towery:
	if twr is Loftier trefoil, decide no;
	if map region of twr is towers, decide yes;

To decide whether the current action is no-timely:
	 (- meta -)

to decide whether the action is procedural: [aip]
	if the current action is no-timely, yes;
	if discerning, yes;
	if examining, yes;
	if fliptoing, yes;
	if attacking, yes;
	if scaning, yes;
	if ss0ing, yes;
	if ssing, yes;
	if scanlasting, yes;
	if objhinting, yes;
	if xraying, yes;
	if guruing, yes;
	if smelling, yes;
	if reading, yes;
	if sbing, yes;
	if qbc_litany is table of no conversation:
		if gotoing, yes;
		if gotothinging, yes;
	if saying yes, yes;
	if saying no, yes;
	if dropping, yes;
	if looking, yes;
	if objasking about, yes;
	if taking inventory, yes;
	if swearing obscenely, yes;
	if swearing mildly, yes;
	if listening, yes;
	no;

definition: a thing is followy:
	if it is rodney, no;
	if it is a warrior and it is visible, yes;
	no.

chapter Mesprise/Emprise Premise(s)

Mesprise Premises is west of Mislit Limits. printed name of Mesprise Premises is "[if Tetris Sitter is reflexive]Emprise Premises[else]Mesprise Premises[end if]". Mesprise Premises is an innie room in towers. "You [one of]look around and are led soon to[or]see[stopping] some writing on the wall here, and you smell something, too."

the Tetris Sitter is a reflexive LLPish person in Mesprise Premises. description is "[if Tetris Sitter is reflexive]Absorbed in a game on her ITSTER[else]A little more at peace with herself now[end if].". "The Tetris Sitter sits here, [if tetris sitter is reflexive]playing Tetris. She seems rather good at it[else if flowerpot is in lalaland]happy now[else]a bit sad now you brought her back to reality, but maybe you can change that[end if]."

the itster is auxiliary scenery in Mesprise Premises. description is "It's red, and MAN what a high score the Tetris Sitter has."

instead of doing something with the itster:
	if action is procedural, continue the action;
	say "The itster is the Tetris Sitter's, but maybe you can make her realize there's a lot more to life."

after fliptoing tetris sitter:
	now itster is in lalaland;
	continue the action;

check going east in Mesprise Premises (this is the force give flowerpot rule):
	if player has flowerpot and flowerpot contains crocus and Tetris Sitter is reflexed:
		say "Before you leave, you remember Ornate Atoner Renato's speech--the flowerpot seems like a nice gift for Ed, now that Ed is nicer. You give it to him.[paragraph break]'Come back if you need help with Castle Apcur!' he says, as he goes to set the crocus out somewhere nice.";
		now flowerpot is in lalaland;
	continue the action;

Ornate Atoner Renato is an undesc.

before giving the crocus to:
	try giving flowerpot to second noun instead;

before showing the crocus to:
	try showing flowerpot to second noun instead;

understand "flower" as crocus.

check giving to Tetris Sitter:
	if second noun is crocus:
		try giving flowerpot to Tetris Sitter instead;
	if second noun is Tetris Sitter and Tetris Sitter is reflexive:
		if noun is not flowerpot, say "She mumbles '[']S trite,' [if noun is flowerpot]without looking up[else]but she does seem slightly intrigued. Maybe you need to change her outlook[end if]." instead;
	unless noun is flowerpot, say "St. Teri thanks you, but [if flowerpot is in lalaland]the flowerpot was probably enough[else]that's not quite what she wants[end if]." instead;
	if crocus is off-stage, say "You consider giving the flowerpot to St. Teri, but there's nothing in it, yet. Maybe you could find a plant outside. Maybe the unripe ur-pine is hiding something." instead;
	say "St. Teri smiles at the flowerpot and looks less tense. She realizes whom the gift must be from. She sighs, nods, hangs her new flower out back where it can get better, then returns, thanking you.";
	min-and;
	if cur-score of towers is max-score of towers - 2 and min-score of towers is max-score of towers - 2, say "[line break]NOTE: you probably deserve to know the remaning optional point is for not using any hintpastries. So if you fix the Curst Palace, you'll hit the maximum. Good work! Towers is a long area.";
	now flowerpot is in lalaland instead;

check going outside in Mesprise Premises:
	try going east instead;

the welt-proof flowerpot is a reflexive and LLPish container. description of flowerpot is "You don't know what good welt-proofing will do, but it seems pretty sturdy[if-crocus]."

check examining welt-proof flowerpot:
	ignore the examine containers rule;

to say if-crocus:
	if crocus is in flowerpot:
		say ". It's got the succor crocus you found under the ur-pine";
	else:
		say ". The flowerpot is empty";

after printing the name of the flowerpot while taking inventory:
	if crocus is in flowerpot:
		say " (holding a succor crocus)";
		now succor crocus is mentioned;
	omit contents in listing;
	continue the action;

understand "pot" and "flower pot" as flowerpot.

a-text of flowerpot is "RYRRO". b-text of flowerpot is "PYRRO". parse-text of flowerpot is "d[sp]i[sp]x[sp]x[sp]y". flowerpot is parse-spoilable.

check inserting into the flowerpot:
	if noun is crocus:
		if noun is in Mislit Limits:
			try taking noun instead;
		say "The crocus is in the flowerpot already." instead;
	say "Only a flower [if crocus is in flowerpot]like the crocus [end if]belongs in the flowerpot." instead;

check putting on the flowerpot:
	say "The flowerpot's sole purpose is to hold the succor crocus." instead;

instead of taking crocus:
	if crocus is in Mislit Limits:
		say "It looks a bit TOO colorful for a flower, almost radioactive. In fact, from what you know about the species, that means it's close to DYING. Maybe you could tone it down." instead;
	say "It's been through enough [if flowerpot is reflexive]bad times[else]upheaval[end if]."

the succor crocus is an LLPish flippable thing. "A succor crocus lies here, full of livid colors that don't make you happier."

description of crocus is "[if flowerpot is reflexive]From what you know, the brighter a succor crocus is, the less it works. Right now, it's far too bright, and it's close to dying[else]Looking much better now[end if]."

check fliptoing flowerpot:
	if crocus is not visible:
		say "A more dingy flowerpot wouldn't help things. Maybe you need to put something in it.";
		preef flowerpot;
		do nothing instead;

after fliptoing flowerpot:
	now crocus is in flowerpot;
	continue the action;

a-text of crocus is "RYRRO". b-text of crocus is "PYRRO". parse-text is "d[sp]i[sp]x[sp]x[sp]y". crocus is parse-spoilable.

to say new-yerg-thing:
	now flip-final-clue is true;

flip-final-clue is a truth state that varies.

section planting

planting is an action applying to one thing.

understand the command "plant" as something new.

understand "plant [something]" as planting.

carry out planting:
	if noun is not crocus:
		say "You can only plant a, well, plant." instead;
	if flowerpot is reflexive:
		say "It already is. But maybe you could fix it and replant it." instead;
	say "The crocus is already in the flowerpot. That is planted enough." instead;

book Mislit Limits

after printing the locale description for Mislit Limits when Mislit Limits is unvisited (this is the adjust min towers score passing waters rule):
	now poss-score of Towers is 4 + cur-score of towers;
	now min-score of Towers is 1 + cur-score of towers;
	if player has strudel and strudel is not reflexed:
		increment poss-score of towers;

Mislit Limits is a room in Towers. "Everything looks a bit wrong here. It is most definitely a curst place, very reddish and separate from the curst palace nearby. You're gonna need some crazy action, or word, to make it what it was. And yet--something in the air says, lo, curse or clues? Scaly clays rise steeply enough to block progress every way except west, [if mesprise premises are visited]where it looks like someone might be living[else]which houses [tet-ter][end if][if ur-pine is in limits]. An unripe ur-pine also stands here, intimidatingly big[end if]."

to say tet-ter:
	say "[if tetris sitter is reflexed]the Tetris Sitter[else]St. Teri[end if]"

chapter scaly clays

the scaly clays are plural-named bounding scenery in Mislit Limits. "They rise up at such an angle they'd be dangerous to climb. The curst palace is sprawled out on top of them."

instead of doing something with scaly clays:
	if action is procedural, continue the action;
	say "The scaly clays just block you. But you don't need to deal with them to fix the curst palace.";

chapter unripe ur-pine

the unripe ur-pine is vanishing LLPish scenery in Mislit Limits. understand "pine/urpine" and "unripe pine/urpine" as ur-pine. "It covers a lot of ground[if crocus is not off-stage], but there's probably nothing else beneath it. [one of]Maybe it's hiding something. [or]You see red wondering if you'd see anything as ridiculous in Peru[stopping][end if]."

instead of doing something with ur-pine:
	if action is procedural, continue the action;
	if current action is attacking, say "[one of]'I prune!' you think to yourself, involuntarily, seeing red.[or]'Re-up-in[']?' you hear a voice say, and you see red at how vernacular and contrived it sounds.[in random order]" instead;
	say "The unripe ur-pine just sits there, almost impossibly big."

a-text of ur-pine is "RYRYYR". b-text of ur-pine is "RYRGYR". parse-text of ur-pine is "x[sp]-[sp]x[sp]i[sp]-[sp]x".

chapter pester'n serpent

understand the command "present" as something new.

A pester'n serpent is a vanishing LLPish animal in Mislit Limits. initial appearance of pester'n serpent is "[one of]A[or]The[stopping] pester'n serpent guards the way west. It lets out ten reps of a particularly nasty hiss.". description of pester'n serpent is "It's coiled and ready to strike anyone who tries to go by it."

rule for supplying a missing second noun when showing:
	if pester'n serpent is visible:
		now second noun is pester'n serpent.

a-text of pester'n serpent is "RRYRYRR". b-text of pester'n serpent is "?RYRG??". parse-text of serpent is "x[sp]x[sp]e[sp]x[sp]e[sp]n[sp]t".

chapter curst palace

The Curst Palace is a reflexive backdrop.

after fliptoing Curst Palace (this is the overall Towers LLP rule):
	if used-ray is false and no-pastries is false and cur-score of towers is max-score of towers - 1:
		ital-say "You get a bonus point for not using the toaster/pastries['] x-ray vision anywhere!";
		increment cur-score of towers;
	continue the action;

towers-min-flag is a truth state that varies;

understand "castle apcur" and "castle/apcur" as the curst palace.

check examining curst palace when player is not in mislit limits:
	say "The curst palace is too far away to make out details beyond its general decrepitude." instead;

max-pal-seen is a number that varies.

check scaning curst palace (this is the nab a few letters rule) :
	if player is in Loftier Trefoil:
		say "You'll want to walk outside first, at the very least." instead;
	if player is not in mislit limits:
		if max-pal-seen is 0:
			say "You'd think you would see eleven lights for the curst palace, but some are blacked out, as if the settler was too far away to analyze everything.";
		else if palace-let > max-pal-seen:
			say "Ooh! A few more lights, now.";
		else:
			say "You don't see any more than you have before[if palace-let < max-pal-seen]. In fact, you have less information than when you were closer[end if].";
	else if max-pal-seen < 11:
		say "The entire settler lights up[if max-pal-seen is 0]--but it takes a while. You're lucky you're so close[else], finally[end if]!";
	if max-pal-seen < palace-let:
		now max-pal-seen is palace-let;

check fliptoing curst palace when player is not in mislit limits:
	say "Your word, stupendous as it is, has no effect. Yet. You [if player is in Mesprise Premises]may just need to go back outside[else]are probably not close enough[end if].";
	preef curst palace;
	the rule fails;

instead of doing something with the curst palace when player is not in mislit limits:
	if action is procedural, continue the action;
	say "The palace is too far away to interact. You need to get closer, and even then, you can probably only examine or scan it. Or say the right word to restore it.";

a-text of curst palace is "[cpset of false]". b-text of curst palace is "[cpset of true]". parse-text of curst palace is "[cpp]".

to say cpp:
	let p-l be palace-let;
	say "x[sp]x[sp]-[sp]";
	if p-l < 4:
		say "x";
	else:
		say "?";
	if p-l < 5:
		say "t";
	else:
		say "?";
	if p-l < 6:
		say "-";
	else:
		say "?";
	if p-l < 7:
		say "x";
	else:
		say "?";
	if p-l < 8:
		say "-";
	else:
		say "?";
	if p-l < 9:
		say "x";
	else:
		say "?";
	if p-l < 10:
		say "-";
	else:
		say "?";
	if p-l < 11:
		say "x";
	else:
		say "?";

to say cpset of (mytru - a truth state):
	let p-l be palace-let;
	say "RRY[if p-l < 4]*[else]R[end if][if p-l < 5]*[else if mytru is true]?[run paragraph on][else]R[end if][if p-l < 6]*[else]Y[end if][if p-l < 7]*[else]R[end if][if p-l < 8]*[else]Y[end if][if p-l < 9]*[else]R[end if][if p-l < 10]*[else]Y[end if][if p-l < 11]*[else]?[run paragraph on][end if]";

instead of entering curst palace:
	say "No time to browse bowers. Plus, it's still cursed."

description of Curst Palace is "The curst palace Castle Apcur towers high enough to see across the lake. But perhaps it could be much nicer...with just one word..."

check going inside in Mislit Limits:
	say "(assuming the way west, since Castle Apcur is too high up)[paragraph break]";
	try going west instead;

check going west in Mislit Limits:
	if serpent is in mislit limits, say "[one of]You can't risk sneaking by the serpent--Castle Apcur is right here, waiting to be changed! Just one (long) word! Though maybe if you could get rid of the serpent, it might help.[or]'Step near a serpent... you muse, then 'TRAP SEEN.'[cycling]" instead;

book Leak Lake (backdrop)

Leak Lake is a useless backdrop. It is in salted deltas, Actionless Coastlines, Strati Strait, Mislit Limits. "Leak Lake is so named because many bodies of water leak into it, and it leaks into others. You are glad it doesn't smell of carp, but it does smell of some sort of vegetable."

instead of doing something with leak lake:
	if the action is procedural, continue the action;
	if the current action is smelling, continue the action;
	if the current action is drinking, say "Yo, sick! So icky!" instead;
	if the current action is entering:
		if player is in actionless coastlines and bot boat is in actionless coastlines, try entering bot boat instead;
		say "Go out, eh? Too huge!" instead;
	say "Leak Lake is just there. Not much to do with it. You [if player is in mislit limits]found[else]need[end if] a way to cross it.";

book shoals aslosh (backdrop)

the shoals aslosh are a useless plural-named backdrop. they are in salted deltas, Actionless Coastlines, Strati Strait, leak lake. "They make you say 'Ah! Loss!' (or Oh! Lass! if you're feeling romantic.) And, of course, if you focus on one, you see halos."

instead of doing something with leak lake:
	if the action is procedural, continue the action;
	if the current action is drinking, say "Yo, sick! So icky!" instead;
	if the current action is entering:
		if player is in actionless coastlines and bot boat is in actionless coastlines, try entering bot boat instead;
		say "Go out, eh? Too huge!" instead;
	say "The shoals aslosh are just there. Not much to do with it. You [if player is in mislit limits]found[else]need[end if] a way to cross Leak Lake.";

book Towers specific verbs

chapter guardian stubs

to say gd of (zz - a guardian):
	if zz is the-hostile:
		say "[one of][or] (still mum about their hostile ol['] heist)[stopping]";
	if zz is atheists:
		say "[one of] (well, they're certainly wasting each other's time talking about there's no afterlife)[or][stopping]";
	if zz is arid den:
		say "[one of][or] still hawking Nerd-Aid[stopping]";
	if zz is natives:
		say "[one of][or] (you assume, by how they are talking about the Badlands and looking at you funny)[stopping]";
	if zz is ego drains:
		say "[one of][or] (you know, those barely visible spirits that make you feel bad about doing things quickly and efficiently. They exist in non-magic worlds, too)[stopping]";

to say mb-aswell:
	if guardians-seen is 3:
		say " as well";

to say mb-also:
	if guardians-seen is 2:
		say " also";

the initial appearance of a guardian is usually "[gd of the item described]."

book who are the guardians?

[this is arranged from south to north, then east to west, the first place you can see a guardian.]

chapter scope copse

section bluster butlers

the bluster butlers are a plural-named neuter purple guardian. understand "bluster butler" and "butler" as bluster butlers. "Bluster butlers, masters of direct intimidation, guard the way [psgdir of bluster butlers]."

description of bluster butlers is "Bluster butlers are known for handling undesirables roughly. Their employers (or alma mater) are sewn into what they're wearing: [i]Trebul's[r]."

a-text of bluster butlers is "RYRRRYR". b-text of bluster butlers is "R?RRR??". parse-text of bluster butlers is "x[sp]?[sp]x[sp]x[sp]x[sp]?[sp]?".

section muscly

muscly luc sym is a red guardian. "[one of]Someone muscly named [or][stopping]Luc Sym flexes while guarding the way [psgdir of muscly luc sym].".

description of luc sym is "He's certainly muscly. He looks relatively light on his toes for his size, too."

a-text of muscly luc sym is "RRYRRO". b-text of muscly luc sym is "RRYRR?". parse-text of muscly luc sym is "x[sp]x[sp]u[sp]x[sp]x[sp]?".

section snider diners

The snider diners are plural-named flippable blue guardians. "Snider diners block the way [psgdir of snider diners].". description is "They're sniffing the air and mumbling about sophisticated palates and not being interrupted. All very drily."

muscly ms lucy is a female red guardian. "[one of]Someone muscly named [or][stopping]Ms Lucy flexes while guarding the way [psgdir of muscly ms lucy].".

description of muscly ms lucy is "She's certainly muscly. She looks relatively light on her toes for her size, too."

a-text of muscly ms lucy is "RRYRRO". b-text of muscly ms lucy is "RRYRRB". parse-text of muscly ms lucy is "x[sp]x[sp]u[sp]x[sp]x[sp]y".

printed name of muscly ms lucy is "Muscly Ms. Lucy".

other-g of luc sym is ms lucy. other-g of ms lucy is luc sym.

understand "diner" as diners.

a-text of snider diners is "RYRRYR". b-text of snider diners is "R??R?R". parse-text of diners is "x[sp]?[sp]?[sp]x[sp]?[sp]x".

chapter baldest blasted saltbed

section fluster self rut

the fluster self rut is a red guardian. description is "Just looking at it makes you feel agitated, makes you waste energy worrying how much energy it has wasted and will waste. Maybe there's a way to calm it, and yourself, down. Reading it might reveal a brand name, or it might not.". "A fluster self rut blocks your way [psgdir of fluster self rut]."

instead of doing something with the fluster self rut:
	if the action is procedural, continue the action;
	say "You can't do much with the fluster self rut. Well, nothing exciting."

a-text of fluster self rut is "RYRRRYR". b-text of fluster self rut is "R?RRR?R". parse-text of fluster self rut is "x[sp]-[sp]x[sp]x[sp]x[sp]i[sp]x".

section traipse pirates

some traipse pirates are plural-named red guardians. "Traipse pirates dance to the [psgdir of pirates].". description of pirates is "Sun-burnt and proud of it. They're unlikely to hand you a piastre or discuss the REST API."

understand "pirate" as pirates.

pirate-countdown is a number that varies.

every turn when pirates are visible:
	if pirate-countdown > 0:
		decrement pirate-countdown;
	else:
		if a random chance of 1 in 5 succeeds:
			say "A pirate swats at an air pest, red-faced--and reaps it! But it leaves a red welt.";
			now pirate-countdown is 3;

a-text of pirates is "RYRRYYR". b-text of pirates is "PYRRYGR". parse-text of pirates is "p[sp]-[sp]x[sp]x[sp]-[sp]e[sp]x". pirates are cheat-spoilable.

chapter anemic cinema

section resident trendies

some Resident Trendies are plural-named red guardians. "Resident trendies block your way [psgdir of resident trendies].". description is "They seem a bit too cool for you, but then, cool is a state of mind, and maybe you could change that."

a-text of resident trendies is "RYRRYYRR". b-text of resident trendies is "R?RRY?R?". parse-text of trendies is "x[sp]?[sp]x[sp]x[sp]-[sp]?[sp]x[sp]?".

section ingrates

some angriest ingrates are plural-named white guardians. "Angriest ingrates whining about any old thing block the way [psgdir of ingrates]."

understand "ingrate" and "angriest ingrate" as ingrates.

description of angriest ingrates is "They're spouting some of the angriest ranting you've heard, though it doesn't make you see red right away. And yet, angriest is so close to whining."

a-text of angriest ingrates is "YRRRRYYR". b-text of angriest ingrates is "?PPRRY?R". parse-text of ingrates is "-[sp]n[sp]g[sp]x[sp]x[sp]-[sp]-[sp]x".

section admirer

An admirer is a female purple guardian. "An admirer to the [psgdir of admirer] would rather you stay here and listen to their flattery than go anywhere new."

a-text of admirer is "RYRRYYR". b-text of admirer is "RYRRYGR". parse-text of admirer is "x[sp]-[sp]x[sp]x[sp]-[sp]e[sp]x".

description of admirer is "[if admirer is male]He[else]She[end if] seems to be gazing at you raptly, as if out of puppy love. While [admsex] is too scared to approach you, you doubt you can get by without some really awkward conversation. It's like [admsex] needs that special someone you can't be while you're trekking the Badlands."

to say admsex:
	say "[if admirer is male]he[else]she[end if]"

chapter unblest sunbelt

Mel Fish is a blue guardian. "A man to the [psgdir of Mel Fish] mumbles 'I'm flesh. I'm flesh. And whoever I am, I need to stand my ground against...whoever everyone else is.' You recognize him...wait, it's Mel Fish, the former reality show star ('SMH, Life'--the name still makes you see red) who always kept trying crazier and crazier ways to be an individual, before he burned out!"

description of Mel Fish is "On his chest, Mel Fish has the word FLEMISH crossed out in red. He sees you staring and yells 'I'm not Flemish! Nothing against [']em! It's just not me!'"

a-text of Mel Fish is "RYRRYRR". b-text of Mel Fish is "RYRRYRR". parse-text of Mel Fish is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x".

understand "flemish/painted" and "flemish/painted man" as Mel Fish.

section dandier arid den

The dandier arid den is a blue neuter guardian. "A dandier arid den rests [psgdir of arid den], too wide to cross. It may not be manned, but those things have security like crazy."

a-text of arid den is "RRYYRYR". b-text of arid den is "??YYRGR". parse-text of arid den is "?[sp]?[sp]-[sp]-[sp]x[sp]e[sp]x".

description of dandier arid den is "They look dandier than anyone you've met here. They seem to gain energy from their shirts, bizarrely. Shirts by that one designer whose name you can't remember.[paragraph break]You think you smell something, too, but you can't place it."

the bottles of Nerd-Aid are auxiliary plural-named scenery. the arid den carries the nerd-aid. understand "wares" as nerd-aid. understand "nerd/aid" and "nerdaid" and "nerd aid" as nerd-aid.

a-text of Nerd-Aid is "RRYYRYR". b-text of Nerd-Aid is "RRYYRYP". parse-text of nerd-aid is "x[sp]x[sp]-[sp]-[sp]x[sp]-[sp]d".

description of Nerd-Aid is "You can't make out what flavor the Nerd-Aid should be, and maybe that's all for the best."

instead of doing something with the nerd-aid:
	if current action is taking or current action is eating or current action is drinking:
		say "You'd need to buy it, and you've no money, and it's pretty much glorified sugar-water anyway." instead;
	if action is procedural, continue the action;
	say "The Nerd-Aid is not worth doing anything with. To, maybe, but not with.";

chapter Treading Gradient

section alarming grailman

the alarming grailman is a red guardian. understand "liam/ garn/" as grailman. "An alarming grailman to the [psgdir of grailman] has you worried there's no way by him."

description of grailman is "You could probably take a below-average grailman, but this one's a cut above. He seems to be flexing his muscles a lot, waiting for someone to try going by."

a-text of alarming grailman is "RYRRYRYR". b-text of alarming grailman is "RYRRYR?R". parse-text of alarming grailman is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x".

section sweatier wait-seer

The sweatier wait-seer is a blue guardian. "A sweatier wait-seer seems in no hurry to let anyone [psgdir of wait-seer]."

understand "wait/ seer" as wait-seer.

description of sweatier wait-seer is "He is sweatier than anyone else you have run across here. But as-is, he has more than enough energy to beat you up. He mutters 'I...we...stare,' turning red, as you look at him."

a-text of wait-seer is "RYYRYYRR". b-text of wait-seer is "?YYRY?RR". parse-text of wait-seer is "?[sp]-[sp]-[sp]x[sp]-[sp]?[sp]x[sp]x".

section reed's ale

to say deal-seer:
	say "[one of]'[el-la-f], deal seer, at your service!' someone with a bottle of Reed's Ale ambushes you. They don't seem like they want to be budged[or]Lars Eede, Deal Seer, remains here, with that bottle of Reed's Ale[stopping]"

Lars Eede is a red guardian. a-text of Lars Eede is "RYRYYRYR". b-text of Lars Eede is "RYRYYRYR". parse-text of Lars Eede is "x[sp]e[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x". "[deal-seer]."

description of Lars Eede is "He's carrying that bottle of Reed's Ale but seems awfully jittery."

Elsa Erde is a red guardian. a-text of Elsa Erde is "RYRYYRYR". b-text of Elsa Erde is "RYRYYRYR". parse-text of Elsa Erde is "x[sp]-[sp]x[sp]e[sp]-[sp]x[sp]-[sp]x". "[deal-seer].". Elsa Erde is female.

description of Elsa Erde is "She's carrying that bottle of Reed's Ale but seems awfully jittery."

other-g of lars eede is elsa erde. other-g of elsa erde is lars eede.

understand "deal seer" and "deal/seer" as Lars Eede when player is male.

understand "deal seer" and "deal/seer" as Elsa Erde when player is female.

the Reed's Ale is a vanishing thing. a-text of reed's ale is "RYRYYRYR". b-text of reed's ale is "PGRYYRYR". parse-text of reed's ale is "r[sp]e[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x".

description of Reed's Ale is "It's open and, from [el-la-f]'s frequent swigs, apparently bottomless. You can't read the details of the bottle, but it's probably not very good for you. Or [el-la-f]. Yet [el-la-f] is attached to it, for some reason. Well, you probably know why by now, if you got this far."

rese is a truth state that varies.

chapter salted deltas

section atheists

the Asset-Hit Atheists are plural-named purple guardians. "Atheists to the [psgdir of atheists] seem quite set in their ways. And their territory.". description is "They nod and gesture and say 'A-ha!' a lot, but they do seem to draw out everything they say. They look well off. Asset-hit, if you will."

understand "atheist" as atheists.

a-text of atheists is "RYRRYYRR". b-text of atheists is "RY?R?YR?". parse-text of atheists is "x[sp]-[sp]x[sp]x[sp]i[sp]-[sp]x[sp]x".

chapter danger garden

section natives

some natives are a plural-named white guardian. indefinite article of natives is "several". "Some natives block your way [psgdir of natives], though you don't really see anything interesting there."

understand "native" as natives.

description of natives is "They're not, like, a particular skin color or with a particular accent. That'd be racist of me. They just seem to talk about the Badlands like they know all about it, and they're looking at you funny, as if they know you don't fit in."

a-text of natives is "RYYRYRR". b-text of natives is "?GYRYRR". parse-text of natives is "?[sp]a[sp]-[sp]x[sp]-[sp]x[sp]x".

section bonker

The bonker is a purple guardian. "You recognize a huge bonker to the [psgdir of bonker][one of]. They're usually more bark than bite, but this one's certainly in the way, and they aren't just hired out for fun. Gotta be something interesting that way[or][stopping].". description of bonker is "It's twice your height and upright and club-shaped and probably ready to [if bonker is passtried]re-[end if]bonk anyone who goes east while it's still functional, and boy does it look functional[one of]. While it's not quite as violent as a boot-o-bot or space-taking as Obst-Bots, its presence indicates something important to the east[or][stopping]."

a-text of bonker is "RRYRYR". b-text of bonker is "PRYPGR". parse-text of bonker is "b[sp]x[sp]o[sp]k[sp]e[sp]x". bonker is parse-spoilable.

retrytext of bonker is ", poised to re-bonk"

section stinger

The stinger is a purple guardian. "The stinger that replaced the bonker remains here guarding the east passage, fizzing about actively.". description of stinger is "It's certainly active. Maybe if it calmed down, you could get past it."

a-text of stinger is "RYRRYRR". b-text of stinger is "RYRRYRR". parse-text of stinger is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x".

chapter Strati Strait

section lois the hostile

Lois the Hostile is a female proper-named purple guardian. "You recognize Lois the Hostile, renowned for forced-contrarian views on religion, as well as the 'real' Lois. She just likes to block people, and in this case, she's blocking your way [psgdir of lois the hostile].". description is "She doesn't exactly look happy, but she doesn't look irredeemably evil."

a-text of lois the hostile is "RYRYYRR". b-text of lois the hostile is "?GRYYRR". parse-text of lois the hostile is "?[sp]O[sp]x[sp]-[sp]-[sp]x[sp]x".

section hostile is he lot

The Hostile-Is-He Lot is a plural-named purple guardian. "The Hostile-is-He Lot, a swarm of contrarians who question anything and everything except their own nuisance value, block the way [psgdir of hostile-is-he lot].". description is "It's amazing, the variety of hostile expressions!"

understand "hostile/ is/ he/ lot" as hostile-is-he when player is male.

a-text of hostile-is-he lot is "RYRYYRR". b-text of hostile-is-he lot is "??RYYR?". parse-text of hostile-is-he lot is "-[sp]-[sp]x[sp]-[sp]-[sp]x[sp]-".

other-g of Lois the Hostile is hostile-is-he lot. other-g of hostile-is-he lot is Lois the Hostile.

chapter guardian org table

table of guard-org [organized going 1st north then east. W, N, E, S in each room, depending on what's not covered.]
guy	loc	blockdir	blokzorz	kloozorz	taunt	aux
Dreads Adders	Topside Deposit	north	"The dreads adders may or may not be lethal. In fact, they may be perfectly harmless. But one look at them makes you worry, what if you were the first slob to be killed by them as you tried to pass? Especially since, as you calculate things, there can't be many possibilities.[paragraph break]You don't see red until you turn away and get lost in your own dreads."	"From what you know about dreads adders, they shouldn't be harmful, and they rely more on intimidation than subterfuge. Maybe you could change how THEY think."
bluster butlers	Scope Copse	west	"The butlers begin running around, roaring all sorts of reasons you don't want to go west and it wouldn't be good for society anyway. 'See what's west? URL best!' one says. You see red at the horrible rhyme."	"Maybe if the butlers were quieter, they'd have a better place to guard than here."
muscly Luc Sym	Scope Copse	north	"He shows surprising dexterity for someone so muscly as he forces you back."	"Looking again at muscly Luc Sym, you briefly remember the giant's paradox, about trading off strength and dexterity."
muscly Ms Lucy	Scope Copse	north	"She shows surprising dexterity for someone so muscly as she forces you back."	"Looking again at muscly Ms. Lucy, you briefly remember the giant's paradox, about trading off strength and dexterity."
snider diners	Scope Copse	east	"They sniff and seem to dig around for concealed cutlery. You don't need or want any part of that, or of their wit[if player has dagger], even if your ragged dagger were more effective[end if]."	"The diners mutter about how bad weather can ruin the ambience of open-air meals."	"The diners smack their lips, and you think you hear the zhk of silverware."
pirates	Blasted Saltbed	north	"'Tips are...' one pirate says. 'Spare it!' you lash out. Everyone's a bit red-faced over this."	"You can't make the pirates less in-shape, but maybe something more cosmetic will work."	"A wry, wary 'Yawr!' from the pirates makes you feel awry."
fluster self rut	Blasted Saltbed	east	"You try going [psgdir of fluster self rut]. It should be easy, but it's nearly impossible. Maybe you can make the fluster-self rut less active."	"You should be able to make it over the fluster-self rut, but you can't. It's just active enough to brush you back."
ingrates	Anemic Cinema	west	"They quite simply won't shut up about things, though they seem well-feed, intelligent and un-ugly enough. They're the rangiest of the nuisances you've come across, zipping back and forth in a red blur."	"Gee. It would be nice to make the ingrates less aggressive, even if you can't make them less whiny."
an admirer	Anemic Cinema	north	"Your admirer, a rampant [if player is female](ow!) wo[end if]mantrap, hugs you and won't let go and explains you are even cuter than the lost duck over behind them."	"If only there were a legal or moral reason for the admirer to cool it!"
Resident Trendies	Anemic Cinema	east	"The resident trendies can't imagine why YOU earned the right to just CUT THROUGH them. As if you were cool enough to get close!"	"Looking back at the resident trendies, they still seem too cool for you. But maybe it is all in your mind."
Mel Fish	Unblest Sunbelt	north	"Mel Fish grabs you and whines about who he is, who he's been made to be, who he can't be, and ends with 'I'm flesh!' You back off until he lets go."	"Perhaps you can free Mel Fish from nationality and his past to individuality."
arid den	Unblest Sunbelt	east	"There must be some sort of anti-trespassing device. 'No passing without trying a sample! It's good for you! And worth the money!' Of which you have none. Rats."	"The arid den won't evaporate, but maybe you can get rid of it another way."
wait-seer	Treading Gradient	north	"The wait-seer doesn't break a second sweat as he convinces you you don't need to go past him. There are ways around him, and perhaps you don't need to visit what is behind him to fulfill this quest. He seems not at all tired by his lecture, or by whatever mind-fu he pulled on you while just sitting there."	"Boy! You'd get tired with the wait-seer's life. Maybe he could, too."
Lars Eede	Treading Gradient	east	"'I'm a deal seer, and I'm obliged to make deals with people before they go on their way.'"	"Maybe you can free Lars from his capitalist or drinking urges."	--	reed's ale
Elsa Erde	Treading Gradient	east	"'I'm a deal seer, and I'm obliged to make deals with people before they go on their way.'"	"Maybe you can free Elsa from her capitalist or drinking urges."	--	reed's ale
Atheists	Salted Deltas	east	"The atheists slowly and painfully explain to you that you're ignoring them and their very logical arguments. You can run away, but running through them--that's just rude."	"The atheists have no shortage of compelling logic, but perhaps their presentation could be adjusted."
grailman	Danger Garden	north	"The grailman, with well-above-average skills for your average passage-blocker, gets in front of you. You're not going that way with him there."	"This is the first grailman you've ever met, but he seems more than adequate enough to block your way."
bonker	Danger Garden	east	"[if bonker was passtried]RE-BONK! You see red and[else]BONK! The bonker, true to its name, re-bonks you with sockin['] coinks. Your retinas re-stain. It's not lethal or anything, but you[end if] stagger back, dazed, to the center of Danger Garden[if natives are visible]. The natives can't help but mutter that THEY would've known better[end if]. The bonker still looks in good shape."	"'BONKER DEFENDING JAIL AT 100% EFFICIENCY!' you hear from the east."
stinger	Mislit Limits	east	"The stinger needles at you menacingly. You back off."	"The stinger looks unusually active."	"Fizzing and buzzing from the stinger." [the stinger isn't really in mislit limits, but I need this hack for it to replace the bonker]
natives	Danger Garden	south	"The natives assure you there isn't anything you REALLY want to see there. Perhaps there are better things elsewhere, but nothing behind there. I mean, they don't even know why they're HERE. They should be doing better."	"Those natives look like they could be psyched out."
lois the hostile	Strati Strait	north	"She mentions you [one of]should know better than[or]are more persistent than[stopping] that agnostic with [his-her] blasphemous science experiments.[paragraph break]How very [i]hostile[r]. It might be good for her divinity career if you fixed that."	"Boy! Lois sure could use some down-home kindness."
hostile-is-he lot	Strati Strait	north	"They mention you [one of]should know better than[or]are more persistent than[stopping] that agnostic with [his-her] blasphemous science experiments.[paragraph break]Hostile indeed! Fixing that might help their divinity careers."	"Boy! The Lot sure could use some down-home kindness."

chapter guardian taunt tables

after fliptoing reed's ale:
	now lars eede is in lalaland;
	now elsa erde is in lalaland;
	consider the guardian taunt rule;
	if player is male, shuffle-guardians lars eede;
	if player is female, shuffle-guardians elsa erde;
	continue the action;

after fliptoing a guardian (this is the guardian taunt rule) :
	if number of guardians in location of player is 0:
		if keycar is off-stage and player is not in Topside Deposit and player is not in actionless coastlines:
			say "A keycar speeds into view with all the guardians gone! And not just any keycar. An annoying yacker keycar, a novelty toy whose sales helped make Elvira rich, before she sponsored a campaign to fine reckless keycar users--well, okay, there's no PROOF of kickbacks.[paragraph break]The keycar's probably not going to stop you going anywhere, but it'd be nice to get rid of.";
			now keycar is in location of player;
		continue the action;
	if other-g of noun is not dreads adders, now other-g of noun is in lalaland;
	repeat through table of ggt:
		if guaname entry is in location of player and guaname entry is not prevtaunt:
			deliver-taunt guaname entry and noun;
			continue the action;
	repeat through table of ggt:
		if guaname entry is in location of player:
			deliver-taunt guaname entry and noun;
			continue the action;
	continue the action;

to deliver-taunt (g1 - a guardian) and (g2 - a guardian):
	repeat through table of gst:
		if g1 is guaname entry and g2 is guagone entry:
			say "[guatext entry][line break]";
			continue the action;
	repeat through table of ggt:
		if g1 is guaname entry:
			say "[guatext entry][line break]";

section generic taunts

table of ggt - guardian generic taunts
guaname	guatext
bluster butlers	"The bluster butlers loudly mention the strength of working in teams to guard important places."
muscly Luc Sym	"Luc Sym beats his chest for NOT being removed like that."
muscly Ms Lucy	"Ms. Lucy beats her chest for NOT being removed like that."
snider diners	"The snider diners sniff at the distraction."
Mel Fish	"Mel Fish mumbles 'Well, at least it wasn't me, whoever I am. I mean, my name's Mel Fish, but who am I, really?'"
arid den	"'Not bad! But would've been more stylish with NERD-AID!' booms a mechanical voice from the arid den."
bonker	"'ENEMIES ARE STILL TOO SCARED TO FACE THE BONKER!' you hear from the east."
stinger	"The stinger continues to fizz and buzz."
natives	"The natives mumble how they KNEW something like that would happen to someone else. They've seen it all, here."
pirates	"The pirates sing a colorful shanty about another lubber relegated to the deep."
grailman	"The grailman mumbles something like 'well, we can't all be above average.'"
fluster self rut	"The fluster self rut buzzes to remind you that, well, you haven't cleared EVERYONE and EVERYTHING."
Lars Eede	"[reedale].'"
Elsa Erde	"[reedale].'"
lois the hostile	"Lois the Hostile mumbles passive-aggressively that the wages of sin is, well, THAT."
hostile-is-he lot	"The Hostile-is-He Lot mumble passive-aggressively that the wages of sin is, well, THAT."
ingrates	"The ingrates complain there aren't enough of them to take over the space you opened before worrying they're next."
admirer	"Your admirer claps far too fervently at your accomplishment."
trendies	"The resident trendies whisper that they're too cool to be disappeared like that."
wait-seer	"The wait-seer coolly puts up a hand and mumbles some Hakuna Matata nonsense."
atheists	"The atheists mention meditation is all well and good, but the sweatier wait-seer's flaw was bringing an invisible cloud being into it."

to say n-s-rav:
	say "[if player is in Treading Gradient]south[else]north[end if]"

to say reedale:
	say "[el-la] takes another swig from the bottle of Reed's Ale. 'Glad that wasn't me"

to say el-la-f:
	say "[if player is female]Elsa Erde[else]Lars Eede[end if]"

to say el-la:
	say "[if player is female]Elsa[else]Lars[end if]"

section specific taunts

table of gst - guardian specific taunts
guaname	guagone	guatext
atheists	grailman	"The atheists sniff that the grailman would be good at guarding any grail, since it PROBABLY DOESN'T EXIST."

chapter min-score-of-towers

adjblasting is an action applying to one thing.

a room can be tower-accessible. a room is usually not tower-accessible.

a room can be accessible, sideview, mightaswell or inaccessible. a room is usually inaccessible.

after fliptoing a guardian (this is the track guardian progress rule):
	shuffle-guardians noun;

to shuffle-guardians (goner - a guardian):
	let G be up;
	let MR be Topside Deposit;
	if goner is ingrates:
		now MR is Fringe Finger;
	else if goner is natives:
		now MR is lost lots;
	else:
		choose row with guy of goner in table of guard-org;
		now room blockdir entry of loc entry is tower-accessible;
		now loc entry is tower-accessible;
		if location of player is loc entry:
			now G is blockdir entry;
		else:
			now G is opposite of blockdir entry;
		now  MR is the room G of location of player;
	now goner is prodded;
	if goner is dreads adders:
		now topside is accessible;
		now copse is accessible;
		continue the action;
	if goner is white: [white guardians are optional]
		now MR is mightaswell;
		min-up;
		if can-see-map:
			draw-my-loc;
		continue the action;
	if goner is purple: [purple guardians must be dispelled]
		if goner is bonker, continue the action;
		if MR is actionless coastlines or player is in actionless coastlines:
			now MR is accessible;
		else:
			now MR is sideview;
		if can-see-map, draw-my-loc;
		continue the action;
	if MR is accessible:
		say "You [if room G of location of player is visited]notice somewhere [G] you already went to, so it'll be a little easier to get around[else]calculate you found a new path to an area you haven't seen yet[end if].";
		d "You already unlocked [MR].";
	else:
		d "You just unlocked [MR].";
	let gua-before be gua-to-clear;
	if MR is not sideview or MR is not mightaswell:
		now MR is accessible;
	if gua-before is gua-to-clear: [if we still need to clear the same number of guardians, increase minimum score]
		d "unnecessary guardian cleared.";
		min-up;
	if can-see-map:
		draw-my-loc;
	let RG be number of red guardians not in lalaland;
	if Lars Eede is in lalaland or Elsa Erde is in lalaland, decrement RG; [Lars and Elsa both go]
	if Ms Lucy is in lalaland or Luc Sym is in lalaland, decrement RG; [both musclies go]
	let BG be number of blue guardians not in lalaland;
	d "Reds left = [list of red guardians not in lalaland].";
	d "Blues left = [list of blue guardians not in lalaland].";
	d "Reds now [RG], blues now [BG]. [goner] = [if goner is red]red[else if goner is blue]blue[else if goner is white]white[else]purple[end if], gua-before = [gua-before], gua-after = [gua-to-clear].";
	if number of visible guardians > 0:
		now mr-hinty is a random visible guardian;
	else if scope copse is visited:
		if any-cleared is false:
			now any-cleared is true;
			say "Well, this is the first place you cleared all the guardians from, which feels nice. [if spec-o-scope is unexamined]You don't know if you need any area completely cleared, but maybe you can check the scope[bak-copse] for more guidance[end if].";
		else if number of guardians not in lalaland is 0:
			say "That's all the pesky guardians gone! You're free to move around. But now, you want to move beyond. To the other side of the lake.";
		else if number of tower-accessible rooms is 11:
			if clear-warn is false:
				say "You can move everywhere, now, but maybe you can clear a few more passages, if you want.";
				now clear-warn is true;
		else if number of tower-accessible rooms >= 9:
			say "You probably don't have much left to do, to get everywhere you need.";
	continue the action;

to decide which number is gua-to-clear:
	let temp be 0;
	if blasted saltbed is not accessible and sunbelt is not accessible, decide on 5;
	if Treading Gradient is not accessible, increment temp;
	if anemic cinema is not accessible:
		increment temp;
		if blasted saltbed is not accessible and salted deltas are not accessible and Strati Strait is accessible, increment temp;
	if danger garden is not accessible:
		increment temp;
		if unblest sunbelt is not accessible and Strati Strait is not accessible and salted deltas are accessible, increment temp;
	if salted deltas are not accessible and Strati Strait is not accessible, increment temp;
	decide on temp.

clear-warn is a truth state that varies.

any-cleared is a truth state that varies;

to say bak-copse:
	say "[if player is not in Scope Copse] back in the copse";

[	if MR is a hotcorner:
		now distance of MR is 0;
	repeat with HS running through hotcorners:
		if MR is adjacent to HS and MR is a hotcorner and distance of MR > 1:
			now distance of MR is 1;
	d "[new-br-needed] is the new br needed. [br-needed] is the old.";
	d "Blue = [number of blue guardians not in lalaland] Red = [number of red guardians not in lalaland], overall = [new-br-needed].";]

mr-hinty is a guardian that varies.

check going (this is the guardian reposition before rule):
	if mrlp is Towers:
		if noun is not a direction:
			say "You need to specify a direction, not a place." instead;
		repeat with QQ running through guardians:
			if QQ is in location of player:
				choose row with guy of QQ in table of guard-org;
				if QQ is not in lalaland:
					now QQ is passtried;
					if loc entry is location and blockdir entry is noun:
						if blockdir entry is neuter, set the pronoun it to blockdir entry;
						now mr-hinty is QQ;
						say "You're blocked going [noun] by [unless QQ is proper-named]the [end if][QQ]. [blokzorz entry][line break]" instead;
					if loc entry is not location and blockdir entry is opposite of noun:
						now mr-hinty is QQ;
						if blockdir entry is neuter, set the pronoun it to blockdir entry;
						say "You're blocked going [noun] by [unless QQ is proper-named]the [end if][QQ]. [blokzorz entry][line break]" instead;
		if number of taunty guardians > 0:
			let QQ be a random taunty guardian;
			choose row with guy of QQ in table of guard-org;
			say "[taunt entry][line break]";
			continue the action;

definition: a guardian (called myg) is taunty:
	if location of myg is not location of player:
		decide no;
	choose row with guy of myg in table of guard-org;
	if there is a taunt entry:
		decide yes;
	decide no;

after going (this is the guardian reposition after rule):
	if mrlp is Towers:
		now guardians-seen is 0;
		reposition-guardians;
		if number of visible guardians > 0:
			now mr-hinty is a random visible guardian;
	continue the action;

chapter reposition-guardians

definition: a guardian (called gu) is mas:
	if gu is lars eede, yes;
	if gu is hostile-is-he lot, yes;
	if gu is luc sym, yes;
	no;

to reposition-guardians:
	[say "Repositioning guardians.";]
	repeat through table of guard-org:
		if guy entry is not in lalaland:
			if guy entry is not admirer and player is male and guy entry is female, next;
			if player is female and guy entry is mas, next;
			if location of player is loc entry:
				now guy entry is in location of player;
				if there is an aux entry:
					if aux entry is reed's ale:
						now guy entry carries aux entry;
					else:
						now aux entry is in location of player;
			if the room blockdir entry of loc entry is location of player:
				now guy entry is in location of player;
				if there is an aux entry:
					now aux entry is in location of player;

chapter warwaring - not for release

warwaring is an action applying to nothing.

understand the command "warwar" as something new.

understand "warwar" as warwaring when player is in Trefoil.

carry out warwaring:
	repeat with WA running through not leaderly warriors in Trefoil:
		try fliptoing WA;
	try fliptoing Rodney;
	the rule succeeds;

chapter warriors

A warrior is a kind of person. a warrior is usually vanishing. a warrior can be leaderly. a warrior is usually not leaderly. a warrior can be pinko. a warrior is usually not pinko. a warrior is usually terse. a warrior has a number called pod-num. a warrior has a number called pod-ord.

h-w is a warrior that varies. [h-w means hinted warrior]

the chum of a warrior is usually Andres.

the specification of warrior is "A person who blocks your way out of the Trefoil."

roddro is a truth state that varies.
rodyon is a truth state that varies.

after fliptoing rodney:
	pad-rec-q "curst palace";
	continue the action;

check fliptoing Rodney:
	if number of visible warriors > 4:
		if the player's command includes "yonder":
			say "Your attempt to bounce Rodney yonder is blocked by a few of his followers, who stumble a bit but stay upright as they combat the invisible force sucking him away. That looked like the right idea, but maybe get rid of a few of them, first?";
			now rodyon is true;
			preef Rodney instead;
		say "Rodney's voice would certainly seem droney by itself, but he segues into a marching song. I guess when you're a leader, you have that confidence. Maybe diminish his forces?";
		now roddro is true;
		preef Rodney instead;

after fliptoing a warrior (this is the trefoil exit rule):
	let vw be number of warriors in Loftier Trefoil;
	d "[list of warriors in Loftier Trefoil].";
	if noun is Rodney:
		now all visible warriors are pinko;
		if vw > 0:
			decrease poss-score of towers by vw;
		now all visible warriors are in lalaland;
		now player has flowerpot;
		reposition-guardians;
		continue the action;
	else if vw < 4:
		min-up;
	else if vw is 4:
		say "Rodney's followers look a bit shaken. If you got rid of him by saying [if roddro is true and rodyon is true]YONDER or DRONEY[else if rodyon is true]YONDER[else if roddro is true]DRONEY[else]something to shoo him[end if], you might be able to clear the lot. Or you can mess with all his pals, first. Your choice.";
	if vw > 1:
		now h-w is a random not leaderly warrior in Loftier Trefoil;
	else if vw is 1:
		say "Time to put Rodney out of his misery. Okay, he'll still be miserable, so just put [i]yourself[r] out of the range of his misery.";
		now h-w is rodney;
	continue the action;

rod-hint is a truth state that varies.

check objhinting a not leaderly warrior (this is the poke Rodney but don't spoil him rule):
	if cur-score of towers > 3 and rod-hint is false:
		ital-say "Rodney's vulnerable enough now, you can HINT RODNEY if you don't care about maximum points. I will simply plow through his comrades, otherwise.";
		now rod-hint is true;

check taking a warrior:
	say "You'll have to deal with him[if noun is rodney] and/or his followers[end if] indirectly." instead;

Sir Rodney is a leaderly warrior. description is "A big strong fellow who probably won't be removed by physical force. He looks sort of like Red Bull Burdell's slightly weaker younger brother.". The chum of Rodney is yourself. pod-num of Rodney is 7. pod-ord of Rodney is 1.

a-text of Rodney is "OYRRYR". b-text of Rodney is "OGRRGR". parse-text of rodney is "y[sp]o[sp]x[sp]x[sp]e[sp]x". rodney is cheat-spoilable.

Geno is a warrior. description is "Well, Geno is ... here. He hasn't left yet. He may not be the best warrior, but he's still stronger than you.". pod-num of Geno is 1. pod-ord of Geno is 1.

a-text of Geno is "RYRY". b-text of Geno is "PYPY". parse-text of geno is "g[sp]-[sp]n[sp]-". geno is any-spoilable.

Shane is a warrior. description is "Shane looks well-tanned, but a bit reddish-faced.". pod-num of Shane is 1. pod-ord of Shane is 2.

a-text of Shane is "YRRYR". b-text of Shane is "YRRYR". parse-text of shane is "-[sp]x[sp]x[sp]-[sp]x".

Tyson is a warrior. description is "Tyson keeps snarling at people, red-faced.". pod-num of Tyson is 1. pod-ord of Tyson is 3.

a-text of Tyson is "RRYRO". b-text of Tyson is "RRYRO". parse-text of tyson is "x[sp]x[sp]o[sp]x[sp]y". tyson is any-spoilable.

Wade is a warrior. description is "Wade looks confident, as if nothing can drain that. He's dressed in red.". pod-num of Wade is 1. pod-ord of Wade is 4.

a-text of Wade is "YRYR". b-text of wade is "YRYR". parse-text of wade is "-[sp]x[sp]-[sp]x". wade is cheat-spoilable.

Edwin is a warrior. description is "Edwin looks sober and focused, except when he briefly gives a red-faced glare at all the alcohol in here he isn't allowed to destroy yet.". pod-num of Edwin is 2. pod-ord of Edwin is 1.

a-text of Edwin is "RYRYR". b-text of Edwin is "RYRYR". parse-text of edwin is "x[sp]-[sp]x[sp]-[sp]x". edwin is cheat-spoilable.

Eldon is a warrior. description is "Eldon looks vigorous. Perhaps he's been led on by youthful follies.". pod-num of Eldon is 2. pod-ord of Eldon is 2.

a-text of Eldon is "YRRYR". b-text of Eldon is "YPPYP". parse-text of eldon is "-[sp]l[sp]d[sp]-[sp]n". eldon is parse-spoilable.

Goldy is a warrior. description is "Goldy has an amoral, mercenary look about him.". pod-num of Goldy is 2. pod-ord of Goldy is 3.

a-text of Goldy is "RYRRO". b-text of Goldy is "PGRRB". parse-text of goldy is "g[sp]o[sp]d[sp]l[sp]y". goldy is parse-spoilable.

Royce is a warrior. description is "Royce seems to be muttering-not-muttering about what a tough guy he is.". pod-num of Royce is 2. pod-ord of Royce is 4.

a-text of Royce is "RYOYR". b-text of royce is "RGBYR". parse-text of royce is "c[sp]o[sp]y[sp]e[sp]r". royce is parse-spoilable.

Blake is a warrior. description is "Blake beams, likely a paragon of positive thinking.". pod-num of Blake is 3. pod-ord of Blake is 1.

a-text of Blake is "RRYYR". b-text of Blake is "PPYYR". parse-text of blake is "b[sp]l[sp]e[sp]a[sp]k". blake is any-spoilable.

Bredo is a warrior. description is "Bredo seems unusually focused and interested.". pod-num of Bredo is 3. pod-ord of Bredo is 2.

a-text of Bredo is "RYRYR". b-text of Bredo is "PYRYR". parse-text of bredo is "b[sp]-[sp]x[sp]-[sp]x". bredo is cheat-spoilable.

Daryl is a warrior. description is "Daryl appears to be in tremendous physical shape.". pod-num of Daryl is 3. pod-ord of Daryl is 3.

a-text of Daryl is "RYRRO". b-text of Daryl is "RGPRO". parse-text of daryl is "x[sp]a[sp]r[sp]x[sp]y". daryl is parse-spoilable.

Dewey is a warrior. description is "Dewey is solidly build, almost less just a man than a big tree.". pod-num of Dewey is 3. pod-ord of Dewey is 4.

a-text of Dewey is "RYYRO". b-text of Dewey is "RGYRB". parse-text of dewey is "w[sp]e[sp]e[sp]d[sp]y". dewey is any-spoilable.

Ernest is a warrior. description is "Ernest looks relaxed and ready to gaffle tavernlings.". pod-num of Ernest is 4. pod-ord of Ernest is 1.

a-text of Ernest is "RYRRYR". b-text of Ernest is "RYPRYR". parse-text of ernest is "x[sp]-[sp]n[sp]x[sp]-[sp]x".

Marcel is a warrior. description is "Marcel looks just plain agitated, which can't hurt in his line of work.". pod-num of Marcel is 4. pod-ord of Marcel is 2.

a-text of Marcel is "RYRRYR". b-text of Marcel is "RGRRGR". parse-text of marcel is "x[sp]a[sp]x[sp]x[sp]e[sp]x".

Marlon is a warrior. description is "Marlon doesn't look like all the rest. In fact, he's sort of looking down his nose at them a bit.". pod-num of Marlon is 4. pod-ord of Marlon is 3.

a-text of Marlon is "RYRRYR". b-text of Marlon is "RYPRYR". parse-text of marlon is "x[sp]-[sp]r[sp]x[sp]-[sp]x". marlon is cheat-spoilable.

Reggie is a warrior. description is "Reggie looks spotless--no stains on his clothes. He probably smells as nice as he looks, too.". pod-num of Reggie is 4. pod-ord of Reggie is 4.

a-text of Reggie is "YRRYYR". b-text of Reggie is "YRPYYR". parse-text of reggie is "-[sp]x[sp]g[sp]-[sp]-[sp]x". reggie is cheat-spoilable.

Andres is a warrior. description is "Andres's movements are carefree as he sways back and forth.". pod-num of Andres is 5. pod-ord of Andres is 1.

a-text of Andres is "RRYRYR". b-text of Andres is "RPYPGR". parse-text of andres is "x[sp]n[sp]a[sp]r[sp]e[sp]x". andres is any-spoilable.

Andrew is a warrior. description is "Andrew has a careless look in his eyes. He does not seem to be aware of risk. Just imagine the sort of bugs that would slip through if he wrote text adventures and kept adding one more feature! Oops, maybe you don't have to.". pod-num of Andrew is 5. pod-ord of Andrew is 2.

a-text of Andrew is "RYRRYR". b-text of Andrew is "RYRRGR". parse-text of andrew is "x[sp]a[sp]x[sp]x[sp]e[sp]x".

Archie is a warrior. description is "Archie looks free of pain, big or small.". pod-num of Archie is 5. pod-ord of Archie is 3.

a-text of Archie is "YRRYYR". b-text of Archie is "GRRYYR". parse-text of archie is "a[sp]x[sp]x[sp]-[sp]-[sp]x". archie is cheat-spoilable.

Barney is a warrior. description is "Barney feels close and far at the same time, like he should be placed somewhere else.". pod-num of Barney is 5. pod-ord of Barney is 4.

a-text of Barney is "RYYRRO". b-text of barney is "RYYRRB". parse-text of barney is "x[sp]-[sp]-[sp]x[sp]x[sp]y". barney is cheat-spoilable.

Cedrick is a warrior. description is "Cedrick stretches effortlessly, without any hitches.". pod-num of Cedrick is 6. pod-ord of Cedrick is 1.

a-text of Cedrick is "RRYRRYR". b-text of Cedrick is "PRYRRYR". parse-text of cedrick is "c[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

Demitri is a warrior. description is "Demitri stares out confidently, bolder than his compatriots.". pod-num of Demitri is 6. pod-ord of Demitri is 2.

a-text of Demitri is "RYRYRYR". b-text of Demitri is "RYPGRYR". parse-text of demitri is "x[sp]-[sp]m[sp]i[sp]x[sp]-[sp]x". demitri is cheat-spoilable.

Leander is a warrior. description is "Leander looks too dumb to contemplate anything besides knocking people's heads in.". pod-num of Leander is 6. pod-ord of Leander is 3.

a-text of Leander is "RYYRRYR". b-text of Leander is "PGGRRGR". parse-text of leander is "l[sp]e[sp]a[sp]x[sp]x[sp]e[sp]x". leander is cheat-spoilable.

Preston is a warrior. description is "Preston appears to be the best protected of your persecutors.". pod-num of Preston is 6. pod-ord of Preston is 4.

a-text of Preston is "RRYRYRR". b-text of Preston is "PPYRYRR". parse-text of preston is "p[sp]r[sp]-[sp]x[sp]-[sp]x[sp]x". preston is cheat-spoilable.

Terrance is a warrior. description is "Terrance constantly looks at Rodney and nods obediently. Perhaps you could help him gain a freer mindset.". pod-num of Terrance is 6. pod-ord of Terrance is 5.

a-text of terrance is "RYRRYYRR". b-text of terrance is "RGRPYYRR". parse-text of terrance is "x[sp]e[sp]x[sp]r[sp]-[sp]-[sp]x[sp]x".

The chum of Andres is yourself.

max-war-pods is a number that varies. max-war-pods is usually 7.

to decide which number is war-count of (wc - a number):
	let temp be 0;
	repeat with QQ running through warriors:
		if pod-num of QQ is wc:
			increment temp;
	decide on temp.

when play begins (this is the distribute warriors rule) :
	now all warriors are off-stage;
	repeat with mypod running from 1 to max-war-pods:
		let G be the war-count of mypod;
		[say "[mypod] has war-count of [G].";]
		let H be a random number from 1 to G;
		repeat with QQ running through warriors:
			if pod-num of QQ is mypod and pod-ord of QQ is H:
				now QQ is in Loftier Trefoil;
	now h-w is a random not leaderly warrior in Loftier Trefoil;

[This pulls 1 guy from each wargroup. As of release 3 there are 26 distinct guys with 5.65 letters on average--the shuffling was previously totally random but now it's weighted down to ~5.61 with a more uniform distribution. You are sure to get 2 6's, 2 5's, a 7-8 and a 4-5.]

volume otters

section turn rules

after going (this is the parrot follows you rule):
	if parrot is in an adjacent room:
		if location of player is not bran barn and location of player is not loop pool:
			say "The parrot follows you.";
			move parrot to location of player;
		else:
			say "'Awk! Not sure you need to mess around there now.' The parrot does not follow you.";
	continue the action;

book otters specific verbs

chapter quicklying

to first-status: (- DrawStatusLine(); -);

to get-dead:
	if location of player is not Inclosure:
		if joke-death is false:
			d "Missed joke-death.";
		now joke-death is true;
	if the have-died flag is false:
		now undo-code is 9;
	else:
		now undo-code is 10;
	if location of player is freight:
		ital-say "maybe that pale plea can help you figure how to escape.";
	else if location of player is inclosure:
		ital-say "there are a few ways to die here in the confrontation with Elvira, but you should always be able to back out. In fact, you can flee if you think you need to.";
	else if location of player is alcoves:
		do nothing;
	else if joke-death is true:
		ital-say "this death was an easter egg. I hope it amused you. The death message below is random, and it's probably easier to read the source or win the game than UNDO and retry them.";
	d "Getting dead: [undo-code].[line break]";
	end the story saying "[deth]";

ever-fig is a truth state that varies.

to preef (thi - a thing): [text listed in table of pres]
	now ever-fig is true;
	if player is in study:
		check-get-pad;
	if thi is not prefigured:
		say "[i][bracket]You add the information to your pedanto-notepad under FLIPS.[close bracket][r]";
	now thi is prefigured;
	if player is not in study and player does not have pedanto-notepad:
		say "You should have your notepad, but you don't. This is a BUG, reportable at [email], and I'm giving you the notepad.";
		now player has pedanto-notepad;
	pad-rec "flips";

to preef-nol (thi - a thing):
	now ever-fig is true;
	if thi is not prefigured:
		say "[i][bracket]You add the information to your pedanto-notepad under FLIPS.[close bracket][r]";
	now thi is prefigured;
	if player is in study:
		check-get-pad;
	pad-rec "flips";

check fliptoing medals:
	if Merle is visible:
		say "Elmer and Merle's stupid underling chatter is bad enough at regular speed. You're worried going at super speed might drive you nuts[med-unf]. [if hydra-known is true]You probably need force to get west, too[else]You might need that speed in the final combat, instead[end if].";
		preef medals instead;
	if player is not in alcoves:
		say "There's nothing you really need to attack or avoid quickly here or nearby[med-unf].";
		 preef medals instead;
	if nounsolve < 3 or adjsolve < 3:
		say "You feel a surge, but not enough. [if nounsolve < 3 and adjsolve < 3]Both medals seem[else]One of the medals seems[end if] tarnished. Maybe that's holding some power back. Maybe you have some good deeds to perform, still[med-unf].";
		 preef medals instead;

to say med-unf:
	say "[if medals are unfigured], but that feels right. You note what to do for later[end if]"

i-quipped is a truth state that varies.

Elvira-delay is a number that varies.

every turn when player is in Inclosure and player was in Inclosure (this is the Elvira gains confidence rule):
	unless action is procedural:
		if current quip is final-quip:
			if current action is not playing whistle and current action is not qbc responding with and current action is not objasking generically and current action is not objasking about and current action is not asking about and current action is not asking generically:
				increment Elvira-delay;
				if Elvira-delay is 2:
					say "Elvira smirks when she sees you have no plan. 'Wane anew, blunder bundler,' she says as she gives that silvery laugh.[paragraph break] 'Potent--to PENT' are the final words you hear. Hmm. You probably can't hang around, but there must be a simple way to defeat her[if whistle is not reflexed]. Perhaps you can even retreat to prepare to defeat her[end if].";
					get-dead instead;
				else:
					say "Elvira looks a little less shocked, now. You might want to retreat if you have no plan to defeat her.";

chapter cinders

the cinders are a vanishing LLPish plural-named thing. "Cinders lie here, probably cold enough to take.";

report taking cinders:
	say "They crackle with energy as you take them. Perhaps you can do something with them.";
	the rule succeeds;

Include (-
	has transparent talkable
-) when defining cinders.

description of cinders is "You feel a wave of power as you [if player has cinders]finger through[else]get close to[end if] them. Nothing dangerous, but power to see how to do something, if you think right. But also power to believe you can do it all on your own. You could READ them if you were willing to suffer a headache to learn what to do with them."

check dropping cinders:
	say "You may be able to get rid of them, but they're holy and powerful and you may need some sort of ritualistic action." instead;

a-text of cinders is "RYRRYRR". b-text of cinders is "R?RR??R". parse-text of cinders is "x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]x".

chapter discerning

discerning is an action applying to one thing.

understand the command "discern" as something new.

understand "discern [something]" as discerning.

does the player mean discerning the cinders: it is very likely.
does the player mean discerning the player: it is likely.

to say rand-to-go:
	let mysc be entry 1 of tapering-items;
	if player is in anteroom:
		now mysc is entry 1 of anteroom-items;
	repeat through table of otters anagrams:
		if mysc is the-from entry:
			say "[right-word entry in upper case]";
			continue the action;
	say "BUG--[if player is in Anteroom]loathingly or tersely[else]angrily or brutely[end if]";

rescind-cinders is a truth state that varies.

after fliptoing cinders:
	now rescind-cinders is true;
	continue the action;

discern-warn is a truth state that varies.

carry out discerning:
	if player is in barley and cinders are in barley:
		say "(taking the cinders first)[line break]";
		try taking the cinders;
	if noun is not cinders:
		if mrlp is not otters:
			say "[reject]" instead;
		say "[if player has cinders]You can only discern the cinders--they will tell you what is most important to do next[else]You'd need to discern the cinders for that, and they're back at Bleary Barley[end if]." instead;
	if discern-warn is false:
		say "You feel sort of clever finding what to do with the cinders, but maybe you can be even cleverer, if you're a perfectionist and all[if ed riley is visible]. Plus, it seems a bit early[end if]. Discern anyway?";
		now discern-warn is true;
		unless the player yes-consents:
			say "Okay. This nag won't appear again." instead;
	if player is in alcoves and medals are reflexed and whistle is reflexed:
		say "Your destiny awaits to the west! You have everything you need." instead;
	if otters-cur-item is player:
		say "You're not able to discern anything right here and now. Maybe move somewhere with things you haven't tackled yet." instead;
	now spoilit is true;
	try otters-hinting;
	now spoilit is false instead;

[	if ed riley is visible:
		say "You discern Ed Riley could speak more reedily.";
	else if player is in bran barn:
		if macks are in frontage:
			say "You discern you don't really have Mr. Lee's trust. Maybe if you got rid of some obvious nastiness, like to the north, you could.";
			now do-i-dis is false;
		else:
			say "You discern an argument [if ghoul hat is in bran barn]going although...however[else]finishing HOWEVER[end if].";
	else if player is in loop pool and eels are visible:
		if macks are in frontage:
			say "You discern you haven't really proved yourself in these parts. Maybe if you got rid of some obvious nastiness, like to the south, you could.";
			now do-i-dis is false;
		else:
			say "You discern an argument [if sea cube is visible]going because...else[else]finishing ELSE[end if].";
	else if macks are visible:
		say "You listen to the macks and discern you could make them act and talk more [mack-actions].";
	else if sly imp is visible:
		say "You discern the imp would look ridiculous moving [rand-to-go].";
	else if whiners are visible:
		say "You discern the men could be less intimidating acting [rand-to-go].";
	else if player is in perverse preserve:
		if raptor is visible:
			say "You discern that the raptor could become a parrot[if power-back is false] with your powers back[end if].";
		else if nounsolve < 4:
			say "You discern what you can still rescue. [if racoon is off-stage]A racoon. [end if][if nails are in preserve]A snail. [end if][if thrones are in preserve]Hornets. [end if][if pines are in preserve]A snipe. [end if][line break]";
		else:
			now do-i-dis is false;
	else if player is in Lamer Realm:
		if owls are visible:
			say "You discern that you make the owls slow[if power-back is false] with your powers back[end if].";
		else if adjsolve < 4:
			say "You discern which animals can get which help. [if leopard is reflexive]The leopard can be PAROLED. [end if][if ocelots are reflexive]The ocelots can become the COOLEST. [end if][if satyr is reflexive]The satyr can become ARTSY. [end if][if badger is reflexive]The badger can be GARBED. [end if][line break]";
		else:
			now do-i-dis is false;
	else if player is in alcoves:
		if parrot is in alcoves:
			say "[if Merle is reflexive]Merle and Elmer's on-the-sly-ness is too sly to discern, though you may not need to. Also, y[else]Y[end if]ou discern the parrot can become a RAPTOR again.";
		else if Merle is in alcoves and Merle is reflexive:
			say "There might be a way to make them less annoying, but you discern that annoying isn't as bad as evil, so you won't get wrapped up in their hang-ups.";
			now do-i-dis is false;
	else if parrot is in lalaland and medals are reflexive:
		say "You discern you need to [if player is not in alcoves]go to the alcoves and [end if]see the medals can make you go QUICKLY.";
	else if player has whistle:
		if whistle is reflexive:
			say "You discern you may need [if player is in Inclosure]to leave the inclosure [end if]to see how to make the whistle play DEEPLY.";
		else if nounsolve < 3 or adjsolve < 3:
			say "You discern you may not have enough allies after you blow the whistle and have them go quickly. You left some behind in [if nounsolve > 3]the Lamer Realm[else if adjsolve >= 3]the preserves[else]the preserves and Lamer Realm[end if].";
			now do-i-dis is false;
		else:
			say "You discern you need to play the whistle [if player is in Inclosure]here[else]in the inclosure[end if].";
	else:
		now do-i-dis is false;
	if do-i-dis is false:
		say "The cinders do not dissolve or blow away. Looks like they had nothing super-profound for you to discern." instead;
	say "[line break]The cinders blow away, having imparted knowledge.";
	prevent undo;
	now undo-code is 7;
	poss-d;
	now cinders are in lalaland;
	the rule succeeds.]

book coevals' alcoves

Coevals' Alcoves is a room in Otters. Alcoves is west of frontage. "A monstery monastery. Laminas of mythical or extinct animals populate the walls here, along with a forces fresco. You can go back out to the east, or in to the west, if you dare."

check going when player is in alcoves:
	if noun is inside:
		try going west instead;
	if noun is outside:
		try going east instead;

the forces fresco is scenery in Coevals' Alcoves. description of forces fresco is "One glance tells you it deserves an f-score, with or without recs of disturbing violence and amorality."

instead of doing something with the forces fresco:
	if current action is examining, continue the action;
		say "The fresco is just there to taunt and annoy people not aligned with Elvira."

the laminas are useless scenery in Coevals' Alcoves. "Disturbing, really. They depict bizarre mutants designed for warfare, for keeping people down. They're signed, unsurprisingly, VELASCO.". understand "animals/lamina/animal" as laminas.

instead of doing something with laminas:
	if action is procedural, continue the action;
	say "The laminas are just part of the whole bad-guy ambiance.";

check going east in alcoves:
	if medals are reflexed and Inclosure is unvisited:
		say "You don't know when your super-speed will wear off. You'd hate to waste it where you've already been." instead;

chapter elmer and merle

Elmer is an auxiliary person in Alcoves. Elmer is henchy.

Merle is a reflexive LLPish person in Alcoves. Merle is henchy. The chum of Merle is Elmer.

a-text of Merle is "RYRYRRRO". b-text of Merle is "RYRYRRRO". parse-text of merle is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]x[sp]y".

a-text of Elmer is "RYRYRRRO". b-text of Elmer is "RYRYRRRO". parse-text of elmer is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]x[sp]y".

to say e-m:
	say "[one of]Merle[or]Elmer[in random order]";

initial appearance of Elmer is "[bug-report]".
initial appearance of Merle is "[bug-report]".

rule for printing a locale paragraph about Elmer:
	say "Elmer and Merle, two robed bored Coevals in scowl cowls, glance over at you contemptuously as they babble.";
	now Merle is mentioned;
	now Elmer is mentioned;

description of Elmer is "He wears sober robes. His mouth smiles on the left and frowns on the right."

description of Merle is "He wears sober robes. His mouth smiles on the right and frowns on the left."

the sober robes are plural-named scenery in Coevals' Alcoves.

instead of doing something to sober robes:
	if action is procedural, continue the action;
	say "Elmer and Merle, noticing you looking at their robes, yell 'Us? Drab? Absurd!'"

description of sober robes is "Elmer and Merle don't stylize zestily."

book bleary barley

to say if-ed:
	say "[if ed riley is in bleary barley]You can go west past where Ed Riley was[else]Ed Riley is still blocking the way west[end if]"

Bleary Barley is a room in Otters. "[if b-b is reflexive]Bleary Barley blocks you completely, stretching out seamlessly, endlessly[else][if-ed], and though the barley's too thick to the east, north and south are okay[end if]."

printed name of Bleary Barley is "[if nude dune is in bleary barley]Burnt Brunt[else]Bleary Barley[end if]"

check going east in Bleary Barley when b-b is reflexed:
	say "The barley is a bit too thick that way[if ed riley is in Bleary Barley]--it almost looks more like marsh plants than barley[end if]." instead;

[glow red as you want to get rid of them]

last-loc of otters is Bleary Barley.

check going in Bleary Barley:
	if noun is up or noun is down:
		continue the action;
	if b-b is reflexive:
		say "The barley is nearly everywhere. Without knowing where you're going, you'll get lost." instead;
	if Ed Riley is visible:
		if noun is south or noun is north:
			say "Ed Riley booms, 'Yielder! That's right. Go [noun]. Not west.'";
			continue the action;

chapter b-b

b-b is privately-named proper-named reflexive scenery in Bleary Barley. the printed name of b-b is "the bleary barley". understand "bleary/barley" and "barley" as b-b. "[if b-b is reflexed]Not so impressive now--it might be a mirage, but it looks like the barley to the east is on water, and thicker-yellow on top. It reminds you of a marsh[otherwise]It ranges expansively--but the weird thing is, it hasn't flowered. Very bleary though[end if]."

after fliptoing b-b:
	set the pronoun them to cinders;
	set the pronoun him to Ed Riley;
	continue the action;

does the player mean gotothinging b-b:
	if mrlp is otters:
		it is very likely;
	it is very unlikely.

a-text of b-b is "RYRYRO". b-text of b-b is "P??YRB". parse-text of b-b is "b[sp]?[sp]?[sp]e[sp]l[sp]y". b-b is cheat-spoilable.

instead of taking b-b:
	say "[if b-b is reflexed]It'll be barely useful[otherwise]Your inventory doesn't expand infinitely[end if]."

chapter nude dune

the nude dune is useless scenery. "It is impressive and blocks your way east."

instead of doing something with nude dune:
	if action is procedural, continue the action;
	if current action is entering, say "That would END U. See what I did there?" instead;
	if current action is climbing, say "There's nothing on the other side. You would probably just slide back down if you tried to climb it" instead;
	say "The dune is just there, blocking your way east. And you don't need to go east."

chapter Ed Riley

Ed Riley is a vanishing man. description is "'You won't get past Ed Riley, yielder!' he booms. For all this bluster, you get the feeling his loud voice hides an insecurity.". "Ed Riley acts as a steward here to keep you eastward. He is carrying an ER, YIELD sign and a loaf of deli rye."

check taking ed riley:
	say "Ed Riley raises up on his toes and booms 'I'm no YIELDER!'" instead;

check taking deli rye:
	say "Ed Riley snatches it away forcefully. 'I'm no YIELDER!'" instead;

the deli rye is an edible auxiliary thing. description is "It looks delicious enough for Ed not to share with you.". Ed Riley carries the deli rye.

a-text of deli rye is "RYYRYRO". b-text of deli rye is "RGYRYRO". parse-text of deli rye is "x[sp]e[sp]-[sp]x[sp]-[sp]l[sp]y". deli rye is cheat-spoilable.

instead of doing something with Ed Riley:
	if action is procedural, continue the action;
	if current action is taking:
		continue the action;
	if current action is objasking about or current action is asking about:
		continue the action;
	say "You probably don't need much more than your usual tricks to get past him. Even in your diminished state."

understand "yielder" and "steward" as Ed Riley.

a-text of ed riley is "RYYRYRO". b-text of ed riley is "RYYRYRB". parse-text of ed riley is "x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]y".

the Er Yield sign is an auxiliary thing. Ed Riley carries the yield sign.

a-text of er yield is "RYYRYRO". b-text of er yield is "RYYRYPO". parse-text of er yield is "x[sp]-[sp]-[sp]x[sp]-[sp]l[sp]y".

the description of the er yield sign is "'Spiffy, huh? I was told I could wipe off the 'er' for the first person I scared into not passing me for good.'"

to say ed-nonsense:
	say "[one of], and then he bangs on about not trying to sing or attack him[or][or][or][cycling]"

check going west in Bleary Barley:
	if Ed Riley is visible:
		say "'I will not re-yield! I am no longer a yielder! Ye Idler!' booms Ed Riley[ed-nonsense].[paragraph break]He's not bigger than you, but his loud voice scares you. And he could probably swat you with either that deli rye or er, yield sign. You back away." instead;

the weltish whistle is a reflexive thing. description is "It's ugly, that's for sure, but [if parrot wears whistle]the parrot isn't carrying it around for nothing[else if whistle is reflexive]you can probably PLAY it and practice to figure how to use it[else]you do know how to PLAY it, and that's something[end if]. It reads DISCOURAGE-SCOURGE AID. WHISTLES: SHE WILTS. Red writing indicates who crafted it.";

after printing the name of the whistle while taking inventory:
	say " ([if whistle is reflexed]which you know how[else if whistle-play is true]which you tried and failed[else]which you haven't tried[end if] to play)";

a-text of whistle is "RYYRRO". b-text of whistle is "RGYPRO". parse-text of whistle is "x[sp]e[sp]e[sp]p[sp]x[sp]y". whistle is cheat-spoilable.

check fliptoing the whistle when whistle is reflexive:
	if Elvira is visible:
		say "Elvira summons her monsters to attack as you learn to play the whistle. 'Sorriest resistor! Apt end, pedant.' is the last you hear. Maybe you should've practiced somewhere else.";
		get-dead;
		follow the shutdown rules instead;
	if number of visible people > 1:
		say "Your practicing might be rough on [a random npcish person]. Maybe you should go back to the Frat-Gone Frontage[if merle is in lalaland] or the Alcoves[end if][if player is in alcoves], or find a way to get rid of everyone else[end if]." instead;

definition: a person (called pe) is npcish:
	if pe is the player, decide no;
	if location of pe is the location of the player, decide yes;
	decide no;

does the player mean playing the whistle: it is very likely.

instead of taking whistle when parrot has the whistle:
	say "'Awk! I like you, but not [']til I've had my revenge.'"

chapter blowing

blowing is an action applying to one thing.

understand the command "blow" as something new.

understand "blow [something]" as blowing.

carry out blowing:
	if noun is harmonicas or noun is whistle:
		try playing the noun instead;
	if noun is a person:
		say "You don't really want an STD that leads to DTs." instead;
	say "That's not an instrument." instead;

chapter playing

playing is an action applying to one thing.

understand the command "play" as something new.

understand "play [something]" as playing.

whistle-play is a truth state that varies;

carry out playing:
	if noun is sitar:
		say "Your attempt at music does not provide the way to heaven." instead;
	if noun is saver:
		try pushing repeat button instead;
	if noun is harmonicas:
		say "I'll have to stem that. Your playing's the pits. Music, not game playing." instead;
	if noun is whistle:
		if parrot has whistle:
			say "Not while the parrot has it." instead;
		if whistle is reflexive:
			if location of player is Reclusion Inclosure:
				say "Elvira looks momentarily worried as you blow on the whistle, then gives laugh more musical than your unpracticed playing. '[randbla]!' As you fall, you hear Elvira giggle '[if player is female]Hereon, [b]I[r], heroine[else]I Master A Mister[end if].'";
				get-dead;
				follow the shutdown rules instead;
			now whistle-play is true;
			say "A horrible noise[one of][or] again[stopping], as if someone [i]yelped[r][one of]. You can't put up with it more than a split-second, and you probably need to figure how to make a more tolerable, less shrill sound[or]. Hm, how to lower the pitch[stopping]." instead;
		if location of player is Reclusion Inclosure:
			if nounsolve + adjsolve is 0:
				say "Elvira looks momentarily worried, then giggles sardonically as nothing happens on your end. Plenty happens on hers. 'Ah, treat a threat.' Maybe you need some help?";
				get-dead;
				follow the shutdown rules instead;
			abide by the check final region action rule for Elvira;
			if the rule failed:
				say "OK." instead;
			say "As you blow the whistle, you feel a deep vibration on the ground. You hear a cacophony of animal noises in the distance. '[randbla]!' Elvira's voice still lilts as she calls for slayer layers relays. 'Gash, hags! Groupies, uprise! Go!'[paragraph break]'Ahh, get the hag!' you yell. The battle is on!";
			say "[lee-or-eels][wfak]";
			say "Elvira cries 'New aid? Naw, die!' then 'To arms! A storm!' at...all the lethal: [twiddle of table of elvira machines and 3]. 'No mischance mechanics on...'[paragraph break]But animals from the fabled Odd Pack Paddock construe trounces and rifest strife: [twiddle of table of animal friends and 5]. Even ticks stick to Elvira's monsters and manage to triage a tiger, too. You see her wit wither, writhe, grow whiter. 'Strafe faster! Ye slack lackeys!' She and her creations fall with a prime thud as you triumph in their dump. The fiendish is FINISHED--influential, until...FINALE.";
			now otters is solved;
			now last-solved-region is otters;
			first-status;
			say "Elmo and Gretta are waiting for you back at the Means Manse with I knew you could do it, etc. But they're wondering--there's a fellow who might need a little help in peacetime. Maybe you could [b]ROVE OVER[r] and help him. If you need a break, no problem, but maybe you might want a little more adventure?";
			unless the player direct-consents:
				say "Yeah. Maybe later. If you want to help him, you can [b]ROVE OVER[r] from your Dusty Study next time someone knocks. Or you can just UNDO at the next command.";
				note-denial;
				end the story finally saying "A MONSTER ROTS. AMEN.";
				follow the shutdown rules instead;
			say "Yeah. You've got nothing pressing back at the Means Manse. But it's probably a good idea to keep the settler and notepad. The whistle and medals will go to a museum, or something.[paragraph break]The animals escort you to the Strip of Profits.";
			note-denial;
			clean-for-roving;
			continue the action;
		else:
			say "You don't need to call anyone in this area." instead;
	say "That doesn't seem like a toy or an instrument." instead;
	the rule succeeds;

to note-denial:
	ital-say "also, LEAD IN/LEADIN DENIAL sends you to the Strip of Profits, and LEAD IN/LEADIN DENIAL NAILED sends you there with Otters available.";

to say lee-or-eels:
	say "[wfak]";
	if p-2 is in lalaland:
		if eels are in lalaland:
			say "You're surprised to see Mr. Lee and the eels together, 'LEE'S EELS,' alongside--yes, Gretta with animals of her own.";
		else:
			say "Some eels tag long behind Mr. Lee. You [if loop pool is visited]don't recognize them[else]look away sheepishly--you didn't convince them[end if], and they glare briefly as if to say, you should've TOLD us about the fun.";
	else:
		say "A man tags along behind the eels you rescued. [if bran barn is visited]It's Mr. Lee, whom you couldn't befriend[hat-gone], but he salutes you in half-apology[else]It's Mr. Lee! He salutes you, and he's little more than a spectator, but he smiles at the machine-slaughter he hopes is ahead.";

to clean-for-roving:
	now roved is true;
	if mangiest steaming is in strip:
		move mangiest steaming to lalaland;
	if tokers are in strip:
		move tokers to lalaland;
	if nestor is in strip:
		move nestor to lalaland;
	move otters-x to lalaland;
	move whistle to lalaland;
	move medals to lalaland;
	move magneto to lalaland;
	move player to strip of profits;
	if number of portals in strip of profits > 0:
		say "Moving [list of portals in strip of profits] out of the Strip. They shouldn't be there.";
		repeat with myport running through portals in strip of profits:
			if myport is not hoster:
				move myport to lalaland;

to say hat-gone:
	say "[if ghoul hat is in lalaland] despite zapping that ghoul hat[else], though his ghoul hat's gone[end if]";

chapter whistleing

whistleing is an action applying to nothing.

understand the command "whistle" as something new.

understand "whistle" as whistleing.

carry out whistleing:
	if parrot is visible:
		say "You try to drop a hint for the parrot to give you the whistle, but he croaks for revenge." instead;
	if player does not have whistle:
		say "Music is not your talents. You'd need an instrument." instead;
	try playing the whistle instead;

book Frontage

frontage is west of Bleary Barley. frontage is a room in Otters. "This crossroad is [if Gretta is visible]thickly populated with men talking loudly and 'excitingly,' trying to impress [one of]one woman[or]Gretta Garett-Tatger[stopping][else]empty now you dispersed the macks[end if]. Elvira's Edictal Citadel is to the west[if alcoves is unvisited], too big to hide nothing[else if Inclosure is unvisited], with much more than the alcoves you've seen[end if][if atmo-moat is in frontage]. A moat blocks entry right now[end if]. You can go, more safely, back east or [if loop pool is visited or bran barn is visited]re-[end if]check what's north or south[if power-back is true], not that you need to[end if]."

after looking in frontage:
	if macks are in frontage:
		set the pronoun them to macks;
		set the pronoun her to gretta;
	continue the action;

printed name of frontage is "[if Gretta is in frontage]Gent-Fora Frontage[else]Frat-Gone Frontage[end if]"

the atmo-moat is vanishing scenery in frontage. understand "atmo/moat" and "atmo moat" as atmo-moat. "Nothing subtle, no bustle. It's not the bluest you've seen water--in fact, for a moat, it's really red."

a-text of atmo-moat is "YRYR". b-text of atmo-moat is "??YR". parse-text of atmo-moat is "-[sp]x[sp]O[sp]M". atmo-moat is parse-spoilable.

Include (-
	has transparent animate
-) when defining atmo-moat.

instead of drinking atmo-moat:
	say "A chorale warns that you might get cholera.";

instead of entering atmo-moat:
	say "It's too gulfy. Things'd get fugly. You've no diver pod provided. Plus you might get poked by strident tridents."

check fliptoing atmo-moat:
	if macks are in frontage:
		say "That'd definitely tip the macks off to who you were, even if your powers were back.";
		preef atmo-moat;
		do nothing instead;
	else if power-back is false:
		say "That seems like it should work, but you just can't summon the power. Someone here should be able to help you, you hope.";
		preef atmo-moat;
		do nothing instead;

after printing the locale description for frontage when frontage is unvisited:
	if do-i-chat is true:
		now macks are in lalaland;
		now all mack-ideas are in lalaland;
		try talking to gretta;
		the rule succeeds;
	say "[line break]But whatever they call themselves, you know macks['] M.O. Jump from subject to subject, to seem 'exciting,' and capitalize on when people give the benefit of the doubt. Still, there's always a hole in their 'impressive' stories--and even if you realize it a few turns later, you can drain their perseverance."

the Edictal Citadel is a backdrop in frontage. "It takes up a huge chunk of space to the west."

instead of doing something with the Edictal Citadel:
	unless the action is procedural:
		say "[if player is in alcoves or player is in Inclosure]Being inside the Edictal Citadel, you can't do much TO it[else]Not much to do with the Edictal Citadel but look at it and realize it must be protected for a reason[end if]." instead;
	continue the action;

the sad elm is useless scenery in frontage. description is "It was probably sad before the macks came along, but it's not really important."

instead of climbing sad elm:
	if Gretta is visible:
		say "You can beat [']em, so don't join [']em trying to impress her.";
	else:
		say "Yorpwald's still up a tree. Don't join it."

the macks are plural-named flippable reflexive people in frontage. description is "'[if player is male]You can watch, but you won't LEARN[else]We're not trying to impress YOU. Geez[end if].' Their looks aren't so important--but they seem to be rotating through subjects quickly, and maybe you could catch them out on the right one. Given what you've done so far here, well, there'll be certain restrictions on what you can do--and that might actually help you narrow things down.". "Macks dressed all coy-hued are here, [if macked-out is 0]completely besieging[else if macked-out is 1]still trying to impress[else]anxiously trying to captivate[end if] Gretta."

understand "mack" as macks.

a-text of macks is "BUG". b-text of macks is "BUG". parse-text is "BUG".

rule for printing a locale paragraph about macks:
	say "[one of]Wait a minute. You think you recognize whom the macks are trying to impress. It's that lady from the picture Elmo showed you: Gretta Garett-Tatger! Their pick-up lines and stories are just horrible, but their technique keeps them afloat. But that's how it is, with macks. Or whatever annoying flirters are called these days. And, well, if she ran, they'd probably cut her off[or]The macks continue trying to impress Gretta[how-macked][stopping].";
	now Gretta is mentioned;
	now macks are mentioned;

to say how-macked:
	if macked-out is 1:
		say ", though not as much as when they started, since you got them";
	else if macked-out is 2:
		say ", but they're wavering a bit. If you blow up their flow once more, you could probably get rid of them"

Gretta Garett-Tatger is a female person in frontage. "[bug-report]". description of Gretta is "She seems to be cringing at the pick-up lies, or the prospect she will let one work so she doesn't have to listen to them anymore."

before doing something when Gretta is visible and macks are not visible:
	if current action is examining:
		say "You should probably talk with Gretta Garett-Tatger a bit." instead;
	if current action is attacking:
		say "She's on your side." instead;
	if action is blathery:
		say "She's heard enough rambling conversation on others['] terms, here." instead;
	if current action is discerning:
		say "That can wait until you've finished talking." instead;
	if current action is not talking to Gretta and current action is not QBC responding with:
		say "[convoforce].";
		reject the player's command;
	continue the action.

the litany of Gretta Garett-Tatger is the table of Gretta comments.

to say but-stuck:
	say "[if try-fail-animal], but I got chased after that[end if]"

table of Gretta comments [tco-gr]
prompt	response	enabled
"Boy, those macks, huh?"	gre-macks-quip	1
"What's your history with Elvira?"	gre-elv-quip	0
"I sort of lost my powers. Well, most of them. What can I do now?"	gre-what-quip	0
"[if loop pool is visited]What can I do with the pool[else]What's[end if] to the north?"	gre-north-quip	0
"[if bran barn is visited]What can I do in the barn[else]What's[end if] to the south?"	gre-south-quip	0
"What can I do back east[if sly imp is in lalaland or whiners are in lalaland]? I got rid of some nuisances[but-stuck].[else]?[end if]"	gre-east-quip	0
"Rescuing animals? How?"	gre-animals-quip	0
"[if optleft of Gretta is 1]Wow! You've been a big help[else if gre-go-warn is true]That's really all, now[else]Um, that's all, I guess[end if]. Thanks."	gre-go-quip	0

table of quip texts (continued) [tqt-gr]
quip	quiptext
gre-macks-quip	"She introduces herself as Gretta. 'I was just trying to explain what Elvira's about, why to fight her. They started telling me they were all socially conscious--then they started hitting on me.' It's true--Elvira's brand of 'magic without magic,' which places excitement over boring honesty, has been captured in the horrid [i]OK, Be Hot: The Book[r], by Beth Koo and Theo Bok. It mentions anyone can learn its techniques--sadly, that's the truest part of the book by far.[paragraph break]You let slip it's the sort of word twisting that you can't and won't do. She pauses, then realizes how you managed to disrupt the macks without doing anything. You're that Shuffling Around person, with those powers. 'Hmm, I guess Elvira hates you even more than she hates me. I mean, she actually said I was almost as bad as you, to my face.'" [start GRETTA text]
gre-elv-quip	"'Elvira backstabbed me. [']A nice gal? An ICE gal!['] Being called a gal was bad enough. But she used to rent the Edictal Citadel from me. Then SHATTER-THREATS somehow let her not pay rent in the name of national security. Then own it. It's hard to get ONE person to go up there, much less many. I found out she's--well, [i]augmenting[r] animals.'"
gre-what-quip	"'You can't rely on people coming together. They're either too scared to resist, or too eager to kiss up. But animals might be willing to help. She's still training the ones she made.' Gretta looks nervously around."
gre-north-quip	"'Maybe you will figure how to help the eels to the north and their spirit, Le Mer. They're suspicious of people, though, after Elvira failed to recruit them.'"
gre-south-quip	"'Mr. Lee is ready to blame his failed crops on anyone. Elvira's got him convinced it's not her, but if you help him, he could be swayed back. Plus, he's a farmer, so, more animals.'"
gre-east-quip	"'There are animal pens back east.' [if Anteroom is visited and Tapering Anger Pit is visited]You nod your head[else if Anteroom is unvisited and Tapering Anger Pit is unvisited]You cough a bit, realizing you didn't look there[else]You make a note to check the other pen[end if]. 'Perhaps animals can succeed where people failed, because Elvira won't be able to charm them with words. Well, not all of them. She captured and changed some, but you'd win their gratitude--and their friends[']--if you changed them back. Even, or especially, the ones guarding the pens.'"
gre-animals-quip	"'The animals aren't just imprisoned but reduced to mockeries of their real selves--whether they know it or not. Maybe one reason she wanted to discredit you was, you might be able to change them back.'"
gre-go-quip	"[if hold-it-up is false]'Here. Take these. They are ancient emblems of magic and power--damsel medals--from long before people cringed at words like damsel.' She removes her medals and hands them to you. '[gre-other].' She nods and walks off[check-started-yet].[end if]" [end GRETTA text]

to decide which number is optleft of (myp - a person):
	let mytemp be 0;
	let myt be the litany of myp;
	repeat through myt:
		increase mytemp by enabled entry;
	decide on mytemp;

after quipping when qbc_litany is the table of Gretta comments:
	if hold-it-up is true:
		now hold-it-up is false;
		enact gre-go-quip;
		continue the action;
	if current quip is gre-macks-quip:
		enact gre-elv-quip;
		enact gre-what-quip;
		enact gre-go-quip;
	else if current quip is gre-elv-quip or current quip is gre-what-quip:
		if gre-elv-quip is mowered or gre-what-quip is mowered: [this seems a bit odd, but marking a quip as mowered doesn't happen til the "after quipping" which fires afterwards]
			say "'Not everyone here loves Elvira. Some are willing to help, if they're just treated right. I can tell you who, or what's, where.' Gretta looks around, worried the macks will narc her out to Elvira, even though none of them headed west to the Edictal Citadel, but you can probably grill her for quick information.[paragraph break]";
			enact gre-north-quip;
			enact gre-east-quip;
			enact gre-south-quip;
	else if current quip is gre-east-quip:
		enact gre-animals-quip;
	else if current quip is gre-animals-quip:
		do nothing;
	else if current quip is gre-go-quip:
		terminate the conversation;
		now the player wears medals;
		now Gretta is in lalaland;
		if do-i-chat is true:
			now hydra is in lalaland;
			now whistle is reflexed;
			move player to inclosure;
	else if current quip is gre-north-quip or current quip is gre-south-quip or current quip is gre-elv-quip:
		do nothing;
	else:
		debug-fallthrough;

chapter smacking

smacking is an action applying to one thing.

understand the command "smack" as something new.

understand "smack [thing]" as smacking.

does the player mean smacking the macks: it is likely.

carry out smacking:
	if noun is macks:
		say "They really, really deserve it, but keep your cool. Smack their arguments down instead and they may smack each other for you." instead;
	try attacking noun instead;
	the rule succeeds;

chapter medals

the medals are a reflexive wearable plural-named thing.

understand "iq/lucky medal/medals" and "iq/lucky" as medals.

after printing the name of medals while taking inventory:
	say "([if nounsolve is adjsolve]both [entry (adjsolve + 1) in medalings][else if nounsolve < adjsolve][entry (adjsolve + 1) in medalings] and [entry (nounsolve + 1) in medalings][else][entry (adjsolve + 1) in medalings] and [entry (nounsolve + 1) in medalings][end if])";

medalings is a list of text variable. medalings is { "crusted over", "grimy", "dull", "shiny", "gleaming" }

description of the medals is "They're roped together. [medal-summary]."

to say medal-summary:
	if medals-lucky-first is true:
		say "The larger, [tarn of adjsolve]tarnished, says LUCKY. ";
	say "The smaller, [tarn of nounsolve]oxidized, says IQ";
	if medals-lucky-first is false:
		say ". The larger, [tarn of adjsolve]tarnished, says LUCKY";

to say tarn of (tlev - a number):
	say "[if tlev is 0]extremely [else if tlev is 1]very [else if tlev is 2]somewhat [else if tlev is 3]barely [else if tlev is 4]un[else]BUG[end if]";

medals-lucky-first is a truth state that varies.

check switching on the medals:
	med-flip instead;

check switching off the medals:
	med-flip instead;

to med-flip:
	unless the player's command matches the regular expression "\b(on|off)\b":
		say "(Okay, silly parser stuff--just switch the medals)";
	say "You switch the medals so the [if medals-lucky-first is true]larger[else]smaller[end if] is on the right.";
	if medals-lucky-first is false:
		now medals-lucky-first is true;
	else:
		now medals-lucky-first is false;
	the rule succeeds;

nounsolve is a number that varies.
adjsolve is a number that varies.

check scaning medals:
	if nounsolve < 3 or adjsolve < 3:
		say "The settler reads oddly for a while but doesn't show anything. Maybe you need to reveal the medals some more." instead;

a-text of medals is "RYYRRRO". b-text of medals is "[if medals-lucky-first is true]RGYRRRO[else]RYYRRRB[end if]". parse-text of medals is "[if medals-lucky-first is false]x[sp]-[sp]-[sp]x[sp]x[sp]x[sp]y[else]x[sp]u[sp]i[sp]x[sp]x[sp]x[sp]y[end if]".

chapter mack flipping

ladying is an action applying to nothing.

irately is a truth state that varies.

check fliptoing a mack-idea (this is the NO ESP rule):
	if debug-state is true:
		continue the action;
	if noun is not ment:
		say "[ly-ish]." instead;

after fliptoing a mack-idea:
	if uber-rand-cheat is true:
		if number of mack-ideas in frontage is 0:
			say "You're done!";
			now macks are in lalaland;
			try talking to Gretta;
			continue the action;
		else:
			say "Skipping standard text as we're just wiping the macks.";
			continue the action;
	if noun is t-tearily-irately:
		if the player's command matches "irately":
			now irately is true;
	if noun is not ment:
		say "(Wow, you did this without seeing the macks act anything like that!) ";
	increment macked-out;
	if macked-out is 1:
		say "Gretta looks a bit unsure but less engaged than before, and the macks seem off-stride and unenthusiastic.";
	otherwise if macked-out is 2:
		say "Gretta nods, able to reject the worst of the macks['] bragging, but she still listens, likely out of cognitive dissonance. Strike two for the macks.";
	otherwise:
		say "Suddenly, Gretta realizes zeal is, er, SLEAZIER. 'The balls! All the BS!'[paragraph break]Their preludes repulsed, they shuffle off all 'Man hater mantra, eh? Yum, so mousy. A dim maid. Hotness she's not!' as a beastly last 'bye,' to a beer hall, label her only worth trifling flirting. Their lustin['] becomes insult, but you look steely, as if saying 'Lest Ye!' Even to the heckling lech-king.[paragraph break]Gretta Garett-Tatger thanks you for saving her. She shuffles her feet a bit, unsure whether to leave or stay. She must have had a reason to hang around the Edictal Citadel in the first place. But you can't ask that straight out.";
		now hold-it-up is true;
		now macks are in lalaland;
		now all mack-ideas are in lalaland;
		try talking to Gretta;
		continue the action;
	consider the macks hitting on rule;
	if debug-state is true and noun is not ment:
		say "NOTE: The player can't have known this yet, but since you're testing, I'll let it fly.";
		continue the action;
	continue the action;

macked-out is a number that varies. macked-out is usually 0.

check talking to Gretta when macks are in frontage:
	say "The macks are monopolizing the conversation. They outnumber you." instead;

check going in frontage when Gretta is visible:
	if noun is north or noun is south or noun is east:
		say "[cree-pee].";

to say cree-pee:
	say "A few macks [if player is male]laugh at how you obviously can't give Gretta Garett-Tatger the attention they can[else]let Gretta Garett-Tatger know she's more worth impressing than you[end if] as you leave"

check taking atmo-moat:
	say "Way too big." instead;

check going west in frontage:
	if macks are in frontage:
		say "One of the macks stops you from tripping the atmo-moat, and he tries to convince Gretta he's a great guy for saving you. The others yell at him for trying to play hero too obviously." instead;
	if atmo-moat is in frontage:
		say "The moat just--scares you. It's too red, and when you recognize it as an atmo-moat, it turns blue, but it's still scary." instead;
	if Gretta is visible:
		say "[cree-pee]." instead;

chapter nasty things guys do

to decide which number is mack-count of (mc - a number):
	let temp be 0;
	repeat with QQ running through mack-ideas:
		if pod-num of QQ is mc:
			increment temp;
	decide on temp.

to place-a-mack (x1 - a number) and (x2 - a number):
	let one-yet be false;
	repeat with XX running through mack-ideas:
		if pod-num of XX is x1 and pod-ord of XX is x2:
			if one-yet is true:
				say "Oops [XX] is a duplicate.";
			else:
				now XX is in frontage;
				now one-yet is true;
	if one-yet is false:
		say "Oops [x1] pod [x2] ord had no mack idea.";

when play begins (this is the mack-randomize rule):
	let my-wt be 0;
	repeat with X running from 1 to max-pod-num:
		now cur-pod-num is X;
		let G be the mack-count of X;
		[say "[G] mack things in pod [X + 6].";]
		let H be a random number from 1 to G;
		place-a-mack X and H;
	assign-random-mack-priority;
	now cur-pod-num is 0;

definition: a mack-idea (called mm) is unprioritized:
	if mack-prio of mm is 0 and mm is in frontage:
		decide yes;
	decide no;

to assign-fixed-mack-priority:
	now cur-mack-blab is 0;
	repeat with B running through mack-ideas:
		if B is in frontage:
			now mack-prio of B is pod-num of B;

to assign-random-mack-priority:
	now cur-mack-blab is 0;
	repeat with B running through mack-ideas:
		now mack-prio of B is 0;
	let C be number of mack-ideas in frontage; [should be 7, but yeah]
	repeat with B running from 1 to C:
		let thismack be a random unprioritized mack-idea;
		now mack-prio of thismack is B;

a mack-idea is a kind of undesc. a mack-idea is usually privately-named. a mack-idea is usually reflexive. a mack-idea is usually unscannable. a mack-idea has a number called pod-num. a mack-idea has a number called pod-ord. a mack-idea has text called mack-move. a mack-idea has text called mack-brief.

rule for deciding whether all includes mack-ideas:
	it does not.

a mack-idea has a number called mack-prio. mack-prio of a mack-idea is usually 0. a mack-idea is usually abstract.

a mack-idea can be ment. a mack-idea is usually not ment. a mack-idea can be passed-on. a mack-idea is usually not passed-on.

max-pod-num is a number that varies. max-pod-num is 7. cur-mack-blab is a number that varies. cur-mack-blab is 0.

current-idea is a mack-idea that varies. cur-pod-num is a number that varies. ever-loop-mack is a truth state that varies.

For printing a locale paragraph about a mack-idea (called the item):
	set the locale priority of the item to 0;
	continue the activity.

[pod 1 is 7-letters repeating]
t-bossily is a mack-idea. pod-num is 1. pod-ord is 1. a-text is "RYRRYRO". b-text is "RYRRYRO". parse-text is "x[sp]-[sp]s[sp]s[sp]-[sp]l[sp]y.". mack-move is "Fake plaintiveness makes you see red! 'I? Sly SOB? Si Bloy's...'". mack-brief is "acting bossily".

t-seedily is a mack-idea. pod-num is 1. pod-ord is 2. a-text of t-seedily is "RYYRYRO". b-text of t-seedily is "RYGRGRO". parse-text is "x[sp]e[sp]e[sp]x[sp]i[sp]l[sp]y". t-seedily is cheat-spoilable. mack-move is "A few macks do something stupid with their eyelids to get her attention.". mack-brief is "twiddling their eyelids".

t-cattily is a mack-idea. pod-num is 1. pod-ord is 3. a-text is "RYRRYRO". b-text is "RGRRYPB". parse-text is "x[sp]a[sp]x[sp]-[sp]x[sp]l[sp]y". mack-move is "Each mack discusses tacitly why he's got something the others don't.". mack-brief is "acting tacitly".

t-tearily-irately is a mack-idea.  pod-num is 1. pod-ord is 4. a-text is "??YRYRO". b-text is "??GR?RO". parse-text is "?[sp]?[sp]a[sp]x[sp][if cheat-on is true]?[else]-[end if][sp]l[sp]y". mack-move is "The macks ooze on about how women want companionship, as much as men, and that's REALITY. It seems they could be flustered two different ways, but they aren't close, yet.". mack-brief is "discussing reality".

[pod 2 is non-repeating 7-letters]
t-nastily is a mack-idea. pod-num is 2. pod-ord is 1. a-text is "RYRRYRO". b-text is "RGRRYPB". parse-text is "x[sp]a[sp]x[sp]x[sp]i[sp]l[sp]y". mack-move is "The macks suddenly start acting very saintly.". mack-brief is "acting saintly".

t-shadily is a mack-idea. pod-num is 2. pod-ord is 2. a-text is "RRYRYRO". b-text is "RRYRGRO". parse-text is "x[sp]x[sp]a[sp]x[sp]i[sp]x[sp]y". mack-move is "The macks try to talk about ladyish things and fob off any awkwardness in the conversation to simple honesty.". mack-brief is "seeming ladyish".

t-snidely is a mack-idea. pod-num is 2. pod-ord is 3. a-text is "RRYRYRO". b-text is "RRYPYRB". parse-text is "x[sp]x[sp]-[sp]d[sp]-[sp]x[sp]y". mack-move is "The macks blather about how she is better than Lindsey.". mack-brief is "negging Lindsey".

t-starkly is a mack-idea. pod-num is 2. pod-ord is 4. a-text is "RRYRRRO". b-text is "RRYRRRO". parse-text is "x[sp]x[sp]-[sp]x[sp]x[sp]l[sp]y". mack-move is "Some of the macks compare her to Krystal, being sort-of favorable to both. Still, it's icky.". mack-brief is "comparing Gretta and Krystal".

[pod 3 is 8-letters repeating]
t-blearily is a mack-idea. pod-num is 3. pod-ord is 1. a-text is "RRYYRYRO". b-text is "RRYYRYPB". parse-text is "x[sp]x[sp]-[sp]-[sp]x[sp]-[sp]l[sp]y". mack-move is "The macks cut each other off reliably, giving Gretta no time to reject them or point out they're not THAT exciting.". mack-brief is "interrupting each other reliably".

t-formally is a mack-idea. pod-num is 3. pod-ord is 2. a-text is "RYRRYRRO". b-text is "?YR?YRRO". parse-text is "x[sp]o[sp]x[sp]x[sp]a[sp]x[sp]l[sp]y". mack-move is "The macks manage to seem surprisingly fly, moral. Like Ally from 'My Floral', a 'premium' cable show so bad you turn red just thinking of it. But they've got the confidence and pace to pull it off, for now.". mack-brief is "acting too formally".

t-coitally is a mack-idea. pod-num is 3. pod-ord is 3. a-text is "RYYRYRRO". b-text is "RGYRYRRB". parse-text is "x[sp]o[sp]-[sp]x[sp]-[sp]x[sp]x[sp]y". mack-move is "The macks discuss how nice it is to meet her in this locality.". mack-brief is "'admiring' this locality".

t-ribaldly is a mack-idea. pod-num is 3. pod-ord is 4. a-text is "RYRYRRRO". b-text is "RYRYRRPB". parse-text is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]l[sp]y". mack-move is "The macks ask if she has been thinking bridally.". mack-brief is "talking bridally".

t-shabbily is a mack-idea. pod-num is 3. pod-ord is 5. a-text is "RRYRRYRO". b-text is "RRYRRYRO".  parse-text is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]l[sp]y". mack-move is "A mack, going for the intellectual angle, describes the atmosphere by his lab, and his friend from a BBS, Hal Yi. He...he has to have messed up some details, somewhere.". mack-brief is "describing things shabbily".

t-silently is a mack-idea. pod-num is 3. pod-ord is 6. a-text is "RYRYRRRO". b-text is "P**YRRRO". parse-text is "s[sp]?[sp]?[sp]-[sp]x[sp]x[sp]l[sp]y". mack-move is "The macks perform a disturbingly convincing snit-yell: a style nit over a joke at SillyNet.". mack-brief is "having a snit-yell".

t-shoddily is a mack-idea. pod-num is 3. pod-ord is 7. a-text is "RRYRRYRO". b-text is "RRYRRYRO". parse-text is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]l[sp]y". mack-move is "A tag-team effort. One mack gives an odd sly hi. The other replies 'Dish, Loyd!' It's ridiculous, but polished enough that they pull it off leaving you seeing red.".

t-suddenly is a mack-idea. pod-num is 3. pod-ord is 8. a-text is "RYRRYRRO". b-text is "RYRRYRRO". parse-text is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]l[sp]y". mack-move is "The macks incorporate the stylings of Desy Lund [']N Sly Dude, their perfect smooth timings making you see red.". mack-brief is "not stopping suddenly.".

[pod 4 is 8-letters non-repeating]
t-modestly is a mack-idea. pod-num is 4. pod-ord is 1. a-text is "RYRYRRRO". b-text is "RYRYRRRO". parse-text is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]l[sp]y". mack-move is "Three macks put on a production. 'Ed, my lost styledom! Yet old Ms...' 'Ty, sod...' / 'Mel!' It's over-the-top, but through seeing red you almost admire their courage.". mack-brief is "behaving fake-modestly".

t-steamily is a mack-idea. pod-num is 4. pod-ord is 2. a-text is "RRYYRYRO". b-text is "RRYYRY?O". parse-text is "x[sp]x[sp]-[sp]-[sp]x[sp]-[sp]l[sp]y". mack-move is "The macks claim they like May Islet Misty Ale for the taste and not the ridiculous commercials. It doesn't taste a bit like slimy tea!". mack-brief is "mis-discussing Misty Ale".

t-stupidly is a mack-idea. pod-num is 4. pod-ord is 3. a-text is "RRYRYRRO". b-text is "RRYRYRRO". parse-text is "x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]l[sp]y". mack-move is "One mack idly puts in a mention he doesn't let duty slip. 'I ply dust.' It's tidy, plus, and it makes you see all red.".

[pod 5 is 9 letters]
t-martially is a mack-idea. pod-num is 5. pod-ord is 1. a-text is "RYRRYYRRO". b-text is "PGPRYGPPB". parse-text is "m[sp]a[sp]r[sp]t[sp]i[sp]a[sp]l[sp]l[sp]y". mack-move is "Some of the macks even begin to talk maritally.". mack-brief is "blabbing maritally".

t-martially is parse-spoilable.

t-sincerely is a mack-idea. pod-num is 5. pod-ord is 2. a-text is "RYRRYRYRO". b-text is "RYRRYRYRO". parse-text of t-sincerely is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]l[sp]y". mack-move is "Someone shouts 'Celery's in, yes! [']N slice yer...' / 'Rec, Lin, yes!' You cringe and see red at how forced and fake it is.". mack-brief is "speaking too sincerely".

t-sobbingly is a mack-idea. pod-num is 5. pod-ord is 3. a-text is "RYRRYRRRO". b-text is "RGPPYRRRO". parse-text is "x[sp]o[sp]b[sp]b[sp]i[sp]x[sp]x[sp]x[sp]y". mack-move is "The macks continuing their lobbyings, far too cheery and confident.". mack-brief is "making lobbyings".

t-wearingly is a mack-idea. pod-num is 5. pod-ord is 4. a-text is "RYYRYRRRO". b-text is "RYYRYRRRO". parse-text is "x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]x[sp]x[sp]y". mack-move is "The macks begin lawyering about why she should probably choose ONE of them. You see red, a bit.". mack-brief is "lawyering".

t-tediously is a mack-idea. pod-num is 5. pod-ord is 5. a-text is "RYRYYYRRO". b-text is "RYRYYYRRO". parse-text is "x[sp]-[sp]x[sp]-[sp]-[sp]-[sp]x[sp]x[sp]y". mack-move is "Each mack discusses how he outyields someone else with a lousy diet, all, 'You! Idlest!' You see red.". mack-brief is "disparaging a lousy diet". [not alphabetical, but due to lazy coding I wand this last. Tediously has to disappear.]

[pod 6 is 10-11 letters.]
t-drawlingly is a mack-idea. pod-num is 6. pod-ord is 1. a-text is "RRYRRYRRRO". b-text is "PPYPRYRRRO". parse-text is "d[sp]r[sp]-[sp]w[sp]x[sp]-[sp]x[sp]x[sp]x[sp]y". mack-move is "Amazingly, the macks make projects like drywalling seem almost exciting--how competent they are, how incompetent some other guys are. Maybe it's just they're talking so fast, that they make [i]drywalling[r] interesting.". mack-brief is "blabbing about drywalling".

t-emotionally is a mack-idea. pod-num is 6. pod-ord is 2. a-text is "YRYRYYRYRRO". b-text is "YRYRYYRYRRO". parse-text is "-[sp]x[sp]-[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]x[sp]y". mack-move is "One mack, seizing the moment, asks 'YOLO Ailment? Oo, tally mine. I yell at moon.' The response: 'All? No time, yo.' But it's surprisingly subdued. You see red, anyway.". mack-brief is "behaving emotionally".

t-desperately is a mack-idea. pod-num is 6. pod-ord is 3. a-text is "RYRRYRYRYRO". b-text is "RYRRGRYRYRB". parse-text is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x[sp]y". mack-move is "The macks stare deeply as they discuss a variety of subjects. One that makes you see extra red is how Patsy leered.". mack-brief is "behaving desperately".

[pod5 is a trivial pod. You will always get "despairingly," but you will also get 2 7's and 2 8's]
t-despairingly is a mack-idea. pod-num is 7. pod-ord is 1. a-text is "RYRRYYRYRRRO". b-text is "RGRRYYRYRRRO". parse-text is "x[sp]e[sp]x[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]x[sp]x[sp]y". mack-move is "The macks begin redisplaying and redisplaying why they're so great.". mack-brief is "redisplaying their 'greatness'"

understand "msdp" as t-despairingly when debug-state is true.

to decide whether (n - a number) is unworkable:
	decide yes;

this is the find-mack-idea rule:
	repeat with QQ running through mack-ideas:
		if QQ is in frontage and mack-prio of QQ is cur-mack-blab:
			now current-idea is QQ;
			the rule succeeds;
	the rule fails;

to decide which mack-idea is mack-hint:
	let cur-prio be 10;
	let got-mack be false;
	let cur-mack be t-despairingly;
	repeat with QQ running through ment reflexive mack-ideas in frontage:
		d "Considering [QQ] for hints.";
		if mack-prio of QQ < cur-prio:
			d "Potentially choosing [QQ].";
			now cur-mack is QQ;
			now cur-prio is mack-prio of QQ;
			now got-mack is true;
	if got-mack is false:
		say "(BUG in mack-idea code) ";
	decide on cur-mack.

every turn when player is in frontage and macks are in frontage (this is the macks hitting on rule):
[	repeat with QQ running through reflexive mack-ideas in frontage:
		if debug-state is true:
			say "DEBUG NOTES: [qq]: [mack-prio of qq].";]
	let loop be false;
	while cur-pod-num is unworkable:
		increment cur-mack-blab;
		if cur-mack-blab > max-pod-num:
			if loop is true:
				say "The macks seem to be out of ideas! [bug-report]";
				continue the action;
			now loop is true;
			now cur-mack-blab is 1;
		consider the find-mack-idea rule;
		if the rule succeeded:
			if loop is true:
				if ever-loop-mack is false:
					now ever-loop-mack is true;
					say "The macks take a break. They've [one of][or]once again [stopping]babbled for long enough, and about enough, they can repeat their 'exciting' conversation all over again[if macked-out > 0], except for what you managed to alter[end if].[paragraph break]";
			now current-idea is ment;
			say "[mack-move of current-idea][line break]";
			continue the action;
	continue the action;

check scaning macks:
	try scaning current-idea instead;

book side passages

chapter Bran Barn

Bran Barn is an innie room in Otters. Bran Barn is south of frontage. "This is a bran barn, empty of grain right now, and it'll probably stay that way[if p-2 is in bran barn]. A painting covers a good chunk of the interior here[end if]. You can go back north."

Mr Lee is a person in Bran Barn. description is "He is one of those people you see nothing and everything special about at the same time[if alcoves is visited]. A less evil version of Merle and Elmer combined[end if].". "Mr. Lee stands here, undescribed."

Mr Lee wears the ghoul hat. printed name of Mr Lee is "Mr. Lee".

the ghoul hat is vanishing. description is "red and bloody and gruesome, it seems affixed to Mr. Lee. Maybe you can help it come loose, and Mr. Lee would appreciate that."

lee-yet is a truth state that varies.

for printing a locale paragraph about Mr Lee:
	if lee-yet is false:
		say "Someone cries 'Hunger, [one of]he rung[or]rehung[in random order],' lamenting his destroyed barley. 'What more can you do to Mr. Lee?'";
		now lee-yet is true;
	else:
		say "Mr. Lee hangs around here, ";
		if p-2 is in lalaland:
			say "doing farmy chores.";
		else if ghoul hat is in lalaland:
			say "glancing nervously at the painting of Rev. Howe.";
		else:
			say "[one of]musing 'Here to GLOAT, HUH?'[or]looking red-eyed and growling 'Hola, thug!'[or]giving a hot laugh.[or]crying, red-eyed, 'Ugh! O, halt!'[cycling]";
	now Mr Lee is mentioned.

a-text of ghoul hat is "YRRRYYRR". b-text of ghoul hat is "YRRRYYRR". parse-text of ghoul hat is "-[sp]x[sp]x[sp]x[sp]-[sp]-[sp]x[sp]x".

check scaning Mr Lee:
	if ghoul hat is visible:
		say "Nothing happens until the settler points to the ghoul hat.";
		try scaning ghoul hat instead;

the p-2 is privately-named vanishing scenery in bran barn. "The painting has four bits of red writing on it."

printed name of p-2 is "painting of Rev. Howe".

understand "painting" and "rev howe" and "rev/howe" as p-2 when player is in bran barn.

a-text of p-2 is "RYRYRYR". b-text of p-2 is "RYRYRYR". parse-text of p-2 is "x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

check fliptoing Mr Lee:
	if alcoves is not visited:
		say "[nuh-uh]" instead;

check fliptoing p-2:
	if Mr Lee wears ghoul hat:
		say "Mr. Lee pulls on his ghoul hat, as if he wants to believe you, but his brain is half being controlled by something. You may need another word, first[if alcoves is not visited], and, perhaps, proof of what is in the Edictal Citadel[end if].";
		preef p-2 instead;

chapter loop pool

Loop Pool is a room in Otters. Loop Pool is north of frontage. "Here a wire weir bars you from [one of]a loop pool[or]the loop pool containing the allot atoll[stopping] and restricts you going every way except back south."

after looking in loop pool for the first time:
	say "You hear whispering ... 'Le Mer guards the allot atoll from the not worth yet.' Well, it's good to know what to call the center of the loop pool.";
	continue the action;

section le mer

Le Mer is a person in loop pool. description is "You can't locate where, exactly, Le Mer is."

after choosing notable locale objects when player is in loop pool:
	set the locale priority of Le Mer to 0;

instead of doing something with le mer:
	if current action is asking generically or current action is objasking generically or current action is objasking or current action is asking about, continue the action;
	if action is procedural, continue the action;
	say "You can't do much with Le Mer."

section sea cube

the sea cube is a transparent vanishing container in loop pool. description is "You see eels in the cube.". "Eels float inside a sea cube here, just across the loop pool[eels-them].".

to say eels-them:
	set the pronoun them to eels;

after fliptoing sea cube:
	set the pronoun them to eels;
	continue the action;

check examining sea cube:
	ignore the examine containers rule;

a-text of sea cube is "RYRYYRY". b-text of sea cube is "RGRYGRG". parse-text of sea cube is "x[sp]e[sp]x[sp]a[sp]u[sp]x[sp]e". sea cube is cheat-spoilable.

Instead of doing something with the sea cube:
	If action is procedural:
		continue the action;
	say "You aren't getting across the pool to do anything with the sea cube." instead;

section eels

the eels are a plural-named reflexive person in the sea cube. description of eels is "[if eels are reflexive]They seem listless, as if they need a reason to do something[else]Swimming calmly and undistractedly[end if].". "Eels [if eels are reflexive]squirm around waiting for your directive[else]swim contentedly here[end if]."

a-text of eels is "YRRY". b-text of eels is "GRRY". parse-text of eels is "e[sp]x[sp]x[sp]e". eels are cheat-spoilable.

check fliptoing eels:
	if player does not have medals:
		say "[nuh-uh]";
		preef eels instead;
	if sea cube is visible:
		say "You consider the end to an argument, but you don't have a start. The eels rattle against the sea cube, just waiting for the right first word.";
		preef eels instead;

to say nuh-uh:
	say "You try to argue that you're that person who saved Yorpwald in the first place, but you have no compelling reason--or evidence, really, that you're, well, YOU. [if location of player is bran barn]Mr. Lee[else]Le Mer[end if] is unmoved.[line break]";

check fliptoing sea cube:
	if player does not have medals:
		say "[nuh-uh]";
		preef sea cube instead;

section allot atoll

the allot atoll is scenery in Loop Pool. "[if eels are reflexed]You've been there. You don't need to go back[else]It doesn't look like a place everyone's allowed to go. Maybe you can be worthy of getting there[end if].[paragraph break]It's nothing to LOL at.".

instead of doing something with allot atoll:
	if the action is procedural, continue the action;
	if current action is entering, say "Too far." instead;
	say "The allot atoll is behind the wire weir. [if eels are reflexed]You don't need to worry about it[else]It doesn't seem like a place you just visit for yucks[end if]."

section wire weir

The wire weir is bounding scenery in Loop Pool. "It's there to prevent you from falling into the loop pool."

instead of doing something with wire weir:
	if the action is procedural, continue the action;
	if current action is climbing, say "Tht would be dangerous even without the eels ready to zap intruders[if eels are reflexed]--yes, intruders they already helped[end if]." instead;
	if current action is touching, say "That might get you zapped a bit." instead;
	say "The wire weir is there to keep you from going anywhere but back south. No need to mess with it."

section otters flipto and min points

[we need to check herer ifwe are completing both pool and barn points.]

to de-inhib:
	now power-back is true;
	say "You hear voices[one of][or], again[stopping]. 'Revil-a-Elvira?' / 'Yes, her.' / 'HERESY!'";
	if atmo-moat is prefigured:
		say "[line break]You feel strong enough to tackle the moat, now";
		if try-fail-animal:
			say ", and maybe even the [if try-fail-pit-north is false]owls[else if try-fail-anteroom-south is false]loud roar[else]owls and loud roar[end if] that chased you away back east, too";
		say ".";

check fliptoing ghoul hat:
	if player does not have medals:
		say "[nuh-uh]";
		preef ghoul hat instead;

after fliptoing ghoul hat:
	if sea cube is in lalaland:
		min-up;
	continue the action;

after fliptoing p-2:
	de-inhib;
	if eels are reflexed:
		min-up;
	continue the action;

after fliptoing sea cube:
	now eels are in loop pool;
	if ghoul hat is in lalaland:
		min-up;
	continue the action;

after fliptoing eels:
	de-inhib;
	if p-2 is in lalaland:
		min-up;
	continue the action;

book Tapering Anger Pit

Tapering Anger Pit is an innie room in Otters. Tapering Anger Pit is north of Bleary Barley. printed name of Tapering Anger Pit is "Tapering [if sly imp is in Anger Pit]Anger Pit[else]Inert Gap[end if]". "This north-south passage is [if sly imp is visible]frustratingly blocked[else]pleasantly lifeless with the imp gone[end if]. You recognize coma camo to the east and west."

understand "inert gap" and "inert/gap" as anger pit when sly imp is in lalaland.

The sly imp is a flippable neuter person in Anger Pit. "A sly imp simply zooms about [if imp1 is reflexive]rangily [end if]guarding the way north[if imp2 is reflexive], with a butlery air[end if][if imp3 is reflexive], showing legendary patience[end if] that allows vaster averts[if power-back is true]. But for all that, you think you could've taken the imp even before you regained your full powers[end if].". description of sly imp is "It looks back at you with an entirely tiny leer, planning how to keep one step ahead of you as effortlessly as it can, or keep you just mad enough not to think how to get rid of it.[paragraph break]It seems to have several tricks, but that may just mean several ways to get at it."

after looking in tapering anger pit:
	if sly imp is in tapering anger pit, it-him-her sly imp;
	continue the action;

after doing something with imp:
	set the pronoun him to the imp;
	set the pronoun her to the imp;
	continue the action;

check taking imp:
	say "Simply much too fast." instead;

a-text of sly imp is "BUG". b-text of sly imp is "BUG". parse-text is "BUG".

[These are all dummy items. imp1 = brutely, imp2 = angrily, imp3 = enragedly]

imp1 is privately-named unscannable reflexive ssno scenery in Anger Pit. printed name of imp1 is "the imp's actions". description of imp1 is "[bug-report].".

imp2 is privately-named unscannable reflexive ssno scenery in Anger Pit. printed name of imp2 is "the imp's actions". description of imp2 is "[bug-report].".

imp3 is privately-named unscannable reflexive ssno scenery in Anger Pit. printed name of imp3 is "the imp's actions". description of imp3 is "[bug-report].".

a-text of imp1 is "YRRRYRO". b-text of imp1 is "YRRRGPB". parse-text of imp1 is "b[sp]x[sp]u[sp]x[sp]e[sp]l[sp]y". imp1 is cheat-spoilable.

a-text of imp2 is "RRYRYRO". b-text of imp2 is "PRYRGRB". parse-text of imp2 is "a[sp]x[sp]x[sp]x[sp]i[sp]l[sp]y". imp2 is cheat-spoilable.

a-text of imp3 is "YRRYRYRRO". b-text of imp3 is "YRRYRYRRB". parse-text of imp3 is "-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]y".

try-fail-pit-north is a truth state that varies.
try-fail-anteroom-south is a truth state that varies.

to decide whether try-fail-animal:
	if try-fail-pit-north is true, decide yes;
	if try-fail-anteroom-south is true, decide yes;
	decide no;

check going north in Anger Pit:
	if imp is visible:
		say "The imp gives a sidle-slide, then idles in front of you. It's [if silence-tally is 1]still a bit [end if]too smooth for you right now." instead;
	if power-back is false:
		now try-fail-pit-north is true;
		say "[one of]You hear a dangerous hooting as you go north. You run from a bunch of owls before they can carve at you with their beaks, but boy, they were quick, and it was close. You don't want to risk it again[or]Those owls are too much for you[stopping], with your powers drained." instead;

book Lamer Realm

Lamer Realm is north of Tapering Anger Pit. Lamer Realm is a room in Otters. "Since it's been redone, there're no deer. Exotics coexist here[if adjsolve is 4], so many you think Gee, Fur Refuge[end if]. You can go back south--saturnic curtains guard all other ways out."

the saturnic curtains are bounding scenery in Lamer Realm. "They shine metallically and menacingly. You know better than to touch them. They are effective at keeping everything in one place."

instead of doing something with saturnic curtains:
	if action is procedural, continue the action;
	say "Saturnic means infected with lead poisoning, so you don't want to do too much with them.";

chapter ocelots

the ocelots are plural-named reflexive neuter animals. description is "[if ocelots are reflexive]They glance nervously back, as if they've done something wrong[otherwise]They glance back at you, give you a finger-point you're not cool enough to give back, then ignore you in the nicest possible way[end if].". "Ocelots are making gestures here that you'd look silly making[if ocelots are reflexive]. They do, too, with their stupid sunglasses[else]. But they don't, thanks to your help[end if]."

understand "ocelot" as ocelots.

the ocelots wear the SlopInc Clip-Ons. description of clip-ons is "Just terribly un-hip. They make the ocelots look like jive turkeys and not jive cats."

after fliptoing ocelots:
	now slopinc clip-ons are in lalaland;
	now ocelots wear look-kool shades;
	continue the action;

instead of doing something with the Clip-Ons:
	say "Uncool. Both the clip-ons and paying too much attention to them. And by too much, I mean any. Maybe you can help the ocelots, though."

the Look-Kool Shades are a wearable thing. description of Look-Kool is "Man! You couldn't wear them, or tell why they rout the cheap Ok-Ol[']-Look knockoffs, but the coolest ocelots can."

understand "sunglasses/glasses/shades" as SlopInc when ocelots wear SlopInc.
understand "sunglasses/glasses/shades" as Look-Kool when ocelots wear Look-Kool.

a-text of ocelots is "RYYRYRR". b-text of ocelots is "RYYPYRR". parse-text of ocelots is "x[sp]-[sp]-[sp]l[sp]-[sp]x[sp]x". ocelots is cheat-spoilable.

chapter leopard

The leopard is a reflexive neuter animal. "A leopard is here--[if leopard is reflexive]its colorings make it look like it is wearing a tacky (mostly) burnt orange jumpsuit, and it seems paw-tied, too[else]it looks more camouflaged since you changed it[end if]."

a-text of leopard is "RYRYRYR". b-text of leopard is "RYRYRYP". parse-text of leopard is "x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]d".

description of leopard is "He's got those jumpsuit markings and appears to be [if leopard is reflexed]no longer [end if]handcuffed."

the jumpsuit is part of the leopard. description is "The leopard looks back at you as if sorry for some inexplicable things it did, as if hoping it's served his time.". understand "markings" as jumpsuit.

chapter badger

The badger is a reflexive neuter animal. description is "[if badger is reflexed]He looks dumber with those clothes, but you aren't about to tell him[otherwise]Despite having all that fur, he seems embarrassed with his body[end if].". "[if badger is reflexed]A garbed badger stands around confidently here[otherwise]A badger covers his naughty bits that were buried under his fur anyway[end if]."

a-text of badger is "RYRRYR". b-text of badger is "RGRRGR". parse-text of badger is "x[sp]a[sp]x[sp]x[sp]e[sp]x".

chapter satyr

the satyr is a reflexive male animal. description is "[if satyr is reflexed]He looks like he's dreaming of a poem or something, but he doesn't want to be disturbed[else]He looks preoccupied and mistrustful. His eyes stray.[end if].". "A satyr strides here, [if satyr is reflexed]dreaming of a better Yorpwald[else]looking out for himself[end if]."

a-text of satyr is "YRRRO". b-text of satyr is "YRPRO". parse-text of satyr is "a[sp]x[sp]t[sp]x[sp]y". satyr is cheat-spoilable.

the owls are plural-named terse vanishing animals in Lamer Realm. description of owls is "Their big owly eyes follow you.". "[one of]You hear hooting and a flapping of wings. You've probably triggered some sort of trap. You look up to see owls swooping. You can duck the first blow, and you maybe have time to look at your settler, but they're too speedy en masse[or]All those animals are nice, but the owls about to dive-bomb you here mean you'll need to think fast. I think[stopping]."

after fliptoing owls:
	now ocelots are in Lamer Realm;
	now badger is in Lamer Realm;
	now satyr is in Lamer Realm;
	now leopard is in Lamer Realm;
	continue the action;

a-text of owls is "RRYR". b-text of owls is "RRYR". parse-text of owls is "x[sp]x[sp]o[sp]x". owls are cheat-spoilable.

check going south in Lamer Realm:
	if owls are in Lamer Realm:
		say "[if power-back is false]You're not ready to deal with the owls yet[else]You'll deal with the owls later[end if].";

check going north in perverse:
	if raptor is in perverse:
		say "[if power-back is false]You're not ready to deal with the raptor yet[else]You'll deal with the raptor later[end if].";

every turn (this is the owls kill you rule):
	if owls were visible and owls are visible:
		unless the action is procedural:
			say "You were not fast enough to dispel the owls. They peck you to a death so horrible even an unemotional computer type is willing to give you a chance to change it with UNDO.";
			get-dead;
		else:
			ital-say "You'll get a mulligan for instantaneous actions like examining, but you may want to deal with those owls, or flee.";

every turn (this is the raptor kills you rule):
	if raptor was visible and raptor is visible:
		unless the action is procedural:
			say "You were not fast enough to dispel the raptor. It gobbles you so quickly and gruesomely that even an unemotional computer type is willing to give you a chance to change it with UNDO.";
			get-dead;
		else:
			ital-say "You'll get a mulligan for instantaneous actions like examining, but you may want to deal with that raptor, or flee.";

silence-tally is a number that varies.

after fliptoing when player is in Anger Pit (this is the break the imp down rule) :
	increment silence-tally;
	if silence-tally is 2:
		say "The sly imp lets out a curse. It's completely failed to keep its cool. It leaves, confidence shattered. You can go past now.";
		now imp is in lalaland;
		now imp1 is in lalaland;
		now imp2 is in lalaland;
		now imp3 is in lalaland;
	else:
		remove noun from tapering-items, if present;
	continue the action;

section debug - not for release

understand "i1" as imp1 when debug-state is true and player is in tapering anger pit.
understand "i2" as imp2 when debug-state is true and player is in tapering anger pit.
understand "i3" as imp3 when debug-state is true and player is in tapering anger pit.
understand "r1" as ram1 when debug-state is true and player is in tapering anger pit.
understand "r2" as ram2 when debug-state is true and player is in tapering anger pit.
understand "r3" as ram3 when debug-state is true and player is in tapering anger pit.

chapter animaling

to say inhib:
	say "You can't summon the energy to do that. It seems it should work, but it doesn't. You may need a recharge.";

after fliptoing an animal:
	if location of player is Lamer Realm:
		let temp be number of visible reflexed animals;
		if temp is 1:
			say "The LUCKY medal you're wearing clanks against the IQ medal. It looks a bit clearer, now.";
		else if temp is 3:
			say "The [list of visible reflexed animals] all look over at you, point and give you a thumbs-up. They glance over at the [list of visible reflexive animals] and shrug a bit, as if it can come along if it wants to. Your LUCKY medal looks very shiny now.";
		else if temp is 4:
			d "[the list of visible reflexed animals]. You get a min-up.";
			min-up;
	if location of player is perverse preserve:
		let temp be number of visible animals;
		if temp is 2:
			say "The IQ medal you're wearing clanks against the LUCKY medal. It looks a bit clearer, now.";
		else if temp is 4:
			say "The [list of visible animals] swarm around you in a circle a few times. You seem to have established leadership of them, whether or not you can do anything with the [random pre-animal in perverse preserve]. Your IQ medal looks very shiny now.";
			now random pre-animal in perverse preserve is llpish;
		else if temp is 5:
			min-up;
	if noun is reflexed and location of player is Lamer Realm:
		increment adjsolve;
	continue the action;

[carry out animaling:
	if location of player is not Lamer Realm:
		say "[reject]" instead;
	if owls are not slowed:
		say "Deal with the owls first." instead;
	repeat through table of animal-stuff:
		if my-animal entry is visible:
			if the player's command matches the text "[adjective-to-say entry]":
				if power-back is false:
					say "That would work...if you had your power back." instead;
				if my-animal entry is adjed:
					say "You already worked your magic." instead;
				say "[animal-happy entry]";
				reg-inc;
				increment adjsolve;
				if adjsolve is 4:
					min-up;
				now my-animal entry is adjed instead;
	say "[reject]" instead;]

book Rote Moan Anteroom

Rote Moan Anteroom is south of Bleary Barley. Anteroom is a room in Otters. Anteroom is innie. "[if whiners are visible]The noise here is just unbearable--whiners guarding the way south and not shutting up about it. You feel vaguely grateful they aren't guarding the way back north, too[else]This room is quieter now, just a north-south passage[end if]. You recognize coma camo to the east and west."

understand "near/moot" and "near moot" as anteroom when whiners are in lalaland.

the shrewin' whiners are plural-named flippable people in Anteroom. description is "They blather on hopelessly, as if you should try to be as whiny as they are. [one of]Probably many of them are named Sherwin, but more importantly, m[or]M[stopping]aybe you can make them run out of energy.". "Shrewin['] whiners are [if ram1 is reflexive]tallyhoing[else]babbling[end if][if ram2 is reflexive] with great callosity[end if] here[if ram3 is reflexive]. They restyle why they can't let you go south[end if][if power-back is true]. Yet, for all their bluster, you feel like you could've taken them even before you regained your powers[end if]."

a-text of whiners is "BUG". b-text of whiners is "BUG". parse-text is "BUG".

section dummy scenery

[3 dummy sceneries. Loathingly, stoically, tersely]

ram1 is privately-named unscannable reflexive ssno scenery in Anteroom. ram1 is undesc. printed name of ram1 is "the whiners['] shrewin[']".

a-text of ram1 is "RRYYRYRRO". b-text of ram1 is "RRYYRYRRB". parse-text of ram1 is "x[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]x[sp]y".

ram2 is privately-named unscannable reflexive ssno scenery in Anteroom. ram2 is undesc. printed name of ram2 is "the whiners['] shrewin[']".

a-text of ram2 is "RYRRYRO". b-text of ram2 is "RGRRYPO". parse-text of ram2 is "x[sp]e[sp]x[sp]x[sp]e[sp]l[sp]y". ram2 is cheat-spoilable.

ram3 is privately-named unscannable reflexive ssno scenery in Anteroom. ram3 is undesc. printed name of ram3 is "the whiners['] shrewin[']".

a-text of ram3 is "RYYRRYRRRO". b-text of ram3 is "RYYRRYRRRO". parse-text of ram3 is "x[sp]-[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]x[sp]y".

book perverse preserve

Perverse Preserve is south of Rote Moan Anteroom. Perverse Preserve is a room in Otters. "[pre-desc]"

printed name of perverse preserve is "[if nounsolve < 3]Perverse Preserve[else]Uprates Pasture[end if]"

to say pre-desc:
	if number of animals in perverse preserve is 1:
		say "[if know-restrict is true]The CRITTERS RESTRICT blocks you going anywhere except back north. Y[else]This clearing seems unbounded, but y[end if]ou don't see any animals. You think. And no pea to change to an ape.[no line break]";
		continue the action;
	else:
		say "You rescued [if nounsolve is 4]all the[else if nounsolve is 1]one of the[else]a few[end if] animals here, but it's still eerie[if know-restrict is true], even without the CRITTERS RESTRICT blocking every way except back north[else]. You can go back north[end if].[no line break]";
		continue the action;

chapter critters restrict

to say dsknow:
	now know-restrict is true;

know-restrict is a truth state that varies.

the critters restrict is bounding scenery in Perverse Preserve. "You can't see it, but it doesn't just restrict critters. It restricts you, too."

instead of doing something with critters restrict:
	if action is procedural, continue the action;
	say "You can't do anything about the CRITTERS RESTRICT field. But you don't need to go beyond it."

chapter corona and racoon

A corona is a thing. the corona is fixed in place. description is "It's almost like a pair of dark scavenger's eyes. You can't locate its original light source--you try to cut it off, but you can't.". "A corona of light scurries about on the floor. It may have an extra c around its edge."

a-text of corona is "RYRYYR". b-text of corona is "RYRGYR". parse-text of corona is "x[sp]-[sp]x[sp]o[sp]-[sp]x". corona is cheat-spoilable.

the racoon is a neuter animal. description is "It looks at you trustingly, seeming to understand you rescued it.". "A racoon sits up alertly here. It has a lit tail."

a-l-t is part of the racoon. a-l-t is undesc and amusing. printed name of a-l-t is "a lit tail". understand "lit/ tail" as a-l-t.

instead of doing something with a-l-t:
	say "The racoon's tail is beautiful and eerie, but useless as far as you can tell, so it's not worth bothering with."

chapter thrones and hornets

the thrones are plural-named things. the thrones are fixed in place.

understand "throne" as thrones.

description of thrones is "They're made out of, not metal, but locusts. Well, not quite that."

a-text of thrones is "RYRRYRR". b-text of thrones is "RYPRYRP". parse-text of thrones is "x[sp]-[sp]r[sp]x[sp]-[sp]x[sp]s".

the hornets are plural-named neuter animals. description is "Thankfully, they are not buzzing with intent to sting you.". "Hornets are buzzing around here."

understand "hornet" as hornets when hornets are in location of player.

instead of taking the thrones:
	say "They seem abnormally sharp, as if they could sting you again and again.";

chapter pines and snipe

some pines are a plural-named thing. description is "The bases of the pines look almost like birds['] feet."

the pines are fixed in place.

check taking pines:
	say "The effort would crush your spine." instead;

check taking snipe:
	say "It will follow you when you call."

the snipe is a neuter animal. description is "It has a long needle-like bill.". "A snipe is pacing around here."

a-text of pines is "RRYRY". b-text of pines is "RRYRY". parse-text of pines is "x[sp]x[sp]-[sp]x[sp]-".

chapter nails and snail

Some nails are plural-named things. "Some nails are lying all over the floor here."

description of nails is "They're in a spiral. Odd."

instead of taking nails:
	say "They're almost glued to the floor or something."

a-text of nails is "RRYYR". b-text of nails is "RRYYR". parse-text of nails is "x[sp]x[sp]-[sp]-[sp]x". nails is cheat-spoilable.

the snail is a neuter animal. description is "It's quite spiky and seems to move faster than your average snail.". "The spiky snail you summoned is slithering impatiently in a circle."

check scaning imp:
	say "The settler seems to jump around with the imp a bit before stabilizing. The imp's [if silence-tally is 0]patience is legendary and butlery--but it's moving rangily[else if imp1 is in lalaland]patience is legendary and butlery[else if imp3 is in lalaland]It has a butlery air as it moves rangily[else if imp2 is in lalaland]patience feels legendary as it moves rangily[end if].";
	try scaning entry 1 of tapering-items;
	the rule succeeds;

check scaning whiners:
	say "The settler seems to jump around a bit before stabilizing. It blinks about as they [if ram1 is reflexive]restyle[else]continue[end if] [if ram2 is reflexive]tallyhoing[else]their noisiness[end if] [if ram3 is reflexive]with callosity[end if]";
	try scaning entry 1 of anteroom-items;
	the rule succeeds;

check going south in Anteroom:
	if whiners are visible:
		say "The whiners can't imagine why anyone would want to go there. They block you, for your own good. They seem to have all sorts of reasons, and there's no way past the quantity, if not the quality, of their arguments." instead;
	if power-back is false:
		now try-fail-anteroom-south is true;
		say "[one of]A very loud roar scares you. You doubt adverbs are up to the task of calming it. You decide to return once you have[or]That roar scares you. To deal with it, you'll probably need[stopping] your full powers back." instead;

to say shout-check:
	say "[one of]The din loses speed, energy, nastiness and volume. A re-count reveals several leavers. But even with them gone, too many are left blocking the way south.[no line break][or]Slowly, conversation dwindles until it leaves every hassler rahless, slasher of noise. They find another place where rioters roister.[no line break][stopping]";

quietness is a number that varies.

after fliptoing when player is in Anteroom (this is the de-tallyho rule) :
	increment quietness;
	if quietness is 2:
		say "As they sulk away from the anteroom, they whimper about that bum Ed Riley who got a more exciting post than they did despite his moving so weedily[if ed riley is in Bleary Barley]. You're a bit sad you couldn't dispatch that loudmouth yet, but yay, working your enemies against each other[end if].";
		now printed name of Anteroom is "Near-Moot Anteroom";
		now whiners are in lalaland;
		now ram1 is in lalaland;
		now ram2 is in lalaland;
		now ram3 is in lalaland;
	else:
		remove noun from anteroom-items, if present;
	continue the action;

chapter raptor trap

the raptor is an animal in Perverse Preserve. description is "It's small for a raptor, but that's all relative. It's still bigger than most mythical beasts, but it's also oddly colored, red and yellow and green and purple patches. But it's still dangerous.". "[one of]You hear a hollow ol['] howl and a pounding of very large paws. You may've triggered some silent trap--a huge raptor comes into view, though it is too big to follow you back north[or]A nervous, ravenous raptor squawks and roars[stopping]."

before entering thrones:
	say "You try to sit on the thrones, by you feel a stinging." instead;

after choosing notable locale objects when player is in preserve (this is the raptor and parrot last rule):
	if raptor is in preserve:
		set the locale priority of raptor to 9;
	if parrot is in preserve:
		set the locale priority of parrot to 9;
	continue the action;

the parrot is a vanishing animal. description is "Pretty much every color of the rainbow.". "A multi-colored parrot flutters about, here."

the parrot wears the weltish whistle.

check fliptoing raptor:
	if location of player is not alcoves:
		say "'Awk! I'd just kill you in that form. Try that around some bad guys.'" instead;

every turn when parrot is visible (this is the parrot-chat rule):
	if location of player is alcoves:
		say "The parrot hides out of sight of Elmer and Merle, eyeing them fearfully.";
	else if location of player is Lamer Realm:
		let vra be number of visible reflexive animals;
		if owl is in lalaland and vra is 0:
			say "'Awwk! Happy animals! They might do something for you some day, adventurer!'";
			continue the action;
		if vra > 0:
			say "The parrot notes the [list of reflexive animals] [if number of visible reflexive animals > 1]don't[else]doesn't[end if] look happy.";
	else if location of player is Lamer Realm:
		if number of visible animals >= 5:
			say "The parrot flies happily among all the animals.";
		else:
			say "The parrot pokes at the [list of nonreflexive things in preserve][if number of nonreflexive things in preserve > 1] in turn[end if].";

a-text of raptor is "RYRRYR". b-text of raptor is "RGRRGR". parse-text of raptor is "x[sp]a[sp]x[sp]x[sp]o[sp]x".

a-text of parrot is "RYRRYR". b-text of parrot is "RGRRGR". parse-text of parrot is "x[sp]a[sp]x[sp]x[sp]o[sp]x".

raptor-trap is a truth state that varies. raptor-trap is false.

after fliptoing parrot:
	preef parrot;
	now nails are in preserve;
	now corona is in preserve;
	now thrones are in preserve;
	now pines are in preserve;
	continue the action;

book Reclusion Inclosure

hydra-known is a truth state that varies.

check going west in Alcoves (this is the need quick rule):
	if parrot is in lalaland and raptor is in lalaland:
		if medals are not reflexed:
			say "Your medals clink as you go west. Elvira hears them and ambushes you! She touches what you recognize as the Ultimate Mutilate-It Amulet and fires the legendary Phrase Shaper Phaser at you. You think of possible replies, of ways to block her, as you slump to the ground. But you are not fast enough. 'Last word: drat! Slow!'[paragraph break]The last thing you hear as you slump to the ground is Gretta's medals clanking--the ones you never quite used[if medals are prefigured], though you sort of figured how, earlier[end if].";
			get-dead;
			follow the shutdown rules instead;
		continue the action;
	if hydra is in Reclusion Inclosure:
		now hydra-known is true;
		say "Stricter critters restrict--wait, no, that's a hardy hydra with an HD-Ray. Er, dang. Danger. You[if parrot is visible]r friend the parrot gives a helpful AWWWK as you[end if] double back." instead;
	say "[one of]You pass asps and feel live evil enduringly underlying...you yell 'Time's Up! Impetus imputes...'[paragraph break]'Um, spite? I'm upset!' Elvira shrugs. 'Spume it.'[or]A punitive invite-up calls you back.[or]'Resenter re-enters!' Elvira laughs.[stopping]";

after printing the locale description for Inclosure when Inclosure is unvisited:
	if Inclosure is unvisited:
		say "'Proceedings precognised. Rats, the...eh, start the arts,' Elvira mutters as she pulls out the Ultimate Mutilate-It Amulet! A blast of energy flies at you, and reflexively, you yell 'Ail ME? Tut!' The ray fizzles.[paragraph break]'Ooh! Stout! ... Shootout!' She pulls out her phrase shape phaser, but you hum an e-sharp to deflect it. 'Won't kill a know-it-all.'[paragraph break]'Intact? It can't! SPAWN, Pawns!' she cries. 'P. S. Naw,' you say.[paragraph break]Elvira gives a crusty curtsy. 'Oh! Most smooth,' she says, with indulga-languid calm, i.e. malice, and hi-grade hid rage. And the sort of tinkly laugh you always felt forced to trust. 'You temporarily disabled my purple pulper and oranger groaner. I can't attack you first--but, details! You have to admit it was clever, filling Yorpwald with annoying anagrams to frame you!'[paragraph break]And you almost do. She has that glibness blessing! You're almost suckered, yourself. You may need fighters impervious to her charms to get rid of her for good.[paragraph break](Push any key.)[wfak]";
		say "'Gah, hag!' you say.[paragraph break]'Neat ante. Gas [']em, mages!' But they aren't there. 'Me, cry mercy?'[paragraph break]Stalemate. Lame state. Unless you have a way to kill her[if number of reflexive animals in Lamer Realm > 1 or number of pre-animal things in preserve > 1]. Or round up more troops[end if].";
		if do-i-chat is true:
			now qbc_litany is litany of Elvira;
		else:
			try talking to Elvira;
	else:
		say "'Serious issue, or...?'";

Reclusion Inclosure is an innie room in Otters. Reclusion Inclosure is west of Alcoves. "You feel as slowed here as you did on entering the barley field. Vast vats emit sour moisture over a prey pyre. The room is cluttered with a stocked stockade, a torpid tripod (slowing you down,) and entrances to a warpish warship and becharm-chamber. That nacht-chant could be coming from any of them, or maybe even the enerve-veneer present all around. You can leave to the east."

the torpid tripod is amusing scenery in Reclusion Inclosure. tripod is an undesc.

to say one-more-evil:
	say "It's too far away to do anything with and survive. For your purposes, it's just one more bit of evil scenery"

instead of doing something with the torpid tripod:
	say "[one-more-evil]."

the enerve veneer is amusing scenery in Reclusion Inclosure. veneer is an undesc.

instead of doing something with enerve veneer:
	say "[one-more-evil]."

the becharm chamber is amusing scenery in Reclusion Inclosure. chamber is an undesc.

instead of doing something with the becharm chamber:
	say "It's too far away to do anything with. For your purposes, it's just one more bit of evil scenery."

the nacht chant is amusing scenery in Reclusion Inclosure. chant is undesc.

instead of doing something with nacht chant:
	say "You--you're almost getting used to the nacht chant."

the vast vats are amusing plural-named scenery in Reclusion Inclosure. vats are undesc.

instead of doing something with vast vats:
	say "The vats are far away, but you can smell sulfinyl in them reeking sinfully--no silly fun."

carry out going east in Reclusion Inclosure:
	elvira-flee-taunt;
	continue the action;

to elvira-flee-taunt:
	if do-i-chat is true:
		say "This should not happen in full release mode, but all you can do is blow the whistle to win.";
		continue the action;
	say "You leave her sin shrine [if current action is not going east]with extra quickness [end if]before getting a shiner.[paragraph break]Elvira mocks you[one of], but makes no attack[or] again[stopping]: [randbla][paragraph break]";
	now Elvira-delay is 0;

the warpish warship is amusing scenery in Reclusion Inclosure. warship is undesc. [?? check all the sceneries]

instead of doing something with warship:
	say "You'll never do anything with the warship on your own. But defeating Elvira will probably disable it."

a stocked stockade is amusing scenery in Reclusion Inclosure. stockade is undesc.

instead of doing something with stockade:
	say "You shudder to think what you could do with it--or what it could do to you."

Elvira is a woman in Reclusion Inclosure. understand "necro/crone" and "necro-crone" and "necrocrone" as Elvira. "[one of]It's Elvira! The necro-crone![paragraph break]'Coren,' she cries, over the rapidly vaporizing body of her pet hydra.[or]Elvira seems impatient for you to make a move.[stopping]". description is "Elvira's actually quite attractive. Sterling ringlets. She looks like a seraph even with that phrase-shaper-phaser. Though her beauty makes you say yea, but..."

Elvira wears the Ultimate Mutilate-It Amulet.

the mutilate-it amulet is amusing. description is "It's very bare except for the words 'Um...a title?' on it."

instead of doing something with the mutilate-it amulet:
	if action is procedural, continue the action;
	say "Hm, best not to try anything. It can't zap you if you don't mess with it."

The phrase shaper phaser is an amusing thing. Elvira carries the phaser. description of phaser is "It's curvy and futuristic and gives her the grained endearing to look more like a seraph than an amused medusa."

instead of doing something with the phaser:
	if action is procedural, continue the action;
	say "You heard rumors. But you did not believe it was true. She can just say something, hit someone with it, and make you forget what you were doing. Even if the amulet doesn't work on you." instead;

check talking to Elvira when current quip is final-quip:
	say "'[one of]Neat lob. Notable. Bleat on!' [or]State nag?! Stagnate!' [in random order] Reason won't work, here." instead;

every turn when current quip is final-quip and player is in Inclosure:
	say "Cordial, cold air. [one of]'Make a diss, punk? Kiss and make up!' She pauses. 'Enough of this anagram nonsense! That's playing YOUR game. It's not like YOU ALONE can kill me. No person is brave enough to join you.' [or][stopping][one of]Elvira points out you're just jealous she got here on charisma.[or]Elvira mentions she's making others happy, a more exciting happy than yours.[or]Elvira complains social engineering is not as easy as it looks![or]'I'm still vaguely worried you have something up your sleeve, like Blue Frog Urbfogel!'[or]'It would be kind of exciting to lose, you know. Versus just growing old and dying bored and boring. I get the kingdom I want, too. Win-win.' It all has a lilt.[in random order]";

section Elvira dialogue

the litany of Elvira is the table of Elvira comments.

table of quip texts (continued) [tqt-el]
quip	quiptext
null-quip	"This shouldn't be part of the conversation."
logical-quip	"'Pick a nit? Pack it in! Limp dung, dumpling! Drone-o-nerd!' she laughs, hypnotic, pythonic. 'I? Spoon Poison? Overbearing, raving bore!' Your reply is undone in innuendo." [start ELVIRA text]
wtf-quip	"WTF is swift. 'Egad, an agenda. Rugged Grudge. Reactions so certain. A sincerest resistance! Dayum, Y U MAD?' / 'Say, fits satisfy?' She gives a plain man's mansplain of her main plans and gets to clamp into a compliant calm point about your complaint. Manic plot? Progress! She also points out that it's probably for the best. You were feeling useless, weren't you? And if you just attack her and get it over with, you can die feeling heroic. She's sure you worked hard to get here. And, sure as Nilbog is goblin spelled backwards, she knows how to troll, too."
hollow-quip	"An ol['] howl. 'Me? Rocky mockery! Petulant late punt! [if player is male]Ach, Mr. Charm[else]Ms. Arch-Charms[end if]!' She laughs with mindless mildness. 'Uber-Rube! Delicate, elite cad! Deny it's destiny? Evasion! So naive!' You cork a croak."
abhor-quip	"'Recoil, O Relic!' / 'Nuh-unh, hun! Solicit colitis!' Wow. Oww."
strong-quip	"'So pure? Poseur! Soppy psy-op!' Dang, your spoonerism got double-trumped, there."
sneer-quip	"'Obliged old gibe. Bilge OD!' Coughs co-gush, chug so. 'Be a god? Bad ego!' you try back, but she's a serener sneerer. 'How silly! Why so ill?'"
bald-quip	"'Ow, sloth. Low shot.' She laughs. You probably shouldn't be worrying about looks, now."
sinister-quip	"'Sinister RESISTIN[']. Loutier Outlier!' she calls back. There's a brief scuffle over whose insult was less creative, but you kind of shuffled a lower percentage of letters, there. So she wins.[paragraph break]But don't worry. You're still the good guy. You just lost a style point."
final-quip	"'No mercy, my crone! Corny, me?' She flinches at your pure re-up, responding 'Oh, cute. Touché.' A truce, acuter. 'Careful now, awful crone.' 'Woeful narc!' Eugh. No. Enough." [end ELVIRA text]

table of Elvira comments [tco-el]
prompt	response	enabled
"Smartly done, monster lady. Fool us? So foul of soul! (Lay things out logically, hopefully without getting overemotional or boring)"	logical-quip	1
"WTF FTW"	wtf-quip	1
"LOL, how hollow!"	hollow-quip	1
"Play God? Dopy gal!"	sneer-quip	1
"Abhorsive behaviors! Nastiest titaness!"	abhor-quip	1
"Strong will? Still wrong. At bay, ya bat."	strong-quip	1
"Go bald, old bag!"	bald-quip	0
"Sinister Insister. Hypno-phony. Reposed? Deposer."	sinister-quip	0
"Plot is spoilt! Scourge-curse, go! (yeah, yeah, get on with it)"	final-quip	1

chapter hydra

The hardy hydra is an animal in Reclusion Inclosure. description is "One whiff of the decayin['] cyanide smell proves he melts helmets."

volume others

citrus-score is a number that varies. non-citrus-score is a number that varies.

book Rustic Citrus

Rustic Citrus is a room in Others. last-loc of Others is Rustic Citrus.

fruits-flipped is a number that varies.

after fliptoing a fruit (this is the check minimum fruits and score rule) :
	if player is in rustic citrus:
		coin-eval;
	check-fruit-min;
	continue the action;

to check-fruit-min:
	increment fruits-flipped;
	d "[fruits-flipped] fruits flipped so far, [cur-score of others] total score, delta = [cur-score of others - fruits-flipped].";
	if fruits-flipped > 20:
		min-up;

description of Rustic Citrus is "A border, arbored, surrounds you on all sides, [if player has compass]but you see which way is north[else]and you don't know which way is which[end if].[paragraph break]A sign on an abandoned drinks stand says RUSTIC CITRUS and, well, it's pretty rustic even if nothing much is growing[if spear is visible]--I don't think the spear stuck in the ground counts[end if][if mad train is visible], and a mad train lies glaring at the lack of track ahead[end if]. [if lumps are visible]The ground's covered with lumps, too. [end if][if pagers are visible]You hear pagers beeping all around as well. [end if][if slime is visible]You also have trouble not looking at some slime oozing off to the side. [end if][if videotape is in citrus]That videotape collection you uncovered from the drinks stand lies here, too. [end if]"

a border arbored is scenery in Rustic Citrus. printed name of a border arbored is "a border, arbored". "Well, it's wooded pretty much all around, here. [if compass is off-stage]Maybe you can find a way out[else][end if]."

instead of doing something with a border arbored:
	if action is procedural, continue the action;

chapter augural arugula

some augural arugula is an edible thing. description of arugula is "It's not enough for a luau. Arg."

check eating arugula:
	say "Not very tasty, but your vision seems clearer. 'La! A guru!' you think to yourself. You can now GURU what you are curious about.";
	now arugula is in lalaland;
	now can-guru is true;
	the rule succeeds;

after printing the name of arugula when taking inventory:
	say " (to eat, then GURU something to change to fruit)";
	continue the action;

can-guru is a truth state that varies.

section guruing

guruing is an action applying to one thing.

understand the command "guru" as something new.

understand "guru [something]" as guruing when mrlp is others.

did-guru is a truth state that varies.

carry out guruing:
	if can-guru is false:
		if arugula is in lalaland:
			say "You lost your guru powers." instead;
		say "You'll near to eat the arugula, first." instead;
	if noun is megaton pear or noun is mopeage rant or noun is rampage note:
		say "You blink and wind up refocusing on the magenta rope.";
		try guruing magenta rope instead;
	if noun is viewer or noun is searcher or noun is perp-priv:
		say "No. It's got to be pretty simple." instead;
	repeat through table of others anagrams:
		if noun is the-from entry:
			if noun is compass:
				say "Whoah! A compass begins spinning.";
			else:
				say "You focus and squint, and some fruit appears in your vision: [if indefinite article of the-to entry is non-empty][indefinite article of the-to entry] [end if][the-to entry]. The aftertaste of arugula finally dissipates.";
			now can-guru is false;
			now noun is prefigured;
			now did-guru is true;
			poss-d;
			the rule succeeds;
	if noun is iconic:
		if noun is s-i:
			say "The icons seem appropriate as-is." instead;
		say "Hm. That's not fruit and not going to be fruit. You are pretty sure you can decide what to do." instead;
	if noun is the player:
		say "You don't want to change. Well, not in that way." instead;
	if noun is a person:
		say "A person shouldn't and can't be changed into a fruit." instead;
	say "Nothing happens. Maybe something else.";
	the rule succeeds.

chapter curtis and dealing with him

Curtis is a person in Rustic Citrus. description is "I curst him to be nondescript.". "Curtis is pottering around, waiting for you to hand over [if cur-score of others is 0]some[else]more[end if] fruits."

extra-citrus is a number that varies.

curtis-other-coin is a truth state that varies.

negged-yet is a truth state that varies.

after printing the locale description for rustic citrus:
	coin-eval;

check giving fruit to curtis:
	if moss cap is off-stage:
		say "'No, no. A bit more, then I'll give you a reward." instead;
	say "Oops. BUG. Curtis should've taken the [noun]." instead;

check going inside in Rustic Citrus:
	say "You can't go backward. There is enough to do here, including figuring where to go next." instead;

chapter grapes

some pagers are plural-named scenery in rustic citrus. description is "They come in green and reddish-purple and black. Like all pagers, they seem a bit seedy."

instead of taking pagers:
	say "Nobody ever saved a country with a pager."

a-text of pagers is "RRYRYR". b-text of pagers is "RRYRYP". parse-text of pagers is "x[sp]x[sp]-[sp]x[sp]-[sp]s".

to say mami:
	if player is male:
		say "[d-word-u] Mister Master Mind";
	else:
		say "[if player is in citrus]Named It[else]AND TIME,[end if] Mrs. Master Mind";

instead of taking pagers:
	say "As much as you'd like to bash them, there's another way to shut them up."

instead of examining pagers:
	say "Remember when these things were the most annoying electronic devices? Then came cell phones and iPods."

grapes are a plural-named fruit.

chapter pears

A spear is scenery in Rustic Citrus. description of spear is "It'd make a powerful weapon, but you couldn't hold anything else. Plus, this isn't that sort of game."

to say cutoff:
	stop game abruptly;

a-text of spear is "RYYRR". b-text of spear is "RYYRR". parse-text of spear is "x[sp]-[sp]-[sp]x[sp]x".

instead of taking spear:
	say "This is a thinking puzzling game, not a violence game. Though I hope the puzzles have not given you violent thoughts."

the pears are a plural-named fruit.

chapter plums

the lumps are plural-named scenery in Rustic Citrus. "They're more purplish than dirt usually is."

a-text of lumps is "RRYRR". b-text of lumps is "RRYRP". parse-text of lumps is "x[sp]x[sp]u[sp]x[sp]s". lumps are cheat-spoilable.

the plums are a plural-named fruit.

chapter slime

some slime is singular-named scenery in Rustic Citrus. "It's green, like most slime. But it smells nicer than most slime and is even a bit bumpy."

a-text of slime is "RYRYR". b-text of slime is "RYRYR".parse-text of slime is "x[sp]-[sp]x[sp]-[sp]x".

instead of taking slime:
	say "Eww. Not in that form you won't."

some limes are a plural-named fruit.

chapter maraschino

the harmonicas are a plural-named thing in rustic citrus. "Two harmonicas, rusted together, are here."

description of harmonicas is "They're an off-red, unlike your usual visions in the game. Their condition is the pits. They look like a...how do you spell it? Anachorism?"

instead of taking harmonicas:
	say "They're too rusty.";

a-text of harmonicas is "RYRYRRRYRY". b-text of harmonicas is "RGPYRRRYRY". parse-text of harmonicas is "x[sp]a[sp]r[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x[sp]-".

the maraschino cherry is a fruit.

chapter tamarind

The mad train is scenery in Rustic Citrus. description is "It's got quite a frown in its cow catcher, all right. It was apparently designed by Dr. Nimata, whose name is in red.".

a-text of mad train is "RYRYRYRR". b-text of mad train is "RGRYPYRR". parse-text of mad train is "x[sp]a[sp]x[sp]-[sp]r[sp]-[sp]x[sp]x".

instead of taking mad train:
	say "You'd strain to find a use for trains here.";

a tamarind is a fruit. description is "It looks more like a potato than any fruit you know. But it still counted."

chapter coin-give

to decide which number is curtis-level:
	if number of fruits in lalaland < 8:
		decide on 0;
	if number of fruits in lalaland < 12:
		decide on 1;
	if number of fruits in lalaland < 16:
		decide on 2;
	if number of fruits in lalaland < 20:
		decide on 3;
	decide on 4.

to coin-eval:
	if number of visible fruits is 0:
		continue the action;
	let temp be curtis-level;
	if temp is 4:
		say "Curtis says 'Boy, you have a lot of goodies now. Wouldn't want to lose them carrying all those fruits.' He helps keep your inventory lean and mean.";
		now all carried fruits are in lalaland;
	if number of carried fruits > 0 and temp < 4:
		if number of carried fruits > 4:
			say "Curtis goes to take your bounty but backs off on seeing how much there is. 'I, old as...' He snaps his fingers. 'A solid load is laid, so! Lo, aids! Oi, lads!' he booms, and a couple assistants carry away your haul[one of]. 'Do sail!' he exhorts you[or][stopping].";
		else:
			say "Curtis relieves you of the burden[if number of carried fruits > 1]s[end if] you found[one of]. He thanks you but is curt[or][stopping].";
		repeat with fru running through carried fruits:
			now fru is in lalaland;
	if curtis-level > temp:
		repeat through table of coingiving:
			if levb4 entry is temp and levaf entry is curtis-level:
				say "[line break][blabber entry][line break]";
				if get-token entry is 1:
					now player has tekno-token;
					set the pronoun it to tekno-token;
				if get-coin entry is 1:
					now player has coin;
					set the pronoun it to coin;
				if get-coins entry is 1:
					if player has icon:
						now icon is in lalaland;
						now player has icons;
						now singed design is part of the icons;
						say "[line break]You fiddle with the coin you got, and now it's an icon, too. So now you have icons!";
						set the pronoun them to icons;
					else if player has coin:
						now coin is in lalaland;
						now player has coins;
						now singed design is part of the coins;
						set the pronoun them to coins;
					else:
						now player has coins;
						now singed design is part of the coins;
						set the pronoun them to coins;
				if get-dollar entry is 1:
					now player has droll dollar;
					set the pronoun it to droll dollar;
				continue the action;

chapter dollar

a droll dollar is a thing. description is "It has a picture of some gangster--wait, it's [coin-person]--lighting a cigar with a dollar remarkably similar to it--on which is a gangster lighting a cigar, and so forth[one of]. LOL, rad, you think, though the joke wears off[or][stopping]."

coin-person is a thing that varies.

Lord Al Ollard is a proper-named thing. description of Lord Al is "[coin-per-d]"

Dr Lola Ollard is a proper-named thing. description of Dr Lola is "[coin-per-d]". printed name of Dr Lola Ollard is "Dr. Lola Ollard"

to say coin-per-d:
	say "[he-she-c] looks stereotypically bloated, hypocritical and plutocratic, though some people find that sort of thing valuable."

instead of doing something with coin-person:
	if action is procedural, continue the action;
	say "Doing anything with or too such a horrid counterfeit coin wouldn't be very satisfying or productive. Probably best to get this off your hands for any profit at all.";

to say ollard-hint:
	say "[he-she-c] is worse than useless to society but only useless to you. Yay?"

after doing something with coin-person:
	if coin-person is Lord Al:
		set the pronoun him to Lord Al;
	else:
		set the pronoun her to Dr Lola;
	continue the action;

understand "dollar bill" and "bill" as droll dollar.

to say if-clear:
	say "[if clearing is visited]--ah, you're nodding, you've seen it--[else] [end if]"

table of coingiving
levb4	levaf	get-token	get-coin	get-coins	get-dollar	blabber
0	1	1	0	0	0	"'Ok. Neat. Take on a token. There's a clearing some ways away[if-clear]where you can swipe it to trade for things. Haggle. That sort of thing.'"
0	2	1	1	0	0	"'Wow! You got a lot done on that errand. Here's a tekno-token AND a coin. If you go to the clearing east of the wells, the token'll last you a bit. More deals. Coin'll be useful for...something.'"
0	3	1	0	1	0	"'Surprised you can lug all that back! Here's a tekno-token to use in the clearing east of the wells, along with some coins. Maybe you'll find what to do with them. Keep it up!'"
0	4	1	0	1	1	"'Wow! Impressive! I'm half curious if you cheated somehow! Here's a tekno-token for the clearing up north and east--not that you may need it--and a couple coins, and a dollar. Don't know if I can give you anything else.'"
1	2	0	1	0	0	"'Glad you didn't say scru-it. We're getting somewhere[if player has moss cap]. Maybe if you physically get somewhere, we can get further[end if].' Curtis hands you a coin for your efforts."
1	3	0	0	1	0	"'Wow. So much done at once.' Curtis hands you two coins for your efforts."
1	4	0	0	1	1	"'Spurtin['] turnips! All that at once? I--well, here's the rest of my junk I don't know what to do with.' Curtis, looking very pleased, hands you two coins and some sort of dollar."
2	3	0	0	1	0	"Curtis, looking quite the citric critic, hands you another coin identical to the one he gave you before."
2	4	0	0	1	1	"Curtis hands you another coin and a suspicious looking dollar. He nods as if to say, that's all you'll get from him."
3	4	0	0	0	1	"'Nice going. Here. Have this paper currency I never could quite spend. It looks kind of illegal. It's all I have for you.'"

chapter moss cap

the moss cap is a thing.

description of moss cap is "The moss bits of the cap go on the outside, leaving the dirty bits to fit over your head. So you'd feel AND look weird wearing it."

instead of wearing moss cap:
	say "It was a stupid idea, and it'll look stupid if you wear it."

chapter compass

the compass is a thing.

description of compass is "It is property of Camp SOS. Its needle is pointing steadily north, so at least it wasn't a SpasmCo product."

check examining compass when mrlp is routes:
	say "It's flipping about uselessly. Guess you can't rely on normal directions here." instead;

the needle is part of the compass. needle is undesc. needle is useless

instead of doing something with the needle:
	say "The needle's inside the compass, and you don't need to mess with it."

a-text of moss cap is "RYRRYRR". b-text of moss cap is "RGRRYRR". parse-text of moss cap is "x[sp]o[sp]x[sp]x[sp]a[sp]x[sp]x".

check going north in Rustic Citrus:
	if moss cap is off-stage, try going south instead;
	if player has moss cap:
		say "The moss cap isn't helping your sense of direction as much as it should. Well, not in its present form." instead;
	now others is unspoiled;

chapter drinks stand

the abandoned drinks stand is scenery in Rustic Citrus. "[one of]It's pretty easy to see why it's abandoned. Unfortunately, it's not hi-tech enough to be hooked up to a wiki with gifs, which would make things easier for you. (Technology often does.) But you do find a can of nasty peanut cola there. It's too gross in concept to take. And there's a rampage note with a mopeage rant[if pears are in lalaland], and plans for a megaton pear,[end if] under some magenta rope. And there's a lame video collection.[or]There's no other nasty cola, or writing, or 'art,' to find.[or]You've searched the stand pretty thoroughly.[stopping][if eerie blurbs are visible] You notice some eerie blurbs written on the stand.[end if]"

check taking drinks stand:
	say "The drinks stand is too big to take[if slime is off-stage], but maybe it's worth examining[else], and you sort of ransacked it anyway[end if]." instead;

the citrus sign is part of the abandoned drinks stand. description is "It says CURTIS['] (sic) RUSTIC CITRUS.". the citrus sign is useless.

after examining abandoned drinks stand (this is the three fruits in drinks stand rule) : [all 3 conditions should be all true or all false, but just in case...]
	if peanut cola is off-stage:
		now peanut cola is in rustic citrus;
	if magenta rope is off-stage:
		if pears are not off-stage:
			now megaton pear is in Rustic Citrus;
		now magenta rope is in Rustic Citrus;
		now rampage note is in Rustic Citrus;
		now mopeage rant is in Rustic Citrus;
	if videotape collection is off-stage:
		now videotape collection is in Rustic Citrus;
	continue the action;

chapter blueberries

the eerie blurbs are part of the abandoned drinks stand. description is "A weird blue-purple. None of them make sense, but you can read them."

a-text of eerie blurbs is "RRYYRYRRYYR". b-text of eerie blurbs is "RRYYRYRRYYP". parse-text of eerie blurbs is "b[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]e[sp]s".

check scaning blurbs when cheat-on is true:
	say "You just generally scan the blurbs, not noting them, and it turns up one positive..."

the blueberries are a plural-named fruit. description is "Yes, they're really more purple, I know."

chapter cantaloupe

the cantaloupe is a fruit.

the can of peanut cola is a thing. description is "There's an actual peon on one side, a neat cupola on the other. It's orange-pink and tan."

a-text of peanut cola is "RYRRYRYYRY". b-text of peanut cola is "RYRRYRYYRY". parse-text of peanut cola is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]-[sp]x[sp]-".

check drinking peanut cola:
	say "[one of]Eww. Nasty[or]You don't want to repeat that experiment[stopping]. If only you could change it into something else entirely with just one word!" instead;

Instead of taking the peanut cola:
	say "Blech. Too nasty to touch. You might drink it in a moment of weakness."

chapter persimmon

the persimmon is a fruit.

the videotape collection is scenery. description is "A bunch of weird films in this collection. One title, in red, is [i][one of]Mr. Pinsome[or]One Ms. Prim[or]Moni's Perm[or]Nope, Mr. Sim[in random order][r]."

a-text of videotape is "RYRRYRRYR". b-text of videotape is "RYRRYRRYR". parse-text is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]n".

chapter pomegranate

the pomegranate is a fruit.

the magenta rope is a vanishing thing. "A magenta rope is here by the drinks stand, partially obscuring a rampage note and mopeage rant."

a-text of magenta rope is "RYRYRRYRYRY". b-text of magenta rope is "RYRGRRGRYRG". parse-text of magenta rope is "x[sp]-[sp]x[sp]e[sp]x[sp]x[sp]a[sp]x[sp]-[sp]x[sp]e".

does the player mean doing something with rampage note when rampage note is visible: it is very likely.

description of magenta rope is "Oddly colored. It's got a yellowish tinge."

instead of doing something with megaton pear:
	if action is procedural, continue the action;
	say "It's--well, maybe not a megaton, but it sure is heavy. And certainly inedible. Maybe it can be changed to a real fruit."

instead of doing something with rampage note:
	if action is procedural, continue the action;
	say "A glance seems to indicate some unfortunate writing--either Curtis actually still believes that stuff, or he's embarrassed ever to have written it. Either way, he doesn't need to be alerted to you knowing about it. Best to get rid of it."

instead of doing something with mopeage rant:
	if action is procedural, continue the action;
	say "A glance seems to indicate some unfortunate writing--either Curtis actually still believes that stuff, or he's embarrassed ever to have written it. Either way, he doesn't need to be alerted to you knowing about it. Best to get rid of it."

instead of taking magenta rope:
	say "It would uncover Curtis's silly writings--the note and the rant. You'd be best off getting rid of all three, somehow."

the megaton pear plans are plural-named auxiliary scenery. description of megaton pear is "[bug-report]".

a-text of megaton pear is "RYRYRRYRYRY". b-text of megaton pear is "RYRYRRYRYRY". parse-text of megaton pear is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-".

the rampage note is auxiliary scenery. description of rampage note is "[bug-report]".

a-text of rampage note is "RYRYRRYRYRY". b-text of rampage note is "RYPYRRYPYPG". parse-text of rampage note is "x[sp]-[sp]m[sp]-[sp]x[sp]x[sp]-[sp]n[sp]-[sp]t[sp]e".

the mopeage rant is auxiliary scenery. description of mopeage rant is "[bug-report]".

a-text of mopeage rant is "RYRYRRYRYRY". b-text of mopeage rant is "RGRGRRYRGRY". parse-text of mopeage rant is "x[sp]o[sp]x[sp]e[sp]x[sp]x[sp]-[sp]x[sp]a[sp]x[sp]-".

after fliptoing pomegranate: [the magenta rope is already flipped]
	now megaton pear is in lalaland;
	now rampage note is in lalaland;
	now mopeage rant is in lalaland;
	continue the action;

book Swell Wells

Swell Wells is north of Rustic Citrus. "Wells, err, swell from this [one of]lowland[or]old lawn[cycling]. You can go east to a loud clearing, or down the wells, or west to a filed field[if sorer bogey is visible]. You think you hear something from the wells[end if][if green stain is visible]. There's also a green stain among the wells[end if].". Swell Wells is in Others.

s-w are privately-named scenery in swell wells. printed name of s-w is "the wells". understand "wells" and "swell wells" as s-w. "It's been vandalized in oh so many ways. [what-clear]."

to say what-clear:
	if sorer bogey is not in swell wells and stucco is not in swell wells:
		say "You got rid of some of it, and that's probably all you need to";
	else if stucco is not in swell wells:
		say "'Ye Borers, go!' is written in red";
	else if sorer bogey is not in swell wells:
		say "An advertisement for [stucco-ad] is on stucco and in red";
	else:
		say "Two prominent ones in red: 'Ye borers, go!' and [stucco-ad] on stucco"

the stucco is scenery in swell wells. "One of two advertisements is for [stucco-ad], whatever that is, in red, on stucco, on the side of one of the wells.".

to say stucco-ad:
	say "[one of]ScoutCon[or]SunCotCo[in random order]"

a-text of stucco is "RYRYRYRR". b-text of stucco is "RYRYRYRR". parse-text of stucco is "x[sp]-[sp]x[sp]o[sp]x[sp]-[sp]x[sp]x".

the coconuts are a plural-named fruit.

after printing the locale description for swell wells when swell wells is unvisited:
	say "And what's this? The wells cough up an unexpected wish-coin. It looks like...why, yes it is! A miser ruble!";
	now miser ruble is in swell wells;

check inserting into s-w:
	if noun is coin or noun is coins:
		say "Maybe make your own luck by doing something with/to the coin[if noun is coin]s." instead;
	say "They're dry wells. You can see all the way down. If you want, you can go that way." instead;

check climbing s-w:
	try going down instead;

check going to Swell Wells for the first time:
	say "'Ramble, ambler!' Curtis calls.";

chapter tangerines

the green stain is scenery in Swell Wells. "It makes you see red even before looking closely at you, and when you do, it seems to be sneering at you. As if to resent gain."

a-text of green stain is "RYRRYRYRYR". b-text of green stain is "RYRRYRYRYR". parse-text of green stain is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

the tangerines are plural-named fruit. "You can't tell where they're from. If you look at one, you'd guess Argentine. Or all of them, Energistan."

chapter mulberries

the miser ruble is a thing. "The miser ruble the swell wells coughed up lies here.". description of miser ruble is "It's an odd purplish-blue, even more oddly engraved with BEMIRE! SLUR! in red."

the mulberries are a plural-named fruit.

a-text of miser ruble is "RYRRYRRYYR". b-text of miser ruble is "PYRRYPRYYR". parse-text of miser ruble is "m[sp]-[sp]x[sp]x[sp]-[sp]r[sp]x[sp]-[sp]-[sp]x".

chapter gooseberry

the sorer bogey is ghostly scenery in Swell Wells. "You can't see the sorer bogey, but knowing it's there makes your skin break out in pimples...no, bumps."

check taking sorer bogey:
	say "Don't be a silly goose." instead;

a-text of sorer bogey is "RYYRYRYRRO". b-text of sorer bogey is "RGYRYPYRRB". parse-text of sorer bogey is "x[sp]o[sp]-[sp]x[sp]-[sp]b[sp]-[sp]x[sp]x[sp]y".

the gooseberry is a fruit.

the lost slot is a thing. description of lost slot is "It's soft to the touch, as if it could change its shape for the right item."

the silly shirt is a thing in Swell Wells. "A silly shirt lies here."

chapter apricot

the riot cap is a thing in swell wells. description is "It's orangish-reddish, an odd pastel. It looks even dumber than the moss cap from Curtis. Red writing is stamped on each side of the riot cap. You can read it.". "A riot cap hangs from one of the wells."

a-text of riot cap is "YRRYRYR". b-text of riot cap is "YRRYPYR". parse-text of riot cap is "-[sp]x[sp]x[sp]-[sp]c[sp]-[sp]x".

the apricot is a fruit. "It's a regular apricot. Nothing special."

instead of doing something with riot cap:
	if action is procedural, continue the action;
	say "The riot cap is pretty sturdy, and less useful for you than the moss cap, unless or until you can change it into a fruit."

chapter apples

description of silly shirt is "It's a hideous red-and-green-and-yellow blend with the phrase 'Got ESP, PAL?'"

a-text of silly shirt is "YRRRYR". b-text of silly shirt is "YRPRYR". parse-text of silly shirt is "-[sp]x[sp]p[sp]x[sp]-[sp]x". silly shirt is cheat-spoilable.

instead of doing something with silly shirt:
	if action is procedural, continue the action;
	say "You wouldn't want to take or wear the shirt. Maybe it can be recycled.";

the apples are plural-named fruit.

book gates stage

Gates Stage is north of Swell Wells. "Gropin['] roping prevents you from going west or east. The swell wells are back south, and important-looking gates, [if halt lath is in gates stage]barred by a halt lath[else]open now[end if], lead to the north. They don't look strictly locked, but you probably need some sort of ID--or confidence--to get by them. [one of]What could be behind them? A near arena? You take a step back. Yes...it looks like you have found a secret rear entrance to the Valence Enclave, where great political debates and pronouncements are always held![or]The Valence Enclave lies ahead[stopping].". Gates Stage is in Others.

after looking in gates stage (this is the retract halt lath rule):
	if halt lath is in gates stage and player has popstar's passport:
		say "Your popstar's passport beeps quickly. The halt lath rises and retracts into the gates to the north.";
		now halt lath is in lalaland;
	continue the action;

check going inside in gates stage:
	try going north instead;

section valence enclave

the Valence Enclave is scenery in Gates Stage. "Almost as big as Yorpwald's famous, enormous Admit-Us Stadium, it's reserved for very special events indeed! Whatever could be inside?"

understand "near arena" and "near/arena" as valence enclave.

instead of doing something with valence enclave:
	if action is procedural, continue the action;
	if current action is entering, try going north instead;
	say "You can't do much but look at the Valence Enclave. Or try to enter it."

section gs = gates

check entering gs:
	try going north instead;

does the player mean entering gs: it is likely;

gs are privately-named scenery in Gates Stage. printed name of gs is "gates". "They're [if halt lath is in gates stage]open for easy entry north[else]closed by a halt lath[end if]."

check taking gs:
	say "No way you could move the gates." instead;

understand "gate" as gs.

section halt lath

the halt lath is part of the gs. the halt lath is undesc.

instead of doing something with the halt lath:
	if action is procedural, continue the action;
	say "The halt lath looks sturdy and won't budge physically.";

understand "gates" as gs.

check closing gs:
	say "They're not some late game lame gate. They won't open or close at your whim." instead;

check opening gs:
	say "[if player has passport]You need some sort of passport to get through.[else]You wave the passport and the grates start to creak open.[end if]" instead;

instead of opening gs:
	try going north;

instead of giving something to gs:
	say "The gates seem to have a sensor that can detect if you have ID[if player has passport]. You know, that passport should be enough[end if]."

section gropin' roping

the gropin' roping is bounding scenery in Gates Stage. "The gropin['] roping guards you from going west or east."

instead of doing something with the halt lath:
	if action is procedural, continue the action;
	say "You don't want to tangle with the gropin['] roping, because it will probably tangle with you, back.";

section check for PERP

perp-check is a truth state that varies.

to say two-of-three:
	say "[if searcher is not reflexed]prep and review[else if viewer is not reflexed]research and prep[else]review and research[end if]"

perp-priv is a privately-named thing. it is reflexive. description is "bug".

perp-priv is cheat-spoilable.

a-text of perp-priv is "RRYR". b-text of perp-priv is "PRYP". parse-text of perp-priv is "P[sp]R[sp]E[sp]P".

understand "perp-priv" as perp-priv when debug-state is true.

chapter big endgame check

check going north in Gates Stage:
	if player does not have passport:
		say "'Need ID! Indeed!' the gates say mechanically." instead;
	if number of carried fruits > 0:
		say "(First returning the extra fruit[unless number of carried fruits is 1]s[end if])[paragraph break]";
		now all carried fruits are in lalaland;
	if gate-level < 2:
		now perp-check is true;
		now perp-priv is part of the passport;
	if gate-level is 0:
		say "You try to sneak through--you're backstage at the Valence Enclave! You might be able to make a big speech, but you are too terrified. The passport doesn't help a bit as a bouncer yells 'Perp!' Maybe you can learn from the passport. Or parts of it." instead;
	else if gate-level is 1:
		say "[one of]You try to sneak into the Valence Enclave, and you hold up under some questioning--but you don't have enough 'cool' to get past the final guard. [if perp-check is false]He yells 'PERP!' and pushes you back. [end if]And with the stage in sight! Thankfully, you have enough to know you'd better leave before people turn hostile[or]You haven't learned anything new since your last attempt to enter[stopping]. Maybe you can use that passport some more." instead;
	say "You've managed to [two-of-three] about this whole charisma thing, but you wonder, does it really work? Is it really that easy, if you don't overthink it? Well, why not? You've mastered all the parts of speech, and now your knowledge of more practical word-use gets you by various guards in the Valence Enclave. You're blinded by an air-gem mirage at the gig going on--the TV show, Optical/Topical Capitol, Elections Selection edition. A three-way debate: Interims Minister Rimstein, Ex-Brat Baxter of the Swanker Wankers and Fatherly Flaherty of the Ruthless Hustlers![paragraph break]The crowd gasps as they recognize you on the stage. But what do you say? 'Able, I'd bailed' gets silence at first.[wfak]Then, a lone voice. 'Re-speak, speaker!' The simple encouragement spurs you: 'HER FAULT! ARTFUL, EH?' [twiddle of table of political slogans and 2][paragraph break]'Go, O.G.,' people call. You're on a roll! 'I shut a hiatus!' By trial 4 or 6, a fair vote proclaims you favorite. Everyone's all '[mami].' You can only say 'Ah, I try out authority.' Your Means Manse becomes the Furthermore-Reformer Hut.[paragraph break]It won't be easy. You'll likely procrastinate a few big choices with random anagrams, from force of habit. But you've learned how, well, all KINDS of words work a bit better, now.[paragraph break]Congratulations! You achieved the 'extended' ending in A Roiling Original. But wait: there's a little more, if you can't get enough. DEMO DOME MODE, if you want, which is a puzzleless look behind the scenes, featuring items that didn't fit in and random musings about building code and so forth. You can access it now or when you restart.";
	if did-guru is false:
		say "[line break]You also get an additional point for not using the arugula!";
		min-and;
		consider the notify score changes rule;
	now others is solved;
	if debug-state is true:
		append "Test passed for Others.[line break]" to the file of debuggery;
	if epilogue rule is a final response rule listed in the Table of Final Question Options:
		choose row with final response rule of epilogue rule in the Table of Final Question Options;
		blank out the whole row; [don't let the player ROVE OVER again]
	choose the row with final response activity of putzing about in the table of final question options;
	now final response activity entry is nextlisting; [this is an awful hack but I'd rather not reveal this til after you beat OTHERS]
	choose the row with final response activity of putzing around in the table of final question options;
	now final response activity entry is prevlisting;
	choose the row with final response activity of nrling about in the table of final question options;
	now final response activity entry is nextreglisting;
	choose the row with final response activity of potzing around in the table of final question options;
	now final response activity entry is showing a list;
	choose the row with final response activity of potzing about in the table of final question options;
	now final response activity entry is showing list of lists;
	choose the row with final response activity of reging about in the table of final question options;
	now final response activity entry is showing regional lists;
	choose the row with final response activity of ddming in the table of final question options;
	now final response activity entry is demo dome moding;
	now left hand status line is "VALENCE ENCLAVE";
	end the story finally saying "A Giddy Route: You Did Great" instead;

every turn when player is in gates stage and perp-check is true and perp-priv is not reflexed (this is the perp-clue rule):
	if a random chance of 1 in 2 succeeds:
		say "The bouncer's yell of 'PERP!' rings in your ears.";

chapter sonicing

does the player mean doing something with coins when coins are off-stage: it is likely.
does the player mean doing something with icons when icons are off-stage: it is likely.
does the player mean doing something with coin when coin is off-stage: it is likely.
does the player mean doing something with icon when icon is off-stage: it is likely.

a coin is a thing. description is "The coin really looks more omen-y than money. Perhaps its value is only symbolic, and it could help you with the stuff money can't buy. There's a singed design on it, which is signed."

a thing can be final-puz. a thing is usually not final-puz.

s-i is final-puz. s-c is final-puz. coin is final-puz. coins are final-puz. icon is final-puz. icons are final-puz. tekno-token is final-puz.

check giving a final-puz thing to when mrlp is others:
	if second noun is storage:
		try inserting noun into second noun instead;
	if second noun is curtis:
		say "No, [if second noun is plural-named]they're[else]it's[end if] all yours[unless noun is coin or noun is coins], especially now that you've changed things a bit[end if]!" instead;
	if second noun is len craig:
		say "[if noun is tekno-token]Maybe decide what to buy, or how[else]Not Len's sort of currency[end if]." instead;
	if second noun is Red Rat Art Erd or second noun is Dr Tera Darter:
		say "[second noun] is probably interested in something much more obviously valuable." instead;
	say "No, that's yours. Payment from Curtis[unless noun is coin or noun is coins], well, in its old form[end if]. But what to do next with it?" instead;

a-text of coin is "YRYR". b-text of coin is "YRYP". parse-text of coin is "i[sp]c[sp]o[sp]n". coin is cheat-spoilable.

an icon is a thing. description is "The icon is designed to be too interesting to pitch but not important looking enough to be currency. There's a singed design on it, which is signed."

some coins are plural-named things. description is "The coins really look more omen-y than money. Perhaps their value is only symbolic, and they could help you with the stuff money can't buy. There's a singed design on them, which is signed."

the singed design is part of the coin. description is "The singed design is some sort of amalgamation of musical notes and instruments intertwined. You can't read who wrote it, but it makes the coin look more artsy than commercial."

understand "designs" as singed design when mrlp is others

definition: a thing (called myt) is iconic:
	if myt is icon, yes;
	if myt is icons, yes;
	if myt is coin, yes;
	if myt is coins, yes;
	if myt is s-c, yes;
	if myt is s-i, yes;
	no;

check reading (this is the default to singed design rule) :
	if noun is iconic:
		if singed design is not part of the noun:
			say "BUG: there should be a singed design to read." instead;
		try reading singed design instead;

instead of doing something with singed design:
	if current action is scaning:
		say "(You wind up scanning the coin instead.)";
		let myc be a random thing incorporating singed design;
		try scaning myc instead;
	if current action is examining:
		continue the action;
	say "You can't do much with the design except examine it.";

the icons are plural-named things. description is "The icons are designed to be too interesting to pitch but not important looking enough to be currency. Instead of someone important, they each have shattered musical notes on them. Each has a singed design, signed."

check sbing coins: [can't find any way else to do this]
	say "The settler is all over the place. Maybe it would be better to scan just one coin?";
	if the player direct-consents:
		say "Your settler registers YRY (R and P).";
	else:
		say "The final of the five entries stays on red in non-cheat mode, but everything else is scrambled.";
	the rule succeeds;

check scaning coins:
	say "The settler flashes back, with [if cheat-on is true]all five entries changing[else]all but the last entry--which stays red--changing[end if].";
	say "Hm. Maybe it would be better to scan just one coin?";
	if the player direct-consents:
		let mytext be indexed text;
		if cheat-on is true:
			now mytext is b-text of coin;
		else:
			now mytext is a-text of coin;
		say "Your settler registers [spacies of mytext]." instead;

a-text of coins is "????R". b-text of coins is "?????". parse-text of coins is "?[sp]?[sp]?[sp]?[sp]?".

a-text of icons is "RYRYR". b-text of icons is "RYRYR". parse-text of icons is "-[sp]x[sp]-[sp]x[sp]x".

the s-c are privately-named plural-named things. description of s-c is "The coins vibrate from the sound they make. They looks even more omen-y than money.". understand "sonic/ coins" as s-c. printed name of s-c is "sonic coins".

understand "coin" and "sonic coin" as s-c when player has s-c.

a-text of s-c is "YRYRR". b-text of s-c is "YRY??". parse-text is "-[sp]x[sp]-[sp]x[sp]x".

the s-i are privately-named plural-named things. description of s-i is "The icons vibrate from the sound they make. They may have some hidden power. Or some trivial one.". understand "sonic/icons" and "sonic icons" as s-i. printed name of s-i is "sonic icons".

understand "icon" and "sonic icon" as s-i when player has s-i.

sonicing is an action applying to nothing.

to slot-appear:
	if lost slot is not part of storage box:
		say "The So-Great Storage box begins to rattle by your [if player has s-i]icons[else if player has s-c]coins[else][bug-report][end if], and a lost slot appears in it.";
		now lost slot is part of storage box.

check inserting into storage box:
	if lost slot is visible:
		say "The box has a slot, so I assume you meant that.";
	try inserting noun into lost slot instead;

check inserting into lost slot:
	if noun is s-c or noun is coins:
		say "The coins hum a bit before they're spit back out. You catch them. The box seems averse to money." instead;
	if noun is tekno-token or noun is coin:
		say "The box wheezes slightly and spits the monetary item back out." instead;
	if noun is icon or noun is icons:
		say "The box splutters for a while but eventually rejects the [noun]. Still, you must be close to having the right thing." instead;
	if noun is not s-i:
		say "That doesn't fit." instead;
	say "As you perform the toll-toss, you think you hear tots['] LOLs. The box opens up, dissolving to reveal a popstar's passport.";
	now storage box is in lalaland;
	now s-i is in lalaland;
	now player has popstar's passport;
	consider the retract halt lath rule;
	the rule succeeds;

the popstar's passport is an uncluing thing. description is "It's got a picture inside, of you. And surprisingly, it's flattering and realistic and electronic! With an artifact this rare, you feel [if viewer is reflexed or searcher is reflexed]full of[else]near to[end if] stardom most rad. It's interactive, too--there's a little viewer on the right and a searcher on the left, and once you really learn how to use it, maybe the passport can be a minder, too. Written on the bottom is some nonsense about how it's not enough to have the passport to improve quality of life--you need to use it, too."

check scaning the passport:
	if viewer is reflexed:
		say "The settler only lights up when it points at the searcher.";
		try scaning searcher instead;
	if searcher is reflexed:
		say "The settler only lights up when it points at the viewer.";
		try scaning viewer instead;
	say "The settler's reading for the passport seems to alternate between six and eight characters--for the viewer and researcher. You should maybe scan one individually." instead;

the viewer is part of the passport. the viewer is reflexive. description is "[if viewer is reflexive]You poke around at the viewer but aren't focused enough. You're convinced it should be good for you, and you can learn from it, but you are having too much fun messing around.[else]You've gotten what you can from it. Through the gates![end if]"

a-text of viewer is "RYRYYR". b-text of viewer is "RYRYGR". parse-text of viewer is "x[sp]-[sp]x[sp]-[sp]e[sp]x".

instead of doing something to the viewer:
	if action is procedural, continue the action;
	try examining the viewer instead;

the searcher is part of the passport. the searcher is reflexive. description is "[if viewer is reflexive]You poke around at the searcher but aren't focused enough. You're convinced it should be good for you, and you can learn from it, but you are having too much fun messing around.[else]You've gotten what you can from it. Through the gates![end if]"

a-text of searcher is "RYRYYRRR". b-text of searcher is "RGRYYRRR". parse-text of searcher is "x[sp]e[sp]x[sp]-[sp]-[sp]x[sp]x[sp]x".

instead of doing something to the searcher:
	if action is procedural, continue the action;
	try examining the searcher instead;

chapter passport stuff

to decide which number is gate-level:
	let A be 0;
	if viewer is reflexed:
		increment A;
	if searcher is reflexed:
		increment A;
	if perp-priv is reflexed:
		increment A;
	decide on A.

check fliptoing when gate-level is 2:
	if noun is part of the passport:
		say "No need to over-study or over-think. Through the gates!" instead;

to upgrade-passport:
	if gate-level is 2:
		say "Man! Another time you just out and learned stuff and didn't get bogged down in mental gymnastics. You feel brief guilt until you realize you've paid your dues. SOMEthing should be simple, SOMEtime.[paragraph break]'Gray date? Great day!' you tell yourself. You feel ready to tackle what lies in the Valence Enclave, now[if cur-score of others < max-score of others]. You wonder if you could've helped Curtis a bit more, but that's totally up to you[end if].";
	else if gate-level is 1:
		say "Well! That was simpler than a lot of other things you had to figure out. Perhaps Elvira was right that anagram puzzles can make people overthink much, even if she was wrong about everything else. You feel almost ready to see what awaits in the Valence Enclave, now. Even if you didn't get anywhere, the failure might teach you something.";
	continue the action;

chapter reviewing

after fliptoing when player has passport (this is the part-of-passport rule):
	if noun is searcher or noun is viewer or noun is perp-priv:
		upgrade-passport;
	continue the action.

book Clangier Clearing

check fliptoing when player is in clearing and player does not have tekno-token:
	if noun is not carried by player:
		let temp be number of fruits in lalaland + number of fruits carried by player;
		say "That would work, but you don't have anything resembling currency to haggle with. Maybe you [if temp < 8]can earn some currency elsewhere[else]can go see Curtis for remuneration. You've done a good bit[end if].";
		preef noun;
		do nothing instead;

Clangier Clearing is east of Swell Wells. Clangier Clearing is in Others. "A streperous superstore blocks any exit except back west.[paragraph break]You notice a list of prices and another banner saying AUCTION CAUTION.[paragraph break]Nameless salesmen employ all sorts of speech tricks and gesturing to haggle here. Maybe if you LISTEN, you might get in the flow."

after looking in clangier clearing:
	set the pronoun them to nameless salesmen;
	continue the action;

the nameless salesmen are scenery in clangier clearing. "The nameless salesmen are, well, nondescript but numerous. They ignore you, and none seems as interesting as Len Craig."

the streperous superstore is bounding scenery in Clangier Clearing. "It's big and intimidating and you would probably get lost there. It's one of Elvira's biggest inventions, and though she's gone, you can't just go blowing it up. Not with people inside, and employed by it."

check going inside when player is in clangier clearing:
	try going east instead;

check entering superstore:
	try going east instead;

before talking to nameless salesmen:
	say "You feel, well, lameness at having nothing to say to the salesmen. Don't worry, they're not important." instead;

Include (-
	has transparent talkable
-) when defining nameless salesmen.

after choosing notable locale objects when player is in clangier clearing:
	set the locale priority of len craig to 1;
	repeat with froo running through fruits in clearing:
		if froo is not carried:
			set the locale priority of froo to 6;

for writing a paragraph about a fruit (called froo) in Clangier Clearing:
	say "Still for barter: [a list of not mentioned fruits in clearing].";
	now lemons are mentioned;
	now melon is mentioned;
	now nectarine is mentioned;

a mango is a fruit.

clearing-fruits is a number that varies.

after fliptoing when player is in clearing:
	if noun is a fruit or noun is l-o-p:
		increment clearing-fruits;
	continue the action;

a tekno-token is an improper-named thing. description of tekno-token is "It bears the stamp of OKNet, who control its production and so forth. You have no clue how much is left on it, but though it looks like a bluer ruble, it's decent enough to barter with.". understand "tekno/ token" and "tekno" as tekno-token.

the l-o-p is privately-named proper-named reflexive scenery in Clangier Clearing. "Reading the list, the kumquat [if kumquat is reflexive]in particular seems too expensive and probably easiest to barter down, or whatever[else]is the most reasonably priced item on the list[end if], though other prices almost make you want to curse."

check taking l-o-p:
	say "That'd leave everyone in the market confused[if l-o-p is reflexed] and undo your help fixing the prices[end if]." instead;

understand "price list" or "list/ of/ prices" as l-o-p.

the printed name of l-o-p is "the list of prices".

a-text of l-o-p is "RRYRYR". b-text of l-o-p is "RPGRGP". parse-text of l-o-p is "x[sp]r[sp]i[sp]x[sp]e[sp]s". l-o-p is parse-spoilable.

the kumquat is a fruit. description is "Weird and orange and oblong."

check fliptoing kumquat when kumquat is in lalaland:
		say "Len Craig already gave you enough for your help. Don't push it." instead;

check fliptoing papayas when papayas are in lalaland:
		say "You already got credit for prompt payment." instead;

the auction caution is reflexive scenery in Clangier Clearing. "It's pretty clear: PAY ASAP covers over half of it. That probably applies to non-auctions, too.". understand "banner" as auction caution.

a-text of auction caution is "RYRYOYR". b-text of auction caution is "RYRYOYR". parse-text of auction caution is "x[sp]a[sp]x[sp]a[sp]y[sp]a[sp]x".

some papayas are a plural-named fruit. description is "Goldish and gourdish."

instead of doing something with auction caution:
	if the current action is taking:
		say "Vandalism." instead;
	unless the action is procedural:
		say "You can really only examine the banner[if caution is reflexive] or maybe get another fruit from it[end if]." instead;
	continue the action;

Len Craig is a person in Clangier Clearing. "[one of]A man introduces himself as Len Craig, proprietor of LargeInc. He's willing to haggle, if you have the right items[or]Len Craig is still here, [len-interest][stopping]."

to say len-interest:
	let temp be 0;
	repeat with QQ running through clearing-hintables:
		if QQ is in clearing:
			increment temp;
	if temp is 8:
		say "welcoming your first transaction";
	if temp > 4:
		say "ready for negotiation and such";
	else if temp is 3:
		say "looking a bit tired--you've done good business";
	else if temp is 2:
		say "dealing with other customers. You've done good business with him";
	else if temp is 1:
		say "barely noticing you";
	else if temp is 0:
		say "but you've dealt with him profitably enough. Win-win stuff, of course"

description of Len Craig is "Unperturbed by the noise, he makes hand and nodding gestures at everything he has for sale."

some lemons are a reflexive fruit in clearing.

a melon is a reflexive singular-named fruit in clearing.

description of lemons is "Sour and frowny."

a-text of lemons is "RYRYRR". b-text of lemons is "RYRYRR". parse-text of lemons is "x[sp]-[sp]x[sp]-[sp]x[sp]x".

description of melon is "[unless player carries the melon]Surely there must be a better one. It can't be the only one on display[else]It's nice and big and healthy looking[end if]."

a-text of melon is "RYR??". b-text of melon is "?????". parse-text of melon is "x[sp]-[sp]l[sp]-[sp]x[sp]x".

A nectarine is a reflexive fruit in Clangier Clearing.

a-text of nectarine is "YRRYYRRYR". b-text of nectarine is "YRPYYRRYR". parse-text of nectarine is "-[sp]x[sp]c[sp]-[sp]-[sp]x[sp]x[sp]-[sp]x".

The description of the nectarine is "[if nectarine is reflexed]It's greener than green and could use aging, maybe a little wrinkling[else]It looks fully ripe[end if]." [ancienter/ancienter]

A quince is a reflexive fruit in Clangier Clearing. description of quince is "[if quince is reflexive]Written on it is NAME A PRICE IN ITALIAN[else]Nothing too special about it[end if]. It looks like your average combination of an apple and a pear."

a-text of quince is "RYRRYY". b-text of quince is "RYRRYG". parse-text of quince is "x[sp]-[sp]x[sp]x[sp]-[sp]e". quince is cheat-spoilable.

An overpriced peach is a reflexive fruit in Clangier Clearing.

check taking a fruit when player is in clangier clearing:
	if player has noun:
		continue the action;
	say "That'd be shoplifting. Surely you can try to bargain instead." instead;

description of the overpriced peach is "[if peach is reflexive]Len Craig sees you looking at it and assures you it's expensive[otherwise]Plump and fuzzy[end if]."

a-text of peach is "RRYYR". b-text of peach is "RRYYR". parse-text of peach is "x[sp]x[sp]-[sp]-[sp]x". peach is cheat-spoilable.

check taking (this is the shoplift in clearing rule) :
	if noun is in clearing:
		say "No stealing. This is a marketplace!" instead;

the pre-mang is privately-named scenery in Clangier Clearing. pre-mang is undesc.

a-text of pre-mang is "YRYRR". b-text of pre-mang is "YRYRR". parse-text is "-[sp]x[sp]-[sp]x[sp]x".

before fliptoing mango:
	if player does not have tekno-token:
		say "You'd look a little too suspicious mingling without anything of value to trade. Maybe when you have something, though.";
		preef mango;
		the rule succeeds;

book Filed Field

chapter where it is, and scenery

Filed Field is west of Swell Wells. "I'd call this a mowed meadow or a purest pasture, but that'd be cheating. Ego-fail foliage cause foilage all directions except east. [if b-w are visible]Barriers west block you a bit extra. [end if][if pipe panel fence is visible]A fence--the kind they call pipe panel--is here. [end if][if rapt figure is visible]A rapt figure towers here. [end if][if briar screen is visible]You can also see a briar screen, and you hear barren cries. [end if][if b-r is visible]A buried raft lies here, too. [end if][if pipe panel fence is in lalaland and briar screen is in lalaland and b-w is in lalaland and rapt figure is in lalaland and b-r is in lalaland]You've gotten rid of all the really obtrusive scenery here--good job![else][end if]". Filed Field is in Others.

the ego fail foliage is bounding scenery in filed field. "The ego fail foliage will still block you going anywhere but back east, even with the more man-made obstacles gone."

printed name of ego fail foliage is "ego-fail foliage"

understand "foilage" and "foilage foliage" as ego fail foliage.

chapter breadfruit (Ohai Philip Larkin!)

the b-r is scenery in Filed Field. "It's jammed into the ground. You can't take it.". printed name of b-r is "buried raft". understand "buried/raft" and "buried raft" as b-r.

a-text of b-r is "RRYYRRRYYR". b-text of b-r is "PRYYRRPYYP". parse-text of b-r is "b[sp]x[sp]-[sp]-[sp]x[sp]x[sp]r[sp]-[sp]-[sp]t".

check taking b-r:
	say "You imagine a toad called work squatting on you as you do this. Maybe you should try to change the buried raft, instead." instead;

the breadfruit is a fruit. description is "It doesn't look doughy at all. Too bad Philip Larkin's ghost isn't around, or you could show him what one looks like. That'd be a cultural experience!"

chapter watermelon

the watermelon is a fruit. description is "It isn't too heavy or big to carry, thankfully."

the mean trowel is a thing in Filed Field. description is "It has some red writing saying who made it and also what it protects against."

a-text of mean trowel is "RYRYRRYRYR". b-text of mean trowel is "RYRYRRYRYR". parse-text of mean trowel is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]".

check taking the mean trowel:
	say "You can't find anything to dig, dig?" instead;

chapter cranberries

some cranberries are a plural-named fruit.

the barren cries are scenery in Filed Field. "You can't see them or where they're coming from. But they sound sour and bitter and tiny."

a-text of barren cries is "RRYRRYRRYYR". b-text of barren cries is "RRYRRYRPGGP". parse-text of barren cries is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]r[sp]i[sp]e[sp]s".

The briar screen is scenery in Filed Field. "It's stained dark off-red and smells kind of bitter. You can barely see what it is screening. Examining it amplifies the barren cries."

a-text of briar screen is "RRYRRYRRYYR". b-text of briar screen is "RPYRRYRPYGR". parse-text of briar screen is "x[sp]r[sp]-[sp]x[sp]x[sp]-[sp]x[sp]r[sp]-[sp]e[sp]x".

after fliptoing cranberries:
	now briar screen is in lalaland;
	now barren cries are in lalaland;
	continue the action;

Instead of taking the briar screen:
	say "The briars it is screening would prickle you."

chapter grapefruit

the rapt figure is scenery in filed field. It is fixed in place.

a-text of rapt figure is "RRYRYRRYYR". b-text of rapt figure is "RRYRYRRGYR". parse-text of rapt figure is "x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]u[sp]-[sp]x".

description of rapt figure is "It's smiling, with ruby red lips and white teeth. It's holding a jagged spoon."

the grapefruit is a fruit.

the jagged spoon is part of the rapt figure. understand "utensil" as jagged spoon. description of jagged spoon is "It's jagged at the end.".

instead of doing something with the jagged spoon:
	say "[one of]The utensil untiles nothing, nor does it contain luteins[or]All you need to know is, it's a hint, and you don't need to futz with it[stopping]."

chapter pineapple

the pipe panel fence is scenery in Filed Field. "It's not worth sneaking over or through, either way. It's an eyesore, really."

check taking pipe panel fence:
	say "You don't have the strength. Maybe you can change it, though." instead;

a-text of pipe panel fence is "RYRYYRRRY". b-text of pipe panel fence is "PGRGYRRRY". parse-text of pipe panel fence is "p[sp]i[sp]x[sp]e[sp]-[sp]x[sp]x[sp]x[sp]-".

the pineapple is a fruit.

chapter raspberry

Some pryer bars are a thing in Filed Field. description is "They're not quite crowbars. They have drupelets on them.". "Some pryer bars sit here, and it'd be nice to put them to a less distasteful use than to break into places."

check touching pryer bars:
	say "They feel like spry rebar." instead;

a-text of pryer bars is "RYRRRYRRO". b-text of pryer bars is "RYRRRYRPO". parse-text is "x[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x[sp]r[sp]y".

check taking pryer bars:
	say "You don't need to open any crates or fight anyone. This isn't that sort of game. Repurpose them, instead!" instead;

check taking drupelets:
	say "You could take a hint from them, but you can't take them. They're part of the pryer bars." instead;

the drupelets are part of the pryer bars. the drupelets are plural-named. description of drupelets is "Little dark-red spherical bits stuck together that'd probably burst with juice if you tried to pop them."

a raspberry is a fruit.

chapter strawberries

b-w are plural-named proper-named privately-named scenery in Filed Field. "The barriers west seem to mark the end of the Filed Field."

strawberries are a plural-named fruit.

printed name of b-w is "the barriers west"

check taking b-w:
	say "Too heavy, and there's nothing west, anyway." instead;

understand "barriers west/w/" and "barriers west" as b-w.

a-text of b-w is "RRRYRRYRRYYR". b-text of b-w is "RRPYRRYRRYYR". parse-text of b-w is "x[sp]x[sp]r[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]x".

chapter barber sickle

the barber sickle is a flippable vanishing thing in filed field. description is "It's the color of some sort of dark juice, similar in texture to the pryer bars.". "A barber sickle lies here, not sharp but very dark."

a-text of barber sickle is "RRYRRRYRRYYR". b-text of barber sickle is "PRYRRRYRRYYR". parse-text of barber sickle is "b[sp]x[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]x".

check taking barber sickle:
	say "You don't need weapons in this game. Or a haircut." instead;

The basket of blackberries is a fruit. description is "It's from Bickerers['] Lab, wherever that is."

book Scape Space

Scape Space is an innie room in Others. Scape Space is below Swell Wells. description of Scape Space is "This well-hidden area may be a raft of criminal activity, or maybe any puzzles here may be criminally unfair[if inapt paint is in scape space]. You notice inapt paint on one wall."

chapter paint/guava

The inapt paint is scenery in Scape Space. "DESERVER RESERVED."

instead of doing something with inapt paint:
	if action is procedural, continue the action;
	if current action is taking, say "It's stuck to the wall. Maybe there's some way to change it around so it's not there. Or on the other side, or something." instead;
	say "The paint is just there. There's got to be some way to get rid of it."

a-text of inapt paint is "RYRYRRYR". b-text of inapt paint is "?GRGPRG?".  parse-text of inapt paint is "x[sp]e[sp]x[sp]e[sp]r[sp]x[sp]e[sp]x".

the guava is a fruit.

chapter banana/a

an-a is a privately-named thing in Scape Space. printed name of the an-a is "An a". "An a is here, waiting for you to take it. Well, take it the right way.". description of an-a is "Greenish, then golden, then a nasty dark brown.". understand "the/an a" and "a" as an-a.

check scaning an-a:
	say "There should be only three letters, but you see more.";

Instead of taking an-a:
	say "You feel something ban you from taking an a. The a almost seems to say 'Na-Naa-B' as you take it.";

a-text of an-a is "RYRYRY". b-text of an-a is "YGRYRY". parse-text of an-a is "x[sp]a[sp]x[sp]a[sp]n[sp]a". an-a is parse-spoilable.

The small yellow banana is a fruit.

chapter rhubarb

the pugnacious plant is a thing in Scape Space. "A pugnacious plant looms here, just waiting for you to do something with it."

a-text of pugnacious is "RRYRYRR". b-text of pugnacious is "RRYRYRR". parse-text is "x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]x".

description of pugnacious plant is "It looks like, well, an evil version of a more straightforward tomato plant. You wonder if it is a vegetable that should be a fruit, a vegetable people prepare like a fruit, or vice versa."

rhubarb is a fruit.

instead of doing something with the pugnacious plant:
	if action is procedural:
		if current action is not attacking and current action is not examining:
			continue the action;
	say "The plant senses you trying to do something with it and whips a burr at you. [one of]'Burr. Bah!' you say as you notice a brief red welt[or]'Bah. Burr,' you say, as a burr bounces off[or]'Arrh, bub,' you brag as you duck the plant's reflexive attack[or]'Bub...' [greedy-s] distracts you. 'Arrh!' you cry, as you pick out a burr the plant shot at you[in random order]." instead;

chapter gender dependent greedy person

greedy-person is a person that varies.

Red Rat Art Erd is a person. "[gree-app]."

Dr Tera Darter is a female person. "[gree-app].". printed name of Dr Tera Darter is "Dr. Tera Darter".

the chum of dr tera darter is red rat art erd.

to say greedy-s:
	say "[if greedy-person is Art Erd]Art Erd[else]Dr. Tera[end if]"

to say trader-clue:
	say "[one of][greedy-s] [if player has storage]was[else]is[end if] just there to barter for the storage. You need something of value[if player has coin or player has coins], more value than a coin or two[end if].[plus][or][if player has dollar]That dollar would make [greedy-s] happy[else if number of fruits in lalaland < 12]Curtis's third gift, after [12 - number of fruits in lalaland in words] more fruits, will be handy[else]You can go back to Curtis for an item that will please [greedy-s][end if].[minus][cycling]"

to say gree-app:
	say "[one of]Oh my goodness! A tarred trader is here. But if you look closely--yes, it's [greedy-person]! Who performed all sorts of 'cutting-edge' financial transactions, but Elvira managed to get [him-her] bailed out because [he-she] was being interesting and creative, or something. Some people tarred [him-her], and, well, [he-she] deserved it[or][greedy-person], the tarred trader, is still slumped here. [he-she-c] probably got kicked out [if clearing is unvisited]from somewhere more reputable[else]of the Clangier Clearing[end if][stopping][if storage box is in scape space]--[he-she]'s sort of holding out a box labeled So-Great Storage[end if][if guava is off-stage], and [he-she] is only partially hiding a sign[end if]"

understand "tarred trader" and "tarred/trader" as Red Rat when player is male.
understand "tarred trader" and "tarred/trader" as Dr Tera when player is female.

rule for printing a locale paragraph about greedy-person:
	if storage box is in scape space:
		now storage box is mentioned;
	continue the action;

the so-great storage box is a thing.

the storage box is in Scape Space. "A box labeled So-Great Storage is here.".

description of storage box is "[unless lost slot is part of storage box]It's so great at storing, you can't find a way in there. It reads LOST SLOT, and the slot certainly, uh, is[else]There's a (formerly) lost slot in the box. What to put into it, now[end if].".

instead of opening box:
	say "If brute force worked, it wouldn't be so great for storage.";

check taking storage box:
	say "[greedy-s] guards it carefully. 'I need currency. Give me currency.'" instead;

check giving droll dollar to someone:
	if second noun is not greedy-person:
		say "[second noun] isn't seedy enough to accept it." instead;

check giving something to greedy-person:
	if player has storage:
		say "You've already traded." instead;
	if noun is coin or noun is coins:
		say "'[one of]No redeem. Need more.'[or]Too heavy.' Hey! A veto![in random order]" instead;
	if noun is dollar:
		say "[he-she-c] consults an imaginary calendar. 'Sell date. All's teed. Let's deal.' On receiving the dollar, he cries 'Monies so mine!'[paragraph break]You take the storage box.";
		now greedy-person has dollar;
		if player has s-i:
			say "[line break]";
			slot-appear;
		now player has storage instead;
	if noun is tekno-token:
		say "Traceable. Be real, cat." instead;
	say "'An empty payment.' He's not interested in that. Just money." instead;

description of Art Erd is "[gree-desc]."

description of Dr Tera is "[gree-desc]."

to say gree-desc:
	say "Tarred literally and figuratively, [he-she] gives off an 'I'm sly. Slimy.' air. Grease agrees with [him-her]"

instead of doing something to greedy-person:
	if action is procedural, continue the action;
	if player has storage:
		say "You don't want to deal with [greedy-s] any more than you have to." instead;
	say "[greedy-s] shrugs, then does the 'let's swap' hand gesture. Hmm, what could you give [him-her] to get that so-great storage?"

check opening slot:
	say "It will fit if you give it the right thing." instead;

check closing slot:
	say "It needs to be open--or how will you pass the gate?" instead;

the ENGARO orange is a reflexive fruit in Scape Space. "An orange lies here next to the tarred trader. It looks like you could read the orange to find its brand name."

description of ENGARO is "Well, it's orange. And it's branded, so you can READ it to see what lovely company produced it. [one of]Or examine it again and maybe you'll see red[or]'One? Arg!' you think, seeing red and wishing there were more[stopping]."

a-text of ENGARO orange is "RY*RYYR". b-text of ENGARO is "RY*RYYR". parse-text is "x[sp]-[sp]x[sp]-[sp]-[sp]x".

instead of taking the orange:
	say "[one of]With a sleepy, sly 'Eep,' th[or]Th[stopping]e trader whips [his-her] hand out and grabs you with alacrity. Maybe even two lacrities--it was much faster and intenser than you thought possible. You back off, and [he-she] goes back to semi-dozing. You think, 'an ogre' and see red. Maybe you need to sneak up somehow."

chapter gonearing

gonearing is an action applying to nothing.

understand the command "go near" as something new.

understand "go near" as gonearing.

carry out gonearing:
	if orange is in Scape Space and orange is visible:
		try fliptoing orange;
		the rule succeeds;
	say "[reject]" instead;

instead of dropping the orange:
	say "But you worked so hard to get it!"

chapter fruits by hintability

maraschino is not hintable. pears are not hintable. plums are not hintable. limes are not hintable.
tamarind is not hintable. blueberries are not hintable. cantaloupe is not hintable. persimmon is not hintable.
pomegranate is not hintable. coconuts are not hintable. tangerines are not hintable. mulberries are not hintable.
gooseberry is not hintable. apricot is not hintable. apples are not hintable. mango is not hintable.
kumquat is not hintable. papayas are not hintable. breadfruit is not hintable. watermelon is not hintable.
cranberries are not hintable. grapefruit is not hintable. raspberry is not hintable. strawberries are not hintable.
blackberries are not hintable. guava is not hintable. rhubarb is not hintable. banana is not hintable.
grapes are not hintable. pineapple is not hintable.

chapter fruits by room

frroom of grapes is rustic citrus.
frroom of maraschino is rustic citrus.
frroom of pears is rustic citrus.
frroom of plums is rustic citrus.
frroom of limes is rustic citrus.
frroom of tamarind is rustic citrus.
frroom of blueberries is rustic citrus.
frroom of cantaloupe is rustic citrus.
frroom of persimmon is rustic citrus.
frroom of pomegranate is rustic citrus.

frroom of coconuts is swell wells.
frroom of tangerines is swell wells.
frroom of mulberries is swell wells.
frroom of gooseberry is swell wells.
frroom of apricot is swell wells.
frroom of apples is swell wells.

frroom of lemons is clangier clearing.
frroom of melon is clangier clearing.
frroom of nectarine is clangier clearing.
frroom of quince is clangier clearing.
frroom of overpriced peach is clangier clearing.
frroom of mango is clangier clearing.
frroom of kumquat is clangier clearing.
frroom of papayas is clangier clearing.

frroom of breadfruit is Filed Field.
frroom of watermelon is Filed Field.
frroom of cranberries is Filed Field.
frroom of grapefruit is Filed Field.
frroom of pineapple is Filed Field.
frroom of raspberry is Filed Field.
frroom of strawberries is Filed Field.
frroom of basket of blackberries is Filed Field.

frroom of ENGARO orange is Scape Space.
frroom of guava is Scape Space.
frroom of rhubarb is Scape Space.
frroom of small yellow banana is Scape Space.

volume demo dome

chapter the basics

after choosing notable locale objects when mrlp is demo dome:
	repeat with JJ running through all exhibits in location of player:
		set the locale priority of JJ to 0;

demoing is an action applying to nothing.

understand the command "demo/dome mode" as something new.
understand the command "demo dome mode" as something new.

understand "demo dome" and "demo mode" and "dome mode" and "demo dome mode" as demoing.

knockage is a truth state that varies.

demo-dome is a truth state that varies.

carry out demoing:
	if mrlp is demo dome:
		say "You already are in demo dome mode." instead;
	if Gunter is not off-stage:
		say "[reject]";
	if player is not in dusty study or gunter is in lalaland:
		say "For reasons of continuity, you can't visit the Demo Dome until you've restarted the game." instead;
	say "[if knockage is true]You ignore Gunter's emo'd voice, probably looking to apologize and kiss up[else]You decide to, umm, use the Me-Um-Us Museum[end if]. You call up a nav-van and then pull out your discreet, secret ID to enter.";
	now demo-dome is true;
	move player to peek keep;
	now red writing is examined; [this is a silly hack to make sure sparse spares is tracked ok]
	demo-dome-status;
	the rule succeeds;

to demo-dome-status:
	now left hand status line is "[location of player]";
	now right hand status line is "Wander, Warden!";

chapter Peek Keep

For printing a locale paragraph about a thing (called the item)	(this is the don't mention exhibits in room descriptions rule):
	if the item is an exhibit, set the locale priority of the item to 0;
	continue the activity.

Peek Keep is a room in Demo Dome. "Exhibits lie west, north and east, and even inside. The way down looks disused. The exit is south. A great grate blocks passage above, but there seems to be a lot behind it. A flashed ad shelf also continually changes what it's showing.[paragraph break]The entry sign here welcomes you[esi-pro].";

to say esi-pro:
	set the pronoun it to entry sign;

instead of turning the dial:
	say "The dial is out of reach."

instead of switching on the dial:
	say "The dial is out of reach."

instead of switching off the dial:
	say "The dial is out of reach."

the entry sign is scenery in peek keep. "UNFOLD OLD FUN, MEMOIR: I'M MORE."

check going south in peek keep:
	if debug-state is true:
		say "DEBUG: [list of unnoted exhibits] unnoted, [list of perused exhibits] perused, [list of exhausted exhibits] exhausted.";
	if number of not exhausted exhibits is 0:
		say "You take a break[unex-left] and get back to, well, running Yorpwald. The museum was about the right size. Not too small, but not too big to waste taxpayers['] money.";
		end the story;
	else:
		say "Are you sure you want to leave before [if number of unnoted exhibits is 0]exhaustively [end if]looking at everything? You can type [b]SCORE[r] or [b]THINK[r] to see what you still haven't done.";
		if the player direct-consents:
			say "It's--yes, you've sort of lived it, already. You're just too busy for frivolity[if number of unnoted exhibits is 0]. You've had a look at everything, just not in total detail[end if].";
			end the story saying "Epilogue's Up! Lie, Ego";
		else:
			say "Okay, why not look around a bit more." instead;

to say unex-left:
	let Y be the number of unexamined things in sparse spares;
	if Y is 0:
		continue the action;
	say ", ignoring the [if Y is 1][random unexamined thing in sparse spares][else]final [number of unexamined things in sparse spares in words] things[end if] in Sparse Spares,";

check going up in peek keep:
	say "The great grate blocks you." instead;

table of xibits
exhib	orwt
owl decal code wall	10
allow lots tools wall	10
Chic Loner Chronicle	10
Calendar	10
Novella	20
Flashed Ad Shelf	1
shiest thesis	10

chapter Evoc-Cove

Evoc-Cove is east of peek keep. Evoc-Cove is in Demo Dome. "A welcoming place full of feeling and peace and weird new ideas that it's just good to know are there. A novella[nov-pro] is propped up against the wall by some invisible force. You can go back west if you want."

to say nov-pro:
	set the pronoun it to novella;

check going in evoc-cove:
	if noun is east or noun is north or noun is south:
		say "You quickly run into a bunch of boxes you could probably push around to make a path to a bigger room, but that just wasn't your specialty. Wrong sort of thinking game." instead;

section novella

The novella is an exhibit in Evoc-Cove. "A novella is here. You can READ it without taking it.". description is "It's called Venal Ol['] Novella, by Evan Oll. That's probably a pseudonym. It's got a hundred pages, which you can examine by READ (number)[lowest-unread]. You can also speed-read with [i]rr[r]."

check taking novella:
	say "Don't take the art." instead;

turbo-novella is a truth state that varies.

understand the command "rr" as something new

understand "rr" as tenpgreading when player is in evoc-cove

tenpgreading is an action applying to nothing.

carry out tenpgreading:
	let count be 0;
	now turbo-novella is true;
	if novella is exhausted:
		say "You already read through. You could read individual pages again, I guess.";
		the rule succeeds;
	while novella is not exhausted and count < 10:
		increment count;
		read-lowest-page;
	if novella is exhausted:
		say "Well, that's all. Hooray for speed-reading.";

to read-lowest-page:
	let xyz be 1;
	let nonsense be false;
	repeat through table of pagelist:
		if read-yet entry is true or comprehensible entry is false:
			now nonsense is true;
			increment xyz;
		else:
			if turbo-novella is false:
				say "[if nonsense is true]You have to skip a bit to get to a sensible page ([xyz])[else]The next page ([xyz]) makes enough sense, you guess[end if].";
			else:
				say "[b]PAGE [xyz]: [r]";
			try numreading xyz;
			the rule succeeds;
	say "You've read through everything that makes sense, so you may want to look at a specific page.";

to say lowest-unread:
	let xyz be 1;
	repeat through table of pagelist:
		if read-yet entry is true or comprehensible entry is false:
			increment xyz;
		else:
			say "--the lowest page you haven't read that looks comprehensible is [xyz]";
			continue the action;
	say "--though you've read everything of interest, you'd guess"

understand "read [number]" as numreading when player is in Evoc-Cove.
understand "r [number]" as numreading when player is in Evoc-Cove.
understand "x [number]" as numreading when player is in Evoc-Cove.
understand "examine [number]" as numreading when player is in Evoc-Cove.

numreading is an action applying to one number.

does the player mean reading novella: it is very likely.

carry out numreading:
	if the number understood is 0:
		say "Introductions? Boring." instead;
	if the number understood < 0:
		say "You can't un-read the book, but you can leave it un-read." instead;
	if the number understood > 100:
		say "The book is only 100 pages long." instead;
	choose row number understood in table of pagelist;
	now read-yet entry is true;
	if number of characters in pgtxt entry > 2:
		say "You glance over page [number understood]. The most interesting bit seems to be [pgtxt entry][line break]";
	else:
		say "The author strained not to be incomprehensible and failed.";
	now novella is examined;
	if novella is unnoted:
		now novella is perused;
	repeat through table of pagelist:
		if read-yet entry is false and comprehensible entry is true:
			the rule succeeds;
	now novella is exhausted;
	the rule succeeds;

when play begins (this is the seed novella rule) :
	repeat through table of pagelist:
		now read-yet entry is false;
		if number of characters in pgtxt entry > 2:
			now comprehensible entry is true;
		else:
			now comprehensible entry is false;

chapter Hows Show

Hows Show is north of Peek Keep. Hows Show is in Demo Dome. "You see two walls here with snatches of code written all over them[if nuf-hows-examined]: the owl decal code wall and the allow-lots-tools wall[end if]. They may be too technical, but maybe you can get a general feel for the silly tricks that went into A Roiling Original. You can go back south."

after printing the locale description for Hows Show when Hows Show is unvisited:
	ital-say "the whos-show is already under CREDITS.";
	continue the action;

to decide whether nuf-hows-examined:
	if written walls are examined, decide yes;
	if tools wall is examined and code wall is examined, decide yes;
	decide no;

For printing a locale paragraph about a thing (called the item) when player is in Hows Show:
	if the item is owl decal or the item is allow lots tools, set the locale priority of the item to 0;
	continue the activity.

the written walls are plural-named scenery in hows show. "There's an owl decal code wall[if any-walls is true and last-wall is owl decal] you've been browsing recently[else if owl decal is examined] full of Inform 7 code[end if] and an allow-lots-tools wall[if any-walls is true and last-wall is allow lots tools] you've been browsing recently[else if allow lots tools is examined] full of PERL tricks[end if][if any-walls is false], and each looks about as interesting as the other[end if]."

check examining written walls for the first time:
	ital-say "it may help slightly to have a copy of the source handy as you read for this. I'll often be pointing you to things to search for.";

any-walls is a truth state that varies.

section inform wall

the owl decal code wall is a proper-named exhibit in hows show. "[this-inform]"

printed name of owl decal code wall is "the owl-decal code wall"

understand "owl-decal wall" and "owl-decal code wall" as owl decal code wall.

after doing something with owl decal code wall:
	now any-walls is true;
	now last-wall is owl decal code wall;
	continue the action;

description of owl decal code wall is "You read some [one of][or]more [stopping]of the owl decal code wall.[paragraph break][this-inform]"

inform-row is a number that varies.

to say this-inform:
	increment inform-row;
	if owl decal code wall is unnoted:
		now owl decal code wall is perused;
	choose row inform-row in table of informcode;
	say "[thiscode entry]";

after examining owl decal code wall:
	if inform-row is number of rows in table of informcode:
		say-thru;
		now inform-row is 0;
		now owl decal code wall is exhausted;
	continue the action;

to say-thru:
	ital-say "you've read all the way through.";

section allow-lots-tools wall

the allow lots tools wall is a proper-named exhibit in hows show. "[this-perl]".

printed name of allow lots tools wall is "the allow-lots-tools wall".

understand "allow-lots-tools wall" as tools wall.

after doing something with allow lots tools wall:
	now any-walls is true;
	now last-wall is allow lots tools wall;
	continue the action;

description of allow lots tools wall is "You read some [one of][or]more [stopping]of the allow-lots-tools wall. Some of this might be useful if you make your own game. You never know what general or specific ideas will come in handy.[paragraph break][this-perl]"

perl-row is a number that varies.

to say this-perl:
	if allow lots tools wall is unnoted:
		now allow lots tools wall is perused;
	increment perl-row;
	d "[perl-row] of [number of rows in table of perlcode].";
	choose row perl-row in table of perlcode;
	say "[thiscode entry]";

after examining allow lots tools wall:
	if perl-row is number of rows in table of perlcode:
		say-thru;
		now perl-row is 0;
		now allow lots tools wall is exhausted;
	continue the action;

chapter Intel Inlet

Intel Inlet is inside of Peek Keep. Intel Inlet is in Demo Dome. "You feel a fourth wall closing in on bugs and features here. A CareLand Calendar is on the wall, as is a shiest thesis[the-pro]--whoever wrote it is probably half embarrassed of what's on there."

to say the-pro:
	set the pronoun it to shiest thesis;

The shiest thesis is an exhibit in intel inlet. description is "It's a list of embarrassing mistakes you really shouldn't feel so embarrassed about. At first you're all, eh, this...but it's more than that. You resolve to feel less bad about your own mistakes, reading all the things the author let slip in a release, or just in general, while making this project. He's obviously still a little embarrassed about it all.".

after examining shiest thesis:
	now shiest thesis is exhausted;
	continue the action;

The CareLand Calendar is an exhibit in intel inlet. description of Calendar is "[bug-report]".

check examining CareLand Calendar:
	say "It's divided into several parts based on what is there. You read through one.[paragraph break][part-one-thru]" instead; [bulk-klub]

calendar-part is a number that varies.

to say part-one-thru:
	if calendar-part is 0:
		now careland calendar is perused;
	increment calendar-part;
	if calendar-part > number of rows in table of calparts:
		now calendar-part is 1;
	choose row calendar-part in table of calparts;
	say "[thiscal entry][line break]";
	if calendar-part is number of rows in table of calparts:
		say "[line  break]That's the end of the calendar.";
		now careland calendar is exhausted;

chapter Ned's Dens

Ned's Dens is west of Peek Keep. Ned's Dens is in Demo Dome. "You feel a hush here, as if you're seeing something personal and private. Like that Chic Loner Chronicle[clc-pro]. You can go back east."

to say clc-pro:
	set the pronoun it to chic loner chronicle;

The Chic Loner Chronicle is an exhibit in Ned's Dens. description is "[one of]The Chronicle has a list of silly things the author thought of while writing this game. The first one[or]Another thought[stopping] reads: [one-chron]".

chron-row is a number that varies.

to say one-chron:
	increment chron-row;
	if chic loner chronicle is unnoted:
		now chic loner chronicle is perused;
	if chron-row > number of rows in table of observations:
		now chron-row is 1;
	choose row chron-row in table of observations;
	say "[obser entry]";
	if chron-row is number of rows in table of observations:
		now chic loner chronicle is exhausted;
		say "[paragraph break]That's the end of the Chronicle. You can read it again, if you want.[no line break]";

chapter Sparse Spares

Sparse Spares is below Peek Keep. Sparse Spares is in Demo Dome. "All sorts of weird tools and paraphernalia that couldn't fit into the game proper lie here, likely impulse purchases from Bulk-Klub. You can go back up."

the parcels clasper is a thing in Sparse Spares. description is "Oh, man! It's handy for picking stuff up and moving it around. It looks a bit odd, but boy, if you look for a minute, THAT's how it works."

the bolt case is a transparent container in Sparse Spares. description is "It contains an obstacle, and it's also not openable, since it's--well-bolted. There's also a can of Best Cola in there."

Rule for printing room description details of bolt case: do nothing instead.

check opening bolt case:
	say "It's locked, but Best Cola isn't very good for you anyway. Imagine how bad Worst Cola could be." instead;

the obstacle is in the bolt case. description of the obstacle is "it reads Bulk-Klub."

The Best Cola is in the bolt case. description is "It's Yorpwald's equivalent of the gross pop I tend to wind up drinking but don't want to when I'm implementing stuff/drawing up features/squashing bugs. I think it's made by AblestCo."

the larded ladder is a thing in spares. description is "The larded ladder was originally used as an indication you don't need to go up, but it seemed a bit mean."

the trifle filter is a thing in spares. description is "A finely-tuned device that helped me decide whether silly details were totally irrelevant or just irrelevant enough to be funny and quirky. Or seem that way to me."

The stand-up dustpan is a thing in spares. description is "Useful for sweeping bugs and inconsistencies under the metaphorical rug."

The plastic scalp-it is a thing in spares. description is "Handy for when a chunk of code--or a story arc--completely didn't work."

the parcel placer is a thing in spares. description is "Handy for deciding where a good anagram should go--one I wanted to have along, but I didn't know if it should be a thing, a description or random text. Often seen shuffling around (ha! Ha!) the same thing more than once."

the rudest duster is a thing in spares. description is "Helped me clean up--or add double entendres--to various things, or find a suggestive anagram or two."

check taking something in spares:
	say "That's a museum exhibit. About all you can/should do is examine it." instead;

section Great Grate

The Great Grate is scenery in Peek Keep. "The Great Grate can't be moved. It hides the shall-halls which--well, they're under construction. There's also a talks stalk, design-deigns and a spec space."

after examining great grate (this is the keep scenery spill rule)	:
	move spy dial display to peek keep;
	move spec space to peek keep;
	move shall halls to peek keep;
	move design deigns to peek keep;
	move talks stalk to peek keep;
	continue the action;

The Spy Dial Display is scenery. "The display is currently off and out of reach."

instead of taking Spy Dial Display:
	say "Out of reach behind the grate.";

instead of doing something with Great Grate:
	if the action is procedural:
		continue the action;
	say "It was put there just to let you know there will be new stuff from the author. Of course, if you could see it, it might be too raw to be any good.";

a spec space is scenery. "It could be a spec-scape, with all that's here. It's a bit hard to read--hopefully the author will unjumble it into something fun some time soon."

instead of doing something with spec space:
	if the action is procedural:
		continue the action;
	say "The spec space is too ill-defined to do much with.";

The Shall Halls are scenery in Peek Keep. "You can't get a very good look at the shall-halls, but the design-deigns scratched at the end fill you with wonder and anticipation all the same. Really!"

instead of doing something with shall halls:
	if the action is procedural:
		continue the action;
	say "I haven't figured where to go in them, and if you can, I'd be jealous.";

understand "shall-halls" as Shall Halls.

The Design Deigns are scenery in Peek Keep. "They're illegible from this far away. They might be illegible up close. The author is, sadly, like that. So you can't make out evidence for or against a Questionable Sequel-Obtain."

a talks stalk is scenery. "From what you see on the other side of the Great Grate, it has many branches, but none appear particularly healthy yet. It symbolizes the author's grand high goal up there of one day implementing more believable NPCs."

instead of doing something with Talks Stalk:
	if the action is procedural:
		continue the action;
	say "You can't do much with the stalk on the other side of the Grate. And the author hasn't, yet. One day.";

section Flashed Ad Shelf

The Flashed Ad Shelf is an exhibit in Peek Keep. description is "There is a rotating ad saying visit sunny Threediopolis and Fourdiopolis--well, the edges are sunny. It then changes to tout following the adventures of Alec Smart through the Problems Compound and, eventually, Slicker City, then to Matt Doerr working through Kingston and Inville, and finally to someone walking around on a cube in a cavern."

instead of doing something with flashed ad shelf:
	if the action is procedural:
		continue the action;
	say "There's not much to do with the ad shelf but examine it. Or play one of those wonderful advertised games!";

check examining Flashed Ad Shelf:
	now Flashed Ad Shelf is exhausted;

chapter dometables

[dmt]

table of calparts
thiscal [x calendar] [tdm1]
"Part one: Protean[paragraph break]There's no compelling personal story here. I just had fun trying to make the sort of game I'd have liked when I was younger, the sort Infocom might've done better if the Apple didn't have its limitations.[paragraph break]This part maps how ARO was part of Shuffling Around at first, til I realized that'd be too long for IFComp's two hours. You see how the game started with the stores, how there was F, I, U, V, W and Y, with P being the finale, and how store M didn't exist for a while. In fact, Store R got finished at the very last. It relates how OUTSIDE was the original puzzle until the author realized that was too abstruse, thanks to a tester, and it maps how F and I were first, so they go the good stuff--the nouns--before M started developing. Somewhere along the line, too, I decided to go in for an anagram of Psuedonym. Moe Spudny, Spud Money, Don Muspey and Ed Spumony all seemed amusing, but it wasn't until I remembered a character I wrote for a walkthrough of Deathlord, Ned, that I started poking around. Yompus may not be a real last name, but it sounds like one. So I went with it. Finding it was one of those 'click' moments that didn't solve any technical problems, but it felt cool.[paragraph break]Plus, Andrew Schultz doesn't really anagram well, except to CRAWLS, ZEN, THUD."
"Part two: Wrapt to[paragraph break]I realized that it was probably best to go with nouns-to-nouns. Well, until the last puzzle. This kicked out all but F and I. I didn't know what else to do, or where the finale would be. I eventually decided on R, once I figured a resort would be a good place. It only had the Means Manse, and you just had to EXIST. I think your enemy was Too-Apt Pa Otto, and you had to make him into a POTATO. But that was a bit mean. Then METROS began to take shape, and I liked the underside and hotel, and then other locations fell into place."
"Part three: Trap there? Er, phatter[paragraph break]The big problem I had was that I couldn't disambiguate how to flip items, and I had no encouragement for guesses for anagrams. This was a pretty big fault, and there were others, too. Nevertheless, I found a lot with the help of my testers, and I even had the bright idea of trying to provide an alternate way through Metros. One sub-try got the player stuck. Nevertheless, I was able to identify ways to take care of this throughout the comp, and I had plans for post-release stuff. Every mistake I made served to give me an idea to make things easier for the player. The game needed it. I also settled on the idea for the new hint device. I didn't want to reuse what I had from SA, but I also wanted to make things simpler and more powerful. People had trouble seeing if they could take both devices, so I merged them. And I started on the settler, once people said they wanted something a bit more Master Mind like."
"Part four: tap furor[paragraph break]Nobody was really furious at the game, but I certainly got to work when I learned about David White's hashing. Immediately it made ARO more accessible, in theory. I had a lot to whip into shape. I tried to fix a few things per day. I was disappointed in the bigger mistakes I made, and after getting SA into a decent beta (or so I thought,) I started on ARO."
"Part five: pave rift[paragraph break]The only problem was, once I got back to ARO, it didn't make sense. I had an idea that nouns would only feature in the intro. Oyster was just entering a house and leaving. Routes didn't let you underground. Troves--well, I didn't get the concept of what it should be in the first release, though I had a few passive verbs. I had to look through my master document of anagrams, and I found that a lot I dismissed as too simple wound up fitting just right, and testers particularly liked them. I also figured on interjections for Presto as the last area, because interjections are EXCITING. Towers--well, more on that later. I also wasn't sure what to do with OTHERS, which I had after the Means Manse and before the strip. I eventually decided to chuck it for release 1, as it wasn't as good an introduction as I thought. The diorama was created 2 weeks before 2013 Spring Thing, and I think it was relatively successful. But I left so much to do at the last minute with exiling a region I'd worked on that I missed some big things."
"Part six: star pix[paragraph break]I had hoped to put graphics into the game, and it turned out trickier than I thought. Thankfully Glimmr for Glulx works pretty well, but I would up losing valuable time not using the fonts correctly, due to a dumb mistake. I also failed to stop a buffer overrun in some cases, but that's another story. This was something automation could not catch. I also experimented with some pictures and colored text (Yorpwald/wordplay) but didn't get cover art. I couldn't think of anything simple."
"Part seven: vaster pen[paragraph break]The big problem, though, was what to do with Towers. Originally they were a mess of anagrams like STANCH and CHANTS you had to guess, and you got clues of what was where, and some choices were good and some were evil, and you hacked through the Thickest Thickets. One guy, Elmer, was good, and Merle was evil, and the Coevals['] Alcoves had an elevator where you could go to the various floors and try puzzles. I liked this when OYSTER was small, but Oyster started getting bigger, and Towers became too abstruse with its actions.[paragraph break]It did have hinting, though, and this hinting eventually got repurposed more powerfully and elementally to the settler, but until then, it was a mess. I figured adjectives would be the trickiest things to look at, but a look through my master document gave a lot. At least they weren't as bad as adverbs. I couldn't do anything with them, right? Adverbs were so--powerless."
"Part eight: that gripe, gather pit, tiger path[paragraph break]And that's when it hit me--I could just GREP my anagram file for ly\b, or words that end in LY, and of course you could be powerless near your great foe. The bleary barley came first, then a way to regain your powers--conjunctions were another word that could be very powerful. Then I noticed a slew of animals which hadn't been anagrammed, mostly because I didn't see how to in SA without crowding the game. Things started to click. I even had an enemy to defeat, but she had no character or name. The necro-crone wasn't Elvira til after Spring Thing."
"Part nine: inert nap, pain rent[paragraph break]I was able to get the game working with a walkthrough, and I submitted it okay. Greg Boettcher noted it worked, and he liked the idea, though he diplomatically noted that the walkthrough's cuing helped (translated, this meant I forgot to cue SEVERAL exits.)  I found a few easy bugs post-release and didn't see any reviews for a while. I was at least glad one liked the pedanto-notepad. But I was still frustrated. I was grateful to place second to a very entertaining game (Geoff Moore and I have since helped each other with other works,) and I knew I wanted a post-release fix, but I didn't know the scope. What probably kicked me in the butt was an email from someone named Toby Ott who thanked me for the game. He explained he was blind and liked games like this, but he'd found a few bugs. This moved me from 'I better fix my mistakes' to 'I can make this better for people who like this sort of thing.' I also saw a very good walkthrough with bug reports from David Welbourn. I was happy to note I'd fixed some of the bugs, but he provided cuing beyond the good stuff my testers found, including some help-code that hung the game. I think what they found helped him be able to find stuff without getting TOO frustrated. But again, it was nice people were PLAYING."
"Part ten: pet rant pattern[paragraph break]I thought I'd get the first release out before IFComp 2013, but there were always new bugs to find or puzzles to touch up. I'd fix an area, then move to the next, then be sure the area was paved over smoothly--only to find several 'I saw that, right?' issues. The thing was, there was so much I needed to do, I couldn't get down to the fun aesthetic stuff in good conscience. Eventually I decided on a drop-dead release date early in 2014, but unfortunately I couldn't get to some good transcripts. I left some huge bugs in--ones my testers found--but release 2 made a lot more sense."
"Part eleven: nerve leapt. Vent. Repeal[paragraph break]One of the huge problems I had with testing was the inefficiency of adding one anagram. But with the major issues out of the way, I found ways to do stuff better. How to add names to anagram checking. This caused my bookshelf to add 1000 titles for release 3 and let me name all the authors. I found a way to centralize all the anagram tables so you could see them at the end. I thought I wouldn't use it much, but I wound up adding ten tables more. I used Notepad++ to load quickly and add anagrams when I didn't need to compile, and for my own vanity, I tracked the number of anagrams in the randomized tables and even checked if they conformed to Benford's Law and Zipf's Law. I wrote an anagram-checker. PERL even helped me to detect bad punctuation, capitals or quotes. All this helped me focus on technical stuff. There's so much I thought I'd only use once, but I reused it. All sorts of internal checks (like the tables of anagrams and David White's hashes--in some cases, I wasn't checking right) cleared up. The Table of Nudges grew by several hundreds as I wrote a program to check for the hash value and dump it in a text file for later use. I even managed to write a silly program to check the relative difficulties of the areas. Towers is, by far, the toughest. But I think the most important thing I did was to try and play through one or two areas seriously per week. I needed to let testers['] suggestions soak in. Some puzzles, I thought, weren't perfect, but I didn't have better. But I would up cleaning them up later."
"Part twelve: twerp valet varlet wept[paragraph break]It turns out there's nothing here that was any good, but I liked this sentence."
"Part thirteen: inert? Phatter! Prettier than...[paragraph break]Just having time pass and being able to tighten up puzzles and think of things has been revealing. I write down my notes, look them over, and get on with it. I've never worked as hard at a creative project as I did with this game, but so many times I thought I'd run out of things to do before finding one more. While I figured 'Demo dome mode' shortly before release 2, I never got around to it because there was always something else in the game."
"Final part: plan a rift[paragraph break]I'll have to move on. I had fun with this game as a thought experiment. I enjoyed looking at a phrase, saying I bet that'll anagram, and being right. I also enjoyed finding that a simple anagram could fit nicely in the game's flow. But it all has a diminishing return to scale. I want to move on, but hopefully I'll be able to add new silly books or dialogue on a whim. Github makes it easy to add things--and I wish I'd had it earlier, so I could've tracked other changes. Oh, and if people find bugs (still) I can roll that up, too."

[teenager pith part eighteen]

table of informcode
thiscode [x inform wall] [tdm2]
"A chunk of code starting with CheckTranscriptStatus (courtesy of Zarf) notes how the author was able to nag his testers to take a transcript if they left a comment without transcripting on--or to thank them."
"You read various testing commands used in writing the game, including ones to show the exits every move, hint everything visible every move, and track hints without spoiling things for the player. Other commands include jumping to the Strip of Profits, clearing all but Otters, and even jumping to just before the Gates Stage."
"You stare at the start of the Tables of Nudges. There's, like, 1000+! That's over double Shuffling Around! The numbers look confusing and arbitrary, but you recognize the anagram-strings that the game checks for, as well as how room anagrams seem to point to the same error messages. You even see how they were broken into regions, and a region has a table name called table of routes anagrams/nudges, and so forth."
"You stare at the start of the Table of Random Books. Wow, [number of rows in table of random books]! That's a lot of books! The second column seems to give a book a priority, so the player is likely to see certain ones first. Those seem to cover certain puzzles that occur later. It seems like a lot, but there's a note that it was well over two years, and the author just wrote a few neat words from each book to poke at."
"You see some specialized Inform 6 code from Zarf (again,) Climbing Stars (in more than one place--for disabling TRACE for the Oyster puzzle, and for restarting the game after winning) and other people."
"You see a bit more Inform 6 code the author scratched out himself. The main chunk is at https://www.intfic.com/t/i6-stubs-for-i7-programmers/83/6."
"You read more various miscellaneous testing commands, like ones that zap all the guardians, see all the fruits or even show what the player would've missed or alternate paths every move."
"You stare at the various tables of random text. A voice from behind a fourth wall mentions they used to be in lists, and worse, not even alphabetized so that some duplicates could be caught easily."

table of perlcode
thiscode [x allow-lots-tools wall] [tdm3]
"#things to do before release:[line break]1. alphabetize tables and check for duplicates[line break]2. make sure anagrams are valid, especially books[line break]3. make sure duplicate anagrams are weeded out or checked[line break]4. check punctuation"
"#generating silly names with honorific titles cheaply[line break]for ($x in %firstNames) { if ($isLastNameAnagram{alf('$x$ext')}) { print '$ext $x $isLastNameAnagram{alf('$x$ext')}'; # print for instance Mean Roy Maroney"
"$alf = join('', sort(split(//, lc($a)))); if ($ana{$alf}) { print '$a=$ana{$alf}'; } $ana{$alf} .= ' $a'; # anagram find code"
"if ($a =~ /^\'[bracket]a-z[close bracket]'/ { print 'bad quotes line $line: $a' } # quote tracking"
"if (firstWord($a) eq firstWord($last) { print 'Possible duplicate: $line, $a = $last.\n'; }"
"There's a reference to http://www.intfiction.org/forum/viewtopic.php?f=38&t=17095 which describes how to detect orphan text in Inform source."
"The perl code is a bit complex, but it seems to involve reducing strings to smaller things. #Mega Mage Game = a3e3g3m3."
"if (($startsWithCapital{$currentTable} == 1) && ($thisString =~ /^[bracket]a-z[close bracket]/)) { print 'Bad capitalization!' # other test cases for if it's -1 (needs to start with lower case) or 0 (doesn't matter) and there are even tests for quotes or punctuation at the end."
"Below the code for reducing strings are various comparisons to detect if an anagram has been used, if a book anagram is proper, or if the book matches its author(s)."
"In the book/author notes, there's a few comments about 70% had matching names before the try, and 10% just had bad anagrams, before that was all fixed. And many former author names were shipped off to Shuffling Around to make room for new ones here."
"while ($a = <A>) { if (($a =~ /@ARGV[bracket]0[close bracket]/) && ($a =~ /@ARGV[bracket]1[close bracket]/)) { print '$a matches.'; } } # simple check for if I wrote something already"
"There's simpler code below just detecting if any anagrams are found in table entries. It's tough to follow, with exceptions for if two of the same word are in an entry, with the same hash as above."
"There's code of what appears to be copying critical files to a GitHub directory. Shuffling Around and Roiling files are sent to sister directories, along with the compiled release binaries and lots of utilities."
"The rest is too archaic, but it includes other things I put on [my-repo] include scripts to verify random text anagrams, to create the cheat and non-cheat text in the settler, and even track geometric means of table lengths."

table of observations
obser [from chic loner chronicle] [tdm4]
"I found so many ridiculous anagrams just reading a book on the way to work, or working out, and then I'd just feed them into the anagram server. If ten thousand seems like a lot, well, that is over two years, so that is fifteen per day. That is not so bad when you consider one takes a minute, and I can waste a lot of time in any case."
"One of the best parts of using the anagram server was that I kept seeing cool quotes on the right. These added up to ideas for future games, or even funny jokes, or even more authors to read. It's always a treat when one project gives you spin-off projects."
"A simple I <3 BLOCKSITE FOR FIREFOX. AND GOOGLE CHROME. Well, that's not very philosophical or motivational, but it could be practical."
"It's difficult to describe when an idea has critical weight to branch out. For things like the responses to waiting or blank commands, I maybe had a few in one of/or loops, until I sat down and concentrated on words that meant doing nothing. It took a while to find, but once I had, say, six, I sat down and tried to stretch it to ten, when I put it in a table for the player to see at the end."
"Many of my ideas come from everyday things. I didn't pay religious attention to my file of anagrams once I put down the initial puzzles. However, having two testers say, this seemed a bit wobbly, got me thinking. There were puzzles I liked, and I recruited the best talent available, so to speak. But like on a sports team, the most impressive athlete doesn't necessarily fit. It was hard to retire favorite anagrams or demote them, but it was necessary. And I got some good mileage with ones I'd passed up because I thought I had enough good ones. The diners in release 3 are probably the best example of this."
"It wasn't until I established an assembly line for writing things up that I really started getting the anagrams in place. Before, I sent things to my daily writing, which sorted ideas to a big file by region. Once I cemented ARO as a big project to dedicate time to directly, I didn't have that hurdle, and things went faster."
"I'm still amazed how much organization helped me. Before, I might see an anagram and wonder where it went. Once I organized the anagram types into the Table of Megachatter, it became a lot clearer what would go where, and I could add a new category if I wanted. The one of/or constructions--where things cycled every three times you observed--billowed out to tables. As did lists, where it was tough just to insert one idea. I figured how to make a final note, too, before cycling."
"I even found it easy to add new or break-off tables. For instance, the schematic catechism (one of the last anagrams I wanted to do something with but I didn't know what) originally just had random ideas. Then it had research topics. Then it had Brainy People. Again, none of this would've happened if I hadn't also written code that let me shift between tables."
"Once the anagrams started flowing, and I started adding alternate solutions, ARO started taking a long time to compile. Like 30 seconds. So I tried to place in random text and so forth while I built, since that was low-risk for recompiling. I had one rather bad bug which the Inform 6.32 compiler didn't track (http://www.ifarchive.org/indexes/if-archiveXinfocomXcompilersXinform6Xexecutables.html got the new version) but mostly it was just a matter of writing stuff down and feeding it to a computer. It was much more fun procrastination than others. I found stuff to do (book reading) while something compiled, and that made having to raise an in-program constant less unbearable."
"Many of the puzzles just didn't make sense in the first version. But I was able to sort them out by ones that needed to be changed and ones that would be nice to. I found a lot of times I had to let a tester's observation sit for about two weeks before changing something: gee, it'd be nice to..."
"Perhaps the last thing I enjoyed looking up was that my data roughly obeyed both Zipf's and Benford's Law. I put the megachatter table rows and byte totals as data points into a graph at http://benford.jplusplus.org/, and while each looked pretty good by itself, together they gave a very low z-statistic. Zipf's law was a little trickier--the upper and lower halves of the data had different trend lines. I impart this to how I just sort of added a bunch of tables late, so of course those would sink to the bottom. While a few later tables gained traction (posse bosses, lame talk shows and comedians,) many were just neat to get to ten, and I didn't add to them."
"I also found that, by the end, I spent more time adding anagrams than actual bug fixes to Shuffling and Roiling. But it was fun, and I felt I was doing something every day. Still, it got to be time consuming, and it took a while before I figured a way to add stuff to a separate text file, push a button, and add it to source."
"Learned Helplessness is a powerful thing, and you can always be sucked back down into it: there's that silly voice in my head saying 'Haven't you gotten enough shortcuts?' Larry Wall's delightful oversimplification of the three programming virtues has helped me a lot, here, but I think the real way to frame things is: with the tools I have now, X would be too tough. I don't see how to fix it, yet, but I will."
"One thing I wish I'd done earlier, that would've given me more shortcuts, was setting up my GitHub account. The simple graph of what you've done today (green vs. grey) is great motivation to do something/anything, and if it isn't much, that's motivation to do more next time."
"Finally, I'm just grateful I had so much fun exploring so many alleys and polishing so many odd things. I hope you had even half as much fun playing as I did writing the Stale Tales Slate."

table of pagelist [from novella] [tdm5]
pgtxt	read-yet	comprehensible
"Page One: Openage. Peonage."	false	true
"Page Two: 'Pa, we got top wage!'"
"'Gape there? Ah, pert age!'"
"'Forage up! Oaf-purge!'"
"Gee, if a VP..."
"Axe pigs!"
"A discussion of nag-peeves. 'Vegans? Eep!'"
"'Get-hip age? The PIG age!'"
"'Inane Peg? Pain, Gene.'"
"'Nag Pete? Apt, Gene.'"
"'Glen, a peeve.' / 'Even gap, Lee?'"
"-"
"Tether in thin tree, then tire."
"Outer fen: tureen of rue often / refute? no. There's also something about utter profane rapture, often."
"Effete gapin[']."
"Axing teepees and an exigent apse."
"Even, tense."
"'The genie! Thine? Gee!'"
"Inane Teen Peg finds a neat genie pen."
"'Pay. Get. Went.'"
"'Teeny Town yet, Newton?'"
"-"
"'Enter thy wet tent? Why, tree?'"
"Fur toy newt went to fury."
"A wet envy fit."
"Sixty went."
"Building of a new event sty."
"Thy tweeting."
"Ninety went."
"Gather pity, gritty heap: part eighty."
"Other tiny north Yeti are described."
"'Oh, twit, try to try with...'"
"'Try! Hit! THERE!'"
"'Try fruit, oh? Tut! Horrify your thrift. Hurt rift, yo.'"
"'Vitrify the thrifty. Vie!'"
"About a soccer team, Try This XI."
"Hitters envy thy nerviest, never--hmm. A picture of a shivery tent."
"'Height? Try it!' / 'Gritty hit, eh?'"
"Something about a nervy tither."
"'Forget pay? A pert fogey.' Also, a putdown of poetry."
"'Fret on, yo. Foyer not too ferny.'"
"-"
"Hefty retro fret theory: try thereof, fry thereto."
"About a turfy roof."
"Verify oft, iffy voter!"
"A story fix."
"'Even frosty foster envy?' / 'Never, softy.'"
"Toy freight, thrifty ego, gift theory."
"Not finery for ninety."
"An apt effigy drawn here."
"Stuff about nifty foe Tony Fife."
"A Witty-off between funny guys."
"Thrifty fee: $3.50. Fiery theft, then a hefty refit."
"If Oft fury... fruity-off?"
"-"
"Fix sty if..."
"Iffy events at an Ivy Fen Fest"
"Thy gift, fie!"
"Someone playing a tinny fife."
"Pigsty, axe, pixy gates."
"Onyx site nixes toy, yon exits."
"The adventures of a twisty ox."
"Thirty exes['] sexy titter."
"'Us, fix troy?' / 'Fruity sox.'"
"Fix set ivy sty, if I vex."
"-"
"Sexist envy."
"'I, sexy, tight.'"
"Tiny nixes."
"Avenge types['] tangy peeves. Spy eventage."
"Something testy-woven."
"Blather about testy women."
"The adventures of a nervy esthete."
"A trip to a frosty venue."
"Festive envy."
"Sexist envy, just as nine pages ago. Apparently, it's an important issue."
"'Even envy sets' is the moral here."
"Hey, vignettes! Eighty events!"
"Intense envy."
"'Tea, eh, piggy?'"
"Hot eyeing to hygiene."
"'Yo, we tight! Got whitey!'"
"Tree high, yet. Eye the girth. 'Hi, greyteeth!'"
"'You fighter!' cries a character."
"If they give, vie ye! Figh!"
""
"Description of a hygiene vest."
"Yeti get high! Hey, hit it, egg."
"Eye-hinting a hygiene nit."
"-"
"'Yo, teen inn?' / 'Not ye nine!'"
"Tiny Towne? None witty."
"'Thinner yet? Inherent yet?'"
"Dramatic dialogue at the end: 'Funnier toy unto finery, intone fury!'"
"Finite envy is discussed here."
"A disappointing rehash of 27 pages ago."
"A disappointing rehash of 18 pages ago."
"This has been nonsense so far--and no hinting yet."
"Ninny Nite."
"Undone herd endured, hon. Oh! Run Ended!"

volume hinting

chapter hinting (plain)

hinting is an action out of world.

understand the command "hint/hints/info/help" as something new.

understand "hint" as hinting. understand "hints" as hinting. understand "info" as hinting. understand "help" as hinting.

tri-hint is a truth state that varies.

check hinting when player is in Inclosure and tri-hint is false:
	say "'[one of]A dirty aid-try[or]Uum, boy, you bum[at random]!' Elvira shrieks, but she can't PROVE what you just did. Ha!";
	now tri-hint is true;

check hinting when session-hints-off (this is the force hint blocking rule):
	say "You temporarily turned hints off." instead;

check objhinting when session-hints-off (this is the force objhint blocking rule):
	say "You temporarily turned hints off." instead;

check hinting when absolutely-no-hints is true:
	say "You turned hints off for the remainder of the game." instead;

check objhinting when absolutely-no-hints is true:
	say "You turned hints off for the remainder of the game." instead;

the force hint blocking rule is listed first in the check hinting rulebook.

check hinting:
	if have-objhinted is false:
		now have-objhinted is true;
		if player is not in Inclosure:
			if hint-to-file is false and hint-to-display is false:
				say "You're not sure whom to call. There are so many choices! [twiddle of table of help companies and 3] Well, one of those must be right. Because in front of you is a rare help elph! He smiles and waits. 'Er, clues, recluse?' Silence. 'No hint? Nothin[']?'[paragraph break]'Helpless spells, eh? On so soon?'[paragraph break]'Yup. In-game enigma. Tried. Tired. I caved. Advice?'[paragraph break]He acknowledges your pure re-up and presents you with an option potion from his luckiest clue kits. 'Spoils be possible.' Do you accept it?";
				ital-say "the help elph will not appear again. And while ARO tries to hint intelligently and does not spoil anything immediately, you may rather HINT (a specific thing)[if ever-obj-hinted is true]--as you've already done--[else] [end if]to see if it's important.";
				if the player dir-consents:
					say "'Hints OK? Think so!' You drink the option potion, hoping it will help you get to point O. 'Nifty hair, hint fairy!' you say, in way of thanks.[paragraph break]";
				otherwise:
					say "'Spoiler perils, O! Sink hint thinkins[']!' a voice booms.";
				ital-say "you can type NO HINT to disable hints for this session, or NOTHIN to disable them fully."

carry out hinting:
	if mrlp is demo dome, say "You're already in my clue lyceum." instead;
	if mrlp is Means Manse, try means-hinting instead;
	if mrlp is stores, try stores-hinting instead;
	if mrlp is others, try others-hinting instead;
	if mrlp is troves, try troves-hinting instead;
	if mrlp is oyster, try oyster-hinting instead;
	if mrlp is routes, try routes-hinting instead;
	if mrlp is presto, try presto-hinting instead;
	if mrlp is towers, try towers-hinting instead;
	if mrlp is otters, try otters-hinting instead;
	[if hintblock is true, all-say "You've blocked hints for this session. So you'll need to RESTART to get them back." instead;]
	all-say "No hints for this region yet. Sorry. I need to work on that, don't I?";
	the rule succeeds;

means-hinting is an action out of world.
others-hinting is an action out of world.
stores-hinting is an action out of world.
presto-hinting is an action out of world.
routes-hinting is an action out of world.
troves-hinting is an action out of world.
oyster-hinting is an action out of world.
towers-hinting is an action out of world.
otters-hinting is an action out of world.

to all-say-x (xx - indexed text):
	if hint-to-display is true or hint-to-file is true:
		do nothing;
	else:
		say "[xx]";

to all-say (xx - indexed text):
	if auto-hint-proc is true:
		if hint-to-file is true:
			if number of words in the player's command > 0:
				append "[the player's command] ([hash of the player's command]) : [xx][line break]" to the file of roilhints;
			else:
				append "[the player's command] (divided by periods) : [xx][line break]" to the file of roilhints;
			if hint-to-display is false:
				continue the action;
		if hint-to-display is true:
			say "[if hint-to-file is true]THIS MOVE'S HINT: [end if][xx][if hint-to-file is true] (turn hints-to-display off with HD)[end if][line break]";
			continue the action;
		if hint-to-display is false:
			say "[xx][line break]";
			continue the action;
	else:
		say "[xx][line break]";

to say plus:
	say "[run paragraph on][one of] (+) [i][bracket]Note: the plus sign means you can HINT again for something more spoilery. (-) means the end of a list of hints.[no line break][r][close bracket][or] (+)[stopping]";

to say minus:
	now cur-item is thruhinted;
	say "[one of] (-) [bracket][i]A minus sign means you've reached the end of a hint loop. You can cycle through them again, though.[no line break][r][close bracket][or] (-)[stopping]";

chapter hinting (object)

have-objhinted is a truth state that varies.

before objhinting for the first time:
	now have-objhinted is true;
	ital-say "a word of warning before hinting objects. It is possible but very unlikely that this may reveal items you do not know about yet if this is not used carefully.";

[definition: a thing (called hintcand) is hintrelevant:
	if hintcand is off-stage, decide no;
	if hintcand is in lalaland, decide no;
	if hintcand is useless, decide no;
	if hintcand is the location, decide no;
	if hintcand is the diorama or hintcand is part of the diorama: [if hintcand is out of play?]
		decide no;
[	if hintcand is span pans or hintcand is knob:		[Bad Coding. if hintcand is enclosed by a thing: now R1 is map region of location of a thing that encloses hintcand;]
		if span pans is visible:
			decide yes;
		decide no;]
	let R1 be map region of location of hintcand;
	let R2 be mrlp;
	d "[hintcand] [R1] vs [R2].";
	if R1 is R2:
		decide yes;
	decide no;]

[	if hintcand is a backdrop or hintcand is scenery:
		if hintcand is visible, decide yes;
		if hintcand is not visible, decide no;] [this code causes a loop & I don't know why]

definition: a thing (called hintcand) is hintrelevant:
	if hintcand is off-stage, decide no;
	if hintcand is in lalaland, decide no;
	if hintcand is useless, decide no;
	if hintcand is the location, decide no;
	if hintcand is the diorama or hintcand is part of the diorama: [if hintcand is out of play?]
		if player is in Largely All-Grey Gallery or player is in study:
			decide yes;
		decide no;
	if hintcand is closest closets:
		if mrlp is means manse and highest heights is visited:
			decide yes;
		decide no;
	if hintcand is old giant and mrlp is routes: [he is known-about before he comes on stage officially]
		decide yes;
	if hintcand is red writing:
		decide yes;
	if hintcand is Thearchy Hatchery or hintcand is Maturation Natatorium:
		if mrlp is towers:
			if actionless coastlines is visited or Strati Strait is visited:
				decide yes;
		decide no;
	if hintcand is n-t-air:
		if mrlp is presto and zany meter is in grey gyre, decide yes;
		decide no;
	if hintcand is curst palace:
		if mrlp is towers:
			decide yes;
		decide no;
	if hintcand is big-let:
		if nowt town is visited:
			decide yes;
		decide no;
	if hintcand is cler-scen:
		if mrlp is routes:
			decide yes;
		decide no;
	if hintcand is Edictal Citadel:
		if mrlp is otters and frontage is visited:
			decide yes;
		decide no;
	if hintcand is leak lake or hintcand is shoals aslosh:
		if mrlp is towers:
			if salted deltas is visited or Actionless Coastlines is visited or Strati Strait is visited:
				decide yes;
		decide no;
	d "[hintcand] before.";
	let R1 be map region of location of hintcand;
	d "[hintcand] after.";
	let R2 be mrlp;
	if R1 is R2:
		[d "[hintcand] [location of hintcand] vs [R2].";]
		if progval of location of hintcand < progval of location of player: [check for something inside something else]
			decide no;
		[d "[hintcand] is relevant.";]
		decide yes;
	decide no;
	decide yes;

objhinting is an action applying to one visible thing.

check objhinting a deregioned object:
	say "Nothing like that is in the immediate vicinity or region." instead;

understand the command "hint/hints/info/help [any thing]" as something new.

understand "hint [any hintrelevant thing]" as objhinting. understand "hints [any hintrelevant thing]" as objhinting. understand "info [any hintrelevant thing]" as objhinting. understand "help [any hintrelevant thing]" as objhinting.

[understand "hint [any not hintrelevant thing]" as a mistake ("Can't hint that.").]

ever-obj-hinted is a truth state that varies.

rule for asking which do you mean (this is the bypass disambiguation rule):
	if current action is objhinting or current action is gotothinging or current action is objasking or current action is objasking generically:
		say "Sorry, [one of]but you may not have been specific enough with the [if current action is gotothinging]going[else if current action is objhinting]hint[else]asking[end if] request. I'm going to err on the side of caution instead of possibly disambiguating something you haven't seen. This is a possible coding bug (and I'd like to know,) but it may also prevent spoilers. For best results, you should try to visit the location of whatever you want hinted or be more detailed in your request[or]this request seems too vague. If it's a bug, let me know[stopping].";
		bypass disambiguation;
		the rule succeeds;
	continue the action;

after asking which do you mean (this is the bypass disambiguation 2 rule):
	if current action is objhinting or current action is gotothinging or current action is objasking or current action is objasking generically:
		bypass disambiguation;
		the rule succeeds;
	continue the action;

does the player mean objhinting a deregioned object:
	it is very unlikely.

does the player mean objhinting a hintrelevant object:
	it is likely.

[does the player mean objhinting a visible object:
	it is likely.]

does the player mean objhinting an object in lalaland:
	it is unlikely.

definition: a thing (called hthing) is deregioned:
	if mrlp is routes and hthing is giant pin, decide yes;
	if location of hthing is nothing, decide no;
	if location of hthing is lalaland, decide no;
	if mrlp is not map region of location of hthing, decide yes;
	decide no.

to say qmsp:
	now qmspoil is true;

a thing can be thruhinted. a thing is usually not thruhinted. [This is to check if we got through hinting]

cur-item is a thing that varies.

carry out objhinting (this is the pick object to hint rule) :
	now cur-item is noun;
	if spoilit is false:
		d "[noun] hinting.";
	if noun is bounding, say "That's there just to provide barriers in various directions, and for local flavor. Screeny scenery, if you will. Or even if you won't." instead;
	if noun is a room:
		say "You need to hint things in a location, not a location. Also, you can just type HINT for the current puzzle to look at." instead;
	if noun is a fruit and player has noun, say "[frootz]" instead;
	if noun is a badbook, say "[if yak is in lalaland][my-bad] is no longer useful, with the yak gone.[else][one of][my-bad] is just a very boring and stupid book, and if you read it, you find yourself unable to stop mumbling the text.[plus][or]If you mumble [my-bad]'s text, you find yourself droning and drowsing off. Do you know anyone/anything that could use a rest?[plus][or]The bored yak nips at you if you fiddle with the drab yoke. You may notice that they also anagram [my-bad]'s title.[plus][or]Perhaps you could put the yak to sleep by READing [my-bad].[minus][cycling]" instead;
	if noun is the player:
		all-say "[if cur-score of Means Manse < 3]You have, or had, a special power you may remember from Shuffling Around. If you haven't figured it, hopefully, you soon will, from looking around[else]You're as good looking as ever! I can't tell you how to be a better you than you already are[end if]." instead;
	if noun is a fruit and player has noun:
		say "The [noun] is a fruit. You can return it to Curtis." instead;
	now ever-obj-hinted is true;
	if noun is big-let:
		all-say "[one of]It's kind of a hint[if r10 is unvisited], and you'll find more later in the maze[else if Unwary Runway is unvisited], and you've certainly seen a lot through the maze, which seems to end here[else], and they seem to be in alphabetical order[end if].[or]I've said a lot with that clue. If you've gotten through the maze, you'll know it's from L to V.[or]Maze, L to V, don't congratulate yourself?[or]MAZEL TOV.[cycling]" instead;
	if noun is question mark:
		all-say "[one of]The question mark in the settler seems to give no information, but its ambiguity is actually a potentially huge help. The question mark only appears during cheat mode. It also usually occurs when you have a thing and a description that anagrams it. An example follows.[plus][or]Let's say you ran across SACRED CEDARS and got ??????. This looks completely unhelpful. But it is not![plus][or]The ? indicates the S and C give different readings, as do the A and E, etc. But that means one of them must be right.[plus][or]So we get SC/AE/CD/RA/ER/DS.[plus][or]There are actually only a few possibilities, here. You have S-C--D or C-D--S and -A-RE- or -E-AR-. Two of these are the original words, but there's SECARD and CADRES. So CADRES would be the word. Another example follows with an ESPRIT STRIPE[qmsp].[plus][or]Believe it or not, nearly everything falls out with the clue ?R??R?.[plus][or]The first letter is e/s, the second p/r, the third p/r, the fourth i/r, the fifth r/p/s, and the sixth is e/t.[plus][or]If letter 4 were r, #2 and 3 would both be p. So #4 is i. Also, #5 is r, p or t. If it were r or p, we'd have the same problem again. #5 is t. But #6 must be e or t, so it is e. #1 is e or s, so it must be s. That leaves SRPITE or SPRITE. Maybe it's a can of sprite, a pixel or a spirit. Either way, you have the answer.[minus][cycling]" instead;
	if noun is cler-scen:
		if cleric circle is unvisited:
			try objhinting scripture picturers instead;
		all-say "The church isn't so special now you've been in it." instead;
	if noun is closets:
		all-say "The closets are just for transporting around the Means Manse quicker, to or from the study." instead;
	if noun is the location:
		all-say "Occasionally you can SCAN or SMELL or LISTEN for clues. You don't need to type a command to BREATHE it. In fact, the parser doesn't understand that." instead;
	if location of noun is nothing and noun is not a backdrop:
		all-say "[noun]: you probably shouldn't know about that object, yet. And if you do, try asking about objects you can see." instead;
	if noun is in lalaland:
		if noun is disk:
			if map region of location of skid is presto:
				all-say "(Hinting the skid instead, though you'll need to flip the disk back.)";
				try objhinting skid instead;
		if noun is skid:
			if drab yoke is not off-stage:
				all-say "(Hinting the disk instead, though you'll need to flip the skid back.)";
				try objhinting disk instead;
		all-say "[noun]: [if noun is a male person]He's[else if noun is a female person]She's[else if noun is plural-named]They've[else]That's[end if] been dealt with. I'm pretty sure." instead;
	if noun is not a backdrop and noun is not scenery:
		if mrlp is not map region of location of noun:
			all-say "That doesn't seem to be in this region." instead;
	if noun is cluey:
		say "The [noun] provides clues for something else you need to flip." instead;
	if noun is realized:
		all-say "Nothing more to do with [if noun is plural-named]that[else]those[end if]." instead;
	if noun is amusing:
		all-say "[if noun is plural-named]Those are[else]That is[end if] in there for general silliness." instead;
	if noun is useless:
		all-say "[if noun is plural-named]Those are[else]That is[end if] in there for local flavor and scenery." instead;
	if spoilit is true:
		if there is hint-entry of noun in table of hintobjs:
			now spoilit is false;
			choose row with hint-entry of noun in the table of hintobjs;
			if there is no spoil-entry entry:
				d "Oops fix [hint-entry entry].[line break]";
			if player has curst crust:
				if there is no spoil-entry entry:
					say "Before you eat the crust, you mutter a naughty word. You may need to use HINT to deal with [the hint-entry entry], which may be more distasteful than the crust itself.";
					ital-say "this is a bug. If you have a transcript/game state, I'd love to know.";
					do nothing instead;
				if noun is thruhinted:
					say "Looking for any excuse not to eat the crust, you suddenly think [if player is in shack]of [end if][spoil-entry entry]." instead;
				if noun is prefigured:
					say "The crust looks so disgusting, you [if player is in shack]instead think of [spoil-entry entry][else]once again thing [spoil-entry entry][end if]." instead;
				if player is in shack:
					say "You gulp the crust, mouthing your favorite profanity (minor or major, I won't judge,) and you wonder how you didn't see you could try [spoil-entry entry]." instead;
				else:
					say "You gulp the crust and can't help thinking [spoil-entry entry]. But you are too polite and/or repressed to say it until you've finished chewing, which takes a while!";
				if scams is false:
					decrement swears;
				now undo-code is 1;
				now noun is cheatitemed;
				prevent undo;
				if swears is 0:
					say "The crust is all gone, now.";
					now crust is in lalaland instead;
				otherwise:
					say "[line break]You have [swears] bite[if swears > 1]s[end if] left." instead;
			if player has snoop spoon:
				if noun is thruhinted or noun is prefigured:
					say "Hmm, wait. Maybe you can just go [spoil-entry entry]." instead;
				now snoop spoon is in lalaland;
				prevent undo;
				now undo-code is 6;
				now noun is cheatitemed;
				say "You angle your spoon a bit, and you realize you, or things, are or need to be [spoil-entry entry].[paragraph break]The spoon fizzles and dissolves once you see how next to get around." instead;
			if player has fretful truffle:
				if noun is thruhinted or noun is prefigured:
					say "You pause, wondering if there is a way to preserve resources. Maybe now is a good time to try to [spoil-entry entry]." instead;
				now fretful truffle is in lalaland;
				prevent undo;
				now undo-code is 4;
				now noun is cheatitemed;
				say "Chewing on the fretful truffle gives you a Pensive Peevins face--and an idea of what and how to think. In particular, you feel the need to [spoil-entry entry] right now." instead;
			if player has cinders:
				if noun is thruhinted or noun is prefigured:
					if player is in tapering and imp is in tapering:
						say "Hm, it'd still be fun to see the imp act";
					else if player is in anteroom and whiners are in anteroom:
						say "It still might peg the whiners back a bit if they talked more";
					else:
						say "You pause, realizing you do not need to discern. Perhaps now is a good time to remember";
					say " [spoil-entry entry]." instead;
				say "As you gaze into the cinders, they [if noun is medals and noun is not cinder-dissolve]glint slightly off the medals[else]blow away[end if], leaving you feeling ";
				if player is in tapering and imp is in tapering:
					say "the imp could act ";
				else if player is in anteroom and whiners are in anteroom:
					say "the whiners could talk ";
				say "[spoil-entry entry].";
				if noun is cinder-dissolve:
					now noun is cheatitemed;
					prevent undo;
					now undo-code is 7;
				if scams is false:
					if noun is medals: [ugh. This is a lousy hack to say, if we just find out about te medals, don't do anything. ]
						if nounsolve > 2 and adjsolve > 2:
							poss-d;
							now cinders are in lalaland;
					else:
						poss-d;
						now cinders are in lalaland;
				now noun is cheatitemed;
				the rule succeeds;
	if there is hint-entry of noun in the table of hintobjs:
		if noun is reflexed: [first check if it's solved already]
			repeat through table of dont-need-hints:
				if hint-entry entry is noun:
					all-say "[advice-entry entry]";
					the rule succeeds;
		choose row with hint-entry of noun in the table of hintobjs;
		if there is a parallel-entry entry:
			try objhinting parallel-entry entry instead;
		if player has Pa Egg Pea and eisihint is false:
			now eisihint is true;
			all-say "You try and imagine what [i]Pa, Egg, Pea[r] might say if it were actually about helping everyday people. Here's what you come up with.[line break]";
		choose row with hint-entry of noun in the table of hintobjs;
		now last-thing-hinted is noun; [for the special case HINT LEOPARD.HINT where SATYR might be the first in the random table. Less jarring this way.]
		if noun is cheatitemed:
			ital-say "these hints may be redundant, with the hint spoiler item you used.";
			now noun is cheathinted;
		else if noun is prefigured:
			ital-say "these hints may lead you to something you already guessed and wrote in your notepad.";
		all-say "[advice-entry entry]" instead;
	if noun is a portal:
		all-say "You can just enter it.";
	if noun is unimportant:
		all-say "[noun]: that isn't needed to solve the game." instead;
	all-say "[noun]: I don't have any hints for that. That means it is not important to the game, or this is a bug." instead;

definition: a thing (called disc-tar) is cinder-dissolve:
	if disc-tar is medals:
		if nounsolve < 3 or adjsolve < 3:
			decide no;
	decide yes;

eisihint is a truth state that varies.

a thing can be unimportant. a thing is usually not unimportant.

section what is realized

a thing can be realized.

section hint table for objects

[check objhinting when you are in clangier clearing or Scape Space -- check for if you did something already, or first hints. Include booleans etc. breakthru-field, breakthru-clearing, breakthru-ice]

to say dh-true:
	now trolls-hinted is true;

to say dio-part:
	say "Not a puzzle per se but helps you understand what to do with [if settler is off-stage]an analytical object you may uncover[else]the settler[end if]"

to say yak-worry:
	say "You don't need to worry about the yak for a long time[if Leo is not visible]. You may want to go to Dirge Ridge, south of the Char Arch, for companions[else if phat path is not visited]. You need to go north of the gyre and the maze, first[end if]"

check objhinting old giant:
	if bench is reflexive:
		try objhinting bench instead;
	if bench-end is reflexive:
		try objhinting bench-end instead;
	if elbow is reflexive:
		try objhinting elbow instead;
	if Rude 'N Nuder is visible:
		try objhinting Rude 'N Nuder instead;
	say "[bug-report]" instead;

to say in-hovels:
	say "[if player has lance]--wait, you already solved the wipes[else if player is in Shadier Airshed and lance is off-stage] that might be buried under here[else if player is in Shadier Airshed] like that lance, with the right verb[else] in a dingier area than this[end if]";

to say up-to-l3:
	unless droll dollar is off-stage:
		say "can only take everything you find, now";
		continue the action;
	say "[if curtis-level is 0]needs more fruit for your first reward[else if coin is off-stage]has a reward for you[else if curtis-level is 1]needs more fruit for your second reward[else if coins is off-stage and icons is off-stage]has a second coin for you[else if curtis-level is 2]still needs a few more fruits[else]has not just a coin but a bill[end if]"

to say n-o:
	say "[if atblock is reflexed]now[else]once[end if]";

check objhinting a quest-item when mrlp is routes (this is the redirect hints in routes rule) :
	if cleric circle is unvisited:
		say "You shouldn't know about [the noun] yet." instead;
	if list o toils is unexamined:
		say "[if noun is pipe soot]The pipe soot from the ashtray[else]That[end if] is one of the items on the list you haven't examined yet. In the Cleric Circle." instead;
	if noun is held:
		say "[The noun] is part of the spiers['] potion that will help let people see directions again[if circle is unvisited]. But you need to get into the cleric circle first[end if]." instead;

to say yerg-ok:
	say "[if Tetris sitter is reflexed]though her advice seems cryptic[else]but you'd have to get through to her first[end if]"

to say give-croc:
		say "[if serpent is in Mislit Limits]You need to get behind the serpent[else if Mesprise Premises is unvisited]You can, but you don't have to, visit the den to the west[else if Tetris sitter is reflexive]You need to make the Tetris Sitter care about something other than her game, first[else]You need to give St. Teri the crocus[end if]"

to say if-cro:
	if flowerpot is reflexive:
		say ", if you figure what to do with the crocus";

to say casp-cap:
	say "[one of]Casper doesn't want to be disturbed while writing Capers Recaps.[plus][or]Capers Recaps looks like almost two blackboards folded together. It's tempting to do something. [plus][or]SCRAPE the blackboard.[minus][cycling]"

to decide whether one-imp-down:
	if imp1 is reflexed or imp2 is reflexed or imp3 is reflexed:
		decide yes;
	decide no;

to decide whether one-whine-down:
	if ram1 is reflexed or ram2 is reflexed or ram3 is reflexed:
		decide yes;
	decide no;

to say medal-help:
	say "The medals look less than perfect. ";
	if nounsolve is 0 and adjsolve is 0:
		say "Maybe you can find someone, or something, to help. You should [if player is in Lamer Realm or player is in preserve]see what you can do here[else if player is in tapering anger pit or player is in anteroom]go north or south[else]explore north or south of the barley[end if]";
	else if nounsolve >= 3:
		say "You've done good work in the preserve[if nounsolve is 3](helping the [random flippable animal in Lamer Realm] is optional now,)[else],[end if] but maybe you can go [if Lamer Realm is unvisited]north[else]to the Lamer Realm[end if] to do more";
	else if adjsolve >= 3:
		say "You've done good work in the Lamer Realm, but maybe you can go [if Lamer Realm is unvisited]north[else]to the preserve[end if] to do more";
	else if nounsolve is 0 or adjsolve is 0:
		say "You've done something in the [if nounsolve is 0]Lamer Realm[else]preserve[end if], but not enough. And then there's [if nounsolve is 0]south[else]north[end if] of the barley, too";
	else:
		say "You've done work in the Lamer Realm and preserve, but not enough"

[ropins	"[one of]The prison ropins are locked.[plus][or]What could change that?[plus][or]Or make the ropins UNLOCKED? There's an NPC.[plus][or]The Lone Duck could make the gaol unlocked.[cycling]"]

table of dont-need-hints [tdnh]
hint-entry	advice-entry
Pa Egg Pea	"Pa, Egg, Pea can't help you any more. Well, it never did, except to get a last lousy point." [start TROVES]
stop post	"Now you've spotted the post, it is only good for another clue if you examine it."
what-a-bee	"You can get past the bee now[if bee's head is reflexive], though you can deal with it one more way[else], having dealt with it both ways[end if]."
bee's head	"[by-bee]."
diapers	"[by-bee]."
praise	"[by-rivets]."
rivets	"[by-rivets]."
ME ARTS	"The ME ARTS inspired you enough, [if lobster is in lalaland]though you can knock off that lobster if you want[else]as much as the lobster, in fact[end if]." [end TROVES] [nothing for STORES]
scripture picturers	"The scripture picturers helped you get in, but they're just there to help other people now. Maybe." [start ROUTES]
bench	"You got the giant to the bench. Now you need to deal with the giant."
bench-end	"You positioned yourself well to duck the giant and put up with his elbow. Try something else."
giant's elbow	"You ducked the giant's elbow successfully. Now about that book..."
seed pit	"You got what you needed from the seed pit."
hurt hog	"[fill-in-here]" [end ROUTES]
dart	"[if dart is in popgun]You're done with the dart, except for firing it at the right time[else if marines seminar remains is unvisited]It'd be nice to find a weapon for the dart[else]Maybe the dart can fit in the popgun[end if]." [start PRESTO]
star	"[if marines seminar remains is visited]The star has done its duty[else]Wearing the star may help you get the authority to get by someone else who knows about decorations[end if]."
boing	"The boing mechanism works fine now."
maze walls	"The walls hold no great secrets beyond a clue to volt maze's essence itself."
log ons letters	"[other-let]."
alert letters	"[other-let]."
ought letters	"[other-let]."
scratch paper	"You got things compiling. No more worries there."
t-key	"[if t-key is part of keyboard]It's fit in now[else]It's part of the keyboard. You can put it in[end if]."
raft	"Now you're on the raft, you need to find a way to use the oars." [start OYSTER]
knob	"The knob's been dealt with."
heaps	"I can't give any artistic advice. They're--good enough, I guess. Better than before."
lance	"I can't give you details on how to fight, but now your lance is clean, you'll be able to use it when need be."
gleaner	"[if gleaner is unexamined]You just need to examine the gleaner to figure what to do with it[else if dourest detours is visited or tenfold is visited]The gleaner's not particularly valuable to you any more. But maybe it could be to someone else[end if]."
lever	"The lever was designed not to give extra points for pulling it too much."	[end OYSTER]
turbos	"You fixed the turbos. Now maybe try the blaster." [start TOWERS]
blaster	"You fixed the blaster. Now maybe try the turbos."
Tetris Sitter	"Now St. Teri's sick of Tetris, [if flowerpot is in lalaland]and you gave her a gift, she can help[else]maybe you can give her a priceless gift of sorts instead[end if]." [end TOWERS]
b-b	"You've cut it down enough. Leave some for next year's crop." [start OTTERS]
medals	"The medals are in good enough shape. They will help you speed up when you need to."
Elmer	"You can't take on Merle and Elmer by yourself--you need some allies."
Merle	"You can't take on Merle and Elmer by yourself--you need some allies."	[end OTTERS]

to say other-let:
	say "Try either of the other letters. With variety, Leo and Rand will take the hint"

to say this-animal:
	say "You've got a useful ally. They'll be ready just as they are when the time comes"

to say by-rivets:
	say "You've been inspired enough by the statue[if praise is reflexed and rivets are reflexed], more than enough, in fact[else], though you could still get a bit more inspiration[end if]"

to say by-bee:
	say "You can get past the bee now[if what-a-bee is reflexive and bee's head is reflexive], though you can deal with it one more way[else], having dealt with it both ways[end if]"

to say op-ed-silly:
	say "The op-ed, with all of its parts, is just there to build up Elvira's ludicrous 'case' against you";

table of hintobjs [toh]
hint-entry	advice-entry	parallel-entry	spoil-entry
red writing	"The red writing provides a clue of what the letters can't be."
pedanto-notepad	"You can CONSULT the notepad about things. It contains no game-critical hints, but it can help you remember a lot of shortcuts and such, so you can think sharper."
Urgent Gunter	"You can pump him for information if you want."
peephole	"The peephole's for looking through."
notice	"For reading."
question mark	"[bug-report]"
colorful logo	"The logo provides hints as to the mechanics of the settler. You may want to try examining it with teach/cheat mode on or off."
switch	"The switch shows you what needs to be changed if you SWITCH SETTLER."
decal	"[one of]The Y's on the decal are orange. This seems like a clue.[plus][or]Orange is red and yellow.[plus][or]Y is the only letter of the alphabet that is...[plus][or]...a consonant and a vowel![minus][cycling]"
backside	--	laced decal
slider	"The slider will allow you more detailed hints about how close a guess is. But it has limited uses."
receptors	"Electricity is beyond me. But the rest of the settler could help you."
output	"This is the display that analyzes the last thing you meaningfully scanned."
platform	"[dio-part]."
pavement	"[dio-part]."
pedestal	"[dio-part]."
crabgrass	"[dio-part]."
farm plot	"[dio-part]."
event map	"[dio-part]."
steel pad	"[dio-part]."
brass crag	"[dio-part]."
niche	"[one of]'My niche' above the diorama leads upwards.[plus][or]What is a household accoutrement that leads up? If you use the settler, you may know what the last letter is.[plus][or]'My niche' can be a chimney.[minus][cycling]"
closest closets	"You can ENTER the closets to get back to the study or go from the study to the Heights."
vertical stripe	--	act-ruin curtain
horizontal stripes	--	act-ruin curtain
small holes	--	act-ruin curtain
pen	"Not much you can do with a pen other than write."
palm	"[one of]Well, you need a light source, but a palm [b]absorbs[r] light.[plus][or]It wouldn't be bright to stumble into the palm...[plus][or]...but changing the palm would be.[plus][or]If you wait around, you get some hints of what to do with the palm. Note the purposefully bad spelling.[or]One four-letter shuffling of PALM is indicated. Hopefully.[or]You can change the palm to a LAMP by just saying so.[minus][cycling]"
lamp	"The lamp will last as long as you need it to."
yourself	"[one of]You have the same power you had in Shuffling Around.[plus][or][if Gunter is off-stage]Try opening the door and having a chat. You'll see some, err, patterns.[else]Gunter's chat contained a good many things.[end if][plus][or]You had the ability to flip objects into anagrams of each other. This game shows a different side to that power.[minus][cycling]"
semi-secret side door	"[if Gunter is off-stage]You can and should OPEN the door.[else]There's nobody outside the door you wants to see. You'll want another exit.[end if]"
t-b	"[one of]The ten beams guard something downstairs. What?[plus][or]The number of beams is important.[plus][or]What's a common downstairs place in any house?[plus][or]The beams guard a BASEMENT.[minus][cycling]"
tables	"[one of]The tables seem out of place in such a posh mansion.[plus][or]What's more posh than tables?[plus][or]The tables can be a STABLE.[minus][cycling]"
chimney	"You can CLIMB the chimney or go up it."
stair	"You can go up or down the stair."
giant pin	"[one of]The pin's hanging from a wall, but things like that usually don't hang from walls.[plus][or]What generally hangs from a wall to make a room look nicer?[plus][or]A picture or...[plus][or]A painting.[minus][cycling]"
sitar	"[one of]You need a way down, but the sitar doesn't allow that.[plus][or]Rearrange two letters in sitar.[plus][or]The sitar becomes a stair.[minus][cycling]"
stria	"[one of]Embedded in the ceiling, the stria split it a bit. Maybe they offer a way up?[plus][or]The stria can become a STAIR.[minus][cycling]"
pram	"[one of]The pram gives you a sinking feeling to look at it.[plus][or]You need a way down and out of reach. Something you could even crawl down.[plus][or]The pram can become a ramp.[minus][cycling]"
ramp	"Just go down or in to walk down the ramp."
latches	"[one of]The latches seem useless, but they are your parting gift from [gtmn][if Largely All-Grey Gallery is visited], so you probably want to 'solve' them before moving on[end if].[plus][or][if treatise is off-stage]You should examine the latches. There's a note inside them which is useful.[else][gtmn] also said it would be pretty simple to figure out what to do with the latches.[end if][plus][or]Did you notice anything about the treatise's wording that might give a hint about the latches?[plus][or]Lots of anagrams in the treatise, but they have something in common.[plus][or][gtmn] only switched the first and last letters in the treatise. Maybe you can do that with the latches.[plus][or]You can get a SATCHEL.[minus][cycling]"
satchel	"The satchel might be useful for carrying things, but your super purse is better. So don't worry about it."
letters settler	"[one of]The settler seems to give mostly reds and yellows. If you tinker with it, you may notice a pattern.[plus][or]Reds mean one thing and yellows mean another. If you've solved and scanned a bit, you may know which is what.[plus][or]Also, the coloring of the words LETTERS SETTLER is a clue. If you have the teach/cheat button on.[plus][or]As is, to get fourth-wall, A ROILING ORIGINAL.[plus][or]But the settler is all you need.[plus][or]With teach/cheat on, note that e-t-t are halfway different colors. That's because they match.[plus][or]Specifically, if the current object differs from the target object in one letter, the color will be red if the target is a consonant and yellow if it's a vowel.[plus][or]If you have 'cheat' on, you can see that green is a correct vowel and purple is a correct consonant. Red and yellow are incorrect consonants and vowels.[plus][or]There are also orange and brown, but they are rarer. Since orange = red + yellow, you can guess what it may be.[plus][or]The letter Y.[plus][or]There should be a separate document describing basic strategies for using the settler.[plus][or]One last thing: the equals sign is there so as not to spoil puzzles that are a bit on the easy side. It's fully optional and just part of what I hope is something that helps calibrate play to be more fun based on how tough you find these sorts of puzzles.[minus][cycling]"
diorama	"[one of]The diorama provides things you can flip around. You don't get any points for them, since they're labeled, but I hope they help.[plus][or]First, the platform and pavement give only reds and yellows, even in teach/cheat mode. Cheat mode doesn't help.[plus][or]What pattern do you see in reds and yellow on the diorama?[plus][or]The crabgrass and pedestal have colors that change in some places.[plus][or]Note the colors change from red to purple or yellow to green. What is similar about these?[plus][or]Adding blue. And which letters change?[plus][or]cRAbgrass, bRAss crag.[plus][or]The letters that are correct![plus][or]So, blue = correct.[minus][cycling]"
tcb	"[one of]The teach-cheat button toggles whether or not you know characters are in the right position.[plus][or]More specifically, red/yellow=wrong, purple/green=right.[minus][cycling]"
equals sign	"[one of]The equals sign is useful if you don't want things to be too easy.[plus][or]The equals sign will give squealings if you scan something and the information might make the puzzle trivial.[plus][or]You can override the equals sign with SY (scan with correct letters) or SN.[line break][sy-sn][minus][cycling]"
ISBN Bins	"[one of]The ISBN Bins are pretty hefty, but they're easy to enter.[plus][or]Maybe you could add a bit of security before leaving. Not that you need to. But if you want all the points...[plus][or]It's an unusual word, but then, there are only twenty-four of them.[plus][or]You can make a SNIB.[minus][cycling]"
teariest treatise	"[one of]The treatise describes how to use the settler.[plus][or]The treatise cuts off near the end, but the first paragraph gives enough hints.[plus][or]The treatise provides information on what to change the latches to, as well as what's beyond.[minus][cycling]"
super purse	"[one of]The super purse can't be changed, but it's there to circumvent some common adventuring tropes.[plus][or]The purse is a bit of a catch-all, so your huge inventory seems reasonable. It hides what you don't need nicely, and it shows what you do.[minus][cycling]"
evac-cave	"The evac-cave is your way out[if Elmo is visible] once you get rid of Elmo[end if]."
Gird Grid	"The Gird Grid has information on the various stores to explore."
plaster	"[one of]Plaster generally covers up holes. You need to bust through that plaster.[plus][or]If you used the settler, you might notice it, uh, settles a lot about the plaster.[plus][or]The plaster becomes a STAPLER.[minus][cycling]"
plates	"[one of]The plates are embedded, but they have a metal rim. Well, sort of.[plus][or]The plates are also square, with metal half-square rings.[plus][or]They become a STAPLE.[minus][cycling]"
staple	"[one of]What does a staple go in?[plus][or][if plaster is visible]Something the plaster can change into.[else]The stapler.[end if][plus][or]PUT STAPLE IN STAPLER.[minus][cycling]"
stapler	"[one of]What goes in a stapler?[plus][or][if plates is visible]Something the plates can change into.[else]The staple.[end if][plus][or]PUT STAPLE IN STAPLER.[minus][cycling]"
act-ruin curtain	"[one of]What does the act-ruin curtain--with its design--remind you of?[plus][or]The act-ruin curtain is meant to look like lined paper. The sort of essay paper you might procrastinate for a class. Hence why it stops you from acting. The holes in the upper corner look like they were made by a stapler.[plus][or][if plaster is visible or plates are visible]You've got some work to do before you can do any stapling[else]You've got what you need to staple the curtain and peel it back[end if].[plus][or]STAPLE CURTAIN[if staple is not in stapler] once you've put everything together[end if].[minus][cycling]"
rifle	"[one of]The rifle's more powerful than words. OR IS IT.[plus][or]The rifle makes you wonder if you're on a wanted poster or something.[plus][or]The rifle can become a much more harmless FLIER.[minus][cycling]"
Curtis	"[if moss cap is off-stage][one of]Curtis will help you if you get him enough fruits. Actually, just four.[plus][or]Look around a bit and look at the scenery. A few things have just a few letters. The rest are an exercise.[plus][or]He is good at delegating but not conversation.[minus][cycling][else if player has moss cap]You won't get more than the moss cap from him. Now, what to do with it?[else]Curtis [up-to-l3].[end if]"
Mole Elmo	"Mole Elmo's not a very enthusiastic captor. It's as if he wants you to do something to the rifle."
high sign	"[one of]3, 4, 1, 2, 5. What do those numbers mean?[plus][or]The rifle has five letters, so that is a clue.[plus][or]Letter 3, letter 4, letter 1, letter 2, letter 5.[plus][or]3-4-1-2-5 of rifle.[plus][or]Elmo is cluing the rifle can become a FLIER.[minus][cycling]"	[end MEANS MANSE hints]
sad ads	"Err, mostly anagrams that couldn't fit into puzzles. I hope you find them amusing."
Store B	"[one of]Store B contains some sort of mystery food, but people seem too lazy to figure it out.[plus][or]The two names provide red-clues, but you can also tell from the smells from Store B.[plus][or]SORBET.[minus][cycling]"
Store H	"[one of]If you haven't solved the game proper, you won't be able to get into Store H.[plus][or]Store H appears radically different from the rest of the store. It's probably where stuff that doesn't fit in goes.[plus][or]ES Roth mentions that you can't face the hoster or call it directly.[plus][or]What's a word for stuff sluffed off to the side?[plus][or]OTHERS. If you want the quick way through, you will need to restart the game.[plus][or]You need to [b]ROVE OVER[r] when you are in the Means Manse.[minus][cycling]"
Store K	"[one of]Store K is not critical, because it's a bit of American slang.[plus][or]What is the suspicious smelling smoke?[plus][or]The smoke is marijuana, but STONER doesn't quite work on Store N.[plus][or]The residents of Store K want to REST, OK? That hint knocks out the vowels with the settler.[plus][or]Also, they yell don't have a STROKE![plus][or]You can also assume they are plural, so S is last.[plus][or]They are TOKERS.[minus][cycling]"
Store N	"[one of]Looks like there's a guy in Store N. You need to figure his name.[plus][or]Items fall out of Store N if you keep poking or examining.[plus][or]The toners/Sterno give a lot of clues.[plus][or]The mythology and Tintin clue may tip you off.[plus][or]NESTOR is his name.[minus][cycling]"
Store P	"[one of]You seem to need a magic word, and the tropes poster plus Store P give you a few hints.[plus][or]In particular, you see two blinking colors, which means the first two letters are P/T O/R.[plus][or]But the second must be a consonant. Also, TROPES means you know where the vowels are.[plus][or]Process of elimination gives PRESTO.[minus][cycling]"
tropes poster	--	Store P
Store T	"[one of]Cute squeaky noises from burrows in Store T. There must be many such animals. As if there's some animal that this industrial buildup has displaced.[plus][or]There are four choices left, if you use the settler, but what is a riverside animal?[plus][or]OTTERS.[minus][cycling]"
Store U	"[one of]The roads in Store U. What's another word for that? They're numbered, too.[plus][or]The settler's a big help here, as it knocks out the vowel. Then you can try where T should go. Or better yet, you can guess that whatever it is is plural, and that knocks things out logically.[plus][or]Not just any old roads but ones with signs for bus stops, etc.[plus][or]ROUTES.[minus][cycling]"
roads	--	Store U
Store V	"[one of]You see sparkling inside Store V if you look at the right angle. Well, several angles.[plus][or]Hmm, treasures. Where do you find treasures? (Word-logic clues follow before the solution.)[plus][or]If you use the settler, you can figure which vowels are where.[plus][or]Then you can figure the first letter, since you have CCVCVC, and many two-consonant combinations don't work well to start.[plus][or]You should wind up with TROVES.[minus][cycling]"
voters	"You can scan the voters if you can't figure what Store V should be."
Store W	"[one of]You may wish to look at the description of Store W, though RESTOW also allows a clue.[plus][or]Store W seems taller than the other stores, like it has several levels. It's just an illusion. Plus, the store seems to blur into separate halves when you look at it.[plus][or]What's a name for a tall building, or tall buildings?[plus][or]TOWERS.[minus][cycling]"
shells	"The shells clue that Store Y might become something that lives in a shell."
Store Y	"[one of]Hm, store Y looks slimy on the inside, and it smells like saltwater too. It's also a weird shell shape, Store Y is. What sea life do you know that has a Y in it?[plus][or]Also, if you use the Letters Settler, you'll notice a letter that's a new color--orange. A combination of yellow and red.[plus][or]What letter can be a vowel or a consonant?[plus][or]Y. So the settler gives you three letters.[plus][or]You probably see by now--or can use process of elimination--to note Store Y becomes an OYSTER.[minus][cycling]"
otters-x	"[if you-can-advance]You've solved enough to go there[else if patcher is off-stage]You need to solve more stores to have the strength to make it past the otters[otherwise]You need to solve more stores, or zap them with the patcher, to make it past[end if]."
routes-x	"Just ENTER them."
troves-x	"Just ENTER them."
oyster-x	"Just ENTER the oyster."
e-s	"Just ENTER the oyster."
hoster	"[if roved is true]You can just enter the hoster.[else]You need to save Yorpwald first.[end if]"
towers-x	"You can just ENTER the towers."
ivy tower	--	towers-x
ivory tower	--	towers-x
tower-base	--	towers-x
engravings	"[one of]Whether a word is italicized or bolded reflects something.[plus][or]Try changing a store and looking again.[plus][or]The italicized words relate to the stores you've figured.[plus][or]Bolded words means an area is solved[plus][or]For instance, 'someone' is bolded, so you solved an area.[plus][or]The engravings are a hint to the figures of speech in the new areas, so you solved an area with nouns.[plus][or]Store W makes 'evil' go italic, so you may guess what sort of words are behind it.[minus][cycling]"
patcher	"[one of]The patcher can be used to skip certain areas. It's a bit fourth-wall, but it'll do.[plus][or]ZAP (store X) to zap a single store.[plus][or]SWITCH PATCHER to zap them all.[minus][cycling]"
f-o-b	"You may be able to guess what you need to do with the barley once you get there, but you can't do anything until you get past the otters."
Nestor	"[if tokers are off-stage]Nestor's pals are in store K[else]Nestor's back with his pals. Not much to do with him now[end if]."
tokers	"[if nestor is off-stage]You can find the tokers['] friend in store N[else if lecturer is reflexive]They'll give you a treat if you solve the side quest[else]They're of no use to you now[end if]."
mangiest steaming	"[if lecturer is reflexive]You can enter the steaming for a mini-side-quest[else]You've been in the steaming. After how you upended things, it'd be unwise to go back[end if]."
passage	"If you go there, you'll get a big hint."
pamphlets	"They are completely useless for actual life lessons, but the settler on 'cheat' mode will knock a vowel out from I USED TO."
idg	"[one of]You need to get Ian and the lecturer out of the way. Nouns won't work here.[plus][or]Ian's brochure is a hint.[plus][or]TEDIOUS + I USED TO will give you a lot of clues. Studio E will give a clincher.[plus][or]You need to throw the bums OUTSIDE.[minus][cycling]"
lecturer	--	idg	[end stores hinting]
poison stripe	"[one of]The poison stripe's name is a clue to what to do here.[plus][or][if cur-score of routes > 0]You've already figured one word[else]It's a certain sort of word[end if].[plus][or]Directions are confusing here, and standard ones don't work, but there's another way to get around.[plus][or]PREPOSITIONS.[minus][cycling]"
bench	"[one of]The bench-end indicates the bench is A GIANT'S. You probably can't touch it wrong.[plus][or]Touching the bench does nothing. How to cover more of it?[plus][or]Lean AGAINST.[minus][cycling]"	--	"AGAINST"	[start ROUTES hinting]
scripture picturers	"[one of]Going in to the church is not so easy. Simply saying IN isn't churchy enough.[plus][or]You need to be a little more flowery to enter the church. Is there any clue?[plus][or]DIE SIN becomes something new.[plus][or]You can kick the sign to change it to SIN DIE for another clue.[plus][or]INSIDE.[minus][cycling]"	--	"INSIDE"
cler-scen	--	scripture picturers
Brother Horbert	"He'll mix the reagents once you get them."
summary	"It's there for background: why you're doing what you're doing. Oh, about Mum Ray, I can't tell you. It's too sad/confidential/unbelievable."
snoop spoon	"Examine the snoop spoon for a hint when you need it."
list o toils	"The list-o-toils tells what you need[if mushrooms are in lalaland]ed[end if] to get. There is one item in each aboveground Routes location besides the Cleric Circle."
rs	"They're there to re-enforce your lack of direction."
worst ad	"[one of]How would you approach the worst ad?[plus][or]RADWOST is what the ad sells, whatever that is. That plus the settler gets you the vowels. A big clue for this Last Lousy Point.[plus][or][if cur-score of routes is 0]I'll check if you want to find what sort of words work here before going on[else]There are only so many prepositions in the English language[end if].[plus][or]TOWARDS.[minus][cycling]"	--	"TOWARDS"
adsorbing signboard	"[one of]You can't walk into Pat's as normal. It moves, and you never seem to get to the door.[plus][or]You just need to flip two letters to enter Pat's.[plus][or]PAST works.[minus][cycling]"	--	"PAST"
grubby restaurant	--	adsorbing signboard
lairage regalia	"[one of]You can't walk into Oscar's as normal. It moves to the other side.[plus][or]What's a preposition that's anagrammatic to Oscar's?[plus][or]Not down to enter Oscar's--perpendicular.[plus][or]ACROSS.[minus][cycling]"	--	"ACROSS"
dingy dwelling	--	lairage regalia
grouchy old giant	"[if old giant is off-stage]The giant is not in view yet. You need to examine the list-o-toils in the church[else if old giant is in lalaland]You're done with him[else]BUG. You should be directed to the bench or bench part you need to figure, now[end if]."
bench-end	"[one of]The giant seems to want you to listen to his tirades.[plus][or]This is a bit tricky--but the letters settler may help quite a bit. You know where the T is, and three consonants in a row aren't common.[plus][or]ASTRIDE.[minus][cycling]"	--	"ASTRIDE"
tirades	--	bench-end
giant's elbow	"[if elbow is reflexive][one of]Having trouble ducking the giant's elbow there, eh?[plus][or]The giant swings his elbow sort of high...[plus][or]...so you should be BELOW it.[minus][cycling][else]You dealt with the giant's elbow.[end if]"	--	"BELOW"
Rude 'N Nuder	"[one of]The contents of Rude [']N Nuder are probably worse than the giant's ranting. But again, you need to avoid his flailing entirely. You need to duck something that's over.[or]On cheat mode, Rude [']N Nuder scans oddly and gives you the solution.[plus][or]You need to go UNDER.[cycling]"	--	"UNDER"
Oscar	"Oscar has little to say, [if U NERD ENDUR REDUN is in Adobe Abode]but the pipe soot is something you may need[else]and you got the pipe soot[end if]."
Pat	"Pat has little to say, other than to discourage you from the seed pit, [if seed pit is reflexed]but you got through there[else]so you need to enter it despite Pat's objections[end if]."
U NERD ENDUR REDUN	"U NERD ENDUR REDUN is part of the spiers['] potion that will help let people see directions again[if circle is unvisited]. But you need to get into the cleric circle first[end if]."
a trashy ashtray	--	pipe soot
pipe soot	"[if pipe soot is not in adobe abode]You got the pipe soot.[else][one of]You can't just walk over to the ashtray and get the pipe soot. Oscar wants you facing him.[plus][or]How can you face someone and be far away?[plus][or]Be completely OPPOSITE.[minus][cycling]"	--	"OPPOSITE"
seed pit	"[one of]Pat's not going to let you have the mushrooms you probably need from the seed pit.[plus][or]However, Pat mentions a lot are worthless. The seed pit is too dangerous. You need to say something to ignore the seed pit warning.[plus][or]Tell Pat you'll go in DESPITE the warnings.[minus][cycling]"	--	"DESPITE"
mushrooms	"The mushrooms are part of the spiers['] potion that will help let people see directions again[if circle is unvisited]. But you need to get into the cleric circle first[end if]."
cravings carvings	"The cravings carvings clue how to get into the seed pit."
MORF FORM	"[one of]The MORF-FORM may be what was needed.[plus][or]It needs to change physically. What it is, and where it is.[plus][or]MORF is spelled wrong on purpose.[plus][or]It's threatening, where it will be. How can you not worry about where it will be?[plus][or]Make it FROM.[minus][cycling]"	--	"FROM"
drama armada	"They're just there to watch, or help you once you figure where to look, by THE BEAN."
the-b	"[one of]The Bean has given you a place to go or look--or, rather, a not-quite-direction.[plus][or]The ground feels a little shakier since the bean landed, but not enough to go straight down.[plus][or]PUSHing the Bean seems useless.[plus][or]You can go BENEATH the bean.[minus][cycling]"	--	"BENEATH"
sheol holes	"They're just there as an agent to make you find the right way out. Oh, Sheol is the Old Testament name for Hell, if you were wondering. TMYK!"
darkness	"[one of]'Unlit...' is a clue. What would the magic preposition be to make light?[plus][or]How to say this area was unlit, but now it is?[plus][or]UNTIL.[minus][cycling]"	--	"UNTIL"
narrow cracks	"[one of]You need to search for No-Gal Logan. But you need to find an un-road.[plus][or]Directions won't help on the un-road, but maybe you can go...or look...[plus][or]AROUND.[minus][cycling]"	--	"AROUND"
un-road	"[one of]You're halfway to finding No-Gal Logan. You've already been AROUND.[plus][or]How do we go down a path? Or follow it? Within the rules of the Routes area?[plus][or]We go ALONG it.[minus][cycling]"	--	"ALONG"
mist	"[one of]Well, DA MIST is a bit of a clue, as is Sad Tim's babbling.[plus][or]You need to go all around the mist too find something that allows you aboard to go abroad.[plus][or]AMIDST will help you search everywhere.[minus][cycling]" 	--	"AMIDST"
free reef	"It's just scenery."
thickness sketchins	"[one of]The poem seems to have AAHRTTW as the letters. It's tough to navigate, but you seem to need to go this way and that way.[plus][or]This word is a bit archaic, so you may want to use the spoon.[plus][or]ATHWART.[minus][cycling]"	--	"ATHWART"
bad oar	"The thickness sketchins will tell you how to use the bad oar."
raptest patters	"[one of]'Thou wit!' You don't really need the flattery, but it won't really derail you.[plus][or]It might be better to ignore them.[plus][or]Or not put up with them.[plus][or]Or do WITHOUT.[minus][cycling]"	--	"WITHOUT"
bent ewe	"[one of]The bent ewe feels threatened by the hurt hog. Maybe you can defuse things.[plus][or]Get in the way.[plus][or]Sonancy Canyons is another country. They do things differently there.[plus][or]BETWEEN.[minus][cycling]"	--	"BETWEEN"
hurt hog	"[one of]The hurt hog won't let you by. You [if bent ewe is reflexed]dealt[else]need to deal[end if] with the bent ewe.[plus][or]With the newt bee sated, everyone will be happy, and you can go...[plus][or]THROUGH.[minus][cycling]"	--	"THROUGH"
yob den	"[one of]It's not really important. They're just a symptom of what's gone wrong.[plus][or]So how to ignore the yob den and move away from it?[plus][or]Go BEYOND.[minus][cycling]"	--	"BEYOND"	[end ROUTES hinting]
Pa Egg Pea	"[one of]Reading Peg A. Page's book will give you hints what to do in general.[plus][or]The book has a personality-cult feel about it. Perhaps you are reading it too critically.[plus][or]GAPE at the book.[minus][cycling]"	--	"GAPE"
cold	"[one of]Even negative emotions can warm a person and give needed heat, even for a short while. But they may cause more trouble later.[plus][or]HATE is useful for short-term goals at best.[minus][cycling]"	--	"HATE"	[start TROVES hinting]
heat	"[one of]Emotional investment is necessary to win [i]a rat race or a foot race[r][plus][or]You need to CARE or you will waste effort[minus][cycling]."	--	"CARE"
fretful truffle	"The fretful truffle, if you eat it, will tell you what to [if cur-score of troves is 0]type[else]think[end if] next."
verbose	"[one of]Even when someone or something is terse with you, their terseness can give you something to focus on and manipulate[plus][or]OBSERVE other people or things[minus][cycling]."	--	"OBSERVE"
post	"[one of]You must persist when you are stonewalled. The second time is easier than the first and likely requires less creativity[plus][or]You may SPOT something interesting on a second look[minus][cycling]."	--	"SPOT"
bee's head	"[one of]The bee is hovering so near. But small bees shouldn't be able to fly. Giant bees--well, there is the giant's paradox.[plus][or]The path of concrete reasoning should not be closed to the common man.[plus][or] often, once you believe you can, you really can REASON![minus][cycling]"	--	"REASON"
what-a-bee	"[one of]Even intellectual elitists know, deep down inside, that there is an emotional component to things.[plus][or]They hope to be able to BELIEVE without letting the common man do so as well. Not that they need to, to achieve their goals.[minus][cycling]"	--	"BELIEVE"
cellar door	"[one of]To open the cellar, you need not REMEMBER anything and everything. Instead, just say 'Oh I know' after someone offers knowledge. It works, because, you know--well, you BETTER know...[plus][or]It is better to be able to RECALL[minus][cycling]."	--	"RECALL"
spider	--	sad pier
sad pier	"[one of]The objects in the Drain Nadir should give you a clue what to do next, since they're all anagrams.[plus][or]Examining yourself, you need to hit total rock bottom.[plus][or]DESPAIR.[minus][cycling]"
diapers	"[one of]One page after saying you don't want to make any big mistakes, there's a bit about how you may need to hit rock bottom before finding your way back up[plus][or]There's lots of mumbo-jumbo about observing sentimental objects until you get sick of them, but please be sure to forget them once they've served their purpose[plus][or]DESPAIR is a last option that is hard to come back from. Except when coming back from it slingshots you past people who can't even despair[minus][cycling]."	--	"DESPAIR"
lager	"[one of]The Large Regal Lager [if player is in boredom bedroom]here [end if]in Boredom Bedroom serves a purpose, but not a critical one.[plus][or]You are upset at the lager. You can make a moral statement by looking at it funny.[plus][or]GLARE at the lager.[minus][cycling]"	--	"GLARE"
Eddie's Song	"[one of]Eddie C, I'd Cede. Listening once helps you see red.[plus][or]Another time listening gives you notes, lyrics and more red.[plus][or]A third should clinch it. You want to do more. Or less.[plus][or]DECIDE.[minus][cycling]"	--	"DECIDE"
lobster	"[one of]That lobster looks delicious, but you can't bring yourself to eat it. You don't have the confidence[if ME ARTS is in Boredom Bedroom]. NB: finding what to do with the ME ARTS also works[end if].[plus][or]You need to boost yourself![plus][or]Or, rather, BOLSTER![minus][cycling]"	--	"BOLSTER"
ME ARTS	"[one of]The ME ARTS should relax you to feel on top of things[if lobster is in Boredom Bedroom]. NB: finding what to do with the lobster also works[end if].[plus][or]You need to be able to control, to understand...[plus][or]...or to MASTER.[minus][cycling]"	--	"MASTER"
ltb	"[one of]Feelings of despair are okay. Working through them can help you learn to lead. Unless they don't. Then you deserve more despair[plus][or]If you can't DEAL, you'll never make it[minus][cycling]."	--	"DEAL"
brochure	"[one of]It is no sin to want a better place to RESIDE.[plus][or]Do not get too hippy-trippy on yourself. Without material DESIRE, nobody would want or build anything.[minus][cycling]"	--	"DESIRE"
dour tan rotunda	"It's what the Browse Bowers used to be called."
praise	"[one of]What do the rivets say? PRAISE. It should motivate you![plus][or][if rivets are reflexed]You already got what to do with the rivets, so the settler will be more merciful to you[else]The settler gives a mess because PRAISE and RIVETS go to different words, but the question mark is a clue in its own way[end if].[plus][or]How to want more without wanting more?[plus][or]You need to ASPIRE.[minus][cycling]"	--	"ASPIRE"
rivets	"[one of]Those rivets stand out.[plus][or][if praise is reflexed]You already figured what to do with what they say, so the settler is a bit easier on you[else]Because they say PRAISE, the settler is picking up two solutions[end if].[plus][or]The praise [i]rivets...[r] and should make you want more.[plus][or]You want to want more without just plain wanting more.[plus][or]STRIVE.[minus][cycling]"	--	"STRIVE"
statue	--	rivets
secure door	"Useful for keeping people out[if noise is in Upscale Capsule], though the vanity may provide more hints what (not) to do[end if]."
plasm lamps	"Useful for working late at the Upscale Capsule but not for solving silly word puzzles."
Desk Sked	"Useful for organizing tasks much trickier than playing dumb computer games."
big important desk	"Just part of the scenery."
godlings' lodgings	"[if pernod is off-stage]You can't think of getting into the godlings' lodgings until you are in tune with Trevis Vister.[else]The Pernod holds a clue how to get into the godlings' lodgings.[end if]"
Pernod	"[one of]Expensive alcohol is for high class reflection, and stuff. Or it advertises itself that way. That is what the Pernod claims to do.[plus][or]In this case, you have two more clues, which is what is on the front of the note tied to the Pernod and the back. 'Derp on, Epdorn.'[plus][or]'Dr. Peno and Ned Orp.'[plus][or]You need to PONDER how to get in.[minus][cycling]."	--	"PONDER"
card	"The card gives a clue, along with the Pernod, of how to get into the godlings' lodgings."
label	"If you peel the label (by taking it,) you will get another clue what to do to get in the godlings' lodgings."
DIVORCES	"[one of]You can learn something from DIVORCES. Not from the content, but from just how vapid and materialistic it is.[plus][or]You may have an epiphany how bad the magazine is.[plus][or]You can DISCOVER to put the magazine to shame.[minus][cycling]"
vanity	"[one of]The vanity is not just for prestige. It labels your region in red.[plus][or]You must learn to IGNORE silly distractions of people below/beneath you[minus][cycling]."	--	"IGNORE"
noise	"You need to not pay attention to the noise. See the vanity for details."
salt	"[one of]Anyone can make it to the top, but only those worth their salt will stay for any meaningful length of time[plus][or]The truly great can LAST[minus][cycling]."	--	"LAST"
sister tressi	"[one of]You can't fully agree with Sister Tressi.[plus][or]You're almost sick of the whole situation, but you need a way out of here. A physical way won't work.[plus][or]What's the first step to saying no?[plus][or]RESIST.[minus][cycling]"	--	"RESIST"
blamer balmer	"[one of]Blamer Balmer helps you keep your focus.[plus][or]But you'd like to wander a bit... in your mind...[plus][or]RAMBLE.[minus][cycling]"	--	"RAMBLE"
trance nectar	"[one of]You don't want to drink it. You want to get out of the whole situation.[plus][or]How to apologize to yourself?[plus][or]RECANT.[minus][cycling]"	--	"RECANT" [end TROVES hinting]
curst crust	"[one of]You'll say something reflexive if you eat the crust.[plus][or][if Grey Gyre is unvisited]The crust is useful in the PRESTO region.[else]Eating it gives you a hint what to say.[end if][minus][cycling]"	[start PRESTO hinting]
volt maze	"[maze-solve]."	--	"MAZEL TOV"
zany meter	--	volt maze
n-t-air	--	volt maze
big l	"The big L tells you what letter the maze starts on."
big-let	"The big letters tell you that the maze goes from L to [if Unwary Runway is visited]some later letter[else]V[end if]."
l-m	"You can scan Lev for hints. He's not much for conversation."	--	"MAZEL TOV"
m-l	"You can scan Lev for hints. He's not much for conversation."	--	"MAZEL TOV"
Tom Alvez	"You can scan Tom for hints. He's not much for conversation."	--	"MAZEL TOV"
lamb	"[one of]The lamb is petrified with fear, but maybe the right fear would get it going again.[plus][or]What sort of noise can you make to get it going?[plus][or]BLAM.[minus][cycling]"	--	"BLAM"
onyx censer	"[one of]The censer's black and green and really retro.[plus][or]The censer may remind you of what people used to play text adventures on a long time ago.[plus][or]It can become a SCREEN.[minus][cycling]"	--	"make a SCREEN"
dart	"[one of]The dart is stuck in the dumpster, and taking it doesn't work.[plus][or]Frustrating, eh?[plus][or]What's a good word of frustration?[plus][or]Four letters.[plus][or]DRAT.[minus][cycling]"	--	"DRAT"
dumpster	"[if dart is not in dumpster]You got the dart you needed from the dumpster. Hooray![else][one of]You can't reach into the dumpster without a little extra something.[plus][or]The right word might help you get the dart.[plus][or]What to say to get the dart?[plus][or]DRAT.[minus][cycling]"
spumed tar	"The spumed tar is just there to complement the dumpster."
star	"[one of]The star is stuck in the stump, and taking it doesn't work.[plus][or]Frustrating, eh?[plus][or]What's a good word of frustration?[plus][or]Four letters.[plus][or]RATS.[minus][cycling]"	--	"RATS"
red stump	--	star
permadust
hump	"[one of]Hm, you can't get over the hump.[plus][or]What's a good word before you give a bunch of effort?[plus][or]UMPH.[minus][cycling]"	--	"UMPH"
plebe	"[one of]You need to get rid of that plebe.[plus][or][if player has star or player wears star]You've got something that will impress him[otherwise]You need to find something to impress the plebe--you may want to go visit the Char Arch to the south[end if].[plus][or]What are plebes scared of? A good tongue lashing.[plus][or]The game blocks the worst profanities. But you've got a pretty general one.[plus][or]You can say BLEEP [if player has star or player wears star]now[otherwise]once[end if] you have the star.[minus][cycling]"	--	"BLEEP"
Ye Hoop	"[one of]There are two ways to deal with the hoop, err, Ye Hoop.[plus][or]You sort of have to be impressed by the hoop, and say a little something to try harder, or say the heck with your possessions, which bog you down if you try to jump.[plus][or]You can say POOH to give your jumps a little boost, but you can do a bit better.[plus]What can YE HOOP anagram to?[minus][cycling]"	--	"POOH"
Leo	"[if Leo is fightin][one of]You need to neutralize Leo.[plus][or]He charges at you like a bull.[plus][or]What do you exclaim to get out of the way of a bull?[plus][or]OLE![minus][cycling][else if Rand is fightin]Deal with Rand first.[else if Rand is washed up][wash-up][else if Rand is in hacks' shack]The sign provides a clue how to get rid of Leo and Rand so you can enter the shack.[else if ether is not in lalaland]You may need him for a fight.[else]He can't do much more, so time to find a place to say good-bye.[end if]"	--	"OLE"
Rand	"[if Rand is fightin][one of]You need to neutralize Rand.[plus][or]Perhaps another feint can help you defeat Rand.[plus][or]What can you say to fake him out? A word of half-surrender.[plus][or]DARN![minus][cycling][else if Leo is fightin]Deal with Leo first.[else if Rand is washed up][wash-up][else if Rand is in hacks' shack]The sign provides a clue how to get rid of Leo and Rand so you can enter the shack.[else if ether is not in lalaland]You may need him for a fight.[else]He can't do much more, so time to find a place to say good-bye.[end if]"	--	"[if Rand is fightin]DARN[else]WHASSUP[end if]"
wzup	"[wash-up]"	--	"WHASSUP"
popgun	"[if dart is in popgun]The popgun's locked and loaded.[else if boing is reflexed]You can just put the dart in the popgun.[else]The popgun is broken. More precisely, its boing mechanism is broken.[end if]"
boing mechanism	"[one of]So, the mechanism doesn't go BOING.[plus][or]A eureka moment could change the boing mechanism's brokenness.[plus][or]Or, if you notice the mechanism's serial number...[plus][or]BINGO.[minus][cycling]"	--	"BINGO"
sport ports	"[one of]The sport ports can give you a point if you look at them right.[plus][or]This is a foreign language way to say 'cheers' to people who can navigate them.[plus][or]PROST.[minus][cycling]"	--	"PROST"
harpings phrasing	"[one of]The sign gives you three ways to tell Rand and Leo they've done their job[if rebuked is true], and they've been persistently loyal, so maybe you need another way to say things[end if].[plus][or]It's time to [if rebuked is true]find another way to [end if]say good-bye to Rand and Leo, but you can't be all 'Obey, Dog.'[plus][or]Maybe the sign can help you say [if rebuked is true]one more thing[else]what[end if] you need to, to ditch Rand and Leo?[plus][or][sl-t-l].[minus][cycling]"	--	"[if entry 1 of byebyes is log ons]SO LONG[else if entry 1 of byebyes is alert]LATER[else]TOUGH[end if]"
alert letters	"[one of]The sign indicates you may want to get rid of Rand and Leo, who are not very smart.[plus][or]Say LATER.[minus][cycling]"
log ons letters	"[one of]The sign indicates you may want to get rid of Rand and Leo, who are not very smart.[plus][or]Say SO LONG.[minus][cycling]"
ought letters	"[one of]The sign indicates you may want to get rid of Rand and Leo, who are not very smart.[plus][or]Say TOUGH.[minus][cycling]"
ether	"[if Rand is not eager or Leo is not eager]You'll need friends to get through there. Try making them down by the dumpster.[else if boing is reflexive or dart is not in popgun]Muscle isn't enough. You need a weapon.[else][one of]You can sort of make out stuff through the ether.[plus][or]If you could give Rand and Leo a word before Rand and Leo walked in, it'd be a big help.[plus][or]What to yell, so they know where to look?[plus][or]THERE.[minus][cycling][end if]"	--	"THERE"
lawl wall	"[one of]The wall can't be changed on its own.[plus][or]But the keys or hogs can be...dealt with. Try hinting either of them.[minus][cycling]"	--	"[if goshy is true]GOSH[else]SYKE[end if]"
hogs	"[one of]The hogs find it funny you can't get the keys.[plus][or]If you expressed your disappointment, the hogs might get overconfident.[plus][or]GOSH.[minus][cycling]"	--	"GOSH"
keys	"[one of]You really want the keys, and there's no way to pretend you don't.[plus][or]Maybe you can pretend, sort of, and annoy the hogs.[plus][or]SYKE.[minus][cycling]"	--	"SYKE"
hawt thaw	"[one of]You can do something with the hawt thaw, but it's not critical to the game.[plus][or]You may wonder how or why the heck it exits.[plus][or]Saying WHAT makes it disappear.[minus][cycling]"
serial number	"[one of]The numbers can mean something else.[plus][or]Convert them to where they are in the alphabet.[plus][or]This is an alternate solution to grinding it out with the Settler.[plus][or]BINGO.[minus][cycling]"
futon	"[if slept is true]You won't need to sleep on the futon again.[else][one of]The futon has patterns of tiresome--figuratively and literally--peels on it.[plus][or]The futon will be useful to sleep on when you need to.[minus][cycling][end if]"	--	"SLEEP on the futon"
speel	"[one of]You're too tired to read the speel.[plus][or]You can't make any logic leeps in your current condition.[plus][or]Best to SLEEP.[minus][cycling]"	--	"SLEEP"
fount	"[one of]The fount is a fount of knowledge. Dry knowledge, but knowledge.[plus][or]The fount's also very restful.[plus][or]You can probably find a way to fold the fount into...[plus][or]...a FUTON.[minus][cycling]"	--	"make a FUTON"
escaroles	"[one of]The escaroles aren't much of a meal on their own. They could be more meaty.[plus][or]The escaroles could be a dish instead of garnish. Any old dish, with all sorts of things slopped into it.[plus][or]Or a CASSEROLE.[minus][cycling]"	--	"Fix a CASSEROLE."
casserole	"[if yak is in shack or yak is in lalaland]You can't use the casserole any more. You could've bribed Leo and Rand with it.[else][one of]You can't take the casserole--it's too hot. It's also kind of yucky for someone as sophisticated as you unless you need calories.[plus][or]Met anyone who can use calories who doesn't sweat niceties?[plus][or]Leo and Rand. If you poke them when you have a tough physical task, you can get them to push the skid north.[minus][cycling][end if]"
trim socks	"[one of]The socks aren't critical to solving the game, but they do give a LLP--Last Lousy Point.[plus][or]The socks don't seem very technical, but they look like circuit chips or something.[plus][or]Maybe they'd make you go faster or something.[plus][or]Maybe they are, instead, ROM STICKS.[minus][cycling]"
rom sticks	"[one of]You can put the sticks in the hard drive to make it go faster. The game does this automatically.[plus][or]The sticks don't actually save moves or anything, though.[minus][cycling]"
gum	"[one of]Gum comes in more than six flavors at your local supermarket, but there are only five ways to change G-U-M.[plus][or]As for what it's good for, it's everlasting gum, and maybe what it changes into will help other things be everlasting.[plus][or]Oh, the solution?[plus][or]UMG, er, OMG, do you need to ask?[plus][or]You don't need to go to George Mason University.[plus][or]I just put extra clues in to give more clues than anagram possibilities, because I could.[plus][or]MUG. In which you pour liquid.[minus][cycling]"	--	"make a MUG"
mug	"[one of]Like the never-ending gum it came from, the mug regenerates what's in there.[plus][or]What goes in a mug? Liquid, generally.[plus][or][if coal is not in lalaland]You can probably figure what to do with the coal to make a liquid.[end if]The cola is a liquid.[plus][or]POUR COLA IN MUG.[minus][cycling]"
skid	"[if yak is in lalaland][one of]The skid has done what it needs.[plus][or]You should change it back to a DISK now.[minus][cycling][else if skid has not been in Phat Path]The skid can be pushed from place to place. You will need to.[else if yak is not on skid][one of]The skid can move things that won't budge.[plus][or]There's one thing that won't budge that has something you might need.[plus][or]The yak.[plus][or]You need to bribe the yak with something else.[plus][or][leaf-or-flea][plus][or]Put the leaf on the skid, and the yak will hop aboard.[minus][cycling][else if skid is not in shack]You need to push the skid to the shack.[else]It's the yak you need to worry about, now.[end if]"
skidrope	"The skid's rope lets you PULL the skid."
disk	"[if skid is off-stage][one of]You can change the disk to something else.[plus][or]The disk can become a SKID.[minus][cycling][else if disk is in hard drive]The disk is taken care of.[else]The disk can go in the hard drive, [once-now] you've got a full computer constructed."	--	"make a SKID"
keyboard	"[one of]The keyboard belongs on the table[unless caps lock is part of keyboard], and it's missing a piece[end if].[plus][or][if caps lock is visible]Put the caps lock in the keyboard.[else]See what you can do with the clock sap.[end if][minus][cycling]"
leaf	"[if leaf is not on skid]You can put the leaf on the skid to tempt the yak.[else]The leaf's where it should be.[end if]"
t-key	"[if t-key is reflexive]The tab key's what it needs to be.[else][one of]The TBA key is not a regular keyboard key. You can change it.[plus][or]The TBA key can become TAB.[minus][cycling][end if]"
signature	--	scratch paper
dirty looking cola	"[one of]The cola is great for drinking (without knowing it) during a long programming session. But there's only so much of it.[plus][or]You can pour the cola in [if gum is in lalaland]the mug[else]what the gum can become[end if].[minus][cycling]"
fizzy cola	"Cola is great for drinking (without knowing it) during a long programming session."
scratch paper	"[if signature is reflexed]Useless now.[else][one of]The signature and the scratch paper are clues to what to do.[plus][or]You can scan them both in cheat mode to figure where the vowels go.[plus][or]Or you can think of a computer term to get a program up and running.[plus][or]You need to COMPILE.[minus][cycling][end if]"	--	"learn to COMPILE from the scratch paper"
scratchings	"[one of]They give a clue what the drab yoke will be.[plus][or]Have you seen any apparatus with the numbers 1234567890 at the top, in order?[plus][or]One that is by you right now?[plus][or]They clue that the drab yoke can be a keyboard. But yaks aren't very magic, and this one's resisting in some odd animal fashion. So you need to deal with the yak.[minus][cycling]"
drab yoke	"[if yak is not in lalaland]The yak won't let you have it. You need to make the yak inattentive.[else][one of]Whatever the drab yoke should be is probably some sort of piece of computer equipment, too. Given the end puzzle.[plus][or]The settler will tell you where the Y should go. You can also figure where the O goes, on cheat mode, and two consonants fall, too.[plus][or]But the scratchings make it obvious what the yoke should be.[plus][or]Numbers on the top, letters below it, punctuation to the side.[plus][or]KEYBOARD.[minus][cycling]"	--	"make a KEYBOARD"
compiled code	"[one of]The compiled code works but has problems.[plus][or]You need to make the code BUDGE.[plus][or]The code still has bugs to fish out.[plus][or]Therefore, you need to DEBUG.[minus][cycling]"	--	"to DEBUG the compiled code"
slab	"You [if cpuready]already[else]can[end if] put things on the slab to build a computer."
USB	"[one of]The USB is pretty universal. It can become either of two things.[plus][or]The USB can become transport out of here.[plus][or]SUB or BUS.[minus][cycling]"	--	"make a BUS or USB"
caps lock	"[if caps lock is part of the keyboard]The caps lock is where it should be.[else][one of]What does a caps lock work with?[plus][or]A keyboard.[plus][or][kboard-blah].[plus][or]Put the caps lock in the keyboard.[minus][cycling]"
yak	"[if shack is unvisited][yak-worry].[else if yak is not on skid][one of]The yak won't give up what's on its drab yoke. You need to tempt the yak onto the skid.[plus][or]What is a good way to tempt an animal?[plus][or]Food. PUT LEAF ON SKID after you pushed it.[minus][cycling][else if skid is not in shack]Push or pull the skid back to the shack.[else][one of]Now you need to find some way to make the yak just plain sleepy.[plus][or]Find any boring items?[plus][or]The catechism. Or the bad book that anagrams the keyboard.[plus][or]SHOW BAD BOOK TO YAK.[minus][cycling][end if]"
catechism	"[if yak is in lalaland]With the yak dispatched, the catechism is only good for random anagrams. Or for being a prop to help you semi-plausibly learn how to program.[else][one of]The catechism is just for entertainment, but reading it may clue something,[plus][or]It is less painful and boring than [my-bad].[plus][or]You may wish to try reading [my-bad] instead. Maybe it will bore the right person to sleep, or something.[minus][cycling]"
blue button	"[if rebooted is true]You don't need to push the blue button again.[else][one of]The blue button says 'To be or...'[plus][or]What can 'To be or' on the blue button rejumble to?[plus][or]What is something you should try when any computer is acting strange?[plus][or]The settler kind of kills the 'to be or' puzzle.[plus][or]You need to REBOOT.[minus][cycling][end if]"	--	"REBOOT with the blue button"
orange button	"[one of]'Not to be' means it's a shutdown button.[plus][or]The orange button is too bent to push.[plus][or]The orange button is not necessary.[minus][cycling]"
clock sap	"[one of]The sap makes you think in LETTERS LIKE THESE.[plus][or]What makes people type in LETTERS LIKE THESE?[plus][or]CAPS LOCK buttons.[minus][cycling]"	--	"make a CAPS LOCK key"
dripping clock	--	clock sap
flea	"[one of]The flea is surprisingly brightly and multicolored for something dead.[plus][or]What else like FLEA is colorful when it's dead?[plus][or]The flea can become a LEAF.[minus][cycling]"	--	"make a LEAF"
coal	"[one of]Coal. Cheap, dirty energy for machines.[plus][or]The coal can become cheap dirty energy for people.[plus][or]What do hackers like to drink?[plus][or]Mountain Dew, Pepsi, Dr. Pepper...[plus][or]COLA.[minus][cycling]"	--	"make COLA"
hard drive	"[h-d][line break]"
priv-shack	"[if player is in shack]You need to build a computer here[else]It's just scenery when you're in the Phat Path. But you can enter by going north[end if]."
golden dongle	"The golden dongle is just there to make it plausible to hook the hard drive to other hardware."
computer screen	"[if shack is unvisited]You haven't found anything to attach it to.[else if computer screen is not on slab]You need to attach the screen to the drive.[else]The screen's where it needs to be.[end if]" [end presto hinting]
trolls	"[one of]The trolls are there to keep people in. You can't beat them up.[plus][or]You need to distract the trolls, preferably by annoying other patrons.[plus][or]The tunes, the stein and Casper are all part of the bar[dh-true].[minus][cycling]"	[start OYSTER hinting]
stumbler tumblers	"[one of]The stumbler tumblers say TIPS.[plus][or]How to turn off the machine is written on the machine. Except the right action is rubbed off.[plus][or]Tips for getting rid of songs that are the pits...[plus][or]SPIT on the machine.[minus][cycling]"
song buttons	--	tunes
jukebox	--	tunes
perma-amper	"[one of]The perma-amper is kind of complex, but knowing the right way to fiddle with it helps.[plus][or]It's something with a, e, m, p and r.[plus][or]What's another word for reconfigure?[plus][or]REMAP.[minus][cycling]"
tunes	"[one of]It's kind of complicated to change the tunes or get rid of them.[plus][or]Just pushing stuff to alter the tunes doesn't work.[plus][or]However, following the instructions can get rid of the tunes, if you do it right.[plus][or]You need to UNSET the tunes.[minus][cycling]"
jar of pills	"[one of]What can you do with PILLS?[plus][or]You can pop the pills, but the lid is stuck.[plus][or]The pills can make life convenient for your adversaries, if they were on the ground.[plus][or]You would have to SPILL them.[plus][or]You can do so at various places.[minus][cycling]"
tines	--	stein
stein	"[one of]The stein is free.[plus][or]How does the stein hook up with the tines?[plus][or]INSERT the stein and you're five-sixths there.[plus][or]INSET the stein.[minus][cycling]"
casper	"[if recaps is in lalaland]You've disturbed Casper enough.[else][casp-cap][end if]"
capers recaps	"[casp-cap]"
gins sign	"[if i-sung is true]You already managed to SING.[else][one of]The gins sign is a last lousy point, but it's one that introduces what to do in the area.[plus][or]The drinks are named after depressing puns on popular music.[plus][or]This is a last lousy point, but because it is a hint, I'll tell you what it is next.[plus][or]You can SING.[minus][cycling][end if]"
clam	"[one of]The clam is agitated. It probably doesn't want to attack you.[plus][or]You need to settle the clam down.[plus][or]I mean CALM it.[minus][cycling]"
urn	"[one of]You can't walk away from the urn. You need to do something more decisive.[plus][or]You should RUN from the urn.[minus][cycling]"
Shoer Osher	"You might've learned something from Shoer Osher's publicist before Elvira came by, but for the game's purposes, Shoer Osher is just there for decoration and amusement."
river	"[one of]There are two ways across the river.[plus][or]You can get the boats' attention--one verb--or get on the raft, which requires two.[plus][or]Hint the boats or raft individually.[minus][cycling]"
raft	"[one of]Just getting on the raft is no fun. You want it to, well. move.[plus][or]Those oars on the raft would be a drag to pull around.[plus][or]Hint the oars if you can't figure out what to do with them.[minus][cycling]"
boats	"[one of]The sailors aboard the boats seem to like a good chat about accomplishments.[plus][or]How could you get the boats['] attention with your own bragging or self-promotion?[plus][or]BOAST.[minus][cycling]"
crays	--	plea
plea	"[one of]You can't change the crays, but the plea offers a way out. The pale plea.[plus][or]You are feeling too jumpy to just plain jump, so you need to...[plus][or]...LEAP.[minus][cycling]"
canoe	"[one of]The canoe can be changed to make more water, but you don't need that.[plus][or]In fact, you need to do nothing with the canoe.[plus][or]Because if you make the canoe an OCEAN, that's bad news.[minus][cycling]"
fish	--	canoe
oars	"[one of]Those oars provide propulsion.[plus][or]And not just through the water.[plus][or]SOAR.[minus][cycling]"
carps	"[one of]You're bigger than they are, and your arms have more reach. You could probably beat them in a fight.[plus][or]You could brawl, tussle, or...[plus][or]SCRAP.[minus][cycling]"
pikes	"[one of]They, or the carps, can be beaten. It doesn't make any difference whom you attack.[plus][or]The pikes require a slightly odd verb. You can brawl, tussle, or...[plus][or]SPIKE the pikes.[minus][cycling]"
skis	"[one of]The skis are blocking the door.[plus][or]They can't be moved by force.[plus][or]You need to KISS the skis.[minus][cycling]"
knob	"[if crate is reflexive]You need to deal with a crate first, but the knob will be easier.[else][one of]The knob won't budge. It doesn't seem to have a lock.[plus][or]You need to do something with it.[plus][or]BONK the knob.[minus][cycling][end if]"
crate	"[if crate is reflexive][one of]You can't figure where the debris is coming from.[plus][or]It's debris of a CRATE.[plus][or]You want to TRACE it.[minus][cycling][else if c2 is reflexive][one of]Someone has an unending supply of crates.[plus][or]You can't seem to find the time to open the door, still.[plus][or]The crate still requires you to do one more thing.[plus][or]REACT.[minus][cycling][else]Nothing more to do with the crates."
c2	--	crate
fragments	--	crate
bogus-plains	"[one of]You can talk about how great you are, to all who would hear.[plus][or]What can you do in the lapsin['] plains?[plus][or]SPLAIN.[minus][cycling]"
waste	"[one of]The waste puzzle is optional.[plus][or][one of]The waste is hard to move. It requires effort.[plus][or]Taking the waste is out, but you can sift through it the right way.[plus][or]SWEAT.[minus][cycling][stopping]"
lance	"[lance-hints]"
heaps	"[one of]The heaps are malleable, but they might be a pain to search.[plus][or]If you SHAPE the heaps, you get a Keep Yorpwald Beautiful Last Lousy Point.[minus][cycling]"
eeks	"[one of]There's a noise coming from somewhere. Maybe it's a clue where that trout went.[plus][or]They are EEKS. That leaves twelve choices.[plus][or]Two, if you use the settler.[plus][or]SEEK.[minus][cycling]"
aunt tuna	"Aunt Tuna is useful for talking to. She has good information[if tea tray is not in lalaland]. Her food is also edible[end if]."
dent	"[one of]The dent can be dealt with if you know how to futz with it, but it's a last lousy point.[plus][or]No, not futz, another four-letter word.[plus][or]You need to TEND the dent.[minus][cycling]"	--
wipes	"[if player has wipes][one of]The wipes, unsurprisngly, help make something less dirty.[plus][or]What is something that is very dirty?[plus][or][name-the-lance].[minus][cycling][else][one of]You can't just plain take the wipes. You are not fast enough.[plus][or]What's a quicker action than TAKE, to get the wipes?[plus][or]SWIPE the wipes.[minus][cycling][end if]"
tea tray	"[one of]Tea looks tasty. And easy to dispose of.[plus][or]You can EAT the tea.[minus][cycling]"
trout	"[if trout is in range]You can't help the trout fight, but you can deal with the carps--or pikes.[else if trout is reflexive][one of]Aunt Tuna wants you to show her trout what you did.[plus][or]You can't attack anyone in someone's home.[plus][or]You can TUTOR the trout.[minus][cycling][else]You've helped the trout all you can.[end if]"
raw red drawer	"[if wrap is off-stage]You need to please Aunt Tuna to get what's in the drawer[else]You got what's in the drawer[end if]."
cans	"[one of]You can get rid of them for a last lousy point.[plus][or]If you've been using the settler, you really should know this verb.[plus][or]SCAN the cans.[minus][cycling]"
ruby	"[one of]The ruby is useful.[plus][or]The ruby is the haunter's. The haunter is someone stole the ruby.[plus][or]You don't want to be caught with the ruby, but maybe if you can frame someone or some other people...[plus][or]You can BURY the ruby in the Rascal Craals[if rigged digger is off-stage], though you need something to bury it with[end if].[minus][cycling]"
wrap	"[if warp-try is true][one of]You know the verb but not where to warp the wrap.[plus][or]Where could you annoy someone with the wrap? Someone with sensitive ears?[plus][or]The sandier sardine in Achers['] Arches will run if you warp the wrap near him.[minus][cycling][else][one of]So what's the verb to pop the wrap?[plus][or]Twenty-four choices. Six if you scan it. One if you cheat.[plus][or]You need to WARP the wrap.[plus][or]But you can't warp the wrap any old place. It might be fun and useful to annoy somefish.[plus][or]Who has sensitive hearing the wrap would annoy?[plus][or]WARP the wrap by the sardine.[minus][cycling]"
span pans	"[one of]The span pans are a five-part puzzle. You may guess the final step, which consists of dissolving the pans.[plus][or]You need to dispose of the knob.[plus][or]You need to get rid of the skis.[plus][or]The crate you keep getting hit with is a pain, too.[plus][or]See each sub-part for individual clues or, if you need help with the pans, see below.[plus][or]You can SNAP.[cycling]"
shut huts	--	span pans
tubs	"[one of]The tubs seem tough to crack.[plus][or]You could blast the tubs, or crush them, ...[plus][or]...or BUST them.[cycling]"
prod	"[one of]The prod seems like it should be more than it is, but you can't figure how to operate it.[plus][or]Operating the prod is probably simple and dumb, but something you do by accident.[plus][or]To operate the prod, you need a simple standard action this game doesn't usually let you do.[plus][or]DROP the prod.[minus][cycling]"
rigged digger	"[one of]The rigged digger is used to dig ground.[plus][or]The digger can get what's in the plain.[plus][or]How would you summon the HAUNTER?[plus][or]You can UNEARTH it.[cycling]"
sardine	"[if bubble wrap is off-stage]To scare the guard away, you need an item from the fish bowl. Go there.[else if bubble wrap is not in lalaland][one of]The sandier sardine seems to have problems with his ears.[plus][or]Have anything that might make noise?[plus][or]The bubble wrap.[plus][or]WARP the wrap.[minus][cycling][else]You shouldn't need hints for the sardine now.[end if]"
h-h	"The Horned Hedron is where you need to go [if Horned Hedron is visited]back[else]next[end if] to infiltrate the Lout Base."
a-s	"[if a-s is reflexive][one of]Why might the arches be guarded?[plus][or]There's something in them.[plus][or]X ARCHES doesn't quite work. Something more thorough?[plus][or]SEARCH ARCHES.[minus][cycling][else]Nothing else in the arches.[end if]"
pre-haun	"[one of]You need to summon the haunter, but you need a reason.[plus][or]You need to bury a treasure first to have it go chase something.[plus][or]The rigged digger should give you a hint.[minus][cycling]"
haunter	"[if haunter is reflexed][one of]Now you've gained its trust, you will want to show the haunter something.[plus][or]Like where you buried that ruby.[minus][cycling][else][one of]What do you do with a sausage?[plus][or]To calm it down?[plus][or]The settler can help here.[plus][or]You can ASSUAGE the sausage.[minus][cycling][end if]"
walleyes	"[one of]The walleyes won't let you explore the Horned Hedron. You need to get rid of them.[plus][or]If you talk to the walleyes, they'll mention how you'd need to be a big scary ghost or something.[plus][or]You need a ghost to come along for the ride to scare the walleyes.[plus][or]Hide something the ghost wants in Rascal Craals.[minus][cycling]"
o-t	"[one of]The ol['] trap must have a disarming switch somewhere.[plus][or]You need to cover the area to disable the ol['] trap, but not with spies watching you. The haunter can take care of them.[plus][or]Once the haunter's scared everyone away, what's an action to scour for a switch for the ol['] trap?[plus][or]PATROL.[cycling]"
a-p	"[one of]You can just enter the portal.[plus][or]You won't know where to go through the portal without a gleaner.[plus][or]Find the two pearl pieces, by the arches and from Aunt Tuna's gift.[plus][or]The gleaner can't tell you how to use the portal [']til it's bigger.[plus][or]ENLARGE the gleaner to make the portal work for you.[cycling]"
scrawl	"[one of]The haunter is beneath here. You may need to recover it.[plus][or]What do you often do with the undead?[plus][or]ETAHN RU is the haunter's name, and it is NEAR HUT.[plus][or]You should be able to UNEARTH it, once you have the proper equipment.[plus][or]You'll also need to have a reason to do so, or something to show it.[minus][cycling]"
thin hint	"[one of]The thin hint will remind you where you hid the ruby.[plus][or]The thin hint will also show someone else where you hid the ruby. So bring someone back.[plus][or]The haunter[if haunter is off-stage], once you find it, [end if]will be glad to see what is under the thin hint.[minus][cycling]"
paler pearl	"[if tea tray is not in lalaland][one of]So, you have one half of the pearl, but you want the other.[plus][or]The other pearl-half is in Lean Lane.[plus][or][a-t-check][plus][or]EAT TEA.[minus][cycling][else][one of]So, you have one half of the pearl, but you want the other.[plus][or]The other pearl-half is in the Achers['] Arches.[plus][or]How would you comb through the arches?[plus][or]SEARCH.[minus][cycling][end if]"
gleaner	"[one of]The gleaner may help you with the last bit, but it is too small.[plus][or]What could you do to make the GLEANER bigger?[plus][or]The settler gives you where the vowels are.[plus][or]ENLARGE the gleaner.[minus][cycling]"
ant	"[one of]You can't outright attack the ant. You poke at it ineffectually. Something more brutish, but simple.[plus][or]TAN the ant.[minus][cycling]"
yapper	"[one of]The settler on cheat mode gives confusing readings here because PAPERY and YAPPER clash.[plus][or]So if you use the settler, you may note that five of the letters are right. But maybe you want to solve this the old-fashioned way.[plus][or]He seems to be asking for a bribe and not asking for one at the same time. He needs to be compensated before he lets you do anything.[plus][or]If you give the yapper an item, he indicates he could be bribed...if it were valuable. He likes the pearl.[plus][or]You can just PREPAY the yapper.[minus][cycling]"
intercom	"The intercom is controlled by the dialer."
jumble	"The jumble reorganizes when you set the dialer."
pins	"[one of]There are two solutions here to get them out of the way. One is more sensible, given your inventory, but both work.[minus][or]The pins are tangled together, and you can use force or finesse.[minus][or]SPIN them, or SNIP them.[plus][cycling]"
lever	"[if lever is reflexed][one of]Aren't you happy to have found the lever?[plus][or]Don't last lousy points make you feel excited and like you want to party?[plus][or]Or REVEL?[minus][cycling][else][one of]Fiddling with the lever does nothing on its own, at first.[plus][or]You'll want to concentrate on the dialer, instead.[plus][or]Once you've done that, PULL the lever to do something else with the dialer.[minus][cycling][end if]"
d2	--	dialer
dialer	"[one of]The dialer is dangerous and destructive. But it's also flexible.[plus][or][if dialer is reflexive]You already found[else]You may see[end if] the dialer can REDIAL, but what else can you have it do?[plus][or][unless d2 is reflexed]DERAIL. [else]Here's what's left: [end if][if lev-pull is false]PULL LEVER. [end if]REDIAL.[minus][cycling]"	[end OYSTER hinting]
Rosetta Toaster	"[one of]You can use it to gain hints, but you need to clear the serpent to take it.[plus][or]Just put the food in the toaster and then XRAY anyone blocking your path.[minus][cycling]" [begin towers hinting]
strudel	"[if strudel is not reflexed][one of]The strudel is, or was in a sled rut.[plus][or]Taking the strudel gets no points, but you can implicitly take, or steal, it. Even if you already have it.[plus][or]The strudel can be RUSTLED.[plus][or]You can put it in the toaster after just taking it, too.[minus][cycling][else]The strudel is food you can put in the toaster.[end if]"
sled rut	--	strudel
Éclairs	"The éclairs are food you can put in the toaster."
solve-a-loaves	"The solve-a-loaves are food you can put in the toaster."
start tarts	"The tarts are food you can put in the toaster."
Brownies	"The brownies are food you can put in the toaster."
spec-o-scope	"The scope copse gives a rough progress map."
old ice	"[if old ice is reflexed]You made the old ice coiled, already.[else][one of]The old ice is a Last Lousy Point. It's docile, which is fine, but how to make it more impressive?[plus][or]If it were more like a sculpture, maybe...[plus][or]COILED.[cycling][end if]"
denim	"[one of]The denim can't quite be cut through by something like a dagger.[or]You won't find anything sharp enough to cut the denim.[or]You can, however, cheat to strip the denim away.[or]The denim can be MINED.[cycling]"
pester'n serpent	"[one of]Until the serpent can be described differently, you won't move it.[plus][or]It's annoying, but if you could just make it THERE...[plus][or]From pester'n to PRESENT.[minus][cycling]"
dreads adders	"[one of]You want to make the dreads adders less ferocious.[plus][or]Making them happy isn't your business, but you can still make them...[plus][or]SADDER.[minus][cycling]"
Snider Diners	"[one of]The snider diners have dry wit! They don't want to be interrupted.[plus][or]Physically assaulting the diners is out of the question, but maybe you can rain on their dinner.[plus][or]Literally. You can make the diners RINSED.[minus][cycling]"
Tetris Sitter	"[if Tetris Sitter is reflexive][one of]The Tetris Sitter seems absorbed in her IT-STER.[plus][or]Her happiness is a bit of a ruse. You may need to change her emotions, to help her back to being truly happy.[plus][or]She can become TRISTE.[minus][cycling][else if player has flowerpot][one of]St. Teri may still want something, but little of what you have interests her.[plus][or]The succor crocus behind the unripe ur-pine may help her feel better about herself.[plus][or]Give it to her[if-cro].[minus][cycling]"
itster	--	Tetris Sitter
ur-pine	"[one of]The unripe ur-pine is too big for you.[plus][or]Any way to make it smaller?[plus][or]Maybe PUNIER?[minus][cycling]"
sporties' ripostes	"[one of]They are very witty, not drawn out.[plus][or]Almost like poetry.[plus][or]If they were less incisive, you might be able to ignore them.[plus][or]Make them PROSIEST.[minus][cycling]"
muscly luc sym	"[one of]Muscly is nice, but if you could tangle him up...[plus][or]Maybe if he weren't so coordinated?[plus][or]CLUMSY.[minus][cycling]"
muscly ms lucy	"[one of]Muscly is nice, but if you could tangle her up...[plus][or]Maybe if she weren't so coordinated?[plus][or]CLUMSY.[minus][cycling]"
bluster butlers	"[one of]The bluster butlers are a bit too noisy. Maybe you could quiet them down?[plus][or]They're good at the direct approach, but if they were indirect, maybe they could guard somewhere more valuable.[plus][or]What if you made the butlers SUBTLER?[minus][cycling]"
sweatier wait-seer	"[one of]The wait-seer is certainly SWEATIER than you.[plus][or]He doesn't seem to be getting tired, the wait-seer.[plus][or]So changing the wait-seer to someone who is, or gets, tired, could work.[plus][or]WEARIEST.[minus][cycling]"
ingrates	"[one of]The ingrates are the ANGRIEST you've ever seen.[plus][or]They're too mad to let you pass. The ingrates are not going to stop complaining, but maybe they could complain more passively.[plus][or]What if the ingrates became ANGSTIER?[minus][cycling]"
lois the hostile	"[one of]Boy, for being potentially religious, [the the-hostile] sure is HOSTILE. But they shouldn't be. God is love in most religions.[plus][or]Maybe helping [relig-mf] could help you.[plus][or]Make [relig-mf] the HOLIEST you've seen.[minus][cycling]"
hostile-is-he lot	--	lois the hostile
keycar	"[one of]The keycar looks in tip-top shape, but maybe you can change that.[plus][or]In particular, make it sound worse the right way, so it clearly needs repairs.[plus][or]Make it CREAKY.[minus][cycling]"
alarming grailman	"[one of]It's ALARMING how above-average the grailman is, and how he won't settle for second-rate.[plus][or]How could you knock him down to average or below-average?[plus][or]Make him MARGINAL.[minus][cycling]"
pirates	"[one of]The pirates are very sun-burnt, and they like it that way.[plus][or]The pirates make fun of your own pale skin.[plus][or]Why not make the pirates PASTIER?[minus][cycling]"
agnostic	"[if obscurest subsector is unvisited][agnostic]'s not important right now.[else if Dr Yow is in prison ropins][agnostic] makes stuff. You'll want to hook [him-her] up with Dr. Yow--release Dr. Yow.[else if agnostic is lonely][one of][ag-first] wants someone who can help [him-her] make stuff.[plus][or]Who might do that?[plus][or]Dr. Yow. ASK AGNOSTIC ABOUT DOCTOR.[minus][cycling][else if agnostic is reflexive and agnostic is in Obscurest Subsector][one of][ag-first] is TENTATIVE around Dr. Yow and can't figure [his-her] lectures.[plus][or]You need to make [him-her] ATTENTIVE.[minus][cycling][else if agnostic does not have gizmo]You need to give [ag-first] something to build with. A tool.[else][ag-first]'s bot boat is more important.[end if]"
Reed's Ale	"[one of]Poor [el-la-f]! Having to dress like that. They either want to be free or stop feeling silly.[plus][or]The Reed's Ale is a bit of a clue.[plus][or]There are two ways to help [el-la-f]. Each flips two letters in the other.[plus][or]RESEALED or RELEASED both get rid of [el-la-f].[minus][cycling]"
Lars Eede	--	Reed's Ale
Elsa Erde	--	Reed's Ale
ego drains	"[one of]They're organised, but perhaps if they were hyperbole, they wouldn't be as effective.[plus][or]How could you make them over-the-top?[plus][or]Say, GRANDIOSE?[minus][cycling]"
admirer	"[one of]She needs someone to be attached to.[plus][or]Why stop at just engaged?[plus][or]MARRIED.[minus][cycling]"
natives	"[one of]They babble about how they can't be suckered, and so forth, and yet they're almost too good for this place.[plus][or]You can do two things to the natives.[plus][or]The natives can become VAINEST, or NAIVEST.[minus][cycling]"
yurts	"[one of]They look out of place, made of weird metals.[plus][or]You can corrupt them by making them...[plus][or]RUSTY.[minus][cycling]"
arid den	"[one of]The dandier arid den sells a lot of Nerd-Aid. It appears to be at full power.[plus][or]How could you lessen its power?[plus][or]Try smelling, examining the merchandise for endorsements, etc.[plus][or]DRAINED.[minus][cycling]"
Nerd-Aid	"The Nerd-Aid gives you a better idea of how to change the arid den, by its name and by seeing who endorses Nerd-Aid."
weeds	"[one of]The weeds might be less effective if tied together.[plus][or]Or, more accurately, SEWED.[minus][cycling]"
Mel Fish	"[one of]Mel Fish says SMH Life, but he's rather tired of his old gig. He wants individuality. Being Flemish or saying I'm Flesh won't work, either.[plus][or]What could be more individual than...[plus][or]HIMSELF?[minus][cycling]"
Atheists	"[one of]The atheists are willing to explain everything very slowly to you. That's not good. You'd like them to be frustrated with you, to move on.[plus][or]How can you make them super-impatient?[plus][or]Make them HASTIEST.[minus][cycling]"
Reading a Dinger	"[one of]It's a very spiffy book, that [i]Reading a Dinger[r].[plus][or]Maybe it would be less attractive if it got scuffed.[plus][or]If the pages somehow got GRAINED.[minus][cycling]"
fluster self rut	"[one of]The fluster self rut certainly gets you agitated![plus][or]Calm is called for. Maybe you can calm it and, then, yourself.[plus][or]Make the fluster self rut RESTFUL.[minus][cycling]"
Resident Trendies	"[one of]The resident trendies sure are with-it![plus][or]Maybe if you made the trendies less with-it, they'd be worse at guarding.[plus][or]To make them uncool...or uncoolest...[plus][or]make them NERDIEST.[minus][cycling]"
bonker	"[one of]The bonker is working just great. How to gum it up?[plus][or]Busted...or...[plus][or]BROKEN.[minus][cycling]"
stinger	"[one of]The stinger doesn't need to be so active. How could it become calmer?[plus][or][plus][or]BROKEN.[minus][cycling]"
repeat button	"REPEAT plays back what you recorded with the retape button."
retape button	"RETAPE gives something for the repeat button to replay."
Dr Yow	"[unless Dr Yow has been wordy][one of]Dr. Yow is silent, but you can change that.[plus][or]Take a look at [his-her] name.[plus][or]You can make [him-her] WORDY.[plus][or]If you have the raves saver, you can then PUSH RETAPE.[minus][cycling][else if Dr Yow is in prison ropins]You need to bring a friend along to rescue Dr. Yow.[else if Dr Yow has not been rowdy][one of]Dr. Yow can be something besides wordy, too.[plus][or]You can make Dr. Yow be exciting.[plus][or]Dr. Yow can be ROWDY.[minus][cycling][else]Dr. Yow will stay around to impart [his-her] knowledge for a bit.[end if]"
ragged dagger	"[one of]The dagger isn't as useful as it could be.[plus][or]Have you found a machine that might sharpen the dagger?[plus][or][if Shaven Havens is unvisited]There's a room west of the Scope Copse, past the pirates.[else]The Shaven Havens.[end if][plus][or]The machine in the Shaven Havens can repair the dagger.[minus][cycling]"
raves saver	"[one of]The raves saver is, well, a tape recorder.[plus][or]REPEAT is the PLAY button.[plus][or]RETAPE is the RECORD button.[plus][or]Combining RETAPE and REPEAT can bring a sound from one end of this region's map to another.[minus][cycling]"
gizmo	"[if agnostic has gizmo][ag-first] has the gizmo. [he-she-c] can use it better than you.[else][one of]You have this gizmo. Have you met anyone who could use it?[plus][or][agnostic] in Actionless Coastlines.[plus][or][ag-yow-lect], but now [he-she] needs a tool.[plus][or]Give [ag-first] the gizmo [n-o] [he-she]'s inspired by a science lecture.[minus][cycling][end if]"
ID Tag	"[if Obscurest Subsector is unvisited]Hm, you need to find Dr. Yow, the name on the tag. [he-she-c]'s in the very east.[else]Hm, the ID tag says Dr. Yow. This is [his-her] duck.[end if]"
fissure	"[one of]The fissure can, surprisingly, become animated.[plus][or]Make the fissure FUSSIER.[plus][or]But you need something that will fuss back at the fissure. Like a free animal or something.[minus][cycling]"
ropins	"The prison ropins can't be opened with a key. Or a word with C-E-E-F-N. You need to find another way to free Dr. Yow."
log gaol	"It's just there to block you from going anywhere else."
atblock	"[one of][ag-first] can do a bit better, but this LLP is not critical for the game.[plus][or][ag-first] is tentative. Not able to focus.[plus][or]Or pay full attention.[plus][or]Make [ag-first] ATTENTIVE.[minus][cycling]"
lone duck	"[one of]You need to bring it back to its owner.[plus][or]In the Obscurest Subsector.[plus][or]It won't follow you, though.[plus][or]If you have the Raves Saver, you can record Dr. Yow while [he-she]'s wordy.[plus][or]This will make the duck follow back to Dr. Yow.[plus][or]The duck can open the lock.[plus][or]How? It is a lone duck.[plus][or]The lone duck can make the gaol UNLOCKED.[minus][cycling]"
savager ravages	"The ravages make sure you have to go back to the main area."
rapier repair	"[one of]The rapier repair machine looks like it could use something.[plus][or]Have you seen anything that looks like a rapier and needs repair?[plus][or]That ragged dagger[if player does not have ragged dagger] you left in the Treading Gradient[end if].[plus][or]Put the dagger in the machine.[plus][or]The gizmo may help the agnostic build something.[minus][cycling]"
Thearchy Hatchery	"The Thearchy Hatchery is just sort of there, for a clue. You don't need to do anything with it."
Maturation Natatorium	"The maturation natatorium is just sort of there, for a clue. You don't need to do anything with it."
bot boat	"Two parts of a bot boat are broken. The blaster and turbos."
blaster	"[one of]The blaster isn't quite as solid as it could be.[plus][or]Maybe you could make the blaster STABLER?[minus][cycling]"
turbos	"[one of]The turbos aren't quite as solid as they could be.[plus][or]Maybe you could make the turbos ROBUST?[minus][cycling]"
weirder red wire	"[one of]The weirder red wire is organized wrong. Perhaps it can be reorganized, redone, rejigged, redesigned...[plus][or]REWIRED.[minus][cycling]"
eastern	"[one of]Oh dear, it's a choice between the northern and eastern and southwest shores.[plus][or]The letters settler gives seven letters, which lets you eliminate all but one shore.[plus][or]The eastern shore remains. What to do with it? How do you move to it?[plus][or]Or move the eastern shore to you?[plus][or]Make the eastern shore the NEAREST.[minus][cycling]"
northern	--	eastern
southwestern	--	eastern
Rodney	"[one of]You need to wipe out a few other guys, first, but when you do Rodney will fall.[plus][or]Get him out of here, or make him sound less authoritative.[plus][or]YONDER, or the alternate solution...[plus][or]DRONEY, not really a recognized word, but why not.[minus][cycling]"
Andres	"[one of]Andres seems untied by anything mental or physical.[plus][or]SNARED.[minus][cycling]"
Andrew	"[one of]Andrew probably is clueless of the risks of his venture.[plus][or]He should be WARNED.[minus][cycling]"
Archie	"[one of]Archie appears quite flexible, contorting himself without any pain.[plus][or]Not if he gets ACHIER.[minus][cycling]"
Barney	"[one of]Barney seems far too close.[plus][or]Move Barney NEARBY.[minus][cycling]"
Blake	"[one of]Blake looks full of purpose and resolve.[plus][or]Not if he gets BLEAK.[minus][cycling]"
Bredo	"[one of]Bredo seems very interested in this whole stick-up.[plus][or]Unless he gets BORED.[minus][cycling]"
Cedrick	"[one of]Cedrick looks like he's never had any sort of injury.[plus][or]Make him CRICKED.[minus][cycling]"
Daryl	"[one of]Daryl's very fit, eh? Not an ounce of fat?[plus][or]Make him LARDY.[minus][cycling]"
Demitri	"[one of]Demitri seems fearless.[plus][or]Make him TIMIDER.[minus][cycling]"
Dewey	"[one of]Dewey is a meaty, substantial fellow.[plus][or][']Til Dewey gets WEEDY.[minus][cycling]"
Edwin	"[one of]Edwin's crest is a bottle of wine inside one of those slashed red circles. No drinking![plus][or]If he were WINED.[minus][cycling]"
Eldon	"[one of]Eldon radiates youth![plus][or]Not if he's OLDEN.[minus][cycling]"
Ernest	"[one of]Ernest is one of the more relaxed people you've seen.[plus][or]Make him tenser.[minus][cycling]"
Geno	"[one of]Geno's just sort of here, but he doesn't have to be.[plus][or]Could be GONE.[minus][cycling]"
Goldy	"[one of]Goldy seems ruthless and mercenary.[plus][or]Make Goldy more GODLY.[minus][cycling]"
Leander	"[one of]Leander looks too dumb to do anything but guard you.[plus][or]Not if he's LEARNED.[minus][cycling]"
Marcel	"[one of]Marcel seems agitated, looking for a fight.[plus][or]Make Marcel CALMER.[minus][cycling]"
Marlon	"[one of]Marlon seems extraordinary and above-average. Cut him down to size.[plus][or]Make him NORMAL.[minus][cycling]"
Preston	"[one of]Preston seems the best defended and protected.[plus][or]Make him the PRONEST.[minus][cycling]"
Reggie	"[one of]You can't be sure, but the obnoxious smell of aftershave seems to come from Reggie.[plus][or]It'd be even more obnoxious if he were EGGIER.[minus][cycling]"
Royce	"[one of]Royce seems unabashed and not shy.[plus][or]Make Royce COYER.[minus][cycling]"
Shane	"[one of]Shane's skin has a healthy sun-kissed glow.[plus][or]Not if he's ASHEN.[minus][cycling]"
Terrance	"[one of]Terrance seems stuck to his task.[plus][or]What if you could make him more RECREANT?[minus][cycling]"
Tyson	"[one of]Tyson seems quite cheery about this whole adventure, like it's fun. Make him frowny.[plus][or]Or STONY.[minus][cycling]"
Wade	"[one of]Wade seems very confident, unintimidated.[plus][or]He can be AWED.[minus][cycling]"
succor crocus	"[if flowerpot is reflexive][one of]The crocus looks like it is--well, dying. He just needs a little healthy color back, not a ton.[plus][or]Or he could lose the livid color he has.[plus][or]From DYING to...[plus][or]...DINGY.[minus][cycling][else][one of]You can give the crocus to someone.[plus][or][give-croc].[minus][cycling][end if]"
flowerpot	--	succor crocus
Ornate Atoner Renato	"[if mislit limits is unvisited]You don't need to worry about Renato's gift until the very end[else if crocus is off-stage]You may find something to put in the flowerpot behind the unripe ur-pine[else if player has crocus]The crocus can be given to someone else[else]You've taken care of Ornate Atoner Renato's gift[end if]."
Curst Palace	"[one of]The Curst Palace is eleven letters, and the settler doesn't help much.[plus][or]St. Teri might, [yerg-ok].[plus][or]You seem to need a superlative to restore the palace.[plus][or]Make the palace wonderful again.[plus][or]Or, SPECTACULAR.[minus][cycling]" [end towers hinting]
b-b	"[one of]Hm, to get rid of the bleary barley, you can only use weak words.[plus][or]What are some of the weakest words in the English language?[plus][or]What also hasn't been covered in other areas?[plus][or]Adverbs.[plus][or]This gets you the last two letters, probably. LY.[plus][or]The barley is BARELY there.[minus][cycling]"	--	"the barley can appear BARELY"	[start otters hinting]
cinders	"[one of]The cinders can be used for two things.[plus][or]You can take them and use them to hint through one thing with one passive verb.[plus][or]You can DISCERN (no nouns,) but that won't get you full points.[plus][or]You can get rid of the cinders--not by dropping them.[plus][or]RESCIND.[minus][cycling]"
Gretta	"[one of]The macks are [if macked-out > 0]still [end if]bugging Gretta Garett-Tatger. They're doing so effectiveLY.[plus][or]You can make the macks act more [mackiness-hint].[minus][cycling]"	--	"the macks can talk [mackiness-hint]"
macks	--	Gretta
Ed Riley	"[one of]A steward won't let you go eastward--but he is too emphatically denying he is a YIELDER.[plus][or]The settler logically knocks this one out, but also consider his booming voice. You want the opposite of that.[plus][or]REEDILY.[minus][cycling]"	--	"Ed can speak REEDILY"
deli rye	"Ed Riley won't share, but the rye can share a hint with you if you scan it."
yield sign	"The yield sign symbolizes Ed Riley isn't THAT in control of things. Oh, and it can share a hint with you if you scan it."
sly imp	"[one of][if one-imp-down]You need to take the imp down another peg[else]The imp certainly does things three different ways[end if].[plus][or]You may need [if one-imp-down]yet [end if]another adverb.[plus][or][if one-imp-down]Take it out for good by making it[else]It can be made to[end if] move less gracefully and more [rand-to-go].[minus][cycling]"	--	"[rand-to-go]"
whiners	"[one of][if one-whine-down]They've lost a bit of steam, but they need to lose a bit more[else]The whiners have a lot of energy and exercise it many different ways[end if].[plus][or]You can soften them up a bit[if one-whine-down] more[end if].[plus][or]They'll [if one-whine-down]give up on[else]be less interested in[end if] annoying you if they start acting more [rand-to-go].[minus][cycling]"	--	"[rand-to-go]"
Mr Lee	"[loop-pool-already][if ghoul hat is not in lalaland]Try to help Mr. Lee with that ghoul hat. Or ask hints about the hat.[else if p-2 is in bran barn]Try to get rid of that painting of Rev. Howe. Or ask hints about it.[else]You've helped Mr. Lee all you can."
ghoul hat	"[loop-pool-already][one of]Mr. Lee's 'Hola, Thug' greeting is not very nice. He sees red and doesn't trust you.[plus][or]Mr. Lee's upset with you. But one word, useless on its own, can turn it around.[plus][or]The first one had better be a good one.[plus][or]No L-Y, so no adverb.[plus][or]ALTHOUGH.[minus][cycling]"	--	"you can say ALTHOUGH"
p-2	"[loop-pool-already][if ghoul hat is not in lalaland]Deal with the ghoul hat first.[else][one of]The painting has a lot of writing, all in red, which cuts down what to say.[plus][or]But the painting is ultimately the same sort of thing as before.[plus][or]HOWEVER.[minus][cycling]"	--	"you can say HOWEVER"
atmo-moat	"[one of]The moat seems to get in your way, but you sense it could be compacted.[plus][or]It's also an atmo-moat, though you see less red when you think of it that way.[plus][or]You can shrink the moat to an ATOM, [if power-back is false]but you need to have your powers back, first[else]which is possible with your powers back[end if].[minus][cycling]"	--	"you can make an ATOM"
le mer	--	sea cube
sea cube	"[bran-barn-already][one of]The sea cube in the atmo-moat/loop pool can be talked to.[plus][or]The sea gets bored if you talk to it. First words count. But they need to be useless on their own.[plus][or]The SEA CUBE draws you to it.[plus][or]BECAUSE.[minus][cycling]"	--	"you can say BECAUSE"
eels	"[bran-barn-already][one of]The eels need convincing, too. What will happen, otherwise?[plus][or]Again, first words count. But they need to be useless on their own.[plus][or]Tell them ELSE.[plus][or]BECAUSE.[minus][cycling]"	--	"you can say ELSE"
allot atoll	"The allot atoll [if eels are reflexed]was just there to get you your reward[else]in is not helpful on its own, but you'll get there if you help the eels[end if]. You don't need to do anything to it."
imp1	"[bug-report]"
imp2	"[bug-report]"
imp3	"[bug-report]"
ram1	"[bug-report]"
ram2	"[bug-report]"
ram3	"[bug-report]"
owls	"[one of]You only have one move to tackle the owls.[plus][or]They are too fast now.[plus][or]Make them SLOW. This hints what else to do here.[minus][cycling]"	--	"you can make the owls SLOW"
satyr	"[one of]The satyr seems set on blood and guts, fighting for the sake of it.[plus][or]Make him less violent?[plus][or]A bit ARTSY?[minus][cycling]"	--	"you can make the satyr ARTSY"
badger	"[one of]The badger is embarrassed to be naked.[plus][or]How could it be clothed?[plus][or]Or GARBED?[minus][cycling]"	--	"you can make the badger GARBED"
leopard	"[one of]The leopard is orangish and jumpsuited, with its paws bound together by some invisible handcuffs.[plus][or]Like the leopard's in jail. Well, it sort of is.[plus][or]But the leopard's been well behaved. Can you get them out early?[plus][or]Yup. If they're PAROLED.[minus][cycling]"	--	"you can make the leopard PAROLED"
ocelots	"[one of]Those clip on shades aren't very suave on the ocelots.[plus][or]You're not going to find any shades for the ocelots.[plus][or]But you can make the ocelots cooler.[plus][or]Or, better, make the ocelots the COOLEST.[minus][cycling]"	--	"you can make the ocelots COOLEST"
raptor	"[one of]You need to be quick here. The raptor can be changed to something much less vicious.[plus][or]The raptor has rather odd bright coloring, doesn't it? Like a tropical bird?[plus][or]Make the raptor a PARROT.[minus][cycling]"	--	"you can make the raptor a PARROT"
nails	"[one of]The nails are arranged in a circular pattern, spiraling out.[plus][or]What's an animal whose shell is like that?[plus][or]A SNAIL.[minus][cycling]"	--	"you can make a SNAIL"
pines	"[one of]The pines are shaped like a long bird's bill or something.[plus][or]If you listen, you hear bickering.[plus][or]SNIPE.[minus][cycling]"	--	"you can make a SNIPE"
corona	"[one of]The corona is black and whitish, easy to hide in the dark.[plus][or]RACOON.[minus][cycling]"	--	"you can make a RACOON"
thrones	"[one of]Sit on the thrones and they'll sting you.[plus][or]What animals sting?[plus][or]HORNETS.[minus][cycling]"	--	"you can make HORNETS"
Elmer	--	Merle
Merle	"[if parrot is in alcoves]You can't change Elmer or Merle directly, but you may want to mess with the parrot[else]You can't really deal with Elmer and Merle until you have an ally[end if]. [if merle is reflexed][one of]You can, however, make Elmer and Merle change for a Last Lousy Point.[plus][or]What is the opposite of on-the-sly?[plus][or]Elmer and Merle can be made to speak HONESTLY.[minus][cycling][else]You can just enjoy their random squabbles as you figure what the parrot needs to do or become.[end if]"	--	"Elmer and Merle can speak HONESTLY"
forces fresco	"It's just there to give ambience."
snail	"The snail will help you when the time comes."
snipe	"The snipe will help you when the time comes."
hornets	"It will help you when the time comes."
racoon	"It will help you when the time comes."
parrot	"[one of]The parrot is scared of Merle and Elmer, as they're a lot bigger.[plus][or]Maybe if the parrot got bigger. Wait, it was![plus][or]You can change it back to a RAPTOR to help you get past another fearsome beast.[minus][cycling]"	--	"you can re-make a RAPTOR"
sober robes	"Elmer and Merle can't be naked, and I felt like trawling for a cheap anagram. Win-win! (Oh. The robes aren't important to the game.)"
medals	"[if nounsolve < 3 or adjsolve < 3][medal-help].[else][one of]The medals are thanks for your smarts and quick thinking.[plus][or]The medals are more powerful together than apart.[plus][or]IQ and LUCKY mean something.[plus][or]You can use them to go QUICKLY, but the question is, where?[plus][or][medals-do].[minus][cycling][end if]"	--	"the medals [if nounsolve < 3 or adjsolve < 3][need-refurb][else]can make you go QUICKLY[but-in-alcoves][end if]"
jumpsuit	--	leopard
SlopInc	"They aren't the hippest, are they? Change the ocelots to make them cooler."
Look-Kool	"You can't do much but admire them."
Edictal Citadel	"The Edictal Citadel is where Elvira's hiding out. You need to get [if Inclosure is visited]in[else]back[end if] there and be prepared."
weltish whistle	"[if whistle is reflexed]PLAY it by Elvira to win.[else][one of]The whistle can summon animals when you need to, but you haven't had the practice yet.[plus][or]That'll be a big fight, though, so you need to prepare earlier.[plus][or]Examining the whistle gives a clue--who made it, etc. So does playing it, as if someone yelped[plus][or]You need to play it DEEPLY.[minus][cycling][end if]"	--	"you can play the whistle DEEPLY"
hydra	"[if parrot is off-stage]You'd need to be pretty big to defeat the hydra. Or have a pretty big ally. But you haven't found one, yet.[else][one of]If only you had a bigger animal as an ally, to beat the hydra.[plus][or]One that almost attacked you.[plus][or]Remember what the parrot was?[plus][or]The parrot was a RAPTOR.[plus][or]Don't summon the raptor before the alcoves.[minus][cycling][end if]"
Elvira	"[if current quip is final-quip]Just PLAY THE WHISTLE to defeat her.[else if nounsolve is 0 and adjsolve is 0]You'll need animal allies to face Elvira, the charismatic conversationalist.[else if nounsolve < 3 or adjsolve < 3]You'll need more animal allies to face Elvira, the charismatic conversationalist.[else][one of]You have enough animals to overwhelm--and ignore the charms of--Elvira, the charismatic conversationalist.[plus][or]First, you need to BLOW THE WHISTLE to summon them.[plus][or]You have one more thing that can help.[plus][or]Remember how you helped Gretta?[plus][or]The medals can make you--and your allies--go QUICKLY.[minus][cycling][end if]" [end otters hinting]	--	"you can just PLAY THE WHISTLE"
a border arbored	"It's just there to establish you can't walk any which way."
harmonicas	"[one of]If you try to play them, your playing is the pits, and the game stems you.[or]What's a fruit that has pits and a stem?[or]A cherry, but this is a much brighter red than usual.[or]MARASCHINO.[cycling]"
slime	"[one of]Hmm, the slime is green and knobbly and smells a bit like dishwashing detergent.[or]What can green dishwashing detergent smell like?[or]LIMES.[cycling]"
spear	"[one of]The spear is particularly out of place in Rustic Citrus.[plus][or]The settler can clue the vowels for the spear.[plus][or]The spear's an odd light greenish. Hmm.[plus][or]The spear becomes PEARS.[minus][cycling]."
pagers	"[one of]The pagers should be something more agrarian.[plus][or]They come in different colors: red, green and black, which looks more purple, really.[plus][or]The comment on seediness is a hint, too.[plus][or]They keep you on the communications vine.[plus][or]GRAPES.[minus][cycling]"
moss cap	"[one of]That moss cap is useless as-is. Curtis claimed it helped you tell directions, but it doesn't.[plus][or]Anything similarly-named that does?[plus][or]Perhaps a rose would make you feel less sore.[plus][or]You can make a COMPASS.[minus][cycling]"
compass	"You don't actually need to use the compass from the command line. You'll never be lost, with it."
abandoned drinks stand	"[if drinks stand is unexamined]Examine the drinks stand. You'll find more raw materials.[else]The drinks stand is only there to be examined.[end if]"
lumps	"[one of]Hmm, the lumps are purplish, maybe even a bit soft.[or]You're trying to retrieve fruit, so that should be a clue.[or]The settler will tell you where to place a vowel.[or]PLUMS.[cycling]"
mad train	"[one of]This is an odd one, but the mad train can become a fruit. The train is pod-like. It seems to be from some place far away.[plus][or]The settler knocks out the vowels.[plus][or]Dr. Nimata tells you the other thing.[plus][or]TAMARIND.[minus][cycling]"
briar screen	"[one of]What's a darkish red, bitter fruit?[plus][or]The settler helps a bit.[plus][or]CRANBERRIES.[minus][cycling]"
barren cries	"[one of]The barren cries are sour and bitter and tiny. What fruit is sour and bitter and tiny? Well, there are a lot, but...[plus][or]The barren cries can become CRANBERRIES.[minus][cycling]"
peanut cola	"[one of]The peanut cola has a neat cupola on it.[plus][or]Tan and pinkish-orange.[plus][or]CANTALOUPE.[minus][cycling]"
eerie blurbs	"[one of]They're stained purplish.[plus][or]The settler will give you a few letters, and the rest may be clear--what fruit is that?[plus][or]BLUEBERRIES.[minus][cycling]"
videotape collection	"[one of]You know the drill by now. The movies have similar names and can eliminate a few letters.[plus][or]PERSIMMON.[minus][cycling]"
magenta rope	"[one of]The megaton pear, mopeage rant, rampage note and magenta rope are all related.[plus][or]You have four things that anagram each other, so yes, there is a fruit they can become.[plus][or]POMEGRANATE.[minus][cycling]"
mopeage rant	--	magenta rope
rampage note	--	magenta rope
megaton pear	--	magenta rope
b-r	"[one of]Philip Larkin would know what to do with the buried raft right away.[plus][or]You may or may not know what the fruit actually looks or tastes like, but it IS a fruit, in fact...[plus][or]It's breadfruit.[minus][cycling]" [begin filed field hints]
b-w	"[one of]Barriers West can be another fruit.[plus][or]They're reddish, with a seedy outside and leaves on top?[plus][or]STRAWBERRIES.[minus][cycling]"
barber sickle	"[one of]The barber sickle is dripping and dark. Its texture is like the pryer bars.[plus][or]BLACKBERRIES.[minus][cycling]"
mean trowel	"[one of]The mean trowel mentions three names if you READ it.[plus][or]There's no physical clue as to what the mean trowel is, so it's a bit tricky unless you just plow through all the fruits that might be.[plus][or]WATERMELON.[minus][cycling]"
pipe panel fence	"[one of]These are meant to keep the cows out.[plus][or]You need only worry about PIPE PANEL.[plus][or]PINEAPPLE.[minus][cycling]"
pryer bars	"[one of]If you know what drupelets are, the pryer bars may be a bit easier. If not, consider this edutainment.[plus][or]The bars are a bit reddish, which clues the fruit's color.[plus][or]The pryer bars can become a raspberry.[minus][cycling]"
drupelets	"They clue you as to what the pryer bars should be. If not, then maybe this game will actually help you with your vocabulary! (I didn't know what they were before I Googled.)"
jagged spoon	"The spoon's weird shape clues you as to what the rapt figure should be."
rapt figure	"[one of]The jagged spoon the figure is holding is a clue.[plus][or]Plus, the figure is whitish and semi-reddish and yellowish.[plus][or]GRAPEFRUIT.[minus][cycling]"
green stain	"[one of]If you try to decipher the green stain, you see red, but it almost seems orange-ish, too.[plus][or]Small orange-ish fruits that are not oranges.[plus][or][plus][or]TANGERINES.[minus][cycling]" [begin swell wells hinting]
riot cap	"[one of]The riot cap's not a very tough color for a combat helmet. What fruit can it become?[plus][or]APRICOT.[minus][cycling]"
silly shirt	"[one of]You may not need ESP to guess what ESP, PAL on the shirt becomes.[plus][or]APPLES.[minus][cycling]"
sorer bogey	"[one of]The sorer bogey makes your skin break out in--well, not pimples, they'll go away in a bit.[plus][or]Bumps, more like.[plus][or]Goosebumps.[plus][or]GOOSEBERRY.[minus][cycling]"
s-w	--	sorer bogey
stucco	"[one of]A message is written ON STUCCO, in red. Plus it's for ScoutCon. Those are two clues right there.[plus][or]COCONUTS.[minus][cycling]"
Len Craig	"Len Craig wants to haggle. You need to poke around, see what fruits and things are in the clearing, and bargain accordingly." [clangier clearing hints]
auction caution	"[one of]The Auction Caution says you need to PAY ASAP.[plus][or]What could you buy with that message?[plus][or]PAPAYAS.[minus][cycling]"
l-o-p	"[one of]The list of prices has an error that makes you exclaim something.[plus][or]The mistake in the list won't drive you to profanity, but...[plus][or]CRIPES.[minus][cycling]"
lemons	"[one of]The price, as is, makes you frown.[plus][or]Maybe being depressing will depress prices.[plus][or]Get SOLEMN.[minus][cycling]"
melon	"[one of]You need to see another, better, melon.[plus][or]Maybe you could tell Len that.[plus][or]LEN MO or MO LEN will get something better from Len.[minus][cycling]"
nectarine	"[one of]The nectarine's not too old, but if it were, you might get it cheaper. Cheaperer.[plus][or]Len Craig suddenly starts using bad grammar describing the nectarine.[plus][or]ANCIENTER.[minus][cycling]"
peach	"[one of]The peach is currently too expensive, but there's a way to fix that.[plus][or]The settler knocks the peach out, logically, on cheat mode. Actually, just mentioning cheat mode may be a tremendous hint, here.[plus][or]How could the peach be described as less expensive?[plus][or]CHEAP.[minus][cycling]"
pre-mang	"[one of]'Go, man!' What sort of fruit anagrams that?[plus][or]A mango. But you need to find a way to get to it.[plus][or]This didn't quite fit anywhere in Routes.[plus][or]AMONG.[minus][cycling]"
quince	"[if quince is reflexed][frootz][else][one of]How do you count in Italian, to name a price for the quince? [plus][or]Uno, duo, tre, quattro, ...[plus][or] ...CINQUE.[minus][cycling][end if]"
an-a	"[one of]You need to take an a the right way.[plus][or]An a, not the a--and it's six letters if you scan it. It's also very yellow, part of a bunch of letters.[plus][or]If you NAB AN A, everything else comes out and you find a banana underneath.[minus][cycling]" [scape space fruit hints]
orange	"[if player has orange][frootz][else][one of]You can't just take the orange directly.[plus][or]You probably need to get closer to it slowly.[plus][or]GO NEAR to get the orange.[minus][cycling]"
pugnacious plant	"[one of]Burr, bah, you say if you examine/attack it.[plus][or]It seems to be making a weird mumbling.[plus][or]RHUBARB.[minus][cycling]"
inapt paint	"[one of]DESERVER-RESERVED.[plus][or]The settler makes the vowels in the paint pretty clear.[plus][or]How do you make the paint the opposite of what it is?[plus][or]REVERSED.[minus][cycling]"
augural arugula	"The augural arugula will help you GURU something."
miser ruble	"[one of]It's purplish.[plus][or]And to think that a change could happen on such-and-such street.[plus][or]MULBERRIES.[minus][cycling]"
nameless salesmen	"They used to be a puzzle in towers, and I didn't have the heart to get rid of them entirely, but fortunately they fit in the Clangier Clearing. They're not terribly useful."
singed design	"The singed design gives you a clue what the [if player has coin]coin[else if player has coins]coins[else if player has icon]icon[else if player has icons]icons[else if player has s-c]sonic coins[end if] can become." [begin very endgame item hints]
coin	"[one of]You ultimately need another coin, but perhaps it can be converted to something of intrinsic worth.[plus][or]Make the coin an ICON. Once you get another coin, you will make ICONS automatically.[minus][cycling]"
coins	"[one of]There are two things to do with the coins.[plus][or]The coins can become another thing, or they can change in quality.[plus][or]The thing coins can become is ICONS.[plus][or]The coins can also become SONIC.[minus][cycling]"
icon	"You've done what you can with the icon. You need to [if number of fruits in lalaland < 8]get more fruits[else]return to Curtis[end if] to get another coin and make ICONS."
icons	"[one of]The icons are too inert.[plus][or]The icons can become SONIC.[minus][cycling]"
gs	"You need [if curtis-level < 2]more stuff from Curtis[else if player has s-i]something to put the sonic icons in[else]to change Curtis's coins into something[end if]. [if player has storage box]You have the storage box[else if player has dollar]You need to trade the dollar for something[else if Scape Space is unvisited]Try looking below[else]You need to open the storage box [greedy-s] is guarding[end if]."
s-c	"[one of]The sonic coins aren't quite what you need. Nobody wants singing money.[plus][or]The coins can become ICONS.[minus][cycling]"
s-i	"[if player has storage box]You can put the icons in the lost slot.[else][one of]You need to put the sonic icons somewhere.[plus][or]If you've seen anything that doesn't accept money, that might help.[plus][or]The So-Great Storage doesn't accept money. You need the droll dollar from Curtis.[minus][cycling]"
storage box	"[if player has dollar]You can trade the dollar for the storage box.[else if player has storage and lost slot is visible]You can put something in the box's slot.[else]There's a way to open the storage box. Curtis's coins can be manipulated into something else that could open the storage.[end if]"
Art Erd	"[trader-clue]"
Dr Tera	"[trader-clue]"
droll dollar	"[one of]The droll dollar is probably not spendable in a reputable place.[plus][or]Where is a less reputable place to spend the dollar? Maybe a less reputable person?[plus][or]Give the dollar to [greedy-s] in the Scape Space.[minus][cycling]"
Lord Al	"[ollard-hint]"
Dr Lola	"[ollard-hint]"
tekno-token	"The tekno-token is currency to help you buy stuff after haggling in the Clangier Clearing."
lost slot	"[if player has s-i]You need to put the sonic icons in the slot to open the So-Great Storage[else if s-i are in lalaland]You've used the slot already[else]You need to reform the coins Curtis gave you to put something in the lost slot[end if]."
halt lath	"[one of]You need another item to retract the halt lath.[plus][or][if player has so-great storage]You need to put something in the So-Great Storage[else]You may need to bargain in the Scape Space below the Swell Wells[end if].[minus][cycling]"
passport	"The passport will get you through the gates in the Gates Stage, but you need to study it to enter the Valence Enclave safely. The viewer and searcher can help, as can the message if you go north and fail."
Valence Enclave	"You can't change the Valence Enclave, but you can enter it via the gates."
viewer	"[one of]You can't seem to focus on the viewer. Each time you see it is as the first unless you look at it the right way.[plus][or]There are two solutions. One is to see what to do with the viewer.[plus][or]The other is to see how not to be called a perp if you try to go north.[plus][or]REVIEW the viewer, or...[plus][or]...PREP [if perp-check is false](after going north) [end if]so you are not a perp.[minus][cycling]"
searcher	"[one of]You can't seem to focus on the searcher. Each time you see it is as the first unless you look at it the right way.[plus][or]There are two solutions. One is to see what to do with the searcher.[plus][or]The other is to see how not to be called a perp if you try to go north.[plus][or]RESEARCH the searcher, or...[plus][or]...PREP [if perp-check is false](after going north) [end if]so you are not a perp.[minus][cycling]"	[end others hinting]
perp-priv	"[one of]'PERP!' It catches you off-guard.[plus][or]You can PREP.[minus][cycling]" [?? what if all 3]
Great Grate	"The Great Grate is immovable." [start demo dome hinting, though there's really not much]
chic loner chronicle	"[dome-blab]"
shiest thesis	"[dome-blab]"
calendar	"[dome-blab]"
bolt case	"[dome-blab]"
obstacle	"[dome-blab]"
best cola	"[dome-blab]"
trifle filter	"[dome-blab]"
dustpan	"[dome-blab]"
scalp-it	"[dome-blab]"
placer	"[dome-blab]"
duster	"[dome-blab]"
novella	"You can read the novella from pages 1 to 100."
entry sign	"[dome-blab]"
Spy Dial Display	"[dome-blab]"
Shall Halls	"[dome-blab]"
owl decal Code Wall	"[dome-blab]"
written walls	"[dome-blab]"
allow lots tools wall	"[dome-blab]"
design deigns	"[dome-blab]"
flashed ad shelf	"[dome-blab]"
larded ladder	"[dome-blab]"
talks stalk	"[dome-blab]"
spec space	"[dome-blab]"
parcels clasper	"[dome-blab]"

to say name-the-lance:
	say "[if lance is off-stage]You haven't found it yet, but you probably will when you see it[else]The lance in the Shadier Airshed[end if]"

to say lance-hints:
	if player does not have lance:
		say "[one of]The lance is part of an optional quest. It isn't clean enough to take.[plus][or]You need an item to make the lance less dirty.[plus][or]The wipes in Lean Lane can do that.[plus][or][if player has wipes]Now you need to apply the wipes the right way[else]You should be able to get the wipes unless you used the pills on Aunt Tuna. You need to take them quickly. HINT them if you need more clues[end if].[plus][or]CLEAN the lance once you have the wipes.[minus][cycling]";
	else:
		say "[one of]The detour past the Horned Hedron entry opens up if you have the lance.[plus][or]Once you get there, you have an animal to defeat, which should not be hard.[minus][cycling]"

to say ag-yow-lect:
	say "[if yow is in lalaland]You already helped [him-her] appreciate Dr. Yow's lecture[else][he-she-c] may need a lecture first[end if]"

to say medals-do:
	say "[if alcoves is unvisited]The medals are only fully useful west of the frontage[else if merle is not in lalaland]You can't really use the medals until Merle and Elmer are gone[else]The medals let you go QUICKLY before going west of the Alcoves, which will help you deal with Elvira's initial attack[end if]"

to say need-refurb:
	say "need refurbishing. Maybe in the ";
	if nounsolve >= 3:
		say "[if Lamer Realm is visited]Lamer Realm[else]area north of the barley[end if]";
	else if adjsolve >= 3:
		say "[if preserve is visited]Perverse Preserve[else]area south of the barley[end if]";
	else if Lamer Realm is unvisited and preserve is visited:
		say "Preserve or north of the barley";
	else if preserve is unvisited and Lamer Realm is visited:
		say "Lamer Realm or south of the barley";
	else:
		say "areas north and south of the barley";

to say but-in-alcoves:
	if player is not in alcoves:
		say ", but maybe not here";

to say mackiness-hint:
	choose row with the-from of mack-hint in table of otters anagrams;
	say "[right-word entry in upper case]";

to say dome-blab:
	say "This is just here for fun.";

to say frootz:
	say "[if dollar is not off-stage]You've gotten all you need, but you can still return this fruit to Curtis[else]Curtis will mostly be collecting fruits, so you can return this to him[end if].[line break]"

check objhinting drive:
	if disk is in hard drive:
		if rebooted is true:
			all-say "You have the disk drive working." instead;
		try objhinting blue button instead;

to say h-d:
	if keyboard is on slab and screen is on slab:
		say "You need to put the disk in the drive.";
		continue the action;
	say "[one of]You can put the disk in the drive, when you're done. You can also attach things to the drive or put things on the slab. Computery things.[plus][or][if yak is not in lalaland]You need to get something to operate the computer with first, though.[else if keyboard is visible and keyboard is not on slab]You can put the keyboard on the labs slab.[else if computer screen is visible and computer screen is not on slab]You can put the computer screen on the labs slab.[else]You need to put find and put components on the labs slab to get the disk working.[end if][plus][or]You can push a button once you're done.[minus][cycling]"

to say sy-sn:
	pad-rec-lump "sy";
	pad-rec "sn";

to say leaf-or-flea:
	say "[if leaf is off-stage]You need to change the flea in the shack.[else]The leaf in the shack will work.[end if]"

to say kboard-blah:
	say "[if keyboard is off-stage]You need to find a keyboard. An animal and its item may provide a clue[else]The keyboard you got from the yak's drab yoke will work[end if]"

to say once-now:
	say "[if keyboard is on slab and disk is in hard drive]now[else]once[end if]"

to say a-t-check:
	say "[if Lean Lane is visited]Why not be polite and accept Aunt Tuna's meal?[else]You need to follow the eeks and then accept that person's hospitality.[end if]";

chapter talky tests - not for release

section grill

grilling is an action applying to one thing.

understand the command "grill" as something new.

understand "grill [thing]" as grilling.

does the player mean grilling the player: it is very unlikely.

carry out grilling:
	if noun is not a person:
		say "Try grilling a person, instead." instead;
	repeat through table of subject-blather:
		if him-who entry is noun:
			say "[him-who entry] / [person-subj entry] = [him-say entry][line break]";
	repeat through table of general-blather:
		if him-who entry is noun:
			say "[him-who entry] -> [him-say entry][line break]";
	repeat through table of default-sub-blather:
		if him-who entry is noun:
			say "[him-who entry] / = [him-say entry][line break]";
	repeat through table of default-gen-blather:
		if default-talker entry is noun:
			say "[default-talker entry] / = [gen-blah entry][line break]";
	repeat through table of reflexive-blather:
		if him-asked entry is noun:
			say "[him-asked entry] / = [him-told entry][line break]";

section spam

spaming is an action applying to one topic.

understand the command "spam" as something new.

understand "spam [text]" as spaming.

carry out spaming:
	let foundyet be false;
	say "You are asking about a topic.";
	repeat with PEO running through people:
		now foundyet is false;
		repeat through table of general-blather:
			if PEO is him-who entry and topic understood matches topic entry:
				say "[PEO] x this subject: [him-say entry][line break]";
				now foundyet is true;
			if foundyet is false:
				repeat through table of default-gen-blather:
					if default-talker entry is PEO:
						say "[PEO] x this subject: [gen-blah entry][line break]";
						now foundyet is true;
	the rule succeeds;

spamobjing is an action applying to one visible thing.

understand the command "thingy" as something new.

understand "thingy [any thing]" as spamobjing.

carry out spamobjing:
	let foundyet be false;
	say "You are asking about a thing.";
	repeat with PEO running through people:
		say "[PEO] is a person.";
	the rule succeeds;
	repeat with PEO running through people:
		say "Asking [PEO].";
		now foundyet is false;
		repeat through table of subject-blather:
			if him-who entry is PEO and person-subj entry is noun:
				say "[PEO]-[noun]: [him-say entry][line break]";
				now foundyet is true;
			if foundyet is false and noun is PEO:
				repeat through table of reflexive-blather:
					if him-asked entry is noun:
						say "[PEO]-itself: [him-told entry][line break]";
						now foundyet is true;
			if foundyet is false:
				repeat through table of default-sub-blather:
					if him-who entry is PEO:
						say "[PEO]-[noun]: [him-say entry][line break]";
						now foundyet is true;
		try asking PEO about the topic understood;
	the rule succeeds;

volume end of story

book listlisting

liliing is an action applying to one number.

lili0ing is an action applying to nothing.

carry out lili0ing:
	carry out the showing list of lists activity instead;

carry out liliing:
	let my-table be table of random books;
	let threshold be 40;
	if number understood is 0:
		try lili0ing instead;
	if number understood < 1 or number understood > number of rows in table of megachatter:
		say "Out of range. 1 through [number of rows in table of megachatter]. 0 shows list of all tracked." instead;
	now curlistnum is the number understood;
	choose row number understood in table of megachatter;
	say "[descr entry]:[paragraph break]";
	if there is a maxbeforepause entry:
		now threshold is maxbeforepause entry;
	let cur-e be 0;
	now my-table is mytab entry;
	let jjk be descr entry;
	if there is a lasties entry:
		say "LAST: [lasties entry][paragraph break]";
	else:
		say "No final entry.[line break]";
	if there is a prefix entry:
		say "PREFIX: [prefix entry][paragraph break]";
	repeat with ABC running from 1 to number of rows in my-table:
		if remainder after dividing cur-e by threshold is 0 and cur-e > 0:
			say "([cur-e] of [number of rows in my-table]) so far. Type q to quit the list or any other key to continue.";
			let cholet be the chosen letter;
			if cholet is 113 or cholet is 81:
				try-ln;
				the rule succeeds;
			say "[jjk] continued.";
		increment cur-e;
		say "[abc]. [blurb in row abc of my-table][if there is a suffix entry][suffix entry][end if][line break]";
	try-ln;
	if cur-e <= number of rows in my-table:
		say "Total elements = [number of rows in my-table].";

to show-ads:
	let county be 0;
	repeat through table of ad slogans:
		increment county;
		if remainder after dividing county by 40 is 0:
			say "[r]([county] of [number of rows in table of ad slogans]) so far. Type q to quit the list or any other key to continue.";
			let cholet be the chosen letter;
			if cholet is 113 or cholet is 81:
				try-ln;
				the rule succeeds;
			say "Continuing ads.";
		say "[if blare entry is true]One ad says: [end if][blurb entry][line break]";

ln-yet is a truth state that varies.

to try-ln:
	if ln-yet is false:
		ital-say "LN shows the next list.";
		now ln-yet is true;

book amusing

table of big yucks
reg-needed	yux
--	"KNOCK when Urgent Gunter knocks?"
--	"KISSing Elvira?"
--	"TICKLE ELMO?"
--	"WAITing (Z) or not typing anything in a command a few times?"
--	"READing all of the Dope Op-Ed? (It has far fewer entries than the random text)"
--	"BURNING various things?"
--	"SMELLing in various places?"
--	"LISTENing in various places?"
--	"ATTACKing various NPCs?"
--	"Asking for a HINT in the Inclosure?"
--	"reading Roiling Mistakes.i7x for other 'clever' 'jokes?'"
routes	"Cursing twice in the Cleric Circle? Or once in the Cripple Clipper?"
routes	"[if routes is solved]Or[else]Cursing[end if] anywhere?"
routes	"Feeling BANE around the bean?"
troves	"Anagramming the astute STATUE?"
presto	"Calling the cola POP or SODA?"
presto	"Anagramming caffeine with the cola? Or the bad book in the shack, or the crust?"
presto	"Cursing, or anagramming cursing, anywhere in Presto?"
oyster	"Anagramming PLAINS in the plains?"
others	"Trying to get a mango twice in the Clearing?"
others	"Giving Curtis four or more fruits?"

table of anayux
reg-needed	yux	do-i-print
--	"MANSE:"	a rule
--	"making the plates or staple PASTEL, PLEATS or PETALS?"
--	"PSALTER around the plaster/stapler?"
troves	"TROVES:"
troves	"BROOMED in Boredom Bedroom?"
troves	"ALED when you have the note from Dale?"
troves	"PERSIA when by the statue saying PRAISE?"
troves	"LSAT or ALTS around the salt?"
troves	"saying SNOG when you hear the song in Very Top?"
troves	"REDRAW by the raw red drawer?"
troves	"STUB or BUTS by the tubs?"
presto	"PRESTO:"
presto	"ENEMY TZAR around the maze entry in the Grey Gyre?"
presto	"ELO or EOL by Leo?"
presto	"ASSWHUP or WHUPASS when Leo and Rand are commiserating?"
presto	"SPAG or A GPS by the gasp-gaps in Char Arch?"
presto	"PTAH in the Phat Path?"
presto	"IDKS or KIDS around the disk or skid?"
presto	"BAT by the keyboard's TBA key?"
oyster	"OYSTER:"
oyster	"Changing the canoe to an OCEAN?"
oyster	"CARET in the plains?"
oyster	"PALINS in the plains?"
oyster	"Making a HORSE in Heros['] Shore?"
towers	"TOWERS:"
towers	"KALE by Leak Lake?"
towers	"ICEMAN by Anemic Cinema?"
towers	"DOPIEST or POSITED in the topside?"
towers	"PORIN or PORINS by the prison ropin's?"
towers	"REPAIR TOASTER?"
--	"OTTERS:"
--	"SLAIN or AS NIL by the nails?"
--	"(risque) saying SPINE around the pines? There's another one, too."
--	"Trying to PROD IT or DROP IT in the Inclosure (the torpid tripod is nearby)?"
--	"Making Elvira ALIVER in the Inclosure?"
--	"Trying to make Elvira a NICER SOUL in the Inclosure?"
--	"Saying COINS RULE or RULE, SCION in the Inclosure?"
others	"OTHERS:"
others	"making GAPERS around the pagers or grapes?"
others	"SILT or SLIT around the list in the clearing?"
--	"[i][bracket]NOTE: [super-rude].[r][close bracket]"	presto-or-others rule
presto	"TARD while getting the dart in Presto/Char Arch?"
others	"RETARD at the Tarred Trader, [greedy-person], in Others's Scape Space?"

to say super-rude:
	if presto is not solved and others is not solved:
		say "you didn't get a chance to see two mean anagrams not recommended in real life--one is in PRESTO";
	else:
		say "author does not advocate using the word[if presto is solved]s[end if] below in real life"

this is the presto-or-others rule:
	if presto is solved or others is solved:
		the rule succeeds;
	the rule fails;

to say 2dg of (rg - a region):
	if rg is not tickedoff:
		say "[eqls][rg][line break]";
		if rg is towers and number of guardians not in lalaland > 1:
			say "[eqls][eqls]starting missed Towers guardians[line break]";
		now rg is tickedoff;

to say eqls:
	if screenread is false:
		say "====";

to say eq2:
	if screenread is false:
		say "[eqls][eqls]";

to say 2da:
	if screenread is false:
		say "--";

Rule for amusing a victorious player:
	say "Have you tried:[paragraph break]";
	repeat through table of big yucks:
		if others is solved or there is no reg-needed entry or reg-needed entry is solved:
			say "[2da][yux entry][line break]";
	say "[line break]Would you like to see a list of the least tedious non-game-critical anagram jokes?";
	if the player direct-consents:
		repeat through table of anayux:
			if others is solved or there is no reg-needed entry or reg-needed entry is solved:
				if there is no do-i-print entry:
					say "[2da][yux entry][line break]";
				else:
					consider the do-i-print entry;
					if the rule succeeded:
						say "[2da][yux entry][line break]";

to say if-miss:
	if others is not solved:
		say ", and also, solving the post-Elvira region will unlock a few more jokes[if should-prod-others], including in the regions you bypassed[end if]";

to decide whether should-prod-others:
	if presto is not solved, yes;
	if troves is not solved, yes;
	if routes is not solved, yes;
	if towers is not solved, yes;
	if oyster is not solved, yes;

book what you missed

section bogus activities

[bogus activities]

nrling about is an activity. [nextreglisting]
putzing around is an activity.
putzing about is an activity.
potzing around is an activity.
potzing about is an activity.
reging about is an activity.
ddming is an activity.

part modified rule

the print the modified final question rule is listed before the print the final prompt rule in before handling the final question.

the print the final question rule is not listed in any rulebook.

This is the print the modified final question rule:
	let named options count be 0;
	let pure-metas be 0;
	if otters is solved or others is solved:
		say "[one of]Congratulations! You made it through[if others is solved] the extended ending[end if]. There's a lot of[or]Here's a rehash of the[stopping] meta-stuff you may find interesting listed below.";
	repeat through the Table of Final Question Options:
		if the only if victorious entry is false or the story has ended finally:
			if there is a final response rule entry
				or the final response activity entry [activity] is not empty:
				if there is a final question wording entry:
					if there is a final response activity entry:
						say "[2da][final question wording entry][line break]";
					else:
						increment pure-metas;
	say "You can also ";
	repeat through the Table of Final Question Options:
		if the only if victorious entry is false or the story has ended finally:
			if there is a final response rule entry
				or the final response activity entry [activity] is not empty:
				if there is a final question wording entry:
					unless there is a final response activity entry:
						decrement pure-metas;
						say "[if pure-metas is 0]or [end if][final question wording entry][if pure-metas is 0].[else], [end if]";
	say "[line break]";

part real options

Table of Final Question Options (continued)
final question wording	only if victorious	topic		final response rule		final response activity
"see ALTERNATE/ALT paths for mutually exclusive solutions"	true	"alt/alternate"	--	showing alternate routes
"check what you may've MISSED (minor spoilers) point-wise"	true	"missed"	--	showing what the player missed
--	false	"l/list"	--	potzing about
--	false	"n/ln/nl"	--	putzing about
--	false	"p/pl"	--	putzing around
--	false	"la/lh/lm/lp/ls/lt/lu/lv/lw/ly"	--	reging about
--	false	"nr/lr"	--	nrling about
"[one of]FORM (OF MR)[or](M OR F) FORM[in random order] to see where your sex matters"	true	"form" or "form of mr" or "m or f form"	--	sexsorting
"L(IST) to see random dialogues, etc., L(IST) (NUMBER) for a particular one, LN/NL for the next or L(store name) for one region (LA for general or, say, LU for Routes), or LR for the region's next list"	false	"l/list [number]"	--	potzing around
"DEMO DOME MODE (director's cut, can't undo)"	false	"demo/dome/mode" or "demo dome/mode" or "dome mode" or "demo dome mode"	--	ddming

sexsorting is an activity.

rule for sexsorting:
	say "Here is what the game treats differently: (* = trivial)[line break]";
	repeat through table of sexdif:
		say "[2da][examp entry][line break]";
	if others is solved:
		repeat through table of others sexdif:
			say "[2da][examp entry][line break]";

table of sexdif [tsx]
examp
"[bold type](general)[r] Dropping something."
"Examining yourself."
"[bold type](Means Manse)[r] The note from [gtmn] about the purse, and the purse itself too"
"Ditching Gunter."
"Complain about the media to Elmo."
"Many of the books (300+) have alternate authors. Many other random texts adjust for your gender, but books are the main one. Some names are switched, such as Abe/Bea, Dot/Tod, Tio/Toi, Tino/Toni, and Simeon/Simone."
"One page of the dope op-ed is named differently."
"The clues for the ramp are different, but the name Mr. Pa is still cringy either way. I hope it's the right sort of cringy."
"The message for solving the Means Manse."
"[bold type](stores)[r] The hoarder/acuter curate says something different when you return."
"Double dipping on sorbet in Store B."
"[bold type](routes)[r] Cursing in Cleric Circle."
"Going a direction in Same Mesa."
"[bold type](troves)[r] catching the thief."
"Saying ACRE."
"Reading DEAL."
"When entering the Upscale Capsule."
"[bold type](presto)[r] The plebe stops you or lets you by with different text."
"[bold type](oyster)[r] The win-text for the OYSTER region."
"Shoer Osher changes gender too."
"Attacking the pikes/carps."
"[bold type](towers)[r] The admirer reacts differently to TALKing/KISSing, etc."
"The rapier repair reminds you of Boy/Girl Scouts."
"The ego drains drain you a bit more if you're female."
"The Coasting Agnostic has a different name, with a (sic) on making the bot-boat."
"Dr. Yow is male/female, and people's insults for Mr. or Ms. Yow are different."
"Lars Eede/Elsa Erde has the Reed's Ale east of Treading Gradient."
"Luc Sym or Ms. Lucy guards north of the Scope Copse."
"The Hostile-is-He Lot or Lois the Hostile guards south of Actionless Coastline."
"[bold type](otters)[r] KISSing, EXAMINEing the macks, talking/dispelling/attacking or leaving while they're in the Frontage."
"KISSing Gretta or taking to her with the macks around."
"Elvira calls you (Ach,) Mr. Charm or Ms. Arch-Charms."
"KISSing Elvira or losing to her in battle."[]
"The win text."

table of others sexdif
examp
"[bold type](others)[r] Trying to make GAPERS in Rustic Citrus."
"The win-text for beating OTHERS."
"Lord Al Ollard or Dr. Lola Ollard appears on a droll dollar."
"Red Rat Art Erd or Dr. Tera Darter is the Tarred Trader."

demo dome moding is an activity.

rule for demo dome moding:
	fully resume the story;
	say "You stumble on a small museum chock full of meta-information about your quest.";
	move the player to Peek Keep;
	now all held things are in lalaland;
	demo-dome-status;
	the rule succeeds;

curlistnum is a number that varies.

nextlisting is an activity.

rule for nextlisting:
	increment curlistnum;
	if curlistnum > number of rows in table of megachatter:
		say "(Cycling back to 1.)[line break]";
		now curlistnum is 1;
	try liliing curlistnum;
	next-list-poke;

prevlisting is an activity.

rule for prevlisting:
	decrement curlistnum;
	if curlistnum is 0:
		say "(Cycling back to [number of rows in table of megachatter].)[line break]";
		now curlistnum is number of rows in table of megachatter;
	try liliing curlistnum;
	next-list-poke;

nextreglisting is an activity.

rule for nextreglisting:
	let initnum be curlistnum;
	increment curlistnum;
	if curlistnum > number of rows in table of megachatter:
		say "(Cycling back to 1.)[line break]";
		now curlistnum is 1;
	choose row curlistnum in table of megachatter;
	while cur-reg is not whichreg entry:
		increment curlistnum;
		if curlistnum > number of rows in table of megachatter:
			say "(Cycling back to the top.)[line break]";
			now curlistnum is 1;
		choose row curlistnum in table of megachatter;
		if initnum is curlistnum:
			say "There's only one list for [if cur-reg is lll]stuff in general[else][cur-reg].";
			the rule succeeds;
	try liliing curlistnum;

showing regional lists is an activity.

megsort is a truth state that varies.

to sort-meg:
	if megsort is false:
		now megsort is true;
		sort table of megachatter in reverse table-size order;

table of regabr
this-reg	this-top
lll	"la"
others	"lh"
means manse	"lm"
presto	"lp"
stores	"ls"
otters	"lt"
routes	"lu"
troves	"lv"
towers	"lw"
oyster	"ly"

cur-reg is a region that varies. cur-reg is usually lll.

rule for showing regional lists:
	let myrow be 0;
	if others is not solved and word number 1 in the player's command is "lh":
		say "I can't show you the list for Store H, yet. You haven't solved it.";
		the rule succeeds;
	repeat through table of regabr:
		if word number 1 in the player's command is "[this-top entry]":
			say "Here is a list of all the lists [if this-reg entry is lll]of universal text[else]for [this-reg entry][end if].";
			now cur-reg is this-reg entry;
			sort-meg;
			repeat through table of megachatter:
				increment myrow;
				if there is a mytab entry:
					let nr be number of rows in mytab entry;
					if there is a lasties entry and number of characters in lasties entry > 2:
						increment nr;
					if there is a whichreg entry:
						if whichreg entry is cur-reg:
							say "[myrow]. [descr entry] ([nr] anagrams)[line break]";
				else if region is lll and whichreg entry is cur-reg:
					say "[myrow]. Undos[line break]";
			say "You can type LR to see the next list in your current region.";
			the rule succeeds;
	say "To specify a region, you need to say la/lh/lm/lp/lt/lu/lv/lw/ly. The second letter refers to the store that leads to the region.";

showing list of lists is an activity.

rule for showing list of lists:
	let myrow be 0;
	let nr be 0;
	say "Here is a list of all the lists of random anagrams. If you did not visit a region, no spoilers are contained here. Pick a number to see which one, or LN lets you see the next. ";
	ital-say "the distribution of list sizes (numbers or bytes) approximately obeys Benford's and Zipf's Law, which I think is very cool. Both the laws, and that the lists obey them.";
	sort-meg;
	repeat through table of megachatter:
		increment myrow;
		if there is a mytab entry:
			now nr is number of rows in mytab entry;
		else:
			d "Blank row.";
			now nr is 16; [undos]
		if there is a lasties entry and number of characters in lasties entry > 2:
			increment nr;
		if whichreg entry is others and others is unsolved:
			say "[myrow]. (REDACTED) (for OTHERS)[line break]";
		say "[myrow]. [descr entry] ([nr] anagrams)[line break]";
		if the remainder after dividing myrow by 20 is 0:
			say "<press Q to quit or another key to see more>";
			let cholet be the chosen letter;
			if cholet is 113 or cholet is 81:
				say "By the way, you can list a region's random text with, say, LM for Means Manse, LY for oyster, etc.";
				the rule succeeds;
	say "By the way, you can list a region's random text with, say, LM for Means Manse, LY for oyster, etc.";
	next-list-poke;

listpoke is a truth state that varies.

to next-list-poke:
	if listpoke is false:
		ital-say "you can see the next list if you type N, NL or LN";
		now listpoke is true;

showing a list is an activity.

rule for showing a list:
	try liliing the number understood instead;

showing alternate routes is an activity.

to say remap-unset:
	say "[if remapped is true]UNSET the tunes[else]REMAP the perma-amper[end if]";

rule for showing alternate routes:
	say "[line break]You may've figured some or even all of these alternate paths out. But here is a list, to check off. The Means Manse and Routes have no mutually exclusive solutions. This list overlaps very little with the MISSED list which shows actual points missed.";
	d "[list of solved regions].";
	if routes is solved:
		say "[eq2][b]ROUTES[r] has no alternate, um, routes.";
	if troves is solved:
		say "[eq2][b]TROVES[r][eq2][line break]";
		say "[2da]you could've [if derived is true]DERIVE[else]RECALLe[end if]d to figure the cellar's location, too.";
	if presto is solved:
		if phooeyed is true:
			say "[eqls]PRESTO[line break][2da]you could've said POOH instead of PHOOEY, which would've meant one less point.";
		say "[2da][if maze-points is 1]MAZEL TOV would've given more points in the Volt Maze[else]WONT would cop out for Nowt Town, but for fewer points[end if].";
		say "[eqls]there were other possible bad books in the shack. They are: [list of off-stage badbooks].";
		say "[eqls]there were two other ways to get the drab yoke from the bored yak: [presto-3 of yak-sol].";
	if oyster is solved:
		say "[eqls]OYSTER[line break]";
		if pill-warned is false:
			say "[2da]you didn't need to do anything with the pills in the Posh Hops Shop, but you could've tried to SPILL them to bypass a puzzle.";
		say "[2da][remaining-actions of 2] would also have annoyed Posh Hops Shop patrons.";
		if boats are in shore:
			say "[2da]you could've tried to BOAST to get the boats['] attention, then LEAP.";
		else:
			say "[2da]you could've tried to [if raft is reflexive]FART on the raft, then [end if]SOAR to use the oars.";
		say "[2da]you could've tried to [if spikes is true]SCRAP with the carps[else]SPIKE the pikes[end if] to rescue Tortu.";
		if end den is unvisited:
			say "[2da]you actually missed the End Den in the Horned Hedron, because you examined the gleaner before entering the portal. Don't worry about going back. There was nothing there.";
	if towers is solved:
		say "[eqls]TOWERS[line break]";
		if reed's ale is in lalaland:
			say "[2da]you could've also [if rese is true]RELEASED[else]RESEALED[end if] [el-la-f] to give [him-her] a new outlook on life.";
		if natives are in lalaland:
			say "[2da]you could've also made the natives [if naiv-nat is true]VAINEST[else]NAIVEST[end if] to uproot them.";
		say "[2da][if turbos are reflexed and blaster is reflexed]If you'd only half-repaired the boat, you'd have been kicked to the Rawest Waters, where you'd have needed to make the Eastern shore NEAREST[else if turbos are reflexed]you'd have passed Rawest Waters if you'd have made the blaster STABLER[else]you'd have passed Rawest Waters if you'd have made the turbos ROBUST[end if].";
		if bredo is in lalaland:
			say "[2da]Bredo could've become [if bredo-bored is true]ROBED[else]BORED[instead].";
	if otters is solved:
		say "[eqls]OTTERS[line break]";
		say "[2da]there were a couple other ways you could've made the macks act: [how-macks].";
		say "[2da]you could've made the imp act [if imp1 is reflexive]ANGRILY[else if imp2 is reflexive]BRUTELY[else]ENRAGEDLY[end if], and the whiners could've acted [if ram1 is reflexive]LOATHINGLY[else if ram2 is reflexive]STOICALLY[else]TERSELY[end if].";
	if others is solved:
		say "[eqls]OTHERS[line break]";
		say "[2da]you only needed two ways to work the passport. The other was to [if viewer is reflexive]REVIEW the viewer[else if searcher is reflexive]RESEARCH the searcher[else]PREP after you are called a perp[end if]."

to say presto-3 of (n - a number):
	if n is not 1, say "pushing the skid to the shack with the yak on it";
	if n is not 2, say "[if n is not 1] and [end if]giving the yak a bad book to eat";
	if n is not 3, say " and pushing the skid to Dirge Ridge when you [if escaroles are in hacks' shack]change the escaroles to a casserole[else]have the casserole[end if]";

to say how-macks:
	let got-yet be false;
	repeat with QQ running through passed-on mack-ideas:
		say "[unless got-yet is true] or [end if]";
		now got-yet is true;
		if QQ is t-tearily-irately:
			say "IRATELY/TEARILY";
		else:
			choose row with the-from of QQ in table of otters anagrams;
			say "[right-word entry]";
	if t-tearily-irately is in lalaland and t-tearily-irately is not passed-on:
		say "[if irately is true]TEARILY instead of IRATELY[else]IRATELY instead of TEARILY[end if]";

showing what the player missed is an activity.

to say remaining-actions of (fd - a number): [remaining actions minus FD]
	let poshact be a list of text;
	if tumblers are not in lalaland, add "SPIT" to poshact;
	if tines are not reflexed, add "INSET" to poshact;
	if capers is not in lalaland, add "SCRAPE" to poshact;
	if gins sign is not reflexed, add "SING" to poshact;
	if tunes are not reflexed, add "UNSET/REMAP" to poshact;
	sort poshact in random order;
	if fd > 0:
		while number of entries in poshact > fd:
			remove entry fd from poshact, if present;
	repeat with mytemp running from 1 to number of entries in poshact:
		if mytemp is number of entries in poshact:
			say "or [entry mytemp in poshact]";
		else:
			say "[entry mytemp in poshact][if mytemp is not number of entries in poshact - 1],[end if] ";

doublecheat is a truth state that varies.

to say d-then:
	if doublecheat is true:
		say "DERAIL then ";
	if lev-pull is false:
		say "pull the lever then ";
[?? need to spill pills vs span pans]
to say how-pills-used:
	say "[2da]instead of using the pills, you could've tried to [if cheated-guy is prod]DROP the prod[else if cheated-guy is eeks]SEEK the eeks[else if cheated-guy is yapper]PREPAY the yapper[else if cheated-guy is trout]TUTOR the trout[else if cheated-guy is wrap]WARP the wrap[else if cheated-guy is c2]TRACE the crate[else if cheated-guy is crate]REACT to the next crate[else if cheated-guy is ant]TAN the ant[else if cheated-guy is waste]SWEAT over the waste[else if cheated-guy is knob]BONK the knob[else if cheated-guy is skis]KISS the skis[else if cheated-guy is knob]BONK the knob[else if cheated-guy is span pans]SNAP at the pans[else if cheated-guy is a-s]SEARCH the arches[else if cheated-guy is gleaner]ENLARGE the gleaner[else if cheated-guy is urn]RUN from the urn[else if cheated-guy is pale plea]LEAP after the pale plea[else if cheated-guy is trolls]STROLL after [remaining-actions of 0][else if cheated-guy is carps]SCRAP or SPIKE the carps/pikes[else if cheated-guy is clam]CALM the clam[else if cheated-guy is boats]BOAST to get over the river[else if cheated-guy is sardine]WARP the wrap around the sardine[else if cheated-guy is trout]TUTOR the trout[else if cheated-guy is tubs]BUST the tubs[else if cheated-guy is ruby]BURY the ruby[else if cheated-guy is o-t]PATROL for the portal[else if cheated-guy is dialer]DERAIL with the dialer[else if cheated-guy is d2]REDIAL the dialer[else if cheated-guy is pre-haun]UNEARTH the haunter[else if cheated-guy is haunter]ASSUAGE the sausage[else if cheated-guy is heaps]SHAPE the heaps[else if cheated-guy is lance]CLEAN the lance[else]...oops, I left something out for [the cheated-guy]. Sorry[end if]"

a region can be tickedoff. a region is usually not tickedoff.

to say 2dmiss of (cr2 - a region):
	now anything-missed is true;
	say "[2dg of cr2][2da]";

miss-room is a room that varies.

to say 2drm of (rr - a room):
	if anything-missed is false, say "[2dg of map region of rr]";
	unless miss-room is rr, say "[eqls][b][rr][r][eqls][line break]";
	now miss-room is rr;
	say "[2da]";

anything-missed is a truth state that varies.

to show-miss (myreg - a region) and (needsolve - a truth state):
	now miss-room is lalaland;
	if needsolve is true and myreg is not solved, continue the action;
	if myreg is means manse:
		if giant pin is in dusty study, say "[2dmiss of myreg]the giant pin could've become a PAINTING.";
		if t-b is in dusty study, say "[2dmiss of myreg]you could've made the ten beams into a BASEMENT.";
		if tables are in dusty study, say "[2dmiss of myreg]you could've made the tables into a STABLE to unlock an alternate way/puzzle to the basement/gallery.";
		if sitar is not in lalaland, say "[2dmiss of myreg]you could've changed the [if Farming Framing is visited]sitar in the Farming Framing/[end if]stria in the gallery into a STAIR.";
		if niche is in dusty study, say "[2dmiss of myreg]you could've changed 'my niche' into a CHIMNEY.";
		if pram is in heights, say "[2dmiss of myreg]you could've changed the pram into a RAMP[if heights is unvisited], if you'd gone up from the study[end if].";
		if isbn bins are reflexive, say "[2dmiss of myreg]you could've put a SNIB on the ISBN bins.";
		if t-b is in dusty study, say "[2dmiss of myreg]you could've changed the ten beams in the study to a BASEMENT.";
	else if myreg is stores:
		if store B is in stores, say "[2dmiss of myreg]Store B could've given you some SORBET.";
		if store K is in stores, say "[2dmiss of myreg]Store K could've made some TOKERS.";
		if store N is in stores, say "[2dmiss of myreg]NESTOR was hiding in Store K.";
		if store U is in stores, say "[2dmiss of myreg]ROUTES were in Store U.";
		if store V is in stores, say "[2dmiss of myreg]TROVES were in Store V.";
		if store P is in stores, say "[2dmiss of myreg]PRESTO would've opened Store P.";
		if store Y is in stores, say "[2dmiss of myreg]The OYSTER was in Store Y.";
		if store W is in stores, say "[2dmiss of myreg]TOWERS were in Store W.";
	else if myreg is routes:
		if worst ad is in same mesa, say "[2dmiss of myreg]you could've tried to go TOWARDS the worst ad in the Same Mesa.";
	else if myreg is troves:
		if Pa Egg Pea is reflexive, say "[2dmiss of myreg]you could've tried to GAPE at Pa, Egg, Pea, by Peg A. Page.";
		if what-a-bee is reflexive, say "[2drm of boarded roadbed]you could've tried to BELIEVE you could get past the evil bee, too.";
		if bee's head is reflexive, say "[2drm of boarded roadbed]you could've tried to REASON your way past the (so-near) bee, too.";
		if lager is not in lalaland, say "[2drm of boredom bedroom]you could've tried to GLARE at the Lager.";
		if ME ARTS is in Boredom Bedroom, say "[2drm of Boredom Bedroom]you could've tried to MASTER the ME ARTS.";
		if lobster is in Boredom Bedroom, say "[2drm of Boredom Bedroom]you could've tried to BOLSTER yourself to deserve lobster.";
		if rivets are reflexive, say "[2drm of econ cone]you could've tried to STRIVE by the statue of Trevis Vister.";
		if praise is in econ cone, say "[2drm of econ cone]you could've tried to ASPIRE, from the praise in the Econ-Cone.";
		if DIVORCES is not in lalaland, say "[2drm of upscale capsule]you could've tried to DISCOVER something about DIVORCES magazine.";
		if sister tressi is not in lalaland, say "[2drm of upscale capsule]you could've tried to RESIST Sister Tressi.";
		if Blamer Balmer is not in lalaland, say "[2drm of upscale capsule]you could've tried to RAMBLE to ignore Blamer Balmer.";
	else if myreg is presto:
		if lamb is in Grey Gyre, say "[2drm of Grey Gyre]you could've shouted BLAM at the lamb.";
		if maze-points < 2, say "[2drm of Grey Gyre]you could've said MAZEL TOV to get past the maze.";
		if maze-points is 2, say "[2drm of Grey Gyre]you missed a point for scanning a guy in Nowt Town.";
		if phooeyed is false, say "[2drm of Austerer Treasure]you could've gotten a style point for saying PHOOEY instead of POOH.";
		if sport ports are reflexive, say "[2drm of Austerer Treasure]you could've said PROST (a German word to toast someone) to the Sport Ports.";
		if hawt thaw is in phat path, say "[2drm of Phat Path]you could've said WHAT to the Hawt Thaw.";
		if rom sticks are off-stage, say "[2drm of Hacks' Shack]the trim socks could've become ROM STICKS.";
		if t-key is reflexive, say "[2drm of Hacks' Shack]you could've made the TBA key a TAB key.";
		if casserole is off-stage, say "[2drm of Hacks' Shack]you could've made the escaroles a CASSEROLE.";
	else if myreg is oyster:
		if you-used-pills is true, say "[how-pills-used].";
		if number of entries in shop-hint-items > 2, say "[2dmiss of myreg]Other ways to annoy the trolls: [remaining-actions of 2].";
		if cans are not in lalaland, say "[2dmiss of myreg]you could've tried to SCAN the cans.";
		if dent is not in lalaland, say "[2dmiss of myreg]you could've stopped to TEND the dent in Aunt Tuna's raw red drawer.";
		if heaps are reflexive and heaps are in Shadier Airshed, say "[2dmiss of myreg]you could've stopped to SHAPE the heaps to beautify the hut.";
		if wipes are on raw red drawer:
			say "[2dmiss of myreg]you could've tried to SWIPE the wipes at Aunt Tuna's to start a side quest.";
		else if waste is not in lalaland:
			say "[2dmiss of myreg]you could've tried to SWEAT to remove the waste.";
		else if lance is not cleaned:
			say "[2dmiss of myreg]you could've tried to CLEAN the lance.";
		else if Dourest Detours is visited and ant is not in lalaland:
			say "[2dmiss of myreg]you could've tried to TAN the ant.";
		else if ant is not in lalaland:
			say "[2dmiss of myreg]you passed by the side-quest to TAN the ant in the Dourest Detours.";
		if bogus-plains are reflexive, say "[2dmiss of myreg]you missed a chance to SPLAIN in the plains, at any time during the door-open puzzle.";
		if lever is not reflexed, say "[2dmiss of myreg]you could've stopped to REVEL before flipping the LEVER.";
	else if myreg is Towers:
		let xxx be unripe ur-pine;
		if number of guardians not in lalaland > 0:
			repeat with gua running through guardians not in lalaland:
				if player is male:
					if gua is Elsa Erde or gua is Lois the Hostile, next;
				if player is female:
					if gua is Lars Eede or gua is Hostile-Is-He Lot, next;
				now xxx is gua;
				if xxx is Lars Eede or xxx is Elsa Erde, now xxx is Reed's Ale;
				choose row with the-from of xxx in table of towers anagrams;
				let rm2 be gualoc of gua;
				now rm2 is the room guadir of gua from rm2;
				say "[2dmiss of myreg][the gua] ([gualoc of gua]/[rm2]) could've become [if the-from entry is reed's ale]RELEASED or RESEALED[else][right-word entry in upper case][end if].";
			if number of guardians not in lalaland > 1, say "(that's all for the guardians)[line break]";
		if yurts are in scope copse, say "[2dmiss of myreg]the yurts could've become RUSTY.";
		if strudel is reflexive, say "[2dmiss of myreg]the strudel could've become RUSTLED.";
		if ego drains are not in lalaland, say "[2dmiss of myreg]the organised ego drains could've become GRANDIOSE.";
		if sporties' ripostes are not in lalaland, say "[2dmiss of myreg]the sporties['] ripostes in the Lost Lots could've become PROSIEST.";
		if ingrates are not in lalaland, say "[2dmiss of myreg]the ingrates could've been turned ANGSTIER.";
		if natives are not in lalaland, say "[2dmiss of myreg]the natives could've been turned VAINEST or NAIVEST.";
		if old ice are not reflexed, say "[2dmiss of myreg]the old ice in the Baldest Blasted Saltbed could've become COILED.";
		if denim is not in lalaland, say "[2dmiss of myreg]the denim in Treading Gradient could've been MINED.";
		if saver is reflexive, say "[2dmiss of myreg]the REPLAY PLAYER letters on the saver could've become PEARLY.";
		if ag-atten is false, say "[2dmiss of myreg]you could've made [agnostic] ATTENTIVE to help Dr. Yow's lecture go down a bit smoother.";
		if weirder red wire is part of bot boat, say "[2dmiss of myreg]you could've made the weirder red wire REWIRED.";
		if keycar is not in lalaland, say "[2dmiss of myreg][if keycar is not off-stage]the keycar could've been made CREAKY[else]you didn't clear enough guardians for the keycar to appear and become CREAKY[end if].";
		if flowerpot is reflexive, say "[2dmiss of myreg]you could've made the unripe ur-pine PUNIER to uncover something beyond.";
		if flowerpot is not in lalaland, say "[2dmiss of myreg]you could've [if serpent is in Mislit Limits]made the pester'n serpent PRESENT to go west[else if mesprise is unvisited]gone west for more quest[else if Tetris Sitter is reflexive]made the Tetris Sitter TRISTE[else]given the Tetris Sitter the flowerpot, though that would only give you a few hints[end if].";
		if used-ray is true, say "[2dmiss of myreg]you used x-ray vision from a toasted hint pastry, which cost a style point.";
		if no-pastries is true, say "[2dmiss of myreg]you didn't uncover any hint-pastries, so I couldn't give you the extra style point for resisting the temptation to use the x-ray vision after toasting one.";
		if number of pinko warriors > 0:
			repeat with pk running through pinko warriors:
				say "[2dmiss of myreg][pk][one of], whom you left in the Trefoil,[or], also left,[stopping] could've been [vul of pk in upper case].";
	else if myreg is otters:
		if rescind-cinders is false, say "[2dmiss of myreg]you could've tried to [if cinders are not in lalaland]DISCERN or even [end if]RESCIND the cinders.";
		if eels are not reflexed, say "[2dmiss of myreg]you could've [if sea cube is not in lalaland]said BECAUSE to dissolve the sea cube, then [end if]said ELSE to gain the eels['] trust.";
		if p-2 is not in lalaland, say "[2dmiss of myreg]you could've [if ghoul hat is not in lalaland]said ALTHOUGH to dissolve the ghoul hat, then [end if]said HOWEVER to gain Mr. Lee's trust.";
		if Merle is reflexive, say "[2dmiss of myreg]you could've been all 'HONESTLY?' at Merle and Elmer.";
		if number of flippable things in perverse preserve > 0:
			repeat with A running through flippable things in perverse preserve:
				say "[2dmiss of myreg]you could've turned the [A] into [if A is plural-named]some[else]a[end if] [the-to corresponding to a the-from of A in the table of otters anagrams].";
		if number of reflexive animals in Lamer Realm > 0:
			repeat with A running through flippable things in Lamer Realm:
				say "[2dmiss of myreg]you could've changed the [A] to be [right-adj of A].";
	else if myreg is others:
		if spear is not in lalaland, say "[2drm of Rustic Citrus]the spear could've become pears.";
		if lumps are not in lalaland, say "[2drm of Rustic Citrus]the lumps could've become plums.";
		if mad train is not in lalaland, say "[2drm of Rustic Citrus]the mad train could've become a tamarind.";
		if harmonicas are not in lalaland, say "[2drm of Rustic Citrus]the harmonicas could've become maraschino cherries.";
		if grapes are not in lalaland, say "[2drm of Rustic Citrus]the pagers could've become grapes.";
		if drinks stand is unexamined:
			say "[2drm of Rustic Citrus]you could've examined the drinks stand to find more pre-fruits.";
		else:
			if eerie blurbs are not in lalaland, say "[2drm of Rustic Citrus]the eerie blurbs could've become BLUEBERRIES.";
			if slime is not in lalaland, say "[2drm of Rustic Citrus]the slime could've become LIMES.";
			if peanut cola is not in lalaland, say "[2drm of Rustic Citrus]the peanut cola could've become a CANTALOUPE.";
			if mopeage rant is not in lalaland, say "[2drm of Rustic Citrus]the mopeage rant et al could've become a POMEGRANATE.";
			if videotape collection is not in lalaland, say "[2drm of Rustic Citrus]The videotape collection's movies could've become a PERSIMMON.";
		if apples are not in lalaland, say "[2drm of Swell Wells]the ESP PAL shirt could've become APPLES."; [swell wells]
		if green stain is not in lalaland, say "[2drm of Swell Wells]you could've made the green stain TANGERINES.";
		if miser ruble is not in lalaland, say "[2drm of Swell Wells]the miser ruble could've become MULBERRIES.";
		if riot cap is not in lalaland, say "[2drm of Swell Wells]the riot cap could've become an APRICOT.";
		if sorer bogey is not in lalaland, say "[2drm of Swell Wells]the sorer bogey could've become a GOOSEBERRY.";
		if stucco is not in lalaland, say "[2drm of Swell Wells]the message on stucco could've become COCONUTS.";
		if rapt figure is not in lalaland, say "[2drm of Filed Field]the rapt figure could've become a GRAPEFRUIT."; [filed field]
		if pipe panel fence is not in lalaland, say "[2drm of Filed Field]the pipe panel fence could've become a PINEAPPLE.";
		if b-w are not in lalaland, say "[2drm of Filed Field]the barriers west could've become STRAWBERRIES.";
		if briar screen is not in lalaland, say "[2drm of Filed Field]the briar screen could've become CRANBERRIES.";
		if b-r is not in lalaland, say "[2drm of Filed Field]the buried raft could've become BREADFRUIT.";
		if pryer bars are not in lalaland, say "[2drm of Filed Field]the pryer bars could've become a RASPBERRY.";
		if barber sickle is not in lalaland, say "[2drm of Filed Field]the barber sickle could've become BLACKBERRIES.";
		if mean trowel is not in lalaland, say "[2drm of Filed Field]the briar screen could've become a WATERMELON.";
		if lemons are not in lalaland, say "[2drm of Clangier Clearing]you could've looked SOLEMN to get lemons."; [clangier clearing]
		if melon is not in lalaland, say "[2drm of Clangier Clearing]you could've said MO LEN or LEN MO to get a melon.";
		if papayas are not in lalaland, say "[2drm of Clangier Clearing]you could've gotten PAPAYAS from the 'Pay ASAP' Auction Caution.";
		if mango is not in lalaland, say "[2drm of Clangier Clearing]you could've listened to the 'go, man' voice to go AMONG the clearing.";
		if peach is not in lalaland, say "[2drm of Clangier Clearing]you could've gotten the peach CHEAP.";
		if l-o-p is not reflexed, say "[2drm of Clangier Clearing]you could've said CRIPES at the prices.";
		if quince is not in lalaland, say "[2drm of Clangier Clearing]you could've said the quince costs CINQUE.";
		if nectarine is not in lalaland, say "[2drm of Clangier Clearing]you could've made the nectarine ANCIENTER.";
		if orange is not in lalaland, say "[2drm of Scape Space]you could've tried to GO NEAR to get the orange."; [scape space]
		if banana is not in lalaland, say "[2drm of Scape Space]you could've tried to NAB AN A for a banana.";
		if pugnacious plant is not in lalaland, say "[2drm of Scape Space]you could've made the pugnacious plant RHUBARB.";
		if inapt paint is not in lalaland, say "[2drm of Scape Space]you could've made the inapt paint ('DESERVER RESERVED') REVERSED.";
		if did-guru is true, say "[2da]going a-la-guru from the arugula lost you a final point.";
	else if myreg is demo dome:
		say "No points in the Demo Dome, so nothing to find.";
	else:
		say "Region not found."

rule for showing what the player missed: [there may be a way to do things without all this if you could read through a table]
	say "An all-feat leaflet flutters over the fourth wall.";
	now all regions are not tickedoff;
	now anything-missed is false;
	if others is solved, show-miss others and true instead;
	show-miss Means Manse and true;
	show-miss stores and true;
	show-miss routes and true;
	show-miss troves and true;
	show-miss oyster and true;
	show-miss towers and true;
	show-miss otters and true;
	if number of bypassed regions > 0:
		say "[2da]Next time, you can maybe try the [list of bypassed regions] region[if number of bypassed regions > 1]s[end if]." instead;
	if anything-missed is false:
		say "[line break]CONGRATULATIONS, YOU FOUND EVERYTHING is written on it, with confetti drawn all around, too[one of][or]. It just doesn't get old, looking at it. Hey, you deserve to feel good[stopping].";

book epilogue transition

book epilogue bugfixes to i6

Include (-

[ ASK_FINAL_QUESTION_R;
	print "^";
	(+ escape mode +) = false;
	while ((+ escape mode +) == false) {
		CarryOutActivity(DEALING_WITH_FINAL_QUESTION_ACT);
		DivideParagraphPoint();
	}
];

-) instead of "Ask The Final Question Rule" in "OrderOfPlay.i6t".

The escape mode is a truth state that varies.

To fully resume the story:
	sort table of megachatter in init-order order;
	resume the story;
	now escape mode is true;
	now otters is solved;
	now last-solved-region is otters;
	clear the screen;
	say paragraph break.

Table of Final Question Options (continued)
final question wording	only if victorious	topic	final response rule	final response activity
"ROVE OVER to see what's behind STORE H"	true	"store h" or "rove/over" or "rove over"	epilogue rule	--

This is the epilogue rule:
	fully resume the story;
	say "You decide, why not [b]ROVE OVER[r]?";
	clean-for-roving;

volume mapping

[start regular]

index map with highest heights mapped east of dusty study.
index map with Farming Framing mapped west of dusty study.
index map with gallery mapped north of dusty study.
index map with carven cavern mapped north of gallery.

[start stores]

index map with cruelest lectures mapped north of strip of profits.

[start routes]

index map with same mesa mapped west of strip of profits.
index map with idle deli mapped north of same mesa.
index map with cleric circle mapped west of idle deli.
index map with adobe abode mapped south of cleric circle.
index map with Harms Marsh mapped south of adobe abode.
index map with ripe pier mapped east of Harms Marsh.
index map with clipper cripple mapped east of ripe pier.

[start troves]

index map with Upscale Capsule mapped north of cruelest lectures.
index map with loather rathole mapped west of Upscale Capsule.
index map with bustle sublet mapped west of loather rathole.
index map with boarded roadbed mapped north of bustle sublet.
index map with drain nadir mapped north of boarded roadbed.
index map with boredom bedroom mapped east of drain nadir.
index map with econ cone mapped south of boredom bedroom.
index map with browse bowers mapped east of boredom bedroom.

[start towers]

index map with topside deposit mapped east of highest heights.

index map with topside deposit mapped west of loftier trefoil.
index map with rawest waters mapped east of actionless coastlines.
index map with mislit limits mapped north of rawest waters.

[start others]

index map with filed field mapped south of cripple clipper.
index map with scape space mapped north of clangier clearing.
[index map with stadium mapped north of scape space.]

[start oyster]

index map with posh hops shop mapped east of cruelest lectures.
index map with olde lode mapped east of posh hops shop.
index map with Disease Seaside mapped east of olde lode.
index map with fighter freight mapped east of Disease Seaside.
index map with achers' arches mapped north of posh hops shop.
index map with Lean Lane mapped east of Lapsin' Plains.
index map with Hardest Trashed Dearths mapped east of Lean Lane.
index map with tenfold mapped north of horned hedron.
index map with Dourest Detours mapped east of tenfold.
index map with end den mapped east of Dourest Detours.
index map with Shadier Airshed mapped east of end den.

[start otters]

index map with Reclusion Inclosure mapped east of Anger Range.

[start towers]

index map with Shaven Havens mapped south of Ned's Dens.

[start presto]

index map with Hacks' Shack mapped south of Harms Marsh.
index map with Austerer Treasure mapped south of Phat Path.
index map with r44 mapped west of Hacks' Shack.

[start demo dome]

index map with ned's dens mapped east of scape space.
index map with intel inlet mapped north of evoc-cove.
index map with sparse spares mapped south of peek keep.

index map with lalaland mapped east of lost lots.

volume beta testing - not for release

include STS tests by Andrew Schultz.

section instructions

[* this is a simple list of instructions cluing a5 hintvis and ts]

when play begins:
	say "Here is a list of Beta Testing commands that will facilitate passage through:[paragraph break]--[b]a5[r] moves you to the Strip of Profits, solving all but Otters.[line break]--[b]hintvis[r] hints everything visible[line break]--[b]ts[r] jumps you to the Strip of Profits, with the patcher etc.[line break]--[b]blaa[r] talks about a generic subject.[line break]--[b]misses[r] shows what optional things you've missed in the region.[line break]--[b]warwar[r] wipes out the warriors in Store W.";

book cheatage

[* this book lets the beta-tester skip over boring bits ]

chapter greting

[* this lets you skip over the macks]

greting is an action applying to nothing.

understand the command "gret" as something new.

understand "gret" as greting.

carry out greting:
	now macked-out is 2;
	move player to frontage;
	say "==CHEATING TO DEFEAT MACKS";
	try fliptoing a random visible mack-idea;
	the rule succeeds;

chapter blaaing

[* BLAA lets you churn through subjects and things to ask visible people about ]

blaaing is an action applying to nothing.

understand the command "blaa" as something new.

understand "blaa" as blaaing.

carry out blaaing:
	let this-guy be false;
	say "=================default general blather[line break]";
	repeat with pe running through people:
		now this-guy is false;
		repeat through table of default-gen-blather:
			if pe is default-talker entry:
				say "[pe]: [gen-blah entry][line break]";
				now this-guy is true;
		if this-guy is false:
			say "[pe] has nothing to say!";
	let found-chat be false;
	say "=================asking visibles about random stuff, the hydra and themselves[line break]";
	repeat with pe running through visible people:
		if pe is not the player:
			now found-chat is true;
			say "[pe] about random stuff:";
			try asking pe about "mumblety-peg";
			say "[pe] about hydra:";
			try objasking pe about hydra;
			say "[pe] about [pe]:";
			try objasking pe about pe;
			now found-chat is true;
	if found-chat is false:
		say "Oops, nobody around.";
	the rule succeeds;

chapter tsing

[* TS starts you out with nice toys, at the strip with the purse/settler/notepad]

tsing is an action out of world.

understand the command "ts" as something new.

understand "ts" as tsing.

carry out tsing:
	move player to Strip of Profits;
	get-cool-stuff;
	if player has lamp, now lamp is in lalaland;
	if player has teariest treatise, now teariest treatise is in lalaland;
	now Means Manse is solved;
	say "I gave you the purse, settler, and notepad.";
	the rule succeeds;

chapter chating

[* CHAT is a debug command that lets the player jump to the chats with Gunter, Elmo and Elvira]

chating is an action out of world.

understand the command "chat" as something new.

understand "chat" as chating.

carry out chating:
	if player is not in study:
		say "Too late...restart." instead;
	now do-i-chat is true;
	now thinko is true;
	now bookshelf is examined;
	now player has lamp;
	now player has settler;
	repeat with ram running through ramabits:
		now ram is ncscanned;
		now ram is cscanned;
	try opening side door;
	now player has whistle;
	now adjsolve is 4;
	now nounsolve is 4;
	now player wears medals;
	the rule succeeds;

chapter a5ing

[* a5 allows you to solve everything except OTTERS]

a5ing is an action applying to nothing.

understand the command "a5" as something new.

understand "a5" as a5ing.

suppress-score is a truth state that varies.

carry out a5ing:
	now Means Manse is solved;
	repeat with MI running through held things:
		if MI is not warpable:
			now MI is in lalaland;
			now lreg of MI is mrlp;
	get-cool-stuff;
	move player to Strip of Profits;
	now suppress-score is true;
	if store k is in Strip of Profits, try fliptoing tokers;
	if store n is in Strip of Profits, try fliptoing nestor;
	if store p is in Strip of Profits, try fliptoing e-s;
	if store u is in Strip of Profits, try fliptoing routes-x;
	if store v is in Strip of Profits, try fliptoing troves-x;
	if store w is in Strip of Profits, try fliptoing towers-x;
	if store y is in Strip of Profits, try fliptoing oyster-x;
	try fliptoing otters-x;
	now e-s is in lalaland;
	now routes-x is in lalaland;
	now troves-x is in lalaland;
	now towers-x is in lalaland;
	now oyster-x is in lalaland;
	now troves is solved;
	now routes is solved;
	now oyster is solved;
	now presto is solved;
	now towers is solved;
	now suppress-score is false;
	say "Beeep. All pre-Otters areas (fake)-solved. You may now proceed to OTTERS. I also gave you the settler and purse and notepad, in case.";
	consider the notify score changes rule;
	ital-say "you may wish to SEED 1 so you can make the macks talk blearily, nastily and bossily, if you are in an automatic testing situation."

chapter hfing

[* HF allows you to export hints to roilhints.glksave ]

hfing is an action applying to nothing.

understand the command "hf" as something new.

understand "hf" as hfing.

carry out hfing:
	if hint-to-file is false:
		say "Hint to file on, exported to roilhints.glksave[if hint-to-file is false]. Type HD to get full hints each move[end if].";
		append "==================starting hint debug session[paragraph break]" to the file of roilhints;
		now hint-to-file is true;
	otherwise:
		say "Hint to file off.";
		append "==================ending hint debug session[paragraph break]" to the file of roilhints;
		now hint-to-file is false;
	the rule succeeds;

chapter hding

[* HD shows all hints every move. Testers should use HF.]

hding is an action applying to nothing.

understand the command "hd" as something new.

understand "hd" as hding.

carry out hding:
	if hint-to-display is false:
		say "Now showing full hints with the game. Not recommended for testers--use hf instead.";
		now hint-to-display is true;
	otherwise:
		say "Hint display off.";
		now hint-to-display is false;
	the rule succeeds;

chapter hintvising

[* this hints everything visible. It is trumped by hintall but may be useful to the beta tester. ]

hintvising is an action out of world.

understand the command "hintvis" as something new.

understand "hintvis" as hintvising.

carry out hintvising:
	repeat with VTH running through all visible things:
		if VTH is vishintable:
			all-say "Hinting [VTH]: ";
			try objhinting VTH;
	the rule succeeds;

definition: a thing (called VT) is vishintable:
	if VT is publically-named, decide yes;
	if VT is unscannable, decide no;
	decide yes;

chapter endgameing

[* ENDGAME tests the endgame]

end-jump is a truth state that varies.

endgameing is an action applying to one topic.

understand the command "endgame [text]" as something new.

understand "endgame [text]" as endgameing.

carry out endgameing:
	let temp be 0;
	now player has settler;
	now Means Manse is solved;
	if end-jump is true or the player's command matches the regular expression "p":
		increment temp;
		now presto is solved;
	if end-jump is true or the player's command matches the regular expression "u":
		increment temp;
		now routes is solved;
	if end-jump is true or the player's command matches the regular expression "v":
		increment temp;
		now troves is solved;
	if end-jump is true or the player's command matches the regular expression "w":
		increment temp;
		now towers is solved;
	if end-jump is true or the player's command matches the regular expression "y":
		increment temp;
		now oyster is solved;
	now end-jump is false;
	move player to gates stage;
	now player has passport;
	now no-tip is true;
	say "Okay, you need to do 2 of 3 of RESEARCH/REVIEW/PREP.";
	the rule succeeds;

egalling is an action out of world.

understand the command "endgame" as something new.

understand "endgame" as egalling.

carry out egalling:
	now end-jump is true;
	try endgameing;
	the rule succeeds;

volume testing - not for release

book dbing

[* debug tracking, turning on and off. Useful to me but not others]

dbing is an action applying to nothing.

understand the command "db" as something new.

understand "db" as dbing.

carry out dbing:
	if debug-state is false:
		say "Debug state is on now.";
		now debug-state is true instead;
	else:
		say "Debug state is off now.";
		now debug-state is false instead;

book basic tests

[* this is simply stuff to make sure features work. Test NOUNS to see nouns.]

chapter oddverbs

[* this tests retry, for starters]

test rtr with "ts/presto/in/s/drat/rats/retry/in"

chapter randtext

[* this tests all possibilities of random text, by region. Generic possibilities are included in rand-i.]

test twi with "lamp/x shelf/db/open door/1/4/4/4/4/4/lamp/x trash/g/g/g/g/g/g/g/g/d/staple/stapler/put staple in stapler/ts/troves/in/x pa/gonear upscale capsule/ignore/bolster/last/resign/otwin/deeply/quickly/w/e/w/e/w/e/w/7/play whistle"

test rand-i with "cap 3/x bookshelf/g/g/g/g/g/g/attack it/g/g/g/lamp/open door/1/1/1/1/1/1/1/1/2/lamp/x art/g/g/g/g/g/g/g/g/hint/n/y/g/g/g/n/g/g/g/shit/g/g/g/x ads/g/g/g/listen/g/g/g/basement/d/satchel/x settler/in/flier/2/2/1/1/1/1/1/1/8/8/8/10/10/staple/stapler/staple wall/z/z/z/z/////in"

test rand-sto with "tokers/nestor/enter smoke/z/z/z/z/x ian/g/g/g/outside"

test rand-p with "blam/s/rats/drat/s/ole/darn/z/z/z/z/whassup/n/n/umph/phooey/e/bleep/e/bingo/put dart in gun/w/n/mazeltov/there/n/syke/tough/later/n/x catechism/g/g/g/g/g/g/g/retry"

test rand-r with "past/ask pat about food/g/g/despite/out/across/opposite/out/inside/out/in/out/in/out/in/out/in/z/z/z/z/x pious/y/x pious/g/g/g/retry"

[this one actually wins, so I don't retry.]

test rand-v with "z/z/z/z/x ethics/g/g/g/hate/care/l/l/l/l/observe/spot/reason/believe/recall/glare/gape/x lead/deal/x brochure/g/g/g/desire/aspire/strive/ponder/ignore/x desk/g/g/g/x sked/g/g/g/bolster/master/last/x divorces/g/g/g/discover/last/decide/y"

test rand-y with "ask casper about xyz/g/g/g/g/g/g/g/sing/inset/remap/stroll/calm/run/boast/leap/z/z/z/z/z/z/z/z/spike/e/scan cans/seek/ask tuna about tuna/g/g/g/g/g/g/g/tutor/eat/w/w/warp/search/n/x theses/g/g/g/retry"

test rand-w with "z/z/z/z/gonear unripe/punier/n/rinsed/e/himself/n/sewed/get all/s/w/weirder/w/put dagger in repair/x dagger/g/g/g/g/g/retry"

[capturing Elvira's text is done in test twi]

test rand-t with "gonear elmer/honestly/z/z/z/z/retry"

[this wins the game, so...no retry, either]

test rand-h with "gonear len craig/z/z/z/z/purloin passport/w/n/research/review/n"

chapter combos

[* this tests combinations of big tests e.g. going through each area]

test win-quick with "test roman/test stores/test routes/test troves/switch patcher/test otters"

test win-q-patchstore with "ts/y/zap store u/zap store w/zap store y/zap store v/zap store p/zap store t/test otters"

test win-q-patchport with "ts/y/routes/towers/oyster/troves/presto/otters/zap routes/zap towers/zap oyster/zap troves/zap spot/zap otters/test otters"

test win-all with "test roman/test stores/test routes/test troves/test presto/test oyster/test towers/test otters"

test win-plus with "test roman/test stores/test routes/test troves/test presto/test oyster/test towers/a5/test otters/y/test others"

test win-dial with "cap 2/test win-plus"

test oops-plus with "test roman-oops/test stores-oops/test towers-oops/test routes-oops/test oyster-oops/test troves-oops/test presto-oops/test otters-oops/y/test others-oops"

chapter quickerr

[* this tests quick errors]

test err-trout with "gonear range/ff/tutor/spike/spike carps/spike pikes/scrap/scrap carps/scrap pikes/ff"

chapter roman

[* this includes tests for roman, roman with mistakes, roman min-points and roman max-points]

test diora with "test 1st/satchel/scan platform/scan pavement/scan pedestal/scan crabgrass/pad diorama/event map/farm plot/steel pad/brass crag/scan map/scan plot/scan pad/scan crag/pad diorama"

test elmq with "purloin settler/gonear basement/x settler/in/flier"

test elmo with "test 1st/basement/satchel/d/x settler/in/flier"

test elmox with "rom/test 1st/satchel/stable/painting/basement/chimney/u/ramp/d/stair/x settler/in/flier"

test roman3 with "test 1st/chimney/u/ramp/d/satchel/x settler/in/flier/0/y/staple/stapler/put staple in stapler/staple wall/in"

test roman2 with "test 1st/basement/d/satchel/x settler/in/flier/0/y/staple/stapler/put staple in stapler/staple wall/in/coff"

test roman1 with "test 1st/stable/in/sitar/d/satchel/x settler/in/flier/0/y/staple/stapler/put staple in stapler/staple wall/in/coff"

test 1st with "x shelf/lamp/x pad/pad red/open door/1/5/lamp"

test toe with "x shelf/lamp/x pad/pad red/open door/1/0/lamp/basement/d/satchel/x settler/in"

test means with "test 1st/satchel/basement/stable/chimney/u/ramp/enter closets/painting/in/stair/d/x settler/in/flier/0/y/staple/stapler/put staple in stapler/staple wall/in/coff"

test manse with "test means"

test roman-oops with "pmal/lamp/pmal/lehctas/satchel/lehctas/tnemesab/basement/tnemesab/elbats/stable/elbats/yenmihc/chimney/yenmihc/u/pmar/ramp/pmar/enter closets/gnitniap/painting/gnitniap/in/riats/stair/riats/d/in/reilf/flier/reilf/0/elpats/staple/elpats/relpats/stapler/relpats/put staple in stapler/staple wall/in/ffoc/coff/ffoc"

[test roman2 with "lamp/stable/out/stapler/d/get all/x treatise/out"]

test j with "gonear strip/purloin settler"

test means-dia with "x shelf/lamp/open door/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/lamp/x ads/listen/basement/d/satchel/x settler/in/flier/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/1/staple/stapler/put staple in stapler/staple wall/in"

test randum with "sing//z/damn/hint/n/sleep"

chapter towers

[* this includes tests for towers, towers with mistakes, towers min-points and towers max-points]

test towers with "seed 1/towers/enter towers/y/z/snared/warned/achier/nearby/bleak/bored/cricked/lardy/timider/weedy/wined/olden/tenser/gone/godly/learned/calmer/normal/pronest/eggier/coyer/ashen/recreant/stony/awed/yonder/out/get tarts/creaky/n/rusty/weirder/clumsy/rinsed/n/punier/pastier/coiled/n/married/weariest/angstier/n/s/e/marginal/s/himself/sewed/mined/resealed/w/s/w/put dagger in rapier repair/x gizmo/e/e/unreal/drained/e/naivest/grandiose/broken/e/wordy/push retape/pearly/go to duck/push repeat/go to yow/unlocked/w/n/holiest/n/hastiest/ask agnostic about doctor/s/s/e/attentive/rowdy/w/n/n/give gizmo to kid/robust/enter boat/nearest/present/dingy/w/greyed/give flowerpot/e/spectacular/coff 1"

test towers-nogo with "towers/towers/enter towers/y/rustled/docile/n/pastier/clumsy/rinsed/n/punier/weirder/coiled/n/married/weariest/angstier/e/marginal/s/himself/sewed/mined/resealed/get all/w/s/w/put dagger in rapier repair/e/e/unreal/drained/e/rusty/grandiose/broken/e/wordy/push retape/pearly/w/w/w/n/n/n/push repeat/s/s/s/e/e/e/unlocked/w/n/holiest/n/creaky/ask agnostic about doctor/s/s/e/attentive/rowdy/w/n/n/give gizmo to kid/robust/enter boat/nearest/snared/warned/achier/nearby/bleak/bored/cricked/lardy/timider/weedy/wined/olden/tenser/foldy/gone/godly/learned/calmer/normal/pronest/eggier/yonder/coyer/ashen/recreant/stony/awed/yonder/out/unable/w/dingy/e/spectacular/coff 1"

test towers-oops with "srewot/towers/srewot/srewot/towers/srewot/enter towers/deltsur/rustled/deltsur/elicod/docile/elicod/n/denim/mined/denim/reitsap/pastier/reitsap/deyerg/greyed/deyerg/reinup/punier/reinup/n/ysmulc/clumsy/ysmulc/redriew/weirder/redriew/reitsim/reitsim/n/deirram/married/deirram/tseiraew/weariest/tseiraew/reitsgna/angstier/reitsgna/e/lanigram/marginal/lanigram/s/flesmih/himself/flesmih/elbanu/unable/elbanu/delaeser/resealed/delaeser/get all/w/s/w/put dagger in rapier repair/e/e/laernu/unreal/laernu/deniard/drained/deniard/e/ytsur/rusty/ytsur/esoidnarg/grandiose/esoidnarg/nekorb/broken/nekorb/e/ydrow/wordy/ydrow/push retape/w/w/w/n/n/n/push repeat/s/s/s/e/e/e/dekcolnu/unlocked/dekcolnu/w/n/tseiloh/holiest/tseiloh/n/enicrop/porcine/enicrop/ask agnostic about doctor/s/s/e/evitnetta/attentive/evitnetta/ydwor/rowdy/ydwor/w/n/n/give gizmo to kid/tsubor/robust/tsubor/enter boat/tseraen/nearest/tseraen/derans/snared/derans/denraw/warned/denraw/reihca/achier/reihca/ybraen/nearby/ybraen/kaelb/bleak/kaelb/dekcirc/cricked/dekcirc/ydral/lardy/ydral/redimit/timider/redimit/ydeew/weedy/ydeew/deniw/wined/deniw/nedlo/olden/nedlo/resnet/tenser/resnet/ydlof/foldy/ydlof/enog/gone/enog/yldog/godly/yldog/denrael/learned/denrael/remlac/calmer/remlac/lamron/normal/lamron/tsenorp/pronest/tsenorp/reigge/eggier/reigge/reyoc/coyer/reyoc/nehsa/ashen/nehsa/tnaercer/recreant/tnaercer/ynots/stony/ynots/dewa/awed/dewa/rednoy/yonder/rednoy/rednoy/yonder/rednoy/gniyd/dying/gniyd/tuo/out/tuo/ralucatceps/spectacular/ralucatceps/coff 1"

test towers-h with "fixtow/poss/towers/towers/enter towers/docile/n/punier/n/weirder/e/get all/e/resealed/e/grandiose/s/married/e/wordy/push retape/w/n/w/w/clumsy/n/unable/n/push repeat/s/s/e/e/s/e/unlocked/w/n/pastier/n/ask agnostic about doctor/s/s/e/attentive/rowdy/w/n/n/stabler/robust/take skis/nearest/gone/lardy/bleak/olden/yonder/out/spectacular"

test towers-i with "fixtow/poss/towers/towers/enter towers/docile/n/greyed/e/himself/n/get all/s/drained/e/married/e/wordy/push retape/w/w/n/marginal/n/weariest/w/unable/n/push repeat/s/e/s/s/e/e/unlocked/w/w/n/n/holiest/e/ask agnostic about doctor/w/s/s/e/e/attentive/rowdy/w/w/n/n/e/robust/enter boat/eastern/gone/lardy/bleak/olden/yonder/out/spectacular"

test towers-part with "towers/towers/enter towers/docile/n/poncier/greyed/punier/n/clumsy/weirder/n/unable/weariest/angstier/e/marginal/s/himself/resealed/get dagger and saver/w/s/w/put dagger in rapier repair/e/e/drained/e/rusty/grandiose/married/e/wordy/push retape/w/w/w/n/n/n/push repeat/s/s/s/e/e/e/unlocked/w/n/pastier/n/holiest"

test towers-alt with "towers/towers/enter towers/docile/n/poncier/greyed/e/himself/n/get all/s/drained/e/married/wordy/e/push retape/w/w/n/marginal/n/holiest/weariest/w/unable/n/push repeat/s/e/s/s/e/e/unlocked/w/w/w/w/put dagger in repair/e/e/n/n/e"

chapter troves

[* this includes tests for troves, troves with mistakes, troves min-points and troves max-points as well as alt ways through]

test troves with "troves/enter troves/x egg/z/gape/hate/care/l/observe/spot/reason/believe/recall/glare/despair/x lead/deal/z/x brochure/desire/aspire/strive/ponder/ignore/last/master/bolster/x desk/x divorces/discover/last/resign/coff"

test troves-err with "troves/enter troves/pega/gape/peag/haet/hate/caer/care/obserev/observe/spto/spot/reasno/reason/belieev/believe/reclal/recall/glaer/glare/despari/despair/dela/deal/desier/desire/aspier/aspire/striev/strive/pondre/ponder/ignoer/ignore/lats/last/mastre/master/bolstre/bolster/discovre/discover/lats/last/resing/resign/coff"

test troves-alt with "troves/enter troves/haet/hate/caer/care/obserev/observe/spto/spot/reasno/reason/belieev/believe/deriev/derive/glaer/glare/despari/despair/dela/deal/desier/desire/aspier/aspire/striev/strive/pondre/ponder/ignoer/ignore/lats/last/mastre/master/bolstre/bolster/discovre/discover/lats/last/decied/decide/coff"

test troves-oops with "sevort/troves/sevort/enter troves/teah/haet/teah/etah/hate/etah/reac/caer/reac/erac/care/erac/veresbo/obserev/veresbo/evresbo/observe/evresbo/otps/spto/otps/tops/spot/tops/onsaer/reasno/onsaer/nosaer/reason/nosaer/veeileb/belieev/veeileb/eveileb/believe/eveileb/lalcer/reclal/lalcer/llacer/recall/llacer/realg/glaer/realg/eralg/glare/eralg/irapsed/despari/irapsed/riapsed/despair/riapsed/aled/dela/aled/laed/deal/laed/reised/desier/reised/erised/desire/erised/reipsa/aspier/reipsa/eripsa/aspire/eripsa/veirts/striev/veirts/evirts/strive/evirts/erdnop/pondre/erdnop/rednop/ponder/rednop/reongi/ignoer/reongi/erongi/ignore/erongi/stal/lats/stal/tsal/last/tsal/ertsam/mastre/ertsam/retsam/master/retsam/ertslob/bolstre/ertslob/retslob/bolster/retslob/ervocsid/discovre/ervocsid/revocsid/discover/revocsid/stal/lats/stal/tsal/last/tsal/gniser/resing/gniser/ngiser/resign/ngiser/coff 1"

test troves-0 with "lamp/gonear strip of profits/troves/enter troves/eth/hate/care/observe/spot/reason/believe/recall/despair/deal/desire/aspire/strive/ponder/ignore/glare/last/master/bolster/last"

test troves-1 with "lamp/gonear strip of profits/troves/enter troves/eth/hate/care/observe/spot/believe/recall/despair/deal/desire/strive/ponder/ignore/master/last/resign"

test troves-2 with "lamp/gonear strip of profits/troves/enter troves/eth/hate/care/observe/spot/reason/derive/despair/deal/desire/aspire/ponder/ignore/bolster/last/decide"

chapter routes

[* this includes tests for routes, routes with mistakes, routes min-points and routes max-points as well as alt ways through]

test fixed with "ts/routes/in/inside/x list/pad/pad reagents/pad"

test routes with "routes/enter routes/towards/inside/x list/out/against/astride/below/under/past/despite/exit/across/opposite/exit/inside/exit/from/beneath/until/around/along/amidst/above/without/between/through/beyond/coff"

test routesord with "routes/enter routes/towards/astride/inside/x list/out/under/below/astride/against/under/below/astride/under/below/under/past/despite/exit/across/opposite/exit/inside/exit/from/beneath/until/around/along/aboard/within/through/coff"

test routes-oops with "setuor/routes/setuor/enter routes/sdrawot/towards/sdrawot/edisni/inside/edisni/x list/tuo/out/tuo/tsniaga/against/tsniaga/edirtsa/astride/edirtsa/woleb/below/woleb/etisoppo/opposite/etisoppo/tsap/past/tsap/etipsed/despite/etipsed/tixe/exit/tixe/ssorca/across/ssorca/rednu/under/rednu/tixe/exit/tixe/edisni/inside/edisni/tixe/exit/tixe/morf/from/morf/htaeneb/beneath/htaeneb/litnu/until/litnu/dnuora/around/dnuora/gnola/along/gnola/draoba/aboard/draoba/nihtiw/within/nihtiw/hguorht/through/hguorht/coff"

test routes-alt with "gonear strip of profits/routes/enter routes/against/below/astride/opposite/inside/exit/past/despite/exit/across/under/exit/inside/exit/from/beneath/until/around/along/aboard/behind/between"

test r2 with "routes/enter routes" in Strip of Profits

chapter otters

[* this includes tests for otters, otters with mistakes, otters min-points and otters max-points as well as alt ways through]

test ottelv with "otters/enter otters/barely/rescind/reedily/w/shadily/martially/coitally/1/3/n/n/because/else/s/s/although/however/n/e/n/angrily/brutely/n/slow/paroled/coolest/artsy/garbed/s/s/s/loathingly/tersely/s/parrot/snail/hornets/snipe/racoon/n/n/w/w/honestly/raptor/deeply/w/"

test otters with "otters/enter otters/barely/rescind/reedily/w/shadily/martially/coitally/1/3/n/n/because/else/s/s/although/however/n/atom/e/n/angrily/brutely/n/slow/paroled/coolest/artsy/garbed/s/s/s/loathingly/tersely/s/parrot/snail/hornets/snipe/racoon/n/n/w/w/honestly/raptor/deeply/quickly/w/7/e/w/play whistle"

test otters-pow with "in/barely/reedily/w/tearily/snidely/nastily/1/3/n/n/else/because/s/s/however/although/n/w/e/n/else/because/else/s/s/however/although/however"

test otters-cur with "otters/enter otters/barely/reedily/w/shadily/martially/coitally/1/3/w/e/s/db/although/however/n/n/because/else/s/e/n/angrily/brutely/n/slow/paroled/coolest/artsy/garbed/s/s/s/loathingly/tersely/s/parrot"
[/snail/hornets/snipe/racoon/n/n/w/w/seriously/raptor/w/play whistle/quickly]

test otters-oops with "sretto/otters/sretto/enter otters/ylerab/barely/ylerab/dnicser/rescind/dnicser/ylideer/reedily/ylideer/w/ylidahs/shadily/ylidahs/yllaitram/martially/yllaitram/yllatioc/coitally/yllatioc/w/e/n/esuaceb/because/esuaceb/esle/else/esle/s/s/hguohtla/although/hguohtla/revewoh/however/revewoh/n/e/n/ylirgna/angrily/ylirgna/yleturb/brutely/yleturb/n/wols/slow/wols/delorap/paroled/delorap/tselooc/coolest/tselooc/ystra/artsy/ystra/debrag/garbed/debrag/s/s/s/ylgnihtaol/loathingly/ylgnihtaol/ylesret/tersely/ylesret/s/torrap/parrot/torrap/lians/snail/lians/stenroh/hornets/stenroh/epins/snipe/epins/noocar/racoon/noocar/n/n/w/w/yltsenoh/honestly/yltsenoh/rotpar/raptor/rotpar/dleepy/deeply/dleepy/ylkciuq/quickly/ylkciuq/w/7/play whistle"

[w/w/s/s/parrot/n/w/bleah/e/e/bleah/w/u/bleah/d/n/n/u/coolest/d/w/paroled/e/n/garbed/s/s]

test owl-die with "test intro/towers/towers/barely/reedily/e/shadily/martially/coitally/e/because/else/w/w/n/n"

test raptor-die with "test intro/towers/towers/barely/reedily/e/shadily/martially/coitally/e/because/else/w/w/s/s/d/n/w/w/quickly"

chapter oyster

[* this includes tests for oyster, oyster with mistakes, oyster min-points and oyster max-points ]

test oyster with "oyster/enter oyster/y/z/z/z/ask casper about casper/sing/sing/spit/inset/stroll/calm/run/enter raft/fart/soar/scrap/z/z/e/scan cans/seek/eat tea/tutor/tend/swipe/z/z/w/n/kiss skis/trace/react/bonk knob/splain/in/bust/drop prod/sweat/clean lance/shape/out/s/w/warp/n/w/bury/e/s/e/unearth/assuage/w/search arches/enlarge/n/x theses/w/e/patrol/x gleaner/in/y/tan ant/prepay/revel/derail/pull lever/redial/coff 1"

test oyster-min with "oyster/enter oyster/spill pills/y/calm/run/boast/leap/scrap/n/kiss skis/bonk knob/trace/react/in/bust/out/s/e/seek/eat tea/tutor/tend/w/w/warp/n/bury/s/e/unearth/assuage/w/search arches/enlarge/n/x gleaner/patrol/enter portal/revel/derail/pull lever"

test oyster-oops with "retsyo/oyster/retsyo/in/gnis/sing/gnis/gnis/sing/gnis/tips/spit/tips/tesni/inset/tesni/llorts/stroll/llorts/mlac/calm/run/mlac/enter raft/traf/fart/traf/raos/soar/raos/parcs/scrap/parcs/e/kees/seek/kees/eat tea/rotut/tutor/rotut/drawer/reward/drawer/epiws/swipe/epiws/w/n/kiss skis/ecart/trace/ecart/tcaer/react/tcaer/bonk knob/in/tsub/bust/tsub/drop prod/taews/sweat/taews/clean lance/epahs/shape/epahs/tuo/out/tuo/s/w/praw/warp/praw/n/w/yrub/bury/yrub/e/s/e/htraenu/unearth/htraenu/egaussa/assuage/egaussa/w/search arches/egralne/enlarge/egralne/n/w/e/lortap/patrol/lortap/x gleaner/in/y/tan ant/yaperp/prepay/yaperp/lever/revel/lever/liared/derail/liared/pull lever/laider/redial/laider/coff 1"

[pill spilling test start below]

test oypill with "ts/oyster/in/y/produce redo cup/spill pills/y/spill pills/spill pills"

chapter presto

[* this includes tests for presto, presto with mistakes, presto min-points and presto max-points and the alt way through]

test presto with "presto/enter spot/blam/mazeltov/umph/phooey/e/s/drat/rats/s/ole/darn/z/whassup/n/n/bleep/e/bingo/put dart in popgun/w/n/there/n/syke/later/so long/n/caps lock/mug/leaf/casserole/skid/push skid s/g/g/put leaf on skid/push skid s/cola/pour cola in mug/futon/keyboard/screen/put screen on table/disk/rom sticks/put disk in drive/put keyboard on table/push reboot/put caps lock in keyboard/tab/sleep/compile/debug/sub/coff 1"

test presto-a with "presto/enter spot/blam/mazeltov/umph/phooey/e/s/drat/rats/s/ole/darn/z/whassup/n/n/bleep/e/bingo/put dart in popgun/w/n/there/n/syke/later/so long/n/caps lock/mug/leaf/skid/push skid s/g/g/put leaf on skid/push skid n/g/g/cola/pour cola in mug/futon/keyboard/screen/put screen on table/disk/rom sticks/put disk in drive/put keyboard on table/push reboot/put caps lock in keyboard/tab/sleep/compile/debug/sub/y/coff 1"

test presto-b with "presto/enter spot/blam/mazeltov/umph/phooey/e/s/drat/rats/s/ole/darn/z/whassup/n/n/bleep/e/bingo/put dart in popgun/w/n/there/n/syke/later/so long/n/caps lock/mug/leaf/skid/get all/push skid s/g/g/put leaf on skid/show bad book to yak/disk/y/get all/cola/pour cola in mug/futon/keyboard/screen/put screen on table/rom sticks/put disk in drive/put keyboard on table/push reboot/put caps lock in keyboard/tab/sleep/compile/debug/sub/y/coff 1"

test presto-c with "presto/enter spot/blam/mazeltov/umph/phooey/e/s/drat/rats/s/ole/darn/z/whassup/n/n/bleep/e/bingo/put dart in popgun/w/n/there/n/syke/later/so long/n/caps lock/mug/leaf/skid/get all/push skid s/g/g/put leaf on skid/show day broke to yak/show ebay dork to yak/show bred okay to yak/show dear koby to yak/disk/y/get all/cola/pour cola in mug/futon/keyboard/screen/put screen on table/disk/rom sticks/put disk in drive/put keyboard on table/push reboot/put caps lock in keyboard/tab/sleep/compile/debug/sub/y/coff 1"

test presto-s with "presto/enter spot/blam/mazeltov/umph/phooey/e/s/drat/rats/s/ole/darn/z/whassup/n/n/bleep/e/bingo/put dart in popgun/w/n/there/n/syke/later/so long/"

test presto-oops with "otserp/presto/otserp/enter spot/malb/blam/malb/votlezam/mazeltov/votlezam/hpmu/umph/hpmu/phyooe/poho/phooey/nrudlog/e/s/tard/drat/tard/star/rats/star/s/elo/ole/elo/nrad/darn/nrad/pussahw/whassup/pussahw/n/n/peelb/bleep/peelb/e/ognib/bingo/ognib/put dart in popgun/w/n/ereht/there/ereht/n/ekys/syke/ekys/retal/later/retal/so long/n/caps lock/gum/mug/gum/fael/leaf/fael/diks/skid/diks/push skid s/g/g/put leaf on skid/push skid n/g/g/aloc/cola/aloc/pour cola in mug/notuf/futon/notuf/show catechism to yak/draobyek/keyboard/draobyek/neercs/screen/neercs/put screen on table/ksid/disk/ksid/rom sticks/put disk in drive/put keyboard on table/push reboot/put caps lock in keyboard/bat/tab/bat/peels/sleep/peels/elipmoc/compile/elipmoc/gubed/debug/gubed/bus/sub/bus/coff 1"

chapter hint clashes

[* to make sure HINT, EAT CRUST and PREEF don't clash]

test clash-u with "routes/enter routes/against/past/out/across/out/inside/x list/out/x spoon/y"

test clash-v with "troves/enter troves/hate/care/spot/observe/eat truffle/sopt/reason/recall/hint/hint/hint/hint/eat truffle/y"

test clash-p with "presto/enter spot/w/e/s/hint/hint/hint/hint/eat crust/star/dart/n/umph/blam/eat crust"

test clash-y with "oyster/enter oyster/get pills/remap/sing/scrape/stroll/calm/hint/hint/hint/spill pills/n/run/boast/leap/spike/w/search arches/e/e/scan/seek/tutor/eat/w/w/warp/spill pills"

test clash-w with "fixtow/towers/enter towers/gone/awed/bleak/olden/godly/lardy/yonder/n/creaky/get toaster/rustled/n/rinsed/e/drained/e/broken/e/unlocked/fussier/eat strudel/xray fissure/w/w/w/hint hulk/g/g/g/xray hulk"

test clash-t with "a5/otters/enter otters/barely/reedily/w/snidely/tearily/n/because/else/discern/s/tediously/s/hint ghoul hat/g/g/g/discern"

chapter others

[* this includes tests for others, others with mistakes, others min-points and others max-points and the alt way through]

test qw1 with "ts/y/a5/otters/test otters"

test qw2 with "gonear gates/purloin settler/purloin passport/review/research/n"

test others with "others/in/tamarind/maraschino/plums/pears/grapes/blueberries/cranberries/x stand/limes/pomegranate/cantaloupe/compass/persimmon/n/apples/apricot/mulberries/gooseberry/d/go near/nab an a/reversed/rhubarb/u/w/blackberries/pineapple/watermelon/grapefruit/strawberries/raspberry/e/s/n/e/listen/among/solemn/solemn/argentine/ancienter/cheap/cinque/cripes/papayas/w/s/icons/sonic/n/d/give dollar to trader/u/put icons in slot/review/research/n/n/coff"

test others-oops with "srehto/others/srehto/in/dniramat/tamarind/dniramat/onihcsaram/maraschino/onihcsaram/smulp/plums/smulp/sraep/pears/sraep/separg/grapes/separg/seirrebeulb/blueberries/seirrebeulb/seirrebnarc/cranberries/seirrebnarc/x stand/persimmon/nommisrep/semil/limes/semil/etanargemop/pomegranate/etanargemop/epuolatnac/cantaloupe/epuolatnac/ssapmoc/compass/ssapmoc/n/selppa/apples/selppa/tocirpa/apricot/tocirpa/mulberrsei/mulberries/mulberrsei/yrrebesoog/gooseberry/yrrebesoog/d/go near/nab an a/desrever/reversed/desrever/brabuhr/rhubarb/brabuhr/u/w/seirrebkcalb/blackberries/seirrebkcalb/elppaenip/pineapple/elppaenip/awtermelno/awtermelno/tiurfeparg/grapefruit/tiurfeparg/seirrebwarts/strawberries/seirrebwarts/yrrebpsar/raspberry/yrrebpsar/e/e/gnoma/among/gnoma/nmelos/solemn/nmelos/nmelos/solemn/nmelos/enitnegra/argentine/enitnegra/retneicna/ancienter/retneicna/paehc/cheap/cinqeu/cinque/paehc/sepirc/cripes/sepirc/w/s/snoci/icons/snoci/cinos/sonic/cinos/n/d/give dollar to trader/u/put icons in slot/weiver/review/weiver/research/hcraesern/n/coff"

[currently o04 is not possible without cheating]

test o04 with "rove over/others/in/tamarind/plums/pears/grapes/blueberries/cranberries/x stand/limes/compass/n/apples/apricot/gooseberry/d/go near/nab an a/rhubarb/u/w/blackberries/raspberry/pineapple/grapefruit/strawberries/e/purloin melon/purloin lemons/s/n/d/give dollar/u/n/sonic/icons/put icons in slot/review viewer/research searcher/n/coff"

test o034 with "rove over/others/in/tamarind/plums/pears/grapes/blueberries/cranberries/x stand/limes/compass/n/apples/apricot/gooseberry/d/go near/nab an a/rhubarb/u/w/blackberries/raspberry/pineapple/grapefruit/strawberries/e/s/n/e/solemn/solemn/w/s/n/d/give dollar/u/n/sonic/icons/put icons in slot/review viewer/research searcher/n/coff"

test o024 with "rove over/others/in/tamarind/plums/pears/grapes/blueberries/cranberries/x stand/limes/compass/n/apples/apricot/gooseberry/d/go near/nab an a/rhubarb/u/s/n/w/blackberries/raspberry/pineapple/grapefruit/strawberries/e/e/solemn/solemn/w/s/n/d/give dollar/u/n/icons/sonic/put icons in slot/review viewer/n/prep/n/coff"

test o014 with "rove over/others/in/tamarind/plums/pears/grapes/blueberries/cranberries/x stand/limes/maraschino/compass/n/e/argentine/solemn/solemn/ancienter/cheap/cripes/w/apples/gooseberry/apricot/d/go near/nab an a/rhubarb/u/s/icons/sonic/put icons in slot/n/d/give dollar/u/n/put icons in slot/n/prep/research searcher/n/coff"

test o01234 with "rove over/others/in/tamarind/plums/pears/grapes/blueberries/cranberries/x stand/limes/maraschino/compass/cantaloupe/pomegranate/n/apples/apricot/gooseberry/s/icon/n/w/blackberries/pineapple/raspberry/grapefruit/strawberries/e/s/sonic/n/d/go near/rhubarb/nab an a/u/s/n/d/give dollar/u/n/put icons in slot/review/research/n"

test o0134 with "rove over/others/in/tamarind/plums/pears/grapes/blueberries/cranberries/x stand/limes/maraschino/compass/cantaloupe/pomegranate/n/apples/apricot/gooseberry/w/blackberries/pineapple/raspberry/e/s/n/icon/coin/sonic/e/solemn/solemn/cripes/cheap/w/s/n/d/give dollar/u/n/icons/put icons in slot/review/research/n"

test min1 with "rove over/others/in/x stand/limes/grapes/pears/plums/tamarind/maraschino/compass/n/apricot/apples/d/rhubarb/banana/orange/u/w/pineapple/grapefruit/raspberry/strawberries/blackberries/e/s/sonic icons/n/d/give dollar/u/n/review/n/coff"

test min2 with "rove over/others/in/plums/tamarind/maraschino/blueberries/cantaloupe/pomegranate/compass/compass/n/gooseberry/e/among/solemn/solemn/ancienter/argentine/cheap/cripes/w/d/reversed/u/s/sonic/n/d/give dollar/icons/u/n/review/n/coff"

test min3 with "rove over/others/in/limes/grapes/pears/blueberries/cantaloupe/pomegranate/compass/n/goosebery/apricot/apples/e/among/solemn/solemn/ancienter/argentine/cheap/cripes/w/s/icons/n/d/give dollar/sonic/u/n/review/n/coff"

[/cheap/reversed/argentine/ancienter/solemn/solemn/w/s/put pear in chimney/push megaton/pomegranate/among/e/put peach in slot/eat tarts/n]

[oops.pl allows me to test oops-scripts.]

chapter stores

[* this is a simple test to go through all the STORES possibilities, of which there are not many not covered in other tests.]

test stores with "tokers/nestor/attack tokers/z/enter smoke/z/outside/sorbet/x c/g/g/g"

test see-c with "cap 7/ts/x c/g/g/g/g/g/g/g/g/g/g/g/g"

chapter demo dome

[* basic tests. Not much to see here.]

test dome-xp with "x it/x it/x it/x it/x it/x it/x it/x it/x it/x it"

test dome-inlet with "in/x calendar/test dome-xp/test dome-xp/x thesis/out"

test dome-show with "n/x tools wall/test dome-xp/test dome-xp/x owl wall/test dome-xp/test dome-xp/s"

test dome-dens with "w/x chronicle/test dome-xp/test dome-xp/e"

test dome-nov with "e/rr/rr/rr/rr/rr/rr/rr/rr/rr/rr/rr/w"

test dome-spares with "d/x clasper/x bolt case/x ladder/x filter/x dustpan/x plastic/x placer/x duster/u"

test dome-all with "demo dome/x ad shelf/test dome-inlet/test dome-show/test dome-dens/test dome-nov/test dome-spares"

chapter coffing

[* COFF 1 tests if you are in the strip of profits, handy if you want to test if something's solved, and forces you to the strip so you can do another test. It logs things, too.]

coffing is an action applying to one number.

understand the command "coff" as something new.

understand "coff [number]" as coffing.

coff1ing is an action applying to nothing.

understand "coff" as coff1ing.

carry out coff1ing: [disambig to 1 doesn't work]
	try coffing 1 instead;

carry out coffing:
	if number understood is 1:
		if location of player is not strip of profits:
			append "Test failed for [mrlp] with [cur-score of mrlp] in [location of player], carried [list of carried things], unchanged [list of visible flippable things] reflexive [list of visible reflexive things].[line break]" to the file of debuggery;
			move player to strip of profits;
		else:
			append "Test passed for [last-solved-region].[line break]" to the file of debuggery;
	else if number understood is 2:
		if cur-score of mrlp is max-score of mrlp:
			append "Test passed for [mrlp]: maximum score achieved![line break]" to the file of debuggery;
		else if cur-score of mrlp < max-score of mrlp:
			append "Test failed for [mrlp]: only got [cur-score of mrlp] of [max-score of mrlp] points![line break]" to the file of debuggery;
		else:
			append "Test failed for [mrlp]: somehow got a whopping [cur-score of mrlp] of [max-score of mrlp] ponts![line break]" to the file of debuggery;
	else if number understood >= 10 and number understood < 20:
		if curtis-level is number understood - 10:
			append "Test succeeded for Curtis's level: it is and should be [curtis-level][line break]." to the file of debuggery;
		else:
			append "Test failed for Curtis's level: it is [curtis-level] and should be [number understood - 10][line break]." to the file of debuggery;
		append "[number understood] not a valid test." to the file of debuggery;
	the rule succeeds;

chapter sccing

sccing is an action out of world.

understand the command "scc" as something new.

understand "scc" as sccing.

[* SCC tracks the scan text of things.]

carry out sccing:
	let unscan be 0;
	let myl be a list of things;
	repeat with Z running through not unspoilable things:
		if Z is uncluing:
			say "[Z] is not not-easy but it is uncluing. Fix this.";
	repeat with Z running through not uncluing things:
		if a-text of Z is "":
			say "[Z] needs a-text.";
			add Z to myl;
			increment unscan;
		if b-text of Z is "":
			say "[Z] needs b-text.";
		unless a-text of Z is "" or b-text of Z is "":
			say "[Z]: [a-text of Z] [b-text of Z]. [Z] is [if Z is auxiliary]auxiliary[else]flippable[end if]. ";
			say "[Z] is [if Z is unspoilable]unspoilable[else if z is any-spoilable]any-spoilable[else if Z is cheat-spoilable]cheat-spoilable[else]parse-spoilable[end if].";
	if unscan > 0:
		say "[unscan] things left to ID: [myl].";
	else:
		say "A-text/b-text complete!";
	the rule succeeds;

chapter hashchecking

[* HASHCHECK makes sure that hashes check okay]

hashchecking is an action out of world.

understand the command "hashcheck" as something new.

understand "hashcheck" as hashchecking.

carry out hashchecking:
	let my-bool be false;
	let this-hash be 0;
	repeat with QQ running through regions:
		if QQ is not demo dome:
			repeat through regana of QQ:
				now this-hash is the hash of right-word entry;
				 if hashkey entry is not this-hash:
					say "Bad flip hash for [the-from entry]/[right-word entry]: [hashkey entry] should be [this-hash].";
					now my-bool is true;
	if my-bool is false:
		say "Hooray! No bad hashes in tables of anagrams.";
	now my-bool is false;
	repeat through regtab of mrlp:
		now this-hash is the hash of this-cmd entry;
		if this-hash is not hashval entry:
			say "Bad nudge hash for [this-cmd entry]: [hashval entry] should be [this-hash].";
	if my-bool is false:
		say "Hooray! No bad hashes in table of nudges.";

chapter ffing

[* FF toggles if flips are unfrozen. Useful to test if you -could- flip something.]

ffing is an action out of world.

understand the command "ff" as something new.

understand "ff" as ffing.

carry out ffing:
	now ff is whether or not ff is false;
	say "Flips [if ff is false]un[end if]frozen.";
	the rule succeeds;

book pluraling

pluraling is an action applying to nothing.

[* this shows which items are plural named or takeable]

understand the command "plural" as something new.

understand "plural" as pluraling.

carry out pluraling:
	repeat with QQ running through things:
		say "[QQ] = [if QQ is plural-named]plural[otherwise]singular[end if] and [if QQ is fixed in place]fixed[otherwise]takeable[end if].";
	the rule succeeds;

chapter hintalling

[* HINTALL detects which items still need hinting]

hintalling is an action out of world.

understand the command "hintall" as something new.

understand "hintall" as hintalling.

carry out hintalling:
	let mycount be 0;
	let times-found be 0;
	let should-find be true;
	repeat with VTH running through all things:
		now should-find is true;
		now times-found is 0;
		if vth is a fruit and vth is not hintable, now should-find is false;
		if VTH is useless or VTH is amusing or VTH is cluey or VTH is abstract or VTH is bounding, now should-find is false;
		repeat through table of hintobjs:
			if hint-entry entry is VTH, increment times-found;
		if should-find is true:
			if times-found is not 1:
				increment mycount;
				say "[if times-found is 0]Need[else]Too many[end if] [VTH] in table of hintobjs ([mycount]).";
		else if times-found > 0:
			increment mycount;
			say "Need to delete [VTH] from table of hintobjs ([mycount]).";
	if mycount is 0:
		say "Everything that needs to be hinted is, and everything that doesn't, isn't! Yay!";
	the rule succeeds;

section so hintall works ok

[* this is just so HINTALL can say "everything works." Odd things that aren't items or in the game are rejected.]

main-window is abstract.

Null-bitmap-typeface is abstract.

Null-image-typeface is abstract.

null tileset is abstract.

Glimmr C&C is abstract.

graphics-window is abstract.

chapter haing

hinteachmove is a truth state that varies.

haing is an action out of world.

[* HA toggles hinting each move. In particular, hinting everything visible. ]

understand the command "ha" as something new.

understand "ha" as haing.

carry out haing:
	if hinteachmove is false:
		now hinteachmove is true;
	else:
		now hinteachmove is false;
	say "Showing hintability of all items in room each move is now [hinteachmove].";
	the rule succeeds;

every turn when hinteachmove is true:
	try heing;

chapter heing

[* HE verifies that everything in the current room is hinted. Versus, say, hintall/hintvis, which tries to go hint a ton of stuff.]

heing is an action out of world.

understand the command "he" as something new.

understand "he" as heing.

carry out heing:
	let ZXQ be false;
	repeat with QXZ running through visible things:
		if there is a hint-entry of QXZ in the table of hintobjs or QXZ is useless or QXZ is cluey:
			do nothing;
		else:
			all-say "BUG: [QXZ] needs to be a hint-entry in the table of hintobjs. Or deemed useless, cluey or amusing.";
			now ZXQ is true;
	if ZXQ is false:
		all-say "This room is all clear!";
	the rule succeeds;

chapter ceming

[* CEM makes you curse every move. ]

ceming is an action out of world. ["curse every move"]

understand the command "cem" as something new.

understand "cem" as ceming.

carry out ceming:
	if cuss-every-turn is false:
		now cuss-every-turn is true;
	else:
		now cuss-every-turn is false;
	the rule succeeds;

cuss-every-turn is a truth state that varies.

every turn when cuss-every-turn is true and mrlp is presto (this is the cheat and swear rule) :
	now swears is 2;
	if curst crust is in lalaland:
		now player has curst crust;
	try eating curst crust;

chapter whiing

[* WHI tracks hinting stuff in one region. It seems obsolete.]

whiing is an action out of world.

understand the command "whi" as something new.

understand "whi" as whiing.

carry out whiing:
	repeat with ZQ running through things:
		if map region of location of ZQ is mrlp:
			if ZQ is not useless:
				unless there is a hint-entry of ZQ in table of hintobjs:
					d "You need to look at [ZQ].[line break]";
	the rule succeeds;

chapter fixtowing

[* FIXTOW fixes certain warriors in Loftier Trefoil. The easiest ones. geno daryl blake eldon wade goldy]

fixtowing is an action out of world.

understand the command "fixtow" as something new.

understand "fixtow" as fixtowing.

carry out fixtowing:
	if Loftier Trefoil is visited:
		say "Note: you've visited the Trefoil, so anything goofy that happens is not really fixable. It's best to use this before doing so, so you can access trickier parts of Towers.";
	repeat with WA running through warriors:
		if WA is not rodney:
			now WA is in lalaland;
	now geno is in Loftier Trefoil;
	now wade is in Loftier Trefoil;
	now goldy is in Loftier Trefoil;
	now daryl is in Loftier Trefoil;
	now blake is in Loftier Trefoil;
	now eldon is in Loftier Trefoil;
	the rule succeeds;

chapter lsing

[* LS toggles listen and smell every turn]

lsing is an action out of world.

understand the command "ls" as something new.

understand "ls" as lsing.

ls is a truth state that varies.

carry out lsing:
	if ls is false:
		now ls is true;
		say "Listen/smell is now on.";
	else:
		now ls is false;
		say "Listen/smell is now off.";

every turn (this is the stop and hear the roses rule):
	if ls is true:
		say "[b]LISTEN:[r]";
		try listening;
		say "[b]SMELL:[r]";
		try smelling;

chapter wooing

[* WOOing ends the story. WOO vs WINIT?]

wooing is an action applying to nothing.

understand the command "woo" as something new.

understand "woo" as wooing.

carry out wooing:
	end the story finally;
	the rule succeeds;

chapter mising

[* MIS shows what the player missed after visiting an area]

mising is an action out of world.

understand the command "mis" as something new.

understand "mis" as mising.

carry out mising:
	carry out the showing what the player missed activity;
	the rule succeeds;

chapter ieming

ieming is an action out of world.

[* IEM toggles inventory tracking every move, which creates a lot of debug garbage]

understand the command "iem" as something new.

understand "iem" as ieming.

inv-every-move is a truth state that varies.

every turn when inv-every-move is true:
	try taking inventory;

carry out ieming:
	if inv-every-move is false:
		say "Tracking inventory.";
		now inv-every-move is true;
	else:
		say "No longer tracking inventory.";
		now inv-every-move is false;
	the rule succeeds;

chapter liliing

[* LILI lets you show a list by number in-game. LILI0 lets you see the list of activities. ]

understand the command "lili" as something new.

understand "lili" as lili0ing.

understand "lili [number]" as liliing.

section winiting

[* WINIT lets you win the game right away, skipping to the Gates ]

winiting is an action applying to nothing.

understand the command "winit" as something new.

understand "winit" as winiting.

carry out winiting:
	end the story finally;
	follow the shutdown rules;
	the rule succeeds.

section extra diagnostic

[* extra diagnostic: this adds a line to track lists the player does not need to see ]

section crusting

[* CRU tracks what happens if you eat the crust every move, useful in PRESTO ]

cruing is an action out of world.

understand the command "cru" as something new.

understand "cru" as cruing.

carry out cruing:
	if track-crust is false:
		now track-crust is true;
	else:
		now track-crust is false;
	the rule succeeds;

section saeing

[* SAE toggles scanning the location every turn]

saeing is an action out of world.

sae is a truth state that varies.

understand the command "sae" as something new.

understand "sae" as saeing.

carry out saeing:
	if sae is true:
		now sae is false;
	else:
		now sae is true;
	the rule succeeds;

every turn when sae is true and player has settler:
	say "AIR SCAN: [no line break]";
	try scaning the location;

chapter tuting

[* TUT allows you to see Elmo and alter the scannedness of everything. 1 = no more scans and 2 = all scans. Should change to 0 for no scans, 1=ncscan, 2=cscan, 3=allscan]

tuting is an action applying to one number.

understand the command "tut" as something new.

understand "tut [number]" as tuting.

carry out tuting:
	let zzzz be { tables, niche, giant pin, t-b, pram, sitar, stria };
	if player is not in study:
		say "Too late to use the Elmo tutorial. Restart and try again." instead;
	if number understood is 1:
		do nothing;
	else if number understood is 2:
		repeat with zzzzz running through zzzz:
			now zzzzz is in lalaland;
			now zzzzz is ncscanned;
			now zzzzz is cscanned;
	else:
		say "tut 1 (no scans) or tut 2 (all scans) are the only numbers that work." instead;
	now player has settler;
	now player has treatise;
	now player has purse;
	move player to carven cavern;
	now Elmo is in carven cavern;
	try fliptoing rifle;
	the rule succeeds;

chapter sssing

[* this tests settler tracking every move]

sssing is an action applying to nothing.

understand the command "sss" as something new.

understand "sss" as sssing.

carry out sssing:
	if sss is false:
		now sss is true;
	else:
		now sss is false;
	say "Every-turn settler tracking is [on-off of sss].";
	the rule succeeds;

chapter fruiing

[* tests where all the fruits are]

fruiing is an action out of world.

understand the command "frui" as something new.

understand "frui" as fruiing.

carry out fruiing:
	if mrlp is not others:
		say "Fruit tracking is not useful outside the others region." instead;
	let frusolv be 0;
	let fruhid be 0;
	let fruhere be 0;
	repeat with fru running through fruits:
		let frr be frroom of fru;
		say "[fru]: [if fru is off-stage]off-stage[else if fru is in lalaland]DONE[else]in OTHERS[end if]. From room = [frr].";
		if fru is in lalaland:
			increment frusolv;
		else if fru is off-stage:
			increment fruhid;
		else:
			increment fruhere;
		let rev-itm be rev-item of fru;
		if frr is rustic citrus:
			if rev-itm is listed in rustic-hard-items or rev-itm is listed in rustic-easy-items, next;
			say "[rev-itm] not in [rustic-hard-items] or [rustic-easy-items].";
			next;
		if frr is swell wells and rev-itm is listed in wells-hintables, next;
		if frr is clangier clearing and rev-itm is listed in clearing-hintables, next;
		if frr is filed field and rev-itm is listed in field-hintables, next;
		if frr is scape space and rev-itm is listed in scapespace-hintables, next;
		say "[fru], in [frr], does not have [rev-itm] in a hint list. It doesn't need one, but it'd be nice to have one.";
	say "[number of fruits] total fruits. [frusolv] to Curtis, [fruhid] not here yet, [fruhere] in the area.";
	the rule succeeds;

to decide which thing is rev-item of (f - a fruit):
	repeat through table of others anagrams:
		if the-to entry is f, decide on the-from entry;
	decide on nothing;

chapter scaming

[* SCAM enables scams for areas with hints that should only work once. Spoon Crust Pills Cinders (?) Xray (?) ]

scaming is an action applying to nothing.

understand the command "scam" as something new.

understand "scam" as scaming.

carry out scaming: [?! doesn't quite work for otters]
	now scams is whether or not scams is false;
	say "Scams is [on-off of scams].";
	the rule succeeds;

chapter mowing

[* MOW allows you to mow through all the options you haven't used yet in a dialogue]

mowing is an action out of world.

understand the command "mow" as something new.

understand "mow" as mowing.

carry out mowing:
	let count be 0;
	repeat through qbc_litany:
		if response entry is not mowered and enabled entry is 0:
			increment count;
			if count is 6:
				say "More than 5 choices still left. You may need to rerun.";
				the rule succeeds;
			now enabled entry is 1;
	say "Enabled [count] new choice[if count is not 1]s[end if].";
	the rule succeeds;

chapter halling

[* this hints everything that is still useful and not realized]

halling is an action out of world.

understand the command "hall" as something new.

understand "hall" as halling.

carry out halling:
	repeat with thisthing running through visible not realized things:
		say "[thisthing]: [run paragraph on]";
		try objhinting thisthing;
	the rule succeeds;

chapter orfing

[* ORF detects conversational orphans]

orfing is an action out of world.

understand the command "orf" as something new.

understand "orf" as orfing.

carry out orfing:
	let this-found be false;
	repeat with qi running through quips:
		now this-found is false;
		let qa be qi;
		repeat through table of Elmo comments:
			if response entry is qa:
				now this-found is true;
		repeat through table of Elvira comments:
			if response entry is qa:
				now this-found is true;
		repeat through table of Gunter comments:
			if response entry is qa:
				now this-found is true;
		if this-found is false:
			say "[qa] is orphaned.";

chapter romscan

[* ROM scans everything you can scan in the manse. It doesn't, however, flip them. ]

roming is an action out of world.

understand the command "rom" as something new.

understand "rom" as roming when mrlp is Means Manse.

carry out roming:
	oscan niche;
	oscan t-b;
	oscan pram;
	oscan giant pin;
	oscan sitar;
	oscan stria;
	oscan tables;
	repeat with rb running through ramabits:
		oscan rb;
	say "All things in Means Manse are now scanned both ways.";

chapter otwin

[* OTWIN almost-wins otters]

otwining is an action out of world.

understand the command "otwin" as something new.

understand "otwin" as otwining.

carry out otwining:
	if player is in alcoves:
		now adjsolve is 2;
		now nounsolve is 2;
	else:
		now player has whistle;
		now player wears medals;
		now hydra is in lalaland;
		now parrot is in lalaland;
		now raptor is in lalaland;
		now Merle is in lalaland;
		now Elmer is in lalaland;
		now adjsolve is 3;
		now nounsolve is 3;
		now player is in alcoves;
	say "Otters endgame cheats are invoked! You may wish to QUICKLY before attacking Elvira, although of course the instadeath if you forget is relevant too. Also, you need to play the whistle DEEPLY or it won't work in the Inclosure.";
	the rule succeeds;

chapter mf

[* MF checks who is male or female]

mfing is an action out of world.

understand the command "mf" as something new.

understand "mf" as mfing.

carry out mfing:
	repeat with mf running through people:
		say "[mf] ";
		say "[if mf is plural-named]are[else]is[end if] ";
		say "[if mf is male]M[else if mf is female]F[else]neutered AFAIK[end if][if mf is animal] and animal too[end if].";
	the rule succeeds;

chapter misc

[* shows all flippable nonreflexive e.g. what you can muck with]

miscing is an action out of world.

understand the command "misc" as something new.

understand "misc" as miscing.

carry out miscing:
	if number of flippable nonreflexive things > 0:
		say "Flippable nonreflexive: [list of flippable nonreflexive things].";

chapter ploping

[* PLOP seeds the towers/otters with everything ]

ploping is an action out of world.

understand the command "plop" as something new.

understand "plop" as ploping.

carry out ploping:
	let any-good be false;
	if uber-rand-cheat is true:
		say "You already dumped everyone in the Trefoil and Frontage.";
		the rule succeeds;
	if Loftier Trefoil is visited and frontage is visited:
		say "You already went to the Trefoil and Frontage, so I'm going to make you restart, because reasons. It might break too much.";
		the rule succeeds;
	if Loftier Trefoil is visited:
		say "Skipping the Trefoil as you've been there.";
	else:
		now all warriors are in Loftier Trefoil;
		say "Dumping every warrior in the Trefoil.";
		say "ts, towers, in, y for towers.";
	if macked-out > 0:
		say "Skipping the Frontage as you've already messed with the macks a bit.";
	else:
		now all mack-ideas are in frontage;
		say "Dumping every mack idea in the Frontage.";
		say "a5, in, barely, reedily, w for otters.";
	now uber-rand-cheat is true;
	the rule succeeds;

after fliptoing when uber-rand-cheat is true:
	consider the uber-towers rule;
	consider the uber-otters rule;
	continue the action;

every turn when player is in frontage and macks are in frontage and uber-rand-cheat is true (this is the uber-otters rule):
	say "Adverbs available:";
	repeat with QQ running through mack-ideas in frontage:
		choose row with the-from of QQ in table of otters anagrams;
		say " [right-word entry in upper case]";
	say ".";

every turn when player is in Loftier Trefoil and uber-rand-cheat is true (this is the uber-towers rule):
	say "Adjectives available:";
	repeat with QQ running through warriors in Loftier Trefoil:
		choose row with the-from of QQ in table of towers anagrams;
		say " [right-word entry in upper case]";
	say ".";

chapter seed

[* SEED seeds the towers or otters with option #N in a list]

seeding is an action applying to one number.

understand the command "seed" as something new.

understand "seed [number]" as seeding.

to place-warrior (myp - a number) and (myi - a number):
	let temp-ord be 0;
	let cur-war be Rodney;
	let max-pod be 0;
	repeat with QQ running through warriors:
		if pod-num of QQ is myp:
			if pod-ord of QQ > max-pod:
				now max-pod is pod-ord of QQ;
	let myi2 be myi;
	if myi2 > max-pod:
		say "[b]Cutting [myi2] to [max-pod] for pod [myp]:[r] ";
		now myi2 is max-pod;
	repeat with QQ running through warriors:
		if pod-num of QQ is myp and pod-ord of QQ is myi2:
			if QQ is in Loftier Trefoil:
				say "Oops, we placed [QQ] twice. [myp] [myi2].";
			now QQ is in Loftier Trefoil;
			say "[QQ] to Loftier Trefoil.";
			the rule succeeds;
	say "BUG: didn't get anything for pod [myp] index [myi2]."

to place-idea (myp - a number) and (myi - a number):
	let temp-ord be 0;
	let cur-idea be t-despairingly;
	let max-pod be 0;
	let myi2 be myi;
	repeat with QQ running through mack-ideas:
		if pod-num of QQ is myp:
			if pod-ord of QQ > max-pod:
				now max-pod is pod-ord of QQ;
	if myi2 > max-pod:
		say "[b]Cutting [myi2] to [max-pod] for pod [myp]:[r] ";
		now myi2 is max-pod;
	repeat with QQ running through mack-ideas:
		if pod-num of QQ is myp and pod-ord of QQ is myi2:
			if QQ is in frontage:
				say "Oops, placed [QQ] twice. [myp] [myi2].";
			now QQ is in frontage;
			say "[QQ] to frontage.";
			the rule succeeds;
	say "BUG: didn't get anything for pod [myp] index [myi2].";

carry out seeding: [100 = ordering macks, 200 = skip trefoil, 400 = skip frontage]
	let temp be 0;
	let G be Rodney;
	let found-yet be false;
	let act-index be the remainder after dividing number understood by 100;
	let seedflags be number understood / 100;
	if act-index > 8:
		say "[b]WARNING: this is probably out of range.[r][line break]";
	if act-index < 1:
		say "Need a positive act index.";
		the rule fails;
	if seedflags <= 4:
		if frontage is visited and macked-out > 0: [next, seed the macks in OTTERS]
			say "Skipping Frontage seeding because you already started wiping the macks out.";
		else:
			now all mack-ideas are off-stage;
			repeat with J running from 1 to max-pod-num:
				place-idea J and act-index;
			if seedflags is 0:
				assign-random-mack-priority;
			else:
				assign-fixed-mack-priority;
	if the remainder after dividing seedflags by 4 < 2:
		if Loftier Trefoil is visited and number of warriors in lalaland > 0: [first, seed the start of TOWERS]
			say "Skipping Trefoil seeding as you've already disposed of one warrior. Restart if you wish to re-seed.";
		else:
			if act-index > 5:
				say "Decreasing index to 5 for the Trefoil.";
				now act-index is 4;
			now all warriors are off-stage;
			repeat with J running from 1 to 7:
				place-warrior J and act-index;

chapter cap

[* CAP caps the # of entries in a random table. For testing.]

caping is an action applying to one number.

understand the command "cap" as something new.

understand "cap [number]" as caping.

carry out caping:
	if number understood > 1000 or number understood < 0:
		say "Reasonable number, please, 0-999." instead;
	say "Capping at [number understood].";
	repeat through table of megachatter:
		if number of rows in mytab entry < number understood:
			now maxidx entry is number of rows in mytab entry;
			if curidx entry >= maxidx entry:
				now curidx entry is 0;
		else:
			if maxidx entry > number understood:
				now maxidx entry is number understood;
			if curidx entry > number understood:
				now curidx entry is number understood;
	the rule succeeds;

chapter bsing

[* BS turns bugsquash on ]

bsing is an action out of world.

understand the command "bs" as something new.

understand "bs" as bsing.

carry out bsing:
	if bugsquash is false:
		say "Bailing on bugs now.";
		now bugsquash is true;
	else:
		say "Not bailing on bugs now.";
		now bugsquash is false;
	the rule succeeds;

chapter palling

[* PALL lets you see all the pad]

palling is an action out of world.

understand the command "pall" as something new.

understand "pall" as palling.

carry out palling:
	now player has pedanto-notepad;
	repeat through table of pad-stuff:
		now known entry is true;
	say "Pad is now fully stocked. Have fun.";

chapter gsing

[* GS switches your sex.]

gsing is an action out of world.

understand the command "gs" as something new.

understand "gs" as gsing.

carry out gsing:
	if player is male:
		choose-female;
	else:
		choose-male;
	say "Player is now [if player is female]fe[end if]male, and all associated NPCs['] genders have been swapped, too.";
	the rule succeeds;

chapter gzing

[* GZ zaps all the guardians.]

gzing is an action out of world.

understand the command "gz" as something new.

understand "gz" as gsing.

carry out gzing:
	repeat with myg running through guardians:
		now myg is in lalaland;
		increment cur-score of towers;
	now min-score of towers is 31;
	if strudel is reflexed:
		increment min-score of towers;
	if old ice is reflexed:
		increment min-score of towers;
	if sporties' ripostes are reflexed:
		increment min-score of towers;

chapter diing

[* DI regains your powers in Otters.]

diing is an action out of world.

understand the command "di" as something new.

understand "di" as diing.

carry out diing:
	if power-back is true:
		say "You're now inhibited.";
		now power-back is false;
	else:
		say "You're now uninhibited.";
		now power-back is true;
	the rule succeeds

chapter misseding

[* MISSED shows what this area missed, and in the strip you get an added bonus of alternate ways through]

misseding is an action out of world.

understand the command "missed" as something new.

understand "missed" as misseding.

carry out misseding:
	say "[miss-types].";
	now mrlp is solved;
	carry out the showing what the player missed activity;
	now mrlp is unsolved;
	the rule succeeds;

chapter missesing

[* MISSES shows what all areas missed]

missesing is an action out of world.

understand the command "misses" as something new.

understand "misses" as missesing.

carry out missesing:
	say "[miss-types].";
	show-miss mrlp and false;
	the rule succeeds;

chapter missalt

[* MISSALT shows alternate routes]

missalting is an action out of world.

understand the command "missalt" as something new.
understand the command "alt" as something new.

understand "missalt" as missalting.
understand "alt" as missalting.

carry out missalting:
	say "[miss-types].";
	carry out the showing alternate routes activity;
	the rule succeeds;

to say miss-types:
	say "MISSED = all regions['] misses.";
	say "MISSES = this region's misses.";
	say "MISSALT = show alternate routes";

chapter elving

[* what's everyone saying about Elvira?]

elving is an action out of world.

understand the command "elv" as something new.

understand "elv" as elving.

a person can be blah, elvonly, unelvy or elvy. a person is usually blah.

carry out elving:
	let elvies be true;
	repeat through table of subject-blather:
		if person-subj entry is Elvira:
			if him-who entry is unelvy:
				now him-who entry is elvy;
			if him-who entry is blah:
				now him-who entry is elvonly;
		else:
			if him-who entry is blah:
				now him-who entry is unelvy;
			else if him-who entry is elvonly:
				now him-who entry is elvy;
	repeat with PE running through unelvy people:
		say "[PE] has nothing to say about Elvira.";
		now elvies is true;
	if elvies is false:
		say "Everyone talks about Elvira.";
	say "Elvy people: [list of elvy people].";
	say "Blah people: [list of blah people].";
	say "Elvonly people: [list of elvonly people].";
	the rule succeeds.

chapter specsing

[* this tests the spec-help of all items in tables of anagrams]

to decide whether (ht - a thing) is spayshul:
	if ht is an xtrhelp listed in the table of spechelp, decide yes;
	decide no.

specsing is an action out of world.

understand the command "specs" as something new.

understand "specs" as specsing.

carry out specsing:
	let locidx be 0;
	let reg be means manse;
	repeat with QQ running through regions:
		if QQ is not demo dome:
			repeat through regana of mrlp:
				unless the-from entry is spayshul:
					increment locidx;
					say "[locidx]. [the-from entry] [QQ] ([right-word entry]) : [spec-help of the-from entry]";
	if locidx is 0:
		say "Yay! All things are clued.";
	the rule succeeds;

chapter scoing

[*this tracks score-debugging. There may be another way. But it tells you what increased when in the debug file.]

scoing is an action out of world.

understand the command "sco" as something new.

understand "sco" as scoing.

carry out scoing:
	if scotrack is false:
		now scotrack is true;
	else:
		now scotrack is false;
	the rule succeeds;

after fliptoing when scotrack is true (this is the score track debug rule):
	consider the score debug rule;
	continue the action;

scotrack is a truth state that varies.

every turn when scotrack is true (this is the score debug rule) :
	append "[mrlp] > [the player's command] [cur-score of mrlp] / [min-score of mrlp]-[poss-score of mrlp].[line break]" to the file of debuggery;

chapter skiing

[* this puts you near the other side of the water.]

skiing is an action out of world.

understand the command "ski" as something new.

understand "ski" as skiing.

carry out skiing:
	if mrlp is not towers:
		say "You need to be in Towers for this test command.";
	else:
		now all guardians are in lalaland;
		now agnostic is in actionless coastlines;
		now gizmo is in lalaland;
		now bot boat is in actionless coastlines;
		move player to actionless coastlines;
		ital-say "moving south or west from here will make the game kind of goofy. Also, the score is wrong, because this is a test command. You pretty much want to get on the bot-boat once the Coasting Agnostic creates it." instead;
	the rule succeeds;

chapter tkturbo

[* TAKE ALL is allowed & applies to scenery as well]

talling is an action out of world.

understand the command "tall" as something new.

understand "tall" as talling.

carry out talling:
	say "Now you can[if take-it is true]'t[end if] take all the things.";
	now take-it is whether or not take-it is false;
	the rule succeeds;

take-it is a truth state that varies.

check taking:
	if take-it is true:
		if noun is scenery:
			say "[noun]: Can't take scenery." instead;
		if noun is fixed in place:
			say "[noun]: Fixed in place." instead;
		if noun is a person:
			say "[noun]: Person." instead;

The can't take what's fixed in place rule is not listed in the check taking rulebook.
The can't take scenery rule is not listed in the check taking rulebook.

[The exclude scenery from take all rule is not listed in the for deciding whether all includes rulebook.
The exclude fixed in place things from take all rule is not listed in the for deciding whether all includes rulebook.
The exclude people from take all rule is not listed in the for deciding whether all includes rulebook.

Rule for deciding whether all includes scenery:
	if take-it is true, it does; [?? the rule fails]
	it does not;

Rule for deciding whether all includes people while taking:
	if take-it is true, it does;
	it does not;

Rule for deciding whether all includes fixed in place things while taking:
	if take-it is true, yes;
	it does not;]

chapter rfxing

[* sees all reflexive things ]
rfxing is an action out of world.

understand the command "rfx" as something new.

understand "rfx" as rfxing.

carry out rfxing:
	repeat with RF running through reflexive things:
		say "[RF] is reflexive.";
	the rule succeeds;

chapter repling

[* replaces guardians in TOWERS, otherwise, reject]

repling is an action out of world.

understand the command "repl" as something new.

understand "repl" as repling.

carry out repling:
	if mrlp is towers:
		now all red guardians are off-stage;
		now all blue guardians are off-stage;
		now atheists are off-stage;
		now the-hostile is off-stage;
		say "All red and blue guardians reinitialized.";
		reposition-guardians;
		the rule succeeds;
	say "Doesn't apply here.";

chapter vanscaning

[* scans vanity every move in troves]

vanscan is a truth state that varies.

vanscaning is an action out of world.

understand the command "vanscan" as something new.

understand "vanscan" as vanscaning.

carry out vanscaning:
	if vanscan is false:
		now vanscan is true;
	else:
		now vanscan is false;
	say "[if vanscan is true]Scanning vanity every move[else]No longer scanning each move[end if].";
	the rule succeeds;

every turn when vanscan is true:
	say "Results of scanning vanity:[line break]";
	try scaning vanity;

chapter coping

[* repositions guardians, sends you to Scope Copse]

coping is an action out of world.

understand the command "cop" as something new.

understand "cop" as coping.

carry out coping:
	move player to Scope Copse;
	reposition-guardians;
	the rule succeeds;

chapter eaing

[* this checks for all exits displayed]

eaing is an action out of world.

understand the command "ea" as something new.

understand "ea" as eaing.

exitall is a truth state that varies.

carry out eaing:
	if exitall is false:
		now exitall is true;
		say "Now tracking exits every move.";
	else:
		now exitall is false;
		say "Now not tracking exits every move.";
	the rule succeeds;

every turn when exitall is true:
	try exitsing;
	continue the action;

after fliptoing when exitall is true:
	try exitsing;
	continue the action;

chapter nuding

nuding is an action out of world.

understand the command "nud" as something new.

understand "nud" as nuding.

carry out nuding:
	let nudges be 0;
	let showit be false;
	repeat through regtab of mrlp:
		now showit is false;
		if there is a this-item entry and this-item entry is visible:
			now showit is true;
		if there is a this-room entry and player is in this-room entry:
			now showit is true;
		if there is a this-rule entry:
			follow the this-rule entry;
			if the rule succeeded:
				now showit is true;
		if showit is true:
			say "[this-cmd entry] can be nudged.";
			increment nudges;
	if nudges is 0, say "nothing oh dear that's wrong!";
	else say "total nudge(s) [nudges]"

chapter rejching

[* this checks for adequate rejects]

rejching is an action out of world.

understand the command "rejch" as something new.

understand "rejch" as rejching.

temp-reg is a region that varies.

carry out rejching:
	repeat with QQ running through regions:
		if QQ is not demo dome:
			now temp-reg is QQ;
			repeat through regana of QQ:
				rej-analyze the-from entry;

to rej-analyze (x - a thing):
	choose row with the-from of x in regana of temp-reg;
	let y be the-to entry;
	unless x is an xtrhelp listed in table of spechelp:
		say "Whoops, [x] could also be in table of spechelp, to [y].";
	unless x is a specdone listed in table of donereject:
		if x is reflexive:
			say "Strong possibility: [x] could also be in table of donereject, to [y].";
		else if x is not vanishing:
			say "Weak possibility: [x] could also be in table of donereject, to [y].";

chapter deprefing

[ * removes all prefiguring, for testing purposes]
deprefing is an action out of world.

understand the command "depref" as something new.

understand "depref" as deprefing.

carry out deprefing:
	if number of not unfigured things is 0:
		say "Nothing is prefigured.";
	else:
		say "De-prefiguring [list of prefigured things].";
		now all prefigured things are unfigured;
	the rule succeeds;

chapter srqing

[ * solve region quick ]

srqing is an action out of world.

understand the command "srq" as something new.

understand "srq" as srqing.

carry out srqing:
	if mrlp is stores:
		say "Need to do stores manually." instead;
	if mrlp is demo dome:
		say "Unsolvable." instead;
	if mrlp is otters:
		now otters is solved;
		end the story finally saying "A MONSTER ROTS. AMEN.";
		follow the shutdown rules instead;
	if mrlp is others:
		end the story finally saying "A Giddy Route: You Did Great";
		follow the shutdown rules instead;
	solve-region mrlp;
	the rule succeeds;

chapter twiding

[* this lets the user twiddle a table early on to see how it roughly looks. It does not place it in context. ]

twiding is an action out of world applying to one number.

twid0ing is an action out of world.

understand the command "twid" as something new.

understand "twid" as twid0ing.

understand "twid [number]" as twiding.

cur-twid is a number that varies. cur-twid is usually 1.

carry out twid0ing:
	repeat with tempnum running from cur-twid + 1 to number of rows in table of megachatter:
		choose row tempnum in table of megachatter;
		if go-ahead entry is bzzt rule and reps entry > 1:
			now cur-twid is tempnum;
			try twiding tempnum instead;
	now cur-twid is 40;
	try twiding 40 instead;

carry out twiding:
	let chatrow be number of rows in table of megachatter;
	if number understood > chatrow:
		say "Number must be 1-[chatrow]." instead;
	if debug-state is true:
		say "(Turning debug state off)";
		now debug-state is false;
	choose row number understood in table of megachatter;
	if go-ahead entry is not bzzt rule:
		say "That does not follow the BZZT rule. Try one of [list-of-randos]." instead;
	let temp-tab be mytab entry;
	say "[twiddle of temp-tab and 3]";
	the rule succeeds;

to say list-of-randos:
	let comma-yet be false;
	repeat with XX running from 1 to number of rows in table of megachatter:
		choose row XX in table of megachatter;
		if go-ahead entry is bzzt rule and reps entry > 1:
			say " [if comma-yet is true],[end if][XX]";
			now comma-yet is true;

chapter showtabing

[ * showtab shows the random tables we are choosing ]

showtabing is an action out of world.

understand the command "showtab" as something new.

understand "showtab" as showtabing.
understand "showtaby" as showtabing when showtabname is false.
understand "showtabn" as showtabing when showtabname is true.

carry out showtabing:
	now showtabname is whether or not showtabname is false;
	say "Showing table names in random text is now [on-off of showtabname].";
	the rule succeeds;

volume spare ideas

[when play begins:
	let temptext be indexed text;
	repeat with Z running through things:
		if b-text of Z is not "":
			if b is not flippable:
				now b is auxiliary;
			if a-text of Z is "":
				now temptext is "[b-text of Z]";
				replace the text "G" in temptext with "Y";
				replace the text "P" in temptext with "R";
				change b-text of Z to "[temptext]";
				say "[Z]: [b-text of Z] -> [temptext].";]