"A Roiling Original" by Andrew Schultz

volume browsing and building notes

[This initial section is to try and organize the source code. Of course, with 1.5million+ bytes of source, it's sort of tough to figure where to start. I can't promise that my code is super-readable, but I hope you find it interesting. It's been vetted all the way through, once.

Your favorite goofy random tables are in Roiling Random Text.i7x.
The tables that control a lot of flips and cluing are in Roiling Tables.i7x.
The tables of nudges (nothing that progresses the game, just hints) are in Roiling Nudges.i7x.
There are other tables in Roiling Tables.i7x. They include the hint table, the main anagram tables, specific help, and rejects for finished items.
The mistakes are in Roiling Mistakes.i7x.

To search for whatever tables you want, use ^blurb with a regular-expression search for editors that allow them, such as notepad++ in Windows, which is well worth a download for other reasons. You can also search for (bracket) then xx(first letter) with g = general (for example, blank command/wait responses) or m=manse (for example, comedians Report Porter Perrot mentions) or v = gritty dialogue, and so forth. XX alone is a (poorly-named) variable in some places, but searching with the bracket and then XX will cover everything.

The new Inform IDE may allow you to search this way, too. For A Roiling Original, I stuck with 6G60. I had enough changes to deal with.

Most large table files are in the tables section. They are broken up by region. This isn't the most efficient way to do things. These days, I'd introduce the text as a property. For instance, a thing has a thing called a hint-funnel. The hint-funnel of a thing is itself. a thing has text called hint-text.

TRIX = what I think are nice tricks that may be somewhere near the back of the Inform IDE documentation. They're largely for my edification.

Rooms are divided into books, with each volume being a region.]

[Build this at your own risk. I think you'll get the general idea, but really, it takes 30-45 seconds to build. Plus you may need special versions of certain modules. They can be found at

Glulx Text Effects.i7x
Flexible Windows.i7x

Are the two modified, and there may be a problem with naming Flexible Windows.i7x / Glulx Text Effects.i7x and a 'new' version. So if Inform says there are 2 of one table, you may be reading Glulx Text Effects.i7x and Glulx Text Effects - New.i7x. This is mostly my laziness. But until then I want this caveat in.

]

volume globals and initializers

chapter general includes and notes

include Reactable Quips by Michael Martin.

include Quip-based Conversation by Michael Martin. [his extensions must be listed in this order]

include Glimmr Drawing Commands by Erik Temple.

include Glimmr Bitmap Font by Erik Temple.

include undo output control by Erik Temple.

include conditional undo by Jesse McGrew.

include Bypass Disambiguation by Climbing Stars.

include Large Game Speedup by Andrew Plotkin.

include Bold Final Question Rows by Andrew Schultz.

the story headline is "(or ailing) Squeeal! A Sequel!"

the story description is "Dear, Lo! Ordeal reload!"

use authorial modesty.

release along with cover art.

the release number is 4.

[for the purposes of amusement, I'd like to list the release updates.
--Gasp! Rude Upgrades!]

chapter game specific includes

include Intro Restore Skip by Andrew Schultz.

include Roiling Random Text by Andrew Schultz.

include Roiling Nudges by Andrew Schultz.

include Roiling Mistakes by Andrew Schultz.

include Roiling Tables by Andrew Schultz.

include Rules-Based Testing by Andrew Schultz.

include STS Common by Andrew Schultz.

include First Word Retry by Andrew Schultz.

bore-check of a thing is usually bore-eat-check rule.

this is the bore-eat-check rule:
	unless mrlp is others, continue the action;
	if noun is a fruit, try eating the noun;

section game specific testing includes - not for release

include Roiling Tests by Andrew Schultz. [must come after rules-based testing]

include STS tests by Andrew Schultz.

section beta testing - not for release

include Roiling Beta Testing by Andrew Schultz.

section undefine DEBUG

understand the command "debug" as something new.

chapter region specs

a region has a number called turns-spent. turns-spent of a region is usually -6. a region has a number called last-hint-turns. last-hint-turns of a region is usually 0. [15 moves til first spoiler nag, then 10 after each.]

a region can be unspoiled or spoiled. a region is usually unspoiled.

a region can be parsewrned. a region is usually not parsewrned.

a region has a table name called hintobjstable.

a region has a table name called scannotes.

a region has a table name called attack-table.

a region has a table name called hint-done-note table.

a region has a table name called matched item responses table.

a region has a table name called unmatched topic responses table.

a region has a table name called ask x about x table.

a region has a table name called readable table.

a region has a list of things called item-list.

a region has a list of things called listen-list.

a region has a list of things called smell-list.

a region has a table name called nowhere-table.

a region has a table name called done reject table.

a region has a table name called preeftable.

a region has a rule called loc-scan-rule.

a region has a rule called listen-rule.

a region has a rule called sleep-rule.

a region has a rule called smell-rule.

a region has a rule called swear-rule.

a region has a rule called randomization rule.

a region has a rule called misses-rule.

a region has a rule called altroutes.

a region has a rule called parse-rule.

a region can be miss-point-warned. a region is usually not miss-point-warned.

a region has text called warn-left-text.

chapter region definition

[some definitions of region properties below may be in brackets. This is intentional. I want them to be placekeepers on the off-chance I add something.]

Ordeal Reload is an unsolved region. regnud of Ordeal Reload is table of Ordeal Reload nudges. regana of Ordeal Reload is table of Ordeal Reload anagrams. reg-hint-rule of Ordeal Reload is ordeal-reload-hinting rule. goto-check of Ordeal Reload is goto-ordeal-reload rule. max-score of Ordeal Reload is 15. min-score of Ordeal Reload is 8. listen-rule of ordeal reload is listen-ordeal-reload rule. smell-rule of ordeal reload is smell-ordeal-reload rule. sleep-rule of ordeal reload is sleep-ordeal-reload rule. swear-rule of ordeal reload is swear-ordeal-reload rule. spechelp of ordeal reload is table of ordeal reload spechelp. scannotes of ordeal reload is table of ordeal reload scannotes. attack-table of ordeal reload is table of ordeal reload attacks. [loc-scan-rule of ordeal reload is scan-ordeal reload-loc rule.] [hint-done-note table of ordeal reload is table of ordeal reload hint request rejects.] nowhere-table of ordeal reload is table of ordeal reload nowheres. done reject table of ordeal reload is table of ordeal reload done rejects. [randomization rule of ordeal reload is randomize-ordeal-reload rule.] hintobjstable of ordeal reload is table of ordeal reload hintobjs. matched item responses table of ordeal reload is table of ordeal reload matched item responses. readable table of ordeal reload is table of ordeal reload readables. unmatched topic responses table of ordeal reload is table of ordeal reload unmatched topic responses. ask x about x table of ordeal reload is table of ordeal reload ask x about x. misses-rule of ordeal reload is ordeal-reload-misses rule. preeftable of ordeal reload is table of ordeal reload prefigurings. altroutes of Ordeal Reload is the ordeal-reload-alt rule. parse-rule of ordeal reload is ordeal-reload-parse rule.
[BONUS STUFF (note: we assume the player goes BASEMENT here to spell out more possibilities)
1/9=giant pin
2/10=stable
3/11=stair from stria/sitar (stable/stair = another way down)
4/12=chimney
5/13=ramp (ramp/chimney = another way down)
6/14=snib
7/15=scepter]
[non-anagram = staple apertured departure]
[1+1 for basement]

last-loc of Ordeal Reload is Dusty Study. [needed for GT command]

[PTS below lists what points you still may get]

Stores is an unsolved spoiled region. regnud of Stores is table of Stores nudges. regana of Stores is table of stores anagrams. reg-hint-rule of stores is stores-hinting rule. goto-check of stores is goto-stores rule. max-score of stores is 11. min-score of Stores is 3. listen-rule of stores is listen-stores rule. smell-rule of stores is smell-stores rule. sleep-rule of stores is sleep-stores rule. swear-rule of stores is swear-stores rule. spechelp of stores is table of stores spechelp. scannotes of stores is table of stores scannotes. attack-table of stores is table of stores attacks. [loc-scan-rule of stores is scan-stores-loc rule.] [hint-done-note table of stores is table of stores hint request rejects.] nowhere-table of stores is table of stores nowheres. done reject table of stores is table of stores done rejects. [randomization rule of stores is randomize-stores rule.] hintobjstable of stores is table of stores hintobjs. matched item responses table of stores is table of stores matched item responses. readable table of stores is table of stores readables. unmatched topic responses table of stores is table of stores unmatched topic responses. ask x about x table of stores is table of stores ask x about x. misses-rule of stores is stores-misses rule. [preeftable of stores is table of stores prefigurings.] parse-rule of stores is stores-parse rule.
[LLP List:
1/4=Store K
2/5=Store N
3/6=OUTSIDE (unavoidable if you enter mangiest steaming)
6/9=3 of Store V, Store U, Store P, Store Y, Store W, without patcher=6/9 +3
7/10=Store B=Sorbet
8/11=Store H=Others (you can get the point but you can't enter until you beat Elvira)]

Troves is an unsolved region. regnud of Troves is table of troves nudges. regana of Troves is table of troves anagrams. reg-hint-rule of Troves is troves-hinting rule. goto-check of Troves is goto-troves rule. max-score of Troves is 30. min-score of Troves is 17. listen-rule of troves is listen-troves rule. smell-rule of troves is smell-troves rule. sleep-rule of troves is sleep-troves rule. swear-rule of troves is swear-troves rule. spechelp of troves is table of troves spechelp. scannotes of troves is table of troves scannotes. attack-table of troves is table of troves attacks. loc-scan-rule of troves is scan-troves-loc rule. hint-done-note table of troves is table of troves hint request rejects. nowhere-table of troves is table of troves nowheres. done reject table of troves is table of troves done rejects. randomization rule of troves is randomize-troves rule. hintobjstable of troves is table of troves hintobjs. matched item responses table of troves is table of troves matched item responses. readable table of troves is table of troves readables. unmatched topic responses table of troves is table of troves unmatched topic responses. ask x about x table of troves is table of troves ask x about x. misses-rule of troves is troves-misses rule. preeftable of troves is table of troves prefigurings. altroutes of troves is the troves-alt rule. parse-rule of troves is troves-parse rule.
[LLP list:
1/18=Pa Egg Pea
2/19=tears taser
3/20=mussier misuser
4/21=A Sty: Tasty, Say
5/22=both of evil bee or SNORE SO ARENA
6/23=lager
7/24=pleaser leapers
8/25=both of BORTLES lobster/ME ARTS stream,
9/26=DIVORCES
10/27=both of Trevis Vister/praise
11/28=Sectarian Craniates
12/29=both of Sister Tressi/Marble Blamer Balmer-Mr Beal
13/30=Creationism Reactionism
]

Routes is an unsolved region. regnud of Routes is table of routes nudges. regana of Routes is table of routes anagrams. reg-hint-rule of Routes is routes-hinting rule. goto-check of Routes is goto-routes rule. max-score of Routes is 22. min-score of Routes is 20. listen-rule of routes is listen-routes rule. smell-rule of routes is smell-routes rule. sleep-rule of routes is sleep-routes rule. swear-rule of routes is swear-routes rule. spechelp of routes is table of routes spechelp. scannotes of routes is table of routes scannotes. attack-table of routes is table of routes attacks. loc-scan-rule of routes is scan-routes-loc rule. hint-done-note table of routes is table of routes hint request rejects. nowhere-table of routes is table of routes nowheres. done reject table of routes is table of routes done rejects. [randomization rule of routes is randomize-routes rule.] hintobjstable of routes is table of routes hintobjs. matched item responses table of routes is table of routes matched item responses. readable table of routes is table of routes readables. unmatched topic responses table of routes is table of routes unmatched topic responses. ask x about x table of routes is table of routes ask x about x. misses-rule of routes is routes-misses rule. preeftable of routes is table of routes prefigurings. altroutes of routes is the routes-alt rule. parse-rule of routes is routes-parse rule.
[LLP list:
1/21=worst ad in Same Mesa
2/22=without in Sonancy Canyons
]

Presto is an unsolved region. regnud of Presto is table of presto nudges. regana of Presto is table of presto anagrams. reg-hint-rule of Presto is presto-hinting rule. goto-check of Presto is goto-presto rule. max-score of presto is 41. min-score of presto is 28. listen-rule of presto is listen-presto rule. smell-rule of presto is smell-presto rule. sleep-rule of presto is sleep-presto rule. swear-rule of presto is swear-presto rule. spechelp of presto is table of presto spechelp. scannotes of presto is table of presto scannotes. attack-table of presto is table of presto attacks. loc-scan-rule of presto is scan-presto-loc rule. hint-done-note table of presto is table of presto hint request rejects. nowhere-table of presto is table of presto nowheres. done reject table of presto is table of presto done rejects. randomization rule of presto is randomize-presto rule. hintobjstable of presto is table of presto hintobjs. matched item responses table of presto is table of presto matched item responses. readable table of presto is table of presto readables. unmatched topic responses table of presto is table of presto unmatched topic responses. ask x about x table of presto is table of presto ask x about x. misses-rule of presto is presto-misses rule. preeftable of presto is table of presto prefigurings. altroutes of presto is the presto-alt rule. parse-rule of presto is presto-parse rule.
[LLP list:
1/29=lamb
2/30=ye hoop vs hoop
3/31=odes song
4/32=sport ports
6/34=Mazel Tov unhinted vs Won't
7/35=hawt thaw
8/36=starch charts
9/37=drive a
10/38=drive e
11/39=TBA key
12/40=ROM stick
13/41=escaroles
NON ANAGRAM: 4 total
1 for however you get rid of the yak
1+1 for ye hoop
1+2 for Mazel Tov unclued
]

Oyster is an unsolved region. regnud of Oyster is table of oyster nudges. regana of Oyster is table of oyster anagrams. reg-hint-rule of Oyster is oyster-hinting rule. goto-check of Oyster is goto-oyster rule. max-score of oyster is 45. min-score of oyster is 29. listen-rule of oyster is listen-oyster rule. smell-rule of oyster is smell-oyster rule. sleep-rule of oyster is sleep-oyster rule. swear-rule of oyster is swear-oyster rule. spechelp of oyster is table of oyster spechelp. scannotes of oyster is table of oyster scannotes. attack-table of oyster is table of oyster attacks. loc-scan-rule of oyster is scan-oyster-loc rule. hint-done-note table of oyster is table of oyster hint request rejects. nowhere-table of oyster is table of oyster nowheres. done reject table of oyster is table of oyster done rejects. randomization rule of oyster is randomize-oyster rule. hintobjstable of oyster is table of oyster hintobjs. matched item responses table of oyster is table of oyster matched item responses. readable table of oyster is table of oyster readables. unmatched topic responses table of oyster is table of oyster unmatched topic responses. ask x about x table of oyster is table of oyster ask x about x. misses-rule of oyster is oyster-misses rule. preeftable of oyster is table of oyster prefigurings. altroutes of oyster is the oyster-alt rule. parse-rule of oyster is oyster-parse rule.
[LLP list:
There are actually 31 points overall if you don't use the pills. You can "lose" 3 by using the pills before you've scored a point.
1/32=SLANDER snarled darnels
2/33=scan cans
3/34=tend dent
4/35=SPLAIN in the plains
5/36=shape heaps
6/37=swipe wipes (start side quest)
7/38=sweat (over waste)
8/39=clean lance
9/40=trample templar ramplet
10/41=REANGLE the gleaner
11/42=PSALM in the Plasm Lamps
12/43=TAN ant (not optional once in Plasm Lamps)
13/44=REVEL by the lever
Special spill rules:
you get -3 if you use the pills right away in the shop.
you get -1 if you use the pills on Tortu before EAT.
NON ANAGRAM: +1 ASK SAUSAGE ABOUT RUBY and go to the Rascal Craals
]

Towers is an unsolved region. regnud of Towers is table of towers nudges. regana of towers is table of towers anagrams. reg-hint-rule of Towers is towers-hinting rule. goto-check of Towers is goto-towers rule. max-score of towers is 57. min-score of towers is 26. listen-rule of towers is listen-towers rule. smell-rule of towers is smell-towers rule. sleep-rule of towers is sleep-towers rule. swear-rule of towers is swear-towers rule. spechelp of towers is table of towers spechelp. scannotes of towers is table of towers scannotes. attack-table of towers is table of towers attacks. [loc-scan-rule of towers is scan-towers-loc rule.] hint-done-note table of towers is table of towers hint request rejects. nowhere-table of towers is table of towers nowheres. done reject table of towers is table of towers done rejects. randomization rule of towers is randomize-towers rule. hintobjstable of towers is table of towers hintobjs. matched item responses table of towers is table of towers matched item responses. readable table of towers is table of towers readables. unmatched topic responses table of towers is table of towers unmatched topic responses. ask x about x table of towers is table of towers ask x about x. misses-rule of towers is towers-misses rule. preeftable of towers is table of towers prefigurings. altroutes of towers is the towers-alt rule. parse-rule of towers is towers-parse rule.
[Necessary points:
4=4 for minimum picaros to leave Trefoil
1=5 for dreads adders
7=12 for the minimum number of other guardians you need to dispel to get through the map
1=13 for subtler (see diverse deviser)
1=14 for mardier admirer (see the duck)
2=16 for bonker & stinger (get to Obscurest Subsector)
1=17 for weeds
2=19 for Dr Yow's two voices
1=20 for lone duck
1=21 for READING A DINGER/grained
1=22 for diverse deviser
1=23 for using the ragged dagger on the diverse deviser NON-ANAGRAM
2=25 for a bot boat
1=26 for the palace]
[LLP list:
3=3 for the extra picaros
1=4 for the recital article
5=9 for the H/I beyond needing to clear the coastlines
2=11 for the ingrates/natives to get to the edge
1=12 for the yurts
1=13 for the mended mini denim
1=14 for escaping Dire and Arid Den
1=15 for sporties' ripostes
1=16 for old ice
1=17 for keycar wherever it appears
1=18 for making the replay player shiny
1=19 for Dourest Detours
1=20 for seismal samiels in Dourest Detours
1=21 for strudel (Fringe Finger)
1=22 for organised ego drains (Lost Lots)
1=23 for tentative (agnostic meets dr yow)
1=24 for rewired (bot-boat)
1=25 for giving Tetris Sitter the top opt pot NON-ANAGRAM
5=30 for unripe ur-pine/serpent/antsier/triste/annoyed in Mislit Limits/Mesprise Premises
1=31 for not using x-ray vision to clear every guardian]
[towers-min-adj must be changed if we fix something beyond Mislit Limits]
[NON-ANAGRAM 3 total
1=no-cheat bonus
1=put dagger in deviser
1=give pot to sitter
]

Otters is an unsolved region. regnud of Otters is table of otters nudges. regana of Otters is table of otters anagrams. reg-hint-rule of otters is otters-hinting rule. goto-check of Otters is goto-Otters rule. max-score of otters is 37. min-score of otters is 25. listen-rule of otters is listen-otters rule. smell-rule of otters is smell-otters rule. sleep-rule of otters is sleep-otters rule. swear-rule of otters is swear-otters rule. spechelp of otters is table of otters spechelp. scannotes of otters is table of otters scannotes. attack-table of otters is table of otters attacks. loc-scan-rule of otters is scan-otters-loc rule. hint-done-note table of otters is table of otters hint request rejects. nowhere-table of otters is table of otters nowheres. done reject table of otters is table of otters done rejects. randomization rule of otters is randomize-otters rule. hintobjstable of otters is table of otters hintobjs. matched item responses table of otters is table of otters matched item responses. readable table of otters is table of otters readables. unmatched topic responses table of otters is table of otters unmatched topic responses. ask x about x table of otters is table of otters ask x about x. misses-rule of otters is otters-misses rule. preeftable of otters is table of otters prefigurings. altroutes of otters is the otters-alt rule. parse-rule of otters is otters-parse rule.
[LLP list:
1=26 for RESCIND
2=27 for ACTUALLY
4=29 (+2) for both of BECAUSE/ELSE or ALTHOUGH/ERGO (second power-back)
5=30 HOWEVER post Bran Barn
6=31 UNLESS post Loop Pool
7=32 for all Lamer Realm animals
8=33 for all Uprates Pasture animals
9=34 for BASICALLY back at Brunt, post-animal help
10=35 for SABLE at the blase bales after all animals are helped
11=36 for ASIDE around Elmer/Merle
12=37 for HONESTLY after ASIDE
NON ANAGRAM: +1 PLAY WHISTLE
]

Others is a frivolous region. regnud of Others is table of others nudges. regana of Others is table of others anagrams. reg-hint-rule of others is others-hinting rule. goto-check of Others is goto-Others rule. max-score of Others is 47. min-score of others is 25. listen-rule of others is listen-others rule. smell-rule of others is smell-others rule. sleep-rule of others is sleep-others rule. swear-rule of others is swear-others rule. spechelp of others is table of others spechelp. scannotes of others is table of others scannotes. attack-table of others is table of others attacks. loc-scan-rule of others is scan-others-loc rule. [hint-done-note table of others is table of others hint request rejects.] nowhere-table of others is table of others nowheres. done reject table of others is table of others done rejects. randomization rule of others is randomize-others rule. hintobjstable of others is table of others hintobjs. matched item responses table of others is table of others matched item responses. readable table of others is table of others readables. unmatched topic responses table of others is table of others unmatched topic responses. ask x about x table of others is table of others ask x about x. misses-rule of others is others-misses rule. [preeftable of others is table of others prefigurings.] altroutes of others is the others-alt rule. parse-rule of others is others-parse rule.
[There are so many possibilities for a minimum solution--about 39 choose 20, or 68.9 billion--I won't go through them all. Well, technically, take away 10c3*29c17 + 10c2*29c18 + 10c1*29c19 + 10c0*29c20 to get 68.4 billion. You need 4 of the 10 fruits in Rustic Citrus to get going.
only need 20 fruits. Best score is # of fruits (39) + compass + icons/sonic + passport x 2 +1 for not using arugula. FRUI checks what fruit is where.
8 non fruit points, so max - 8 = total
1 = compass (anagram)
2 = sonic icons (anagram)
1 = put coin in slot (non anagram)
2 = passport (anagram)
1 = bonus for not using arugula (non anagram)
1 = sonic icons LLP (anagram)
NON-ANAGRAM=+2, for no arugula (optional) + put coin in slot (always)
]

Demo Dome is a frivolous region. regnud of Demo Dome is table of demo dome nudges. reg-hint-rule of Demo Dome is demo-dome-hinting rule. goto-check of Demo Dome is goto-demo-dome rule. listen-rule of demo dome is listen-demo-dome rule. smell-rule of demo dome is smell-demo-dome rule. sleep-rule of demo dome is sleep-demo-dome rule. swear-rule of demo dome is swear-demo-dome rule. [spechelp of demo dome is table of demo dome spechelp.] [scannotes of demo dome is table of demo dome scannotes.] [attack-table of demo dome is table of demo dome attacks.] [loc-scan-rule of demo dome is scan-demo dome-loc rule.] [hint-done-note table of demo dome is table of demo dome hint request rejects.] [nowhere-table of demo dome is table of demo dome nowheres.] [done reject table of demo dome is table of demo dome done rejects.] randomization rule of demo dome is randomize-demo-dome rule. hintobjstable of demo dome is table of demo dome hintobjs. [matched item responses table of demo dome is table of demo dome matched item responses.] [readable table of demo dome is table of demo dome readables.] [unmatched topic responses table of demo dome is table of demo dome unmatched topic responses.] [ask x about x table of demo dome is table of demo dome ask x about x.] [misses-rule of demo dome is demo dome-misses rule.] [preeftable of demo dome is table of demo dome prefigurings.] parse-rule of demo dome is demo-dome-parse rule.

Otters is not autosavable. Others is not autosavable.

section region stuff for STS Common

orig-region is Ordeal Reload.

hub-region is Stores.

chapter rooms

a sideroom is a kind of room.

a sideroom has text called missed-text.

a room can be stairy. a room is usually not stairy.

a room can be outie or innie. a room is usually outie. [innie has WALL/WALLS for anagrams]

chapter things

a thing has a region called lreg. lreg of a thing is usually Ordeal Reload.

a thing can be reflexive, reflexed, vanishing, or nonreflexive. a thing is usually nonreflexive.

a thing can be ssok, ssno, ssblur or ssclear. a thing is usually ssok.

a thing can be unspoilable, any-spoilable, or parse-spoilable.

to decide whether (n - a thing) is spoilable-now:
	if n is any-spoilable, decide yes;
	if parse-now is true and n is parse-spoilable, yes;
	decide no.

[the classification for this is pretty arbitrary, but basically: any-spoilable = 3 letter words, cheat-spoilable = if there are <=6 possibilities, and my script to decide if something's parse-spoilable does basic logic elimination and if only two letters are left, it's parse-spoilable.]

a thing can be attempted. a thing is usually not attempted.

a thing can be prefigured or unfigured. a thing is usually unfigured.

a thing can be uncheated, cheatitemed, or cheathinted. a thing is usually uncheated.

a thing has text called a-text. a thing has text called b-text. a thing has text called parse-text.

a thing can be warpable. a thing is usually not warpable.

a thing can be flippable, auxiliary or uncluing or clue-used. a thing is usually uncluing.

a thing can be rayed. a thing is usually not rayed.

definition: a thing (called xx) is fungible:
	if xx is held, yes;
	if xx is palm and xx is in Dusty Study, yes; [you'd think this would qualify as touchable, but it doesn't]
	if xx is enclosed by location of player, yes;
	if xx is a backdrop and xx is in location of player, yes;
	no.

a thing can be spacy. a thing is usually not spacy.

a thing can be hinthelpy. a thing is usually not hinthelpy.

a thing can be score-once. a thing is usually not score-once.

chapter people

a person can be talkative or terse. a person is usually talkative.

a person can be terse-warned. a person is usually not terse-warned.

a person has a person called the chum. [a chum is someone whom they imitate in dialogue. For instance, Rand's chum is Leo. All picaros' chums are Andres. And so on. If A is B's chum, B should NOT be A's chum. This may cause an infinite loop of chumminess.]

chapter directions

Direction viability is a direction based rulebook.

definition: a direction (called dir) is viable:
	follow the direction viability rules for dir;
	if the rule succeeded, yes;
	if the rule failed, no;
	unless the room dir from location of player is nothing, yes; [this is the main one. If a room's there, go]
	decide no;

[ note: below, the rules will fail if we use the words noun, yes or no. Use dir and "the rule succeeds/fails." ]

a direction viability rule for a direction (called dir) when mrlp is ordeal reload:
	if player is in Framing Farming and dir is outside, the rule fails;
	if player is in Largely All Grey Gallery and dir is inside, the rule succeeds;
	if player is in Carven Cavern and dir is inside and stapler is moot, the rule succeeds;

a direction viability rule for a direction (called dir) when mrlp is presto:
	if player is in Saps Pass and dir is north and hogs are touchable, the rule fails;
	if player is in Unwary Runway and dir is north, the rule succeeds;
	if player is in Char Arch and yak is moot and dir is south, the rule fails;
	if player is in Hacks Shack and dir is south and robot is reflexed, the rule fails;

a direction viability rule for a direction (called dir) when mrlp is oyster:
	if player is in Lapsin Plains and dir is inside and span pans are in Lapsin Plains, the rule fails;
	if player is in Sclerous Closures and dir is north and sandier sardine is in Sclerous Closures, the rule fails;
	if player is in Horned Hedron and dir is inside and pol art portal is in Hedron, the rule succeeds;

a direction viability rule for a direction (called dir) when mrlp is towers:
	repeat with GU running through touchable guardians:
		if dir is guadir of GU and location of player is gualoc of GU, the rule fails;
		if location of player is the room (guadir of GU) of (gualoc of GU):
			if dir is opposite of guadir of GU, the rule fails;
	if player is in Mislit Limits and serpent is in Mislit Limits and dir is west, the rule fails;

a direction viability rule for a direction (called dir) when mrlp is otters:
	if player is in Minded Midden and barley is not moot, the rule fails;
	if player is in Minded Midden and Ed Riley is in Minded Midden and dir is west, the rule fails;
	if player is in Disowned Downside and dir is west and pen o nope is not moot, the rule fails;
	if player is in Reclusion Inclosure and merle is in Reclusion Inclosure and dir is west, the rule fails;

a direction viability rule for a direction (called dir) when mrlp is others:
	if player is in Rustic Citrus and compass is off-stage and dir is north, the rule fails;
	if player is in Gates Stage and dir is north:
		if gates-score is 2, the rule succeeds;
		the rule fails;

a direction viability rule for a direction (called dir) when mrlp is demo dome:
	if player is in peek keep and dir is south, the rule succeeds;

chapter action

To decide whether the current action is no-timely: (- meta -)

xring is an action applying to one thing. [this is a test command but we need it in release to label it as "procedural"]

to decide whether the action is procedural: [aip]
	if the current action is no-timely, yes;
	if fliptoing, yes; [game progress verbs]
	if scaning, yes; [hint verbs]
	if sbing, yes;
	if ss0ing, yes;
	if ssing, yes;
	if scanlasting, yes;
	if objhinting, yes;
	if taking inventory, yes;
	if dropping, yes;
	if objasking about, yes; [talking, because this often fails]
	if asking about, yes;
	if objasking generically, yes;
	if asking generically, yes;
	if talking to, yes;
	if xraying, yes; [cheat verbs]
	if discerning, yes;
	if guruing, yes;
	if gxing, yes;
	if swearing obscenely, yes; [silly verbs]
	if swearing mildly, yes;
	if saying yes, yes;
	if saying no, yes;
	if reading, yes; [senses]
	if examining, yes;
	if looking, yes;
	if attacking, yes;
	if smelling, yes;
	if listening, yes;
	if xabing, yes;
	if qbc_litany is table of no conversation: [we can goto something boring with no problen]
		if gotoing, yes;
		if gotothinging, yes;
	if xring, yes; [this is a debug command]
	no;

chapter rules orderings

the map outside to directions if possible rule is listed first in the check going rules.

the horbert-bye rule is listed before the map outside to directions if possible rule in the check going rules.

chapter portals

a portal has a number called diffic.

a portal can be maingame. a portal is usually maingame.

a portal can be lumpable. a portal is usually lumpable.

a portal can be checkedoff or available. a portal is usually available.

definition: a portal is slick if its diffic is 11 or less.

for writing a paragraph about a touchable lumpable never-entered portal (called ptl) :
	if number of touchable lumpable never-entered portals is 0, continue the action;
	say "You have [if number of touchable never-entered portals > 1]new places[else]a new place[end if] to explore![paragraph break]";
	repeat with Q running through touchable lumpable never-entered portals:
		 say "[initial appearance of Q] ";
	say "[paragraph break]";
	now all touchable lumpable portals are mentioned;
	continue the action;

to say fill-in-here: say "!!!!!!" [this is just so I can compile and concentrate on other things]

chapter guardians

a guardian is a kind of person. a guardian is usually vanishing. a guardian can be passtried. a guardian is usually not passtried. a guardian can be clueneedy. a guardian is usually not clueneedy. a guardian can be unprodded or prodded. a guardian is usually unprodded. a guardian can be plurtry. a guardian is usually not plurtry.

a guardian has a person called other-g. The other-g of a guardian is usually the dreads adders.

a guardian can be prevseen. a guardian is usually not prevseen. a guardian can be prevtaunt. a guardian is usually not prevtaunt.

a guardian has text called retrytext.

a guardian has a room called gualoc.

a guardian has a direction called guadir.

a guardian has text called block-text.
a guardian has text called clue-text.
a guardian has text called taunt-text.

to decide which thing is aux-item of (gu - a guardian):
	if gu is lars eede or gu is elsa erde, decide on Reeds Ale;
	decide on letters settler.

a guardian can be grey, blue, red, white or purple. a guardian is usually purple. [blue guardians are one minimal path. red are another. white = unnecessary, purple = necessary. Color blends! Also, grey is for Lars Eede/Elsa Erde.]

check objasking a guardian about a guardian (this is the guardian general chat rule):
	if noun is serpent, continue the action;
	if noun is curst palace, say "Nobody will ever rebuild it, but we still have to prevent others from doing so. For their own safety." instead;
	if noun is Elvira, say "Well, her choice to send [if noun is plural-named]us[else]me[end if] and be [if noun is plural-named]ourselves[else]me[end if]." instead;
	if noun is second noun, continue the action;
	if second noun is touchable:
		say "Nothing. Guess the guardians aren't going to rat on each other." instead;
	if second noun is moot, say "Threats or reminiscing won't get you anywhere." instead;
	say "Your grilling runs up against plausible deniability. Who? What? Where?" instead;

the specification of guardian is "A person that blocks your way through the towers area until described correctly."

after doing something with a guardian (this is the set guardian pronouns rule):
	if noun is organised or noun is hostile is he lot:
		set the pronoun them to noun;
	else:
		set the pronoun it to noun;
	continue the action;

section guardian stubs

to decide which direction is the psgdir of (gu - a guardian):
	if gualoc of gu is not location of player, decide on the opposite of the guadir of gu;
	decide on the guadir of gu;

to decide which room is far-room of (gu - a guardian):
	decide on the room (guadir of gu) of (gualoc of gu);

to decide which room is other-room of (gu - a guardian):
	if player is in gualoc of gu, decide on far-room of gu;
	decide on gualoc of gu;

gua-warn is a truth state that varies.

to any-guardian-hint: [note: we are assured there is > 1 guardian. This is a generic and deprecated way to find a hint. It's only used if my other code falls through.]
	let Z be north;
	if gua-warn is false:
		ital-say "in the Towers area, when multiple guardians are potentially visible, I can only guess which you mean. You may wish to [b]HINT[i] (guardian) instead.";
		now gua-warn is true;
	if guar-here is 1:
		let myg be a random touchable guardian;
		try objhinting myg;
		continue the action;
	repeat with D running through { north, east, west, south }:
		repeat with VG running through touchable guardians:
			if psgdir of VG is d:
				try objhinting VG;
				continue the action;

chapter rules on stub

table of region spoilers
hint-reg	spoil-expl
otters	"adverbs (weakest, [if power-back is false]due to lost powers[else](but powers back now[end if])"
presto	"interjections"
routes	"prepositions"
troves	"passive verbs"
towers	"adjectives"
oyster	"active verbs"
others	"anagrammable fruits"

every turn when Strip of Profits is visited (this is the region-hint on no score rule):
	if mrlp is Ordeal Reload and Report Porter Perrot is moot:
		increment turns-spent of mrlp;
	else if mrlp is unspoiled:
		increment turns-spent of mrlp;
	if cur-score of mrlp is 0 and mrlp is unspoiled:
		if turns-spent of mrlp > last-hint-turns of mrlp:
			if the remainder after dividing turns-spent of mrlp by 10 is 0:
				say "It seems you're stuck a bit here. Would you like a hint as to what this region is about?";
				if the player dir-consents:
					now mrlp is spoiled;
					choose row with hint-reg of mrlp in table of region spoilers;
					say "This region focuses on [spoil-expl entry].";
					now block-north is true;
				else:
					say "Okay. I'll ask again in a few moves, if you haven't figured anything yet.";
					now last-hint-turns of mrlp is turns-spent of mrlp;
[				reject the player's command;]

before going north when block-north is true:
	say "This is a weird case where I blocked going north in cases like Z.Z.Z.N as I couldn't quite wangle with the parser--the command could be [b]NO[r] or [b]NORTH[r]. It should almost never come up. Sorry about that. Try going north again.";
	do nothing instead; [?! hack to get rid of z.z.z.z. and answer n]

the player is terse.

an animal is usually terse.

chapter skan snaks

a skansnak is a kind of thing. a skansnak can be heated. a skansnak is usually not heated. a skansnak is usually edible. a skansnak can be brandnoted. a skansnak is usually not brandnoted.

understand "skansnak" and "skan snak" and "snak" and "skan" as a skansnak.

a skansnak has a number called deliciousness.

after taking a skansnak:
	increase deliciousness of noun by 10;
	continue the action;

when play begins (this is the disambig-skan-snak rule) : [ skan snaks are ordered randomly since they are equivalent ]
	let tastee be 1;
	repeat with HP running through skansnaks:
		now deliciousness of HP is tastee;
		increment tastee;

check objasking about a skansnak when mrlp is towers:
	if noun is Dr Yow or noun is agnostic, say "You might get a lecture about all the gross chemicals in there." instead;
	if second noun is touchable:
		say "You offer [the noun] as a gift, instead.";
		try giving the second noun to the noun instead;

the specification of a skansnak is "A skansnak, when heated, lets you see how a thing/item should be described."

this is the note-pastries rule:
	if noun is brandnoted, continue the action;
	now noun is brandnoted;
	say "[one of]You note [the noun] is produced by [passrite], as Ornate Atoner Renato mentioned. It's definitely a skan-snak, as well. Good for if you need help.[or]Another of those [passrite].[or]And yet another [passrite]! Even if you don't need the clues, it's nice to know you won't starve in the wilderness, here.[or]Wow. A smorgabord of [passrite].[stopping]";

the skansnak babble rule is listed last in the after rules.

this is the skansnak babble rule:
	if current action is not objhinting and noun is a skansnak:
		process  the note-pastries rule;
	continue the action;

to say passrite: say "Pass-Rite Raspiest Pastries"

section acting on skan snaks

check giving skansnak to Tetris Sitter:
	if top opt pot is moot, say "You already gave [The tetris sitter] a much better gift." instead;
	say "[if itster is touchable][The tetris sitter] doesn't need comfort food, and the insights [the noun] would give won't help her[else]Now [the tetris sitter] is back in the real world, she probably needs something healthier[end if]." instead;

check giving skansnak to a guardian:
	if second noun is diners, say "They scoff at what your idea of fine cuisine seems to be." instead;
	say "Bribery won't work." instead;

check giving skansnak to agnostic: say "[he-she-c] has had enough empty short-term gratification with [dinger]." instead;

check giving skansnak to Dr Yow: say "[he-she-c] doesn't seem hungry." instead;

check giving skansnak to duck: say "It turns away as if to say, yuck." instead;

chapter fruits

a fruit is a kind of thing. description of a fruit is "[if the item described is plural-named]They're[else]It's[end if] not heinously bruised or rotting, or anything, so Curtis probably won't mind it."

a fruit has a room called frroom.

a fruit can be hintable. a fruit is usually hintable.

after doing something with a fruit (this is the limes can sensibly be it or them rule) :
	set the pronoun it to the noun;
	continue the action;

the specification of fruit is "Something that Curtis will take from you, and you may or may not get a coin back."

the can't take scenery rule is not listed in any rulebook.

The describe what's on scenery supporters in room descriptions rule is not listed in any rulebook.

to say email:
	say "blurglecruncheon@gmail.com";

check taking a fruit (this is the probably archaic debug fruit-flips in case rule) :
	if noun is not carried:
		now player has noun;
		say "Oops! You should've taken [the noun] when you flipped it. [bug-report]" instead;

yes-no-warn is a truth state that varies.

check saying no:
	if block-north is true, do nothing instead;
	repeat through table of NPC yes and no responses:
		if the-person entry is touchable and there is a no-response entry, say "[no-response entry][line break]" instead;
	if mrlp is troves, say "Negative thinking isn't the way to the top, here!" instead;
	say "[randbla]";
	rhet-q;
	the rule succeeds;

check saying yes:
	if block-north is true, do nothing instead;
	repeat through table of NPC yes and no responses:
		if the-person entry is touchable and there is a yes-response entry, say "[yes-response entry][line break]" instead;
	if mrlp is troves, say "It's not enough to have positive thinking! YOU MUST HAVE PRODUCTIVE POSITIVE THOUGHTS!" instead;
	say "[randbla]";
	rhet-q;
	the rule succeeds;

to rhet-q:
	if yes-no-warn is false:
		say " (Rhetorical questions can be safely ignored, and typing No/Yes will give random silly responses.)[line break]";
		now yes-no-warn is true;
	else:
		say "[line break]";

table of NPC yes and no responses
the-person	yes-response	no-response
Elvira	"Don't give in like that!"	"Elvira smirks and shakes her head. Your Just Say No would be no jaunty SOS."
Report Porter Perrot	"Agreeing with Report Porter Perrot probably wouldn't get [him-her] to leave."	"You can't out-argue Report Porter Perrot or change [his-her] mind."
Gast	"Passively agreeing with [him-her] might just keep things going ad infinitum. You need to find the right way to ride out the conversation."	"Disagreeing with [Gast] might make [him-her] too mad. You need to find the right way to ride out the conversation."
players	"They're so totally wrong, even a sarcastic yes would be just bad."	"Their arguments are too well-constructed for such a simple reject."
Ed Riley	"He doesn't look terribly agreeable."	"Too direct. He'd just reject you to show you he's no YIELDER."

throw-warn is a truth state that varies.

pun-warn is a truth state that varies.

check eating a fruit:
	if noun is lemons or noun is melon, say "A [if noun is lemons]lemon[else]melon[end if]? No meal!" instead;
	say "[one of]You shouldn't eat into Curtis's profits. [or][stopping]";
	if pun-warn is false:
		ital-say "if you try again, you'll get an even worse anagram pun.";
		now pun-warn is true instead;
	say "No fruit. Ruf it! On! ([one of]Told you so[or]Yup. Still here[stopping].)" instead;

an undesc is a kind of thing. description of undesc is "[bug-report]";

bean-smell is a truth state that varies.

do-i-chat is a truth state that varies.

power-back is a truth state that varies.

every-turn-hint is a truth state that varies. every-turn-hint is false.

check examining player when mrlp is demo dome:
	say "You look just fine. You don't need to be dressed too fancy for this." instead;

description of player is "As every[w-man]nish as ever[if player wears tsar star], and wearing a spiffy tsar star, too[end if]. [one of]You'll never be a [if player is female]Fine Nefi Fein[else]Hunk Kuhn or Icon Nico[end if][one of], or a Dreamboat [if player is male]Brad Mateo[else]Amber Dato[end if][or][stopping], and you don't want to be. Because i[or]I[stopping]t's the power inside you that's important[if mrlp is otters and power-back is false]. Well, the power you may need to regain[end if].". initial appearance of player is "[bug-report]".

does the player mean examining the player when mrlp is troves: it is very likely.

check examining the player when mrlp is troves:
	say "[one of]You look into your thoughts, feelings and beliefs. You realize they cannot possibly be as pertinent as whatever Peg A. Page has to say. So you defer to her knowledge[or]Your thoughts lead back to the good book[stopping].[line break]";
	try examining Pa Egg Pea instead;

chapter miscellaneous neat includes

wfak-yet is a truth state that varies.

to say wfak: [this is so I can skip through PRESS ANY KEY while testing]
	if debug-state is false:
		if wfak-yet is false:
			ital-say "when the game pauses without a cursor, it means you need to press any key to continue. This warning will not appear again.";
			now wfak-yet is true;
		wait for any key;

section graphic files

figure graflogo-1 is the file "letters-settler-1.png"

figure graflogo-2 is the file "letters-settler-2.png"

figure yorpwald-1 is the file "yorpwald-1.png"

section external files for testers

the file of gamehints is called "roilhints".

section glulxy adjustments

use DICT_WORD_SIZE of 12

[We need all 12 letters. For instance, some adverbs get to 12 and, okay, those, you can count the last two letters. But BLACKBERRIES is 12.]

section screenreading and censoring

when play begins (this is the screenread gender swears and precursor rule) :
	now sts-sequence is 2;
	if debug-state is true:
		choose-male;
		continue the action;
	process the check-skip-intro rule;
	let skip-stuff be whether or not the rule succeeded;
	say "[this-game] has some features that can be adjusted for screen readers. Are you using a screen reader?";
	if the player regex-prompt-consents:
		say "Accessibility is turned on. It is something I had trouble meaningfully planning and testing, so please let me know at [email] if you feel it could be improved. Thank you!";
		now screenread is true;
		now setspace is true;
	say "You can alternate accessibility mode with the [b]ACCESS[r] command.[paragraph break]Also, [this-game] contains some minor profanity. Unfortunately, it can't wipe out some implied profanity that results, but nothing is intended to be malicious. Disable profanity?";
	if the player regex-prompt-consents:
		now censor-minor is true;
	say "Also, this is not critical to game mechanics and only gives minor differences, but you can play as a male (M) or female (F) -- case insensitive. Which will it be?";
	let cholet be 0;
	while cholet is irrelevant:
		let cholet be the chosen letter;
		if cholet is irrelevant:
			say "M or F, please.";
	if cholet is 70 or cholet is 102:
		choose-female;
	else:
		choose-male;
	if skip-stuff is true, continue the action;
	say "And one final thing: [this-game] is a sequel to [shuf]. It's strongly recommended you play [shuf] first, as it is shorter and provides back story to ARO, but it's not critical. If, in any case, you'd like a recap--which also immediately spoils ARO's mechanic--say yes now.";
	if the player regex-prompt-consents:
		say "[shuf] was about changing...things...to other things. Your tagged gadget helped you with the tougher ones, like the drainage that became a gardenia, and you remember the magenta nametag that became the gateman who introduced you to Yorpwald. After solving the Forest, Sortie and Metros in the stores in the Trips Strip, you tackled Red Bull Burdell and earned your Ordeal Reload as thanks.[paragraph break]You remember the things you did, but do you need to remember the word?";
		if the player consents: [start of game]
			say "Things were, well, anagrams. Store F became the forest. Store I, the sortie. Store M, the metros. You were particularly proud of changing the liches to a chisel and the drapes to a spread.";
		else:
			say "OK, let's get to it!";
	else:
		say "OK, let's get to it!";

to decide whether gen-gone of (g - a guardian):
	if g is moot, yes;
	if other-g of g is not dreads adders and other-g of g is moot, yes;
	no;

to general-gender-towers:
	unless gen-gone of lois the hostile:
		now hostile is he lot is off-stage;
		now lois the hostile is off-stage;
	unless gen-gone of lars eede:
		now lars eede is off-stage;
		now elsa erde is off-stage;
	if mrlp is towers, reposition-guardians;

to choose-female:
	now the player is female; [begin intro changes]
	now i trash his art is off-stage;
	now er trash is part of the dope op ed;
	now Pat is female; [begin routes changes]
	now the mardier admirer is male; [begin towers changes]
	general-gender-towers;
	now agnostic is female;
	now Dr Yow is female;
	now Gast is female;
	now Elsa Erde has Reeds Ale;
	now Dr Lola is part of droll dollar; [begin others changes]
	now coin-person is Dr Lola;
	now Lord Al is off-stage;
	if Dr Tera is not moot and Art Erd is not moot:
		now Dr Tera is in Scape Space;
		now Red Rat is off-stage;
	now greedy-person is Dr Tera;
	now Dr Severe is female;

to choose-male:
	now the player is male; [begin intro changes]
	now i trash his art is part of the dope op ed;
	now er trash is off-stage;
	now Pat is male; [begin routes changes]
	now the mardier admirer is female; [begin towers changes]
	general-gender-towers;
	now agnostic is male;
	now Dr Yow is male;
	now Gast is male;
	now Lars Eede has Reeds Ale;
	now Lord Al is part of droll dollar; [begin others changes]
	now coin-person is Lord Al;
	now Dr Lola is off-stage;
	if Dr Tera is not moot and Art Erd is not moot:
		now Dr Tera is off-stage;
		now Red Rat is in Scape Space;
	now greedy-person is Red Rat;
	now Dr Severe is male;

to decide whether (cho - a number) is irrelevant:
	if cho is 70 or cho is 102, decide no;
	if cho is 77 or cho is 109, decide no;
	decide yes;

section single/plural stuff said

to say is-are of (myt - a thing): say "[if myt is plural-named]are[else]is[end if]";

to say it-them of (myt - a thing): say "[if myt is plural-named]them[else]it[end if]";

section gender specific stubs and/or silliness

to say w-man: say "[if player is female]wo[end if]man";

to say a-b: say "[if player is male]Abe[else]Bea[end if]"

to say d-t: say "[if player is male]Tod[else]Dot[end if]"

to say n-t: say "[if player is male]Nate[else]Tena[end if]"

to say fs: say "[if player is male][else]s[end if]"; [s added for Mr/Mrs option]

to say i-n: say "[if player is male]Ian[else]Nia[end if]"

to say i-n-u: say "[if player is male]IAN[else]NIA[end if]"

to say m-e: say "[one of]Me[or][']Em[in random order]"

to say mle: say "[one of]Mel[or]Lem[in random order]"

to say sic: if player is female, say " (sic) " [for when I totally have to bail out]

to say sim: say "[if player is male]Simeon[else]Simone[end if]"

to say toti: say "[if player is male]Tino[else]Toni[end if]"

to say tt: say "[if player is male]Tio[else]Toi[end if]"

to say ta: say "[if player is male]Tai[else]Tia[end if]"

[this is strictly speaking bad coding but "of x" and "of y" got tedious]

to say he-she: say "[if player is male]he[else]she[end if]"

to say him-her: say "[if player is male]him[else]her[end if]"

to say his-her: say "[if player is male]his[else]her[end if]"

to say he-she-c: say "[if player is male]He[else]She[end if]"

to say him-her-c: say "[if player is male]Him[else]Her[end if]" [probably unused but why chance it]

to say his-her-c: say "[if player is male]His[else]Her[end if]"

to say his-her-u: say "[if player is male]HIS[else]HER[end if]"

to say mrmaam: say "[if player is female]ma'am[else]mister[end if]";

section redact cussing

censor-minor is a truth state that varies.

to say a-word: say "[if censor-minor is true]---[else]ass[end if]";

to say a-word-u: say "[if censor-minor is true]---[else]Ass[end if]";

to say crap: say "[if censor-minor is true]----[else]crap[end if]";

to say crap-u: say "[if censor-minor is true]----[else]Crap[end if]";

to say d-word: say "[if censor-minor is true]----[else]damn[end if]";

to say d-word-u: say "[if censor-minor is true]----[else]Damn[end if]";

to say dick: say "[if censor-minor is true]----[else]dick[end if]";

to say dick-u: say "[if censor-minor is true]----[else]Dick[end if]";

[these 'say' the same thing but I wanted to put them here so my spell- and anagram-checker didn't go off-base. They're a bit too strong of swears to print.]

to say fg: say "***";

to say f-w: say "****";

to say s-w: say "****";

to say t-w: say "****";

section question

to say qr: say "?[run paragraph on]"

section multiple item operations

to say game-specific-drop-msg: say "There's only one place where you need to drop an item, and [if prod is moot]you found it[else]you'll probably know it, and you'll want to drop it specifically[end if]. So there's no reason to drop multiple items";

chapter testing stuff I can't quite NFR

section scos

section sss

sss is a truth state that varies.

every turn when sss is true (this is the show blues rule): [this shows everything that looks odd or can be hinted without the player having to type it]
	if player has settler and sss is true:
		append ">[the player's command]: [no line break]" to the file of debuggery;
		show-bluables;
	continue the action;

section silly variables

ff is a truth state that varies. [flip freeze disabled in release mode]

section scam rule [referred to while scoring]

every turn when scams is true (this is the scam rule):
	if mrlp is routes:
		now player has snoop spoon;
		try examining snoop spoon;
	else if mrlp is troves:
		now player has truffle;
		try eating truffle;
	else if mrlp is otters:
		now player has cinders;
		try discerning cinders;
	else if mrlp is presto:
		now player has crust;
		try eating crust;
	else if mrlp is oyster:
		now player has pills;
		try spilling pills;
	else if mrlp is others:
		if player has arugula:
			say "Force feeding you arugula.";
			now can-guru is true;
			moot arugula;
		else if can-guru is false:
			now can-guru is true;
			say "Giving you [b]GURU[r] ability.";
	else if mrlp is demo dome:
		say "No cheat items, so I'm just giving hints.";
		try requesting the score instead;

section long form of verbs

Include (-
Replace LanguageVerb;
-) after "Definitions.i6t".

Include (-
[ LanguageVerb i;
	switch (i) {
	  'i//','inv','inventory':
			   print "take inventory";
	  'a//':   print "ask about";
	  'l//':   print "look";
	  'x//':   print "examine";
	  'gt//':   print "go to";
	  'r//':   print "read";
	  'z//':   print "wait";
	  default: rfalse;
	}
	rtrue;
];
-) after "Language.i6t".

section subverting undos and tracking your death

Include (-

	Array have_died_flag --> 1;
	Global cur_undo = 1;

-) after "Definitions.i6t".

To protect the have-died flag from undo: (- @protect have_died_flag 4; @protect cur_undo 4; -).

To decide whether the have-died flag is (T - a truth state): (- (have_died_flag-->0 == {T}) -).

To --/-- now the have-died flag is (T - a truth state): (- have_died_flag-->0 = {T}; -).

section versioning modification

Include (-

[ ANNOUNCE_STORY_FILE_VERSION_R ix;
	if (actor ~= player) rfalse;
	Banner();
	IFID();
	@gestalt 1 0 ix;
	print "Interpreter version ", ix / $10000, ".", (ix & $FF00) / $100,
	".", ix & $FF, " / ";
	@gestalt 0 0 ix;
	print "VM ", ix / $10000, ".", (ix & $FF00) / $100, ".", ix & $FF, " / ";
	print "Library serial number ", (string) LibSerial, "^";
	#Ifdef LanguageVersion;
	print (string) LanguageVersion, "^";
	#Endif; ! LanguageVersion
];

-) instead of "Announce Story File Version Rule" in "Glulx.i6t".

The IFID Header is a text that varies. The IFID Header is "Game identification number".

Include (-

[ RAW ix;
	for (ix=6: ix <= UUID_ARRAY->0: ix++) print (char) UUID_ARRAY->ix;
];

-).

Include (-

[ IFID;
	PrintText((+ IFID Header +));
	print ": ";
	RAW();
	print "^";
];

-).

To say ifid: (- IFID(); -).

Report requesting the story file version (this is the manual extra listings rule):
	say "Extensions used listed by author:[line break]";
	say "[b]Andrew Plotkin: [r]Large Game Speedup[line break]";
	say "[b]Emily Short:[r] Basic Screen Effects and, for testing, the very handy Property Checking[line break]";
	say "[b]Erik Temple:[r] Glimmr Drawing Commands (modified) [line break]";
	say "[b]Jon Ingold:[r] Flexible Windows 12/110611[line break]";
	say "[b]Juhana Leinonen:[r] for testing, the very handy Object Response Tests[line break]";
	say "[b]Michael Martin:[r] Quip-Based Conversation and Reactable Quips [line break]";
	say "[b]Andrew Schultz:[r] for testing, Direction Response Testing[line break]";
	say "Other coding listed by author:[line break]";
	say "[b]Andrew Plotkin[r] (misc cool I6 stuff), [b]Climbing Stars[r] (banner code), [b] Eu (death tracking), [b]Wade Clarke[r] (this listings rule) [line break]".

chapter allow me to trace

Include (-

[ testcommandnoun obj o2;
	switch (scope_stage) {
		1: rtrue; ! allow multiple objects
		2: objectloop (obj)
			if ((obj ofclass Object) && (obj provides KD_Count))
				PlaceInScope(obj, true);
		3: print "There seems to be no such object anywhere in the model world.^";
	}
];

{-testing-command:abstract}
	* scope=testcommandnoun 'to' scope=testcommandnoun -> XAbstract;
{-testing-command:actions}
	*                                           -> ActionsOn
	* 'on'                                      -> ActionsOn
	* 'off'                                     -> ActionsOff;
{-testing-command:gonear}
	* scope=testcommandnoun                     -> Gonear;
{-testing-command:purloin}
	* scope=testcommandnoun                     -> XPurloin;
{-testing-command:random}
	*                                           -> Predictable;
{-testing-command:relations}
	*                                           -> ShowRelations;
{-testing-command:rules}
	*                                           -> RulesOn
	* 'all'                                     -> RulesAll
	* 'on'                                      -> RulesOn
	* 'off'                                     -> RulesOff;
{-testing-command:scenes}
	*                                           -> ScenesOn
	* 'on'                                      -> ScenesOn
	* 'off'                                     -> ScenesOff;
{-testing-command:scope}
	*                                           -> Scope
	* scope=testcommandnoun                     -> Scope;
{-testing-command:showheap}
	*                                           -> ShowHeap;
{-testing-command:showme}
	*                                           -> ShowMe
	* scope=testcommandnoun                     -> ShowMe;
{-testing-command:showverb}
	* special                                   -> Showverb;
{-testing-command:test}
	*                                           -> TestScript
	* special                                   -> TestScript;
{-testing-command:trac}
	*                                           -> TraceOn
	* number                                    -> TraceLevel
	* 'on'                                      -> TraceOn
	* 'off'                                     -> TraceOff;
{-testing-command:tree}
	*                                           -> XTree
	* scope=testcommandnoun                     -> XTree;

-) instead of "Grammar" in "Tests.i6t".

chapter charnum

to say character number (N - a number): (- print (char) {N}; -) [unused]

chapter save-present

to save-present-input: (-
	if (verb_word ~= AGAIN1__WD)
		for (i=0 : i<INPUT_BUFFER_LEN : i++) buffer3->i = buffer->i;

	if (usual_grammar_after == 0) {
		j = verb_wordnum;
		i = RunRoutines(actor, grammar);
		#Ifdef DEBUG;
		if (parser_trace >= 2 && actor.grammar ~= 0 or NULL)
			print " [Grammar property returned ", i, "]^";
		#Endif; ! DEBUG

		if ((i ~= 0 or 1) && (VM_InvalidDictionaryAddress(i))) {
			usual_grammar_after = verb_wordnum; i=-i;
		}

		if (i == 1) {
			parser_results-->ACTION_PRES = action;
			parser_results-->NO_INPS_PRES = 0;
			parser_results-->INP1_PRES = noun;
			parser_results-->INP2_PRES = second;
			if (noun) parser_results-->NO_INPS_PRES = 1;
			if (second) parser_results-->NO_INPS_PRES = 2;
			rtrue;
		}
		if (i ~= 0) { verb_word = i; wn--; verb_wordnum--; }
		else { wn = verb_wordnum; verb_word = NextWord(); }
	}
	else usual_grammar_after = 0;
-)

chapter rules-switch

chapter glulx header

when play begins (this is the top window rule):
	d "Starting graphics stuff.";
	open up the graphics-window;
	change the current graphics window to the graphics-window;
	change the current background-color to (R 0 G 0 B 0);
	change the current foreground-color to (R 255 G 0 B 0);
	d "Ending graphics stuff.";

The graphics-window is a graphics g-window spawned by the main-window. the position is g-placeabove. The scale method of the graphics-window is g-proportional. The measurement of the graphics-window is 10.

chapter full-monty

questions-not-flagged is a truth state that varies.

settler-space-warned is a truth state that varies;

to decide which thing is status-obj of (th - a thing):
	if th is a block-concept:
		if th is in clarthead cathedral, decide on shrewin whiners;
		if th is in shiner shrine, decide on sly imp; [if this falls through, it is solved and OK to spoil]
	decide on th;

to say full-monty of (myobj - a thing):
	let A be indexed text;
	let C be indexed text;
	let D be 13;
	let qnf be questions-not-flagged;
	let sw be settler-space-warned;
	let shown-obj be status-obj of myobj;
	if cheat-on is true:
		let A be "[b-text of myobj]";
	else:
		let A be "[a-text of myobj]";
	if number of characters in A > 15:
		say "Something went wrong. [myobj]/[shown-obj] had a [number of characters in A]-letter scan. Let me know what you were doing. [bug-report]";
		continue the action;
	repeat with CC running from 1 to the number of characters in A:
		let C be character number CC in A;
		change current foreground-color to (R 128 G 128 B 128);
		if C is "?": [ambiguous due to conflicts in description]
			change current foreground-color to (R 192 G 192 B 192);
			if questions-not-flagged is false:
				now qnf is true;
		if C is "*": [word spaces]
			change current foreground-color to (R 0 G 0 B 0);
			if settler-space-warned is false:
				now sw is true;
		if C is "R" or C is "r":
			change current foreground-color to (R 210 G 0 B 0);
		else if C is "Y" or C is "y":
			change current foreground-color to (R 210 G 210 B 0);
		else if C is "O" or C is "o": [y no match]
			change current foreground-color to (R 210 G 105 B 0);
		else if C is "P" or C is "p": [consonant match]
			change current foreground-color to (R 210 G 0 B 210);
		else if C is "G" or C is "g": [vowel match]
			change current foreground-color to (R 0 G 210 B 0);
		else if C is "B" or C is "b": [y match]
			change current foreground-color to (R 168 G 42 B 42);
		draw a rectangle (current foreground-color) in current graphics window at D by 12 with size 12 by 12;
		increase D by 13;
	repeat with CC running from 1 + the number of characters in A to 13:
		change current foreground-color to (R 128 G 128 B 128);
		draw a rectangle (current foreground-color) in current graphics window at D by 12 with size 12 by 12;
		increase D by 13;
	draw a rectangle (R 255 G 255 B 255) in current graphics window at 13 by 30 with size 220 by 20;
	paint bitmap text (color g-Black) of "[shown-obj]: cheat [on-off of cheat-on]" in current graphics window at 13 by 30 using Glimmr C&C with size 1;
	say "[spacies of A]";
	if parse-now is true and cheat-on is true:
		say ". You figure out what you can: [parse-text of myobj]";
	say "[if qnf is true and questions-not-flagged is false]--hmm. Some of the spaces are blinking as if the settler couldn't tell what letters should be used. Maybe there are two ways to wangle things, or maybe the ambiguity is an extra clue. You could try re-scanning in non-cheat mode, or you can also [b]HINT QUESTION MARK[r] for a fuller explanation[end if][if sw is true and settler-space-warned is false and myobj is not curst palace]. The black cells would indicate spaces, you guess[end if]";
	if qnf is true:
		if questions-not-flagged is false:
			pad-rec-q "question mark";
		if extra-taxer-warn is false:
			say ".[paragraph break]You can also disable clues for ambiguous/question mark settler-cheat readings with [b]TAXER[r] or [b]TAX ER[r]. You can recover them with [b]EXTRA[r]";
			now extra-taxer-warn is true;
			pad-rec-q "extra/taxer";
	now settler-space-warned is sw;
	now questions-not-flagged is qnf;

the question mark is a thing. the question mark is undesc. [question mark is for hinting ONLY]

to say spacies of (INTE - indexed text):
	if setspace is false and screenread is false:
		say "[INTE]";
		continue the action;
	let chrs be the number of characters in INTE;
	repeat with chtemp running from 1 to chrs:
		let THISCHAR be character number chtemp in INTE;
		if THISCHAR is "R":
			say "[if screenread is true]Red[else]R[end if]";
		else if THISCHAR is "Y":
			say "[if screenread is true]Yellow[else]Y[end if]";
		else if THISCHAR is "G":
			say "[if screenread is true]Green[else]G[end if]";
		else if THISCHAR is "P":
			say "[if screenread is true]Purple[else]P[end if]";
		else if THISCHAR is "O":
			say "[if screenread is true]Orange[else]O[end if]";
		else if THISCHAR is "B":
			say "[if screenread is true]Brown[else]B[end if]";
		else if THISCHAR is "*":
			say "[if screenread is true]Asterisk[else]*[end if]";
		else if THISCHAR is "?":
			say "[if screenread is true]Question mark[else]?[end if]";
		if chtemp < chrs:
			say " ";

chapter transcripting

[main code is in Trivial Niceties]

when play begins (this is the intro-hashes rule):
	let wnum be 0;
	repeat with QQ running through regions:
		if QQ is not demo dome:
			repeat through regana of QQ:
				if the-from entry is uncluing:
					now the-from entry is flippable;
				if there is no hashkey entry or hashkey entry is 0:
					now hashkey entry is the hash of the printed name of the-from entry;
					d "full name [the printed name of the-from entry] ~ [the-to entry]. Hash = [hashkey entry].[line break]";

chapter undo allows

Undo-code is a number variable. Undo-code is 0.

redo-alert is a truth state that varies.

currently-undoing is a truth state that varies.

report undoing an action:
	if mrlp is towers and can-see-map:
		draw-my-loc;
	now currently-undoing is true;
	say "[randbla][line break]";
	now currently-undoing is false;

to say eh-eh:
	now currently-rejecting is true;
	say "A booming voice yells '[randbla]' ";
	now currently-rejecting is false;

currently-rejecting is a truth state that varies.

rule for deciding whether to allow undo:
	if undo is prevented and scams is false:
		if undo-code is -1:
			say "This can't be undone, but don't worry. There's no wrong way through dialogues, nothing disappears, and important stuff is recorded in your pedanto-notepad.";
		else if undo-code is 1:
			say "[eh-eh]Ucky, yuck, you think at the biology behind the crust coming back up your throat. For your own health, see. That's something not even a tree eater could re-eat.";
		else if undo-code is 2:
			say "[eh-eh]I can't let that un-see ensue.";
		else if undo-code is 3:
			say "[eh-eh]The sugared sea-drug has you. You think you can use its insights, but it will subtly decrease the pleasure you could've gotten figuring things out on your own.";
		else if undo-code is 4:
			say "[eh-eh]You can't undo learning such knowledge.";
		else if undo-code is 5:
			say "[eh-eh]You probably don't need to revisit that headache anyway.";
		else if undo-code is 6:
			say "[eh-eh]No ops can bring that spoon back.";
		else if undo-code is 7:
			say "[eh-eh]You think, I'd reuse residue, then seem to hear 'Sure! Die!'";
		ital-say "undo is only denied if you've used a cheat item, so don't worry. You can undo any death, and the game should not become unwinnable.";
		deny undo;
	else:
		if undo-code is 8:
			say "You could've sworn you heard the LOLstr trolls mumble something about how they could probably kick your butt at computer games, too, and save states and do-overs were for wimps.";
		else if undo-code is 9:
			now the have-died flag is true;
		else if undo-code is 10:
			ital-say "the 'you died' message is random--but there are [number of rows in table of death messages]. So if you're hunting them, it may be more efficient to win to see them all.";
		else if undo-code is 11:
			say "You can't undo from Demo Dome Mode. Well, if you really think you missed something, you can make a move and undo twice. But it'll look weird warping back to [if gates stage is visited]Gates Stage[else]the start[end if].";
			if debug-state is false:
				deny undo;
			else:
				say "[line break]";
				ital-say "undoing only allowed for testing purposes.";
		else if scams is true:
			say "Allowing undo because you are in scams mode.";
		else if undo is prevented:
			say "Undo is prevented here. But don't worry. You can't be locked out of a win.";
			deny undo;
	allow undo;

chapter warp stuff

to item-warp:
	d "So far you have [cur-score of mrlp] of [max-score of mrlp] points.[line break]";
	now last-loc of mrlp is location of the player;
	if number of carried not warpable things > 0 or number of worn not warpable things > 0:
		if mrlp is solved:
			if mrlp is Ordeal Reload or mrlp is others:
				say "This game just removed an item it should not have: ([list of carried not warpable things]) ([list of worn not warpable things]). [bug-report]";
			else:
				say "[one of]An acuter curate relieves you of the items you won't need any more. He points at himself. 'Rod Hare, Hoarder.' He [if player is female]mumbles pensively, 'Her road...[run paragraph on][else]points at you. 'Rad, hero.[run paragraph on][end if]' He points away. 'I scour curios.'[or]The hoarder takes your surplus stuff again.[stopping]";
		mootl list of all carried not warpable things;
		mootl list of all worn not warpable things;

chapter going to

check gotoing:
	d "Goto sectioning: from [location of player] [progval of location of player] to [noun] [progval of noun].";
	if noun is location of player, say "You're already here!" instead;
	if noun is strip and strip is visited and player is not in Cruelest Lectures:
		say "The command you may be looking for is [b]RETRY[r]. Do that now instead?";
		if the player yes-consents, try retrying instead;
		say "Okay. You will want to use [b]RETRY[r] in the future." instead;
	if qbc_litany is not table of no conversation, say "End your conversation first." instead;
	let noureg be map region of location of noun;
	if noureg is solved and noureg is not stores, say "You already solved [noureg]." instead;
	if noun is unvisited and mrlp is noureg:
		if mrlp is not troves, say "You've never been there yet, so you can't go back." instead;
	if last-loc of noureg is unvisited:
		d "[noureg]: [last-loc of noureg].";
		if mrlp is noureg:
			d "You probably used a debug trip to get here.";
		else:
			say "You haven't made it to that region, yet." instead;
	if noureg is Meta Team, say "You should've gotten a different reject than this, but somehow you found a way through my code. This is a BUG that I'd be interested to hear about, but fortunately, whatever you wanted to visit isn't relevant to solving the game." instead;
	if noureg is not mrlp, say "You can't jump across game regions." instead;
	abide by goto-check of mrlp;
	if progval of noun < progval of location of player:
		repeat through table of goto sectioning:
			if there is a rm entry and rm entry is noun, say "[why-not entry][line break]" instead;
			if there is a regs entry and regs entry is mrlp:
				if rmprog entry is progval of noun, say "[why-not entry][line break]" instead;
		say "There's no way back. You deserve a reason why, so this is a minor bug. Let me know about it at [email]." instead;
	if progval of noun > progval of location of player, say "You seem to be getting ahead of yourself. You shouldn't know about that, yet." instead;
	abide by the goto-check of mrlp;
	if noun is shunned, say "[noun] is off-limits. I should have a better explanation why, so please let me know at [email]." instead;

this is the goto-ordeal-reload rule:
	do nothing;

this is the goto-stores rule:
	if noun is Cruelest Lectures, say "You kind of destroyed Cruelest Lectures, and you won't get any rewards for going back. It was neat and all but not as fun as watching Reefer Madness." instead;
	if noun is Strip of Profits, say "You'll need to find your way back. Don't worry. There are clues. And a small reward." instead;
	do nothing;

this is the goto-routes rule:
	if Gast is in Same Mesa, say "You can't run from [Gast]!" instead;

this is the goto-troves rule:
	say "[if noun is visited]Going back would be a dereliction of your destiny[else]You must work to make your dreams of going there become reality[end if]." instead;

this is the goto-presto rule:
	if noun is nowt town or noun is a mazeroom or noun is Unwary Runway:
		if volt maze is moot, say "You don't want to, and can't, go back to or through the volt maze you solved." instead;
		say "[b]GO TO[r] is disabled for Nowt Town and the Volt Maze[if noun is Unwary Runway], from L to V[end if]. Perhaps there's another way to solve it than by walking through[if leo is eager]. Anyway, it'd make poor [l-n-r]'s heads spin[end if]." instead;
	if noun is Dirge Ridge:
		if Leo is dismissed:
			abide by the post-wall-arch rule;
		abide by the leo-rand-forward rule;
	if player is in Hacks Shack, abide by the shack-south rule;
	if Leo is touchable and Leo is eager:
		say "([l-n-r] following.)";
		move Leo to noun;
		move Rand to noun;

this is the goto-oyster rule:
	if location of player is Plasm Lamps, say "Aw, c'mon, the ant should be no problem." instead;
	if location of player is Hardest Trashed Dearths, say "You've lost the way back, but the eeks are calling you on." instead;
	if noun is Hardest Trashed Dearths, say "Now you've visited Lean Lane, you don't want to hang around the Hardest Trashed Dearths more than you need to." instead;
	if noun is Rascal Craals and sausage is moot, say "The Rascal Craals are inaccessible now that [the sausage] has torn through them. You don't need or want to hang out there, though." instead;
	if noun is End Den and gleaner-viewed is true, say "No need to go back there." instead;
	if noun is Plasm Lamps, say "You got rid of the ant. Nothing more to do there." instead;
	if location of player is Fighter Freight and noun is not Disease Seaside, say "That's too far back. You need to keep making progress. Follow the pale plea!" instead;

this is the goto-towers rule:
	if noun is Dourest Detours or noun is Arid Den, say "No thanks. Once was enough." instead;
	if duck is touchable and duck is friendly:
		say "(The duck follows, with quick-nag quacking, though you're walking pretty fast.)";
		move duck to noun;
		continue the action;
	if location of player is Rawest Waster Waters, say "Progress isn't easy when you're flailing in water." instead;

this is the goto-otters rule:
	if player is in Rancho Archon Anchor, elvira-flee-taunt;

this is the goto-others rule:
	do nothing;

this is the goto-demo-dome rule:
	say "You rush, despite having nothing urgent to do.";

carry out gotoing:
	move player to noun;

when play begins (this is the seed room progress for GO TO rule) :
	repeat through table of goto sectioning:
		if there is a regs entry:
			repeat with myrm running through rooms in regs entry:
				if progval of myrm is 0, now progval of myrm is rmprog entry;
		else:
			now progval of rm entry is rmprog entry;

table of goto sectioning [this determines which rooms are definitively ahead of others, so GO TO can't go backwards. Also, if a room is shunned, you can't go there any more.]
rm	rmprog	regs	why-not
--	1	Ordeal Reload	"Your Means Manse was surrounded, and you escaped. Bad idea to turn back."
Carven Cavern	2	--	[Ordeal Reload]
--	1	routes	"[if progval of location of player >= 4]You're not going back across the water. You're closer to the end of your quest[else]Brother Horbert would be sad to see you return, unsuccessful. And you can't, anyway[end if]."
Harms Marsh	2	--	"You already muddled your way out of Harms Marsh. You may be lost now, but [if player is in Ripe Pier]walking[else]sailing[end if] back would be worse."
Ripe Pier	3	--	"[if progval of location of player is 4]You have no idea how to turn the Cripple Clipper around, and you don't want to[else]It's time to go forward, not backwards[end if]."
Cripple Clipper	4	--	"The Sonancy Canyons lead to your destiny."
Sonancy Canyons	5	--	[routes]
Posh Hops Shop	1	--	"The LOLstr trolls would not welcome you back[if progval of location of player > 2], and it'd take too long to get there[end if]."
Olde Lode	2	--	"You don't want to go back near that urn[if progval of location of player > 3], and it'd be hard, being on the other side of the shore[end if]."
Disease Seaside	3	--	"No sense crossing back. There's more on [if progval of location of player is 4]the other[else]this[end if] side of the shore."
Fighter Freight	4	--	"You don't really want to revisit the crays."
--	5	oyster	[oyster]
Loftier Trefoil	1	--	"[if progval of location of player is 2]You had your fun in there[else]That's way in the past[end if]."
--	2	towers	"You don't want to cross Leak Lake again."
Rawest Waster Waters	3	--	"The Rawest Waster Waters of Leak Lake would probably be even less fun the second time around."
Mesprise Premises	4	--
Mislit Limits	4	--	[towers]

[note:
--others does not need this, because you can always visit Curtis
--Demo Dome has no boundaries
--in stores, Cruelest Lectures is walled off
--otters doesn't block off any finished areas
--troves has a generic message about going forward
]

chapter persuasions

[this is basically just to catch tries to order people instead of asking them. It offers some alternate commands.]

[most of this is for Leo/Rand but Elmer/Merle are that way too]

everpers is a truth state that varies.

persuasion rule for asking a person to try doing something when everpers is false (this is the persuasion disclaimer rule):
	ital-say "you don't need to ask anyone to do anything to complete the game, and in fact it's almost never useful, though I tried some humorous rejects. You are better off ASKing people about things.";
	now everpers is true;
	continue the action;

persuasion rule for asking a person to try doing something (this is the default persuasion rule):
	say "You mumble awkwardly, but then you think maybe you can try doing something for yourself, instead.";
	continue the action;

[general]

persuasion rule for asking pedanto notepad to try doing something:
	say "[b]CONSULT[r] the notepad instead.";
	persuasion fails;

persuasion rule for asking the parrot to try giving:
	say "[if player has whistle]Already got it[else]The parrot shakes its head. You'll have to earn that[end if]." instead;

persuasion rule for asking an animal to try doing something:
	if noun is spider:
		say "No...will...power.";
	else if noun is dead flea:
		say "It's dead.";
	else if noun is yak:
		say "It's far too apathetic.";
	else if noun is parrot:
		say "[if player is in Reclusion Inclosure]You aren't sure you want to alert the coevals to the parrot, helpless as it is right now[else]The parrot flies around, cocking its head vaguely west[end if].";
	else if noun is raptor:
		say "You'd be better off changing it.";
	else if noun is eels:
		say "You need to use just one word at the right time.";
	else if noun is lamb:
		say "The lamb doesn't understand orders, or full sentences.";
	else if player is in Lamer Realm:
		say "[if noun is reflexive]You don't have its trust[else]It perks up as if looking for something to attack but settles down again[end if].";
	else if player is in Perverse Preserve:
		say "The animal cannot understand your words.";
	persuasion fails;

[routes]

persuasion rule for asking scripture picturers to try doing something:
	say "If they could speak, they'd probably tell you you need to look inside yourself, anyway.";
	persuasion fails;

persuasion rule for asking THE BEAN to try doing something:
	if the player's command includes "beneath", try fliptoing THE BEAN instead;
	say "It's not going to move itself.";
	persuasion fails;

persuasion rule for asking Pat to try doing something:
	say "He seems too despondent to do much of anything.";
	persuasion fails;

persuasion rule for asking Oscar to try doing something:
	say "He's too grouchy to be asked what to do.";
	persuasion fails;

persuasion rule for asking Brother Horbert to try doing something:
	say "Brother Horbert mutters absent-mindedly he wishes he could do something for you, but not yet.";
	persuasion fails;

persuasion rule for asking Gast to try doing something:
	say "[Gast] is much bigger and louder than you, so, no.";
	persuasion fails;

[troves]

persuasion rule for asking Pa Egg Pea to try doing something:
	say "If it could speak, it'd probably tell you you need to look inside yourself, anyway.";
	persuasion fails;

persuasion rule for asking Trevis Vister to try doing something:
	say "Trevis Vister would like the thought of someone asking him to do something. Problem is, he likes to say no a lot on principle, to feel important.";
	persuasion fails;

[presto]

persuasion rule for asking the plebe to try doing something:
	say "The plebe stiffens further to attention. You are probably asking too nicely, and he's not used to that.";
	persuasion fails;

persuasion rule for asking a person to try doing something when player is in Unwary Runway:
	say "[random npcish person] shrugs. He's just there to help, by being himself.";
	persuasion fails;

[oyster]

persuasion rule for asking LOLstr trolls to try doing something:
	say "'You know what we'd like YOU to do?' the LOLstr trolls chuckle.";
	persuasion fails;

persuasion rule for asking Casper to try doing something:
	say "You're not Casper's publicist or his editor, and they're the only one with a chance of telling him what to do[if recaps are reflexed]. Plus, there was that scraping incident[end if].";
	persuasion fails;

persuasion rule for asking pesty types to try doing something:
	say "They're here to NOT be ordered around.";
	persuasion fails;

persuasion rule for asking scary crays to try doing something:
	say "You're in no position to tell them what to do.";
	persuasion fails;

persuasion rule for asking clam to try doing something:
	say "It doesn't seem to understand commands, but maybe it can bend to niceness.";
	persuasion fails;

persuasion rule for asking carps to try doing something:
	say "Ordering them around won't help. Take action!";
	persuasion fails;

persuasion rule for asking pikes to try doing something:
	say "Ordering them around won't help. Take action!";
	persuasion fails;

persuasion rule for asking span pans to try doing something:
	say "[make-open].";
	persuasion fails;

persuasion rule for asking span pans to try doing something:
	say "[make-open].";
	persuasion fails;

to say make-open: say "They don't respond to speech but action";

persuasion rule for asking Aunt Tuna to try doing something:
	say "Hard to tell her what to do.";
	persuasion fails;

persuasion rule for asking Trout to try doing something:
	say "[if trout is reflexed]You've helped him enough--he needs time to absorb your lessons[else if trout is in Anger Range]He doesn't need orders--he needs help[else]You may need to show, not tell, him what to do[end if].";
	persuasion fails;

persuasion rule for asking sausage to try gotoing Rascal Craals:
	try objasking sausage about ruby instead;

persuasion rule for asking sausage to try gotothinging ruby:
	try objasking sausage about ruby instead;

persuasion rule for asking sausage to try doing something:
	if the player's command includes "ruby" or the player's command includes "places", try objasking sausage about ruby instead;

persuasion rule for asking walleyes to try doing something:
	say "They begin unglibly bullying. You're not in a bargaining position here.";
	persuasion fails;

persuasion rule for asking yapper to try doing something:
	say "He scratches his palm absent-mindedly. Or maybe absent-ethically.";
	persuasion fails;

persuasion rule for asking ant to try doing something:
	say "It understands only action. Violent action.";
	persuasion fails;

[towers]

persuasion rule for asking repents serpent to try doing something:
	say "The serpent needs a change of attitude, and speaking won't do it.";
	persuasion fails;

persuasion rule for asking Tetris Sitter to try doing something:
	if itster is touchable:
		say "The Tetris Sitter ignores you and continues smiling and working on her high score.";
		persuasion fails;
	if anodyne is not moot:
		say "The Tetris Sitter seems on the verge of relating something useful. But she is not quite up to it.";
		persuasion fails;
	say "St. Teri seems to want to sit and babble on.";
	try asking Tetris Sitter about "xyzzy" instead;
	persuasion fails;

persuasion rule for asking a guardian to try doing something:
	say "If only it were that easy, to ask someone or something to move. You'll have to change them to get by.";
	persuasion fails;

persuasion rule for asking a picaro to try doing something:
	say "Rodney is the one giving the orders, here[if noun is rodney], and he doesn't want to take them from you[end if].";
	persuasion fails;

persuasion rule for asking Dr Yow to try doing something:
	say "Dr. Yow [if luck node is not moot]mopes silently. [he-she-c]'s already in prison--no need to order [him-her][else]still looks exhausted from [his-her] ordeal. Maybe you should just let [him-her] be [him-her]self[end if].";
	persuasion fails;

[here are some shortcuts to speed up moving the agnostic around. I suspect there are more, but we'll see]

persuasion rule for asking agnostic to try gotothinging Dr Yow:
	try objasking agnostic about Dr Yow instead;

persuasion rule for asking agnostic to try gotothinging prison ropins:
	try objasking agnostic about Dr Yow instead;

persuasion rule for asking agnostic to try gotoing subsector:
	try objasking agnostic about Dr Yow instead;

persuasion rule for asking agnostic to try doing something (this is the block agnostic going to Obscurest Subsector rule) :
	if the player's command includes "gizmo" and player has gizmo, try giving gizmo to agnostic instead;
	if the player's command includes "boat" or the player's command includes "bot":
		if bot boat is in Actionless Coastlines, try objasking agnostic about bot boat instead;
	if the player's command includes "doctor" or the player's command includes "dr" or the player's command includes "yow":
		if Obscurest Subsector is unvisited:
			say "You don't know about that area yet.";
			persuasion fails;
		try objasking agnostic about Dr Yow instead;
	say "The agnostic is good at mechanical stuff but not so good at following orders.";
	persuasion fails;

[otters]

persuasion rule for asking Ed Riley to try doing something:
	say "He wags his finger dismissively. You need to find a way to dent his confidence.";
	persuasion fails;

persuasion rule for asking Le Mer to try doing something:
	say "You need to communicate less forcefully.";
	persuasion fails;

persuasion rule for asking players to try doing something:
	say "The [players], like any self-styled alpha males, blow you off with a 'you're not the boss of us' and show Gretta Garett-Tatger SHE is most important and they're too with-it to be repressed by the likes of YOU.";
	persuasion fails;

persuasion rule for asking Mr Lee to try doing something:
	say "[if gore ogre is moot]Mr. Lee can't do any more for you[else]Mr. Lee doesn't trust you enough to do anything for you[end if].";
	persuasion fails;

persuasion rule for asking whiners to try doing something:
	say "The whiners raise their voices and drown your request out. Maybe you can drain their energy, somehow.";
	persuasion fails;

persuasion rule for asking sly imp to try doing something:
	say "The imp gives a definite maybe you [one of][or]once again [stopping]believe. If only you could make it less subtle!";
	persuasion fails;

persuasion rule for asking an aide to try doing something:
	say "[noun] makes a huge display of only answering to--HER.";
	persuasion fails;

persuasion rule for asking Gretta to try doing something:
	say "She's already beset by the [players]. Best to help her out with your powers.";
	persuasion fails;

persuasion rule for asking Elvira to try doing something:
	say "You've got the word power but not the conversation power.";
	persuasion fails;

[others]

persuasion rule for asking Curtis to try doing something:
	say "[if dollar is not off-stage]Curtis can't do any more for you[else]Curtis gestures surprise that YOU are ordering HIM around[end if].";
	persuasion fails;

persuasion rule for asking greedy-person to try doing something:
	say "[if noun is male]He[else]She[end if]'s too slick to be ordered around.";
	persuasion fails;

persuasion rule for asking Len Craig to try doing something:
	say "Len's a businessman, and you're not his boss. Try haggling.";
	persuasion fails;

the persuasion disclaimer rule is listed first in the persuasion rulebook.

volume dialogues, telling and asking about, etc

this is the general-ask rule:
	if noun is evil bee, reason-clue instead;
	if noun is pedanto notepad, try consulting pedanto notepad about "[second noun]" instead;
	if noun is not a person, try talking to noun instead;
	if noun is a bruiser and noun is washed up, washup-clue instead;
	if noun is rehabs basher and pamphlets are off-stage:
		say "[basher-pamph]";
		the rule succeeds;
	if noun is the player, say "You talk to yourself, hoping for a eureka moment. None pops up." instead;

section generically asking

asking generically is an action applying to one topic.

Understand "tell about [text]" or "ask about [text]" or "talk about [text]" or "a [text]" as asking generically.

objasking generically is an action applying to one visible thing.

Understand "tell about [any thing]" or "ask about [any thing]" or "talk about [any thing]" or "a [any thing]" as objasking generically.

check objasking generically (This is the check for only one sensible object converser rule):
	if the number of persons enclosed by the location is one:
		repeat with X running through touchable scenery: [talk to non-talkable scenery]
			repeat through unmatched topic responses table of mrlp:
				if X is the askee entry, say "[dialogue-text entry][line break]" instead;
		say "You inquire into your own thoughts. You gain no illumination." instead;
	if the number of persons enclosed by the location is two:
		repeat with candidate running through touchable people:
			if the candidate is not the player, try objasking candidate about the noun instead;
	if player is in hops shop, try asking casper about the topic understood instead;
	say "Ambiguous--more than one other person here." instead;

does the player mean objasking about something hintrelevant: it is very likely.
does the player mean objasking generically a hintrelevant thing: it is likely.

objasking it about is an action applying to one thing and one visible thing.

rule for supplying a missing second noun when objasking about:
	now second noun is the noun;

understand the command "ask [thing] about [any thing]" as something new.
understand the command "tell [thing] about [any thing]" as something new.
understand "ask [thing] about [any thing]" as objasking it about.
understand "tell [thing] about [any thing]" as objasking it about.

understand the command "ask [thing] about [text]" as something new.
understand "ask [thing] about [text]" as asking it about.
understand the command "tell [thing] about [text]" as something new.
understand "tell [thing] about [text]" as asking it about.

Check asking generically (This is the check for only one sensible converser rule):
	if the number of persons enclosed by the location is one:
		repeat with X running through touchable scenery:
			repeat through unmatched topic responses table of mrlp:
				if X is the askee entry, say "[dialogue-text entry][line break]" instead;
		say "You inquire into your own thoughts. You gain no illumination." instead;
	if the number of persons enclosed by the location is two:
		repeat with candidate running through touchable people:
			if the candidate is not the player, try asking the candidate about the topic understood instead;
	if player is in hops shop, try asking casper about the topic understood instead;
	say "Ambiguous--more than one other person here." instead;

the can only talk to talkables rule is not listed in any rulebook.

check talking to (this is the hint looking not talking rule):
	abide by the map out sensible talk tries rule;
	if litany of noun is not table of no conversation:
		now qbc_litany is litany of noun;
		do nothing instead;

this is the map out sensible talk tries rule: [?? move this to "try talking to instead"]
	if the noun provides the property litany or the noun provides the property greeting, continue the action;
	repeat through table of inanimate talkables:
		if noun is askee entry, say "[talk-reject entry][line break]" instead;
	say "You may be better off examining non-living things, not talking to them." instead;

table of inanimate talkables
askee	talk-reject
mussier misuser	"The [misuser] can only give advice to be as important as they are, not more. If you choose not to ignore them, you must find a way to think better than they do." [troves]
spider	"Spoiloplis is definitely not a [i]Charlotte's Web[r] kind of town."
Trevis Vister	"Trevis Vister has strong opinions on everything and all kinds of success plans, but most of them revolve around having inherited wealth already."
span pans	"The pans seem to grumble and curse very quietly[if bogus-plains is reflexive]. Perhaps you could find a way of lecturing them without explicitly talking, but it's probably not critical[else]. Well, you already splained to them[end if]."
flea	"It's dead. Perhaps it can be reincarnated as something else."
computer screen	"Honestly, throwing words at a computer screen and expecting something clever in response is about the most unconstructive thing I can imagine." [presto]
sabot boats	"You get the feeling that what you talk about isn't as important as how you do so. You might really need to yell to get the boats['] attention." [oyster]
intercom	"It will respond once you [if bogus-derail is moot]re[end if]use the dialer correctly."
dialer	"Talking at the dialer does not reveal any [if bogus-derail is moot]further [end if]secrets of how to operate it."
spec o scope	"The [o scope] can't talk. All it can do is show a map when examined."
yacker keycar	"The yacker keycar babbles randomly. It's not actually going to help or hinder you, but it might be rewarding to dispatch."
organised ego drains	"The silence after talking to the ego drains leaves you feeling less confident than ever that you will restore the Curst Palace."
unripe ur pine	"The [ur pine] towers over you, silent. Maybe something is hidden behind its bulk, something you won't find by talking."
cinders	"You need the right actions to gain information from the cinders." [otters]
moat	"The moat bubbles angrily. Dialogue won't work, but maybe the right word will."
popstar passport	"You [if gates-score is 2]got what you needed from [the passport][else]have other ways to consult [the passport][end if]." [others]

section specific subjects that are not people or objects

Rand-first is a truth state that varies.

to washup-clue: say "[one of]'Us? Whaps?'[no line break][or]'Pah, wuss,'[or]'Haw, puss,'[or]'You'd place last in a saw push,'[or]'I like dat TV show the Upshaws,'[or]'Don't push aws on me,'[or]'Ssh! Up...aw,'[cycling] [noun] says, red-faced. He's not in the mood for deep discussion. But maybe a nice word would help.";

to reason-clue:
	if snore so arena is reflexed:
		say "You cut down [the evil bee]'s buzzing when you managed to [b]REASON[r]. You [if evil bee is reflexive]could tackle the bee's essence if you want[else]also tackled the bee's essence. You can move on from it now[end if].";
		continue the action;
	say "It has [first custom style]NO EARS[r]! Yet it buzzes its name...[first custom style]Sorena A. Norse[r]. The noise makes you see red but lets up when you deduce the bee is a senora.";

this is the bruiser-taunt rule:
	if noun is not a bruiser, continue the action;
	if noun is fightin:
		if noun is Rand and Rand-first is false:
			now Rand-first is true;
			say "'ME RAND!' Rand points at you. 'AM NERD!' Er, [d-word]." instead;
		say "[noun]'s in a fighting mood, not a talking mood, right now." instead;

this is the general topic scouring rule:
	repeat through unmatched topic responses table of mrlp:
		if the noun is askee entry:
			say "[dialogue-text entry][line break]";
			if noun is terse and noun is not terse-warned:
				now noun is terse-warned;
				say "[line break]Hm, that wasn't very revealing. You probably won't get much from [the noun]. You note this in your notepad.";
				pad-rec "talking";
			do nothing instead;

check objasking it about (This is the check for object information rule):
	d "noun=[noun] 2nd noun = [second noun] located [if second noun is a backdrop]in lots of places[else if second noun is not off-stage]in [location of second noun][else]off-stage[end if].";
	abide by the general-ask rule;
	if noun is sausage and second noun is ruby:
		if sausage is reflexive, say "You need to get the sausage to trust you, first." instead;
		if player is not in Rascal Craals:
			say "It acts all ghostly and asks you to take it where the ruby might be.[paragraph break]You describe the path to take to get to the ruby, neglecting why you know--fortunately, [the sausage] doesn't seem to care.";
			if player is in Anger Range: [no elses here. This rolls the Use-Saga Sausage out to Rascal Craals no matter where you are.]
				try going west;
				process the track sausage rule;
			if player is in Sclerous Closures:
				try going north;
				process the track sausage rule;
			if player is in Horned Hedron:
				try going west;
				process the track sausage rule;
			the rule succeeds;
	abide by the bruiser-taunt rule;
	if the noun is the second noun:
		repeat through ask x about x table of mrlp:
			if noun is askee entry and there is a dialogue-text entry, say "[dialogue-text entry][line break]" instead;
	repeat through matched item responses table of mrlp: [ the rules here work as follows: search for NPC/item combo, search for generic item reject, search for generic NP reject ]
		unless noun is askee entry or chum of noun is askee entry, next;
		if there is a game-thing entry and game-thing entry is the second noun:
			say "[dialogue-text entry][line break]" instead;
	if the noun is not to-gen-blather:
		repeat through table of universal objasking subject defaults:
			if game-thing entry is not second noun, next;
			if there is a right-region entry and right-region entry is not mrlp, say "This is the wrong region to ask about [the second noun]." instead;
			say "[dialogue-text entry][line break]" instead;
	if second noun is the player, say "Nobody in the game can tell you anything new about yourself. Well, anything new and helpful." instead; [ this needs to be placed here as sometimes you may get a joke response for asking enemies about you]
	repeat through matched item responses table of mrlp:
		unless noun is askee entry or chum of noun is askee entry, next;
		if there is no game-thing entry:
			say "[dialogue-text entry][line break]" instead;
	abide by the general topic scouring rule;
	if noun is not a person, say "You can only ask people about things." instead;
	d "To fix the below bug, put [noun] in [unmatched topic responses table of mrlp].";
	say "There is an awkward silence due to--err, my forgetting this case.[paragraph break][bug-report]" instead;

definition: a thing (called th) is to-gen-blather:
	if th is bonker or th is grin set stinger or th is fluster self rut or th is pest pets or th is natant ant or th is dreads adders or th is lone duck or th is serpent, yes;
	no;

check asking about (This is the check for specific topics rule):
	abide by the general-ask rule;
	if noun is sausage:
		if the topic understood matches the text "ruby", try objasking sausage about ruby instead;
	abide by the bruiser-taunt rule;
	repeat through table of NPC and topic pairs:
		if noun is askee entry and the topic understood matches topic entry:
			say "[dialogue-text entry][line break]";
	if the topic understood is a topic listed in the table of topic catchalls:
		if there is a right-region entry:
			if right-region entry is not mrlp, say "This is the wrong region to ask about that." instead;
		say "[dialogue-text entry][line break]" instead;
	abide by the general topic scouring rule;
	if noun is not a person, say "You can only ask people about things." instead;
	say "There is an awkward silence due to--err, my forgetting this case.[paragraph break][bug-report]" instead;

the can only talk to people with things to say rule is not listed in any rulebook.

to say uf: say "Any attempt at conversation would be banefully unflyable.[no line break]"

check asking Dr Yow about: if Dr Yow is wordy or Dr Yow is rowdy, say "Interrupting is rude. [he-she-c]'ll quiet down." instead;

check objasking Dr Yow about: if Dr Yow is wordy or Dr Yow is rowdy, say "Interrupting is rude. [he-she-c]'ll quiet down." instead;

the basic RQ out of range rule is not listed in any rulebook.

An RQ out of range rule for a number (called max) (this is the modified RQ out of range rule):
	say "[one of]You murmur 'Umm...urr.'[or][stopping][if Report Porter Perrot is touchable]Report Porter Perrot yells, 'Flounder, foul nerd!'[else if Elmo is touchable]'Evil days.' / 'Ay, devils.'[else if players are touchable]You're not tricky enough to change the conversation drastically.[else if Elvira is touchable]You think 'Her slams, harmless. She can't chasten...' then she hits you with the phrase-phaser. You must respond. [end if]";
	say "[line break][bracket][if max is 1]The only response right now is 1[else]Valid responses range from 1-[max][end if]. Type [b]REPEAT[r] to [if max is 1]see it again[else]re-list the options[end if].[close bracket][paragraph break]".

pat-whine is a truth state that varies.

check objasking agnostic about (this is the agnostic can spoil rule):
	if second noun is lois the hostile and agnostic is male, say "'Wow! It woulda been too much to have anyone more snooping around.'" instead;
	if second noun is hostile is he lot and agnostic is female, say "'Wow! It woulda been too much to have anyone more snooping around." instead;
	if second noun is moot, say "[if second noun is not atheists and second noun is not the-hostile and second noun is not lois the hostile]You bet [agnostic] would've figured what to do with [the second noun][else][agnostic-first] doesn't want to be reminded, probably[end if]." instead;
	unless second noun is guardian or second noun is curst palace:
		continue the action;
	if ag-cheat is false:
		if second noun is curst palace, say "[agnostic-first] puts [his-her] hand to [his-her] face, then mumbles 'Sorry, eleven letters is too much. Maybe something shorter.'" instead;
		choose row with the-from of second noun in the table of towers anagrams;
		now ag-guar is the-from entry;
		now ag-cheat is true;
		say "[agnostic-first] sits and thinks a few seconds after you tell [him-her] where you were stuck. 'Yeah, you just say [right-word entry in upper case]. That'll do it.' [he-she-c] looks kind of bored, though. Probably not nice to push [him-her].";
		preef the-from entry instead;
	else:
		if ag-guar is not noun, say "[agnostic-first] mumbles [he-she]'s bored with word games." instead;
		if ag-guar is moot, say "You thank [agnostic-first] for helping you out." instead;

doc-cheat is a truth state that varies. doc-cheat is false.
doc-guar is a person that varies. [doc-guar is usually nothing.]

check objasking Dr Yow about:
	if Dr Yow is in ropins, say "[he-she-c] doesn't need the added pressure, but maybe [he-she] can give a bit of help once [he-she]'s out." instead;
	if second noun is moot:
		if second noun is not bonker, say "You don't need to worry about that, now." instead;
	else if second noun is a guardian or second noun is curst palace:
		if doc-cheat is false:
			if second noun is curst palace, say "Dr. Yow scrunches [his-her] head a bit, then shrugs. 'Ouch. Eleven letters. Maybe if it was shorter. Unless you mean getting there...you'd need a craft to cross Leak Lake to the northeast.'" instead;
			choose row with the-from of second noun in the table of towers anagrams;
			now doc-guar is the-from entry;
			now doc-cheat is true;
			say "Dr. Yow sits and thinks a minute after you tell [him-her] where you were stuck. 'Mm, yes. Of course, of course. I'd think you just say [right-word entry in upper case] should work.'";
			preef the-from entry instead;
		else:
			if doc-guar is not noun, say "Dr. Yow rubs [his-her] temples. [he-she-c]'s probably up to more technical stuff, now." instead;
			if doc-guar is moot, say "You thank Dr. Yow for helping you out." instead;
			choose row with the-from of second noun in the table of towers anagrams;
			say "No, you remember, it was [right-word entry in upper case]." instead;

check objasking len craig about a fruit:
	if player has second noun:
		if second noun is raspberry or second noun is pineapple or second noun is grapefruit or second noun is blackberries or second noun is strawberries, say "'A nice fruit, and it's fresh, but I'm selling today.'" instead;
	else if second noun is touchable:
		say "You are about to haggle, but Len looks at you just SO. You need to go about things the right way.";
	else if second noun is moot:
		say "You don't need to get Curtis any more of that.";
	else if second noun is kumquat or second noun is papayas:
		say "Len looks at you askance, not sure how you know about those fruits.";
	else if second noun is mango:
		say "Someone else has [']em, if you look around, or about, a-ways.";
	else:
		say "'A fine fruit, but I don't deal in that. Maybe someone else does.'";
	the rule succeeds;

check objasking a picaro about a picaro:
	if noun is rodney:
		if second noun is moot, say "No gloating, now" instead;
		if second noun is off-stage, say "I don't think you want Rodney to call up reinforcements." instead;
		say "[if second noun is rodney]You probably know what he thinks of himself[else]You doubt Rodney would tell you [second noun]'s weakness[end if]." instead;
	if second noun is rodney, say "You wouldn't expect to hear any secrets. Rodney's got [noun] scared." instead;
	say "[if second noun is off-stage]Who?[else if second noun is moot]You consider some 'you'll end up line [second noun]' threats, but that's not your wordsmithing strength[else]You probably won't be able to start dissent that way. Better to [pick-keep]." instead;

check objasking a picaro about curst palace: say "[noun] only knows he's supposed to defend it from you. He probably wasn't given any secrets to divulge." instead;

to say pick-keep: say "[if moot-picaros > 0]keep picking[else]pick[end if] off Rodney's gang [if moot-picaros < 3]one by one[else] though you probably don't need to[end if]";

casper-mumble is a truth state that varies.

ag-cheat is a truth state that varies. ag-cheat is false.
ag-guar is a person that varies. [ag-guar is usually nothing.]

to say around-gone: say "[if Dr Yow is touchable]around[else]gone"

table of NPC and topic pairs	[ask x about any old unusual subject] [xxtalk5]
askee	topic	dialogue-text
nestor	"life"	"'Life is, like, the time of your life!'"
nestor	"father" or "his father"	"You have a whole big land to save. Don't waste time shaming recreational drug users."
Rehabs Basher	"vitamins/nativism" or "nativism vitamins"	"'Nice an['] crunchy. Taste good too.'"

table of universal objasking subject defaults [this gives people default things to say about stuff, if they are not terse.] [xxtalk6]
game-thing	right-region	dialogue-text
Elvira	--	"'Everyone has a differing opinion about her, that's for sure. But--better not say the wrong thing about her!' [i][bracket]NOTE: this is a default response I need to change.[close bracket][r]"
settler	--	"You don't think anyone can help you [if Elmo is moot or mrlp is not Ordeal Reload]more than Elmo did [end if]with the settler."
pedanto notepad	--	"The pedanto-notepad is yours and private. Nobody can help you decipher it--hopefully it is clear enough."
curst palace	towers	"'[if Mislit Limits is visited]Maybe you can restore it[else]You'll never get close[end if]!'"
sausage	oyster	"'It was looking for its lost jewel! We thought it was buried, but it appeared somewhere.'"

table of topic catchalls	[ask anyone about specific topic. Yeah, this fizzled.] [xxtalk7]
topic	right-region	dialogue-text
"yorpwald"	--	"That might suck you into a boring discussion about politics. Or, worse, an exciting one."
"nat egam" or "nat/egam" or "tan mage" or "tan/mage"	--	"Nat Egam, the gateman, is from [shuf]."
"old warpy" or "old/warpy"	--	"Nobody comes close to understanding Old Warpy. It gets you where you want to go."

to decide which number is ag-moves: [annotated mostly for my own sake. CHANGEIF guardians shift]
	if grailman is moot, decide on 2; [if the guardian(s) north of Danger Garden/Artist Traits Strait are both gone, it is a straight jump. And of course lois/lot are moot, since ag-moves is calculated when the kid is present] [also note that the promise imposer is moot if this is not true]
	if realist tailers are not moot, decide on 6; [if 2 adjacent guardians block the east/center ways south, you have to go all the way west. This can't happen with north of the gradient/strati since lois/lot will be gone. Here, the only way south is through the denier nereid, so you need to get to the Saltbed.]
	if wait seer is not moot:
		unless gen-gone of lars eede, decide on 6; [this zigzag blocks a clear path east]
	decide on 4; [the only way 8 would be possible is S W N W S S E E, but that ignores you have cleared the atheists]

to say ag-fol:
	if ag-moves is 2:
		say "It's a quick walk back to the subsector with [relig-mf] and ego-drains gone.";
	else if ag-moves is 4:
		say "You loop around a bit past guardians you haven't cleared.";
	else if ag-moves is 6:
		say "You regret not clearing more guardians--the agnostic is nice, but [he-she] sure can [b]TALK[r] and loves to kibitz about who's hanging around, and how and why you could've figured things out, leaving you a bit too exhausted to show HOW you work your magic. And a little embarrassed. You mumble something about being practical. Plus the long walk may help the agnostic sit and listen. You hope.";
	now agnostic is found;
	now atblock is in Obscurest Subsector;
	move agnostic to Obscurest Subsector;
	move player to Obscurest Subsector;

volume reading (vs just examining)

The reading action translates into I6 as "Read".

Understand the commands "r" and "read" as something new.

Understand "r [something]" and "read [something]" as reading. Reading is an action applying to one thing, requiring light.

does the player mean reading the player: it is very unlikely.
does the player mean reading the chic loner chronicle: it is likely.
does the player mean reading the novella: it is likely.

does the player mean examining red writing: it is very unlikely.
check examining red writing: try reading red writing instead;

carry out reading:
	if noun is novella:
		read-lowest-page;
		the rule succeeds;
	if noun is red writing:
		if number of readable things is 0, say "No writing around here on anything." instead;
		if number of readable things is 1:
			let RRT be a random readable thing;
			say "(the red writing on [the RRT])[line break]";
			try examining RRT instead;
		say "Too much to read. You'll need to be specific about what you want to read." instead;
	let rt be readable table of mrlp;
	if noun is a to-read listed in rt:
		choose row with to-read of noun in rt;
		if there is a what-read entry:
			say "[what-read entry][line break]";
			now noun is read-yet;
			the rule succeeds;
		try reading alt-read entry instead;
	ital-say "[b]READ[i]ing mapped to examining, because there is no puzzle-cluing text to read.";
	try examining noun instead;

does the player mean reading LEAD: it is very likely.
does the player mean reading the red writing when number of readable things > 0: it is likely.
does the player mean reading the red writing when number of readable things is 0: it is unlikely.
does the player mean examining the red writing when number of readable things > 0: it is likely.
does the player mean examining the red writing when number of readable things is 0: it is unlikely.

last-read is a thing that varies.

does the player mean reading last-read when last-read is touchable: it is likely.

definition: a thing (called cand) is readable:
	if cand is not touchable, decide no;
	if cand is not a to-read listed in readable table of mrlp, decide no;
	if cand is peels speel and not can-name-speel, no;
	decide yes;

section red writing

the red writing is a backdrop. the indefinite article of red writing is "some". the writing is everywhere. description of writing is "BUG. You should've been kicked to something to read. Let me know how this happened at [email].[paragraph break]List of readable things = [list of readable things].". bore-text of red writing is "You can really only read the writing.". bore-check is bore-red-writing rule.

understand "words" and "red/-- letters" as writing.

this is the bore-red-writing rule:
	if current action is examining or current action is reading:
		if number of readable things is 0, say "No red writing around here on anything." instead;
		d "[number of readable things]: [list of readable things].";
		if number of readable things is 1, try reading a random readable thing instead;
		if last-read is touchable and last-read is not the player, try reading last-read instead;
		say "That's sensible but ambiguous here with so much to look at--the preferred verb is to [b]READ[r] one of [the list of readable things]." instead;
	if current action is objhinting, continue the action;
	if number of readable things is 0, say "There's no red writing here to do anything with." instead;

volume quips

[added this to check if a quip is gone-through. Artistic is not used, but yeah...]

a quip can be mowered, artistic or dormant. a quip is usually dormant.

section debugging

[this checks to see if lawnmowering worked. What is left over?]

to lawnmower (mytab - a table-name) :
	if debug-state is false, continue the action;
	let mower be true;
	repeat through mytab:
		if response entry is not mowered:
			say "DEBUG: Did not touch [response entry]: [prompt entry][line break]";
			now mower is false;
	if mower is true, say "DEBUG: Lawnmowering worked.";

section settler color deduction text

[some of these are blank in case I decide to add another clue]

to say current-known:
	let yays be 0;
	let itxt be indexed text;
	now itxt is "Red:";
	repeat through table of settler letter reasoning:
		if v-c-y entry is 1:
			follow the my-rule entry;
			if the rule succeeded:
				increment yays;
				now itxt is "[itxt] [my-let entry]";
	say "[itxt]";
	now itxt is "Yellow:";
	repeat through table of settler letter reasoning:
		if v-c-y entry is 2:
			follow the my-rule entry;
			if the rule succeeded:
				increment yays;
				now itxt is "[itxt] [my-let entry]";
	say "[itxt]";
	process the got-y rule;
	if the rule succeeded:
		increment yays;
		say "[line break]Orange: Y.";
	if yays is last-yays:
		say "[line break]Hmm, nothing new from that...";
	now last-yays is yays;

this is the got-a rule:
	if scale-quip is mowered or basement-quip is mowered, the rule succeeds;
	if stable-quip is mowered, the rule succeeds;
	if ramp-quip is mowered, the rule succeeds;
	if painting-quip is mowered, the rule succeeds;
	if stair-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-b rule:
	if stable-quip is mowered, the rule succeeds;
	if basement-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-c rule:
	if scale-quip is mowered, the rule succeeds;
	if chimney-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-d rule:
	the rule fails.

this is the got-e rule:
	the rule succeeds.

this is the got-f rule:
	the rule succeeds.

this is the got-g rule:
	if gulp-quip is mowered, the rule succeeds;
	if painting-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-h rule:
	if chimney-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-i rule:
	the rule succeeds.

this is the got-j rule:
	the rule fails.

this is the got-k rule:
	the rule fails.

this is the got-l rule:
	if gulp-quip is mowered, the rule succeeds;
	if elmomole-quip is mowered, the rule succeeds;
	if scale-quip is mowered, the rule succeeds;
	the rule succeeds.

this is the got-m rule:
	if elmomole-quip is mowered, the rule succeeds;
	if basement-quip is mowered, the rule succeeds;
	if chimney-quip is mowered, the rule succeeds;
	if ramp-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-n rule:
	if basement-quip is mowered, the rule succeeds;
	if chimney-quip is mowered, the rule succeeds;
	if painting-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-o rule:
	if elmomole-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-p rule:
	if gulp-quip is mowered, the rule succeeds;
	if chimney-quip is mowered, the rule succeeds;
	if ramp-quip is mowered, the rule succeeds;
	if painting-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-q rule:
	the rule fails.

this is the got-r rule:
	the rule succeeds.

this is the got-s rule:
	if scale-quip is mowered, the rule succeeds;
	if stable-quip is mowered, the rule succeeds;
	if stair-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-t rule:
	if stable-quip is mowered, the rule succeeds;
	if basement-quip is mowered, the rule succeeds;
	if painting-quip is mowered, the rule succeeds;
	if stair-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-u rule:
	if gulp-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-v rule:
	the rule fails.

this is the got-w rule:
	the rule fails.

this is the got-x rule:
	the rule fails.

this is the got-y rule:
	if chimney-quip is mowered, the rule succeeds;
	the rule fails.

this is the got-z rule:
	the rule fails.

table of settler letter reasoning
my-let	my-rule	v-c-y [vowel=2 consonant=1 Y=3]
"A"	got-a rule	2
"B"	got-b rule	1
"C"	got-c rule	1
"D"	got-d rule	1
"E"	got-e rule	2
"F"	got-f rule	1
"G"	got-g rule	1
"H"	got-h rule	1
"I"	got-i rule	2
"J"	got-j rule	1
"K"	got-k rule	1
"L"	got-l rule	1
"M"	got-m rule	1
"N"	got-n rule	1
"O"	got-o rule	2
"P"	got-p rule	1
"Q"	got-q rule	1
"R"	got-r rule	1
"S"	got-s rule	1
"T"	got-t rule	1
"U"	got-u rule	2
"V"	got-v rule	1
"W"	got-w rule	1
"X"	got-x rule	1
"Y"	got-y rule	3
"Z"	got-z rule	1

y-orange is a truth state that varies.

to say y-know:
	now y-orange is true;

section gretta

gre-go-warn is a truth state that varies.

to say gre-other:
	say "[if gre-what-quip is mowered]Remember[else]I didn't tell you[end if] her army can't leave the Edictal Citadel...yet. And she won't. [if gre-east-quip is not mowered]You may need help from other than people[else]The animals I told you about--they could do something[end if]";

to say note-gretta:
	unless gretta-quip is mowered:
		say "'Oh, you should know--Gretta Garett-Tatger, the journalist, has become a target--sorry about that--for looking into Elvira's operations. Gretta may've left a hint in the Strip of Profits, and she may have something for you, if you find her. So, um, yeah, good idea, write that down.'[paragraph break]";
		pad-rec-q "Gretta";

section quip random useless fun text

[the part-list takes from 5x+1 to 5x+(fi-1)%5 + 1 & is useful for when I want to display a few things at once. The 5 is for when I need 2 short lists.]

to say part-list of (tt - a table-name) and (fi - a number): [unused]
	let lonum be fi - (the remainder after dividing fi - 1 by 5);
	repeat with idx running from lonum to fi:
		choose row idx in tt;
		say "[if idx is fi and idx > lonum]and [end if][blurb entry][if idx < fi - 1], [end if]";

to say biop of (ts - a truth state):
	if showtabname is true:
		say "(table of biopics)";
	repeat through table of biopics:
		if there is a fave entry:
			if fave entry is ts:
				say "[blurb entry]";
				continue the action;
		else:
			say "BUG should not be neutral";
	say "BUG no biopic found";

to say check-started-yet:
	set pronoun it to medals;
	set pronoun them to medals;
	let prefigs be 0;
	let southfigs be 0;
	if gore ogre is prefigured:
		increment prefigs;
		increment southfigs;
	if ghoul hat is prefigured:
		increment prefigs;
		increment southfigs;
	if eels is prefigured:
		increment prefigs;
	if sea cube is prefigured:
		increment prefigs;
	if prefigs is 4:
		say ". Everything you tried will probably work now";
	else if prefigs is 3:
		say ". You may be able to do a lot in the [if southfigs is 1]pool[else]barn[end if], now";
	else if prefigs is 2:
		say ". You made [if southfigs is 1]some progress to the north and south[else if southfigs is 2]progress to the south[else]progress to the north[end if]";
	else if prefigs is 1:
		say ". Maybe you can go back to the [if gore ogre is prefigured or ghoul hat is prefigured]barn[else]pool[end if] and do some work now";

before QBC responding with (this is the warn you before bailing from a convo rule):
	let cur-act be a number; [this is kind of cutesy code. Basically, it checks to see if Player Choice is equal to the # of available choices. If so, it warns you.]
	now cur-act is 0;
	if debug-state is true and number understood is 0:
		if Elmo is touchable, deliver the bye-Elmo-quip quip instead;
		if Report Porter Perrot is touchable, deliver the leave-quip quip instead;
		if Elvira is touchable, deliver the final-quip quip instead;
	if current quip is leave-quip:
		if Elmo is touchable:
			repeat through table of Elmo comments:
				increase cur-act by enabled entry;
			if number understood is cur-act, say "Conversation conservation, eh...spells less help.";
	if current quip is quip_null:
		if Elvira is touchable:
			say "She talks softly, oft-sly.[line break]";
		if Report Porter Perrot is touchable:
			repeat through table of Perrot comments:
				increase cur-act by enabled entry;
			if the number understood is cur-act - 1, say "'So rude!' says Report Porter Perrot, roused, soured.";

before quipping when player is in Disowned Downside (this is the Gretta checks rule):
	now hold-it-up is false;
	let missed-one be false;
	if current quip is gre-go-quip:
		if gre-go-warn is false:
			now gre-go-warn is true;
			repeat through table of Gretta comments:
				if response entry is not mowered and response entry is not gre-go-quip:
					d "[response entry].";
					now missed-one is true;
			if missed-one is true:
				say "'Oh--um, yeah, don't feel you're holding me back. I sort of want to get away, but I know a few things that could help you,' Gretta says. Stay and ask a bit more?";
				if the player dir-consents:
					say "A bit of awkward silence follows, but it's nowhere near as awkward as the [players]['] conversation was.[no line break]";
					now hold-it-up is true;
					the rule succeeds;
				say "Okay.";
				continue the action;

this is the no-meta-in-convo rule: if rq is active, say "[convoforce]." instead;

to decide whether see-rifle:
	if elmo is touchable and rifle is not moot, yes;
	no;

to say convoforce:
	if Report Porter Perrot is touchable:
		say "'Rebuts, buster? Respond! No derps!'[paragraph break]You can't get away, here. But you can [b]RECAP[r] to see your options";
	else if see-rifle:
		say "Elmo doesn't seem to want to fire the gun. He doesn't even want to use it. Maybe you can help him get rid of it";
	else if Elmo is touchable:
		say "Dialogue is more important right now than action. Elmo is here to help you at great personal risk, and if you poked around, it'd mean less time for him to escape.[paragraph break]You can [b]RECAP[r] to see your options";
	else if Elvira is touchable:
		say "'Good fail of dialog!' Elvira can negotiate awkward silence better than you can.[paragraph break]You can [b]RECAP[r] to see your options";
	else if Gretta is touchable:
		say "Gretta looks around uneasily, but she doesn't seem to be glaring at you. So you should probably listen up, or you can [b]RECAP[r] to see your options";

to decide whether the action is blathery:
	if asking about, yes;
	if asking generically, yes;
	if objasking generically, yes;
	if objasking about, yes;
	no.

have-noted-procedurals is a truth state that varies;
to note-procedurals:
	if have-noted-procedurals is false:
		say "NOTE: you can use meta-commands and trivial actions while talking, but they're not useful.[paragraph break]";
		now have-noted-procedurals is true;

before doing something when Report Porter Perrot is touchable:
	if current action is examining:
		if noun is not Report Porter Perrot:
			say "You feel a little guilty not keeping eye contact and all that jazz, but you're still hearing Report Porter Perrot okay, you guess.";
		continue the action;
	if current action is attacking, say "That'd just give the Penal Panel one more excuse." instead;
	if action is blathery, say "Report Porter Perrot's kind of leading the conversation, here." instead;
	if action is procedural:
		note-procedurals;
		continue the action;
	if current action is not talking to Report Porter Perrot and current action is not QBC responding with:
		say "[convoforce].";
		reject the player's command;
	continue the action.

before doing something when Elmo is touchable:
	if current action is scaning Elmo or current action is examining Elmo, say "[if see-rifle]You worry about making any quick movements, even though he doesn't look...enthusiastic about this situation, almost gazing at his rifle with disgust. Maybe you could get rid of the rifle[else]Talk with him, instead[end if]." instead;
	if see-rifle:
		if current action is swearing obscenely or current action is swearing mildly, say "You're not in that big of a mess. Elmo doesn't want to shoot you. That rifle can be neutralized." instead;
		if current action is ss0ing or current action is ssing, say "You can't afford sudden or elaborate movements, but well, there's that rifle." instead;
		if current action is singing, say "That's not what the high sign is for." instead;
		if current action is waiting, continue the action;
		if current action is going, say "Back inside the Means Manse won't help, and Elmo won't let you by." instead;
[		if action is blathery, say "Elmo will be more talkative once you disarm him." instead;]
		if action is procedural, continue the action;
		if word number 1 in the player's command is "talk" or word number 1 in the player's command is "ask" or word number 1 in the player's command is "say" or word number 1 in the player's command is "tell", say "You aren't brave enough to say 'Disarm, mad sir!'" instead;
		say "You can't do much with Elmo around." instead;
	if action is blathery, say "You don't want to go off on any tangents, here." instead;
	if current action is not talking to Elmo and current action is not QBC responding with:
		say "[convoforce].";
		reject the player's command;

before doing something when Gretta is touchable and parleys splayer players are moot (this is the Gretta forces initial convo rule):
	if current action is fliptoing, say "Magic can wait. You're getting information now." instead;
	if action is procedural, continue the action;
	if current action is not talking to Gretta and current action is not QBC responding with:
		say "[convoforce].";
		reject the player's command;

before doing something when player is in Rancho Archon Anchor and current quip is not final-quip (this is the Elvira forces initial convo rule):
	if current action is fliptoing medals, say "You'll never out-talk Elvira." instead;
	if current action is fliptoing whistle, say "You'd feel rude playing that whistle during a conversation, even one with Elvira." instead;
	if current action is fliptoing, say "You'll have to finish this chat first." instead;
	if action is procedural, continue the action;
	if action is blathery, say "Elvira's not going to give you any useful information." instead;
	if current action is not talking to Elvira and current action is not QBC responding with, say "[convoforce]." instead;

talked-to-Elmo is a truth state that varies.

one-Elvira is a truth state that varies.

to enact (myq - a quip):
	if myq is mowered:
		d "[myq] already tried.[line break]";
		continue the action;
	d "[myq] enabled.[line break]";
	enable the myq quip;

hold-it-up is a truth state that varies.

before quipping when current quip is bye-Elmo-quip (this is the Elmo pulls you back for hints rule):
	if got-it-quip is not mowered and showset-quip is not mowered and still-no-gp-quip is not mowered:
		say "Elmo checks you for a second. 'You sure you know how to use the settler?'";
		if the player dir-consents:
			say "You nod. 'No clues counsel.'";
			continue the action;
		say "You shake your head and go back to thinking why the settler might flicker yellow/green on the lamp and so forth.[no line break]";
		now hold-it-up is true instead;
	if interr-quip is not mowered:
		say "Hm, maybe Elmo has something useful to say. Stay for that part of the conversation?";
		if the player dir-consents:
			say "Elmo notices your haste and nods. 'Okay, first things first, I think I know where you need to go.'";
			enact bye-elmo-quip;
			disable the interr-quip quip;
			disable the orange-dunno-quip quip;
			disable the orange-know-quip quip;
			now current quip is interr-quip;

to decide whether its-all-scanned:
	repeat with rb running through ramabits:
		if rb is not bscanned, decide no;
	decide yes;

to decide whether nothing-scanned:
	repeat with rb running through ramabits:
		if rb is escanned, decide no;
	decide yes;

definition: a quip (called myq) is doable: [Inform doesn't like "enabled quip"]
	choose row with response of myq in the table of Elmo comments; [?! bad if other conditional]
	if enabled entry is 1, decide yes;
	decide no;

a quip can be Elmo-av. a quip is usually not Elmo-av.

definition: a quip (called myq) is on-the-board:
	repeat through table of elmo comments:
		if response entry is myq:
			if enabled entry > 0, yes;
			no;
	no;

definition: a quip (called myq) is clue-acc:
	if myq is on-the-board, no;
	unless myq is Elmo-av, decide no;
	if myq is mowered, decide no;
	decide yes;

to another-Elmo-hint:
	if number of clue-acc quips is 0, continue the action;
	let myq2 be a random clue-acc quip;
	if debug-state is true:
		let X be the list of clue-acc quips;
		now myq2 is entry 1 of X;
	enact myq2;

to open-elmos-hints:
		enact the strip-quip;
		enact the artsy-quip;
		enact the clues-quip;
		enact the trips-quip;

ramabits is a list of things variable. ramabits is { farm plot, platform, event map, pavement, brass crag, crabgrass, pedestal, steel pad }

after quipping when qbc_litany is the table of Perrot comments:
	if current quip is summary-quip:
		pad-rec-lump "Elvira";
		pad-rec "SHATTER-THREATS";
		enact the necro-quip;
		enact the powers-quip;
		enact the gustave-quip;
		enact the clown-quip;
		enact the leave-quip;
	else if current quip is gustave-quip:
		enact the pouter-quip;
	else if current quip is pouter-quip:
		enact the pun-quip;
	else if current quip is pun-quip:
		enact the ahem-quip;
	else if current quip is necro-quip:
		enact the sit-quip;
	else if current quip is sit-quip or current quip is powers-quip or current quip is clown-quip or current quip is ahem-quip:
		do nothing;
	else if current quip is leave-quip:
		lawnmower the table of Perrot comments;
		terminate the conversation;
		moot Report Porter Perrot;
		now Dusty Study is dark;
		if do-i-chat is true:
			move Elmo to Largely All Grey Gallery;
			move player to Largely All Grey Gallery;
			moot rifle;
			now qbc_litany is litany of Mole Elmo; [may be delete-able] [end Report Porter Perrot's dialogue]
	else:
		debug-fallthrough;

after quipping when qbc_litany is the table of Elmo comments:
	d "Went through [current quip], holdup = [hold-it-up].";
	if hold-it-up is true:
		choose row with response of bye-Elmo-quip in the table of Elmo comments;
		now enabled entry is 1;
	if current quip is strip-quip:
		pad-rec "asking";
	if current quip is interr-quip:
		enact toy-theory-quip;
		enact the trial-trail-quip;
		now talked-to-Elmo is true;
		disable the orange-dunno-quip quip;
		disable the orange-know-quip quip;
	else if current quip is trial-trail-quip:
		open-elmos-hints;
	else if current quip is clues-quip:
		enact the gretta-quip;
		pad-rec-p "clues";
	else if current quip is gretta-quip:
		pad-rec-p "Gretta";
	else if current quip is artsy-quip:
		enact the shortcut-quip;
	else if current quip is shortcut-quip:
		enact weather-quip;
	else if current quip is weather-quip:
		enact sports-quip;
		enact girls-quip;
		enact media-quip;
		enact curb-quip;
		enact social-quip;
	else if current quip is media-quip:
		enact media-quip-2;
	else if current quip is flier-quip:
		say "Here's what you know.[line break][current-known][line break]";
		disable the showset-quip quip;
		now showset-quip is mowered;
		enact scale-quip;
		enact gulp-quip;
		enact elmomole-quip;
		enact got-red-yellow-quip;
		if (meet bans is escanned or beams are escanned) and meet bans is moot, now basement-quip is Elmo-av;
		if tables are escanned and tables are moot, now stable-quip is Elmo-av;
		if pram is escanned and pram is moot, now ramp-quip is Elmo-av;
		if giant pin is escanned and giant pin is moot, now painting-quip is Elmo-av;
		if sitar is escanned or stria is escanned:
			if sitar is moot or stria is moot, now stair-quip is Elmo-av;
		d "Available to Elmo: [list of elmo-av quips].";
		if "diorama" is padded, enact dio-quip;
		if niche is escanned and niche is moot:
			enact chimney-quip;
			now chimney-quip is Elmo-av;
		else:
			another-Elmo-hint;
		continue the action;
		enact gp-quip;
	else if current quip is scale-quip or current quip is gulp-quip or current quip is elmomole-quip or current quip is stable-quip or current quip is basement-quip or current quip is ramp-quip or current quip is painting-quip or current quip is chimney-quip or current quip is stair-quip:
		now current quip is mowered;
		say "You now know...[line break][current-known][line break]";
		enact got-red-yellow-quip;
		another-Elmo-hint;
		if scale-quip is mowered and gulp-quip is mowered and elmomole-quip is mowered, enact still-busted-quip;
	else if current quip is still-busted-quip or current quip is got-red-yellow-quip:
		if chimney-quip is mowered, say "You also note the Y is orange. Red + yellow = orange, and Y can be either a consonant or a vowel.";
		disable the settler-quip quip;
		disable the yorp-quip quip;
		enact gp-quip;
		enact lamp-quip;
		enact got-it-quip;
		disable the scale-quip quip;
		disable the elmomole-quip quip;
		disable the gulp-quip quip;
		disable the flier-quip quip;
		disable the still-busted-quip quip;
		disable the painting-quip quip;
		disable the ramp-quip quip;
		disable the chimney-quip quip;
		disable the stable-quip quip;
		disable the stair-quip quip;
		disable the dio-quip quip;
		disable the got-red-yellow-quip quip;
		disable the got-it-quip quip;
	else if current quip is lamp-quip:
		enact settler-quip;
		disable the gp-quip quip;
		enact got-it-quip;
	else if current quip is gp-quip:
		if y-orange is true:
			enact toy-theory-quip;
			enact the trial-trail-quip;
		else:
			enact orange-know-quip;
			enact orange-dunno-quip;
		disable the lamp-quip quip;
	else if current quip is settler-quip:
		if y-orange is false:
			enact yorp-quip;
		enact dio-elm-2-quip;
	else if current quip is yorp-quip:
		if chimney-quip is not mowered:
			enact orange-know-quip;
			enact orange-dunno-quip;
		unless still-no-gp-quip is mowered or got-it-quip is mowered:
			enact satchel-quip;
	else if current quip is satchel-quip or current quip is dio-elm-2-quip:
		unless still-no-gp-quip is mowered or got-it-quip is mowered:
			enact still-no-gp-quip;
			if current quip is dio-elm-2-quip, enact dio-2-quip;
	else if current quip is still-no-gp-quip or current quip is got-it-quip:
		disable the got-it-quip quip;
		disable the still-no-gp-quip quip;
		disable the satchel-quip quip;
		disable the dio-elm-2-quip quip;
		disable the dio-2-quip quip;
		disable the dio-quip quip;
		disable the settler-quip quip;
		if y-orange is true:
			enact interr-quip;
		else:
			enact orange-dunno-quip;
			enact orange-know-quip;
	else if current quip is showset-quip:
		disable the flier-quip quip;
		enact orange-dunno-quip;
		enact interr-quip;
	else if current quip is orange-know-quip or current quip is orange-dunno-quip:
		disable the yorp-quip quip;
		disable the orange-know-quip quip;
		disable the orange-dunno-quip quip;
		if still-no-gp-quip is mowered or got-it-quip is mowered or showset-quip is mowered, enact interr-quip;
	else if current quip is dio-quip or current quip is trips-quip or current quip is dio-2-quip or current quip is satchel-quip or current quip is yorp-quip or current quip is settler-quip or current quip is strip-quip or current quip is weather-quip or current quip is girls-quip or current quip is sports-quip or current quip is curb-quip or current quip is social-quip or current quip is media-quip-2 or current quip is clues-quip or current quip is toy-theory-quip:
		do nothing;
	else if current quip is bye-Elmo-quip:
		lawnmower table of Elmo comments;
		terminate the conversation;
		if player does not have gird grid and do-i-chat is false:
			say "Hm. Maybe Elmo had some information for you that a conversation couldn't bring out. Well, it's all really just anagramming from here on out--you think/hope.";
		moot Elmo;
		now player has gird grid;
		if do-i-chat is true: [this is a cheat bypass]
			move player to Disowned Downside;
			moot parleys splayer players;
			now qbc_litany is table of Gretta comments;
		else:
			now poss-score of Ordeal Reload is cur-score of Ordeal Reload + 4;
			move the player to Carven Cavern;	[end Elmo's dialogue]
	else:
		debug-fallthrough;

after quipping (this is the usually don't undo convos rule):
	now current quip is mowered;
	if current quip is showset-quip:
		ital-say "if you didn't mean to do this, you can [b]UNDO[i] to get a bit more help from Elmo.";
	else:
		if debug-state is false:
			prevent undo;
		now undo-code is -1;

after quipping when qbc_litany is the table of Elvira comments:
	if current quip is hollow-quip or current quip is sinister-quip or current quip is bald-quip: [Elvira's dialogue below here]
		do nothing;
	else if current quip is logical-quip or current quip is wtf-quip or current quip is hollow-quip or current quip is sneer-quip or current quip is abhor-quip or current quip is strong-quip:
		if one-Elvira is false:
			now one-Elvira is true;
			enact the sinister-quip;
			enact the bald-quip;
	else if current quip is final-quip:
		now final-quip is mowered;
		lawnmower table of Elvira comments;
		terminate the conversation;
	else:
		debug-fallthrough;

to debug-fallthrough:
	say "FALLTHROUGH BUG in after-quipping code. Put [current quip] somewhere in the after quipping rule.";

chapter quip-rule-mod

the reject asking for talking rule is not listed in any rulebook.
the reject telling for talking rule is not listed in any rulebook.
the reject answering for talking rule is not listed in any rulebook.
the reject commanding for talking rule is not listed in any rulebook.

chapter pause-and-wait

[this is not used, since it clears the screen, but just in case...]

to ptg: if debug-state is false, pause the game;

chapter taking scenery

section general

check taking scenery:
	if location of player is Same Mesa, say "Scenery is only here to tell you where to go." instead;
	if location of player is Cleric Circle, say "That'd be kind of sinful and disruptive." instead;
	if location of player is Idle Deli, say "The [noun] is part of the ambiance, for better or worse." instead;
	if location of player is Drain Nadir, say "Nothing here is valuable enough. You need to leave it all behind!" instead;
	if location of player is Econ Cone, say "Oh, you'll TAKE Spoiloplis, all of it. But you can't lug THAT around." instead; [bold-ok]
	if location of player is Upscale Capsule, say "You don't need to take that. Just take inspiration from it." instead;
	say "You don't need to take any of the scenery here. Or, well, anywhere. Unless you change it to something else first." instead;

chapter d

in-beta is a truth state that varies.

to d (a - indexed text):
	if debug-state is true:
		say "DEBUG INFO: [a][line break]"

to dl (a - indexed text):
	if debug-state is true:
		say "DEBUG INFO (delete): [a][line break]"

to dn (a - indexed text):
	if debug-state is true:
		say "DEBUG INFO: [a]"

[this is another variable that must be defined in a release section]

uber-rand-cheat is a truth state that varies.

chapter regions

to solve-region (sre - a region):
	process the notify score changes rule;
	now sre is solved;
	now last-solved-region is sre;
	if sre is Ordeal Reload, now all prefigured things are unfigured;
	repeat through preeftable of mrlp:
		now preflip entry is unfigured; [wipe stuff from flips]
	say "Congratulations! [sre] node: done![paragraph break]";
	if sre is otters and debug-state is true:
		append "Test passed for Otters." to the file of debuggery;
	repeat with po running through portals in Strip of Profits:
		if go-region of po is sre, moot po;
		check-the-store po;
	item-warp;
	let wiped-any-out be false;
	repeat through table of notepad entries:
		if there is a fixed-region entry:
			if fixed-region entry is sre:
				now known entry is false;
				now wiped-any-out is true;
	if wiped-any-out is true:
		say "(You wipe out writing in your notepad that probably only applied to this region.)";
	if min-score of mrlp > poss-score of mrlp, say "NOTE: somehow the minimum score processed by the code exceeded the possible score. If you are able to, and you can cut/paste the game transcript, I'd appreciate seeing it at [email] so I can fix it. This won't affect the game, but all the same--it's a nuisance bug. Thanks!";
	process the autosave on region complete rule;
	if player is in Strip of Profits:
		d "BUG. Player shuld not be in Strip of Profits yet.";
	else:
		d "Player moved from [location of player].";
		move player to Strip of Profits;
		notify-portal-gone sre;
	if sre is not spoiled and solid idols are examined:
		now note-progress is true;
	see-about-patcher;
	if engravings are examined and eng-change is false:
		say "The engraving by [if store t is touchable]store t[else]the otters[end if] seems to have changed since last you looked.";
		now eng-change is true;

to check-the-store (po - a portal):
	repeat through table of stores anagrams:
		if the-to entry is po:
			if the-from entry is not moot:
				d "Moving store [the-from entry] to Meta Team, but it should have been mooted.";
				moot the-from entry;
				break;

eng-change is a truth state that varies.

to see-about-patcher:
	if number of solved regions > 2 and chapter patcher is off-stage:
		say "You think, with a gay woot, 'Yow, got a way to go.' But then a voice -- 'Goal's a slog? Covert vector!' You look over and notice something behind the megaton magneto-montage. Something that wasn't there before. It's...a chapter patcher.";
		now chapter patcher is in Strip of Profits;
		set the pronoun it to chapter patcher;

after looking in Strip of Profits:
	if number of touchable portals is 0, set the pronoun it to megaton magneto montage;
	continue the action;

definition: a region (called reg) is kayoed:
	if reg is spoiled or reg is bypassed or reg is shortcircuited, decide yes;
	decide no.

section check-for-solve

[this is tricky. I could've had 2 more general rules. There's a chance for bugs either way, whether I say "reject if cur-score < max-score + 1, oh but make it 2 for towers without x-ray and otters without x-ray." The main thing to note is that different regions have different nouns they flip. ]

this is the region-done-check rule:
	if mrlp is miss-point-warned:
		d "skipping already-asked region question.";
		continue the action;
	if cur-score of mrlp is poss-score of mrlp - 1, continue the action;
	if bonus-point-available and cur-score of mrlp is poss-score of mrlp - 2, continue the action;
	now mrlp is miss-point-warned;
	say "[warn-left-text of mrlp] Stay back and clean up everything[if poss-score of mrlp < max-score of mrlp] you can[end if]?";
	if the player dir-consents, the rule succeeds;
	say "Okay[one of]. This nag will appear once for each region where you have points you can earn[or][stopping].";
	continue the action;

to decide whether bonus-point-available:
	if mrlp is others and did-guru is false, yes;
	if mrlp is towers and used-ray is false, yes;
	no;

warn-left-text of ordeal reload is "The respect specter won't be hurt if you don't figure them out, but it might be a confidence booster."

warn-left-text of routes is "This will dispel the poison stripe. However, the raptest patters can be dealt with, if you'd like one more puzzle.".

warn-left-text of troves is "This will escape Upscale Capsule, but you could do a bit more if you want."

warn-left-text of presto is "That will provide transport from [shack], but you could set more straight here if you wanted.";

warn-left-text of oyster is "This will cause Elvira to (mistakenly) destroy the Horned Hedron, but there is even more action here."

warn-left-text of towers is "This will restore the Curst Palace, but you can also figure what to do with that top opt pot you got from Renato."

warn-left-text of otters is "This will defeat Elvira, but there are loose ends to tie up, if you like that sort of thing."

warn-left-text of others is "You have some more fruits to rustle up: [number of dislodged fruits in words], to be precise.".

chapter zaping (with patcher)

zaping is an action applying to one thing.

does the player mean zaping a direction: it is very unlikely.

understand the command "zap [something]" as something new.
understand the command "patch [something]" as something new.

understand "zap [something]" as zaping.
understand "patch [something]" as zaping.

to bypass-sto (st - a sto):
	repeat through table of stores anagrams:
		if st is the-from entry:
			now go-region of the-to entry is bypassed;
			moot the-from entry;
			moot the-to entry;
			continue the action;
	say "Uh-oh. The patcher should've gotten rid of something besides [the noun], but it didn't. This is a BUG";
	moot st;

to say behind-t:
	say ". Whoever or whatever is behind [if store t is touchable]Store T[else]the solid idols[end if] must be very powerful indeed."

carry out zaping:
	if player is not in Strip of Profits, say "[reject]" instead;
	if player has patcher:
		say "You shouldn't be carrying the patcher. It has to stay in the Strip of Profits.";
		move patcher to strip of profits;
		say "[line break]You can use it [if player is in strip of profits]now[else]once you get back to the Strip of Profits[end if]." instead;
	if chapter patcher is not in Strip of Profits, say "You don't have anything that can zap anything." instead;
	if noun is tokers or noun is nestor or noun is mangiest steaming, say "You're a text adventurer, not a drug enforcement agent." instead;
	if noun is not a sto and noun is not a portal, say "The patcher can only zap stores or portals." instead;
	if noun is store h or noun is store b:
		say "You try to swivel the chapter patcher to [noun], but it won't go that way. While [noun] seems like it could be changed, hopefully there's nothing critical there." instead;
	if noun is Store K or noun is Store N, say "As you point the patcher at [noun], you hear cries of 'No, man! Don't harsh [if noun is Store K]our[else]my[end if] buzz!'[paragraph break]There are people in there. [noun] may not be where it's at, according to Elmo, so that's even more reason not to disintegrate it." instead;
	if noun is Store T or noun is solid idols:
		say "The energy beam from the patcher bounces off [the noun] and almost zaps you and the patcher back. Whoever or whatever is behind [the noun] must be very powerful indeed." instead;
	if noun is a portal, now go-region of noun is bypassed;
	if noun is a sto:
		bypass-sto noun;
	else:
		moot noun;
	say "You point the patcher at [the noun][if noun is a portal] you created[end if]. [if noun is plural-named]They disintegrate[else]It disintegrates[end if]. Hopefully, you somehow made everything okay behind [the noun] once you're finished here, or maybe it can be saved until after you defeat Elvira.";
	if number of patchable things is 0:
		say "[line break]With a pop, the chapter patcher disintegrates. Perhaps it's done all it could, and you must tackle Elvira by yourself.";
		moot chapter patcher;
	if noun is not a portal, poss-d;
	the rule succeeds;

the chapter patcher is a warpable thing. description is "[if number of patchable things > 1]I bet if you switched it, something cool might happen[else]It's probably useless to warp past the final area[end if].". "A chapter patcher lies here next to the megaton magneto-montage."

Check taking the chapter patcher: say "It'd be kind of hazardous to carry around[if number of unsolved regions > 1]. You can just [b]ZAP[r] whatever's left[else]. You're done with it, anyway[end if]." instead;

check switching on the chapter patcher:
	if otters is solved, say "You don't need to do anything drastic now that you beat Elvira." instead;
	if number of patchable things is 0, say "It's jammed. Probably because you solved most all you need to. Guess you'll have to figure [if Store T is in Strip of Profits]what's behind Store T[else]how to deal with the otters and what's behind them[end if]." instead;
	say "The patcher shatters in a shower of fourth-wall quantum physics as you switch it. [no line break]";
	moot patcher;
	repeat with ZT running through unsolved regions:
		now ZT is bypassed;
	say "[if number of patchable things is 1]You point your patcher at [random patchable thing] and it goes poof[else]You point your patcher at, in turn, [the list of patchable things][end if]. Well, you should be able to see what's [if Store T is touchable]really behind Store T[else]behind the otters[end if] now.";
	repeat with ZT running through patchable things:
		if ZT is a sto and ZT is in Strip of Profits:
			poss-d;
		moot ZT;
	do nothing instead;

definition: a thing (called xx) is patchable:
	if xx is not touchable, no;
	if xx is Store K or xx is Store N or xx is mangiest steaming or xx is store B, no; [LLP stuff doesn't count]
	if xx is Store H or xx is hoster, no; [post Elvira doesn't count]
	if xx is Store T or xx is solid idols, no;
	if xx is a sto and xx is flippable, yes;
	if xx is a portal, yes;
	no.

chapter entering portals

the first portal entry rule is listed first in the check entering rules.

check entering a portal (this is the first portal entry rule):
	let grn be go-region of noun;
	if grn is solved: [this shouldn't happen, but yeah.]
		if grn is otters, say "Elvira is defeated. You don't need to go back." instead;
		say "You've already solved that area." instead;
	abide by entry-rule of noun;
	let try-recover be false;
	if noun is never-entered:
		d "First visit to [grn]. Can't try recovering items yet.";
		add-errs grn;
	if grn is towers and last-loc of grn is not trefoil: [it's possible but not likely you can cheat your way past with constant retries otherwise]
		d "Forcing Towers repositioning!";
		move player to last-loc of grn, without printing a room description;
		if can-see-map, draw-towers-map;
		reposition-guardians;
		try looking;
	else:
		move player to last-loc of grn;
	if noun is ever-entered, recover-items;
	now noun is ever-entered;
	the rule succeeds;

to add-errs (reg - a region):
	scan-hash-errors regnud of reg;
	repeat with X running through rooms in reg:
		scan-hash-errors roomnud of X;

to scan-hash-errors (tn - a table name):
	repeat through tn:
		if there is a this-item entry and this-item entry is a room, d "[this-item entry] wrongly listed as a room in [tn], [this-cmd entry].";
		if there is no this-reg entry or this-reg entry is a region:
			if there is no hashval entry or hashval entry is 0:
				let XYZ be the hash of this-cmd entry;
				now hashval entry is XYZ;
				d "Making hashval entry [XYZ] for [this-cmd entry] in [tn].[line break]";
			else:
				continue the action;
				[d "[this-cmd entry] has a hashval entry of [hashval entry].[line break]";]

to recover-items:
	if debug-state is true:
		if item-list of mrlp is empty:
			say "No items recovered when warping.";
			continue the action;
		say "Debug note: [item-list of mrlp] recovered.";
	repeat with JJJ running through item-list of mrlp:
		if JJJ is not a backdrop:
			now player has JJJ;
			if JJJ is tsar star or JJJ is medals, now player wears JJJ;

chapter say "[reject]" and Meatier Emerita Emirate

Meta Team is an unsolvable region.

Meatier Emerita Emirate is a privately-named room in Meta Team. "[bug-report]"

understand "ll/me/ee/" as Meatier Emerita Emirate when debug-state is true.

last-solved-region is a region that varies. last-solved-region is usually Meta Team.

headaches is a number that varies. headaches is 10.

to match-process (it1 - indexed text) and (it2 - indexed text):
	let it1a be filtered name of it1;
	let it2a be filtered name of it2;
	let lost-one be 0;
	repeat with myc running from 1 to number of characters in it1a:
		if "[character number myc in it1a]" exactly matches the text "[character number myc in it2a]":
			increment lost-one;
	if lost-one is 0:
		say "Your settler begins to make noises: a low hum, but nothing really piercing.";
		the rule succeeds;
	say "Your settler throws out a bunch of beeps: ";
	repeat with myc running from 1 to number of characters in it1a:
		if "[character number myc in it1a]" exactly matches the text "[character number myc in it2a]":
			say " HIGH";
			increment lost-one;
		else:
			say " LOW";
	say ".";
	say "[line break]Ugh. [if lost-one > 0]Those high notes[else]That high note[end if] gave you a migraine mini-rage. You switch off the slider.";
	now slider is switched off;
	decrement headaches;
	now list-headache is true;
	now undo-code is 5;
	prevent undo;
	say "[line break]";
	if headaches > 0:
		say "You figure you can take that noise [headaches in words] more time[if headaches > 1]s[end if].";
	else:
		say "You're sick of those high notes.";

list-headache is a truth state that varies.

to say them-that of (tt - a thing):
	say "[if tt is plural-named]them[else if tt is a female person]her[else if tt is a neuter person]it[else if tt is a person]him[else]that[end if]";

to say good-enuf of (goody - a thing):
	repeat through done reject table of mrlp:
		if goody is specdone entry:
			say "[if there is no spectalk entry][generic-reject][else][spectalk entry][end if]";
			continue the action;
	if goody is skid or goody is disk:
		if skid is moot or disk is moot:
			say "[sk2dsk].";
			continue the action;
	if goody is a pickup-line:
		say "You've already dealt with the [players] that way.[no line break]";
		continue the action;
	if goody is a fruit:
		say "I should have a less generic message, but you should just return [the goody] to Curtis. No need to try anything further.[no line break]";
		continue the action;
	if goody is an animal:
		if goody is in Perverse Preserve or goody is in Lamer Realm:
			if goody is not the parrot:
				say "No need to tweak [the goody] again. [if goody is plural-named]They're[else if goody is neuter]It's[else if goody is female]She's[else]He's[end if] fine as is.[no line break]";
				continue the action;
	if goody is part of the diorama:
		if dio-other of goody is not off-stage:
			say "You know what to change [the goody] back to: [the dio-other of the goody]. There's no third option.[no line break]";
			continue the action;
	d "[done reject table of mrlp] may be missing an entry for the [goody].";
	say "You've already changed [them-that of goody] enough.[no line break]";

to decide what thing is dio-other of (di - a thing):
	repeat through table of Ordeal Reload anagrams:
		if the-from entry is di, decide on the-to entry;
	say "<no dio-other entry, going with the thing itself. BUG.>";
	decide on di;

firstwordhash is a number that varies.
cmdhash is a number that varies.

read-slider-after is a truth state that varies.

to decide whether (tn - a table name) is hash-found:
	let print-this-clue be false;
	repeat through tn:
		if there is no hashval entry, next;
		if cmdhash is 0, next;
		if doublewarn is false and cmdhash is hashval entry * 2 and cmdhash is not 0:
			say "It looks like you tried to act on something doubly, possibly something that anagrams itself. To remove any future confusion, you should know you don't need to do that[if concisions are not moot]--though in the future, it does give a bonus point, for a special but odd word[end if].";
			now doublewarn is true;
			decide yes;
		if cmdhash is not hashval entry and firstwordhash is not hashval entry, next;
		if there is a this-item entry:
			if this-item entry is touchable:
				if this-item entry is a pickup-line and this-item entry is not playable: [debug-state condition is a small hack for guesses that the game hasn't revealed yet but which allow seeded programming tests to run without having to >Z for a few moves]
					next;
			else:
				next;
		else if there is a this-rule entry:
			say "[run paragraph on]";
			process the this-rule entry;
			unless the rule succeeded, next;
		say "[this-clue entry][line break][note-good-guesses]";
		if read-slider-after is true:
			if cmdhash is hashval entry:
				match-process the player's command and the this-cmd entry;
			else:
				match-process word number 1 in the player's command and the this-cmd entry;
		now read-slider-after is false;
		decide yes;
	decide no;

definition: a thing (called ge) is final-flipped:
	if ge is coins or ge is s-c or ge is icons, no;
	if ge is disk and yak is not moot, no;
	decide yes.

definition: a thing (called muso) is mult-sol:
	if muso is t-tearily-irately, yes;
	if muso is cinders, yes;
	if muso is Reeds Ale or muso is lars eede or muso is elsa erde, yes;
	if muso is rodney, yes;
	if muso is USB, yes;
	if muso is coins, yes;
	no;

slider-diorama is a truth state that varies.

slider-specter is a truth state that varies.

to say reject:
	if sss is true: [inform 7 gives extra space if I just follow the rule as-is]
		process the show blues rule;
	now cmdhash is the hash of the player's command;
	now firstwordhash is the hash of word number 1 in the player's command;
	d "The hash of the command is [cmdhash]. Hash of word 1 is [firstwordhash].[line break]";
	repeat through regana of mrlp:
		if cmdhash is the hashkey entry or firstwordhash is the hashkey entry:
			if the-to entry is not the-from entry and the-to entry is touchable and the-to entry is final-flipped:
				say "[good-enuf of the-to entry][line break]";
				continue the action;
			if the-from entry is reflexed and the-from entry is touchable and the-from entry is final-flipped:
				say "[good-enuf of the-from entry][line break]";
				continue the action;
			if the-from entry is fungible:
				if Report Porter Perrot is off-stage and player is in Dusty Study and stuff-found is 3:
					say "You can't quite concentrate with the noise at the door.";
					continue the action;
				if slider is switched on:
					if the-from entry is prefigured:
						say "Wait, wait. You've already figured what to do, but it wasn't the right time. You can [b]PAD FLIPS[r] if you forgot the details. You don't need or want to waste any clues from the slider, here.";
						continue the action;
					if the-from entry is mult-sol:
						say "You hear weird static from the settler. Perhaps there is more than one solution, and the settler is unable to determine which is more sensible.";
						if debug-state is true, say "[line break]DOUBLE PROBLEM FOR: [right-word entry].";
						continue the action;
					if the-from entry is part of the diorama and slider-diorama is true:
						say "You already got some data from the slider on the diorama. You may want to save it for other things down the road.";
						continue the action;
					if the-from entry is Respect Specter and slider-specter is true:
						say "You don't know if you want to put the Respect Specter or yourself through that right now. The Respect Specter is there to help you with the cheat function, not the slider.";
						continue the action;
					let old-headaches be headaches;
					if cmdhash is hashkey entry:
						match-process the player's command and the right-word entry;
					else:
						match-process word number 1 in the player's command and the right-word entry;
					if old-headaches > headaches:
						if the-from entry is part of the diorama and slider-diorama is false:
							say "[line break]Since the diorama has instructions on what changes to what, and it is only a teaching instrument, you probably don't want to use up any more slider charges on any part of it.";
							now slider-diorama is true;
						else if the-from entry is Respect Specter and slider-specter is false:
							say "[line break]The Respect Specter cringes a bit. You notice this and, after switching the slider off, you figure it'd be better to stick to scanning the Respect Specter, if need be.";
							now slider-specter is true;
				else:
					if Elmo is touchable and the-from entry is not rifle:
						say "You need to [if Elmo carries rifle]disarm[else]talk to[end if] Elmo instead.";
						continue the action;
					if stuff-found < 3 and player is in Dusty Study:
						say "Hmm. Nah. That's not quite it. Your skills are a bit rusty, but you'll figure it out.";
						continue the action;
					if the-from entry is prefigured:
						if the-from entry is disk and yak is not moot:
							say "[sk2dsk].";
							continue the action;
						say "You sort of already figured what to do, though it wasn't the right time, then. If you've forgotten, [b]PAD FLIPS[r] will remind you.";
						continue the action;
					say "[spec-help of the-from entry]";
					if rq is active:
						say "With that conversation, you can't concentrate on much...";
						continue the action;
					if cmdhash is not the hashkey entry:
						if firstwordhash is the hashkey entry:
							say "[line break](In particular, your first word was on the right track.)[line break]";
						else:
							say "[line break](Small note: perhaps just the first word may work. You generally don't need a second word to solvve a puzzle.)[line break]";
				continue the action;
	if roomnud of location of player is hash-found, continue the action;
	if regnud of mrlp is hash-found, continue the action;
	if table of general nudges is hash-found, continue the action;
	if player has settler and settler-try is false:
		if the player's command includes "settler":
			say "It looks like you may be trying to do things with the settler. This game uses the simplified [b]SCAN[r] ([b]OBJECT[r]).";
			now settler-try is true;
			the rule succeeds;
	if mrlp is otters:
		if the player's command matches the regular expression "^<a-z>+ly\b":
			say "[if whistle is reflexed and medals are reflexed]You don't know if you need to do any more of that[anicheck][else][ly-ish].";
			continue the action;
	if mrlp is demo dome:
		say "There's nothing too tricky to do in the Demo Dome. You can [b]THINK[r] or request the [b]SCORE[r] to see if there's anything you missed. [b]VERBS[r] has limited utility, since there are no puzzles here.";
		continue the action;
	if player is in Tenfold Teflond Den Loft and yapper is not in Tenfold Teflond Den Loft:
		if hash of the player's command is 335153504:
			do nothing;
		else if hash of the player's command is 291640279 and pins are reflexive:
			do nothing;
		else:
			say "The only thing required here is muck with the dialer right.";
			continue the action;
	say "[generic-reject]";
	if Elmo is touchable, process the sign-imminent rule;

to say generic-reject:
	say "That's not something you can say, do or see here. For a general list of verbs, type [b]VERBS[r], or for options, type [b]OPTIONS[r]. ";
	unless qbc_litany is Table of No Conversation:
		say "Besides, there's someone to deal with.";
	else if cur-score of Ordeal Reload > 0:
		say "(If you are trying to flip something back, you almost never need to.)[line break]";
	else if last-hash is cmdhash and last-hash > 0:
		say "[paragraph break]Though it looks like you're a bit stuck. You may need to take a step back and examine things, [mb-ss-ped]to see what you can change. The trickier stuff should have more than one clue.";
	else:
		say "[line break]";
	now last-hash is cmdhash;

to say ly-ish:
	say "You think you're on to something, but no--you can't find anything to focus on, thinking that"

to say anicheck:
	if nounsolve > 2 or adjsolve > 2, continue the action;
	say ", but you're worried you don't have enough allies";

settler-try is a truth state that varies;

to say mb-ss-ped:
	if player has settler:
		say "maybe with [b]SS[r], ";
	if player has pedanto notepad:
		say "maybe looking again through your pedanto-notepad for general tips, ";

last-hash is a number that varies.

chapter Adorb Bardo

Adorb Bardo is a room in Meta Team. "MOVE THIS to STS Common."

chapter answer

[this is a small hack to allow ANSWER LIAISON]

understand the command "answer [text]" as something new.

understand "answer [text]" as asking generically.

ansbufing is an action applying to one topic.

understand the command "answer [something]" as something new.
understand "answer [something]" as ansobjing.

ansobjing is an action applying to one thing.

does the player mean ansobjing the isolani liaison when Report Porter Perrot is off-stage: it is very likely.

check ansobjing:
	if noun is a person, say "Try to [b]ASK[r] a person about something instead." instead;
	if noun is isolani liaison or noun is span pans, try opening noun instead;
	say "That's not something animate." instead;

chapter status bar and scoring

no-tip is a truth state that varies.

tip-warn is a truth state that varies.

to score-notify:
	if suppress-score is false, process the notify score changes rule;

after fliptoing (this is the make initial score comments rule):
	let tru-sco be cur-score of mrlp;
	if mrlp is otters and cinders are moot:
		decrement tru-sco; [if the player uses the cinders earlier than they should--I can't stop them, but this is a hack]
	repeat through table of region initial scoring commentary:
		if mrlp is region-scored entry and tru-sco >= points-gotten entry:
			if no-tip is false and done-yet entry is false:
				say "[game-comment entry][line break]";
				if tip-warn is false:
					ital-say "you can turn this start-of-region hinting off with [b]NO TIP[i] and on again with [b]OPT IN[i].";
					now tip-warn is true;
					pad-rec "opt in/no tip";
				now done-yet entry is true;
				continue the action;
	if score-after is true, try requesting the score;
	continue the action;

score-after is a truth state that varies.

table of region initial scoring commentary
region-scored	points-gotten	done-yet	game-comment
Ordeal Reload	2	false	"Yay! You're still changing things to other things, just like in [shuf]. For now. But you're on home turf, now. If you get out in the world, maybe it'll be trickier."
stores	1	--	"Well, it looks like the stores can be changed into something else. Maybe it won't be so easy behind them, but maybe you can get rid of a few to start and see any tricks later."
routes	1	--	"Well, that was different from the standard directions. But there can't be too many other ways to go."
troves	1	--	"Neat. You made progress just thinking. Or not-thinking. It could be either."
troves	2	--	"Going inside your mind has gotten you somewhere, you think. [if Pa Egg Pea is reflexive]Maybe reading [pa egg pea] right will help you further, let you look into your mind more dispassionately[else if tears taser is moot]Staring and gaping will get you only so far, though. Real thought must be ahead[else]Hating and gaping are totally different, except for the whole not actually doing anything, but they've both worked[end if]."
presto	1	--	"It feels cathartic, using a non-dirty exclamation to get going."
presto	2	--	"Gee! Such good clean fun! But--how many clean swears are there? Golly! If you run into compound words..."
oyster	1	--	"You've started to get some action in."
oyster	2	--	"Bam! More action! You'll still sort of be guessing the verb, but it's sort of just reacting, too."
towers	1	--	"Well! You kind of cost [noun] a few macho points, but you didn't, like, name-call him. He's probably better off being described that way in the long run."
towers	2	--	"Most of these fellows seem short-named and not too complex. I mean, if they got suckered by Rodney... things will probably get tougher to describe outside the Loftier Trefoil, but this is good practice."
otters	1	--	"You've used pretty much every kind of word in the dictionary to get here. You have a strong idea what's left. Maybe you can test that hypothesis on Ed!"
otters	2	--	"Barley, [if player is in Minded Midden]reedily[else]then another l-y. Ed Riley seems a bit less intimidating--you dinged up [adverbed] here[end if][if rescind-cinders is true]. The cinders are probably the exception to the rule[end if]. Until you get your full powers back, your restriction has made a bit of a pattern, here. For now."
others	1	--	"Hmm. It looks pretty clear what sort of stuff you're trying to make, here. There'll obviously be quite a variety, but it's great you can start with the easy ones."

to say adverbed:
	if player is in Clarthead Cathedral:
		say "the whiners";
	else if player is in Shiner Shrine:
		say "the sly imp";
	else if player is in Minded Midden:
		say "Ed Riley";
	else:
		say "the players"

read-intro is a truth state that varies.

when play begins (this is the define-status-line and intro text rule):
	now left hand status line is "[lhs]";
	now right hand status line is "[cur-score of mrlp]/[if possibles is true][poss-range][else][max-score of mrlp][end if][if Strip of Profits is visited] [bracket][number of rank-increasing regions][close bracket][end if]";
	if read-intro is false, continue the action;
	ital-say "this game is a sequel to [shuf]. It has the same mechanics. But the back story is not important.";
	say "[wfak][line break]Yorpwald's been peaceful for a long time after your turn [shuf]. You weren't tabbed to lead the kingdom--but those in charge did a decent enough job, until along came Elvira. Nobody took her seriously at first, since it slipped that she was once branded the Necro-Crone.[wfak][line break]That was before she came out with a proposal she said you could not resist: ELVIRA'S REVISAL! You had to admit, if you didn't think it worked, then your shuffling around only went so far. But if you did, then obviously she was the right person to execute it, and so forth. Either way, the way you rescued Yorpwald was so silly and formulated, it couldn't happen again, and no bad guy would be dumb enough to leave things that way, for some egghead to grind things out! There would be new, bold defenses against the next big challenge.[wfak][line break]Thus Elvira gained prominence, vowing to fight the scourge of stupid wordplay armed only with her charisma. 'ELVIRA'S REVISAL? I SLAVER!' became the chant. And people did. Oh, how they laughed at her plea 'UNRATIFIED? INFURIATED?' After that, pro- and anti-anagram types had to agree she was a more exciting conversationalist than you, weighing in on spoonerism elitists and the viability of anagramming acronyms (pro and con) and whether accents count, and implementing other 'improvements' such as Reality TV ('TTY Elvira' was a big hit) and gossip columns.[wfak][line break]Then one day she suggested the possibility you might become jealous of her popularity! And who could blame you?[wfak][line break]Her being the Necro-Crone was all in the past! She was way more exciting and social than you, and didn't people deserve a second chance? Of course they did![wfak]" [bold-ok]

to say lhs:
	if player is in cruelest lectures and tedious-cue is true:
		say "[b]TEDIOUS[r] ... [b]DOUSE IT[r]";
		continue the action;
	if mrlp is not troves:
		say "[location of player] ([mrlp])";
		continue the action;
	say "Poverty";
	let QQQ be the number of visited rooms in Troves;
	repeat with QQQQ running from 1 to number of rooms in Troves:
		say "[if QQQQ is QQQ]*[else]-[end if]";
	say "Very Top (Troves, [location of player])"

to say poss-range:
	if poss-score of mrlp > min-score of mrlp:
		say "[min-score of mrlp]-[poss-score of mrlp]";
	else:
		say "*[poss-score of mrlp]*";

dome-score-not is a truth state that varies.

to decide whether concisions-missed:
	if s-i are moot and concisions are reflexive, yes;
	no;

carry out requesting the score:
	abide by the no-meta-in-convo rule;
	if mrlp is nothing, say "BUG: This location needs a region." instead;
	if mrlp is Demo Dome:
		if dome-score-not is false:
			say "There's no score in the Demo Dome, so this just tracks things you haven't looked at yet or looked at completely. But if you'd like a rank ... eh, you've done so much, I'll let you choose between Elites['] Listee, Greaten-Grantee, Derivin['] Diviner or Sharper Phraser. Or have them all. You've earned it!";
			now dome-score-not is true;
		left-to-see instead;
	if roved is true and player is in Strip of Profits, say "[if store h is in Strip of Profits]You need to figure how to change and get through store H[else]Enter the Throes Hoster for the final region[end if]." instead;
	if mrlp is others:
		say "You have [cur-score of mrlp] of [max-score of mrlp] total points for the post-Elvira Others region";
		if gates-score is 2:
			say ", and you should be able to go north from [here-there of Gates Stage] to the Valence Enclave to win";
		else if fruits-left > 0:
			say ", though you only need [min-score of mrlp] to win";
		if fruits-left is 0:
			say ". There are no fruits left to find or give back to Curtis";
		say ". ";
		show-rank;
		if poss-score of others < max-score of others:
			say "You can't get the maximum score, since you [if arugula is moot]used the arugula[end if][if arugula is moot and concisions-missed] and [end if][if concisions-missed]missed a chance for something obscure with the sonic icons[end if].";
		eval-fruits;
		check-guru;
		the rule succeeds;
	else:
		d "# of turns = [turn count].";
		say "Ol['] Stat Totals:[paragraph break]Score in a scenario: [cur-score of mrlp] out of [max-score of mrlp] total points in the current region, [mrlp][if number of prefigured things in mrlp > 0], with [number of prefigured things] thing[plur of number of prefigured things] you figured before you were ready[end if]";
		if cur-score of mrlp is poss-score of mrlp:
			if mrlp is Ordeal Reload:
				say ". You should go [b]IN[r] to the Strip of Profits, now";
			else if mrlp is stores:
				say ". You have access to all the sub-areas";
			else:
				say ". BUG: your final action should score the final point in this region";
		else:
			if mrlp is not solved and possibles is true:
				if min-score of mrlp > poss-score of mrlp and debug-state is true, say ". Somehow the region's minimum possible score is higher than your current minimum score. This is a BUG";
				if min-score of mrlp < poss-score of mrlp:
					say "[lomax of mrlp]";
				else:
					say ". There are no secrets left to find here, so the score to win is [min-score of mrlp] points[if poss-score of mrlp is not max-score of mrlp]--you missed some extra stuff you can't go back for[end if]";
		say ".[line break]";
		if mrlp is otters and power-back is false:
			say "[line break]You probably need to do something to get back your full powers, too.";
	repeat with QQ running through regions:
		if number of visited rooms in QQ > 0:
			if mrlp is not QQ and QQ is not solved:
				say "You have scored [cur-score of QQ] out of [max-score of QQ] total points for the (unsolved[if QQ is stores] hub[end if]) [QQ] region[lomax of QQ].";
	if there is a rank-increasing region:
		let temp be 0;
		say "[line break]Won now:";
		repeat with rgn running through markable regions:
			increment temp;
			if mrlp is not rgn, say " [rgn] ([cur-score of rgn]/[max-score of rgn])[if temp < number of markable regions],[else].[end if]";
		if number of redoing-ignored regions > 0:
			say "Redoing-ignored: [list of redoing-ignored regions].";
	else:
		say "[line break]You haven't solved any regions yet.";
	show-rank;
	d "[rank-index].";
	if mrlp is others:
		eval-fruits;
		check-guru;
	the rule succeeds;

to show-rank:
	say "This would give you the rank of ";
	choose row rank-index in table of ranks;
	say "[rank-name entry].";

to decide which number is rank-index:
	if mrlp is demo dome, decide on number of rows in table of ranks;
	if roved is true:
		let count be 1;
		repeat through table of ranks:
			if there is no show-at-end-rule entry:
				increment count;
			else:
				break;
		if droll dollar is not off-stage, increment count;
		if gates-score is 2 and others is solved, increment count;
		decide on count;
	decide on number of rank-increasing regions + 1 + boolval of power-back;

definition: a region (called reg) is redoing-ignored:
	if reg is bypassed, yes;
	if reg is shortcircuited, yes;
	no;

definition: a region (called reg) is rank-increasing:
	if reg is bypassed, yes;
	if reg is solved, yes;
	if reg is shortcircuited, yes;
	no;

[rejected: rode doer, Decried Decider]

table of ranks
show-at-end-rule	rank-name	to-achieve
a rule	"Farce Facer"	"be in Ordeal Reload"
--	"Riled Idler"	"get to Strip of Profits"
--	"Results Tussler"	"[sol-by of 1]"
--	"Fierier Reifier"	"[sol-by of 2]"
--	"Rifeness Finesser"	"[sol-by of 3]"
--	"Lengthier Lightener"	"[sol-by of 4]"
--	"Truculenter Unclutterer"	"[sol-by of 5]"
--	"Unresting Insurgent"	"get powers back in Otters"
--	"Reposed Deposer"	"defeat Elvira"
h-available rule	"Errantries Restrainer"	"take on the Store H quest"
h-available rule	"Procured Producer"	"get everything you can from Curtis"
h-available rule	"Reprieval Prevailer"	"Win Store H"
dome-seen rule	"Elites['] Listee / Greaten-Grantee / Derivin['] Diviner / Sharper Phraser"	"Visit Demo Dome"

to say sol-by of (nu - a number):
	say "[nu in words] of Stores P/T/U/V/W/Y solved"

this is the h-available rule:
	if peek keep is visited, the rule succeeds;
	if others is solved, the rule succeeds; [ not technically necessary, but we can make sure ]
	if roved is false, the rule fails;

this is the dome-seen rule:
	if peek keep is not visited, the rule fails;

to say lomax of (re - a region): say ". Lowest score to solve is [min-score of re]. Maximum score available is [poss-score of re]"

to decide whether guru-bonus-forced:
	if got-forced-others-min is false and did-guru is false and fruits-left is 0 and s-i are not off-stage, yes;
	no;

to check-guru: if guru-bonus-forced, say "[line break]Since you've changed all the fruits without using the arugula to [b]GURU[r], I think you deserve to know you that you'll get a bonus point for that once you [if Gates Stage is unvisited]figure out what to do north of Swell Wells[else]enter the Valence Enclave north of [here-there of Gates Stage][end if]."

possibles is a truth state that varies. min-alert is a truth state that varies.

definition: a region is markable:
	if it is mrlp, no;
	if it is solved, yes;
	no;

chapter exitsing special by-region rules (not quite enough to make this part of a region)

rule for printing the name of a mazeroom when exitsing: say "another part of the maze"

this is the mesa-go-reject rule:
	if Gast is in Same Mesa, say "You probably aren't going anywhere with [Gast] around." instead;
	if a bev o be ova is touchable, say "You don't know if you should go anywhere. With [bev] lying around, maybe that's where the adventure is." instead;
	if MORF FORM is not off-stage, say "You probably don't want to go anywhere with that [if MORF FORM is in Same Mesa]thing[else]bean[end if] around." instead;

check exitsing when mrlp is ordeal reload:
	if player is in Dusty Study and number of viable directions is 0:
		say "[if Perrot is off-stage]You feel trapped right now, and you know if you stay here too long, you'll be apprehended. It's as if you need that kick to tell you, yes, you need to get on with things and take your chances[else]You haven't made a way out yet[end if]." instead;

check exitsing when mrlp is routes:
	if player is in Same Mesa:
		abide by the mesa-go-reject rule;
		say "There are plenty of ways to go, but they don't seem to lead anywhere. [if Cleric Circle is visited or Idle Deli is visited or adobe is visited]You've made it in one place, here, so maybe you can make it in another[else]There are three places to enter, though they do seem to shift[end if]." instead;
	if exits-text of location of player is empty, say "Looks like you will need to figure a way to move forward without directions. You've [if sonancy canyons are visited]got to be really close[else]been doing well so far[end if]." instead;

check exitsing when mrlp is troves:
	say "No one direction seems better or worse than the next. Perhaps you need to find direction inside you, and you will move [if econ cone is visited]even [end if][if browse bowers are visited]further [end if]ahead in the world." instead;

check exitsing when mrlp is presto:
	if player is in hacks shack and e robot is reflexed:
		say "You could leave, but it's time to complete the programming job here and now." instead;

check exitsing when mrlp is towers:
	if player is in topside deposit and dreads adders are in topside deposit:
		say "The dreads adders are blocking the way north, so you'd better get rid of them." instead;
	if player is in mislit limits and serpent is in mislit limits:
		say "You don't have to go anywhere before changing the Curst Palace, although the serpent guards a dwelling." instead;

chapter game-start

goshy is a truth state that varies.

definition: a person (called myp) is nonspecific:
	repeat with myrg running through regions:
		if myp is a askee listed in matched item responses table of myrg, no;
	if litany of myp is Table of No Conversation and myp is not terse, no;
	yes;

when play begins (this is the basic initialization rule):
	let temp be 0;
	now the have-died flag is false;
	protect the have-died flag from undo;
	repeat through table of notepad entries:
		if there is no readyet entry, now readyet entry is false;
	repeat through table of region initial scoring commentary:
		now done-yet entry is false;
	repeat with Q running through regions:
		now poss-score of Q is max-score of Q;
	move Edictal Citadel backdrop to all ominous rooms;
	move the curst palace backdrop to all towery rooms;
	add-errs Ordeal Reload;
	let convo-holes be false;
	let temp be 0;
	if debug-state is true:
		say "[b]GRILL[r] tests conversations.";
	now Lars Eede has the Reeds Ale;
	now die-trigger is a random number from 3 to 5; [DIE TO US in Cruelest Lectures]
	now r10 is mapped west of Nowt Town;
	now Nowt Town is mapped east of r10;

definition: a room (called myrm) is ominous:
	unless map region of myrm is Otters, no;
	if myrm is Minded Midden and cinders are off-stage, no; [ "bleary barley is touchable" seems most straightforward, but because of how fliptoing's main rule is organized to help other rules, having that condition would mean ominous rooms were rearranged before I moot the barley. ]
	if myrm is Shiner Shrine or myrm is Clarthead Cathedral, decide no;
	if myrm is Lamer Realm or myrm is Perverse Preserve, no;
	yes;

definition: a person (called per) is guardianish:
	if per is a guardian, yes;

pikes-clue is a truth state that varies.

to decide which thing is not-mbb:
	if mbb is Mr Beal, decide on Balmer;
	decide on Mr Beal;

when play begins (this is the hint and other randomization rule):
	repeat with myreg running through regions:
		process the randomization rule of myreg;

this is the randomize-troves rule:
	if a random chance of 1 in 2 succeeds, now evil-bee-second is true;
	if a random chance of 1 in 2 succeeds, now rivets-first is true;
	if a random chance of 1 in 2 succeeds, now lobster-first is true;
	if a random chance of 1 in 2 succeeds, now sister-first is true;
	if a random chance of 1 in 2 succeeds, now mbb is Mr Beal;

this is the randomize-presto rule:
	if a random chance of 1 in 2 succeeds, now goshy is true;
	if a random chance of 1 in 2 succeeds, now pikes-clue is true;
	sort byebyes in random order; [Phat Path ways to say goodbye]
	now a random badbook is in Hacks Shack;

this is the randomize-oyster rule:
	sort shop-hint-items in random order; [Posh Hops Shop items]
	if a random chance of 1 in 2 succeeds, now carps-pref is true;

this is the randomize-towers rule:
	now t-or-b is turbos;
	if a random chance of 1 in 2 succeeds, now t-or-b is blaster;
	sort nextclue in random order;

this is the randomize-otters rule:
	sort table of animal randomness in random order;
	sort shrine-imp-items in random order;
	sort cathedral-items in random order;

this is the randomize-others rule:
	if a random chance of 1 in 2 succeeds, now viewer-first is true;
	sort rustic-easy-items in random order;
	sort wells-hintables in random order;
	sort field-hintables in random order;
	sort clearing-hintables in random order;
	sort scapespace-hintables in random order;

this is the randomize-demo-dome rule:
	sort the table of xibits in random order;
	let wt be 0;
	repeat through table of xibits:
		increase orwt entry by wt;
		increment wt;
	sort the table of xibits in orwt order;

volume yes-no substitutes

[this lets the programmer skip over yes/no decides]

volume anagram and hint operations

book scaning

[* bscanned is both-scanned, escanned is either-scanned]

scaning is an action applying to one thing.

understand the command "scan" as something new.

understand "scan" as scaning.
understand "scan [thing]" as scaning.

rule for supplying a missing noun while scaning or sying or sning or sbing (this is the how to scan the air rule):
	if mrlp is stores:
		if player is in Cruelest Lectures:
			say "Nothing, until you catch [if suit ode is not examined]a song--which you recognize as the horribly motivational[else]more of[end if] [suit ode].";
			now noun is suit ode;
			now suit ode is examined;
			continue the action;
	else if mrlp is routes:
		if location is Harms Marsh:
			if darkness is in Harms Marsh:
				now noun is darkness;
				continue the action;
		if player is in Same Mesa:
			if THE BEAN is in Same Mesa:
				now noun is THE BEAN;
				continue the action;
			if MORF FORM is in Same Mesa:
				now noun is MORF FORM;
				continue the action;
	else if mrlp is troves:
		if player is in Loather Rathole:
			if Race Acre is in Loather Rathole:
				now noun is Race Acre;
			else:
				now noun is Eh At Heat;
			continue the action;
		if player is in Bustle Sublet:
			if sob ever verbose is in Bustle Sublet:
				now noun is sob ever verbose;
				continue the action;
			if stop post is reflexive:
				now noun is stop post;
				continue the action;
		if player is in Drain Nadir:
			if Id Cede is in Drain Nadir:
				now noun is Id Cede;
				continue the action;
	else if mrlp is presto:
		if player is in Dirge Ridge and leo is washed up:
			now noun is wzup;
			continue the action;
		if zo mavelt is touchable:
			now noun is zo mavelt;
			continue the action;
		if tom avlez is touchable:
			now noun is tom avlez;
			continue the action;
		if lev tzoma is touchable:
			now noun is lev tzoma;
			continue the action;
		if n-t-air is touchable:
			now noun is n-t-air;
			continue the action;
	else if mrlp is oyster:
		if player is in Fighter Freight:
			now noun is pale plea;
			continue the action;
		if player is in Lapsin Plains:
			if crate are in Lapsin Plains and crate is reflexive:
				now noun is crate;
				continue the action;
			else if bogus-trace is in Lapsin Plains:
				now noun is bogus-trace;
				continue the action;
			else if bogus-plains are reflexive:
				now noun is bogus-plains;
				continue the action;
		if player is in Sclerous Closures:
			if Achers Chaser Arches are reflexive:
				now noun is Achers Chaser Arches;
				continue the action;
		if player is in Anger Range:
			if pikes are moot and sausage is off-stage:
				now noun is HUNTER HUNT AREA;
				continue the action;
			if HUNTER HUNT AREA is in Anger Range:
				now noun is HUNTER HUNT AREA;
				continue the action;
			if sausage is touchable and sausage is reflexive:
				now noun is sausage;
				continue the action;
		if player is in Hardest Trashed Dearths:
			if cans are in Hardest Trashed Dearths:
				now noun is cans;
			else if pest pets are in Hardest Trashed Dearths:
				now noun is pest pets;
			else:
				now noun is eeks;
			continue the action;
		if ol trap is touchable and walleyes are moot:
			now noun is ol trap;
			continue the action;
		if player is in Plasm Lamps:
			if bogus-psalm are in Plasm Lamps:
				now noun is bogus-psalm;
			else:
				now noun is ant;
			continue the action;
		if player is in tenfold:
			if yapper is in tenfold:
				say "The settler goes crazy when pointed at the yapper.";
				now noun is yapper;
				continue the action;
			say "The settler goes crazy when pointed at the dialer.";
			if bogus-redial is touchable:
				now noun is bogus-redial;
			else if bogus-derail is touchable:
				now noun is bogus-derail;
			else if pins are touchable:
				now noun is pins;
			continue the action;
	else if mrlp is towers:
		if player is in Rawest Waster Waters:
			now noun is Earnest Eastern Neaters;
			continue the action;
		if player is in Dourest Detours:
			now noun is bogus-rousted;
			continue the action;
		if player is in Arid Den:
			now noun is bogus-dandier;
			continue the action;
	else if mrlp is otters:
		if player is in Minded Midden:
			if bleary barley is touchable:
				now noun is bleary barley;
				continue the action;
			if ed riley is in Minded Midden:
				now noun is ed riley;
				continue the action;
		if player is in Loop Pool:
			if sea cube is in Loop Pool:
				now noun is sea cube;
				continue the action;
			if sullenness us is in Loop Pool:
				now noun is sullenness us;
				continue the action;
			if eels are reflexive:
				now noun is eels;
				continue the action;
		if player is in Bran Barn:
			if ghoul hat is not moot:
				now noun is ghoul hat;
				continue the action;
			if gore ogre is in Bran Barn:
				now noun is gore ogre;
				continue the action;
			if vow here is in Bran Barn:
				now noun is vow here;
				continue the action;
		if player is in Disowned Downside and atmo moat is in Disowned Downside and parleys splayer players are not in Disowned Downside:
			now noun is atmo moat;
			continue the action;
		if player is in Perverse Preserve and raptor is in Perverse Preserve:
			now noun is raptor;
			continue the action;
		if player is in Lamer Realm and owls are in Lamer Realm:
			now noun is owls;
			continue the action;
		if player is in Reclusion Inclosure and parrot is in Reclusion Inclosure:
			say "The settler seems to give a reading when pointed at the parrot.";
			now noun is parrot;
			continue the action;
		if player is in Shiner Shrine and imp is in Shiner Shrine:
			now noun is imp;
			continue the action;
		if player is in Clarthead Cathedral and whiners are in Clarthead Cathedral:
			now noun is whiners;
			continue the action;
	else if mrlp is others: [others]
		if player has fleeing feeling:
			now noun is fleeing feeling;
			continue the action;
		if player is in Clangier Clearing:
			if Ammo Gang is in Clangier Clearing:
				now noun is Ammo Gang;
				continue the action;
	say "You wave the settler, but it doesn't pick up any random data.";
	reject the player's command;

does the player mean scaning the cans: it is likely.

does the player mean scaning the player: it is unlikely.

troves-scan is a truth state that varies.

a thing can be cscanned. a thing is usually not cscanned.
a thing can be ncscanned. a thing is usually not ncscanned.

definition: a thing (called scanee) is bscanned:
	unless scanee is cscanned, no;
	unless scanee is ncscanned, no;
	yes.

definition: a thing (called scanee) is escanned:
	if scanee is cscanned, yes;
	if scanee is ncscanned, yes;
	no.

before scaning (this is the general settler reject rule) :
	if noun is part of the settler, say "The settler's pretty powerful, but it's not four-dimensional, so it can't wrap to scan itself--or parts of itself." instead;
	if player does not have letters settler:
		if settler is touchable, silently try taking the letters settler;
		if player does not have letters settler:
			say "You have no scanning item[if player is not in Dusty Study], and you should, unless this is a test, so this could be a BUG[else if report-porter-knocks]. You will, but you probably should answer the door first[else if latches are touchable]. Maybe figure what to do with those latches[else if player is in dusty study]. You'll probably find one, but you don't have one, yet[else]. This looks like a BUG, since you should keep the letters settler all game[end if]." instead;

before scaning (this is the check as scanned if player can have/take settler rule) :
	if mrlp is dome, say "Old habits die hard! Relax and observe. You don't need to do solve any puzzles here." instead;
	abide by the general settler reject rule;
	if noun provides the property cscanned:
		if cheat-on is true:
			now noun is cscanned;
		else:
			now noun is ncscanned;
	else if noun is not location of player:
		d "[noun].";
		say "The letters settler isn't THAT long-range." instead;

before scaning when mrlp is troves (this is the troves smart alecky rule):
	if troves-scan is false:
		say "You're a bit worried this scanning shouldn't work here, since it is all about you. but then you realize you are just utilizing and leveraging proprietary technology, and that makes you feel like more of a go-getter.[line break]";
		now troves-scan is true;

first-good-scan is a truth state that varies.

to oscan (scanee - a thing):
	now scanee is ncscanned;
	now scanee is cscanned;

check scaning a prefigured thing:
	if noun is specter, continue the action;
	if noun is not dialer, say "Wait. Maybe you don't need to scan anything with the settler. You remember you've already figured what to do, here, just not when. The information's in your pedanto-notepad." instead;

carry out scaning: [note: "the rule fails" is needed here because of the scan-both rule. I suppose we could have a scan-both flag, but that gets into global variables etc.]
	if debug-state is true, say "DEBUG: [noun] being scanned.";
	if mrlp is demo dome:
		say "Questing time is over. No need.";
		the rule fails;
	if noun is big l or noun is big-let:
		say "Nothing happens. It's probably some sort of hint or guide in itself, not something you need to mess with.";
		the rule fails;
	if noun is player:
		say "According to your cutting-edge blend of magic and technology, you are either perfect as you are, or too boring to change anything else.";
		the rule fails;
	if noun is letters settler:
		say "The settler is not flexible, despite its flexible options. But it would show [full-monty of settler] if it were.";
		the rule fails;
	if a-text of noun is "":
		say "The letters settler registers nothing.";
		the rule fails;
	if first-good-scan is false:
		now first-good-scan is true;
		say "[one of]Ta-da! Data (a tad.) [or]Ta-dum! Datum! [at random]It's not an odd DOA doodad! [if mrlp is Ordeal Reload]You recall writing in your notepad about your tagged gadget from your first adventure and how it helped you determine what you needed to change an object to. But the settler has new colors. You'll need to find what they're for.[paragraph break][end if]";
		ital-say "if your interpreter supports Glulx, see the top for a graphical representation of the colorings. You can also type [b]SPACE ON[i] or [b]SON[i] to space out the text if you are visually impaired, or [b]NO SPACE[i] or [b]NOS[i] to lump the text back. Also, [b]LA[i] repeats what you scanned last, if the window on top does not show it.";
		pad-rec-q "spaces";
	now last-scanned-thing is noun;
	say "[sb-choose][full-monty of noun].";
	let modnoun be scannote-idx of noun;
	if taxer-not-extra is true, the rule succeeds;
	repeat through scannotes of mrlp:
[	if noun is an thing-to-note in scannotes of mrlp: ?! doesn't work]
		if modnoun is thing-to-note entry:
			if there is no postscanclue entry:
				if cheat-on is true and give-generic-question-hint is true, ital-say "[b]PAD QUESTION MARK[i] should give generic question-mark hints, as a reminder. Toggle this nag with [b]QMH[i].";
				the rule succeeds;
			choose row with a thing-to-note of modnoun in scannotes of mrlp;
			if bothscan entry is true:
				now modnoun is ncscanned;
				now modnoun is cscanned;
			if b-only entry is false or cheat-on is true: [if cheat is off and it's b-text only clue, ignore.]
				if clue-only-once entry is false or clued-yet entry is false:	[special clued-once text ignored]
					now clued-yet entry is true;
					say "[line break][postscanclue entry][line break]";
			the rule succeeds;
	the rule succeeds;

to decide which thing is scannote-idx of (th - a thing): [this used to be for N and S of the Midden. I may (very unlikely) need it in the future, so it stays, despite being trivial.]
	decide on th;

to say sb-choose:
	say "Your settler registers ";
	if sb-cur is true, say "([if cheat-on is true]cheat on[else]no cheat[end if]) "

chapter some very general scaning rules

before scaning (this is the check for cheats the player doesn't want rule):
	if noun is a location, continue the action;
	if cheat-on is true and noun is spoilable-now:
		if squee is true:
			say "You hear loud squealings from the equals sign. This may be a near or total spoiler. Go ahead anyway?";
			if the player regex-prompt-consents, continue the action;
			say "Okay." instead;
		if squee-warn is false and equals-pushed is false:
			now squee-warn is true;
			ital-say "this may be a bit of a spoiler. If you want to disable it, you can push the equals sign. This warning will not appear again.";
			say "You feel foreboding this may be a bit too much of a clue. Do you still want to see the settler reading?";
			if the player yes-consents, continue the action;
			say "Okay." instead;

check-spoil is a truth state that varies.

after scaning (this is the note equals sign rule):
	if noun is spoilable-now and squee is true and check-spoil is false:
		say "NOTE: if you want to disable/warn a spoiler like this in the future, push the equals sign.";
		now check-spoil is true;
	continue the action;

ever-parse is a truth state that varies.

after scaning (this is the tell us about x in parse mode rule) :
	if parse-now is true and ever-parse is false:
		now ever-parse is true;
		ital-say "x means a consonant, as nothing in this game becomes anything with an x in it, and the dash means a vowel.";

before scaning a clue-used thing: say "You read what the settler says--and you realize you already took care of [the noun] or something closely related." instead;

before scaning a reflexed thing: if noun is not sit a nag and noun is not players, say "The settler emits a BEEEOOOP as if to say there's no need to do any more, there." instead;

chapter room-specific check-scaning rules

check scaning location of the player (this is the location scan rule):
	d "scaning player location.";
	abide by the loc-scan-rule of mrlp;
	say "You can't find anything specific to scan, and nothing shows up on your settler." instead;

this is the scan-troves-loc rule:
	if location of player is Loather Rathole:
		if Race Acre is touchable:
			say "Scanning the Race Acre turns up something...";
			try scaning Race Acre instead;
		try scaning Eh At Heat instead;
	if location of player is Econ Cone:
		if END PRONER POD is touchable, try scaning END PRONER POD instead;
		if cone-points is 0:
			if rivets-first is true:
				say "The rivets have a weird magnetic pull to them. As if there's brain waves in there pulling you towards it so it can tell you what to do.";
				try scaning rivets instead;
			else:
				say "The [b]PRAISE[r] text seems to pull your settler to it.";
				try scaning praise instead;
	if location of player is Bustle Sublet:
		if sob ever verbose is touchable, try scaning sob ever verbose instead;
		try scaning stop post instead;
	if location of player is Boarded Roadbed:
		if bee-score is 0:
			say "That bee is all up in your face. So you sort of scan it by default.";
			try scaning evil bee instead;
		try scaning L Clear Cellar instead;
	if location of player is Drain Nadir:
		if diapers are reflexive, say "Whoah, yeah, you're pretty bummed here! Well, not quite bummed enough to avoid pointing the settler at anything specific. There's the Ires Pad, the diapers, a spider..." instead;

this is the scan-routes-loc rule:
	if location of player is Cripple Clipper:
		say "Only the thickness sketchins pick up anything.";
		try scaning thickness sketchins instead;

this is the scan-presto-loc rule:
	if location of player is Hacks Shack and BUB DUDE EGG is touchable:
		say "As you contemplate further how to budge the code, your wave your settler at it.";
		try scaning BUB DUDE EGG instead;
	if wzup is touchable, try scaning wzup instead;
	if player is in Nowt Town, say "Your settler scans [if cheat-on is true]RGR?[else]RYRR[end if] as you wave it around Nowt Town." instead;
	if volt maze is touchable, try scaning volt maze instead;

this is the scan-oyster-loc rule:
	if location of player is Posh Hops Shop:
		say "The settler points towards the door and the LOLstr trolls.";
		try scaning LOLstr trolls instead;
	if location of player is freight, try scaning pale plea instead;
	if location of player is Hardest Trashed Dearths:
		say "The air's full of eeks, which your settler picks up.";
		try scaning eeks instead;
	if location of player is plains and bogus-plains is reflexive, say "[full-monty of bogus-plains]" instead;

this is the scan-otters-loc rule:
	if location of player is Minded Midden and bleary barley is touchable, try scaning bleary barley instead;

this is the scan-others-loc rule:
	if location of player is clangier clearing:
		if mango is off-stage, say "As you listen to the crowds, you notice [full-monty of Ammo Gang] on your settler." instead;
	if location of player is Swell Wells:
		if sorer bogey is touchable, try scaning sorer bogey instead;

chapter qmhing

qmhing is an action out of world.

understand the command "qmh" as something new.

understand "qmh" as qmhing when player has settler.

give-generic-question-hint is a truth state that varies.

carry out qmhing:
	now give-generic-question-hint is whether or not give-generic-question-hint is false;
	say "Generic question hinting for settler cheat mode is now [on-off of give-generic-question-hint].";
	the rule succeeds;

book begin-region hints

section special parser errors

rule for printing a parser error when the latest parser error is the didn't understand error and the number of words in the player's command > 1:
	if cur-score of mrlp < 10 and mrlp is not parsewrned:
		choose row with thisreg of mrlp in table of region long command messages;
		if there is a check-this entry:
			process the check-this entry;
			unless the rule succeeded, continue the action;
		say "[specwarn entry][line break]";
		now mrlp is parsewrned;
		the rule succeeds;
	continue the action;

this is the perrot-moot rule:
	if perrot is moot, the rule succeeds;

to say pars-trub:
	say "The parser had trouble understanding that (multi-word) command. While it's possible there's a more mundane reason, perhaps you were trying to change something[one of], in which case, one word (or a compound word) usually works[if player is in dusty study], though some of the diorama's contrived examples have spaces[end if][or][stopping].[paragraph break]So here is a one-time general guideline on what to do in this area: ";

table of region long command messages
thisreg	check-this	specwarn
Ordeal Reload	perrot-moot rule	"[pars-trub]You need to change certain things to other things."
stores	--	"[pars-trub]you need to change the stores, here, like you changed the palm, rifle, plates and plaster psalter, and you just need one word."
presto	--	"[pars-trub]one word of sufficient force will work here. While one word is eight letters long and a Last Lousy Point is nine, most are four or five."
routes	--	"[pars-trub]one word should work here, with no preface necessary. While one word is eight letters long, the rest are around five or six."
troves	--	"[pars-trub]one word will work here, and you won't need to specify details. While some last lousy points are up to eleven letters, most you need to get through are five or six."
towers	--	"[pars-trub]one final word will work here, to make things as they should be. It is eleven letters long, but everything else is shorter--most are from six to eight letters, though optional ones may be from five to nine."
oyster	--	"[pars-trub]one word will work here, though this game should accept fuller sentences. The longest words are seven letters, but many are four. There's a lot to do, but no one word should be too long."
otters	--	"[pars-trub]while some words are rather long, you [if cur-score of otters is 0]will[else]probably[end if] see how to guess a letter or two even [if power-back is false]when[else]now[end if] you've got your powers back."
others	--	"[pars-trub]you may need a variety of tricks, here. One word is twelve letters long, but some are as short as five. You can even overlook twenty puzzles."
demo dome	--	"[pars-trub]you don't need to do anything fancy here besides looking, moving, examining and reading. No puzzles at all."

book ordeal-reload-hinting

latches-warn is a truth state that varies.

settler-hint-yet is a truth state that varies.

to say next-to-see:
	unless sad ads are examined:
		if a random chance of 1 in 7 - stuff-found succeeds:
			say "You can page through the sad ads";
			continue the action;
	unless player has pedanto notepad:
		if a random chance of 1 in 6 - stuff-found succeeds:
			say "You should examine or take the notepad";
			continue the action;
	unless pad-consult is true:
		if a random chance of 1 in 5 - stuff-found succeeds:
			say "You can [b]CONSULT[r] the pad about something";
			continue the action;
	unless notice is examined:
		if a random chance of 1 in 4 - stuff-found succeeds:
			say "You can try reading the diorama to see what your powers might be";
			continue the action;
	unless bookshelf is examined:
		say "You can try examining the bookshelf";
		continue the action;
	unless diorama-flip is true:
		say "You can see about changing an item in the diorama";
		continue the action;
	unless tried-flip is true:
		say "You can try to do something with the tables or lamp, though the game won't let you, yet";
		continue the action;

tc-last is a number that varies. tc-last is usually 3.

every turn when player is in Dusty Study and stuff-found < 3:
	if turn count > tc-last + 2:
		ital-say "you may want to examine something [if stuff-found > 0]else [end if]to tell you about Yorpwald, like [if bookshelf is unexamined]the bookshelf[else if player does not have latches]a rich chair[else if notice is unexamined]the diorama and its instructions[else if ads are unexamined]the sad ads[end if].";
		now tc-last is turn count;

this is the ordeal-reload-hinting rule:
	if stuff-found < 3, say "[one of]You should look around and examine stuff. Someone will eventually interrupt you.[or][next-to-see].[stopping]" instead;
	if latches are touchable:
		if latches-warn is false:
			say "You figure there must be a couple ways out, but the latches can become something--Nat Egam wouldn't have sent them to you, otherwise.";
			now latches-warn is true;
		try objhinting latches instead;
	if location of player is study:
		if Report Porter Perrot is in Dusty Study, say "Talk to [perrot] to get some back story. There's nothing critical, though." instead;
		if Report Porter Perrot is off-stage, try objhinting isolani liaison instead;
		if player does not have lamp, try objhinting palm instead;
		if settler-hint-yet is false:
			if tables are in Dusty Study and niche is in Dusty Study and meet bans are in Dusty Study:
				say "You have three ways out of the study. You may wish to [b]HINT SETTLER[r] or [b]HINT DIORAMA[r] to figure what to do with them.";
			else:
				say "You have found a way out of the study. Any way gets you to a secret passage out of the Means Manse, though along the way, you may wish to [b]HINT SETTLER[r] or [b]HINT DIORAMA[r] to figure what to do with them.";
			now settler-hint-yet is true instead;
		if tables are in Dusty Study, try objhinting tables instead;
		if niche is in Dusty Study, try objhinting niche instead;
		if meet bans are in Dusty Study, try objhinting meet bans instead;
		say "You should move along, now, unless you want to mess with the settler and diorama to be sure of what you are doing." instead;
	if location of player is heights:
		if ramp is in Highest Heights, try objhinting ramp instead;
		if pram is in Highest Heights, try objhinting pram instead;
		say "[bug-report]";
		the rule succeeds;
	if location of player is Farming Framing:
		if sitar is touchable, try objhinting the sitar instead;
		if stair is touchable, try objhinting the stair instead;
		say "[bug-report]" instead;
	if player is in Carven Cavern:
		if plates are in Carven Cavern, try objhinting plates instead;
		if plaster is in Carven Cavern, try objhinting plaster instead;
		if apertured departure is touchable, try objhinting apertured departure instead;
		if player has latches, try objhinting latches instead;
	if player has settler and settler is not examined, say "You should probably examine the settler." instead;
	if Elmo is touchable, say "Elmo has some hints about the settler, but you can ignore him and still solve the game with maximum points. The small talk in particular can be ignored, unless you enjoy anagrams." instead;
	if player is in Carven Cavern, say "You can just go [b]IN[r] to the main hub area." instead;
	say "Nothing left to do here in your manse. You should be able to go [b]IN[r] to start your adventures." instead;

book others-hinting

check objhinting Elmo when see-rifle:
	say "You could deal with Elmo okay, but his [b]RIFLE[r]...";
	try objhinting rifle instead;

viewer-first is a truth state that varies.

enuf-fruit-poke is a truth state that varies.

this is the others-hinting rule:
	if player has moss cap, try objhinting moss cap instead;
	if player has s-i and player has storage, say "You probably want to put the sonic icons in the slot." instead;
	if player has s-c, try objhinting s-c instead;
	if player has icons, try objhinting icons instead;
	if player has coin, try objhinting coin instead;
	if player has coins, try objhinting coins instead;
	if curtis-level < 4 and moss cap is moot and player is not in Rustic Citrus:
		let levdelt be (fruits-flipped / 4) - curtis-level;
		say "Flipped [fruits-flipped] Level [curtis-level] delta [levdelt].";
		if levdelt > 1, say "You can go back to Curtis for [if player has coin or player has icon or player has coins or player has icons or player has s-c or player has s-i]another[else]a[end if] reward[if levdelt > 2]. More than one, in fact[end if][if fruits-flipped >= 20]. You've gotten all the fruits you need[end if].";
		if first-hint-check is false, the rule succeeds;
		say "Falling through to check the fruit we would've hinted for test scripts...";
	if droll dollar is not off-stage and enuf-fruit-poke is false:
		now enuf-fruit-poke is true;
		say "You have gotten enough fruits, so from here on out you'll need to hint something specific if you want to change it. You'll want to go [if player is in Gates Stage]north of the gates[else if Gates Stage is visited]back north to the Gates Stage[else]north[end if]." instead;
	if player has passport:
		if Gates Stage is unvisited, say "You haven't visited the Gates Stage north of the Swell Wells, yet. That's where you can use the passport." instead;
		if gates-score is 2, say "Go north to win!" instead;
		if viewer-first is true and viewer is not reflexed, try objhinting viewer instead;
		if searcher is not reflexed, try objhinting searcher instead;
		if viewer is not reflexed, try objhinting viewer instead;
		try objhinting passport instead;
	if player is in Gates Stage:
		if Scape Space is unvisited, say "Try going down from the Swell Wells." instead;
		if passport is off-stage, say "You need ID to get past the gate. There are no government agencies, so maybe you can get one illicitly." instead;
		say "You will find ID inside the So-Great Storage in the Scape Space." instead;
	if player is in Scape Space:
		if droll dollar is off-stage, say "You'll eventually want to get that So-Great Storage down the road.";
		if So Great Storage is in Scape Space and player has droll dollar, try objhinting So Great Storage instead;
	abide by the fruit-hint rule;
	if player is in Rustic Citrus and ruts circuits are touchable, say "You can [b]EXAMINE[r] the ruts circuits to discover more things to change to fruits." instead;
	say "Nothing specific [if player is in Scape Space or player is in Rustic Citrus]left [end if]to do here[if curtis-level < 4], but there are other places where you can make fruits to give to Curtis[else if player has dollar], though you will want to trade that dollar[else if player has storage], though you need to open the storage[else if player has passport], but perhaps the passport will get you through the gates[end if][if fruits-left-here > 0]. There [fruits-to-clear] you can still pick off here[end if].";
	the rule succeeds;

to say fruits-to-clear: say "[if fruits-left-here is 1]is[else]are[end if] [fruits-left-here in words] fruit[if fruits-left-here > 1]s[end if]"

to decide which number is fruits-left-here:
	decide on number of touchable fruit-to-find fruits;

to decide which number is fruits-left:
	decide on number of fruit-to-find fruits;

definition: a fruit (called fr) is fruit-to-find:
	if fr is moot or fr is held, no;
	yes;

to decide whether got-all-fruits:
	if number of fruit-to-find fruits is 0, yes;
	no;

box-down-road is a truth state that varies.

section random fruit hinting

[ !! if you add a fruit, change one of these lists. Also, fru.py checks the code here]

rustic-easy-items is a list of things variable. rustic-easy-items is { lumps, spear, pagers, slime }.

rustic-hard-items is a list of things variable. rustic-hard-items is { sated stead, recs hire re riches, eerie blurbs, harmonicas, id mantra mad train, magenta rope, omen prism, peanut cola }

wells-hintables is a list of things variable. wells-hintables is { green stain, miser ruble, PSA Elp, riot cap, sorer bogey, stucco }.

field-hintables is a list of things variable. field-hintables is { barber sickle, barren cries, barriers west, buried raft, mean trowel, pipe panel lie pen app, pryer bars, rapt figure }.

clearing-hintables is a list of things variable. clearing-hintables is { Ammo Gang, auction caution, lemons, melon, nectarine, peach, prices precis, quince, i solve voiles }.

scapespace-hintables is a list of things variable. scapespace-hintables is { a banna, a brr hub, Dr Severe, orange }

to decide which list of things is my-fruit-list:
	if moss cap is not moot, decide on rustic-easy-items;
	if player is in Rustic Citrus, decide on rustic-hard-items;
	if player is in Swell Wells, decide on wells-hintables;
	if player is in Filed Field, decide on field-hintables;
	if player is in Clangier Clearing, decide on clearing-hintables;
	if player is in Scape Space, decide on scapespace-hintables;

this is the fruit-hint rule:
	repeat with hobj running through my-fruit-list:
		if hobj is touchable and hobj is not reflexed, try objhinting hobj instead;
	if player is in Scape Space and droll dollar is off-stage, the rule succeeds; [We already gave a warning in the main others-hinting code]

book stores-hinting

this is the stores-hinting rule:
	if location of player is Cruelest Lectures, say "[one of]The whole bit about nouns won't work here. The people who drug, err, dragged you here said so.[plus][or]It's tough to figure how to leave, and no normal method does the trick.[plus][or][b]TEDIOUS[r] is one clue.[plus][or]The Rehabs Basher will also give you [his-her] '[b]I USED TO[r]' litany.[plus][or]How can you leave?[plus][or]Studio E gives you some disturbing truths. You can see where all the vowels go, by the greens on your settler.[plus][or]You can cross out the consonants from your other clues to kick people [b]OUTSIDE[r].[minus][cycling]" instead;
	if roved is true:
		if Store H is touchable, try objhinting Store H instead;
		say "Go through the Throes Hoster to the [b]OTHERS[r] area." instead;
	if number of game-critical stos is 0:
		say "(Note: you've cleared all the stores you need to[if number of unsolved regions > 0], though you still have work to do behind them[end if].)[line break]";
		if Store K is touchable, try objhinting Store K instead;
		if Store N is touchable, try objhinting Store N instead;
		say "[if debug-state is true]DEBUG: [list of unsolved regions][end if] You have nothing more to do here. You need to [if number of unsolved regions > 0]work your way through what's behind other stores, then [end if]go between the otters for your final destiny!" instead;
	if number of portals in Strip of Profits > 0, say "While [the slickest portal in Strip of Profits] [if number of portals in Strip of Profits is 1]leads to a new adventure[else]is what I'd recommend entering[end if], here is how to deal with another store...[paragraph break]";
	if cur-hint-sto is not in Strip of Profits:
		if Store U is in Strip of Profits:
			now cur-hint-sto is Store U;
		else if Store V is in Strip of Profits:
			now cur-hint-sto is Store V;
		else if Store P is in Strip of Profits:
			now cur-hint-sto is Store P;
		else if Store Y is in Strip of Profits:
			now cur-hint-sto is Store Y;
		else if Store W is in Strip of Profits:
			now cur-hint-sto is Store W;
		else if Store T is in Strip of Profits:
			now cur-hint-sto is Store T;
		else:
			say "You don't need to change any more stores now." instead; [should not happen but just in case]
	try objhinting cur-hint-sto instead;

to sto-hint (stosto - a sto): say "Sto hint for [stosto].";

book presto-hinting

check objhinting drive:
	if disk is in Drive A:
		if be troo e robot is reflexed, say "You have the disk drive working." instead;
		try objhinting be troo e robot instead;

to say maze-or-pass:
	say "[if ether is moot][Saps Pass][else]the volt maze[end if]"

this is the presto-hinting rule:
	if cur-score of presto is 0 and spoilit is false, say "[one of]You haven't gotten any points yet, so you probably want to find what sort of word is used here.[plus][or]The yelling and the curst crust are clues. You will be using dramatic words. You could ask yourself what sort of word is remaining.[plus][or]You may curse yourself if you find out.[plus][or]The words are interjections.[minus][cycling]" instead;
	if hump is touchable, try objhinting hump instead;
	if plebe is touchable:
		if spoilit is true and player does not wear tsar star:
			say "The plebe grimaces as you try to eat the crust. Perhaps there's preparation you need to do before bossing the plebe around.";
			now spoilit is false instead;
		try objhinting plebe instead;
	if player is in austerer:
		if ye hoop is in austerer, try objhinting ye hoop instead;
		if spoilit is false, say "You are done here in Austerer Treasure. The earring [if earring is moot]changed into the censer[else]will change when the time is right[end if]." instead;
	if tsar star is touchable and tsar star is in Char Arch, try objhinting tsar star instead;
	if dart is touchable and dart is in cistern, try objhinting dart instead;
	if location of player is Dirge Ridge:
		if Leo is in Dirge Ridge and Leo is fightin, try objhinting Leo instead;
		if Rand is in Dirge Ridge and Rand is fightin, try objhinting Rand instead;
		if Rand is washed up and Leo is washed up, try objhinting wzup instead;
		if spoilit is true, now spoilit is false;
		say "[if spoilit is true]Eating the crust here would be too depressing with nothing concrete to do[else]You're done here in Dirge Ridge[end if][if Leo is in Dirge Ridge and ether is not moot]. Maybe [l-n-r]'s combined muscle could help you somewhere[end if]." instead;
	if boing is reflexive and popgun is touchable, try objhinting boing go bin instead;
	if popgun is touchable and ether is not moot:
		if dart is not touchable, say "You need to find ammo for your popgun." instead;
		if dart is not in popgun and dart is not moot:
			if spoilit is true, now spoilit is false;
			try objhinting popgun instead;
	if player is in Marines Seminar Remains:
		if spoilit is true:
			now spoilit is false;
			say "Ugh. The crust feels like army rations. Not now." instead;
		say "The popgun [if player has popgun]was[else]is[end if] all the Marines Seminar Remains has to offer." instead;
	if location of player is in-the-maze:
		try objhinting n-t-air instead;
	if player is in Grey Gyre:
		if volt maze is in Grey Gyre, try objhinting volt maze instead;
		if ether is not moot:
			if spoilit is false:
				if player does not have popgun, say "[one of]You'll need a weapon to get past the ether.[or]The popgun in the Marines Seminar Remains.[cycling]" instead;
				if Rand is not eager or Leo is not eager, say "[one of]If you've gone through the ether alone, you'll see you've been outnumbered.[or]You'll need allies to even up the numbers in the ether to the north.[or]Anyone here you seen who likes a fight?[or]Fetch the fellows south of the cistern, first.[cycling]" instead;
			else:
				if dart is not in popgun or boing is reflexive or Leo is not in Grey Gyre, say "The ether turns your stomach too much to eat the crust. It's dangerous. You need to plan a way through." instead;
			try objhinting ether instead;
	if player is in Grey Gyre or player is in Char Arch:
		if Hacks Shack is unvisited:
			if spoilit is false, say "You're all done here for now[if player is in Char Arch]. The yak can be helped later[end if]. You will want to [if ether is not moot]figure a way past the ether to the north[else if Saps Pass is not visited]see what's north[else if lawl wall is not moot]get by the lawl wall[else if hacks shack is unvisited]enter the shack to the north[else]take care of business in the [shack][end if]." instead;
	if player is in Saps Pass:
		if lawl wall is touchable, try objhinting lawl wall instead;
		if Hacks Shack is unvisited:
			if harpings phrasing is touchable and shack is unvisited:
				if Leo is touchable, try objhinting harpings phrasing instead;
				say "[if spoilit is true](Favorite bad word,) you think, I'd rather see what's to the north[else]You're all done here in the Phat Path. Go north to the shack[end if]." instead;
	if spoilit is true:
		if Dirge Ridge is not visited or Austerer Treasure is not visited or Marines Seminar Remains is not visited:
			now spoilit is false;
			say "Before taking a bite, you wonder if you've visited everywhere you can yet." instead;
		if ye hoop is in austerer and austerer is visited, say "You think to [b]YE HOOP[r] you saw in Austerer Treasure." instead;
	if Hacks Shack is visited:
		if hump is not moot, try objhinting hump instead;
		if censer is not moot, try objhinting censer instead;
	if disk is touchable and skid is off-stage, try objhinting disk instead;
	if yak is touchable and spoilit is false, try objhinting yak instead;
	if flea is touchable, try objhinting flea instead;
	if drab yoke is touchable:
		if yak is touchable, say "[if spoilit is true]You pause before eating the crust. [end if]The yak [if skid is off-stage]probably needs to be carried with something you don't have yet[else if skid is not touchable]could be coaxed onto the skid you left[else if leaf is off-stage]could use some food, but you haven't found any[else if player has leaf]might like the leaf if you put it on the skid[else]needs to be pushed north[end if]." instead;
		try objhinting drab yoke instead;
	if Hacks Shack is visited:
		if yak is not moot: [?! rearrange this]
			if spoilit is true, say "Ugh, the crust looks worse than yak food. You wonder what to do with the yak [if yak is touchable]here[else]back in [location of yak]." instead;
			say "You need to find the bored yak and bring it back to the shack (ack, Mac!) Maybe you can guess what its drab yoke holds." instead;
	if player is in Hacks Shack:
		if disk is not in drive a, say "You [if spoilit is true]would rather[else]should[end if] [if skid is in Hacks Shack]change the skid back to the disk, then [end if]put the disk in the disk drive." instead;
		if can-put-on-slab, say "You [if spoilit is true]would rather[else]can[end if] put the [k-and-c] on the slab." instead;
		if be troo e robot is reflexive, try objhinting be troo e robot instead;
		if Clack Ops Locs Pack is not moot, try objhinting Clack Ops Locs Pack instead;
		if caps lock is not part of the keyboard:
			if spoilit is true, say "You curse yourself for not putting the caps lock button in the keyboard." instead;
			try objhinting caps lock instead;
		if fount is touchable, try objhinting fount instead;
		if futon is touchable and peels speel is reflexive:
			try objhinting peels speel instead;
		if Im Le Cop polemic is reflexive, try objhinting Im Le Cop polemic instead;
		if coal is touchable, try objhinting coal instead;
		if gum is touchable, try objhinting gum instead;
		if ALocalCo cola is touchable:
			if spoilit is true:
				say "No, you'd rather pour the cola into [if mug is touchable]the mug[else]some simple drinking container[end if]. It's slightly less nasty than the crust.";
				now spoilit is false instead;
			try objhinting ALocalCo cola instead;
		if BUB DUDE EGG is reflexive, try objhinting BUB DUDE EGG instead;
		if usb is touchable, try objhinting usb instead;
	say "[if spoilit is true]You can't see much to do here, so you save your crust for somewhere more active[else]There's not much to do here. You may need to look elsewhere[end if]." instead;

to decide whether can-put-on-slab:
	if player has keyboard and keyboard is not on slab, decide yes;
	if player has computer screen and computer screen is not on slab, decide yes;
	decide no;

to say k-and-c:
	say "[if player has keyboard and player has computer screen]keyboard and screen[else if player has keyboard]keyboard[else]screen[end if]";

to say hereish of (rm - a room):
	say "[if player is in rm]here[else]in [rm][end if]"

book routes-hinting

prep-spoil is a truth state that varies.

to say p-spo: now prep-spoil is true;

check objhinting when player is in Same Mesa (this is the hide Gast hints rule):
	if noun is sit a nag or noun is side art or noun is WOE BOW BELL or noun is Rude N Nuder or noun is Gast:
		if Cleric Circle is unvisited, say "You aren't ready to do anything with the [sit a nag] yet. The church may make you feel better about things." instead;
		if list o toils is unexamined, say "You may want to look at the list-o-toils first." instead;

does the player mean objhinting Gast when mrlp is routes: it is very likely;

the hintstub rules are an object-based rulebook.

a hintstub rule for a thing (called th) (this is the point-to-mesa rule):
	if th is in Same Mesa:
		if player is in Same Mesa, try objhinting th instead;
		say "[if spoilit is true]The spoon reflects[else]You should go[end if] back outside.";
		now spoilit is false instead;

this is the routes-hinting rule:
	if cur-score of routes is 0 and prep-spoil is false, say "[one of]You maybe haven't figured out what sort of word is needed in this zone yet. Oscar's, Pat's, and the scripture picturers are clues.[plus][or]They're relatively short words, so maybe you can guess from them.[plus][or]Did you notice you can't seem to go in any compass direction?[plus][or]What's another sort of word that can describe a direction?[plus][or]It anagrams Poison Stripe.[plus][or]Prepositions[p-spo].[minus][cycling]" instead;
	abide by the point-to-mesa rule for bev o be ova;
	abide by the point-to-mesa rule for MORF FORM;
	abide by the point-to-mesa rule for THE BEAN;
	if location of player is Same Mesa: [this is in no particular order, other than pointing the player to the easier reagents first]
		if Cleric Circle is unvisited, try objhinting scripture picturers instead;
		if Idle Deli is unvisited, try objhinting adsorbing signboard instead;
		if Adobe Abode is unvisited, try objhinting lairage regalia instead;
		if sit a nag is reflexive, try objhinting sit a nag instead;
		if side art is reflexive, try objhinting side art instead;
		if WOE BOW BELL is touchable, try objhinting WOE BOW BELL instead;
		if Rude N Nuder is touchable, try objhinting Rude N Nuder instead;
		if Gast is in Same Mesa, try objhinting Gast instead;
	if location of player is Cleric Circle:
		if list o toils is unexamined:
			say "[if spoilit is true]The spoon reflects to[else]You will want to examine[end if] the list-o-toils.";
			now spoilit is false instead;
		if spoilit is true:
			say "The spoon reflects back outside.";
			now spoilit is false instead;
		try objhinting list o toils instead;
	if location of player is Idle Deli:
		if seed pit is reflexed:
			say "[if spoilit is true]The spoon points you out of[else]You're done here in[end if] the Idle Deli.";
			now spoilit is false instead;
		try objhinting seed pit instead;
	if location of player is Adobe Abode:
		if pipe soot is in adobe, try objhinting pipe soot instead;
		say "[if spoilit is true]The spoon points you out of[else]You're done here in[end if] Oscar's.";
		now spoilit is false instead;
	if location of player is Harms Marsh:
		if NULL IT unit is in Harms Marsh, try objhinting NULL IT unit instead;
		if odd run on aura is in Harms Marsh, try objhinting odd run on aura instead;
		if noon gag is in Harms Marsh, try objhinting noon gag instead;
	if location of player is Ripe Pier, try objhinting admits mist ad instead;
	if location of player is Cripple Clipper, try objhinting thickness sketchins instead;
	if location of player is Sonancy Canyons:
		if bent ewe is reflexive, try objhinting bent ewe instead;
		if hurt hog is reflexive, try objhinting hurt hog instead;
		try objhinting yob den instead;
	if list o toils is unexamined, say "[if spoilit is true]The spoon reflects to[else]You will want to examine[end if] the list-o-toils." instead;
	if player has stupor sprout and player has U NERD ENDUR REDUN and player has pipe soot, say "[if spoilit is true]The spoon points[else]You should return[end if] to the Cleric Circle now you have all the items." instead;
	if spoilit is true:
		now spoilit is false;
		say "You can't angle the spoon productively. Maybe use it later." instead;
	repeat with QQ running through quest-items:
		if QQ is off-stage:
			if QQ is stupor sprout, say "You need to [if Idle Deli is unvisited]figure how to enter[else]go back to[end if] Pat's for the stupor sprout." instead;
			if QQ is pipe soot, say "You need to [if Adobe Abode is unvisited]figure how to enter[else]go back to[end if] Oscar's for the pipe soot." instead;
			if QQ is U NERD ENDUR REDUN, say "You need to work out how to sit all over the [Gast]'s [sit a nag] to get Rude [']N Nuder (which is, trivial spoiler, the runed book)." instead;
	say "I can't give you any advice right now. You may want to hint individual items or even let me know via a transcript (or even a save file) at [email]." instead;

book troves-hinting

ever-previewed is a truth state that varies.

sister-first is a truth state that varies.

this is the troves-hinting rule:
	if player is in Loather Rathole:
		if Race Acre is touchable, try objhinting Race Acre instead;
		try objhinting heat instead;
	if player is in Bustle Sublet:
		if verbose are in Bustle Sublet, try objhinting verbose instead;
		try objhinting post instead;
	if player is in Boarded Roadbed:
		if bee-score is 0:
			if evil-bee-second is true, try objhinting snore so arena instead;
			try objhinting evil bee instead;
		try objhinting L Clear Cellar instead;
	if player is in Drain Nadir:
		if diapers are in Drain Nadir, try objhinting diapers instead;
		try objhinting Id Cede instead;
	if player is in Boredom Bedroom:
		if lobster is in Boredom Bedroom and me arts are in Boredom Bedroom:
			if lobster-first is true, try objhinting lobster instead;
			try objhinting me arts instead;
		try objhinting LEAD instead;
	if player is in Browse Bowers, try objhinting Si Reed instead;
	if location of player is Econ Cone:
		if cone-points is 0:
			if rivets-first is true, try objhinting rivets instead;
			try objhinting praise instead;
		try objhinting END PRONER POD instead;
	if location of player is Upscale Capsule:
		if red vees are in Upscale Capsule, try objhinting red vees instead;
		if salt is in Upscale Capsule, try objhinting salt instead;
		if tressi is in Upscale Capsule and mbb is in Upscale Capsule:
			if sister-first is true, try objhinting Sister Tressi Siters instead;
			try objhinting mbb instead;
		try objhinting trance nectar instead;
	if spoilit is true:
		say "--hmmph. Do nothing. This is a BUG, but keep the truffle[no line break]";
		now spoilit is false instead;
	say "Pa Egg Pea has no further immediately practical advice, though it probably should. [bug-report]" instead;

evil-bee-second is a truth state which varies.

lobster-first is a truth state which varies.

book oyster-hinting

verb-warned is a truth state that varies.

trolls-hinted is a truth state that varies.

to decide which thing is oyster-item:
	if player is in Posh Hops Shop:
		if trolls-hinted is false and cur-score of oyster is 0, decide on LOLstr trolls;
		if cur-score of oyster is 3, decide on LOLstr trolls;
		decide on entry 1 of shop-hint-items;
	if player is in Olde Lode:
		if clam is in Olde Lode, decide on clam;
		if urn is in Olde Lode, decide on urn;
	if player is in Disease Seaside, decide on sabot boats;
	if player is on frat raft:
		if frat raft is reflexed, decide on oars;
		decide on frat raft;
	if player is in Fighter Freight, decide on plea;
	if player is in Anger Range:
		if pikes are in Anger Range:
			if pikes-clue is true, decide on pikes;
			decide on carps;
		if sausage is off-stage, decide on HUNTER HUNT AREA;
		if sausage is reflexive, decide on sausage;
	if sausage is reflexed and location of player is location of sausage, decide on sausage;
	if player is in Lapsin Plains:
		if bogus-trace is in Lapsin Plains, decide on bogus-trace;
		if crate is reflexive, decide on crate;
		if skis are in Lapsin Plains, decide on skis;
		if knob is touchable, decide on knob;
		if pans are touchable, decide on pans;
	if player is in Hardest Trashed Dearths:
		if pets are in Hardest Trashed Dearths:
			decide on pest pets;
		decide on eeks;
	if player is in Shuttle Hutlets:
		if tubs are in Shuttle Hutlets, decide on tubs;
		if prod is touchable, decide on prod;
	if player is in Lean Lane:
		if tea at a tee is touchable, decide on tea at a tee;
		if trout is reflexive, decide on trout;
		if Paw R Wrap is off-stage, decide on drawer;
	if player is in Sclerous Closures:
		if sardine is in Sclerous Closures:
			if player has wrap, decide on wrap;
			decide on sardine;
		if Achers Chaser Arches is reflexive, decide on Achers Chaser Arches;
	if player is in Horned Hedron:
		if walleyes are in Horned Hedron, decide on walleyes;
		if ol trap is in Horned Hedron, decide on ol trap;
	if bogus-enlarge is touchable, decide on bogus-enlarge;
	if player is in Rascal Craals:
		if player has digger and player has ruby, decide on ruby;
		if thin hint is touchable, decide on thin hint;
	if player is in Plasm Lamps, decide on ant;
	if location of player is Den Loft:
		if yapper is touchable, decide on yapper;
		if bogus-derail is touchable, decide on bogus-derail;
		if pins are touchable, decide on pins;
		if bogus-redial is touchable, decide on bogus-redial;
	decide on the player;

this is the oyster-hinting rule:
	if verb-warned is false and cur-score of oyster is 0:
		now verb-warned is true;
		say "The Posh Hops Shop is full of action. So that gives you a clue as to the commands to use." instead;
	if oyster-item is not player, try objhinting oyster-item instead;
	if sausage is reflexed and location of sausage is location of player, say "You need to show [the sausage] where the ruby is buried, now." instead;
	if player is in Sclerous Closures and Paw R Wrap is off-stage, say "You need to go [if Lean Lane is visited]back to Lean Lane[else]east of Anger Range[end if] for a small gift." instead;
	if player is in Anger Range and eeks are in Hardest Trashed Dearths, say "You may want to visit the trout to the east." instead;
	if player is in Rascal Craals and player does not have the digger, say "You don't have everything you need. You'll want to do some digging here. But you have nothing to dig with, yet." instead;
	if location of player is Rascal Craals:
		if ruby is off-stage, say "This would be a good place to bury something, but you're not sure what." instead;
		if thin hint is off-stage, say "There's something to do here, but it's not just anagramming." instead;
	if location of player is End Den, say "[one of]You're at a dead end, here. Exiting and re-entering won't make you any luckier. You need some sort of talisman to guide you through.[plus][or][if player has gleaner]You should really examine the gleaner[else if player has pearl]You should find the other half of the pear.[else]There are two fragments that can combine to form what you need. The arches and Lean Lane contain them[end if].[minus][cycling]" instead;
	if sausage is moot and ol trap is not moot:
		say "You can now go further in to the Hedron." instead;
	repeat through table of oyster location hint checkoffs:
		if there is no oyster-rm entry or location of player is oyster-rm entry, say "[oyster-txt entry][one of]. There may be bonus points here, but a generic [b]HINT[r] will not reveal them. You must [b]HINT[r] something specific[or][stopping]." instead;
	say "BUG. You should never have fallen through here in the hint code." instead;
	the rule succeeds;

table of oyster location hint checkoffs
oyster-rm	oyster-txt
Lean Lane	"You helped Tortu and got a paler pearl. That's all you need to do here"
Lapsin Plains	"With the way inside open, you no longer have anything you need to do here"
Horned Hedron	"You've found a way further in, and that's all you need here"
Sclerous Closures	"You've gotten passage north and found something important, so you're done here"
Shuttle Hutlets	"You've found what you needed here"
Anger Range	"You've gotten all you need from [the sausage]. [anger range] has nothing left to offer you"
--	"You've done all you need to do here to solve the Oyster region. If you'd like more specific clues, you can [b]HINT[r] something in your inventory or move elsewhere"

book towers-hinting

to say seesaw: say "[if Spec O Scope is examined]saw[else]could see[end if]";

to say to-center:
	repeat with mydir running through directions:
		if the room mydir of location of player is Treading Gradient:
			say "[mydir]";
			continue the action;
	say "[if player is in Actionless Coastlines]southwest[else if player is in Anemic Cinema or player is in Shaven Havens or player is in Fringe Finger]southeast[else if player is in Scope Copse or player is in Outer Route or player is in Topside Deposit]northeast[else if player is in Lost Lots or player is in Obscurest Subsector or player is in Danger Garden]northwest[else]some way--use the Spec-O-Scope[end if]";

this is the towers-hinting rule:
	if player is in Loftier Trefoil, try objhinting h-p instead;
	if location of player is Rawest Waster Waters, try objhinting eastern instead; [this can come first since it is a 1-off puzzle]
	if mardier admirer is touchable, try objhinting mardier admirer instead; [we do some intelligent hinting here for guardians of highest priority]
	if bonker is touchable, try objhinting bonker instead;
	if stinger is touchable, try objhinting stinger instead;
	if weeds are touchable, try objhinting weeds instead;
	if player is in Dourest Detours, try objhinting bogus-rousted instead;
	if player is in Dire and Arid Den, try objhinting drained dreadin instead;
	if guar-here > 0:
		d "Touchable guardians: [list of touchable guardians].";
		d "Guardian we are looking for = [guardian-to-hint].";
		if guardian-to-hint is touchable, try objhinting guardian-to-hint instead;
		d "Oops! A bug!";
		any-guardian-hint instead;
	if player is in Loftier Trefoil, try objhinting h-p instead;
	if Scope Copse is unvisited, say "You can just go north[if tarts are not heated], though you can hint the tarts in the toaster if you want[end if]." instead;
	if Treading Gradient is unvisited, say "There's an important location in the center of the Wildest Wilteds, [to-center] of here. You'll want to [if Treading Gradient is accessible]go[else]make a path[end if] there." instead;
	if raves saver is off-stage or ragged dagger is off-stage, say "See about the weeds in the Treading Gradient." instead;
	if Danger Garden is unvisited, say "You need to work your way to the east corner of the map[seen-scope]." instead;
	if Obscurest Subsector is unvisited, say "[if stinger is moot]Go east of [in-here-there of Danger Garden][else if bonker is moot]You need a way past the stinger[else]You need a way past the bonker[end if]." instead;
	if Shaven Havens are unvisited, say "[if mardier admirer is moot]You need someone, or something, north of where the mardier admirer was.[else]You need to work your way to the north bit[seen-scope].[end if]" instead;
	unless Dr Yow has been wordy, say "[one of]Dr. Yow can be manipulated, even behind the prison ropins.[or]There are two ways to make Dr. Yow wordy, but one is more useful than the other right away.[or]Dr. Yow can be [b]WORDY[r].[cycling]" instead;
	if duck is aloof, say "[one of]That duck [if duck is not touchable]in the Shaven Havens seemed[else]seems[end if] awfully lonely. Maybe you can bring it home?[or]The duck won't follow you. It doesn't trust your voice.[or]Someone else's voice, then, maybe?[or]Find anything that could record that?[or]The raves saver you saw is useful.[or]The raves saver is a tape recorder.[or]The raves saver has two buttons, [b]RETAPE[r] and [b]REPEAT[r], and you can probably figure what does what.[or]If you [b]RETAPE[r] Dr. Yow when [he-she] is [if Dr Yow has been wordy][b]WORDY[r][else]in a certain state[end if], that gets [his-her] voice.[cycling]" instead;
	if luck node is not moot:
		if player is not in Obscurest Subsector, say "You need to release Dr. Yow in the Obscurest Subsector next." instead;
		try objhinting luck node instead;
	if duck is not returned, say "[one of]You probably need to free Dr. Yow. It seems like the right thing to do.[or]Did you notice the duck is a lone duck? And the name on its nametag, Loud Neck?[or]The lock seems like it should be easy, but it isn't.[or]You can't unlock it. Wrong part of speech.[or][b]UNLOCKED[r].[cycling]" instead;
	if Actionless Coastlines is unvisited, say "[one of]You need to find the Actionless Coastlines.[or]It's in the northeast of the Scope Copse map.[or][if the-hostile is moot and atheists are moot]You've already cleared who you need to[else]You've got at least another guardian to get rid of in the Actionless Coastlines before an ally will appear[end if].[cycling]" instead;
	if player is in Outer Route:
		if weeds are in Treading Gradient, say "The item that fits in [the deviser] is behind the weeds in the Treading Gradient." instead;
		if gizmo is off-stage, try objhinting diverse deviser instead;
	if agnostic is lonely, say "[one of]Hm, the agnostic [if player is not in Actionless Coastlines]at the coastlines [end if]seems technically inclined but restless.[or]Who else might help [him-her] learn stuff?[or]Dr. Yow.[or][b]ASK AGNOSTIC ABOUT DOCTOR[r].[cycling]" instead;
	if agnostic is not in Obscurest Subsector and Dr Yow is in Obscurest Subsector, say "The agnostic will follow you wherever you go. Lead [him-her] back to the doctor in the subsector." instead;
	unless Dr Yow has been rowdy, say "[one of]Dr. Yow is versatile. You need [him-her] to be exciting around the agnostic.[or][he-she-c] can also be...[or]...[b]ROWDY[r].[cycling]" instead;
	if dinger is touchable, try objhinting dinger instead;
	if Outer Route is not visited, say "You need to visit west of the Scope Copse[if butlers are not moot]. The bluster butlers guard that area[end if]." instead;
	if player has gizmo, try objhinting gizmo instead;
	if Dr Yow is not moot, say "You need to [b]ASK AGNOSTIC ABOUT DR YOW[r], then make Dr. Yow [b]ROWDY[r]." instead; [?? flesh out]
	unless across-leak-lake:
		if location of player is not Actionless Coastlines, say "You'll want to head to the coastlines to make it across the water." instead;
		if boat-score is 1, say "NOTE: you don't strictly need to fix the boat entirely.[paragraph break]";
		if t-or-b is reflexive, try objhinting t-or-b instead;
		if turbos are reflexive, try objhinting turbos instead;
		if blaster is reflexive, try objhinting blaster instead;
		say "You can enter a bot boat and go safely across Leak Lake." instead;
	if player is in Mesprise Premises:
		if itster is touchable, try objhinting itster instead;
		if anodyne is touchable, try objhinting anodyne instead;
		if crocus is in top opt pot or player has crocus, try objhinting crocus instead;
		if player has top opt pot, say "You need to put something in the top opt pot to complete this optional area." instead;
	if player is in Mislit Limits, try objhinting curst palace instead;
	say "There seems to be nothing to do here. Or, rather, I'm stuck suggesting anything. Try moving around." instead;

to decide what number is boat-score: decide on boolval of (whether or not turbos are reflexive) + boolval of (whether or not blaster is reflexive);

to say seen-scope:
	if spec o scope is examined, say " you saw in the Spec-O-Scope"

to decide what indexed text is the vul of (pi - a picaro):
	choose row with the-from of pi in table of towers anagrams;
	decide on "[right-word entry]";

book otters-hinting

pickup-hint-warn is a truth state that varies.

to decide which thing is otters-cur-item: [this does not include LLPs. I don't want to distract the player.]
	if player is in Minded Midden:
		if bleary barley is touchable, decide on bleary barley;
		if Ed Riley is in Minded Midden, decide on Ed Riley;
	if player is in Disowned Downside:
		if parleys splayer players are touchable:
			if parleys splayer players are reflexive, decide on parleys splayer players;
			if yer all a yell'r is touchable, decide on yer all a yell'r;
			if last-thing-hinted is touchable and last-thing-hinted is a pickup-line:
				if spoilit is false and pickup-hint-warn is false:
					say "NOTE: ARO will take the most recent pickup line and continue to hint that one until you figure it out. Unfortunately, it can't specifically hint pickup lines easily from the parser, due to the ways the [pla-ma] express them.";
					now pickup-hint-warn is true;
				decide on last-thing-hinted;
			decide on pickup-to-hint;
		if Gretta is touchable, decide on Gretta;
		if atmo moat is in Disowned Downside and power-back is true, decide on atmo moat;
		if pen o nope is in Disowned Downside, decide on pen o nope;
	if player is in Bran Barn and power-back is false:
		if Mr Lee wears ghoul hat, decide on ghoul hat;
		if gore ogre is in Bran Barn, decide on gore ogre;
	if player is in Loop Pool and power-back is false:
		if sea cube is not moot, decide on sea cube;
		if eels are not reflexed, decide on eels;
	if player is in Shiner Shrine and sly imp is in Shiner Shrine, decide on sly imp;
	if player is in Clarthead Cathedral and whiners are in Clarthead Cathedral, decide on whiners;
	if player is in Lamer Realm:
		if owls are in Lamer Realm, decide on owls;
		if number of touchable reflexive animals > 1, decide on animal-to-hint;
	if player is in Perverse Preserve:
		if raptor is touchable, decide on raptor;
		if number of touchable pre-animal things > 1, decide on animal-to-hint;
	if player is in Reclusion Inclosure:
		if parrot is in Reclusion Inclosure, decide on parrot;
	if power-back is false, decide on the player;
	if player has whistle and whistle is not reflexed, decide on whistle;
	if player has medals and medals are not reflexed and medals are not prefigured, decide on medals;
	if Rancho Archon Anchor is visited, decide on Elvira;
	decide on the player;

to say tho-work of (rm - a room):
	if power-back is false:
		say ", but you might not be ready without your powers back";
	else if rm is Lamer Realm and adjsolve >= 3:
		say ", though you've done what you needed[if adjsolve is 4] and then some[end if]";
	else if rm is Perverse Preserve and nounsolve >= 3:
		say ", though you've done what you needed[if nounsolve is 4] and then some[end if]";
	else:
		say ", and you feel ready to challenge yourself there[if rm is visited] this time[end if]";

table of animal randomness
this-animal
thrones
corona
pines
nails
ocelots
leopard
satyr
badger

last-thing-hinted is a thing that varies. last-thing-hinted is the palm.

to decide which thing is animal-to-hint:
	if last-thing-hinted is touchable and last-thing-hinted is reflexive, decide on last-thing-hinted;
	repeat through table of animal randomness:
		if this-animal entry is touchable and this-animal entry is not reflexed, decide on this-animal entry;
	d "bad fallthrough in animal-to-hint.";
	decide on the player; [this should never happen]

shrine-imp-items is a list of things variable. shrine-imp-items is {motleyer, butlery, legendary}.

cathedral-items is a list of things variable. cathedral-items is {callosity, tallyhoing, jollity}.

to decide whether in-extra-powers:
	if power-back is false, no;
	if player is in Loop Pool and eels are reflexive, yes;
	if player is in Bran Barn and Gore Ogre is not moot, yes;
	no;

to decide whether got-extra-powers:
	if player is in Loop Pool and eels are reflexed, yes;
	if player is in Bran Barn and Gore Ogre is moot, yes;
	no;

to say other-power-room: say "[if player is in Loop Pool]Bran Barn[else]Loop Pool[end if]"

this is the otters-hinting rule:
	if player is in Loop Pool or player is in Bran Barn:
		if gore ogre is moot and eels are moot, say "You found both ways to regain your powers. You don't need to do anything else." instead;
	if player is in Shiner Shrine and imp is moot, say "The path north is cleared[tho-work of Lamer Realm]." instead;
	if player is in Clarthead Cathedral and shrewin whiners are moot, say "The path south is cleared[tho-work of Perverse Preserve]." instead;
	if player is in Minded Midden and Ed Riley is moot, say "You made a way west. You're done here." instead;
	if player is in Disowned Downside:
		if Gretta is moot and power-back is false, say "Gretta's gone. The first thing to do is to go north or south to regain your powers." instead;
		if pen o nope is moot, say "Gretta's gone. [if medals-shiny is 2]Fulfill your destiny to the west[else]Go back east for help[end if]." instead;
	if in-extra-powers, say "The [location of player] isn't critical since you've solved the [other-power-room], but the puzzle may still interest you.";
	unless otters-cur-item is player, try objhinting otters-cur-item instead;
	if player is in Lamer Realm or player is in Perverse Preserve:
		if power-back is false, say "You need to get your powers back before you do anything. Look around [if Disowned Downside is visited]the Disowned Downside[else if ed riley is in Minded Midden]and try to get past Ed Riley[else]west of Burnt Brunt[end if]." instead;
		if player is in Perverse Preserve, say "You've re-summoned all the animals you need to[if number of pre-animal things in Perverse Preserve is 1], though you can also try to fix the [random touchable pre-animal thing][end if]." instead;
		say "You've helped all the animals you need to[if number of reflexive animals in Lamer Realm > 0], but you can still try to help the [random touchable reflexive animal][end if]." instead;
	if got-extra-powers, say "You got your powers back. You don't need to do anything else here." instead;
	if player is in Reclusion Inclosure, say "Your destiny awaits west. Hopefully you will have enough allies for the big fight." instead;
	say "It seems like you [if power-back is false]can't do anything to get your powers back here[else]did everything you needed here to defeat Elvira[end if].";
	the rule succeeds;

definition: a thing (called X) is pre-animal:
	if X is corona or X is nails or X is thrones or X is pines, decide yes;
	decide no.

to say right-adj of (anim - an animal):
	repeat through table of otters anagrams:
		if anim is the-from entry:
			say "[right-word entry in upper case]";
			continue the action;
	say "BUG";

book demo-dome-hinting

this is the demo-dome-hinting rule:
	say "You're already in my clue lyceum." instead;

volume parser tricks and errors

[not a very BIG volume, but we need to know what to do with commands that should work.]

book reading the command

dash-nag is a truth state that varies.

apost-nag is a truth state that varies.

the-warn is a truth state that varies.

after reading a command:
	let XX be indexed text;
	now block-north is false; [?! remove if fixed later. N during Z.Z.Z.Z is annoying]
	abide by the punctuation-munge rule;
	let XX be the player's command in lower case;
	if scan-nag is false and settler is touchable:
		if the player's command includes "scanner":
			say "(Fourth wall dumb joke: the letters settler isn't a scanner made for canners. It's for text adventurers.)";
			now scan-nag is true;
	if number of words in the player's command > 1:
		let W1 be word number 1 in XX;
		if W1 is "say" or W1 is "think" or W1 is "shout" or W1 is "speak" or W1 is "yell":
			if say-warn is false:
				say "If you want to say or think a magic word, you can just type it. So instead of [b]SAY XYZZY[r], you can use the command [b]XYZZY[r].[paragraph break]You can [b]ASK[r] someone [b]ABOUT[r] something, if you want to talk to them.[paragraph break]After this, the game will ignore words like [W1].[paragraph break]Would you like to snip [W1] from from the start of this command?";
				now say-warn is true;
				if the player yes-consents:
					do nothing;
				else:
					pad-rec "saying";
					say "Okay. Hit the up arrow then enter if you change your mind.";
					reject the player's command;
				pad-rec "saying";
			say "(cutting off the trailing '[word number 1 in the player's command]')[line break]";
			let XX be the player's command;
			replace word number 1 in XX with "";
			change the text of the player's command to XX;
	if the player's command includes "the":
		if the-warn is false:
			now the-warn is true;
			say "[this-game] does not require articles such as the, an or a. They don't hurt, but you'll be doing enough typing.";
		replace the regular expression "\b the\b" in XX with "";
	if the player's command includes "scan" and the player's command includes "with" and player has settler:
		if scanwith is false:
			ital-say "you don't need the preposition [b]WITH[i]. You can just say [b]SCAN[i], as the settler is the only item that can scan.";
			now scanwith is true;
		replace the regular expression "with.*" in XX with "";
		change the text of the player's command to XX;
	if period-warned is false:
		if the player's command matches the regular expression "\.":
			say "Small warning--this shouldn't be a problem, but if you use periods to separate a command to do your magic, the parser will have problems. I couldn't find a way around it. Sorry. That said, normal commands will work okay.[wfak]";
			now period-warned is true;
	if number of words in player's command is 5 and long-sent-warn is false:
		ital-say "you probably don't need more than four words per command. The most complex ones are [b]PUT X ON Y[i] or [b]ASK X ABOUT Y[i], and a compound item like [b]GIANT PIN[i] can use [b]GIANT[i] or [b]PIN[i]. Adjectives usually aren't necessary, and [b]GET ALL[i] will never take anything harmful or lethal.";
		now long-sent-warn is true;
		pad-rec "long commands";
	abide by the parse-rule of mrlp;
	if word number 1 in player's command is "a":
		if ask-warn is false:
			say "Replacing [b]A[r] with [r]ASK ABOUT[r]. Saying [b]A[r] is not required for any puzzle.";
			now ask-warn is true;
		replace the regular expression "^a " in XX with "ask about ";
		change the text of the player's command to XX;
		d "Changing text to [XX].";
	if the player's command includes "smell" and word number 1 in the player's command is not "smell":
		say "You can just type [b]SMELL[r].";
		reject the player's command;
	repeat with QQ running through fungible things: [being able to get rid of this code would result in a 5% speedup overall. However, it's here to subvert the default behaviors of, say, OUTSIDE or STAPLE without having to do much code-munging. For OUTSIDE, we'd need a check rule, and for STAPLE, we'd need "rule for supplying a missing noun when stapleing." The OYSTER section might have all kinds of problems. So perhaps we could sluff this off into the oyster parse-rule, then focus on the other odd cases, but it'd require a lot of testing, which might not be worth it. Also, I'd have to sort out an extra line break problem.]
		if QQ is a the-from listed in regana of mrlp:
			if the player's command matches right-cmd entry:
				try fliptoing the-to entry;
				process the notify score changes rule;
				[save-present-input;]
				process the scam rule instead;

instance-plur is a truth state that varies.

to towers-plurcheck:
	if instance is touchable:
		if the player's command includes "instances":
			replace the word "instances" in the player's command with "instance";
			ital-say "listening to the most insistent incident.";
			now instance-plur is true;
	if butlers are plurcheck:
		if the player's command includes "butler":
			now butlers are plurtry;
			ital-say "there are too many butlers, so getting rid of one wouldn't do much.";
	if atheists are plurcheck:
		if the player's command includes "atheist":
			now atheists are plurtry;
			ital-say "there are too many atheists, and they're too diverse in their arguments, to examine just one. But you don't need to.";
	if pirates are plurcheck:
		if the player's command includes "pirate":
			now pirates are plurtry;
			ital-say "there are too many pirates, and they're too uniform in their uniforms, to examine just one. But you don't need to.";
	if natives site van is plurcheck:
		if the player's command includes "native":
			now natives site van is plurtry;
			ital-say "there natives site van is too big to deal with one native at a time.";
	if yurt-plurtry is false and yurts are touchable: [yurts are not a guardian, so they don't have this property]
		if the player's command includes "yurt":
			now yurt-plurtry is true;
			ital-say "there are too many yurts, and they're too uniform, to examine just one. But you don't need to.";
	if diners are plurcheck:
		if the player's command includes "diner":
			now diners are plurtry;
			ital-say "there are too many diners, and they're too uniform, to examine just one. But you don't need to.";
	if ingrates are plurcheck:
		if the player's command includes "ingrates":
			now ingrates are plurtry;
			ital-say "there are too many ingrates, and they're too uniform, to examine just one. But you don't need to.";

medals-note is a truth state that varies.

to otters-plurcheck:
	if medals-note is false and player has medals:
		if the player's command includes "iq" or the player's command includes "iq" or the player's command includes "medal":
			ital-say "There are a lot of ways to refer to the medals, but they are identical except for their writing. So [b]IQ[i], [b]MEDAL[i] and [b]LUCKY[i] are all ways to shorten doing something with the medals in the future.";
			now medals-note is true;

definition: a guardian (called gu) is plurcheck:
	if gu is plurtry, no;
	if gu is touchable, yes;
	no;

section parse rules by region

this is the ordeal-reload-parse rule:
	if player is in dusty study:
		if Report Porter Perrot is off-stage and the player's command includes "perrot", say "[if stuff-found < 3]Who?[else]Report Porter Perrot's outside, but to interact meaningfully, you should [b]OPEN[r] the liaison.[end if]" instead;
	else if player is in largely all grey gallery:
		if elmo is in largely all grey gallery and the player's command includes "tickle", say "Really. This is a juvenile computer game, not a juvenile toy." instead;
	else if player is in Carven Cavern and Respect Specter is in Carven Cavern:
		if the player's command includes "spectre", say "The Respect Specter winces slightly and opens its mouth as if to say 'Er...'[paragraph break]";

this is the stores-parse rule:
	if player is in Cruelest Lectures:
		if the player's command exactly matches the text "in stage":
			change the text of the player's command to "instage";
	else if the player is in Strip of Profits:
		repeat through table of region skip commands:
			if word number 1 in the player's command is "[lastcmd entry]":
				if storedest entry is touchable or portdest entry is touchable:
					if storedest entry is store t:
						say "That was the command to win the original release, but there's another command to see the region beyond Elvira. If you want to restart, go back to the Dusty Study and [b]ROVE OVER[r], that will work.";
						reject the player's command;
					if old-rel entry > 0:
						say "The region for this final command ([go-region of portdest entry]) may've changed since you last played, which is probably release [old-rel entry][if old-rel entry > 1] or earlier[end if]. Thus, significantly new stuff may've been added since then. Go ahead anyway?";
						if the player dir-consents:
							say "Okay.";
						else:
							say "Enjoy the new content!";
							reject the player's command;
					say "You declare cleared [go-region of portdest entry] and watch [if portdest entry is touchable][portdest entry][else][storedest entry][end if] dissolve.";
					if storedest entry is touchable, reg-inc;
					moot storedest entry;
					moot portdest entry;
					now go-region of portdest entry is shortcircuited;
					see-about-patcher;
					reject the player's command;
				say "You already took care of [go-region of portdest entry].";
				reject the player's command;

this is the routes-parse rule:
	if gast is in location of player and rude n nuder is enclosed by location of player:
		if the player's command includes "under":
			if number of words in the player's command > 1:
				say "Truncating to one word.";
				change the text of the player's command to "under";
	if word number 1 in player's command is "go":
		unless word number 2 in player's command is "to":
			if go-warned is false:
				ital-say "you don't need to start a command with go in Routes. One word should be fine.";
				now go-warned is true;
			let XX be the player's command;
			replace the regular expression "^go " in XX with "";
			change the text of the player's command to XX;

this is the troves-parse rule:
	if player is in Loather Rathole:
		if the player's command exactly matches the text "a rec":
			say "You've done nothing to deserve a rec yet. You need to think for yourself. Maybe you can become someone who give a rec, one day.";
			the rule succeeds;

this is the presto-parse rule:
	if player is in Char Arch and the player's command exactly matches the text "a gps":
		say "A GPS might point you to the gasp-gaps, but it wouldn't help you survive them. It wouldn't even help you if I forgot to list an exit elsewhere, which totally only happened in the first release and is fixed everywhere now, I hope.";
		the rule succeeds;
	else if flea is enclosed by location of player or leaf is enclosed by location of player:
		if the player's command exactly matches the text "a elf":
			say "You don't need any D&D character to magick things the rest of the way here.";
			the rule succeeds;

this is the oyster-parse rule:
	if player is in Posh Hops Shop:
		if tunes are moot and the player's command includes "tunes", say "The tunes are gone, now that you messed with the jukebox." instead;
	else if player is in Olde Lode:
		if urn is in Olde Lode and word number 1 in player's command is "run":
			if number of words in player's command > 1:
				say "You have a route planned out, but you panic and run just any which way...[paragraph break]";
			try fliptoing urn instead;
	else if player is in Disease Seaside:
		if the player's command exactly matches the text "a cone":
			say "That wouldn't make the canoe any more helpful. It wouldn't make it any less helpful, either. Maybe the frat raft or sabot boats are a better bet.";
			the rule succeeds;
	else if player is in Lean Lane:
		if the player's command exactly matches the text "a nut":
			say "That's not nice. You are a guest.";
			the rule succeeds;
	else if player is in Rascal Craals:
		if ruby is moot and the player's command includes "ruby":
			say "Don't worry about the ruby any more[if sausage is moot], or [the sausage][else]. It's someone else's worry. Or someTHING's[end if].";
			reject the player's command;
	else if the player is in Shuttle Hutlets:
		if digger is off-stage and the player's command includes "shovel":
			say "Hmm. No shovel yet. Or anything like it. Maybe you'll find one, though.";
			reject the player's command;

this is the towers-parse rule:
	towers-plurcheck;
	if player is not in Loftier Trefoil:
		if the player's command exactly matches the text "a place":
			say "It already is a place. It needs to be more than that, to wipe off the stigma of being the curst palace.";
			the rule succeeds;
	else if nastier stainer retinas are in location of player and the player's command exactly matches the text "in tears":
		say "Clever, but maybe you can make [the retinas] so they feel a need to be in tears.";
		the rule succeeds;

this is the otters-parse rule:
	otters-plurcheck;
	if hydra-known is true and player is in Reclusion Inclosure and player does not have whistle:
		if the player's command includes "hardy" or the player's command includes "hydra":
			say "You don't want to [b]THINK[r] about taking on the hydra by yourself. You need something much bigger.";
			reject the player's command;

this is the others-parse rule:
	if player is in Clangier Clearing:
		if melon is in Clangier Clearing and  the player's command includes "len" and the player's command includes "mo", try fliptoing melon instead;
	else if Dr Lola Ollard is enclosed by the player:
		if the player's command exactly matches the text "a lol":
			say "You laugh at how silly Dr. Lola Ollard looks on the fake currency.";
			the rule succeeds;

this is the demo-dome-parse rule:
	if player is in Evoc Cove and the player's command includes "page":
		let XX be the player's command;
		replace the regular expression "page" in XX with "";
		ital-say "you don't need to say [b]PAGE[i] when reading a particular page. A number will do fine.";
		change the text of the player's command to XX;

section command reader booleans

period-warned is a truth state that varies.

ignore-transcript-nag is a truth state that varies.

say-warn is a truth state that varies.

scan-nag is a truth state that varies.

block-north is a truth state that varies.

long-sent-warn is a truth state that varies.

yurt-plurtry is a truth state that varies.
scanwith is a truth state that varies.

ask-warn is a truth state that varies.

go-warned is a truth state that varies.

section disambiguation

[this is so parenthetical text doesn't pop up]

rule for clarifying the parser's choice when discerning: do nothing.

Rule for clarifying the parser's choice of super purse: do nothing.

[stopgap. Could be any store, or any object]

Rule for clarifying the parser's choice of Store Z: do nothing.

rule for supplying a missing second noun while unlocking:
	if ropins are touchable:
		now second noun is ropins;
	else:
		now second noun is super purse.

section commands to skip previously solved areas

table of region skip commands
lastcmd	storedest	portdest	old-rel [old release is last one where this command worked. If 0, it currently works]
"through"	store u	course source	3
"between"	store u	course source	3
"beyond"	store u	course source	0
"decide"	store v	Tastee Estate	1
"resign"	store v	Tastee Estate	3
"recant"	store v	Tastee Estate	0
"debug"	store p	odorant tornado	1
"bus"	store p	odorant tornado	0
"sub"	store p	odorant tornado	0
"destroy"	store y	balancer barnacle	1
"redial"	store y	balancer barnacle	0
"spectacular"	store w	truster turrets	0
"quickly"	store t	solid idols	-1

book errors

Rule for supplying a missing noun:
	if noun is nothing:
		if mrlp is oyster and cur-score of oyster > 0:
			say "Either that verb needs a subject, or you may need to be in the right place to use it. Note all point-scoring verbs in Oyster can be used on their own.";
		else:
			say "While many verbs in [this-game] take implicit nouns, that verb requires a noun.";
		reject the player's command;

Rule for printing a parser error when the latest parser error is the nothing to do error:
	say "Nothing is small or mobile or valuable enough to take here." instead;

Rule for printing a parser error when the latest parser error is the not a verb I recognise error:
	say "[reject]";

Rule for printing a parser error when the latest parser error is the didn't understand error:
	repeat through regana of mrlp:
		if the player's command matches right-cmd entry:
			if the-from entry is fungible:
				try fliptoing the-to entry;
				process the notify score changes rule;
				process the scam rule instead;
	say "[reject]";

Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error:
	if the player's command includes "gt" or the player's command includes "go to":
		say "That's not a room or thing I recognize.";
	else:
		say "Nothing (significant) like that is in the immediate vicinity or region.";
	the rule succeeds;

Rule for printing a parser error when the latest parser error is the can't see any such thing error:
	if location of player is study and study is dark:
		if the player's command includes "palm", say "Hmm. It's not useful in its present state. You think back to how you changed that toga into a goat just by saying 'goat.' Maybe you can do something like that, again." instead;
		say "You can't see much of anything here, and if you stumble around, that [i]palm[r] might poke your eye out." instead;
	if word number 1 in the player's command is "go", say "That isn't a recognized way to go. You can [b]GO TO[r] (room, person or thing you visited), or you can use old-fashioned text adventure directions. For instance, [if tables are moot][b]GO IN[r] or [b]IN[r] or [b]GO TO FRAMING[r][else if meet bans are moot][b]GO DOWN[r] or [b]GO TO GALLERY[r][else][b]GO TO STUDY[r] or [b]GO UP[r]/[b]IN[r]/[b]DOWN[r][end if]." instead;
	if the player has the rigged digger:
		if the player's command includes "prod", say "It's a digger, now." instead;
	if word number 1 in the player's command is "consult":
		if the player's command includes "pad":
			abide by the notepad check rule;
		say "It looks like you tried to consult your notepad about something. The proper syntax is [b]CONSULT PAD ABOUT X[r], [b]CONSULT ABOUT X[r], or [b]PAD X[r].";
		if player does not have notepad:
			say "[line break]Also, [if notepad is in location of player]you decide to take the notepad so it's easy to consult[else]you should have taken the notepad back in Dusty Study[end if].";
			try taking notepad;
			now player has notepad;
			the rule succeeds;
	say "[if location of player is dark]You can't locate that in the dark, if it's there[else]Nothing unusual like that around here[if-enter][end if]." instead;

to say if-enter:
	if word number 1 in the player's command is "enter":
		say "--you may want to use a direction, instead";

Rule for printing a parser error when the latest parser error is the only understood as far as error (this is the jump for hoop error rule):
	if player is in Austerer Treasure:
		if ye hoop is in Austerer Treasure:
			if word number 1 in the player's command is "jump":
				if the player's command includes "wall", say "You think about jumping off the wall, but you wonder if that'd just be violating something sacred, and you might get zapped for that. You need a way to say, the heck with that." instead;
				say "That's maybe not how to jump to reach Ye Hoop. Maybe you sort of need to jump a certain way to get there, and not care how." instead;
			the rule succeeds;
	continue the action;

the jump for hoop error rule is listed before the retry first word in command error rule in the for printing a parser error rulebook.

pardons is a truth state that varies.

Rule for printing a parser error when the latest parser error is the I beg your pardon error:
	now pardons is true;
	say "[randbla][line break]";
	now pardons is false;
	follow the alert you don't have to gawk rule;

chapter I6 code for TAKE EAST

Include (-

[ BASIC_ACCESSIBILITY_R mask at;
	if (act_requester) rfalse;
	at = FindAction(-1);
	if (at == 0) rfalse;
	mask = ActionData-->(at+AD_REQUIREMENTS);

	if ((mask & TOUCH_NOUN_ABIT) && noun && (inp1 ~= 1)) {
		if (noun ofclass K3_direction) {
			RulebookFails();
			reason_the_action_failed = BASIC_ACCESSIBILITY_R;
			if (actor~=player) rtrue;
			print "You should not need to act physically on a direction, which is abstract.^^";
			return true;
		}
		if (ObjectIsUntouchable(noun, (actor~=player), FALSE, actor)) {
			RulebookFails();
			reason_the_action_failed = BASIC_ACCESSIBILITY_R;
			rtrue;
		}
	}

	if ((mask & TOUCH_SECOND_ABIT) && second && (inp2 ~= 1)) {
		if (second ofclass K3_direction) {
			RulebookFails();
			reason_the_action_failed = BASIC_ACCESSIBILITY_R;
			if (actor~=player) rtrue;
			return L__M(##Miscellany, 67);
		}
		if (ObjectIsUntouchable(second, (actor~=player), FALSE, actor)) {
			RulebookFails();
			reason_the_action_failed = BASIC_ACCESSIBILITY_R;
			rtrue;
		}
	}
	rfalse;
];
-) instead of "Basic Accessibility Rule" in "Actions.i6t".

chapter mapping errors to help

ana-repeats is a number that varies.

cur-help-item is a thing that varies. cur-help-item is usually yourself.

definition: a thing (called itm) is all-around:
	if itm is bogus-rousted, yes;
	if itm is bogus-plains, yes;
	if itm is bogus-psalm, yes;
	if itm is n-t-air, yes;
	no;

to say where-pull of (itm - a thing):
	if itm is all-around:
		say "all around";
	else if itm is maze walls and player is in Grey Gyre:
		say "the volt maze";
	else if itm is a block-concept:
		say "[if player is in Shiner Shrine]the imp[else]the shrewin['] whiners[end if]";
	else:
		say "[the itm]"

to say pull-from of (itm - a thing):
	say "You feel a slight psychic push-pull coming from [where-pull of itm]. That's a decent omen"

to say spec-help of (itm - a thing):
	if rq is active:
		say "With that conversation, you can't concentrate on much...";
		continue the action;
	now itm is attempted;
	if itm is a pickup-line:
		say "You feel you're on the right track to expose the [pla-ma]s. But that's not quite it.";
		continue the action;
	if xtra-trax is true:
		repeat through spechelp of mrlp:
			if itm is xtrhelp entry:
				if there is a helptxt entry:
					say "[helptxt entry][line break]";
					if debug-state is true, say "DEBUG ONLY: [pull-from of itm].";
					if itm is cur-help-item:
						if can-prog-hint:
							increment ana-repeats;
							if ana-repeats is 3:
								now ana-repeats is 0;
								say "[line break]This guessing is getting a bit frustrating. You note the idlers['] slider on the settler[one of][or]again[stopping]. Maybe it could help you a bit.";
								continue the action;
					else:
						now ana-repeats is 0;
					now cur-help-item is itm;
					continue the action;
				else:
					break;
		d "You may want to put in special text here in [spechelp of mrlp] for ([the itm]). Or not.";
	say "[pull-from of itm].";
	xtra-trax-inquire;

to xtra-trax-inquire:
	if xtra-trax-warn is false:
		say "[line break]You can use the command [b]XTRA TRAX[r] to track the right combination of letters less generically. However, some hints might be a bit too pointed.";
		if debug-state is true, say "DEBUG: note this option is turned on by default while testing.";
		now xtra-trax-warn is true;
		pad-rec-q "xtra/trax";

doublewarn is a truth state that varies.

to decide whether can-prog-hint:
	if mrlp is oyster, decide no;
	if player does not have settler, decide no;
	if headaches is 0, decide no;
	if slider is switched on, decide no;
	decide yes;

book reading a command

volume regular verb tweaks and irregular verbs

book regular important verb tweaks

chapter taking inventory

chapter inventory

definition: a thing (called itm) is regspecial:
	if itm is warpable, decide no;
	if itm is compass, decide no; [well, it IS regionally special, but it's mentioned at the end of the inventory]
	decide yes;

After printing the name of the letters settler while taking inventory:
	say "[set-det]";

After printing the name of a skansnak (called the curfood) while taking inventory:
	say " [if curfood is heated](heated)[else](cold)[end if]";

to say set-det:
	say "[unless player has purse]: [end if]Cheat/teach mode is [on-off of cheat-on], [if list-headache is false]and [end if]the idlers['] slider is [on-off of whether or not slider is switched on][slider-detail]";

to say slider-detail:
	if list-headache is false, continue the action;
	say ", and you [if headaches is 0]can't put up with the slider's beeps any more[else]can put up with its beepings [headaches in words] more time[plur of headaches][end if]";

after printing the name of the stapler while taking inventory:
	if staple is in the stapler:
		say " (with a staple in it)";
		now staple is mentioned;
	else:
		say " (empty)";

before listing contents while taking inventory: group skansnaks together giving articles.

hows-show-tools is a truth state that varies. hows-show-tools is true.

after printing the name of raves saver while taking inventory: say " ([if raves saver is reflexive]dull[else]shinier now[end if])"

check taking inventory:
	if number of things carried by the player is 0 and mrlp is not troves, say "Not very 'in.'" instead;
	if mrlp is demo dome, say "You neither have nor need any questing items." instead;
	say "Item time![line break]";
	if debug-state is true:
		say "[b]II[r] will give you states of carried things.";
	if mrlp is troves:
		if truffle is off-stage and purse-stolen is false:
			say "Boy, this is a seedy area! You're worried you might get robbed of what you have.[line break]";
		if purse-stolen is true, say "All you have is [i]Pa, Egg, Pea[r] and your pedanto-notepad and your settler[if player has fretful truffle] and that fretful truffle[end if]. You still need to get your super purse back." instead;
	if number of things carried by the player is 0, say "Just your powers, at the moment. Nothing tangible." instead;
	now all things carried by the player are marked for listing;
	if player has lamp and player has super purse:
		say "You're carrying a lamp, for light.[paragraph break]";
		now lamp is unmarked for listing; [lamp can fit in purse but isn't useful there]
	if player has settler and player has super purse:
		say "You're carrying your letters settler, to help with hints. [set-det].[line break]";
		if headaches is 0 and debug-state is true, say "Debug note: [b]HR[r] recharges the headaches.[line break]";
		now settler is unmarked for listing;
	if the number of regspecial things carried by the player is 0:
		say "[line break]You are carrying nothing from this region in particular.[paragraph break]";
	else:
		now all things enclosed by player are unmarked for listing;
		now all regspecial things carried by player are marked for listing;
		now concisions are unmarked for listing;
		now rosetta toaster is not marked for listing;
		now all skansnaks are not marked for listing;
		say "Here in the [mrlp] region you have found:[line break]";
		if mrlp is routes and read-list is true:
			if number of quest-items carried by the player > 0, say "  [list of quest-items carried by the player with indefinite articles] (for Brother Horbert)[line break]";
			now all quest-items carried by the player are unmarked for listing;
		list the contents of the player, with newlines, indented, including contents, giving inventory information, with extra indentation, listing marked items only;
		let snaks-held be number of skansnaks carried by player;
		if mrlp is towers and snaks-held > 0:
			say "You've found [if snaks-held is 1]a skan-snak[else]some skan-snaks[end if]";
			if player has rosetta toaster:
				say " and a Rosetta Toaster to heat [if snaks-held is 1]it[else]them[end if] with:[line break]  ";
			say "  [list of skansnaks carried by the player with indefinite articles][line break]";
	now all things enclosed by player are unmarked for listing;
	now all warpable things enclosed by player are marked for listing;
	if number of warpable things enclosed by player is 0:
		say "Nothing else is in your super purse.";
	else if hows-show-tools is true:
		if player has super purse:
			now super purse is unmarked for listing;
			say "Other things in your super purse";
		else:
			say "Your general tools";
		say " include (toggle with [b]IV[r]):[line break]";
		if player has letters settler:
			now letters settler is unmarked for listing;
		list the contents of the player, with newlines, indented, with extra indentation, listing marked items only;
	else:
		say "Your general tools are hidden. [b]IV[r] will turn them back on.";
	if number of worn things > 0, say "[line break]You are also wearing [a list of worn things]."; [ below are trivial region-specific cases ]
	if mrlp is presto and bored yak is not moot:
		if location of player is location of skid and bored yak is not moot, say "[line break]There's also that skid you can't carry, but you can push it around[if number of things on skid > 0]. It holds [the list of things on skid][end if]." instead;
		if skid is not off-stage and skid is not moot, say "You remember leaving the skid in [location of skid]." instead;
	if mrlp is otters and power-back is false, say "[line break]You also [b]DON'T[r] have your full powers. You'll need to fix that before hitting the Edictal Citadel to the west.";
	if xrayvision is true, say "[line break]You also have x-ray vision from heating up a skan snak.";
	if player has compass, say "[line break]You also have a compass to tell direction.";
	if can-guru is true, say "[line break]You still have the aftertaste of the arugula, to [b]GURU[r] things you could make fruits from.";
	the rule succeeds;

after taking inventory when mrlp is others:
	eval-fruits;
	continue the action;

to decide which number is fruits-got: decide on number of not fruit-to-find fruits;

to eval-fruits:
	if debug-state is true:
		say "[line break]DEBUG NOTE: [b]MISSES[r] shows fruits left. Fruits-left = [fruits-left].";
		if fruits-left < 10, say "Listing the remaining [fruits-left] fruits since they're under 10: [list of fruit-to-find fruits].";
	if moss cap is off-stage, continue the action;
	if fruits-left is 0:
		say "There are no more fruits to find for Curtis.";
		continue the action;
	if droll dollar is not off-stage:
		say "You can't expect anything more from Curtis.";
		continue the action;
	let next-goal be (curtis-level + 2) * 4;
	if fruits-got >= next-goal:
		say "[line break]You may want to go see Curtis for a new reward. Or you can keep getting new fruits.";
	else:
		say "[line break]You need [next-goal - fruits-got in words] more fruit[if next-goal - fruits-got > 1]s[end if] to get something new from Curtis.";
	if arugula is moot, say "[line break]You can't get the maximum, since you used the arugula.";

section iving

iving is an action out of world.

understand the command "iv" as something new.

understand "iv" as iving.

carry out iving:
	now hows-show-tools is whether or not hows-show-tools is false;
	say "Now [b]I[r]([b]INVENTORY[r]) [if hows-show-tools is true]show[else]hide[end if]s your general tools.";
	the rule succeeds;

chapter going (nowhere)

definition: a room (called r) is detourable:
	if r is outer route or r is lost lots or r is shaven havens, yes; [fringe finger doesn't count since you'd fall to your death getting lost]
	no;

upwarned is a truth state that varies.

general-troves-nowhere-warn is a truth state that varies.

diagonal-warned is a truth state that varies.

this is the find-nowhere-text rule:
	repeat through nowhere-table of mrlp:
		if theloc entry is location of player:
			say "[thereject entry][line break]";
			if mrlp is troves and general-troves-nowhere-warn is false:
				say "[line break]";
				break;
			the rule succeeds;

check going nowhere (this is the main can't go that way rule) :
	if upwarned is false:
		if noun is up or noun is down:
			say "You can't go [noun] here[if mrlp is demo dome and player is not in Sparse Spares], though Sparse Spares is a room away and down[else]. In fact, you almost never have to go up or down in this game[end if].";
			now upwarned is true instead;
	if noun is diagonal and diagonal-warned is false:
		ital-say "there are no diagonal connections between locations in [this-game].";
		now diagonal-warned is true;
	abide by the find-nowhere-text rule;
	if mrlp is troves:
		now general-troves-nowhere-warn is true;
		say "Physical directions are not as important as the actions and thoughts that help you go forward. Think and focus to move on." instead; [this should not be relevant, as all Troves locations should be in the table above, but just in case...]
	if noun is outside and number of viable directions > 1, say "Exiting is ambiguous--if there's only one direction, you'll take it, but otherwise, the cardinal directions usually work better." instead;
	if number of viable directions is 0, say "You can't go--well, any way here. This is a sort of puzzle room." instead;
	if number of viable directions is 1, say "You can only go [if room noun of location of player is visited]back [end if][list of viable directions] here." instead;
	say "You can go [list of viable directions] here, but not [noun]." instead;

section specific rules

check going nowhere in Dusty Study:
	if Dusty Study is not lit, say "You can't really go much of anywhere. You remember secret passages in this study, but you'd probably stumble into that [i]palm[r] first in the dark." instead;
	if Report Porter Perrot is off-stage, say "[if stuff-found is 3]You shouldn't just run away when someone is knocking[else]You're just in the mood for quiet time, now, just looking around[end if]." instead;
	if noun is down:
		if meet bans are in Dusty Study, say "Ouch! You smack into the [b]MEET[r]-[b]BANS[r][if Dusty Study is not lit]. It might've hurt less if you'd found a light source[end if]." instead;
		continue the action;
	if noun is outside, say "You don't want to go outside, and you don't want to walk around where you might be seen[if Report Porter Perrot is moot], especially after that chat with [perrot][end if]." instead;
	say "You always lose all sense of direction in your study. You generally just think of it as a place you can go into or out of. There [if meet bans are touchable]may be[else]is[end if] a passage down, too. Hard to forget how down works[if niche is touchable]. Maybe there's something above, too[else]. You can also shimmy [b]UP[r][end if]." instead;

check going nowhere in Carven Cavern (this is the cavern check rule):
	if apertured departure is not in Carven Cavern, say "You need to create or discover a viable exit, first." instead;
	say "The only way to make progress is inward, through [the departure].";
	if stapler is moot:
		say "[line break]Go through?";
		if the player dir-consents, try going inside instead;
		say "That is probably the way out of the Ordeal Reload. But you are free to look around." instead;
	do nothing instead;

this is the horbert-gone rule: if brother horbert is moot, say "You don't need [horbert]'s help any more, and you've helped him all you can." instead;

check going nowhere in Same Mesa (this is the pin the player to the Mesa puzzles rule) :
	if Gast is in Same Mesa:
		if noun is inside, try fliptoing scripture picturers instead;
		say "Even without [Gast]'s unavoidable tirades, your head is spinning too much for directions." instead;
	if noun is a direction:
		if noun is inside:
			if Cleric Circle is unvisited:
				if adobe is visited or deli is visited:
					if adobe is visited and deli is visited:
						if inwarn is false:
							ital-say "if you want to get back to the adobe or deli, you have to go [b]ACROSS[i] or [b]PAST[i]. Sorry for the ambiguity.";
							now inwarn is true;
					else:
						say "That isn't quite how to enter the church. Do you wish to go back to the [if adobe is visited]adobe[else]deli[end if]?";
						if the player yes-consents:
							if adobe is visited, move player to adobe instead;
							move player to Idle Deli instead;
				now in-try is true;
				say "Something blocks you. Perhaps you were a bit too glib about entering and need to be a bit more formal the first time[if Adobe Abode is visited or deli is visited]--you already used [aop] to enter another place differently, so the same probably applies here[end if]." instead;
			move player to Cleric Circle instead;
		if noun is down and THE BEAN is touchable, say "Down isn't quite how to descend here." instead;
		if noun is up or noun is down, say "That won't work right now." instead;
	else:
		say "No matter where you try to wander, you wind up back where you are." instead;

check going nowhere in Cleric Circle:
	if noun is not outside:
		say "[one of]'Directions are not important here, seeker. They are arbitrary, but eternal truth is eternal. Just [b]EXIT[r], if you want to.' So you do.[or]'One day, my son, you will learn to put aside your need for compass directions.'[stopping][line break]You go back outside.";
	move player to Same Mesa instead;

check going nowhere in Cripple Clipper:
	if noun is inside or noun is down, say "Locked ol['] deck. No bowel on below." instead;

check going nowhere when location of player is a mazeroom (this is the zaphint rule):
	if noun is inside, continue the action;
	if voltzap is false:
		say "You walk into a wall, which goes ZVT. 'Lame-o,' you think, seeing red. Maybe that ZVT was a VZT.";
		now voltzap is true;
	else:
		say "You decide against touching a wall to see the (ZVT/VZT)/Lame-o routine and see red again at the memory.";
	the rule succeeds;

check going nowhere when mrlp is towers (this is the towers-mis-go rule):
	if noun is inside or noun is outside, say "You can't go in, here." instead;
	if shoals are touchable:
		if player is in actionless coastlines, continue the action;
		unless mislit limits are visited, say "Even if you were a swim swami, you'd wind up aslosh on the shoals." instead;
	if location of player is detourable:
		if dourest detours are unvisited:
			say "You get lost in [the random bounding scenery in location of player] a bit. And it's fun for a while, until you realize you're too lost, and no map of the Wildest Wilteds can help. You'll need to find your way back on your own. It's all too depressing.";
			now last-detour is location of player;
			move player to Dourest Detours;
			min-up;

book regular trivial verb tweaks

chapter examining

[before deciding the scope of the player (this is the silent scope rule) :
	place the location of the player in scope;
	continue the action;

Include (-
Replace DB_Rule;
-) before "Rulebooks.i6t".

Include (-
[ DB_Rule R N blocked;
	if (R==0 || R==(+ the silent scope rule +)) return;
	print "[Rule ~", (RulePrintingRule) R, "~ ";
	#ifdef NUMBERED_RULES; print "(", N, ") "; #endif;
	if (blocked == false) "applies.]";
	print "does not apply (wrong ", (address) blocked, ").]^";
;
-) after "Rulebooks.i6t".]

chapter attacking

understand the command "kick" as something new.

understand "kick [something]" as attacking.

the block attacking rule is not listed in any rulebook.

check attacking: [this takes responses for general types. The table file has specific NPCs/objects]
	if noun is a store, say "Sore at a store?" instead; [general stuff here that can't fit into a table]
	if noun is a store, say "Just [b]ENTER[r] [the noun] to, um, attack its challenges." instead; [general stuff here that can't fit into a table]
	if noun is yourself, say "Surly foe: yourself? Lose fury!" instead;
	if noun is Elvira:
		say "'Hater-heart.' She pouts. She summons a proto-troop that easily defeats you. '[one of]Pretty try, pet[or]Gritty try, git[in random order]!' she laughs. 'A feted defeat!' Perhaps you need backup.";
		get-dead;
		follow the shutdown rules;
		the rule succeeds;
	if noun is scary crays:
		say "You are severely outnumbered, captured, and sent to the hold. Maybe they will find out who you are, and maybe not. You will be at either Elvira's mercy or theirs.";
		get-dead;
		follow the shutdown rules;
		the rule succeeds;
	repeat through attack-table of mrlp:
		if noun is target entry, say "[nohit entry][line break]" instead;
	if player has lance, say "[if noun is not ant]Wrong enemy for the lance[else]You need something more succinct[end if]." instead;
	if noun is a picaro, say "Even Rodney alone could dispatch you. After, of course, a quick battle cry of 'Y'r DONE!'" instead;
	if noun is a guardian, say "You need to see into [the noun]'s nature and change it, instead[if player has dagger]--that dagger would just make things murder. Nobody in the Wildest Wilteds is evil, just a nuisance[end if]." instead;
	say "[randbla][line break]" instead;

chapter cutting

cut-warn is a truth state that varies.

check cutting:
	if noun is prison ropins or noun is gaol, say "[no-rips]" instead;
	if cut-warn is false:
		now cut-warn is true;
		say "NOTE: [b]CUT[r] is functionally equivalent to [b]ATTACK[r]. Neither is needed to complete the game.[paragraph break]";
	try attacking the noun instead;

chapter entering

rule for supplying a missing noun when entering:
	if location of player is Disease Seaside, try entering frat raft;
	if location of player is Strip of Profits and number of touchable portals is 1, now noun is a random touchable portal;
	if location of player is Cruelest Lectures:
		if e-revealed is true or the player's command matches the text "sit":
			now noun is teasing seating;
		else:
			now noun is passage.

chapter waiting

check waiting:
	if player is in Drain Nadir, say "Solo detail? Isolated? No. Desolation." instead;
	if player is in Upscale Capsule, say "You're...thinking hard. No really." instead;
	if mrlp is troves, say "[if cur-score of troves is 0]That's the wrong sort of inaction for here[one of]. Better watch it, or snotbag nagbots or a boot-o-bot will get you[or][stopping][else]You are paralyzed by the hustle and bustle of the big city. Though how much is bustle or hustle, I really couldn't say[end if]." instead;
	if carps are touchable, try listening instead; [oyster]
	if player is in Dourest Detours, say "You see red and feel like a true sod." instead; [towers]
	say "[randbla][line break]" instead;

chapter drinking

the block drinking rule is not listed in the check drinking rulebook.

check drinking:
	if noun is A Bev O Be Ova, say "[bev] is meant to celebrate finishing something, or to despair and not being able to finish. Neither occasion applies here." instead; [routes]
	if noun is lager, say "One sip is--nope. Next, a liter, retail. Nix to intox! Though it's not as nasty as Camelot Eco-Malt, it'd make your liver viler and send you to Bum Lane seeing blue men.[paragraph break]Though you can't bring yourself to throw it out. Maybe you are not looking at things the right way." instead; [troves]
	if noun is trance nectar, say "No. That can't be it. You want a way to exit, to say this is not me." instead;
	if noun is fount, say "It's dry, and besides, you need to drink literally of knowledge, not figuratively.[paragraph break]Besides, water doesn't have enough energy for the task ahead." instead; [presto]
	if noun is ALocalCo cola, say "Not from the bottle! Also, you don't want to guzzle it before you need to. In fact, you wish there would be a way to make more of it, because there really isn't much left. It'd be outstanding to have giant donuts, but you have what you have." instead;
	if noun is mug:
		unless ALocalCo cola is moot, say "The mug's empty." instead;
		say "You can sip it as you do your programming." instead;
	if noun is tea, say "It's food-tea, not drink-tea." instead; [oyster]
	if noun is Done Any Anodyne, say "You've certainly done more than 'any' to get here. But drinking it would cause you to give up just before your victory! See if you can put [the tetris sitter] in the right mood to forsake it forever." instead;
	if noun is atmo moat, say "You hear a cholera chorale warning you in the distance, so, you think 'Oh. clear.'" instead; [otters]
	say "You don't need to drink anything in this game. Well, there's one place where you sort of need to drink something, but [if BUB DUDE EGG is reflexive and presto is unsolved]it's done incidentally when you figure another puzzle[else]you already got past there[end if]." instead;

chapter climbing

The block climbing rule is not listed in the check climbing rulebook.

check climbing (this is the climb to enter rule) :
	if noun is frat raft or noun is cistern or noun is chimney or noun is sit a nag or noun is stair, try entering noun instead;

check climbing (this is the generic silly climbing reject rule): [note the SPECIFIC TO in brackets. This is so lkst.py (look for start/end regions) doesn't flag this as code to use a region property on. There's not enough.]
	if noun is ramp, try going down instead; [specific to Ordeal Reload]
	if noun is stair:
		if player is in Farming Framing, move player to Largely All Grey Gallery instead;
		move player to study instead;
	if noun is THE BEAN, say "[the bean] is too slippery and round." instead; [specific to routes]
	if noun is godlings lodgings, say "Your thought and efforts are what may lead you to the top, not a physical feat." instead; [specific to troves]
	if noun is mount um not, say "It seems as if the peaks speak with a sticky, icy tsk. You start to num considering going unto'm." instead; [specific to presto]
	if noun is Deils Slide, say "Oh dear. It's more like you'd fall down Deil's Slide instead. Semantics aside, it's a bad idea." instead;
	if noun is crate, say "This isn't a shooter or survival game. Plus the crates are too broken to lead anywhere. [if Shuttle Hutlets is visited]The door, on the other hand...[else]You already got through the door, anyway.[end if]" instead; [specific to OYSTER]
	if noun is huts, say "They're too tall. No good handholds. The span pans guide the only way in." instead;
	if noun is gaol, say "Too tall. Anyway, if it were climbable, the subsector wouldn't be the obscurest, now." instead; [specific to towers]
	if noun is prison, say "It's actually a decent jungle gym, but you're not here to putz around." instead;
	if noun is Edictal Citadel, say "Elvira is in the Edictal Citadel, not on top of it." instead; [specific to otters]
	if noun is wire weir, say "It's a long way down, and it'd take you away from your quest." instead;
	if noun is un mod mound, try going down instead; [specific to others]
	if noun is gropin roping, say "It's a long way down, and you probably want to get north somehow, anyway." instead;
	say "You don't need to climb over much of anything in this game. Though in some spots, you may go up or down, or possibly [b]IN[r]." instead;

chapter dropping

check dropping a quest-item: say "You need to keep [the noun]--it's a reagent for Brother Horbert." instead;

[?? dropping multiple items]

drop-try is a truth state that varies.

before dropping something:
	now drop-try is true;

check dropping something:
	if player is in Austerer Treasure and hoop is in Austerer Treasure, say "You aren't in the right state of mind to drop all your possessions, even for a half a move. Doing so might let you jump and grab the hoop, but you need to say, the heck with it. Or something." instead;
	if noun is a fruit, say "Best return [the noun] to Curtis, instead." instead;
	If mrlp is Ordeal Reload, say "You probably need to abscond with everything useful you can get your hands on." instead;
	say "Hero[if player is female]in[end if]es shouldn't be litterbugs[if player has purse]! Your super purse should hold whatever.[else]![end if]" instead;

chapter eating

understand the command "eat" as something new.
understand "eat [something]" as eating.

procedural rule while eating something:
	unless noun is deli rye, ignore the carrying requirements rule. [It mostly gets rejected anyway, and you never need to take anything. The deli rye should be mapped to TAKE]

check eating (this is the general eating rule):
	if noun is grid, say "Well, maybe if you were a spy like Elmo. Rather, you should digest the information written therein." instead; [ordeal reload]
	if noun is balancer barnacle, say "It is a balancer barnacle. Another would come along to eat you." instead; [stores]
	if noun is stupor sprout, say "One of them is probably poisonous, and not even I can tell[if list o toils is examined]. Plus, Brother Horbert needs them[end if]." instead; [routes]
	if noun is Bortles Lobster, say "You don't quite feel you deserve to eat it, yet." instead; [troves]
	if noun is escaroles, say "The escaroles aren't nearly substantial enough." instead; [presto]
	if noun is casserole, say "Ugh. You're not sure what's in the casserole, and you're probably thinking too much about what is. You'd have to be a gourmand to eat this, even after a heavy workout." instead;
	if noun is gum, say "Seriously. It's tough to program and chew gum at the same time.[paragraph break]No, I didn't mean it that way! I meant, the noise from your gum chewing would be distracting, with all that deep thinking you would have to do." instead;
	if noun is leaf, say "You are the wrong sort of animal for that." instead;
	if noun is ALocalCo cola or noun is peanut cola or noun is mug, try drinking noun instead;
	if noun is Lil Ps Pills, say "[if jar-empty is true]Eating the empty jar would be even unhealthier than popping the pills[else]They're placebos. And you're not sick. Okay, maybe you're sick of a puzzle. But you need to do something else with them[end if]." instead; [oyster]
	if noun is clam, say "Biting its shell would make you shout hells." instead;
	if noun is a skansnak and noun is not heated:
		say "[one of]Ugh. Without being heated up, a skan-snak tastes like, well, raspiest pastries.[paragraph break][or][stopping]You'll want to put [the noun] in the toaster[if toaster is in Topside Deposit] [hereish of Topside Deposit][end if], first, or it'll just be calories." instead; [towers]
	if noun is clear catsup, say "Yuck." instead;
	if noun is bleary barley, say "That'd go down terribly." instead; [otters]
	if noun is the player, try swearing obscenely instead;
	if noun is a person, say "There's no clean way to interpret that. Behave." instead;
	say "[if noun is plural-named]Those aren't[else]That's not[end if] in a test-taste state." instead;

check eating fretful truffle:
	if truf-warn is false and scams is false:
		now truf-warn is true;
		ital-say "this chocolate is a cool cheat that tells you what to [if cur-score of troves is 0]type[else]think next[end if]. Are you sure you want to do this?";
		unless the player regex-prompt-consents, say "Okay. This warning won't appear again." instead;
	now spoilit is true;
	process the troves-hinting rule;
	now spoilit is false instead;

rule for supplying a missing noun when eating:
	if player is in Lean Lane and tea at a tee is in Lean Lane:
		now the noun is the tea at a tee;

this is the can-i-heat rule:
	if diners are touchable:
		say "The diners let loose with some dry wit at you eating something like that cold--well, eating that at all.[line break]";
	if player has toaster or toaster is touchable:
		say "You figure you'd better heat [the noun] up in the toaster first. So you do. Mmm, not bad.";
	else:
		say "You should probably heat [if noun is plural-named]those[else]that[end if] up first. Like, put it in [if player has toaster]that toaster you have[else if player is in Topside Deposit]the toaster on the ground[else]some household appliance for warming pastries[end if]." instead;

check eating a skansnak (this is the try to eat a hint tart rule) :
	if xrayvision is true, say "You're already under the influence of a skan-snak. [b]XRAY[r] something before continuing." instead;
	if noun is not heated:
		abide by the can-i-heat rule;
		try inserting noun into toaster instead;

check eating curst crust:
	if swears < 1, say "[bug-report]" instead;
	if mrlp is stores, say "You should probably eat it when you're beyond the, er, spot." instead;
	if mrlp is not presto, say "The crust fell from the remains of store P. Perhaps it's best to eat it there." instead;
	if crust-warn is false:
		say "Ugh! This crust may help you out, but it may be--wait for it--distasteful and spoiled. Go ahead anyway?";
		now crust-warn is true;
		unless the player yes-consents, say "OK, maybe later. This warning won't appear again." instead;
	say "You wince and prepare to take a bite...";
	now spoilit is true;
	process the presto-hinting rule;
	now spoilit is false instead;

section taste means eat

understand the command "taste" as something new.

understand "taste [something]" as eating.

chapter buying

check buying:
	if player is in tenfold and yapper is in Tenfold Teflond Den Loft, say "The papery yapper stage-whispers 'Ix-nay on the Vi-os-ob-ay. That's not how business is DONE, here!'" instead;
	if player is in Clangier Clearing:
		if player has noun, say "It's already yours." instead;
		say "You need to haggle. With actions. And descriptive words. And so forth." instead;
	if player is in Scape Space:
		if player has dollar:
			if noun is storage, try giving dollar to greedy-person instead;
		else:
			say "You have nothing [greedy-person] wants." instead;
	if player has tekno token, say "This isn't a place of commerce." instead;
	if player is in Lean Lane:
		if wipes are in Lean Lane, say "You can't pay for the wipes, but maybe you don't need to." instead;
	say "There's nothing to buy, and there's nothing to buy it with[if player has ruby]. The ruby's kind of priceless[else if player has pearl]. The pearl isn't really tradeable[end if]." instead;

chapter jumping

check jumping:
	if player is in Grey Gyre and hump is in Grey Gyre, say "This is a silly anagram game, not a silly rhyming game." instead;
	if player is in Outer Route, say "You jump, clicking your heels and striking a ridiculous smile at the apex." instead;
	if player is in Fighter Freight, say "You certainly are feeling jumpy right now, but--well, you want to jump towards the pale plea. And as reflexively as possible." instead;
	if player is in Same Mesa, say "You [if side art is not reflexed]try and jump onto the [sit a nag], but that's not quite the way. Hm[else]managed to get on the [sit a nag], and you don't need to, again[end if]." instead;
	if player is in Austerer Treasure and ye hoop is in Austerer Treasure, say "You jump but can't quite reach the hoop. You think you hear a voice saying 'O, ye hop!' You turn red.[paragraph break]You consider dropping your treasured possessions so you can grab the hoop, but you can't bring yourself to say the heck with them. Or, rather, you haven't, yet." instead;
	say "You try a jump but jam up[one of]. Boy, leaps lapse[or][stopping]." instead;

chapter push and pull

push-pull-warn is a truth state that varies.

this is the push-pull-specifics rule:
	if push-pull-warn is false:
		say "One-time note for future reference: you don't need to push anything unless you need to move it somewhere else.[paragraph break]";
		now push-pull-warn is true;
	if noun is tables, say "They're not that kind of tables. They're tables drawn on the wall." instead;
	if noun is skid, say "You need to specify a direction to push or pull the skid." instead;
	if noun is slider, twiddle-slider instead;
	if noun is THE BEAN, say "You'd need a drama armada, or something. There was one, but then I deleted it, and they wouldn't have been up for action. You need to find a direction to get by [the bean]." instead;
	if noun is the yak, say "The yak groans lazily." instead;
	if noun is templar ramplet, say "The templar ramplet does not budge. You need some other jarring action." instead;
	if noun is raft, say "[if player is not on raft]The oars are too far away--you'll need to get on the raft[else]They are not just interlocking but locked in[end if]. Plus you'd just crash into a boat if you tried to cross the standard way." instead;

check pushing (this is the new can't push rule) :
	abide by the push-pull-specifics rule for the noun;
	if noun is TBA key, say "[if noun is reflexive]You don't know what it does[else]You'll push it once you're ready to program[end if]." instead;
	if noun is caps lock:
		if noun is not part of keyboard, say "On its own, you can't push a caps lock." instead;
		say "You'll push it once you're ready to program." instead;
	if noun is a person, say "You don't need to attack anyone or start a fight, except in one instance." instead;
	say "You give a few hups but fail to push." instead;

check pulling (this is the new can't pull rule):
	abide by the push-pull-specifics rule for the noun;
	if noun is a person, say "You don't need to corral people." instead;
	say "Ullp! You can't pull..." instead;

chapter singing

the block singing rule is not listed in any rulebook.

i-sung is a truth state that varies.

lyre-dest is a truth state that varies.

check singing:
	if player is in Cleric Circle, say "You don't know any appropriate songs, here." instead;
	if player is in Drain Nadir and Id Cede is in Drain Nadir, say "You can't quite mimic Eddie C, but maybe you could tweak his singer-ness. You can't move to artists['] straits with your job. You're more suing than 'I sung' now." instead; [troves]
	if mrlp is troves, say "No hippy trippy blues song about being poor here, if you please. And you will--you're not in power, yet." instead;
	if player is in hops shop, try fliptoing gins sign instead; [oyster]
	if clam is touchable, say "If you could sing, it might settle the clam down. But you can't, so it doesn't." instead;
	if mrlp is oyster and gins sign is moot, say "You remember your last sang-snag." instead;
	if the-hostile is touchable, say "That won't make [relig-mf] any less hostile." instead; [towers]
	if player is in Outer Route, say "[one of]'Oh sappy! So happy!' The birds near the Campiest Campsite go chürp chürp chëëp chëëp[or]Best not encourage cheeps-speech. The dirt itself might burst into song[stopping]!" instead;
	if Ed Riley is touchable: [otters]
		if lyre-dest is false:
			now lyre-dest is true;
			say "Unexpectedly, Ed pulls out a lyre from somewhere and yells '[first custom style]LYRE! DIE![r]' like he's in some medieval heavy metal band or something. He's really seeing red as he stomps it to dust." instead; [bold-ok]
		say "You don't want to push your luck. Ed Riley yelling [first custom style]LYRE DIE[r] and seeing red kind of weirded you out." instead;
	if player is in Rustic Citrus and moss cap is not off-stage:
		say "You don't know the words to Curtis's tidiest dietist ditties. You might disrupt his concentration." instead;
	if player is in Peek Keep, say "No, there's a sign here, but it's a quieter place than the Posh Hops Shop." instead; [demo dome]
	say "[randbla][line break]" instead;

chapter kissing

does the player mean kissing a person: it is likely;
does the player mean kissing the skis: it is very likely.

[!! kissing a non-person]

rule for supplying a missing noun when kissing: if skis are touchable, now noun is skis;

understand the command "kiss" as something new.

Understand "kiss [thing]" as kissing. [needed to kiss skis]

check kissing:
	if player carries the noun, say "Moisten no items." instead; [general]
	if noun is the player, say "You feel as good-looking as ever after kissing yourself." instead;
	if noun is LOLstr trolls, say "There's loving your enemy, then..." instead; [kiss OYSTER]
	if noun is skis, try fliptoing skis instead;
	if noun is clam, say "It could use a bit of friendship, but not like that." instead;
	If noun is aunt tuna, say "That would be cruel to poor Tortu. She would blackmail him into kissing her long after you left." instead;
	if noun is sausage, say "The [sausage] can't respond to affection." instead;
	if noun is mardier admirer, say "You are not a lousy enough kisser to discourage [him-her]. Perhaps there's another way to sour [if player is male]her[else]him[end if] on you." instead; [kiss TOWERS]
	if noun is bonker, say "Not even with a good dental plan." instead;
	if noun is duck, say "It's cute and all, but it also doesn't trust you." instead;
	if noun is Dr Yow, say "[he-she-c] is not the touchy feely kind." instead;
	if noun is agnostic, say "Okay, we're close to creepy territory here.";
	if noun is not a person, say "That can't really respond to your affection." instead;
	if noun is guardian, say "Creeping out whatever's blocking your way won't work." instead;
	if noun is parleys splayer players, say "[if player is male]That'd be subtle trolling, but you might not stay conscious long enough to enjoy it[else]You don't want to get their attention that way[end if]." instead; [kiss OTTERS]
	if noun is Gretta, say "You imagine her all 'Tricky try. Ick.'" instead;
	if noun is an animal, say "Yay you for loving animals. Or claiming to." instead;
	if noun is Elvira:
		say "'[if player is female]Superwoman? Wane, rum sop![else]Me? Spurn a superman?[end if]' She flatters you for admitting you were wrong about her, not recognizing she was socially out of your league. As she talks ('I lure! I rule!') suddenly you realize what your quest was about. Your test run showed SHATTER-THREATS was not enough...you are talked into being [if player is female]Chuck-Ms.-Schmuck[else]Mr. Arty Martyr[end if] for a newer better Yorpwald. The last thing you hear is Elvira saying: 'A big help? Pah! Bilge!'";
		get-dead instead;
	say "[if noun is a person]This is not a romance game[else]There's only one possible inanimate object you could kiss, if you think about it[ski-la][end if]." instead;

book common irregular verbs

chapter xyzzying

xyzzying is an action out of world.

understand the command "xyzzy" as something new.

understand "xyzzy" as xyzzying.

carry out xyzzying:
	abide by the no-meta-in-convo rule;
	say "That word is a mess and holds absolutely no power for you[if player is in Dusty Study and cur-score of Ordeal Reload is 0]. Hopefully you'll find why soon enough[else]. Trust me, I checked all the other twenty-nine combinations[end if].";
	the rule succeeds;

chapter knocking

knocking is an action applying to nothing.

understand "knock" as knocking.

carry out knocking:
	if player is in Lapsin Plains or player is in Dusty Study:
		if Report Porter Perrot is off-stage and stuff-found is 3, say "Knock knock! / Who's there? / An adventurer who should probably just [b]OPEN[r] the door instead." instead;
		say "A hollow CONKK, but nothing more. You may need to try other actions here." instead;
	if player is in Gates Stage, say "It'll be a bit tougher than that." instead;
	say "Knock knock! / Who's there? / An adventurer in a room with no doors!" instead;

chapter giving to

the block giving rule is not listed in any rulebook.

check giving something to:
	if second noun is a bruiser:
		if second noun is fightin, say "Bribery won't end this fight." instead; [presto]
		if noun is crust, say "Even he isn't gourmand enough to enjoy that." instead;
		say "He's not materialistic. He just wants a good dust-up." instead;
	if second noun is a guardian: [towers]
		if second noun is serpent:
			say "You are present enough to present a present--but which present is most important or effective in this area? That is the question.[paragraph break]Plus, the whole no hands thing.";
		if second noun is pirates, say "'Tips are...' one says and shakes his head. You blush red at the meager gift you offered." instead;
		say "No response. It looks like a gift won't be enough to get by. But you won't need one, based on what you've done so far." instead;
	if second noun is agnostic:
		if Dr Yow is not moot, say "The agnostic seems like [he-she]'d rather have the gift of knowledge." instead;
		if noun is settler, say "The agnostic seems impressed, but [he-she]'s more mechanically than magically inclined." instead;
		unless noun is gizmo:
			say "That's not technical enough for the agnostic." instead;
		continue the action;
	if noun is top opt pot:
		if second noun is agnostic, say "[he-she-c]'s more physical sciences than biological." instead;
		if second noun is Dr Yow, say "[one of]Dr. Yow puts the top opt pot on [his-her] head and angles it several ways, gives it back, smiles and shrugs[or]You already tried that[stopping]." instead;
		if second noun is a guardian, 	say "You remember Ornate Atoner Renato's friend was across the water. So it can't be anyone guarding things over here." instead;
	if second noun is Curtis, say "Curtis shrugs. That won't help him with his big fruit empire." instead; [others]
	say "Hm. Nah. [if second noun is plural-named]They don't[else if second noun is female]She doesn't[else if second noun is male]He doesn't[else]It doesn't[end if] want that--or, it seems, anything of yours." instead;

chapter push and pull to

Understand "pull [something] [direction]" or "pull [something] to [direction]" as pushing it to.

yak-sol is a number that varies.

check pushing oper rope to: try pushing the skid to the second noun instead;

check pushing the skid to (this is the yak-oof rule):
	if yak is moot:
		if player is in Hacks Shack, say "You pushed the skid around enough." instead;
		say "The skid's served its purpose, and maybe it's time to remake it as a disk back in the shack. You go back. Jack.";
		now skid is in Hacks Shack;
		go-back Hacks Shack;
		the rule succeeds;
	if the room second noun of location of player is nowhere, continue the action;
	if yak is on skid and location of player is Saps Pass and second noun is north:
		say "The yoke doesn't quite fit through the door. It does, however, snap off and the yak looks freer, aliver, almost happy. It decides it's had enough of the leaf and, with a nod, walks off to a yak realm, perhaps in search of more malarkey. Maybe [if lamb is moot]near the lamb you rescued[else]somewhere near the poor lamb's home[end if].";
		moot yak;
		now yak-sol is 1;
		reg-inc;
		pad-del "Leo and Rand";
		now skid is in Hacks Shack;
		now drab yoke is in Hacks Shack;
		move player to Hacks Shack;
		the rule succeeds;
	if player was in Char Arch and second noun is south and yak is on skid, try going south instead;
	if player was in Grey Gyre:
		if second noun is west:
			if hump is touchable, say "You need to get over the hump." instead;
			say "The way west [if hoop is moot]got cleared out when you jumped for the hoop[else if austerer is unvisited]looks like a dead end, nothing where your sled would need to go[else]was pretty much clear. You can't imagine needing to bring anything there[end if]." instead;
		if second noun is east:
			if plebe is in Grey Gyre, say "The plebe stands strong. You don't have the heart to run [him-her] over." instead;
			say "There's nothing in the Marines Seminar Remains. Pushing the sled there would be a waste of time." instead;
	if player was not in Hacks Shack:
		say "[if yak is on skid]Oof! Urg! The yak makes the skid a bit heavy, but you manage.[else]The skid grinds across the snowless ground with slowness.[end if]";
	continue the action.

After going a direction (called way-pushed) with the skid:
	if way-pushed is north and location is Hacks Shack:
		say "The skid barely fits as you go in the door.";
	if way-pushed is south and location is Saps Pass:
		say "The skid barely fits as you go out the door.";
	continue the action.

chapter thinking

thinko is a truth state that varies.

understand "ponder" as thinking when END PRONER POD is not in location of player.

in-think is a truth state that varies.

check thinking:
	if player is in Dusty Study:
		if stuff-found < 3:
			say "You begin [one of]a[or]another[stopping] deep think, [one of]all about Elvira's rise to prominence and how she assured everyone that she could do wordplay if she were bored, and she was sure it was the best you could do, but really, there was no CREATIVITY at the heart of it, just calculation--and that tagged gadget to give clues was a bit TOO convenient. It passes the time, feeling upset[or]but mulling and rehashing is no fun[stopping].";
			now thinko is true instead;
		else if Report Porter Perrot is off-stage:
			say "Hard to think with that knocking." instead;
	if player is in Econ Cone and END PRONER POD is in Econ Cone, say "No, you need to think a little differently to move." instead;
	if mrlp is troves and number of unfigured things is 0, say "Yes, how you think is extra important here. But generic thinking won't get you through." instead;
	if parleys splayer players are touchable:
		now in-think is true;
		say "So far, the [players] have been [list of ment pickup-lines].";
		now in-think is false;
	if mrlp is demo dome, try requesting the score instead;
	if number of prefigured things > 0:
		say "[line break][prefigured-things]";
		the rule succeeds;
	say "Nothing immediate comes up. If you need help, just say [b]HINT[r]. K?" instead;

for printing the name of a pickup-line when in-think is true: say "[pickup-description]"

chapter touching

check touching:
	if noun is plaster, say "Seems a bit hollow but not enough to bust through." instead; [ordeal reload]
	if noun is pews, try entering pews instead;
	if noun is lamb, say "It's a bit too scared. Too scared to flee where it needs to go." instead; [presto]
	if noun is maze walls, say "[if player is in Grey Gyre]Nothing. Maybe it's the inside of the walls, in the maze, that is charged[else][one of]You feel a[or]The same[stopping] small electric jolt[one of][or], again[stopping][end if]." instead;
	if noun is lawl wall, say "You're not playing tag, here." instead;
	if noun is tubs, say "They seem to be made of something fragile, something you could break--porcelain, maybe? You hear something rattling inside." instead; [oyster]
	if noun is raves saver, say "Odd. It feels ... really papery." instead;
	if noun is lone duck, say "It waddles away[if Dr Yow is in Obscurest Subsector] behind Dr. Yow[else if lone duck is friendly], even though it seems attracted to your raves saver[else if duck is aloof]--maybe it needs some way to trust you[end if]." instead; [towers]
	if noun is pryer bars, say "They feel like spry rebar." instead; [others]
	say "You don't need to touch anything in [this-game]. Okay, you need to touch stuff to take it, but not [b]TOUCH[r] specifically." instead;

chapter listening

to say a-r: say "[one of]Ingera[or]Reagin[or]Rigena[in random order]"

to say next-sonancy: say "[if hurt hog is moot]the final step[else if bent ewe is reflexed]the hurt hog[else]the hog and the ewe[end if]"

to decide whether can-hear-gritty:
	if player is in Loather Rathole or player is in Bustle Sublet, yes;
	no;

to decide whether can-hear-posh:
	if player is in Browse Bowers, yes;
	if player is in Econ Cone, yes;
	no;

listen-list of ordeal reload is { elmo }.

listen-list of stores is { tokers, nestor, odorant tornado, suit ode }.

listen-list of routes is { woe bow bell, gast, raptest patters }.

listen-list of troves is { sob ever verbose, SNORE SO ARENA, Id Cede, praise spirea }.

listen-list of presto is { odes song, rand, leo }.

listen-list of oyster is { tunes, clam, pale plea, carps, aunt tuna, trout, pest pets, eeks, papery yapper, dialer }.

listen-list of towers is { rodney, diners, butlers, lars eede, elsa erde, ingrates, admirer, atheists, wait seer, ripostes, natives site van, bonker, stinger, geese, ancients' canniest instance }.

listen-list of otters is { ed riley, yer all a yell'r, parleys splayer players, vow here, whiners, sly imp, asyllabic lilac bays }.

listen-list of others is { id mantra mad train, pagers, sorer bogey, barren cries, ammo gang, selly yells, brr hub, s-i, s-c }.

listen-list of demo dome is { }.

the ambient sound rule is not listed in any rulebook.

rule for supplying a missing noun when listening (this is the directed ambient sound rule) :
	repeat with Q running through listen-list of mrlp:
		if Q is touchable:
			now the noun is Q;
			if debug-state is true, say "DEBUG note: [Q] found as listen candidate.";
			continue the action;
	if debug-state is true, say "DEBUG note: nothing found as listen candidate.";
	now the noun is the location of the player;

understand "listen [something]" as listening.

check listening:
	abide by the listen-rule of mrlp;
	say "The air! Hear it! (Silent.)[paragraph break]" instead; [??]

this is the listen-ordeal-reload rule:
	if noun is elmo, say "[if rifle is moot]You're in a conversation[else]Awkward silence, what with Elmo holding that rifle[end if]." instead;
	if player is in Dusty Study: [Ordeal Reload]
		if perrot is touchable, say "You're in a conversation. Your turn to speak." instead;
		if report-porter-knocks, say "Nothing, except... (knock, knock, knock.)" instead;
		if stuff-found < 3, say "Peace and quiet. No adventure. Yet." instead;
		if Dusty Study is not lit, say "Nobody's going to whisper a hint to you in the dark." instead;
		say "[randbla]" instead;
	if player is in Farming Framing or player is in Largely All Grey Gallery, say "Merciful quiet, for the moment." instead;

this is the listen-stores rule:
	if noun is odorant tornado, say "A roar of angry undefinable words swirls from the odorant tornado." instead; [stores]
	if noun is tokers, say "[if nestor is touchable]Conversation from the tokers you don't want to listen TOO closely to[else]The tokers bemoan their lost friend[end if]." instead;
	if noun is nestor, say "Nestor periodically mumbles about his lost buddies." instead;
	if noun is Suit Ode, say "You listen for anything at all besides [the babbler]. You pick up some background music--why, yes, it is the the horrendous self-helpy song [i]Suit Ode: Douse It[r]." instead;

this is the listen-troves rule:
	if noun is sob ever verbose, try examining sob ever verbose instead; [troves]
	if player is in Boarded Roadbed:
		if noun is evil bee:
			if SNORE SO ARENA is reflexive:
				say "Nothing unusual from the bee. But the arena...";
				try listening to SNORE SO ARENA instead;
			say "The [evil bee] is silent. So is the [SNORE SO ARENA] beneath it." instead;
		else if noun is snore so arena:
			if snore so arena is reflexed, say "Nothing now that you reasoned your way around the arena's distractions." instead;
			say "[one of]A snore arises from the arena. You see red. There's more, if you can deal with it.[or]'[first custom style]NO EARS! NO EARS[r]!' you hear, seeing red, because that's obviously wrong.[or]'[first custom style]SENORA! SENORA![r]' You see red, unsure who or what the arena is calling out to.[or]There's an advertisement for a play, or a movie, or something, with [first custom style]O. ASNER AS NERO[r]. So weird. You see red.[cycling]" instead; [bold-ok]
		say "Nothing from [the noun][if snore so arena is reflexive], but the [snore so] is making noise[else]. Relative quiet now you dealt with the [snore so][end if]." instead;
	if can-hear-gritty, say "[if talk-quiet is true]You have shut off the random gritty dialogue with [b]HUSH[r][else]Actually, you can't help but hear gritty dialogue[end if]." instead;
	if noun is praise spirea, try examining praise spirea instead;
	if can-hear-posh, say "[if talk-quiet is true]You have shut off the random posh dialogue with [b]HUSH[r][else]Actually, you can't help but hear posh dialogue[end if]. Anyway, no more badgering beggar din." instead;
	if noun is Id Cede, say "[ecs] song[one of][or], I'd Cede,[cycling] echoes. You listen closely to 'I'd Cede.' [one of]Oh man, that one part that gets your eyes watery is up next[or]The song's chorus. Five notes. C, D, E, D, E... 'I...' just right to get your eyes red. There's just a little more[or]Three notes: E, C, E, '...did.' It gets you. You know your eyes are red now. Boy. You find yourself hoping for more, almost completely believing you deserve it[or]There is no more. It is the end. But you see red at the memory of Eddie C.[']s followup, a vapid rehash, [i]I Ceded[r][cycling]." instead;
	if player is in Boredom Bedroom, say "The dead air inspires no rad idea." instead;
	if player is in Upscale Capsule, say "White noise, it is on. Whee." instead;

this is the listen-routes rule:
	if noun is tirades, say "Those [i]tirades[r] from [Gast]. [one of]Though [he-she] gets staider--while still turning red a bit.[or]'Dear, it's...' [he-she] trails off.[or]'Sit. Dare!' [he-she] commands. 'Rad site! Rest aid!'[or]'I stared...'[or][he-she-c] gestures to the [sit a nag], turning red. 'I'd rest a...'[or]'Die, rats! Rats, die!' [he-she] moans, to nobody in particular.[or]'A direst, aridest stare! I'd...'[or]'I stared! I'd stare!'[or]'It's a red...' [he-she] says, actually going red.[or]'Drat, [']e is!' cries [Gast], turning red.[or][he-she-c] explains what left Ed astir, turning red.[in random order]" instead;
	if noun is Gast: [routes]
		if Rude N Nuder is touchable, say "[gast] is banging on about [nuder], now." instead;
		if woe bow bell is touchable, say "You can't hear [gast] over [the WOE BOW BELL]." instead;
		if tirades are touchable, try listening to tirades instead;
		say "BUG. [Gast] should direct you to the next puzzle." instead;
	if noun is woe bow bell, say "Through [the Woe Bow Bell]'s resonance, you [one of]think you could hear something if you listen carefully[or]hear [first custom style]OL['] WEB, OL['] WEB[r]. It makes you see red[stopping]." instead; [bold-ok]
	if player is in Same Mesa:
		if THE BEAN is touchable, say "[one of]You hear people far away crying 'The Bean has landed!'[or]'If the bean was a hat, our hero would be a [first custom style]HAT-BEEN[r].' You see red at the pun.[or]'Ban THEE then, [a-b]!' cries someone.[or]'How do we pull him/her/it without?' / 'Uh, tow it?'[stopping]" instead; [routes] [bold-ok]
		if Gast is moot, say "Nice to have silence with [Gast] gone." instead;
		if Gast is touchable, try listening to Gast instead;
		say "'Mama sees me as...' Irrelevant stuff." instead;
	if player is in Cleric Circle, say "Ol['] Peg's Gospel is singing Our Spire Superior. Or Uh, Peter, Here Put the Pure Up There." instead;
	if player is in Ripe Pier, say "Someone calling out '[']Tis mad!' You see red." instead;
	if noun is raptest patters, try examining raptest patters instead;
	if noun is hurt hog, say "[if bent ewe is reflexive]Squealing. It could be calmer[else]Less noisy now you've been peacemaking a bit[end if]." instead;
	if player is in Sonancy Canyons, say "The raptest patters are gone, and you can fully focus on [next-sonancy]." instead;

to say dsoog: say "[first custom style]DENS SO OG[r]"

this is the listen-presto rule:
	if noun is odes song, say "The sods-gone odes song makes Dirge Ridge unwelcoming but not totally inhospitable. The musical interludes at least make it more tolerable than listening to someone complain. [one of]It sounds familiar, though. If you listen again, you might hear whom it's by and have a clue how to deal with it[or]It's by [dsoog], a dumb name that makes you see red, and you remember they had a dumb follow-up song, too[or]While listening to the odes song, you see red remembering [dsoog] also wrote the appalling nonsense [first custom style]SEGS DO ON[r]. There was one more even worse[or][dsoog] also wrote [first custom style]SEGS DO ON[r] and the unmotivational [first custom style]NEGS? SO? DO[r][stopping]." instead; [presto] [bold-ok]
	if noun is Rand or noun is Leo:
		if Leo is fightin or Rand is fightin:
			say "General battle grunts from [random touchable fightin bruiser][if odes song is touchable] under the odes song[end if]." instead;
		say "[l-n-r]'s small talk is not very deep or aggressive, and they [if rand is washed up]don't seem to resent you for outsmarting them[else]are glad for a bit of banter, though not much comes of it[end if].";
		if rand is washed up:
			try asking a random touchable bruiser about "rannygazoo";
		the rule succeeds;
	if player is in Dirge Ridge:
		if Rand is washed up, try listening to Rand instead;
		say "[if odes song is moot]The odes song is gone, but you still[else]You[end if] just sort of expect a toll of doom any minute[if leo is eager], despite having worked things out with [l-n-r][end if]." instead;
	if player is in Hacks Shack, say "Classic techno music from the Baleets: 'Be Stale.'" instead;
	say "'This ... this ... this...' you hear, faintly. It feels profane." instead;

this is the listen-oyster rule:
	if noun is tunes, say "The jukebox notches technos (though a mere six remixes) with an anti-bore iron beat. Rap is par, too. The pesty types would be upset if something happened." instead; [oyster]
	if player is in Posh Hops Shop, say "Silence. Awkward silence. An occasional cough." instead;
	if noun is clam, say "You hear the clam snapping." instead;
	if player is in Disease Seaside, say "You hear voices from the sabot boats talking about great accomplishments. The [frat raft] makes unpleasant, disturbing noises." instead;
	if noun is pale plea, try examining the pale plea instead;
	if noun is carps or noun is pikes, say "You can't help but listen to the carps['] and pikes['] immature, nasty jibes." instead;
	if noun is trout, say "[if trout is reflexive]Whimpering slightly[else]Not whimpering any more[end if]." instead;
	if player is in Anger Range and carps are moot and sausage is off-stage, say "A cry. 'Eh ... a runt...' you turn red on hearing it." instead;
	if noun is pest pets, say "If you listen right, it's weird, but they seem to be calling 'PSST! PETE!' It makes you see red." instead;
	if noun is eeks, say "You hear eeks. Arcing caring. Weeps sweep. 'Eek! Eek! Eek!' You must find where the eeks are coming from." instead;
	if noun is aunt tuna, say "Aunt Tuna is humming something tuneless as she goes about her business." instead;
	if player is in Sclerous Closures, say "Silence[if sardine is in sclerous closures]--you wouldn't dare sin to upset the sardine with ear dins. OR WOULD YOU[end if]." instead;
	if noun is papery yapper, say "Mindless babble about mutually favorable transactions. Perhaps you can find one here and now." instead;
	if noun is dialer, say "[if pins are in Tenfold Teflond Den Loft]The dialer is quiet. Your orders to [b]DERAIL[r] must've put it out of commission. Maybe you could fix it[else]You hear a hum from the dialer[end if]." instead;

this is the listen-towers rule:
	if noun is Rodney, say "Rodney's intimidating enough, he can keep this place quiet. Well, everyone else in this place. He's a dry one, you think, as you see red." instead; [towers]
	if player is in Topside Deposit, say "An unconvincing voice from where you came moans 'Stop! Die!' You must ignore it and go forward." instead;
	if noun is diners, say "An argument over whether Derin's is a good place to eat. Pro and con both leave you seeing red." instead;
	if noun is butlers, say "The butlers loudly banter 'Let's rub (you) the wrong way!' You see red." instead;
	if player is in Shaven Havens, say "You think you hear NEVAHs, but that's got to be just internal melodrama." instead;
	if player is in Obscurest Subsector and Dr Yow is touchable:
		if Dr Yow is rowdy, say "Dr. Yow is yacking away noisily and enthusiastically." instead;
		if Dr Yow is wordy, say "Dr. Yow is talking slowly and soothingly." instead;
		if Dr Yow is in ropins:
			if Dr Yow has been rowdy or Dr Yow has been wordy, say "Dr. Yow is silent once again." instead;
			say "Dr. Yow moans [he-she] could hack less shackles." instead;
	if noun is angriest ingrates, say "The ingrates go red from [one of]complaining about [i]Geraint's[r] stupidity[or]describing how tacky [i]Nate's rig[r] is[or]describing how tacky [i]Tena's rig[r] is[or]having the [i]rangiest[r] list of complaints you've heard[or]babbling about how they've never been to [i]Tangiers[r][or]relating his horrible education at [i]St. [a-r][r][or]explaining what sane grit they have[or]a cloud of red nitre gas that passed a day ago[or]claiming you think you're a saner git than them[or]a complaint that sounds like tin gears[in random order]." instead;
	if player is in Outer Route, say "The [deviser] machine [if dagger is moot or deviser is reflexive]fizzles[else]chugs[end if] along. The chirping of birds from the campiest campsite seems a little TOO cheery." instead;
	if noun is mardier admirer, say "The mardier admirer's babbling is more than a bit embarrassing. It loops effortlessly between effusive praise, backhanded compliments, and insinuations you've got lazy." instead;
	if noun is lars eede or noun is elsa erde, say "[el-la-full] mutters and moans how [one of]Dr. Eleesa's motivational techniques seem so easy[or]E-dealers have it so easy[or]Lad Reese is an upstart intent on stealing commissions[or]Dre Eleas's methods aren't to be trusted[in random order], turning red until taking another swig at the Reed's Ale." instead;
	if noun is asset hit atheists, say "The atheists are really spelling out their logical arguments against any sort of God[if wait seer is touchable]. In light of this, the wait-seer doesn't seem to be the least tired[end if]. Maybe you could learn more details talking to the atheists." instead;
	if noun is wait seer, say "The wait-seer is so serene, you almost can't waste ire on being blocked. Almost. Maybe even saying random stuff might help a hint slip." instead;
	if player is in Rawest Waster Waters, say "A scrawny swan cry. But not the Sawn Swan. You hope." instead;
	if player is in Dourest Detours, say "You hear something that makes you see red. '[first custom style][one of]OUR DEST[or]OUR DEST: SET, DOUR[or]OUR DEST: SET, DOUR. TROD?! SUE[r][stopping]!' [one of]There's probably more[or]There may be more[or]That's probably it[stopping]." instead; [bold-ok]
	if noun is bonker, say "A menacing silence spews from the bonker. Or maybe it's just your imagination." instead;
	if noun is stinger, say "A twanging e-string emits from the stinger. You can't even see red at it." instead;
	if noun is geese, say "Honk, honk." instead;
	if noun is sporties ripostes, say "The sporties['] ripostes [one of]discuss [first custom style]RIPE SOTS[r][or]plan a trip to [first custom style]TIP ROSE'S[r][or] boom '[first custom style]I SPOTS [']ER'[r][or]reference [first custom style]spites, or sore tips[r][in random order], and you see red at the reference." instead; [bold-ok]
	if player is in Treading Gradient, say "You'd expect a great din, but you don't hear one, thankfully." instead;
	if noun is ancients' canniest instance, say "The instance is to use a bot boat, repaired halfway or fully, to enter it and get across Leak Lake." instead;
	if noun is natives site van:
		say "The babble from the natives['] site van doesn't stop.";
		try objasking natives site van about natives site van instead;

this is the listen-otters rule:
	if noun is Ed Riley, say "Ed Riley doesn't seem to make any noise. He just blocks you west." instead;
	if noun is asyllabic lilac bays, say "[if lilac bays are reflexed]You can't hear anything from the bays now[else]An odd voice. [one of]'Silly Cab A ... Silly Cab A ...' You see red at such nonsense, but you didn't expect anything rigorously profound from flowers[or]'Clay Blais ... Clay Blais ...' oh, right! The exotic flower expert! You see red at his treatment under the new regime[in random order][one of]. The voice seems to change. Maybe there's something else[or][stopping][end if].";
	if noun is Yer All a Yell'r, say "Goodness! [yer all] is a truly horrible song, but it captured a certain rubbish zeitgeist enough to get to #1 on the Yorpwaldian Top 40 charts for a while. You remember how everyone said it was the catchiest song ever, then they said it was old and played out.[paragraph break]Sadly, now, with songs like [i]Yeah, Hey, A Yeeha, Yah[r], some people see it as a beloved classic that music these days can't compare to. Even more sadly, they have a point.[paragraph break]Maybe you can get rid of it, though." instead;
	if noun is parleys splayer players, say "Ick, man. Mackin[']. You really don't want to pay attention to the details, but you get the general impression." instead;
	if vow here is touchable, say "You see red as you hear some nonsense repeated: '[one of]Eeh, row V!'[or]Veer? How?'[or]Rev. Howe?!'[stopping]" instead;
	if player is in Bran Barn, say "You hear morose mooers you can't see." instead;
	if noun is whiners:
		say "It's hard not to hear what the [whiners] have to say, actually[if tallyhoing is touchable], with '[one of]All Night, Yo[or]A holy glint[or]Only lag hit[or]Hal Ying-Lot[or]Hatingly, ol['][in random order]' being particularly prominent. It makes you see red[end if]." instead;
	if noun is sly imp, say "The imp's really messing with your mind. You think you hear it whizzing about or laughing under its breath. It's just too smooth for you right now." instead;
	if player is in Perverse Preserve, say "You hear no metronomes you could turn into monotremes." instead;
	if player is in Rancho Archon Anchor, say "Elvira's laughter still seems to echo, with a creator reactor in the distance, and an occasional shrike shriek, and an ominous BEWARE: WAR BEE." instead; [bold-ok]

bogey-listen is a truth state that varies.

this is the listen-others rule:
	if noun is pagers, say "Annoying, low-tech beeping. Sounds like--well--pagers. You don't have the patience to find them all, though." instead;
	if noun is id mantra mad train, say "A constant droning of '[first custom style]AND I'M ART[r]!' makes you see red." instead;
	if noun is Rustic Citrus, say "Curtis [if cur-score of others < 4]mumbles various business ideas to himself[else]continues to sing and hum the tidiest dietist ditties[end if]." instead;
	if noun is sorer bogey:
		now bogey-listen is true;
		say "'I am the sorer bogey!' you hear. '[one of]Be sorry, ego[or]Oy! Erg! Sober[or]Ye sorer gob[in random order]!' it cries, as you see your skin redden." instead;
	if noun is barren cries, say "The barren cries are sour and bitter and tiny." instead;
	if noun is ammo gang, say "One of the selly yells stands out from the others. A small voice is saying, 'Go, man!' You see red as it begins to nag mo[']. Where? How?" instead;
	if noun is selly yells, say "[selyel]" instead;
	if player is in Clangier Clearing, say "[selyel]" instead;
	if noun is brr hub, say "A brr-hub is making an aggressive bb-arr-uh noise and seems to turn red in the process." instead;
	if noun is s-i or noun is s-c, say "A low buzzing from your [if player has s-c]sonic coins[else]sonic icons[end if]--odd. What could they do, or buy?" instead;

to say selyel:
	say "Selly yells[one of], important to those yelling them but not you[or][stopping]: [randbla][line break]";

this is the listen-demo-dome rule:
	say "It's nice and quiet. As you'd expect from a museum." instead;

chapter smelling

the block smelling rule is not listed in any rulebook.

the ambient odour rule is not listed in any rulebook.

smell-list of ordeal reload is { }.

smell-list of stores is { mangiest steaming, odorant tornado, store y, barnacle balancer, hoster }.

smell-list of routes is { pipe soot, seed pit, data dim mists }.

smell-list of troves is { }.

smell-list of presto is { ether, casserole }.

smell-list of oyster is { weaselly walleyes }.

smell-list of towers is { angriest ingrates, Nerd Aid }.

smell-list of others is { slime }.

smell-list of demo dome is { }.

rule for supplying a missing noun when smelling (this is the directed ambient odor rule):
	repeat with Q running through smell-list of mrlp:
		if Q is touchable:
			if debug-state is true, say "DEBUG note: [Q] found as smell candidate.";
			now the noun is Q;
			continue the action;
	if debug-state is true, say "DEBUG note: nothing found as smell candidate.";
	now noun is location of player;

check smelling (this is the you can smell some stuff some places rule):
	abide by the smell-rule of mrlp;
	say "Aroma-o-rama? Nothing's [i]tons[r] nigh." instead;

this is the smell-ordeal-reload rule:
	if player is in Dusty Study and study is dark, say "That worked in Hitch-Hiker's Guide to the Galaxy, but not here. That'd be copy-catting." instead;
	if player is in Dusty Study and Report Porter Perrot is moot, say "Bean soup. Subpoena is near." instead;
	if player is in Farming Framing, say "Thankfully, this is a game about anagrams and not spoonerisms, and you cleaned the tables before flipping them, so you smell no table scrap." instead;

this is the smell-stores rule:
	if noun is mangiest steaming, say "Err. I can't tell you exactly how the mangiest steaming smells. I wouldn't know. I don't need that stuff to come up with my ideas. I'm that brilliant!" instead;
	if noun is odorant tornado, say "The smell from the odorant tornado makes you almost want to lash out verbally, even though that will do no good." instead;
	if noun is store y or noun is barnacle balancer, say "Seawater scents from [the noun]." instead;
	if noun is throes hoster, say "A mix of surprisingly nice smells from the Throes Hoster where Store H was." instead;
	if player is in Cruelest Lectures, say "It smells depressingly antiseptic here." instead;

this is the smell-troves rule:
	if can-hear-gritty, say "Eew-gas sewage. Skint-stink." instead;
	if noun is Large Regal Lager, say "A faint rye-be-beery odor." instead;
	if player is in Drain Nadir, say "Ew--mild mildew. A mustier semi-rut." instead;
	if player is in Browse Bowers or player is in Econ Cone or player is in Upscale Capsule, say "Perfumed. Dump-free." instead;

this is the smell-routes rule:
	if noun is pipe soot, say "The lingering pipe smoke that made the soot is actually agreeable. The ashtray itself doesn't smell especially strong[if pipe soot is in Adobe Abode], so the pipe soot probably won't burn your hands if you can take it[end if]." instead;
	if noun is seed pit, say "The seed pit smells a bit musty." instead;
	if noun is data dim mists, say "Ugh! The mists smell, as kids in Yorpwald say for slang purposes, staim'd. You see red at how useless and impractical such ridiculous slang is. Which, of course, makes it actually useful here." instead;

this is the smell-presto rule:
	if noun is ether, say "The ether is nontoxic but still potentially dangerous, [if ether-try is true]since[else]if[end if] someone's hiding there." instead;
	if noun is casserole, say "That casserole smells ... well, sturdy. Not for the sophisticated." instead;
	if location of player is in-the-maze, say "You smell a gefilte and think 'get a life.'" instead;
	say "[if cur-score of presto is 0]It smells a bit stinky here, but more pressingly, it just FEELS stinky[else]You don't smell anything that'd make you say what you've needed to say in this area, which is a good thing[end if]." instead;

this is the smell-oyster rule:
	if player is in Posh Hops Shop, say "You catch a whiff: [']k, some mokes['] smoke." instead; [oyster]
	if player is in Disease Seaside, say "Say, spare sea spray." instead;
	if player is in Fighter Freight, say "You catch a whiff of Apple Ale. Yes, you remember the red label quite clearly." instead;
	if player is in Sclerous Closures and sardine is in Sclerous Closures, say "Sea rind." instead;
	if player is in Lean Lane, say "Antiseptic spice taint." instead;
	if player is in Rascal Craals, say "This situation only stinks in general, not literally." instead;
	if noun is weaselly walleyes, say "The weaselly walleyes smell of Skum-Musk." instead;
	if player is in Tenfold Teflond Den Loft, say "Old heat. Loathed hot lead." instead;

this is the smell-towers rule:
	if noun is ingrates, say "Nitre gas. Or niter gas. You forget how it's spelled, and trying to remember makes you see red either way." instead;
	if player is in Outer Route, say "[one of]You smell something generically nice from the campsite nearby and say 'Ahhhh! Nature!' a bit too loud. Ugg. You won't do that again.[or]You wonder to yourself if that's tarragon or rosemary or perhaps a hint of lavender... no, no, no.[or]I ran out of stupid jokes for this. Get on with the game, here.[stopping]" instead;
	if noun is Nerd Aid, say "The Nerd-Aid smells suspiciously like the very red Rind-Ade drink." instead;
	if leak lake is touchable, say "The overwhelming smell of kale is not offensive, but you'd like to get by Leak Lake, all the same." instead;

this is the smell-otters rule:
	if the deli rye is touchable or noun is deli rye, say "The deli rye smells good, but Ed won't share." instead;
	if player is in Disowned Downside, say "You can [if parleys splayer players are moot]still [end if]smell the [players]['] Cool-Gen Cologne, from that coy-hued bottle." instead;
	if player is in Reclusion Inclosure, say "A clove, likely from one alcove." instead;
	if player is in Loop Pool, say "Salt Water. Wet, astral." instead;
	if player is in Rancho Archon Anchor, say "Vast vats['] sulfinyl reek sinfully, clearly eliminates all hope of silly fun. Oh: decayin['] cyanide, too." instead;

this is the smell-others rule:
	if noun is slime, say "The slime actually smells...nice, like dishwashing detergent." instead;
	say "Smells, savory, vary so." instead;

this is the smell-demo-dome rule:
	say "Thankfully, nothing unusual like, say, a Med-O-Dome." instead;

chapter sleeping

check sleeping:
	abide by the sleep-rule of mrlp;
	if peels speel is reflexed:
		say "[one of]You already found a place to sleep, so I'll give you generic sleep-rejects from here.[or][randbla][stopping]" instead;
	say "[one of][sleep-reject].[or][randbla][stopping]" instead;

to say sleep-reject:
	if location of player is outie:
		say "Sleeping outside is dangerous. You'd need somewhere protected";
	else if mrlp is Ordeal Reload:
		say "You won't need to sleep for a long while.";
	else if mrlp is presto and shack is unvisited:
		say "It'd be nice to have somewhere to sleep after tumbling through the gyre";
	else:
		say "Maybe you'll find somewhere more hospitable later";
	say ". But otherwise, you'll get a bunch of silly random responses you may or may not find entertaining";
	pad-rec "sleep";

this is the sleep-ordeal-reload rule:
	if report-porter-knocks, say "Not with that knocking." instead;
	if player is in dusty study and report porter perrot is off-stage, say "But you just woke up!" instead; [could/should be just the second condition, but some tests jump around]
	if player is in Carven Cavern, say "It's way safer here than in the Means Manse, but it's also way less comfortable." instead;
	say "You probably can't spend another night in the Means Manse. You need to get going, here!" instead;

this is the sleep-stores rule: do nothing;

this is the sleep-troves rule:
	if player is in Boredom Bedroom, say "You don't have time to dream of titanium golf clubs or overpriced alcohol or all the things you should have been dreaming about all these years. Slacker." instead;
	if player is in Upscale Capsule, say "You got here by doing nothing while conscious, not doing nothing while unconscious." instead;
	if player is in Browse Bowers or player is in Econ Cone, say "In a public place? Worse, in an upscale public place? How shocking!" instead;
	say "Nonsense! Spoiloplis is no place for sleepers. Unless they are really energetic about why they need sleep. Maybe you can sleep somewhere else. But not now." instead;

this is the sleep-routes rule:
	if player is in Cripple Clipper, say "This is no dreamboat." instead;

this is the sleep-presto rule:
	if hacks shack is unvisited, continue the action;
	if peels speel is reflexed, say "You already got the sleep you needed." instead;
	pad-rec-q "sleep";
	if player is in Hacks Shack:
		if peels speel is in Hacks Shack, try fliptoing peels speel instead;
		if peels speel is off-stage:
			say "[if futon is off-stage]You may need sleep later, but not now. Besides, you have nowhere to sleep[else]Sleep on the futon? Wouldn't be fun to. Or necessary. Yet[end if]." instead;
	if Hacks Shack is visited, say "Only the shack seems to be a safe place to sleep, here." instead;

this is the sleep-oyster rule:
	say "You feel too inclined towards action for that." instead;

this is the sleep-towers rule: do nothing;

this is the sleep-otters rule: do nothing;

this is the sleep-others rule: do nothing;

this is the sleep-demo-dome rule: do nothing;

chapter taking

check taking a person: [?? see about unblocking basic rule if this isn't triggered]
	if noun is the player, say "I'm the only one who gets to be self-referential, here. Got it? Good." instead;
	if noun is the parleys splayer players, say "They're the pick-up artists, here." instead;
	if noun is Gretta, say "You might be worse at picking Gretta up than the [players]." instead;
	if noun is eels, say "[if power-back is true]They already gave you a charge[else]That might get you the wrong sort of charge[end if]." instead;
	say "Lifting [if noun is plural-named]people[else]a person[end if] or something [if noun is plural-named]people[else]person[end if]-sized is too heavy for your superpowers. Even if your name happens to be Kate." instead;

chapter looking

section under

chapter look under

look-under-warn is a truth state that varies.

check looking under:
	if look-under-warn is false:
		ital-say "looking under is equivalent to SEARCHing unless the game is explicit. That way you can look inside, around and under in just one move. Let's do that now.";
		now look-under-warn is true;
	else:
		say "(just searching instead)[paragraph break]";
	try searching noun instead;

section behind

understand "look behind [thing]" as searching.

chapter examining

does the player mean examining a direction: it is very unlikely.
does the player mean entering a direction: it is very unlikely.

before examining (this is the mark as examined rule):
	if noun is inside, say "You need to specify the object you wish to look inside. You can also probably just [b]X[r]/[b]EXAMINE[r] it." instead;
	if noun is up and be ova is touchable, say "Not quite [b]UP[r]." instead;
	if noun is a direction, say "Looking in directions isn't supported in this game. Best to go where you want to look, or if a building is to the north, say [b]X BUILDING[r] instead." instead;
	if noun is a room, try looking instead;
	if noun is not a thing, say "Try examining less abstract things instead." instead;
	if the noun provides the property examined, now noun is examined;

after examining:
	if noun is readable, now last-read is noun;
	continue the action;

chapter tying it to

check tying it to (this is the keyboard and key rule) :
	if noun is second noun, say "Tautology? Got ya, lout!" instead;
	if noun is drive a, try tying second noun to noun instead;
	if second noun is caps lock, try tying second noun to noun instead;
	if noun is caps lock and second noun is keyboard and caps lock is not part of the keyboard:
		say "'Pokey Key-op? Yep. Ok.' you say as you fit it in. No more in-caps panics.";
		now caps lock is part of the keyboard instead;

chapter waving

understand the command "wave" as something new.

understand the command "wave [something]" as something new.

understand "wave" as waving hands.

check waving hands: say "A view! I wave!" instead;

chapter swearing

check swearing obscenely:
	unless qbc_litany is table of no conversation, say "You're classier than that." instead;
	abide by the swear-rule of mrlp;
	say "[randbla][line break]" instead;

this is the swear-ordeal-reload rule: do nothing;

this is the swear-stores rule: do nothing;

this is the swear-troves rule:
	say "Such words, thought or spoken, may help some get ahead in life. But they are a bit suboptimal for you here." instead;

this is the swear-routes rule:
	if location of player is Cleric Circle:
		if curse-warned is false:
			now curse-warned is true;
			say "Only, uh, unholy. You can curse anywhere else except here without repercussion." instead;
		say "A voice booms SACRILEGE? RAGE! SLICE! You feel horrible pain, and the last thing you hear is CRUDE? CURED!"; [bold-ok]
		get-dead;
		the rule succeeds;
	if player is in Cripple Clipper, say "Siphon no pish on-ship." instead;

this is the swear-presto rule:
	if cur-score of presto is 0, say "That's too strong for here. But you have the right idea." instead;
	if Hacks Shack is visited, say "While computer hackery involves a lot of spontaneous swearing at times, it won't help you, here. The interjective part of your journey is [if keyboard is off-stage or censer is off-stage]mostly [end if]over." instead;
	if plebe is touchable, say "The plebe perks [his-her] ears up, but maybe that was too strong. Perhaps you should use a more general one--or one the plebe isn't expecting." instead;
	if hogs are touchable, say "The hogs snicker at HOW you said that swear. But yet ... but yet, they seemed slightly irritated at that second-rate profanity!" instead;
	if location of player is in-the-maze, say "Unnecessary mazes do have that effect on people." instead;
	say "No, that's too strong for here. You've been doing quite well with the tame stuff." instead;

this is the swear-oyster rule:
	if player is in Posh Hops Shop, say "This is the place for it, but you can't bring yourself to be heard." instead;
	if player is in Lean Lane, say "You don't want Aunt Tuna to perform a tsk task." instead;

this is the swear-towers rule:
	if lois is touchable or hostile is he lot is touchable, say "Oh, the self-righteous backlash you'd get from [if lois is touchable][lois the][else][the he lot][end if]!" instead;
	if player is in Rawest Waster Waters, say "Trying to cross languages and make this Swears-Wasser does no good." instead;

this is the swear-otters rule:
	if player is in Disowned Downside and parleys splayer players are in Disowned Downside, say "The conversation is horrid enough." instead;
	if power-back is false, say "At the moment, even your profanities lack power." instead;
	if player is in Reclusion Inclosure and elmer is in Reclusion Inclosure, say "[e-n-m] sniff faux-piously." instead;
	if player is in Rancho Archon Anchor, say "Yup. It's gotten REAL. But that won't help." instead;

this is the swear-others rule:
	if player is in Rustic Citrus, say "Instead, you mumble ... 'I, curst!'" instead;

this is the swear-demo-dome rule: do nothing;

to say deth:
	let temp be a random number from 1 to number of rows in table of death messages;
	say "[if showtabname is true](table of death messages)[end if][blurb in row temp of table of death messages]";

curse-warned is a truth state that varies.

to decide which number is mild-swear-score:
	let temp be 0;
	if dart is not in cistern, increment temp;
	if rand is reflexed, increment temp;
	decide on temp;

to say om: say "[if mild-swear-score is 0]one or two mild swears[else if mild-swear-score is 1]one more mild swear[end if]";

check swearing mildly:
	if mrlp is presto:
		if hogs are touchable, say "The hogs groan, as if to say, don't try that again. Maybe a different lame swear will set them off." instead;
		say "[if mild-swear-score < 2]Well, maybe [om] would work somewhere around here.[else if plebe is touchable]The plebe actually looks frightened, because they've had mild swears soften them up for worse.[else]You had your chance for a minor swear or two. And you took it. Yay, you.[end if]" instead;
	try swearing obscenely instead;

understand "bastard" as swearing mildly.

pointing it at is an action applying to two things.

understand the command "point [something] at [something]" as something new.

understand "point [something] at [something]" as pointing it at.

does the player mean pointing the settler at: it is very likely.

does the player mean pointing the settler at the player: it is very likely.

point-warn is a truth state that varies.

carry out pointing it at:
	if noun is patcher, try zaping second noun instead;
	if noun is not settler, say "You can really only point [if player has settler]the settler[else]one thing[end if] at other objects." instead;
	if point-warn is false:
		ital-say "it's much easier to [b]SCAN[o] objects instead.";
		now point-warn is true;
	try scaning second noun instead;

book specific irregular verbs

part location specific stuff

chapter thising

thising is an action applying to nothing.

understand the command "this" as something new.

understand "this" as thising.

carry out thising:
	say "[if location of player is location of plebe]The plebe flinches a bit, but maybe you need something more general?[else]No excuse for that sort of language. Really.[end if]" instead;

chapter chewing

chewing is an action applying to one thing.

understand the command "chew" as something new.

understand "chew" as chewing.
understand "chew [something]" as chewing.

carry out chewing:
	if noun is gum, say "Nah. The gum looks like it tastes like clay. But it looks like you could pull it into something else." instead;
	try eating noun instead;

part settler stubs

chapter cting

[* c=t=cheat=teach=push tech etcha'/cheat button]

cheatoning is an action out of world.
cheatoffing is an action applying to nothing.

understand the command "c/t/cheat/teach" as something new.

understand "c" and "cheat" as cheatoning.
understand "t" and "teach" as cheatoffing.

this is the settler-reject rule:
	if settler is not touchable, say "[reject]" instead;

carry out cheatoning:
	abide by the settler-reject rule;
	say "You [if cheat-on is true]already [end if]set a tech etcha['] mode on.";
	now cheat-on is true;
	check-parse-spare;
	the rule succeeds;

carry out cheatoffing:
	abide by the settler-reject rule;
	say "You [if cheat-on is false]already [end if]set a tech etcha['] mode off.";
	now cheat-on is false;
	check-parse-spare;
	the rule succeeds;

chapter sbing

sbing is an action applying to one thing.

understand the command "sb" as something new.

understand "sb" as sbing.

understand "sb [thing]" as sbing.

sb-cur is a truth state that varies.

carry out sbing:
	if debug-state is false, say "[reject]";
	abide by the general settler reject rule;
	d "SBing: [noun].";
	if noun is a bruiser and noun is washed up: [leo/rand]
		do nothing;
	else if noun is reflexed:
		if noun is not dialer and noun is not sit a nag, say "You fiddle with the settler, but on each setting, it emits a BEEEOOOP which suggests there's nothing left to do here." instead;
	now sb-cur is true;
	let z be cheat-on;
	now cheat-on is false;
	try scaning noun;
	if the rule failed, the rule succeeds;
	if a-text of last-scanned-thing is b-text of last-scanned-thing:
		say "Nothing changes between cheat/teach and regular mode.";
		now sb-cur is false;
		the rule succeeds;
	now cheat-on is true;
	try scaning noun;
	now cheat-on is z;
	now sb-cur is false;
	the rule succeeds;

chapter ssing

[* SS scans an object forcing no-cheat mode]

ssing is an action applying to nothing.

understand the command "ss" as something new.

understand "ss" as ssing.

understand "ss [thing]" as ss0ing.

understand the command "shake" as something new.

understand "shake [thing]" as ss0ing.
understand "shake" as ss0ing.

rule for supplying a missing noun when ss0ing:
	if player has settler:
		now noun is settler;
	say "There's only one thing to [b]SHAKE[r] in [this-game], and you don't have it, yet.";
	reject the player's command;

ss0ing is an action applying to one thing.

carry out ss0ing:
	if noun is not settler, say "That doesn't really work. Just [b]SS[r] will scan everything." instead;
	try ssing instead;

carry out ssing:
	if settler is not touchable, say "[reject]" instead;
	show-bluables instead;

chapter sying

[* SY scans an object forcing cheat mode]

sying is an action applying to one thing.

understand the command "sy" as something new.

understand "sy" as sying.
understand "sy [something]" as sying.

this is the sysn-prep rule:
	if player does not have settler and settler is touchable, try taking settler;
	if player does not have settler, say "You need the settler for this shortcut." instead;

cheat-was is a truth state that varies.

this is the cheat-reset rule:
	if cheat-on is not cheat-was:
		say "You re-[if cheat-was is false]un[end if]set the cheat/teach button.";
		now cheat-on is cheat-was

carry out sying:
	now cheat-on is true;
	try scaning noun;
	abide by the cheat-reset rule;
	the rule succeeds.

chapter sning

[* SN scans an object forcing no-cheat mode]

sning is an action applying to one thing.

understand the command "sn" as something new.

understand "sn" as sning.
understand "sn [something]" as sning.

carry out sning:
	if player does not have settler and settler is touchable, try taking settler;
	if player does not have settler, say "You need the settler for this shortcut." instead;
	now cheat-on is false;
	try scaning noun;
	abide by the cheat-reset rule;
	the rule succeeds;

chapter laing

[* LA looks at the last thing scanned. It should not be relevant unless you are vision impaired. ]

last-scanned-thing is a thing that varies.

scanlasting is an action out of world.

understand the command "la" as something new.

understand "la" as scanlasting.

carry out scanlasting:
	if last-scanned-thing is yourself or last-scanned-thing is nothing, say "You haven't successfully scanned anything yet." instead;
	say "Previous scan: [the last-scanned-thing][if last-scanned-thing is moot], which are now out of play,[end if] scanned [full-monty of last-scanned-thing]." instead;

part accessibility

parse-now is a truth state that varies.

chapter parseing

parseing is an action out of world.

understand the command "parse" as something new.

understand "parse" as parseing when know-parse-spare.

parse-mist is a truth state that varies.

carry out parseing:
	if spear is touchable and parse-mist is false:
		now parse-mist is true;
		say "You've parsed the spelling of quite a few words so far. Just a bit more, now. Something here is making it hard to use this meta-command.";
		say "[line break](If you wanted to change how you see the letters settler's output, you can type [b]PARSE[r] again.)" instead;
	say "Parsing letters settler output is [if parse-now is false]now[else]already[end if] on[but-if-parse].";
	now parse-now is true;
	pad-rec-q "parse";
	now parse-warned is true;
	the rule succeeds;

to say but-if-parse:
	if cheat-on is false:
		say ", but it isn't very effective with teach/cheat off"

chapter spareing

spareing is an action out of world.

understand the command "spare" as something new.

understand "spare" as spareing when know-parse-spare.

spare-mist is a truth state that varies.

carry out spareing:
	if spear is touchable and spare-mist is false:
		now spare-mist is true;
		say "No, not adjectives. Well, not here by Curtis.";
		say "[line break](If you wanted to change how you see the letters settler output, you can type [b]SPARE[r] again.)" instead;
	say "Parsing letters settler output is [if parse-now is true]now[else]already[end if] off.";
	now parse-now is false;
	pad-rec-q "parse";
	now parse-warned is true;
	the rule succeeds;

chapter accessing

accessing is an action out of world.

understand the command "access" as something new.

understand "access" as accessing.

carry out accessing:
	now screenread is whether or not screenread is false;
	say "Accessibility mode is now [on-off of screenread].";
	the rule succeeds;

chapter spaceoning

[* SPACE ON should allow spaces to be on]

setspace is a truth state that varies.

spaceoning is an action out of world.

understand the commands "spaceon/son" and "space on" as something new.

understand "spaceon" and "son" and "space on" as spaceoning.

carry out spaceoning:
	say "[if setspace is true]Spaces are already[else]Now spaces are[end if] on.";
	now setspace is true;
	the rule succeeds;

chapter nospaceing

[* NO SPACE should force spaces off--unless you are in accessibility mode]

nospaceing is an action out of world.

understand the commands "nospace/nos" and "no space" as something new.

understand "nospace" and "nos" and "no space" as nospaceing.

carry out nospaceing:
	if screenread is true, say "No space mode is very problematic with a screen reader, so I have disabled your ability to do so. You can toggle screen reading with [b]SCR[r] or [b]SCREEN[r], if you want." instead;
	say "[if setspace is false]Spaces are already[else]Now spaces are[end if] off.";
	now setspace is false;
	the rule succeeds;

part random text toggles

quiet-warn is a truth state that varies.
talk-quiet is a truth state that varies.

chapter uhhsing

uhhsing is an action out of world.

understand the command "uhhs" as something new.

understand "uhhs" as uhhsing.

carry out uhhsing:
	if talk-quiet is false:
		say "You already can hear random dialogue.";
	else:
		say "Random dialogue on again.";
	now talk-quiet is false;
	the rule succeeds;

chapter hushing

hushing is an action out of world.

understand the command "hush" as something new.

understand "hush" as hushing.

ever-hush is a truth state that varies.

carry out hushing:
	if talk-quiet is true, say "You already can't hear random dialogue." instead;
	say "Random dialogue off.[paragraph break]";
	if ever-hush is false:
		ital-say "you will still hear the first random dialogue in an area, but it will be noted as such.";
		now ever-hush is true;
	now talk-quiet is true;
	the rule succeeds;

part nothin/nohint

chapter nothining

absolutely-no-hints is a truth state that varies.

nothining is an action out of world.

understand the command "nothin" as something new.

understand "nothin" as nothining.

carry out nothining:
	if absolutely-no-hints is true, say "You've already shut down hints for this saved game." instead;
	say "Disabling hints for the entirety of play is a drastic step, so [one of][or]once again I want to note [stopping][b]NO HINT[r] may be better than the drastic [b]NOTHING[r]. Do you still wish to disable hints completely?";
	if the player regex-prompt-consents:
		now absolutely-no-hints is true;
	say "Okay[if absolutely-no-hints is true]. Hints are now disabled even if you save and restore[end if].";
	if session-hints-off:
		turn-temp-on; [need to disable the message in the new Save the Game Rule]
	the rule succeeds;

chapter nohinting

nohinting is an action out of world.

understand the commands "nohint" and "no hint" as something new.

understand "nohint" and "no hint" as nohinting.

carry out nohinting:
	if absolutely-no-hints is true, say "You've already shut hints down completely." instead;
	if session-hints-off, say "You've already shut off hints for this session." instead;
	say "Hints are now shut off for this session. If you save and restore, you will get hints again.";
	turn-temp-off;
	the rule succeeds;

Include (-
global temphintoff = 0;

-) after "Definitions.i6t"

to turn-temp-off: (- temphintoff = 1; -).
to turn-temp-on: (- temphintoff = 0; -).

to decide whether session-hints-off: (- (temphintoff==1) -).

Include (-

[ SAVE_THE_GAME_R res fref zz;
	if (actor ~= player) rfalse;
	fref = glk_fileref_create_by_prompt($01, $01, 0);
	if (fref == 0) jump SFailed;
	gg_savestr = glk_stream_open_file(fref, $01, GG_SAVESTR_ROCK);
	glk_fileref_destroy(fref);
	if (gg_savestr == 0) jump SFailed;
	@save gg_savestr res;
	if (res == -1) {
		! The player actually just typed "restore". We're going to print
		!  GL__M(##Restore,2); the Z-Code Inform library does this correctly
		! now. But first, we have to recover all the Glk objects; the values
		! in our global variables are all wrong.
		GGRecoverObjects();
		glk_stream_close(gg_savestr, 0); ! stream_close
		gg_savestr = 0;
		zz = GL__M(##Restore, 2);
		print "!!";
		if (temphintoff==1)
		{
			print "^Hinting has been restored, since you temporarily disabled it last session.^";
			temphintoff=0;
		}
		return zz;
	}
	glk_stream_close(gg_savestr, 0); ! stream_close
	gg_savestr = 0;
	if (res == 0) return GL__M(##Save, 2);
	.SFailed;
	GL__M(##Save, 1);
];

-) instead of "Save The Game Rule" in "Glulx.i6t".

chapter creditsing

creditsing is an action out of world.

understand the command "credits" as something new.

understand "credits" as creditsing.

carry out creditsing:
	abide by the no-meta-in-convo rule;
	say "I must direct credit to a large gofer forge of people who helped make sure this game wasn't mega (redacted).[paragraph break]Thanks to Heartless Zombie (David White) for his hash code and suggestions, which removed many technical barriers.[paragraph break]More generally, thanks to people involved with Inform 7. Sparser parsers couldn't have hacked this game.[paragraph break]More personally, thanks to my testers who beat my Beta. They are, in first-name alphabetical order: David White, Jason Ermer, Kevin Jackson-Mead, Paul Lee, Peter Butter, Melvin Rangasamy, and Wade Clarke. Robert DeFord provided moral support and proofread game documents.[paragraph break]Potsy typos and possibly a tyro's story are not their fault.[paragraph break]Out of the blue help post-release came from Toby Ott, who went through the game several times, and David Welbourn, whose walkthrough at www.plover.net/~davidw/sol/r/roili13.html inspired many bug, hint and user-friendliness fixes. Hanon Ondricek helped with user-friendliness issues and found the wonderful name Dawn Churlzest, Streever helped with a Heisenbug and lots of release 2/3 stuff, and Marshal Winter found cool stuff. For release 3, Elizabeth McDonald, Joel Webster, Lydia Q. Dames, Sean M. Shore and Steven Watson provided testing too, and Matt Weiner noted a debug-text bug that helped me overhaul under the hood stuff.[paragraph break]Jason Lautzenheiser did some code review for release 4.[paragraph break]Thanks to Hanon Ondricek for finding the Electric Slide font and to Wade Clarke for consulting on the new release 3 cover art. If you hate the main idea, that's on me, but they helped me bring it out as best I could.[paragraph break]Thanks to the organizers of IFComp 2012 and Spring Thing 2013, Stephen Granade and Greg Boettcher. Thanks to Greg for checking up on me when I forgot to confirm my entry fee payment.[paragraph break]Thanks to bitbucket for posting a project that let me organize bugs privately and github for letting me organize post-comp releases. If you want to write something, just having a place to write down issues is fabulous.[paragraph break]You can see the current project status at [ghsite]." instead;

chapter abouting

abouting is an action out of world.

understand the command "about" as something new.

understand "about" as abouting.

carry out abouting:
	abide by the no-meta-in-convo rule;
	if mrlp is routes and cur-score of mrlp > 0:
		say "You push your luck, but no u-boat shows up. [if Ripe Pier is unvisited]Good thing you're above-ground[else if player is in Ripe Pier]A ship is already there[else if player is in Cripple Clipper]That's the last thing you'd need now[else][end if].";
		say "Oh, wait, did you want to see the [b]ABOUT[r] message for real? I should note here you don't need [b]ABOUT[r] to win the Routes area.";
		unless the player regex-prompt-consents:
			say "Okay." instead;
	say "[this-game] is the sequel to [shuf] and the second entry in [tsts] series. To see more general information there, type [b]STS[r].[paragraph break][aro] was initially written for Spring Thing 2013 and contains the same mechanics as [shuf] but hopefully is different enough to make for a new, original, and enjoyable story, especially since I focused on story and hinting in the post-comp release.";
	say "[line break][trt], the third entry, is much shorter and was inspired by a Last Lousy Point in the post-Elvira area.";
	say "[line break]You can see more abut the people who helped the game come to be by typing [b]CREDITS[r]. There are a lot of them!";
	say "[line break][this-game] is intended to be POLITE on the Zarfian cruelty scale. It's possible to die, but the deaths are meant to be joke deaths. Barring a horrid bug, there is no way to make the game unwinnable, although you may lock yourself out of getting full points, but you don't get anything special for that beyond a feeling of accomplishment.";
	ital-say "I really appreciate transcripts (even though this is a post-comp version,) as it's cool to tinker with what I made--or to be able to squash a bug, or to make a puzzle clearer. If you wish to send a transcript, you can do so by typing [b]TRANSCRIPT[i] at the command line, then mailing me that text file at [email]. ;, * and ? at the line's start will indicate comments.[paragraph break]You can directly report bugs or annoyances at [ghsite]--no need for an account." instead;

part releaseing

releaseing is an action out of world.

understand the command "release" as something new.

understand "release" as releaseing.

carry out releaseing:
	say "Each version of [this-game] should contain a text file with detailed release notes, but here is a brief summary:[paragraph break]";
	say "[this-game]'s first release was for Spring Thing 2013, on April 1st.";
	say "[this-game]'s second release went out in January 2014. It fixed a lot of puzzles and bugs and also opened up a new region. Many areas were renamed, and many puzzles were redone. The code name was [i]Gad! Super Upgrades![r]";
	say "[this-game]'s third release went out in March of 2015. It included the 'director's cut' Demo Dome Mode. Puzzles were tweaked, and hinting was made more robust. The code name was Past-Due Updates.";
	say "[line break]The current edition of [this-game] should include Invisiclues-style HTML, a color Trizbort map, a walkthrough, a heatmap of (rough) relative area difficulty, and a list of changes from the previous release. The code name was [i]Sustinent Nuttiness[r].";
	say "Any future update could be called Fiddly Did Fly, because I don't expect to do much more. Tweakings Take Wings, Fun [']Nuf and We Task Tweaks are possibilities, but they feel kind of cheap.";

part teching

teching is an action out of world.

understand the command "tech" as something new.

understand "tech" as teching.

carry out teching:
	say "Many people helped with technical aspects of [this-game]. There are the people who wrote the extensions. Andrew Plotkin showed some I6 code for taking transcripts and other things. Climbingstars helped with Bypass Disambiguation (not present til post-comp) and setting pronouns, among other things. Heartless Zombie betrayed his name by pointing me to hash tables to process 'good guesses' in the player's commands, which cleared up a lot of thinking that bugged both me and the player. He also helped me with other neat stubs I've re-used since then.[paragraph break]All three of these people's efforts are also present in the first game[if cur-score of Ordeal Reload > 0] in the Stale Tales Slate[end if], [shuf]. So I am doubly thankful.[paragraph break]Juhana Leinonen's JavaScript code helped me create the HTML for pseudo-Invisiclues.[paragraph break]Genstein's Trizbort app helped me create the map for release 3 (black and white) and Jason Lautzenheiser's modifications for release 4 (region color, borders and more) helped me, and maybe you, visualize things that much better.";
	say "[line break]And it's already mentioned in the credits, but [ghsite] is where the project is hosted. I recommend using source control if at all possible. Even if you just use it to keep a backup, or be sure of what you changed, it can save a lot of trouble.";
	the rule succeeds;

chapter optionsing

optionsing is an action out of world.

understand the command "options" as something new.
understand the command "opts" as something new.
understand the command "post opts" as something new.

understand "options" as optionsing.
understand "opts" as optionsing.
understand "post opts" as optionsing.

carry out optionsing:
	try padding "options" instead;
	if player is in Bustle Sublet and stop post is reflexive:
		if word number 1 in the player's command is "opts" or word number 2 in the player's command is "opts":
			say "(You have 24 opts for what to do with the stop post, but this doesn't quite work.)";
	the rule succeeds;

chapter verbing

verbing is an action out of world.

understand the command "verb" as something new.
understand the command "verbs" as something new.

understand "verb" as verbing.
understand "verbs" as verbing.

carry out verbing:
	try padding "verbs" instead;

chapter xtraing

xtraing is an action applying to nothing.

understand the command "xtra" as something new.

understand "trax" as xtraing.
understand "xtra" as xtraing.
understand "xtra trax" as xtraing.

xtra-trax is a truth state that varies.

xtra-trax-warn is a truth state that varies.

carry out xtraing:
	now xtra-trax is whether or not xtra-trax is false;
	say "Toggling correct-anagram nudges to [if xtra-trax is false]generic[else]detailed[end if].";
	now xtra-trax-warn is true;
	pad-rec-q "xtra/trax";
	the rule succeeds.

chapter extraing

extraing is an action out of world.

understand the command "extra" as something new.

understand "extra" as extraing.

carry out extraing:
	now extra-taxer-warn is true;
	say "Extra question-mark information for cheat/teach mode on settler is [if taxer-not-extra is false]already[else]now[end if] on. Change it back with [b]TAX ER[r] or [b]TAXER[r].";
	now taxer-not-extra is false;
	the rule succeeds.

chapter taxering

taxering is an action out of world.

understand the command "taxer" as something new.
understand the command "tax er" as something new.

understand "taxer" as taxering.
understand "tax er" as taxering.

carry out taxering:
	now extra-taxer-warn is true;
	say "Extra question-mark information for cheat/teach mode on settler is [if taxer-not-extra is true]already[else]now[end if] off. Change it back with [b]EXTRA[r].";
	now taxer-not-extra is true;
	the rule succeeds.

extra-taxer-warn is a truth state that varies.

taxer-not-extra is a truth state that varies.

chapter opt in/no tip

section notiping

notiping is an action out of world.

understand the command "no tip" as something new.

understand "no tip" as notiping.

this is the no-instant-tips rule:
	if mrlp is Ordeal Reload and cur-score of Ordeal Reload < 2, say "You shouldn't know about this command, yet. I mean, it was in [shuf], but it's a bit different, this game." instead;

carry out notiping:
	abide by the no-instant-tips rule;
	say "You [if no-tip is true]already have[else]switch to[end if] [b]NO TIP[r] at a region's start. [b]OPT IN[r] will reverse this.";
	now no-tip is true;
	the rule succeeds;

section optining

optining is an action out of world.

understand the command "opt in" as something new.

understand "opt in" as optining.

carry out optining:
	abide by the no-instant-tips rule;
	say "You [if no-tip is false]already have[else]switch to[end if] [b]OPT IN[r] at a region's start. [b]NO TIP[r] reverse this.";
	now no-tip is false;
	the rule succeeds;

chapter retry/terry

retrying is an action applying to nothing.

understand the command "retry/terry" as something new.

understand "retry" and "terry" as retrying.

retried is a truth state that varies. retried is usually false.

carry out retrying:
	if location of player is Strip of Profits:
		d "retry failed since we're in Strip of Profits."; [ for testing purposes ]
		if retried is true, say "This is the place you go after retrying--as you probably know. So nothing happens." instead;
		say "Nothing happens. Perhaps this is where you'd be sent back to [if Same Mesa is visited or Loather Rathole is visited or Grey Gyre is visited or Posh Hops Shop is visited or Loftier Trefoil is visited]after going somewhere like you've been[else]once you're able to look around[end if]." instead;
	if mrlp is demo dome, say "There's nothing to keep track of, here. Just explore around." instead;
	if mrlp is others, say "This is the only region left to take care of." instead;
	if Strip of Profits is unvisited, say "You haven't been to the Strip of Profits yet, whatever that is, and you suspect you can't just jump ahead. Besides, you don't want to risk retrying the Means Manse." instead;
	if player is in Cruelest Lectures:
		say "There's no way out! Well, there sort of is, but it's a bit longer than just going [b]OUT[r]." instead;
	if mrlp is otters:
		say "You shouldn't need to go anywhere else[if number of bypassed regions > 0]. While you destroyed some regions with the patcher, you can't revisit them without restarting[end if]. Are you sure?";
		if the player yes-consents:
			say "Okay, back to the Strip of Profits.";
		else:
			say "Okay, back to the endgame." instead;
	repeat with MI running through held things:
		if MI is not warpable:
			d "temp-mooting [MI].";
			moot MI;
			add MI to item-list of mrlp;
			now lreg of MI is mrlp;
	now retried is true;
	if mrlp is towers and can-see-map, wipe-towers-map;
	now player is in Strip of Profits;
	if nestor is in Strip of Profits or tokers are in Strip of Profits, say "Fortunately, [if tokers are not in strip]Nestor didn't see[else]none of the tokers saw[end if] you zap back, or you'd probably be forced to explain things, which would take a while.";
	the rule succeeds;

a thing can be warpable. a thing is usually not warpable.

to say get-arug: now player has arugula;

to say get-crust:
	now swears is number of solved regions + charges of toaster;
	now player has crust;

book fliptoing

fliptoing is an action applying to one visible thing.

preserve-animals is a number that varies.

note-progress is a truth state that varies.

after fliptoing a portal:
	if engravings are examined, now note-progress is true;
	continue the action;

definition: a thing (called mything) is cromulent:
	if mything is touchable, decide yes;
	if mything is palm and player is in Dusty Study, decide yes;
	if mything is curst palace and mrlp is towers, decide yes;
	decide no;

to check-get-pad:
	if player does not have pedanto notepad:
		say "[line break]In fact, you realize the notepad on the chair would be a great place to file that idea. It'll help tame lots that's meta, mate.";
		now player has pedanto notepad;
		check-sad-ads;

to two-up:
	increment the score;
	increment cur-score of mrlp;
	reg-inc;

section check and carry out rules

to print-done-reject (frm - a thing):
	repeat through done reject table of mrlp:
		if frm is specdone entry:
			say "[spectalk entry][line break]";
			continue the action;
	say "Hey! No double dipping.";

check fliptoing when mrlp is otters and power-back is false (this is the don't flip animals until they're flippable rule) : if player is in Lamer Realm or player is in Perverse Preserve, say "You can't summon the energy to do that. It seems it should work, but it doesn't. You may need a recharge." instead;

this is the mesa-pass rule:
	if gast is touchable, continue the action;
	if noun is lairage regalia and adobe abode is visited, try entering Uhh Tut Hut instead;
	if noun is adsorbing signboard and Idle Deli is visited, try entering resto store instead;
	if noun is scripture picturers and Cleric Circle is visited, try entering snatchier chantries instead;

definition: a thing (called th) is gast-affected:
	if noun is lairage regalia or noun is adsorbing signboard or noun is scripture picturers, yes;
	no;

check fliptoing (this is the see about flipping touchable things rule):
	d "Trying to flip [noun].";
	if noun is touchable:
		if noun is a portal, try entering noun instead;
		if noun is reflexive or noun is vanishing, continue the action;
		if noun is gast-affected:
			if gast is touchable, continue the action; [this is an odd case where we want gast's presence to stop you getting away, but we also want to add your try to PAD FLIPS if it isn't there]
			if noun is reflexed, continue the action;
		repeat through done reject table of mrlp:
			if noun is specdone entry:
				say "[spectalk entry][line break]";
				the rule succeeds;
		if noun is reflexed, say "You did what you needed to [if noun is privately-named]there[else]with [the noun][end if]. A repeat won't do anything." instead;
		if debug-state is true, say "DEBUG WARNING: if you hoped to flip [the noun] for a point and failed, maybe [noun] and not whatever you flip it from needs to be reflexive or vanishing.";
		say "(examining--[one of]if you are trying to re-flip anything, this redirect is a sign you don't need to[or][stopping])[line break]";
		try examining noun instead;

check fliptoing when player is in Dusty Study and Report Porter Perrot is off-stage (this is the don't flip til you should at start rule) :
	repeat through table of Ordeal Reload anagrams:
		if noun is the-to entry and the-from entry is cromulent:
			if player is in Dusty Study and Report Porter Perrot is off-stage:
				if stuff-found < 3:
					if the-from entry is not part of the diorama:
						now tried-flip is true;
						say "[if the-from entry is palm]You don't need a light source, yet[else if the-from entry is giant pin]There's no need to tidy your study up just now[else if the-from entry is latches]Hmm, maybe there is something in there if you needed to go adventuring, but you don't, yet[else]Hm, well, that'd be a way to move around if you needed to sneak out. But you don't, yet[end if][one of]. Still, that seems right, so you file that idea away for later[or][stopping].";
						preef the-from entry;
						process the Report Porter Perrot knocks rule;
						do nothing instead;
				else:
					say "Worth trying later, but no need to pre-flip, flipper. See about that visitor, first.";
					preef the-from entry;
					do nothing instead;

definition: a thing (called th) is pronoun-settable:
	if th is a guardian, no;
	if th is vanishing, no;
	yes;

suppress-score is a truth state that varies. [this is used in beta testing]

check fliptoing (this is the check off preconditions before flipping rule):
	repeat through regana of mrlp:
		if noun is the-to entry and the-from entry is cromulent:
			if the-from entry is reflexed and noun is not gast-affected, say "[reject]" instead;
			if there is a pre-rule entry and flip-spill-flag is false:
				if the hash of the player's command is hashkey entry or hash of word number 1 in the player's command is hashkey entry:
					abide by the pre-rule entry;

carry out fliptoing (this is the main fliptoing rule):
	repeat through regana of mrlp:
		if noun is the-to entry and the-from entry is cromulent:
			if ff is true:
				append "[the player's command]: [the-to entry] to [the-from entry] denied![line break]" to the file of debuggery;
				say "[the-to entry] to [the-from entry] denied! Push ff to change this![line break]" instead;
			d "OK, [the-from entry] to [the-to entry].";
			if the-from entry is reflexive, now the-from entry is reflexed;
			now the-from entry is unfigured;
			if the-from entry is pronoun-settable and the-from entry is not the-to entry:
				if the-to entry is singular-named, set pronoun it to the-to entry;
				if the-to entry is plural-named, set pronoun them to the-to entry;
				if the-to entry provides the property male and the-to entry is male, set the pronoun him to the-to entry;
				if the-to entry provides the property female and the-to entry is female, set the pronoun her to the-to entry;
			now last-hash is 0;
			if flip-spill-flag is true and there is a pill-msg entry:
				say "[pill-msg entry][line break]";
			else if suppress-score is false:
				if debug-state is true and flip-spill-flag is true, say "(DEBUG) NO PILL USE MESSAGE FOR [the-from entry] -> [the-to entry].";
				say "[the-msg entry][line break]";
			if mrlp is stores, store-min-adjust the-from entry;
			let to-bardo be whether or not the-to entry is in Adorb Bardo;
			if the-to entry is not moot: [more than one point here]
				if the-to entry is not in Adorb Bardo:
					reg-inc;
				else if the-from entry is score-once:
					now the-from entry is not score-once;
					reg-inc;
			if the-from entry is a backdrop:
				remove the-from entry from play;
			else if the-from entry is vanishing and the-from entry is the-to entry:	[this should work unless you flip an item twice and it vanishes 2nd time. Check.]
				moot the-from entry;
			if taked entry is true or player has the-from entry:
				if the-from entry is not ruby and the-from entry is not medals, now player has the-to entry; [else medals go from worn to carried]
			if there is a post-rule entry:
				d "Processing [post-rule entry].";
				process the post-rule entry;
			if there is a roomjump entry:
				if roomjump entry is Strip of Profits and player is not in Cruelest Lectures:
					solve-region the map region of the location of the player;
				else:
					move player to roomjump entry;
				process the show blues rule; [for debugging]
				process the process random dialogue rule;
			if the-from entry is part of the diorama:
				now the-to entry is part of the diorama;
				now diorama-flip is true;
				process the Report Porter Perrot Knocks rule;
			else if the-to entry is not touchable:	[components aren't broken off]
				if the-to entry is not the-from entry and the-to entry is not a backdrop, move the-to entry to location of player;
			if the-to entry is not the-from entry and the-from entry is not reflexed:
				if to-bardo is true:
					move the-from entry to Adorb Bardo;
				else:
					moot the-from entry; [this is to drop a new item in place]
			if the-to entry is touchable:
				set the pronoun it to the-to entry; [assume that we are focused on the item we just flipped]
				if the-to entry is plural-named, set the pronoun them to the-to entry;
			if the-to entry is LLPish:
				d "General LLPish min-up for [noun].";
				min-up;
			process the show blues rule instead; [for debugging]
			the rule succeeds;
	repeat through regana of mrlp:
		if noun is the-from entry and location of noun is location of player, say "You can't seem to change things back to how they were." instead;
	say "This case with [the player's command] in [location of player] shouldn't have happened. BUG." instead;
	the rule succeeds;

to store-min-adjust (th - a thing):
	if th is Store T or th is blabber babbler: [you need to get rid of the blabber babbler to leave Cruelest Lectures, so no min-up]
		do nothing;
	else if th is store H:
		if roved is false, min-up;
	else if th is bedruggled:
		min-up;
	else if number of supporting stos < 4:
		min-up;

The look around once light available rule is not listed in the for printing the announcement of light rulebook. [only used in Dusty Study]

after fliptoing when player is in Rustic Citrus (this is the Curtis pleased rule):
	if cur-score of Others > 3 and moss cap is off-stage:
		say "You've done so well, Curtis explains there may be something north and gives you a moss cap to help you know which direction that is. After all, moss grows on the north side of trees...[paragraph break]You don't want to seem ungrateful, but you still point out that caps are to be worn on one's head, making it hard to look and gain any sense of direction.[paragraph break]Curtis responds that, well, you were smart enough to get started, you'll figure things out. And if you can sit there and make fruit out of nothing, you can probably take the logic from there.[paragraph break]Curtis turns away and starts humming and singing tidiest dietist ditties, dreaming up new ways of delegating and new business ideas.[paragraph break]This all makes your head spin a bit, which doesn't help your sense of direction. The moss cap needs changing. Curtis seems pretty demanding and probably wants a lot more fruit than you could find or create here. How to find somewhere new?";
		mootl list of all carried fruits;
		now player has moss cap;
		continue the action;
	if cur-score of others > 3:
		coin-eval;
	continue the action;

after fliptoing when mrlp is stores (this is the reunite gang rule) :
	if noun is nestor or noun is tokers:
		if nestor is in strip and tokers are in strip:
			say "The lackers and slacker pull a tarp apart and pull out a dime bag made big and spark a tinderbox-bred toxin for tokins['] stokin[']. 'A drug to drag out!' They offer an opiate oatpie, but you decline. They explain excitedly to you that this stuff is SO good, it's literally a like passage to a new world for certain people. You might even be able to enter the like smoke if you're way out enough.";
	continue the action;

after fliptoing (this is the fruit cue rule):
	unless noun is a fruit, continue the action;
	let another-break be false;
	let ncf be number of carried fruits;
	if ncf > 5 and remainder after dividing ncf by 4 is 2:
		say "You can carry all those fruits in your super purse without them getting mushed, but they are piling up. If you can't find a way to make any more fruits, maybe you should unload what you have on Curtis[if player has droll dollar], even if he might not give you any more goodies[end if].";
		now another-break is true;
	if player has moss cap, d "moss cap/[b]COMPASS[r] to leave.";
	if player is in rustic citrus and ruts circuits are in rustic citrus, d "remember, to examine the ruts to bring up more stuff.";
	repeat with myf running through fruits:
		if location of player is frroom of myf:
			unless player has myf or myf is moot:
				d "[myf] still to do.";
				continue the action;
	if another-break is true, say "[line break]";
	say "You look around and don't see any way to [if player is in Clangier Clearing]bargain for[else]pick off[end if] more fruits here. [if number of fruit-to-find fruits > 0]Maybe there's more to do elsewhere[else]In fact, you are pretty sure you've found all the fruits[end if].";
	continue the action;

the fruit cue rule is listed after the check minimum fruits and score rule in the after rules.

volume Ordeal Reload

book Dusty Study

Dusty Study is an innie room in Ordeal Reload. "[one of]Your study here in the corner of your Means Manse is not very sophisticated, but it's you. That doesn't mean you're not very sophisticated. But you were sophisticated enough to know that.[paragraph break][or][stopping]It's a bit messy here, with a diorama hanging down. There's a bookshelf way too large to move[tables-beams]. A rich chair [if pedanto notepad is in dusty study]holds your pedanto-notepad[else]is here, too, holding some sad ads[end if][if Report Porter Perrot is moot]. After your sleep, you remember you built some secret passages[end if][if Report Porter Perrot is moot]. You'll want to take them[else]. An isolani liaison leads to (or, more accurately, blocks you from) the outside world[think-cue][end if].[if bean-smell is true][paragraph break]You smell something, and you hear something, too. Probably from outside, but you don't want to go out there.[end if]". roomnud of dusty study is table of dusty study nudges.

the player is in Dusty Study.

outside-text of Dusty Study is "You haven't made a way outside the Dusty Study. But one does exist. More than one. You just hid them a bit, so only your powers can activate them."

to say tables-beams: if tables are in Dusty Study or meet bans are in Dusty Study, say ", [if tables are in Dusty Study]tables (the spreadsheety kind) on one wall[else]a way [b]OUT[r] where the tables were[end if], and [if meet bans are in Dusty Study]beams on another wall[else]a way down where those beams were[end if]".

after printing the locale description for Dusty Study when Dusty Study is unvisited:
	ital-say "you may wish to type [b]ABOUT[i] or [b]VERBS[i] to see information about the game and what words work best.";
	if debug-state is true, ital-say "The [b]POST[i] command sends you to Rustic Citrus. That, or [b]ROVE OVER[i].";
	continue the action;

to say think-cue:
	say "[if thinko is false and Report Porter Perrot is off-stage]. It's a good place to just [b]THINK[r][end if]"

to decide which number is dusty-study-outs:
	let q be 0;
	if tables are moot, increment q;
	if meet bans are moot, increment q;
	if niche is moot, increment q;
	decide on q.

after printing the locale description when player is in Dusty Study and Report Porter Perrot is moot:
	if tables are moot or meet bans are moot or niche is moot:
		say "You take stock of your way[unless dusty-study-outs is 1]s[end if] out: ";
		if tables are moot, say "You could probably go [b]IN[r], to the stable, with the tables gone. ";
		if meet bans are moot, say "You [if tables are moot]also [end if]cleared a path [b]down[r]. ";
		if niche is moot, say "There's [if dusty-study-outs > 1]also [end if]a chimney leading [b]up[r]. ";
		say "[line break]";
	continue the action;

rule for printing the name of a dark room: say "No light-glint, oh!"

chapter a rich chair

a rich chair is boring scenery in Dusty Study. description of a rich chair is "You thought you preferred a recliner but this is real. Nicer. It guards against cushionless slouchiness. Its backrest is shaped like brackets, and it's from Art Beck's. Small things can get stuck in it, or even lost[if pedanto notepad is on chair]. Like your pedanto-notepad, just sitting on it[end if][if latches are off-stage]. In fact, it seems a bit lumpy now. Maybe you should search it[end if].". bore-text is "[if Report Porter Perrot is moot]The chair can't hide an exit out of here[else]It's nice, but you can't do much with it, and you're too antsy to sit in it[end if].". bore-check is the bore-chair rule.

this is the bore-chair rule:
	if current action is searching:
		if latches are off-stage:
			now player has latches;
			say "Ah, so that's what that lump is. Some latches, from [gtmn], who helped you when you first arrived. But what're they good for?" instead;
		say "You find nothing further in the chair." instead;
	if current action is entering:
		if latches are off-stage, try searching rich chair instead;
		say "You're too restless right now." instead;
	if current action is pushing or current action is pulling or current action is climbing:
		if niche is in Dusty Study, say "You don't need to climb the chair--at least, not until you find a way up through the ceiling." instead;
		say "You climb on the chair to go up.";
		try going up instead;

does the player mean entering the rich chair when Report Porter Perrot is off-stage: it is very likely.

carry out examining rich chair: ignore the examine supporters rule.

chapter sad ads

the sad ads are plural-named boring scenery. description of sad ads is "[one of]The ads aren't sad because they're drab but rather because so many people fall for them. And they're not even magically possessed. This is the price of prosperity, and yet... One[or]Another[stopping] ad [hawk-blare].". bore-text is "There's not much to do with the ads other than reading them.". bore-check is bore-sad-ads rule.

this is the bore-sad-ads rule:
	if current action is scaning, say "Few of the sad ads have deeper meaning. There are so many." instead;
	if current action is taking, say "They aren't actual coupons, only ads, so they're not worth taking. You can examine them if you like." instead;

this-ad is a number that varies. this-ad is usually 0.

to say hawk-blare:
	increment this-ad;
	let mxad be maxidx corresponding to a mytab of table of ad slogans in table of megachatter;
	if this-ad > mxad:
		say "exhorts HANKER! HARKEN! You must be at the end."; [bold-ok]
		now this-ad is 1;
		continue the action;
	choose row this-ad in table of ad slogans;
	say "[if blare entry is true]blares[else]hawks[end if] [blurb entry][if showtabname is true](table of ad slogans)[end if]"

understand "ad" as sad ads.

check examining sad ads for the first time:
	say "It's impossible to look away...advertising certainly has gotten more prominent since Elvira arrived. She's been so good at saying you need to advertise, and yet--she does not need to. Apparently she is quite a consultant for opposing ad firms.";

chapter pedanto notepad

to check-sad-ads:
	if sad ads are not in Dusty Study:
		now sad ads are in Dusty Study;
		say "[line break]Taking the pedanto-notepad uncovered some sad ads on the chair.";

report taking pedanto notepad:
	say "Good choice taking the notepad. It'll help you tame lots that's meta, mate.";
	check-sad-ads;

estim is a number that varies.

to say book-est:
	if estim is 0:
		now estim is number of rows in table of random books;
		increase estim by a random number between 0 and 99;
		now estim is estim / 100;
	let base be estim / 10;
	let rema be the remainder after dividing estim by 10;
	if base > 0:
		say "[base in words] thousand";
		if rema > 0:
			say " [rema in words] hundred";
		continue the action;
	say "[estim in words] hundred or so";

the bookshelf is amusing boring scenery in Dusty Study. description of bookshelf is "[one of]It's sturdy enough to withstand any magic transformations. It's far too heavy to move to make a secret passage, what with [book-est] sloven novels (writing and appearance) people keep sending you, from trailery to literary discouraging infectious fiction use--the titles blur so fast through your mind, the oeuvres overuse--well, YOU know. Story tyros TRY so.[paragraph break]On glancing at some of the more ridiculous pen names, you also remember how FameHints NameShift and Smokiner Monikers were both allegedly a subsidiary of Elvira's MoneyCo. Nothing proven, and the journalist...well, they haven't written anything lately.[paragraph break]One book you won't remember next move is [or]Another book you won't read. [stopping][i][randbla][r].". bore-check of bookshelf is bore-bookshelf rule. bore-text of bookshelf is "There's no secret passage behind it. And if there were, you couldn't move it. It's got about [book-est] books, after all.". [bold-ok]

this is the bore-bookshelf rule:
	if current action is taking, say "[if Report Porter Perrot is moot]None of the books could really help you[else]You would have trouble choosing just one. You wonder if any are any good[end if]." instead;

understand "shelf" and "books" as bookshelf.

check exiting in Dusty Study: try going outside instead;

geez-already is a number that varies.

every turn when Dusty Study was not lit and lamp is off-stage (this is the clue lamp rule):
	if palm is prefigured:
		increment geez-already;
		if geez-already is 5:
			say "You're sick of this stumbling around, so you just flip the palm to a lamp, already.";
			try fliptoing lamp instead;
		say "Hm. You didn't need to change that palm to a lamp before, but it might be a good time, now." instead;
	say "[one of]Usually, in situations like this, you go in for a four-letter word. But an obscene one wouldn't help much here.[or]No use to blub [']til you produce a lit bulb. Or, better, something that contains one.[or]You need to get light. What's a good plam (sic)?[or]You have ampl (sic) power to change the lamp into something else, you know.[or]You remember changing a toga into a goat before you ever entered Yorpwald. Perhaps the same sort of thing would work here.[or]You remember how a school cafeteria cashier named Pam L. used to light up everyone's day. Well, halfway.[or]There are only 20 possibilities for what the lamp can change into, minus the clues I've already given.[or]Getting lampshady about your special power has made me feel shady.[or]Oh, for a Light Activating Movable Paraphernalia![stopping]"

Rule for printing the description of a dark room (this is the Dusty Study rule):
	if location of player is Dusty Study, say "[one of]Rats, kid, it's dark[or]Aww, dark. Awkward[in random order]. You probably can't go stumbling around--you'd poke your eye on that palm, or something. Wouldn't be bright." instead;

the giant pin is an LLPish boring thing in Dusty Study. "A giant pin (bowling) hangs on the wall here.". description of giant pin is "Man, it's a giant pin. Cardboard, too. It's never managed to bowl or blow over any guests despite being surprisingly artsy. You could [b]READ[r] some red writing on it.". bore-text is "The pin's just there. You get the sense you could change it, with your powers and all, but you don't have to.". bore-check is bore-pin rule.

this is the bore-pin rule:
	if current action is pushing or pulling, say "It won't budge. It's tall but too thin to hide a way out, too." instead; [??check if this works in general]
	if current action is taking, say "That'd be dreadfully impractical. It's too [i]giant[r] a t'ing." instead;

a-text of giant pin is "RYYRRYRR". b-text of giant pin is "RYYPPYRR". parse-text of giant pin is "x[sp]A[sp]I[sp]N[sp]T[sp]I[sp]x[sp]x".

the abstract painting is a cluey LLPish boring thing. "That painting you changed from a giant pin hangs here.". description of the abstract painting is
 "The painting gives no pure-art rapture, though you muse 'Quite an antique. I put it up.' and notice a place where horses are kept, a roof with smoke rising, and a downstairs living place. It's not exactly worth looking at in detail, but it's just good to know it's there.[paragraph break]Its title is, (semi-)inexplicably, Inapt Gin at Pig Inn.". bore-text is "The painting's really just there to be observed and examined. Like most art.". bore-check is bore-painting rule.

this is the bore-painting rule:
	if current action is taking or searching or attacking, say "It's a false law there has to be a wall safe behind it. Besides, [if Report Porter Perrot is off-stage]the person knocking might see what you're doing[else]you got enough goodies so far[end if]. You remember it was sort of based on parts of your Means Manse." instead;

propaganda is a kind of thing. propaganda is usually amusing. propaganda is always boring. bore-text of propaganda is usually "The propaganda's not good for much other than reading. It's not really good for reading, either.". bore-check of propaganda is usually the bore-propaganda rule.

this is the bore-propaganda rule:
	if current action is taking, say "You don't need to take that blunt-lie bulletin, or any part of it. You don't need to take the insults therein, either, unless you really want to." instead;
	if current action is scaning, say "Err, yeah, scanning is MUCH better than close reading in this case.[paragraph break]Oh, wait, you meant with the settler? Nothing shows up." instead;

the dope op ed is propaganda. "That 'dope' op-ed Report Porter Perrot threw at you landed here. It's a lot longer than your usual op-ed, probably terribly overwritten, but possible to enjoy if you like that sort of thing.". description is "The dope op-ed is broken into several pages. It's by Elvira, and it's apparently tackling you on your own ground. The pages are labeled nitro-intro, questin['] inquest, MoneyCo and Economy, Shatter-Threats, [art-trash], and By Li'l Billy.". printed name is "the dope op-ed"

the Nitro Intro page is propaganda. it is part of the dope op ed. the printed name of nitro intro is "Nitro-Intro page". understand "nitro-intro" and "nitro-intro page" as nitro intro page.

description of nitro intro page is "Elvira lays out that she is clearly aliver in her introduction, where she will beat you at your own game.[paragraph break]She notes how Penal Panel--panel IX--explain the Porter Report--the questin['] inquest on your life file. The media aimed you with RELATED! ALERTED! REQUIRES QUERIERS. Governor Ron Grove found taint--a tint. Ties to the Postage Gestapo. Recommended a deport-o-torpedo. Senator Ron East said can't snore at treason.[paragraph break]No hot-plate hate plot on! Elvira is dedicated to making Yorpwald safe, not just from outside forces, but from the influx of silly old anagrams and the LIKELY PERSON BEHIND THEM--a certain reruns nurser! Someone who resorted to boring old anagrams a computer could crank out.[paragraph break]She also notes she will refrain from calling you the obvious name she COULD in an op-ed, because she has class. But really, oppo = poop." [bold-ok]

the Questin Inquest page is propaganda. it is part of the dope op ed. printed name of Questin Inquest is "Questin['] Inquest".

description of Questin Inquest is "[one of]It's headed Good deeds? Sodded ego! Elvira lays out how you saved Yorpwald and all. But everyday stuff? You couldn't repair a flat tyre with flattery, make custard out of car dust or spumoni from an ion sump. Or even a cellphone from cellophane.[paragraph break]You pause. That's so contrived. What kind of faker-freak would think that up?[or]The Questin['] Inquest page is no less annoying the second time around.[cycling]"

understand "questin" and "questin inquest" as inquest.

a thing called the MoneyCo and Economy page is propaganda. it is part of the dope op ed.

description of MoneyCo is "Elvira notes Yorpwald's more profitable than ever! What's good for MoneyCo is good for Yorpwald! The motto 'Come Yon, Con Em, Yo!' is a coy omen. If there were fraud, it'd have been found out. But one day MoneyCo will deserve to be MyOneCo! I mean, think about it. Elvira is cool. Money is cool. Elvira deserves money! And of course the Trips Strip deserved to become the Strip of Profits! It rousts tourists! Gets us guests!"

The Shatter Threats page is propaganda. it is part of the dope op ed. printed name of Shatter Threats page is "Shatter-Threats page".

description of Shatter Threats is "[one of]Elvira notes all political parties have agreed on a do-pry law for Yorpwald. The Swanker Wankers and Ruthless Hustlers and even the fringe Smugger Muggers, Sombrest Mobsters and Ballsier Liberals. Sporto-troops, rowdies, weirdos gave statements, testaments. It's to fight Evil-Ra, who is everywhere, even if we can't see him, and worse than Ol['] King Jim. We need the Tautest Statute yet. A polished shield-op. Dragnet Granted for Unclear Evils Surveillance. To smash shams and give dissenter residents tiredness so the homeland doesn't become a [d-word] hole, a stage-one stone age. Everyone's a suspect, including--or especially you. Elvira points out there are actually only so many nouns left to change, making you a bit useless. But there is a chance you could mess things back up if you were jealous of her popularity.[paragraph break]Besides, it's not like it's the RESTRICT-STRICTER law![paragraph break]There's a bit more.[or]She notes yours was an insecure sinecure. Nice? Sure. But four out of five leading intellectuals, stuffy or non, agree what she has remade should not be reamed. She also notes the law doesn't prevent you from flipping stuff in your own home--just don't get any ideas.[paragraph break]Plus GOOD IDEA has no meaningful anagrams. Worth thinking about![cycling]"

The I Trash His Art page is propaganda. The Her Arts Er Trash page is propaganda.

to say art-trash: say "[i][if player is male]I Trash His Art[else]Her Arts Er Trash[end if][r]"

description of I Trash His Art is "[artrash]". description of Er Trash is "[artrash]".

to say artrash:
	say "[one of]Elvira offers an apology for not seeing to the heart of the matter about all your anagramming. Oh, sure, she had clever opinions about whether obvious anagrams were better than non-obvious ones, and she changed around, and she's glad people found them interesting, but really, it's kind of nerdy now that your good deeds were DONE. All kinds of examples, ahead.[or]Elvira lists games that don't make kids or concerned parents happy. Mega Mage Game (e-mag: a gem!) as well as many others: [twiddle of table of lame computer games and 4].[paragraph break]She blames you for the games['] technical and aesthetic faults, mainly due to the anagram craze you never quite discouraged.[or]Elvira discourses on rap music. 'Rap music is, um, [crap]. Funky? F'n yuk! Pop stars, stop raps!' She lists D.J. JD as even worse than [twiddle of table of bad rappers and 4]. Geez! So many horrible 'musicians.' The 'hits,' too.[or]Elvira has harsh words for other genres, yet they keep cranking things out! [twiddle of table of lousy hit songs and 5]You...you find yourself agreeing with her, but you never commissioned any of that.[or]Elvira ravages the rigidness of music in general. All the latest...hits. Mourning oldies soiled by Chas Cash-Asch and his Sex Rime Remixes, and how SOMEONE with word power (guess who) makes the fliest stifle itself. Though she praises Ariel V's album [i]We Do No Wooden Ode Now[r], she rips the same ol['] lame-os: [twiddle of table of oldies singers and 3].[or]Elvira 'begs the question' of who is getting a lot of royalties! Someone probably in a nice cosy hidden manse! She finishes by berating the Klaw Walk and Bungie Beguin as dumb dances.[or]Elvira shows little respect for comedians like [twiddle of table of comedians and 1]--that pissant is pants--but also [twiddle of table of comedians and 3] even/especially if they make jokes about you. It is too easy. While those about her fall flat or generally have to paint her in a favorable light.[or]Elvira eviscerates dummies['] mediums that produce movies like [twiddle of table of lame movies and 3], but there's the small screen too...[or]They're just unbearable, TV shows like [twiddle of table of lame tv shows and 3]Even stuff rated g grated--that's the end of THIS article, thankfully[drt].[or]No. Really. You don't want to read that nonsense again. She always seems to know which way the wind is blowing, then she blames you for it.[stopping][run paragraph on]"

dope-read is a truth state that varies.

to say drt: now dope-read is true;

The By Lil Billy page is propaganda. it is part of the dope op ed. printed name of By Lil Billy is "By Li'l Billy".

description of Billy page is "Next to no text. Gross caricatures of you, by Li'l Billy, in the Tenure Tureen: NEUTER! Deserve Severed![paragraph break]There's further crayony scrawl. Re: tha heart-hater. MESSIAH [if player is male]AMISS, HE IS? SHAME[else]AIMS: SHE IS SHAME[end if]!!![paragraph break]Elvira somehow established it was cute when seven-year-olds did it but horrible when you did, all the same excoriating your terrible influence on children." [bold-ok]

dope-idx is a number that varies.

chapter rig one (ignore region)

rigoneing is an action applying to nothing.

understand the command "ignore region" as something new.

understand "ignore region" as rigoneing.

understand "rig one" and "rig one region" as rigoneing.

one-rigged is a truth state that varies.

carry out rigoneing:
	if one-rigged is true, say "You already did." instead;
	if mrlp is not Ordeal Reload or player is not in Dusty Study or Report Porter Perrot is not off-stage, say "You can only [b]IGNORE REGION[r] before Report Porter Perrot knocks." instead;
	if okay-thats-it > 0, say "No--wait, you were just having a flashback.[paragraph break]";
	say "Warping space and time, you move back to the Strip of Profits...";
	get-cool-stuff;
	now one-rigged is true;
	move player to Strip of Profits;
	now Ordeal Reload is bypassed;
	the rule succeeds;

chapter lead in denial (ignore everything up to last region)

denialnaileding is an action applying to nothing.

understand the command "leadin denial" and "lead in denial" as something new.

understand the command "leadin denial nailed" and "lead in denial nailed" as something new.

understand "leadin denial nailed" and "lead in denial nailed" as denialnaileding.
understand "leadin denial" and "lead in denial" as denialnaileding.
understand "leadin nailed" and "lead in nailed" as denialnaileding.

denial is a truth state that varies.

carry out denialnaileding:
	let patchies be 0;
	if mrlp is Ordeal Reload, say "You need to get to the Strip of Profits before you can use this. If you want, you can [if Report Porter Perrot is off-stage]restart and [end if][b]IGNORE REGION[r] then use [b]LEADIN DENIAL[r] or any of its anagrams." instead; [?? test IGNORE REGION and LEADIN DENIAL]
	if denial is true, say "You already used this warp." instead;
	if player is in Strip of Profits:
		if denial is true and store t is moot, say "You already did." instead;
		if denial is false:
			if store t is in Strip of Profits:
				increment patchies;
				say "BOOM! Store T shatters.";
				moot Store T;
				now solid idols is in Strip of Profits;
	repeat with ZT running through unsolved regions:
		if ZT is not otters and ZT is not solved, now ZT is bypassed;
	repeat with ZT running through patchable things:
		moot ZT;
		increment patchies;
	if patchies is 0:
		say "Nothing happened. Something should have, but it didn't.";
	else:
		say "[if store T was in Strip of Profits]Store T shatters. [end if]After a good deal of rumbling, the only portal left is the pair of otters created from Store T.";
	now denial is true;

chapter roveovering

roveovering is an action applying to nothing.

understand the command "rove over" as something new.

understand "rove over" as roveovering.

roved is a truth state that varies.

carry out roveovering:
	[d "[number of fruits] fruits: [list of fruits]. [list of backdrops] = backdrops.[line break]";]
	if roved is true, say "You already did." instead;
	if player is not in Dusty Study, say "You're not sure where to." instead;
	if Report Porter Perrot is not off-stage, say "It's not that easy. Maybe once you've returned [if player is in Dusty Study]back here [end if]to your Dusty Study, you can sneak out a more usual passage. But you need to fix things in Yorpwald, first. Or restart the game." instead;
	if okay-thats-it > 0, say "No--wait, you were just having a flashback.[paragraph break]";
	say "Oh man. That's right. Those adventures--the routes, the troves--and Curtis. Elmo told you to [b]ROVE OVER[r]. Better than Report Porter Perrot's [one of]cringy-crying[or]slimey-smiley[or]bubbly-blubby[in random order] plea peal, a big tear rate about Elvira...mumbling 'Sad I said a dis.' No, you won't be suckered [if stuff-found < 3]if [Perrot] comes knocking[else]by opening that door[end if]. You slip out a secret passage. 'Don't slow down lots,' you mutter to yourself, slightly wishing you had a last atlas. You eat a carbo-carob cobra for the long journey[unless player has purse and player has settler and player has pedanto notepad] and check you have your settler and notepad and super purse[end if].";
	now roved is true;
	now first-good-scan is true;
	now kind-of-cool is true;
	move player to Strip of Profits;
	repeat with ZT running through unsolved regions:
		now ZT is bypassed;
	now others is unsolved;
	repeat with ZT running through patchable things:
		moot ZT;
	moot Store K;
	moot Store N;
	moot magneto;
	get-cool-stuff;
	the rule succeeds;

to get-cool-stuff:
	now player has gird grid;
	now player has super purse;
	now player has letters settler;
	now player has pedanto notepad;
	now player has inducted deductin;
	now sad ads are in dusty study;
	now autosave-known is true; [?? pad-rec-q stuff]

chapter isolani liaison

the isolani liaison is scenery in Dusty Study. "Not much to examine. Just a small peephole device that lets you look and maybe listen to the outside world you're walled off from. From which you're walled off."

understand "door" as liaison when player is in dusty study.

answer-warn is a truth state that varies.

check answering:
	if answer-warn is false:
		now answer-warn is true;
		say "This game generally uses ASK X ABOUT Y instead, unless you are in a conversation with numbered choices[if sausage is touchable or agnostic is touchable]. However, the [b]X, Y[r] syntax can work here[end if]." instead;
	else:
		try asking noun to try taking inventory instead;

check opening isolani liaison:
	if stuff-found < 3, say "You don't feel like going out without a really good reason." instead;
	if Report Porter Perrot is off-stage:
		say "It's Report Porter Perrot, full of sensible bileness. 'Pallid li'l pad! Stodgy sty, dog! Elvira wants to see you. About your powers. Me and my pouter troupe agree. Me, best messenger in all of Yorpwald. Hey, if you've done nothing wrong--and it seems like you've done NOTHING since all that shuffling around--you have nothing to hide.'";
		now Report Porter Perrot is in Dusty Study;
		set the pronoun him to Report Porter Perrot;
		set the pronoun her to Elvira;
		[pad-del "rove over";] [?? not sure why this is here]
		try talking to Report Porter Perrot instead;
	say "A rallies sallier? With snipers pressin[']? Better not." instead;

chapter palm and lamp

The palm is a thing in Dusty Study. description is "It has spent a lot of time soaking up all that weight is stored in there, to help you one day if you need to break out in the middle of the night or something.". "A palm soaks up sunlight here. For later, maybe."

check taking the palm: say "It's kind of useless and bulky at the moment." instead;

a-text of palm is "RYRR". b-text of palm is "RGRR". parse-text of palm is "[bug-report]". palm is any-spoilable.

The lamp is a lit thing. description is "It's red-framed, with a slightly off-center (to the left) light that flickers from yellowish to greenish--which seems slightly more illuminating--and back[if settler is not touchable]. Odd colors. You haven't seen anything like them[else]. Hmm. Where've you just seen colors like that, now[end if]."

check switching on lamp:
	say "It already is. It will last as long as you need it." instead;

check switching off lamp:
	say "You may still need the lamp's light a bit." instead;

chapter latches

The latches are a plural-named vanishing thing. "Some latches--the sort you lock a door with--are jumbled together here."

check opening the latches:
	if treatise is off-stage:
		say "(fumbling and seeing a prepared red paper fall out, which you take)";
		now player has treatise;
	say "You can't figure how to open them. The latches are a Gordian knot, and you probably mix up where to start or end, but maybe the red paper has more information on what to do." instead;

to trea-check:
	if treatise is not touchable:
		say "As you [if current action is taking]take the latches[else]look closer[end if], you see a wad of prepared red paper contained in the latches and pull it out. It looks stained with tears[if player does not have latches and current action is examining]. You take the latches, too[end if].";
		now player has treatise;
		if player does not have latches:
			now player has latches;

check taking latches:
	if player has latches, say "You fiddle with them uselessly for a bit." instead;
	trea-check instead;

after examining latches:
	trea-check;

description of latches is "They're knotted hopelessly--you won't be able to un-knot or untangle them or whatever by natural means. [if teariest treatise is unexamined]They probably become something or other, or Nat Egam wouldn't have given them to you[else]The letter said they might be carrying something, but you don't see anything inside[end if]. Weird."

understand "prepared/ red/ paper" as teariest treatise.

to say dear-reader:
	if treatise is examined and latches are moot:
		say "(Stuff about getting the satchel that you don't need to reread.)";
		continue the action;
	say "Dear, er, Reader: Apologies for any sucky yucks. I couldn't have sent tens of snug gnus, sought toughs, or any gubbins subbing for you. These latches, shut thus, contain a recoded decoder. Help make your tour a rout. Not that it emits smite. Have a peek, then keep, to help lift the doom mood in Yorpwald. But you'll need to be refined, definer. Just changing things to other things, relived, won't deliver. It's powerful, too. My magician-lawyer Rawley Lawrey warned me creating it would drain my life force. But I feel great![paragraph break]  --Gateman Nat Egam[line break]";

the teariest treatise is a thing. description is "[dear-reader][line break]Even without cheat mode, it's pretty handy, because it shows the letters [i]should[r] be either...[one of][paragraph break]The treatise iterates some sort of pattern but ends abruptly. You stare. Tears. Eyes watery yet raw. Arg. Life. Fragile.[or][paragraph break](Yes, the old timer is a time lord now.)[stopping]"

understand "letter" as treatise.

a-text of latches is "RYRRRYR". b-text of latches is "RGPPPGR". parse-text of latches is "[bug-report]".

chapter MEET BANS

The MEET BANS are plural-named vanishing boring scenery in Dusty Study. description of the meet bans is "The [MEET BANS] look very secure, but you could unlock them with the right, uh, combination.". bore-text is "The MEET-BANS are too solid to move physically and have no obvious flaws. That is no surprise, really.". printed name of MEET BANS is "MEET-BANS".

a-text of meet bans is "RYRYRYRR". b-text of meet bans is "RYRYRYPR". parse-text of meet bans is "x[sp]A[sp]x[sp]E[sp]x[sp]E[sp]N[sp]x".

chapter ten beams

the beams are auxiliary boring scenery in Dusty Study. "You count the beams. One, two, ..., ten. Exactly ten beams lined up together, unpainted and uncovered. [b]Ten beams[r]. What could they and the MEET-BANS be hiding?". bore-text is "The ten beams are too sturdy to mannipulate meaningfully.". understand "ten" and "ten beams" as beams when mrlp is Ordeal Reload. printed name of beams is "ten beams"

a-text of beams is "RYRYRYRR". b-text of beams is "RYRYRYRR". parse-text of beams is "x[sp]A[sp]x[sp]E[sp]x[sp]E[sp]x[sp]x".

chapter tables

The tables are plural-named vanishing scenery in Dusty Study. understand "table" as tables.

check taking tables: say "The tables are written on the wall." instead;

table-warn is a truth state that varies.

before doing something with tables when table-warn is false:
	if the player's command includes "table":
		now table-warn is true;
		ital-say "it's important that the tables are plural, as you [if cur-score of Ordeal Reload is 0]may find[else]already found[end if].";
	else:
		continue the action;

a-text of tables is "RRYRRY". b-text of tables is "RRYRRY". parse-text of tables is "x[sp]x[sp]-[sp]x[sp]x[sp]-".

description of tables is "[one of]They are tables of the ablest bleats--they look like outright vandalism, all in red, but you know you wrote them there a while ago, and you're sure there's a reason. Maybe if you look at them more, it'll be evident[or]They were verified by LabSet technologies with their BeLast algorithm--writing in red--with a bit more below[or]Instructions to eBlast the tables is written below in red[or]The data in the tables seems quite possibly shifted over a row[or]The more you look, the clearer it is the data is very un- ... oh, that would just open the barn door, to say it outright[cycling].";

to decide whether you-can-stableize:
	if tables are in Dusty Study, decide yes;
	decide no.

check going in Dusty Study:
	let need-line-break be false;
	if room noun of study is not nowhere:
		if latches are in Dusty Study:
			say "You take the latches--they must be useful for something[if player does not have treatise]. There's also a tear-stained paper bound up in them. You pull it out[end if].";
			now player has latches;
			now need-line-break is true;
		if pedanto notepad is in Dusty Study:
			if need-line-break is true, say "[line break]";
			say "You[if need-line-break is true] also[end if] swipe your pedanto-notepad, since it was so helpful your first time shuffling around in the Forest and Sortie and Metros your first time through Yorpwald. It uncovers some sad ads, the sort which have sadly pervaded Yorpwald recently.";
			now player has pedanto notepad;
			now sad ads are in Dusty Study;

chapter Report Porter Perrot

Report Porter Perrot is a terse male person. "Report Porter Perrot is here, but you shouldn't be seeing this text, so that's a bug. [bug-report]"

description of Report Porter Perrot is "[Report Porter Perrot] has one of those smirks that aren't even trying to look genuinely concerned. He's not even trying to try, or look like trying."

the litany of Report Porter Perrot is the table of Perrot comments.

okay-thats-it is a number that varies.

diorama-flip is a truth state that varies.

tried-flip is a truth state that varies.

to decide which number is stuff-found:
	let mytemp be 0;
	if Report Porter Perrot is moot, decide on 3;
	if thinko is true, increase mytemp by 2;
	if latches are not off-stage, increment mytemp;
	if sad ads are examined, increment mytemp;
	if player has pedanto notepad, increment mytemp;
	if notice is examined, increment mytemp;
	if bookshelf is examined, increment mytemp;
	if diorama-flip is true, increment mytemp;
	if tried-flip is true, increment mytemp;
	if pad-consult is true, increment mytemp;
	if mytemp >= 3:
		now mytemp is 3;
		decide on mytemp;
	decide on mytemp.

to decide whether report-porter-knocks:
	if location of player is Dusty Study and stuff-found >= 3 and Report Porter Perrot is off-stage, yes;
	no;

every turn when location of player is Dusty Study and Report Porter Perrot is off-stage:
	d "Stuff-found variable for [perrot] arriving is [stuff-found].";

every turn when report-porter-knocks (this is the Report Porter Perrot Knocks rule):
	increment okay-thats-it;
	if okay-thats-it is 6:
		say "You're sick of the knocking, so you just answer the door, already.";
		try opening isolani liaison instead;
	say "[one of]Whoah! Bangish bashing at the isolani liaison[it-liaison]![or]The bangish bashing continues.[stopping]";
	set the pronoun it to isolani liaison;
	now knockage is true;

does the player mean opening isolani liaison when knockage is true: it is very likely.

to say it-liaison: set the pronoun it to the isolani liaison;

section Report Porter Perrot dialogue

table of Perrot comments [tco-pe]
prompt	response	enabled
"Say, Mr., um... summary?"	summary-quip	1
"Elvira...necro-crone recon?"	necro-quip	0
"Shil-lish. Sit on it, son."	sit-quip	0
"Powers? Me? Spew more!"	powers-quip	0
"Why so showy? Calm down, mad clown!"	clown-quip	0
"Ask [porter] how business is"	gustave-quip	0
"Pouter troupe?"	pouter-quip	0
"Lighten the mood with a joke"	pun-quip	0
"Er, ahem, hear me"	ahem-quip	0
"One Beg: begone! Scat, phony sycophant!"	leave-quip	0

table of quip texts (continued) [tqt-gu]
quip	quiptext
summary-quip	"'Must I sum it? It's, um...' / 'Condense it.' / 'So indecent.'[paragraph break]Report Porter Perrot glosses over your successes in the forest (store F,) the sortie (store I,) and the metros (store M) and how anyone with a little dorky thinkery could've done it, but whatever. Not really a compelling personal story, you have to admit! Then he gets to Elvira. How before she arrived, Yorpwald was a bit boring, but now it has more reality shows, advertisers and loud opinions than ever.[paragraph break]And how--well, she pointed out it was nice of you to save Yorpwald the first time, but a bunch of pedants looked through dictionaries to ensure there wasn't many things you could anagram for the better. And how your choosing not to be A Personality was suspicious for sure. And how SHATTER-THREATS would check the anagrammability of stuff so Red Bull Burdell wouldn't happen again. Plus you never helped create cool new slang. But you, of all people, are most likely to form a polit-i-plot. He ends with a yawny anyway, mentioning how liking Elvira is what makes us different from animals, and you should totally write that in your pedanto-notepad.[paragraph break]You already sort of knew this, but Elvira seems to want you out of the way, seriously. As to Report Porter Perrot, you'll probably annoy him equally by turning him out (if you want to get on with things) or failing to agree with all he has to say." [start PORTER text]
powers-quip	"'Humble-brag, bumbler? Agh! Snake oil. So like an aloneski! You could ply a word! Change Yorpwald from untied to united! Change clover to Velcro! Noughts to a shotgun! Words, no sword! Aarg. Man. With whatsits.'"
necro-quip	"'No rec!' [porter] goes from dynamic to [d-word] icy, flashing an off-grace frog face. A pouty payout![paragraph break]'You irk, heel. You [b]LIKE[r] her? I can't can it! What she did...shaded with...'[paragraph break]'No, glib goblin! The slob lobs BS, lo! Poisonin['] Opinions! That BS idea abides, biased!' [porter] glosses over [urbfogel], and how he beat up monsters that came back anyway [']til he could beat her up? Talked to people who knew where hidden items like the horn-o-honor and gavel of Fogvale were. It was rigged! Now, with her dynamite, tidy name, oh, the soaring signora! Her vast harvest, her mystic chemistry, her tact-chatter. Her lean elan's made Yorpwald go real galore--be aliver--a praised paradise--with her ReaLiv initiative for the Sunnier Unrisen Inner Us! From arsey years to so sane season! Had us voting her overnight the roving virgo then! Became a rowdy pal! Yorpwald was old, warpy, but now it's more wordy, pal! A Yapworld and Payworld! Oh, her good deeds!"
clown-quip	"Scathing sigh. 'Can't.'[paragraph break]'Yet she's an a-lister realist. To suggest such a reform-former is a viler...it was censor-crones who tried to quiet HER, the defamed made def! You're probably upset she pointed out anyone with your powers would've figured what to do...eventually...unless they got bored. But she is a wonder. You're a downer.'"
sit-quip	"'Going personal? Sore plan! No gig!' She's not perfect but that helps us see... 'Mr. Quasi-Marquis...you have to admit, not even a reruns nurser thinks you could save Yorpwald turning stuff into stuff again. Pedants did research! So one do-rite editor rioted.'"
gustave-quip	"'Once you came along, it was clear Gustave was the vaguest. A denser sender. Very idle delivery. But, well MY initiative kept me Optimal Top Mail. So well I have time for my pouter troupe.'"	[option 4-1, fork of 4]
pouter-quip	"'Why, they came around about the time Elvira did! I didn't believe them at first! But then they became spouter troupes. No offense, you deserve your no-spine pension and all, but ... there's not much of a story behind what you did. Nothing award-winning. Why, it gives me headaches to think about some things you did and saw! No offense. Anyone with a calculator or whatever could've done it. They just...spoke the truth. And were more interesting about it! Now Elvira is more interesting. I mean, you're not funny, or anything.'"
pun-quip	"'Eh, punt the pun,' you think. The paunchy, achy pun--a painful pun-fail--hardly cleans up on the pun scale. You picture a generic cringee at [twiddle of table of laughhouses and -3]. 'Rad irony? Ordinary.'"
ahem-quip	"[porter] intones tension. Refusal earfuls. 'Cad, no can do. [d-word-u], uh, DUH, man.' Refusal earfuls."	[end option 4-4]
trips-quip	"'No shame,' he moans. 'Some? Nah.' ... he makes the money gesture with his hands but notes you won't get ID'd unless you visit during rush hour."
media-quip	"Somehow, the media aimed you for trying to do way too much and way too little. You chart the flattery, the backhanded compliments, the first rifts, the outright disrespect. '[his-her-c] charisma is archaism.' / 'Cagiest toil made [him-her] egotistical.' / '[he-she-c] will make this realm lamer to save it again.' How the only things you [i]did[r] were saving your skin against Red Bull Burdell--and [b]EXIST[r] at the end."
media-quip-2	"You recall Walt Koh's and Kath Low's howl-task host-walk, among other 'informational' shows...[twiddle of table of lame talk shows and 4]Folks co-spit topics, you're mashed, shamed. '[if player is male]He's [else]She... [end if]mad! Trashed, [if player is female]she'd...rat[else]he darts[end if]!' And the rubbish biopics, good ([biop of true]). or bad ([biop of false]). You did nothing to prepare Yorpwald against technically sophisticated attacks like the exciting ones Elvira warns about, the ones that helped her gain a role of Save/Rid Adviser. Many a tearful faulter did not want to blame you--but they had to."
social-quip	"You complain about social forces in general. More downers than wonders. How you're no longer a secure cursee."
girls-quip	"You listen about [twiddle of table of elmo emo and 3]. No friend finder or lovers solver found the woman for Elmo. He looks happier for having complained, though."
weather-quip	"That's always a safe one. You say 'How [']bout that weather, geez,' not realizing you haven't gotten out enough to know if it's been too hot, cold, rainy or dry. But fortunately, you haven't gotten out enough to remember those details don't matter.[paragraph break]Elmo seems ready to listen to deeper concerns, even if they probably aren't germane to what you need to do."
sports-quip	"Sports banter follows.[paragraph break][twiddle of table of sports chatter and 2]'Chokers.' / 'Shocker.'"
artsy-quip	"'Where do I look? Is there a bare min--uh, most efficient way through?'[paragraph break]'Spry prys say there's something that can just destroy a few stores. Not the sortie and forest and metros you solved. There's new ones out there. Solve a couple, and allies might drop off a little something to help you get through quicker. If you want or need it, of course.'"
leave-quip	"'Travel, varlet!'[paragraph break]Magnetic-me-acting, he blabs about the seriousness of it all, despite your 'Hastas, [bracket]redacted[close bracket].' Somehow, you are to blame for the awful state of TV, music, games, and the arts in general, but Elvira is always there to bemoan things and assure Yorpwald she can make it better. It sort of blends in for a while, until he yells at you for wasting his time.[paragraph break]As he leaves, he looks in your mailbox, all '[if player is male]N[else]Ow, n[end if]o fan mail? Fail on, [w-man]! Ego hurt? Er, tough!'[paragraph break][porter] pulls out something labeled 'Points to Spin,' then another labeled 'A Folder re: Adolf.'[paragraph break]'Godwin? Win, dog!'[paragraph break]'Snidest dissent! Gob it, bigot!' he yells as he pulls out a paper labeled 'Dope Op-Ed' and throws it at you. It's thick enough, you feel something when it hits. You lie down in your chair, annoyed and stunned. You realize you'll need an evac-cave...they'll be surrounding your manse.[paragraph break]'Told, dolt!' you hear after locking the door. His ugliest lies tug as you fall asleep[if latches are off-stage], which you notice is quite lumpy[end if]. You wake up hours later from a right mean nightmare where people yell 'Zero Day, Ya Dozer!' and '[if player is female]She will hew ills[else]Sir, Echo Heroics[end if]!' then 'Brave a verb! No sun, nouns!'" [end PORTER text]

to say urbfogel: say "Blue Frog Urbfogel, Bugler of Foulberg"

chapter diorama

before examining when Report Porter Perrot is off-stage and stuff-found is 3:
	if noun is diorama or noun is part of diorama, say "The diorama is too intricate to observe in any detail with the knocking at the door." instead;
	if noun is bookshelf, say "You couldn't read--not even just titles--with that knocking at the door." instead;

to say gtmn:
	say "[one of]Tan Mage Nat Egam[or]Nat Egam[stopping]"

the diorama is a backdrop. drop-region of diorama is Ordeal Reload. "[one of]Yes, you remember when Tan Mage Nat Egam gave it to you. You've half forgotten it's here, now, but he said one day, just in case, it'd be useful. For simpler prelims than your first time shuffling around.[paragraph break][or][stopping]It's a loose conglomeration of [if platform is part of diorama]a platform[else]a farm plot[end if], [if pavement is part of diorama]some pavement[else]an event map[end if], [if pedestal is part of diorama]a pedestal[else]a steel pad[end if], and [if crabgrass is part of diorama]some crabgrass[else]a brass crag[end if]. A notice down the center reveals what these items can become."

after scaning when player is in Dusty Study (this is the pad-diorama rule) :
	if noun is part of diorama:
		if "diorama" is padded, continue the action;
		say "You tinker with the rest of the diorama as well, flipping things back and forth.";
		pad-rec "diorama";
	continue the action;

does the player mean examining the steel pad: it is unlikely.

to say dior-scan:
	if screenread is true:
		say "This may be an info dump if you are visually impaired. Go ahead?";
		if the player regex-prompt-consents:
			do nothing;
		else:
			continue the action;
	say "R=red Y=yellow P=purple G=green.";
	say "[fixed letter spacing]";
	repeat with prt running through ramabits:
		now prt is ncscanned;
		now prt is cscanned;
	say "[scans of platform and farm plot]";
	say "[scans of pavement and event map]";
	say "[scans of pedestal and steel pad]";
	say "[scans of crabgrass and brass crag]";
	say "[r]";

to say scans of (a1 - a thing) and (a2 - a thing): [?!?! not work with visual impair]
	let sp be "        ";
	if a1 is not escanned and a2 is not escanned, continue the action;
	say "[line break]";
	if a1 is crabgrass:
		now sp is "         ";
	if screenread is true:
		if a1 is ncscanned:
			say "[a1] to [a2] is [a-text of a1].";
		if a2 is ncscanned:
			say "[a2] to [a1] is [a-text of a2].";
		if a1 is cscanned:
			say "[a1] to [a2] is [b-text of a1].";
		if a2 is cscanned:
			say "[a2] to [a1] is [b-text of a2].";
	if a1 is ncscanned or a2 is ncscanned:
		say "[sp][if a1 is ncscanned][a-text of a1][else][sp][end if][sp] [if a2 is ncscanned][a-text of a2][else][sp][end if][line break]";
	say "[a1][dashy of a1][a2][if a2 is escanned][dashy of a1][a1][end if][line break]";
	if a1 is cscanned or a2 is cscanned:
		say "[sp][if a1 is cscanned][b-text of a1][else][sp][end if][sp] [if a2 is cscanned][b-text of a2][else][sp][end if][line break]";
	else:
		say "[line break]";

to say dashy of (a11 - a thing):
	let spcs be 0;
	increase spcs by the number of characters in "[printed name of a11]";
	decrease spcs by 8;
	say "[if spcs is 2]-[end if][if spcs is 1]-[end if]------->";

check taking crabgrass:
	say "No need for a crass grab." instead;

niche-found is a truth state that varies.

after examining diorama when player is in Dusty Study and niche-found is false:
	now niche-found is true;
	say "Oh, hey, there's some words on the ceiling. [b]MY NICHE[r]. Wonder what those could be." instead;

MY NICHE is flippable boring scenery in Dusty Study. description of my niche is "The words [b]MY NICHE[r] have a square dotted outline around them.". bore-text is "It's--well, it's not close enough to do much with.". printed name of my niche is "[b]MY NICHE[r]"

understand "my niche" and "my" as niche

after examining niche:
	say "It sounds like there's whistling from the niche, but only if you listen very closely. Have a listen?";
	if the player regex-prompt-consents:
		say "A haunting ice-hymn coming through the dotted outline--or maybe the words you imagine--leaves you red-eyed.";
	else:
		say "Okay.";

understand "ceiling" as niche.

a-text of my niche is "RRYRRYO". b-text of my niche is "RRYRRYO". parse-text of my niche is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]Y".

the chimney is scenery. "It's where your niche was. You can probably put your chair on the bed, then climb the chair to reach it. I won't even make you spell out the details. Just go [b]up[r]."

check taking chimney:
	say "To take the chimney in the going somewhere sense, go [b]UP[r]." instead;

before going up in Dusty Study:
	if niche is in Dusty Study, say "Hm, the letters saying [b]MY NICHE[r] indicate something could be there. Hm, what." instead;
	say "[one of]I'll skip on the whole piling your chair on the bed bit. Though actually it's kind of fun, jumping up and down to pull yourself up. The chimney has enough handholds. You walk through one of your Closest Closets--they provide localized teleporting through the Means Manse--to find yourself high up[or]You climb up again[stopping].";
	now highest heights is visited;
	move closets backdrop to all visited rooms;

check entering chimney:	try going up instead;

check reading diorama: try examining the notice instead;

the notice is part of the diorama. description is "[b]PLATFORM[r]/[b]FARM PLOT[r][line break][b]PAVEMENT[r]/[b]EVENT MAP[r][line break][b]PEDESTAL[r]/[b]STEEL PAD[r][line break][b]CRABGRASS[r]/[b]BRASS CRAG[r][paragraph break]There's even small print: objects on diorama are to pre-sow powers for instructional purposes and likely contain more letters and flexibility than real life situations."

check taking notice: say "It's the lowest-hanging part of the diorama, but you don't need it." instead;

check taking diorama: say "It's there for practice. You can just fiddle with its parts." instead;

check scaning diorama: say "You remember now. A diorama was chosen because it couldn't be messed with at some level. But its parts can be. So you can just scan any part of it." instead;

before taking (this is the dumb take jokes rule) :
	if ed riley has the noun, say "'I am not an item yielder!' Ed Riley booms." instead;
	if noun is crabgrass or noun is brass crag, say "No need for a crass grab." instead;
	if noun is part of the diorama, say "Don't pull the diorama apart. That was a gift! An instructional gift! From a recently deceased father figure!" instead;

section pavement / event map

the pavement is part of the diorama. the pavement is spacy. the pavement is hinthelpy. description is "It's sidewalk pavement. It seems like something has been written on it, but it's too bumpy to read, especially since the pavement is so small."

a-text of pavement is "YRYRR*RYR". b-text of pavement is "YRYRR*RYR". parse-text of pavement is "-[sp]x[sp]-[sp]x[sp]x[sp] [sp]x[sp]-[sp]x".

the event map is a thing in Adorb Bardo. it is hinthelpy. description of event map is "You can read it from here--maybe because you remember it, but you can."

after examining event map:
	let bluh be false;
	if screenread is false:
		say "Do you want a text-map view (yes or no)?";
		if the player regex-prompt-consents:
			say "[fixed letter spacing]?????
[line break]  |     t
[line break]  v   s r
[line break]+-+-+ t i
[line break]| | | o p
[line break]F I M r s
[line break]| | | e s
[line break]+-+-+ s t
[line break]  |     r
[line break]  v   i i
[line break]  R   n p[variable letter spacing]
[paragraph break]You remember stores A-Z in the Trips Strip and how you cleared F, I and M.";
			now bluh is true;
	else:
		say "A flowchart labeled 'Stores in Trips Strip.' A starting box, then three branching lines to F, I and M. They rejoin before pointing to store R. Yes, you had to solve stores F, I and M to open store R and defeat Red Bull Burdell."; [bold-ok]
	if bluh is false:
		say "It's a flowchart that breaks from the Trips Strip into store F (forest,) store I (sortie,) and store M (metros,) before merging at store R, the resort.";
	say "You wonder if there is something in the others now, and if so, what.";

a-text of event map is "RYRYRYRR". b-text of event map is "RYRYRYRR". parse-text of event map is "x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x[sp]x".

section platform / farm plot

the platform is part of the diorama. it is hinthelpy. the platform is spacy. description is "It's one of those speaking platforms that people would stand behind. If it weren't so small."

a-text of platform is "RYRR*RRYR". b-text of platform is "RYRR*RRYR". parse-text of platform is "x[sp]-[sp]x[sp]x[sp] [sp]x[sp]x[sp]-[sp]x".

the farm plot is a thing in Adorb Bardo. it is hinthelpy. description is "It doesn't actually have any dirt on it or it'd have crumbled long ago. If the words [b]FARM PLOT[r] weren't traced in it, in fact, you'd probably think it was just a dirt road. Hooray for helpful documentation."

a-text of farm plot is "RRYRRYRR". b-text of farm plot is "RRYRRYRR". parse-text of farm plot is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x".

section pedestal / steel pad

the pedestal is part of the diorama. the pedestal is hinthelpy and spacy. description is "Too small to put anything on, but it's a good size for instructional purposes."

a-text of pedestal is "RRYYR*RYR". b-text of pedestal is "RRYGR*RGR". parse-text of pedestal is "x[sp]x[sp]E[sp]E[sp]x[sp] [sp]x[sp]A[sp]x".

does the player mean scaning steel pad: it is likely.

the steel pad is a hinthelpy thing in Adorb Bardo. description is "It's really wiry and reminds you that you don't do the dishes often enough. You probably don't have time, now."

a-text of steel pad is "RYRYRRYR". b-text of steel pad is "RYRGRRGR". parse-text of steel pad is "x[sp]E[sp]x[sp]E[sp]x[sp]x[sp]A[sp]x".

section brass crag / crabgrass

some crabgrass is part of the diorama. the crabgrass is hinthelpy and spacy and singular-named. description is "It might be fake, seeing as how it hasn't died after all these years."

indefinite article of crabgrass is "some".

a-text of crabgrass is "RRYRR*RRYR". b-text of crabgrass is "RPGRR*RRYR". parse-text of crabgrass is "x[sp]R[sp]A[sp]x[sp]x[sp] [sp]x[sp]x[sp]A[sp]x".

the brass crag is a hinthelpy thing in Adorb Bardo. description is "It would be majestic if it weren't so miniature. You think. Well, it wasn't meant as scenery."

a-text of brass crag is "RRYRRRYRR". b-text of brass crag is "RPGRRRYRR". parse-text of brass crag is "x[sp]R[sp]A[sp]x[sp]x[sp]x[sp]A[sp]x[sp]x".

kind-of-cool is a truth state that varies.

spacy-hint is a truth state that varies.

parse-hint-yet is a truth state that varies.

after scaning (this is the init-scan rule) :
	if first-good-scan is true and kind-of-cool is false and noun is not held:
		say "And hey. That was kind of cool. You didn't have to press the settler all up in anything, or anyone's personal space.";
		now kind-of-cool is true;
	if noun is part of the diorama:
		if noun is not hinthelpy:
			say "You switch the cheat button and scan again and flip it back again, but the colors don't seem to change. Maybe that's a hint in itself[one of]. But the reds and yellows must tell you something about what the [noun] is supposed to turn into. Which you already can read on the diorama. Hmm[or][stopping].";
		else:
			say "You switch the cheat button back and forth and notice a few colors change: [if cheat-on is true][spacies of b-text of noun] to [spacies of a-text of noun][else][spacies of a-text of noun] to [spacies of b-text of noun][end if].";
		now noun is cscanned;
		now noun is ncscanned;
	if noun is spacy and spacy-hint is false:
		say "You also notice the black dot (*) -- hmm, the [noun] should become something with a space.";
		now spacy-hint is true;
	if parse-now is true and parse-hint-yet is false:
		ital-say "x's indicate consonants, as nothing changes to x in the game, and dashes mean vowels you don't know.";
		now parse-hint-yet is true;
	continue the action;

chapter super purse

purse-searched is a truth state that varies.

to purse-maybe-warn:
	if purse-searched is false:
		ital-say "You can type I to take inventory in the future.";

check searching purse:
	say "(You can type I to take inventory in the future.)";
	try taking inventory instead;

The super purse is a warpable thing. description is "[one of]You find a small note inside, apologizing if it's [if player is male]unusual for you[else]heinously stereotypical[end if], explaining it was a choice between this and an all-wet wallet, and it's 50% bigger than a co-kept pocket. [or][stopping]The inside seems to be covered with space capes, a weird technology that lets the inside be greater than the outside. It re-ups your carrying capacity."

the space capes are part of the super purse. the space capes are boring and useless and plural-named. description of space capes is "If I understood the science behind them, I'd be wasting my life programming games like this, wouldn't I? Okay, maybe I am, anyway.". bore-text of space capes is "The capes work--no need to futz with them or to wonder how they work.";

pursins is a truth state that varies.

check inserting into the purse:
	ignore the can't insert into what's not a container rule;
	if noun is lamp, say "Fire hazard." instead;
	if player does not have noun:
		if pursins is false:
			ital-say "putting something in the purse is the same as taking it.";
			now pursins is true;
		try taking noun instead;
	say "That should already be in the purse.";

check objhinting super purse when super purse is moot: say "Do not worry about wealth you lost. [i]Only worry about the wealth you can create[r]. Perhaps THE SUPER PURSE WILL RETURN WITH INTEREST WHEN YOU DO." instead;

chapter letters settler

The Letters Settler is a warpable thing. understand "recoded decoder" and "recoded/decoder" as letters settler. understand "device" as letters settler.

check giving settler to agnostic: try objasking agnostic about settler instead;

after examining settler for the first time:
	say "You figure up some heuristics to make the settler easier to use and write them in your notepad.";
	pad-rec "the settler";
	continue the action;

understand "scanner" as settler.

a-text of letters settler is "RYRRRYR". b-text of letters settler is "RGPPRYR". parse-text of letters settler is "[bug-report]".

description of the letters settler is "It's shaped like a hand-held vacuum, with an output display on the front. Weird receptors can [b]SCAN[r] things. Below a colorful logo, you also notice a [if cheat-on is true]glowing[else]dark[end if] button labeled [b]TEACH[r]/[b]CHEAT[r]. I guess it doesn't wish to judge.[paragraph break]You also feel a switch, some sort of slider and a decal on the backside."

check examining settler (this is the examine to scan under duress rule) :
	if see-rifle, try scaning rifle instead;
	if owls are touchable:
		say "You reflexively point the settler at the swooping owls as they attack.";
		try scaning owls instead;
	if raptor is touchable:
		say "You reflexively point the settler at the charging raptor as it attacks.";
		try scaning raptor instead;
	if player is in Minded Midden and bleary barley is touchable:
		say "The barley seems to be causing readings on your settler.";
		try scaning bleary barley instead;

check taking:
	if noun is part of the Letters Settler, say "You don't want to go deconstructing the Letters Settler. It was hard enough to create for [gtmn]! (And me, too. But enough about coding.)" instead;

the receptors are a boring thing. they are part of the letters settler. description of receptors is "You know little about electronics and magic theory, and you have no time to find out.". bore-text is "The receptors aren't important. Actually, scratch that, they're too important to fiddle with and break.".

the output display is a boring thing. the output display is part of the letters settler. description of output display is "You will be able to examine the output display when you [b]SCAN[r] something.". bore-text is "You need to activate the settler to see useful data on the output display."

check examining output display:
	say "You look at the display, not really expecting to see anything unless you [b]SCAN[r] something. So you wave the settler around, hoping to pick up something.";
	try scaning the location instead;

the colorful logo is a boring thing. the colorful logo is part of the settler. description of the colorful logo is "The logo's just there to say what it is. And maybe as a hint to examine.". bore-text of logo is "You don't need to do anything to or observe the logo."

seen-blues is a truth state that varies.

check examining logo:
	say "Some of the letters in the logo shimmer a bit, as if they could be changed by pushing the right button. They spell out:";
	if glulx graphics is supported:
		if cheat-on is false:
			display figure graflogo-1;
			if seen-blues is true and Elmo is off-stage:
				say "[one of]It might be wise to take note of which letters changed colors and why and how[or]The logo is in its less colorful setting now[stopping].";
		else:
			display figure graflogo-2;
			if Elmo is off-stage:
				say "The different colored e's seem interesting.";
			now seen-blues is true;
	else:
		say "LETTERS SETTLER. [if cheat-on is false]Es in yellow and everything else in red[else]first Es of each word in green, the Ts in purple, the second Es in yellow. The other letters are all red[end if]. Below, you read: teach/cheat recolors. ";
		if screenread is false:
			ital-say "you may want to get an interpreter like Gargoyle and Zoom to see the 1-kb PNG of this in all its glory.";
	the rule succeeds;

check scaning (this is the scan non-anagrammable important stuff rule):
	if noun is part of the settler, say "Impossible. It's part of the settler." instead;
	if noun is apertured departure, say "The [departure] registers nothing. Anagramming isn't the way to go here[if staple is off-stage]. You don't have anything that makes holes, yet[end if]." instead;

section whichs shwich

the whichs shwich is a boring thing. it is part of the settler. description of the whichs shwich is "You can [b]SWITCH[r] the whichs switch with [b]SS[r] to see everything that can be worked on.". bore-text is "The shwich only lets you do one thing, but it's pretty powerful. The only unusual command that goes with it is [b]SS[r].". bore-check is the bore-shwich rule.

this is the bore-shwich rule:
	if current action is switching on or current action is switching off, now boring-exception is true;

check switching on the settler: try ssing instead;

check switching on the whichs shwich: try ssing instead;

check switching off the settler: try ssing instead;

check switching off the whichs shwich: try ssing instead;

section a tech etcha

a tech etcha is part of the letters settler. understand "teach button" and "cheat button" and "teach" and "cheat" and "button" as a tech etcha when player has settler. printed name is "tech etcha[']".

description of tech etcha is "It says [b]A TECH ETCHA[r]['] in the middle, with [if cheat-on is true]a glowing [end if][b]CHEAT[r] below and [unless cheat-on is true]a glowing [end if][b]TEACH[r] below. You could [b]PUSH[r] it to change that, or just type [b]CHEAT[r] or [b]TEACH[r]. Presumably the [b]TEACH[r] is to help you teach yourself."

after examining tech etcha for the first time: say "You reflect that while 'a tech etcha[']' feels a little forced, well, sometimes a kludge like that is the only way to get any results."

cheat-on is a truth state that varies.

check switching on the tech etcha: try pushing the tech etcha instead;

check switching off the tech etcha: try pushing the tech etcha instead;

parse-warned is a truth state that varies.

to check-parse-spare:
	if parse-warned is false:
		now parse-warned is true;
		ital-say "you can type [b]PARSE[i] for [aro][i] to place information that can be deduced from a cheat-mode reading you more information at the top of the screen or [b]SPARE[i] to hide it. This is obviously a big spoiler, so [b]PARSE[i] is off by default.";
		pad-rec-q "parse";

check pushing the tech etcha:
	say "You push the teach-cheat button, and it's now [if cheat-on is true]off. Hooray for more challenge[else]on. Hooray for more information[end if][one of] when you [b]SCAN[r] in the future--though you can push the button to go back to normal mode[or][stopping][if cheat-on is false and seen-blues is false]. The logo seems to change colors as well[end if].";
	check-parse-spare;
	now cheat-on is whether or not cheat-on is false instead;

does the player mean doing something with the equals sign: it is unlikely.

section equals sign

the equals sign is part of the Letters Settler. description is "The equals sign is [if squee is false]dark[else]light[end if], but you can push it to change that."

squee is a truth state that varies.

equals-pushed is a truth state that varies.

check pushing the equals sign:
	say "You push the equals sign, and it [if squee is false]lights up[else]darkens[end if].";
	now equals-pushed is true;
	now squee is whether or not squee is false;
	the rule succeeds;

check switching on the equals sign: try pushing the equals sign instead;

check switching off the equals sign: try pushing the equals sign instead;

set-sw is a truth state that varies.

ever-switched is a truth state that varies.

does the player mean switching on the whichs shwich: it is very likely.

to show-bluables:
	let QQ be number of bluable things;
	let QQQ be nothing;
	if QQ is 1, now QQQ is a random bluable thing;
	if set-sw is false:
		now set-sw is true;
		if the player's command does not include "ss":
			ital-say "in the future, you can shorten this with [b]SS[i].";
			say "[line break]";
	if QQ is 0:
		swi-say "You see nothing unusual after shaking the settler.[line break]";
		continue the action;
	say "[one of]You switch the settler, then shake it. Your vision swirls for a minute[or]Swish, shake, swirl[stopping]. ";
	if QQ is 1:
		say "Only";
	else if QQ is 2:
		say "A couple things:";
	else if QQ < 4:
		say "A few things:";
	else:
		say "Many things:";
	now blue-list is true;
	say " [list of bluable things]";
	now blue-list is false;
	say " [if QQ is 1 and QQQ is not plural-named]is[else]are[end if] visible. [one of]It's a bit of a headache to stare too long, so you switch the settler off. The view quickly returns to normal[or]You turn the settler off[stopping].[line break]";
	if ever-switched is false:
		say "[line break]Wow! That's handy! The switch shows you which items identifiably change definability!";
		now ever-switched is true;
	if ever-blur was false and ever-blur is true, say "[line break]You'd guess the blurry stuff indicates something isn't necessary to flip, or maybe it's something that can help with another item.";

blue-list is a truth state that varies.

after printing the name of a thing (called th) when blue-list is true:
	if th is part of the diorama:
		say " (faint)";
	else if th is llpish-plus:
		say " (very blurry)";
		now ever-vblur is true;
	else if th is blurry:
		say " (a bit blurry)";

[before printing the name of a thing (called th) when blue-list is true: [ eliminate leading "the"s ]
	if th is an blue-view-thing listed in table of settler shake descriptions:
		do nothing instead;
	if th is proper-named:
		do nothing instead;
	say "the";
	continue the action;]

for printing the name of a thing (called th) when blue-list is true:
	if th is a blue-view-thing listed in table of settler shake descriptions:
		say "[blue-view-text entry]" instead;
	else if th is proper-named:
		say "[printed name of th]";
	else:
		say "the [printed name of th]";

ever-blur is a truth state that varies.
ever-vblur is a truth state that varies.

definition: a thing (called lp) is llpish-plus: [this means it's LLPish or 1 of 2 parts of a this-or-that puzzle and the other is solved]
	if lp is reflexed, no;
	if lp is llpish, yes;
	if lp is lobster and me arts are moot, decide yes; [troves]
	if lp is me arts and lobster is moot, decide yes;
	if lp is praise spirea and rivets are reflexed, yes;
	if lp is rivets and praise spirea is reflexed, yes;
	if lp is sister tressi or lp is marble blamer balmer or lp is marble blamer mr beal:
		if mbb-sis-points is 1, yes;
	if lp is ghoul hat or lp is gore ogre: [otters]
		if eels are reflexed, decide yes;
	if lp is eels or lp is sea cube:
		if gore ogre is moot, decide yes;
	decide no;

definition: a thing (called mbbl) is blurry:
	if mbbl is store h and roved is false, yes;
	if mbbl is auxiliary, yes;
	if mbbl is a guardian, no;
	decide no;

table of settler shake descriptions
blue-view-thing	blue-view-text
darkness	"a weird outline in the darkness" [routes]
L Clear Cellar	"the outline of a possible but incorrect location of L'Clear Cellar" [troves]
Id Cede	"musical notes pulsing with the beat of [i]I'd Cede[r]"
wzup	"a pair of hands patting [l-n-r] on the back" [presto]
eeks	"some cartoony representation of [b]EEKS[r]" [oyster]
bogus-reangle	"the general gleaner"
atblock	"an aura of tentativeness about [agnostic-first]" [towers]
aside-llp	"rays of tension between [e-n-m]" [otters]
sorer bogey	"something pulsing in rhythm with the whines from the [if bogey-listen is true]sorer bogey[else]wells below[end if]" [others]
a banna	"the/(a) banna[']"
fleeing feeling	"the word '[b]PERP[r]' forming outside the Valence Enclave"
coins	"Curtis's coins"
icons	"the icons you made"

to swi-say (sst - indexed text):
	if sss is false:
		say "[sst]";
	else:
		append "[sst][line break]" to the file of debuggery;

definition: a thing (called candi) is bluable:
	[say "[candi] [if candi is ghostly]invis[end if] [if candi is uncluing]uncluing[end if] [if candi is touchable] visible[end if].";]
	if candi is unscannable, no;
	if candi is reflexed, no;
	if candi is uncluing, no;
	if candi is clue-used, no;
	if player is in Econ Cone:
		if rivets are reflexive and candi is praise, no; [?? this looks very wrong. We need to look for blues in Econ Cone.]
	if candi is tunes, no; [specific to oyster]
	if player is in Plasm Lamps and candi is ant, yes;
	if candi is sausage and player is in Anger Range and candi is off-stage, decide no; [visibility issues here. We "see" the haunter but can't see it with bluables]
	if candi is crate and player is in Lapsin Plains:
		if bogus-trace is in Lapsin Plains, yes;
	if candi is elmer, no; [specific to oyster]
	if player is in Gates Stage and gates-score is 2: [specific to others]
		if candi is fleeing feeling or candi is searcher or candi is viewer, no;
	if player is in Filed Field and candi is barren cries, no;
	if candi is touchable, yes;
	decide no;

definition: a thing (called candi) is outlinable:
	if candi is uncluing, no;
	if candi is touchable, yes;
	decide no;

to say outline-invis: [unused]
	if number of outlinable things > 0:
		say "You can also briefly see outlines of [a list of outlinable things]. ";

the backside is part of the letters settler. understand "back" as backside.

check examining backside:
	if glulx graphics is supported:
		display figure yorpwald-1;
	else:
		say "It reads SAVE [b]YORPWALD[r] WITH [b]WORDPLAY[r]. SAVE and WITH are dark, but in the other two words, the Y's are orange."; [bold-ok]
		if screenread is false:
			ital-say "a glulx interpreter like Gargoyle shows things clearer.";
	say "[one of]Hmm. The orange seems odd. Perhaps it's a clue, if you need one. [or][stopping]There's also a switch below the decal.";
	the rule succeeds;

the laced decal is part of the letters settler.

description of laced decal is "[bug-report]"

check examining decal: try examining backside instead;

check taking decal: say "It's really wedged on there. You'd destroy it scraping it off. And besides, maybe it's a hint, too." instead;

description of backside is "[bug-report]";

chapter idlers' slider

the idlers slider is a device. the slider is switched off. the slider is part of the letters settler. description is "The slider[one of], which is red (a nice touch--slider and idlers not having any letters that match up,) [or] [stopping]is currently switched [if slider is switched on]on[else]off[end if], with a number [headaches] next to it[one of]. You'd guess that is the number of charges left, or something[or][stopping].". printed name is "idlers['] slider".

after examining slider:
	toggle-slider-note;

slider-toggle is a truth state that varies.

to toggle-slider-note:
	if slider-toggle is false:
		if word number 1 in the player's command is "sl":
			now slider-toggle is true;
			pad-rec-q "sl";
			continue the action;
		ital-say "You can type [b]SL[i] to toggle the slider in the future.";
		pad-rec-q "sl";
		now slider-toggle is true;
		continue the action;

after entering balancer barnacle:
	say "You hear a click from the slider[if slider is switched on] as it switches off[else] and you notice it's jammed[end if][if cur-score of oyster is 0]. Hopefully thinking will not be at a premium here[else]. But you know action counts more here[end if].";
	continue the action;

to twiddle-slider:
	if slider is switched on:
		try switching off slider;
	else:
		try switching on slider;

check switching on slider:
	toggle-slider-note;
	if slider is switched on, say "It already is." instead;
	if headaches is 0, say "You can't afford any more headaches." instead;
	now slider is switched on;
	say "You switch the slider on." instead;

check switching off slider:
	if slider is switched off, say "It already is." instead;
	now slider is switched off;
	say "You switch the slider off." instead;

sling is an action applying to nothing.

understand the command "sl" as something new.

understand "sl" as sling.

carry out sling: twiddle-slider instead;

chapter teariest treatise

chapter pedanto-notepad

the pedanto notepad is a warpable thing in Dusty Study. understand "pad/note/notebook" and "note book/pad" as pedanto notepad. printed name is "pedanto-notepad".

after choosing notable locale objects when player is in Dusty Study:
	if pedanto notepad is in Dusty Study, set locale priority of pedanto notepad to 0;

report taking pedanto notepad:
	the rule succeeds;

understand "book" as pedanto notepad when player is not in Hacks Shack.

check opening the pedanto notepad: say "You can just type [b]PAD[r] to get all the subjects, or [b]PAD[r] ([b]SUBJECT[r]) for a specific one." instead;

check searching the pedanto notepad: say "You can just type [b]PAD[r] to get all the subjects, or [b]PAD[r] ([b]SUBJECT[r]) for a specific one." instead;

after printing the name of the pedanto notepad while taking inventory:
	if pedanto notepad is examined:
		say "([b]PAD[r] to use[if number of prefigured things > 0] or [b]PAD FLIPS[r]/[b]PF[r] for solutions you figured in advance[end if])";

check dropping the pedanto notepad: say "One problem with owning a pedanto-notepad is that you are wracked with silly reasons to keep it, even if you have the big-picture stuff covered. Sorry about that." instead;

vaguing is an action applying to nothing.

understand the commands "consult pad" and "consult about" and "pad" as something new.

understand "consult pad" and "consult about" and "pad" as vaguing.

carry out vaguing:
	if location of player is dark, say "You can't [if player does not have pedanto notepad]locate[else]read[end if] your notepad right now." instead;
	if player does not have pedanto notepad, try taking pedanto notepad;
	say "[cur-has]";
	the rule succeeds.

description of pedanto notepad is "Other people have computers, but your notepad is yours[one of]. It's made by Da Ponte, who now have a monopoly. But you just like it. The color, the feel[or][stopping]. [cur-has][run paragraph on]"

check examining pedanto notepad for the first time:
	say "It's your workbook. It holds bookwork. The original, from the first time you saved Yorpwald, is in some museum. But this is about the same. It's small enough to fit in a pocket, and you have clipped a pen over it, too.[paragraph break]It won't actually make you pedantic--it just stores the fourth-wall stuff that non-text-adventurers aren't even aware of. Stuff that's a nuisance for text adventurers. While most of it is marginally intuitive (he said, behind the fourth wall,) having to remember it can take away from puzzle solving and such[if player does not have pedanto notepad]. You decide to take it. It'll help tame lots that's meta, mate[end if].";
	ital-say "to use the notepad, you can type [b]PAD[r] (subject) or [b]CONSULT PAD ABOUT[r] (subject). If you forget what you've written about, you can type [b]PAD[r] or [b]CONSULT PAD[r].";
	if player does not have pedanto notepad:
		now player has pedanto notepad;
		check-sad-ads;
	the rule succeeds;

to decide whether (qq - a truth state) is unrelevant:
	if qq is false, decide yes;
	if mrlp is Ordeal Reload or mrlp is stores, decide no;
	decide yes;

to consult-region-free (consult-type - a number):
	let A be 0;
	say "[line break]--";
	repeat through table of notepad entries:
		if type entry is not consult-type, next;
		if known entry is false, next;
		if there is a fixed-region entry and consult-type is not 3, next;
		if there is no fixed-region entry and consult-type is 3, next;
		if remainder after dividing A by 4 is 0:
			if A > 0:
				say ".";
				say "--";
		else:
			say ", ";
		increment A;
		say "[if readyet entry is false][i][end if][short entry]";
		if short entry is "flips" and pf-warn is true:
			say "/pf";
		say "[r]";
	say ".";

to say cur-has:
	say "Currently you can consult your pad about these general topics:";
	let A be 0;
	consult-region-free 1;
	say "[line break]";
	say "Currently you can consult your pad about these options, meta-verbs and specific game syntax:";
	consult-region-free 2;
	let fixies be 0;
	repeat through table of notepad entries:
		if there is a fixed-region entry and mrlp is fixed-region entry, increment fixies;
	if fixies is 0:
		say "There are no topics specific to this region right now.";
		say "[line break]Unconsulted subjects are in [i]italics[r].";
		continue the action;
	say "[line break]";
	say "Currently you can consult your pad about [if fixies is 1]this region-specific topic[else]these region-specific topics[end if]:";
	consult-region-free 3;
	say "[line break]Unconsulted subjects are in [i]italics[r].";

the pen is part of the pedanto notepad.

description of the pen is "It's clipped there so you don't misplace it."

check taking the pen: say "Bad idea. You tend to lose those things like nobody's business if they're not nailed down." instead;

qmspoil is a truth state that varies.

to decide whether know-parse-spare:
	if respect specter is moot, yes;
	if strip of profits is visited, yes;
	no;

to say verb-list:
	say "[2da][b]N[r], [b]S[r], [b]E[r] and [b]W[r] are the basic directions, though [b]UP[r] and [b]DOWN[r] are used occasionally, and [b]IN[r] or [b]OUT[r] may work.";
	say "[2da][b]X[r] or [r][b]EXAMINE[r] may provide clues about something, and if it has writing on it, [b]READ[r] will show the writing, which is often a hint.";
	say "[2da][b]LISTEN[r] and [b]SMELL[r] may also provide clues, usually when [this-game] indicates you can hear something. [b]ATTACK[r] may, as well, though that's more based on if I had a stupid joke ready.";
	say "[2da][b]ASK X ABOUT Y[r] may get detailed information from an NPC. If you [b]TALK[r] to an NPC, it's the equivalent of asking them about themselves. [b]A[r] is shorthand for [b]ASK ABOUT[r] if only one NPC is available.";
	say "[2da][b]OPTIONS[r] or [b]OPTS[r] or [b]POST OPTS[r] gives you a list of game options that can simplify play or add detail.";
	say "[2da][b]PAD[r] to see a list of topics. Then [b]PAD VERBS[r], for example.";
	say "[2da][b]HINT[r] or [b]HELP[r] on an object shows progressive clues for what to do with it.";
	say "[2da][b]VERBS[r] shows this again, and informational meta-commands include [b]ABOUT[r], [b]CREDITS[r], [b]TECH[r], [b]SITES[r], and [b]RELEASE[r]. These give no hints, but you may find them interesting.";
	if player has settler:
		say "[2da][b]SCAN[r] various things to see if they can be changed and how.";
		say "[2da][b]TEACH[r] or [b]CHEAT[r] can change how much the settler helps. [b]CHEAT[r] tells a bit more than [b]TEACH[r]. [b]C[r] and [b]T[r] are abbreviations.";
		say "[2da]Settler shortcuts: [b]LA[r]=recall what you scanned last, [b]SL[r]=turns slider on, [b]SY[r]=scan once with cheat on, [b]SN[r]=scan once with cheat off, [b]SS[r]=shake settler (or switch the Whichs Shwich) to see what can be changed.";
		if know-parse-spare:
			say "[2da][b]PARSE[r] and [b]SPARE[r] turn on displaying all the letters you can figure logically from a cheat-scan.";
	if player has whistle, say "[2da][b]PLAY[r] the whistle.";
	verbsplain "xray";
	verbsplain "go to";
	verbsplain "retry";
	if in-beta is true:
		say "[b]BETA COMMANDS BELOW[r]:[line break]";
		say "[2da][b]MISSED[r] shows what you missed in all regions. [b]MISSES[r] shows this region's. [b]MISSALT[r] shows alternate routes.";

to say opts-list:
	verbsplain "access";
	verbsplain "random dialogue";
	verbsplain "parse";
	verbsplain "poss";
	verbsplain "opt in/no tip";
	verbsplain "xtra/trax";
	verbsplain "extra/taxer";

definition: a person (called per) is terse-ok:
	unless per is terse-warned, no;
	if per is moot, no;
	if mrlp is towers and per is a guardian, yes;
	if mrlp is map region of location of per, yes;
	no;

to say terse-types:
	let twp be number of terse-ok people;
	if twp > 0:
		let rtok be a random terse-ok person;
		say ".[paragraph break]You've also found [if twp is 1 and rtok is singular-named]someone who isn't[else]some folks who aren't[end if] very useful except for general chat: [list of terse-ok people]"

[top]
table of notepad entries [pad-rec whatever is below]
short	verify	fixed-region	type	readyet	known	topic (topic)	blurb
"access"	false	--	2	false	true	"access"	"Typing [b]SCR[r] or [b]SCREEN[r] toggles handicapped accessibility mode, which generally helps the visually impaired with graphics clues and avoids a stream of useless punctuation. It is currently [on-off of screenread]."
"asking"	false	--	2	--	false	"asking"	"You will want to [b]ASK[r] others about themselves a lot. Elvira, too, maybe."
"clues"	true	--	1	--	false	"clues"	"You can [b]LISTEN[r], [b]ASK[r] people about random stuff, or [b]X[r]/[b]EXAMINE[r] them to figure how to change them."
"curst palace"	true	towers	3	--	false	"curst/palace" or "curst palace" or "castle arc up" or "castle arc/up" or "up arc" or "arc up"	"You apparently can't scan the curst palace fully with the settler [']til you're all the way there. But maybe you can guess."
"DIE THOU"	true	oyster	3	--	false	"die" or "die thou" or "the/ hideout/hangout"	"If the Horned Hedron could be undermined or infiltrated, perhaps things would get back to normal. And perhaps the haunter could be used against them. It hates them."
"diorama"	true	--	1	--	false	"diorama"	"[dior-scan]"
"directions/dirs"	false	--	1	--	true	"directions/dirs"	"[this-game] uses north, south, east and west. You may be able to go in or out, too, especially when only one exit is listed."
"Elvira"	true	--	1	--	false	"Elvira" or "necro/crone" or "necro-crone" or "necrocrone"	"Apparently, appreciating her is what separates us from the animals. Well, according to [porter][if mrlp is otters]. But you need to know more and ask around about her[end if]."
"extra/taxer"	false	--	2	--	false	"extra/taxer" or "extra taxer"	"[b]EXTRA[r] or [b]TAX ER[r]/[b]TAXER[r] toggles more advice for ambiguous/question mark hints. This is close to [b]XTRA[r], but it is likely the player will want to set [b]TAXER[r] and not [b]EXTRA[r] back."
"flips"	false	--	1	--	false	"flips" or "flip" or "pf"	"[what-can-flip]"
"free turns"	false	--	1	--	true	"free turns" or "free/turns"	"Some actions do not take a turn. For instance, examining, looking or taking inventory, or 'out of world' actions like [b]SCORE[r], will not cost you time if you are in a tight situation."
"go to"	false	--	2	--	true	"go to" or "go/gt/goto"	"You can [b]GT/[b]GO TO[r]/[b]GOTO[r] a location or thing if it's a bit far away but in the region."
"Gretta"	true	--	1	--	false	"gretta"	"If you can find Gretta Garett-Tatger, she may give you something to help hit at Elvira."
"guru"	true	others	3	--	false	"guru"	"You can [b]GURU[r] something [if arugula is moot]now you've eaten[else]after eating[end if] the augural arugula."
"hacking"	true	presto	3	--	false	"hacking" or "hack"	"A reminder that cussing won't make a computer work any better, and you need to get everything set up first on your comfy labs slab, and only then should you take action with various technical programming activities."
"Leo and Rand"	true	presto	3	--	false	"Leo/Rand" or "Leo and Rand"	"[l-n-r] may be able to help you with heavy lifting."
"long commands"	--	--	2	--	false	"long commands" or "long/command/commands"	"Commands over 4 words long aren't necessary. You can say [b]TAKE[r] or [b]GET ALL[r], eliminate THE, or use half an open compound word without repercussions."
"methods"	false	--	1	--	true	"methods"	"You probably want to talk to and examine everyone. Even hostile people drop clues when asked about themselves, or stuff in general. Searching and reading writing, or even trying to run past or attack enemies, can offer information, too."
"No-Lag Logan"	true	routes	3	--	false	"no lag" or "logan" or "no lag logan"	"No-Lag Logan may have left behind a ship that can get you out of here. It is beyond an un-road."
"Old Warpy"	false	--	1	--	true	"old warpy" or "old/warpy"	"Old Warpy is the force that allows people to move between distant areas of Yorpwald that need help. It aided you so long ago getting to the Trips Strip, and it may aid you again. You always wondered where else it led, but you knew if you found out, Yorpwald would be in trouble."
"opt in/no tip"	false	--	2	--	false	"opt in" or "opt/notip/optin/tip" or "no tip"	"[b]OPT IN[r] lets you see initial region hints. [b]NO TIP[r] turns them off."
"options"	false	--	2	false	true	"options" or "opts" or "post opts"	"[opts-list]"
"parse"	false	--	2	false	false	"parse/spare"	"[b]PARSE[r] processes the settler's data for you, but [b]SPARE[r] hides it."
"poss"	false	--	2	--	false	"poss"	"[b]POSS[r] toggles whether you can see the maximum/minimum score for a region. It is a potential meta-spoiler, but it can be helpful, too."
"powers"	false	otters	3	--	false	"powers"	"You need to figure a way to get your powers back. They were drained when you passed by the solid idols."
"progress"	false	--	1	--	false	"progress"	"You note the following: Ordeal Reload = stuff[other-areas]."
"question mark"	true	--	1	--	false	"question mark" or "question/mark"	"[if qmspoil is true]The question mark is often better than a red or yellow in Cheat mode, because it limits you to two possibilities[else]The question mark is, well, a question mark. But maybe it's not as vague as it seems. You can [b]HINT[r] it if you're stuck[end if]."
"random dialogue"	false	--	1	--	false	"random/ dialogue/dialog/" or "hush/uhhs"	"[b]HUSH[r] turns random dialogue off. [b]UHHS[r] turns it on. It is [on-off of talk-quiet]."
"reagents"	true	routes	3	--	false	"reagents/reagent"	"You need three reagents to help Brother Horbert: a stupor sprout[if player has stupor sprout] (check)[end if], U NERD ENDUR REDUN[if player has U NERD ENDUR REDUN] (check)[end if], and pipe soot[if player has pipe soot] (check)[end if]."
"red"	true	--	1	--	true	"red"	"Stuff that's all red, or an idea that makes you or someone see red, is all wrong, which is a clue in its own way."
"retry"	true	--	2	--	true	"retry" or "terry"	"You wrote notes about how you can [b]RETRY[r] thanks to Terry if you get stuck somewhere past a store."
"saying"	false	--	2	--	false	"say/saying/think/thinking"	"Instead of [b]SAY[r]ing or [b]THINK[r]ing, you can just type the word."
"scenery"	false	towers	1	--	false	"scenery"	"St. Teri told you to look for [the entry palace-clue-index in nextclue]."
"SHATTER-THREATS"	false	--	1	--	false	"shatter/threats" or "shatter-threats" or "shatter threats"	"It's that new law Elvira got passed, about how you couldn't flip things to their anagrams, because there are too few anagrams--things to change to things--left for you to save Yorpwald again. Well, outside your own house. Of course, if you protested, that would look suspicious.[paragraph break]The title was based on a really convoluted acronym you can't remember."
"Shuffling Around"	true	--	1	--	true	"shuffling/ around" or "shuffling around"	"Postmortems? Most sport em. Details: I lasted. I miss my tagged gadget and how it helped me through the Forest (store F,) Sortie (store I,) and Metros (store M) in the Trips Strip. To the resort (store R.) Redness = guised guides (letters all wrong.)"
"sl"	false	--	2	--	false	"sl"	"Shortcut command to turn slider on."
"sleep"	false	--	1	--	false	"sleep/sleeping"	"[b]SLEEP[r] is only advisable in a protected area."
"spaces"	true	--	2	--	false	"spaces/space/son/nos" or "space on" or "no space"	"[if screenread is false]To put spaces in letters settler readings, type [b]SPACEON[r] or [b]SON[r]. [b]NOSPACE[r] or [b]NOS[r] reverses this[else]Spaces are on by default in accessibility mode[end if]."
"tagged gadget"	true	--	1	--	true	"tagged/gadget" or "tagged gadget"	"You wrote some notes about the Tagged Gadget from [shuf] in here, about Certify and Rectify modes. How Certify showed all the right letters, and Rectify made the first and last right[if player does not have settler]. You could do with a new thingamabob now[else]. How Secure allowed you to keep both modes and Recuse let you skip a store. Your settler is apparently handy in a different way[end if][if Carven Cavern is unvisited]. Probably a bunch of different commands to use, though[end if]."
"talking"	false	--	2	--	false	"talking"	"[b]TALK[r]ing is the equivalent of asking someone about themselves[terse-types]."
"the haunter"	true	oyster	1	--	false	"haunter"	"The haunter is beneath Anger Range, but it is only part of what is making everyone angry. It is angry about a jewel it had stolen from it."
"the settler"	true	--	1	--	false	"the settler" or "settler"	"c/t/cheat/teach pushes teach/cheat button.[line break]la = last scan (best for vision impaired since graphic should appear in top frame).[line break]ss = switch settler or shake settler to see all transformable objects.[line break]sy = scan with hints, overriding current setting (sn = without).[line break]You don't ever need to SCAN X WITH SETTLER, just [b]SCAN X[r]."
"the Wildest Wilteds"	true	towers	1	--	false	"wilteds/wildest" or "wildest wilteds"	"Ornate Atoner Renato told you that the people guarding passage would be tough. Like, six or more letters tough. But you might be able to listen to them and talk to them. He also mentioned [if Obscurest Subsector is unvisited]Dr. Yow, whom you haven't found yet, and how [end if]the top opt pot was for...well, someone Renato was sad to have lost touch with."
"verbs"	false	--	2	false	true	"verbs/verb"	"[verb-list]"
"warp"	true	--	1	--	true	"warp"	"[i][bracket]FOURTH WALL NOTE: if you solved whatever is behind Store P, U, V, W, or Y in an early release, you can type the final command to bypass that area, though each area has been substantially upgraded since release 3. Also, the final command changed between versions for some areas, because they were (hopefully) improved, so you can use either. The game will warn you if you used an old one.[close bracket][r]"
"xray"	false	towers	2	--	false	"xray" or "xraying"	"[xray-help]."
"xtra/trax"	false	--	2	--	false	"xtra/trax"	"You can use the command [b]XTRA TRAX[r] (or [b]XTRA[r] or [b]TRAX[r]) to toggle tracking the right combination of letters less generically. However, some hints might be a bit too pointed."

to say xray-help:
	if xrayvision is true:
		say "You can [b]XRAY[r] something you can't describe to see what it can or should be, with that skan-snak you ate. You can wait as long as you want/need";
	else if all skansnaks are moot:
		say "You've used all the possible [b]XRAY[r]s";
	else if toaster is moot:
		say "You can't put any more pastries in the toaster to [b]XRAY[r] them";
	else:
		say "You can put a[if number of moot skansnaks > 1]nother[end if] pastry in the toaster to get [b]XRAY[r] vision to be able to describe what something can or should be"

pf-warn is a truth state that varies.

definition: a thing (called th) is flip-known:
	if th is prefigured, yes;
	if th is disk or th is skid:
		if skid is off-stage, no;
		if yak is moot, no;
		yes;
	no;

to say what-can-flip:
	if pf-warn is false:
		if word number 1 in the player's command is not "pf":
			ital-say "you can abbreviate this with [b]PF[i] in the future.";
			now pf-warn is true;
	if number of flip-known things is 0:
		say "You have nothing [if ever-fig is true]else [end if]you figured in advance.[no line break]";
		continue the action;
	if mrlp is demo dome:
		say "This shouldn't have happened, but it did. BUG.";
		continue the action;
	say "Stuff you figured that may be handy later: [prefigured-things]";

to say prefigured-things:
	say "[list of not unfigured things with definite articles].";
	repeat with pft running through not unfigured things:
		let got-it be false;
		repeat through preeftable of mrlp:
			if pft is preflip entry:
				say "[line break][pretodo entry]";
				now got-it is true;
				break;
		if got-it is true, next;
		d "you may wish to put [pft] in [preeftable of mrlp].";
		if pft is a the-from listed in regana of mrlp:
			choose row with the-from of pft in regana of mrlp;
			say "[line break]To deal with [the the-from entry]: [b][right-word entry in upper case][r].";
		else:
			say "[line break]You remember you need to think [pft] at some time.";

to say other-areas:
	repeat through table of region spoilers:
		if last-loc of hint-reg entry is visited:
			if hint-reg entry is not others and hint-reg entry is not Ordeal Reload and hint-reg entry is not stores:
				say "[spoil-expl entry]";
			else:
				say "(????)";

after objasking aunt tuna about:
	pad-rec-lump "haunter";
	pad-rec "die thou"

[tope]

section consulting

the block consulting rule is not listed in any rulebook.

consulting is an action applying to one thing and one topic.

pad-consult is a truth state that varies.

check consulting it about:
	if location of player is dark, say "Not in the dark." instead;
	if noun is not pedanto notepad, say "You can only really consult your notepad. [b]ASK[r] something animate, if you want to." instead;
	if player does not have pedanto notepad, try taking pedanto notepad;
	repeat through table of notepad entries:
		if there is a fixed-region entry and type entry is not 3, d "Fix [short entry] in table of notepad entries.";
		if known entry is true and topic understood includes topic entry:
			now readyet entry is true;
			say "[blurb entry][line break]";
			now pad-consult is true;
			the rule succeeds;
	say "You haven't written anything about that. [cur-has]";
	the rule succeeds;

section padding

understand the command "consult about" as something new.
understand "consult about [text]" as padding.

understand the command "notepad/pedanto/pad" as something new.
understand "notepad [text]" and "pedanto [text]" and "pad [text]" as padding.

padding is an action applying to one topic.

this is the notepad check rule:
	if location of player is not dusty study and location of notepad is dusty study:
		ital-say "taking your notepad. It should have been implicitly taken once you left Dusty Study, so this is a [b]BUG[r]. Email me at [email] to let me know how this happened!";
		now player has pedanto notepad;

carry out padding:
	process the notepad check rule;
	try consulting pedanto notepad about topic understood instead;

recbuffer is indexed text that varies.

to say preefsay-nol of (pfy - a thing):
	if pfy is not prefigured:
		say "[line break]";
		preef-nol pfy;
		pad-rec-q "flips";

to say preefsay of (pfy - a thing):
	if pfy is not prefigured:
		preef pfy;
		say "[line break]";
		pad-rec-q "flips";

to pad-rec-p (q - text):
	pad-rec q;
	say "[paragraph break]";

to decide whether need-line-break:
	if player is in Dusty Study and Report Porter Perrot is in Dusty Study, no;
	if player is in Disowned Downside and gretta is in Disowned Downside, no;
	if player is in Largely All Grey Gallery and elmo is in Largely All Grey Gallery, no;
	yes;

to pad-rec (q - text):
	repeat through table of notepad entries:
		if there is no short entry:
			say "Need short entry for [q]: [bug-report]";
		else if short entry is q:
			if known entry is false:
				now known entry is true;
				if there is no verify entry or verify entry is true or number of characters in recbuffer > 0:
					say "[if need-line-break][line break][end if][i](You record the information about [recbuffer][short entry] in [mult-if]your [one of]pedanto-[or][stopping]notepad.)[r]";
			now recbuffer is "";
			the rule succeeds;
	say "BUG! Tried to write [q], a notepad entry that wasn't there. This isn't a game-breaking bug, but it's bad for user-friendliness. Please let me know at [email].";
	abort-if-bugfind;

to say mult-if:
	if recbuffer matches the text "/":
		say "multiple entries in ";

to pad-rec-lump (q - text):
	repeat through table of notepad entries:
		if there is no short entry:
			say "[bug-report] need short entry for [q].";
		else if short entry is q:
			if known entry is false:
				now known entry is true;
			now recbuffer is "[recbuffer][q]/";
			the rule succeeds;

to pad-rec-q (q - text): [pad-rec without saying, you add the info]
	repeat through table of notepad entries:
		if there is no short entry:
			say "[bug-report] need short entry for [q].";
		else if short entry is q:
			if known entry is false:
				now known entry is true;
			now recbuffer is "";
			the rule succeeds;
	say "BUG! Tried to quiet-write [q], a notepad entry that wasn't there. This isn't a game-breaking bug, but it's bad for user-friendliness. Please let me know at [email].";
	abort-if-bugfind;

to pad-del (q - text):
	repeat through the table of notepad entries:
		if there is no short entry:
			say "[bug-report] need short entry for [q].";
		else if short entry is q:
			if known entry is true:
				now known entry is false;
			the rule succeeds;
	say "BUG! Tried to delete [q], a notepad entry that wasn't there. This isn't a game-breaking bug, but it's bad for user-friendliness. Please let me know at [email].";
	abort-if-bugfind;

section pfing

pfing is an action applying to nothing.

understand the command "pf" as something new.

understand "pf" as pfing.

carry out pfing:
	now pf-warn is true;
	if player does not have pedanto notepad:
		say "You need your notepad to use the [b]PF[r] shortcut.";
	else:
		unless "flips" is padded, say "You consult your notepad but haven't figured any flips in advance yet." instead;
		try consulting pedanto notepad about "flips";
	the rule succeeds;

book Largely All-Grey Gallery

gallery-been is a truth state that varies.

rule for supplying a missing noun when entering:
	if player is in Largely All Grey Gallery:
		now the noun is the evac cave.

[x current room]
the Largely All Grey Gallery is an innie room in Ordeal Reload. It is stairy. "This is a nondescript underground hiding place. It's only largely all-grey because the paint is discolored in places, though you'll fix that after fixing Yorpwald.[paragraph break]The gallery stands regally, for all that, though it's full of [ISBN bins]. [one of]There's an evac-cave that could help you sneak out of the Means Manse[or]You can enter the evac-cave here[stopping][if min-score of Ordeal Reload < max-score of Ordeal Reload], though if you're a completionist, you may want to poke around the study and such first[else], since you've twiddled everything[end if][if stria are touchable]. Stria glisten on the ceiling[end if]. [one of]There's a diorama hanging here, identical to the one in the study, too[or]That diorama's here, too[stopping].". roomnud of Largely All Grey Gallery is table of largely all-grey gallery nudges. printed name of Largely All Grey Gallery is "Largely All-Grey Gallery".

diorama is in Dusty Study and Largely All Grey Gallery. [this is written in here after defining the gallery as a room]

understand "basement" as Largely All Grey Gallery when Gallery is visited or beams are moot.

chapter isbn bins and snib

the ISBN bins are plural-named LLPish reflexive boring scenery in Largely All Grey Gallery. description of ISBN bins is "[if bins are reflexed]The bins are now locked and a bit securer with the snib[else]The [bins] are very red and very unlocked. One of them says [first custom style]NIBS[r] (in another still-prominent shade of red), an embarrassing reference to how folks fawned over you once and gave all sorts of embarrassing sobriquets you didn't want[end if].". bore-text is "You don't have much time to meddle in depth with the bins, [if bins are reflexed]now you've made them secure[else]but you could make them a bit more secure[end if].";

understand "bin" and "ISBN bin" as ISBN bins.

a-text of ISBN bins is "RRYR". b-text of ISBN bins is "RRYR". parse-text of isbn bins is "UNIQUE". ISBN bins are any-spoilable.

the snib is useless boring scenery. description of the snib is "The snib is holding your bins together. That might make it snibs, but let's just pretend it sort of links all the bins together so even if they can't be broken into, someone would have to move them all at once.". bore-text is "The snib is secure enough. No need to tinker with it.".

understand "snibs" as snib.

chapter evac-cave

the evac cave is boring scenery in Largely All Grey Gallery. description of the evac cave is "It's a bit small, but you can enter it, or go inside.". bore-text is "You probably just want to enter the cave or go [b]IN[r].". bore-check is the bore-evac-cave rule.

printed name of evac cave is "the evac-cave".

this is the bore-evac-cave rule:
	if current action is entering, try going inside instead;

chapter stria

the stria are plural-named vanishing LLPish scenery in Largely All Grey Gallery. "You never knew what they were until [gtmn] told you. 'You'll be glad one day, maybe,' he said. They're like veins, vines." [stria are LLPish because if you're in the Gallery you don't need to deal with them]

a-text of stria is "RRYYR". b-text of stria is "PPYGR". parse-text of stria is "UNIQUE". stria is parse-spoilable.

check taking stria: say "Too high up." instead;

the stair is a boring backdrop. drop-region of stair is Ordeal Reload. description of stair is "It leads [if player is in Largely All Grey Gallery]up[else]down[end if].". bore-text of stair is "Can't do much but go up or down a stair.".

does the player mean climbing the stair: it is very likely.

after printing the locale description for Largely All Grey Gallery when Largely All Grey Gallery is unvisited:
	if do-i-chat is false:
		if tables are in Dusty Study and meet bans are in Dusty Study:
			say "After your trip down the ramp, you note the stria--and the ten beams. Ten beams, basement--that makes sense. You could probably do something to the stria or visit the closets if you wanted, but you don't have to.";
		else if tables are in Dusty Study:
			say "The stria remind you of the stable you walled up a long time ago. It must have been behind the tables you scribbled on the wall so long ago. Maybe not worth going back to uncover.";
		else if meet bans are in Dusty Study:
			say "Okay. So that's what MEET-BANS in the study was for. You could dispel or uncover them if you were completionist that way.";
		if possibles is false and min-alert is false:
			ital-say "you don't need to do anything else in the Means Manse, but if you want to track what you can do, [b]POSS[i] will do so.";
			now min-alert is true;
		continue the action;

check going outside in Largely All Grey Gallery:
	say "To get out of the gallery, you need to go inward. So let's go that way.";
	try going inside instead;

check exiting in Largely All Grey Gallery: try going inside instead;

check going in Farming Framing:
	if noun is inside or noun is outside:
		if backcheck is false:
			now backcheck is true;
			say "You shouldn't need to go back unless you need to figure out the diorama and how the settler works. Do you want or need to do this?";
			if the player yes-consents, now player is in Dusty Study instead;
			say "Ok, probably best to [if pram is not moot]find a way out. Clean out that pram, maybe[else]see about that ramp[end if]." instead;

check going down in Farming Framing:
	if stair is not touchable, say "There should be a way down. That sitar could trans-substantiate or be reincarnated as something more useful." instead;
	move player to Largely All Grey Gallery instead;

check going up in Largely All Grey Gallery:
	if stria are touchable and meet bans are in Dusty Study, say "Hmm. There should be a way back up. The stria could be disposable." instead;
	if backcheck is false:
		now backcheck is true;
		say "You shouldn't need to go back to your study unless you want to get more points. Do you want or need to do this?";
		if the player yes-consents:
			now gallery-been is true;
			now player is in Dusty Study instead;
		else:
			say "Ok, probably best to find a way out." instead;
	else:
		say "You go back to the study.";
		now player is in Dusty Study instead;

settler-x-nag is a truth state that varies.

check going inside in Largely All Grey Gallery:
	say "You prepare to sneak into the evac-cave to get out of here.[paragraph break]";
	if player has latches:
		if treatise is off-stage:
			say "You fumble nervously with the latches before entering, and a treatise falls out. Maybe it will help you decide what to do with the latches, before you go out into the wide world without a scanning device to help you know where to use your power.";
			now player has treatise instead;
		say "[one of]You probably want to figure what those latches are for. What could they be hiding? You've done okay without them, but who knows how you'll react in pressure situations. Whatever they need to be, [gtmn] would've made it easier than what you've done so far[or]Those latches. Gotta be a trick to [']em, since [gtmn] had them sent to you[stopping]. Maybe it'd help to [if treatise is examined]re-[end if]read the teariest treatise." instead;
	if player has settler and settler is unexamined:
		if settler-x-nag is false:
			now settler-x-nag is true;
			say "You look at your settler and realize you didn't really [b]EXAMINE[r] it. Maybe you should, before going out in the world. You've been able to guess what to do so far, with the help of heuristics and generally knowing what's in a house, but you may need technical help you can rely on when you hit less friendly areas." instead;
	say "A brief mental lament as you leave gives way to fear of a sting-ops stop sign. But you miss...[paragraph break]'Hands up!'[paragraph break]You say 'grrr' and see red, then feel all yellow as you scream 'Eeeee!' Because it's not a joke. Some guy has a rifle! You drop your lamp, which shatters.[paragraph break]Seeing the rifle, you choke, 'O heck.' You notice the name on your captor's uniform is Elmo, which gives you some hope.";
	moot lamp;
	now Elmo is in Largely All Grey Gallery instead;

book Carven Cavern

Carven Cavern is an innie room in Ordeal Reload. "This is an oddly carved cavern. [if plates are in Carven Cavern and plaster is in Carven Cavern]Palest pastel plates sit on a plaster psalter[else if plates are in Carven Cavern]Palest pastel plates lie here[else if plaster is in Carven Cavern]The plaster psalter still remains[else]It's bare now you got rid of the psalter and plates[end if]. [if stapler is moot]The apertured departure is open now to wherever [b]IN[r] leads[else if departure is touchable]An apertured departure might lead somewhere if it were open further[else]It looks like there could be something behind the psalter[end if]. You probably don't want to go back outside, even if you found a way.". roomnud of carven cavern is table of carven cavern nudges.

outside-text of Carven Cavern is "[if departure is not in cavern]There's something behind the psalter[else if stapler is not moot]You can't go inside the departure until you open it further[else]BUG! You should just have entered the departure. Try going [b]IN[r]. instead[end if]."

exits-text of Carven Cavern is "[if departure is not in cavern]Nothing yet. You need to use your powers to reveal the exit[else if stapler is not moot]You can't fit through the departure yet[else]You can just go [b]IN[r] the departure to start your adventure in earnest[end if]."

after looking in Carven Cavern (this is the pronouns for cavern rule):
	if palest pastel plates are in Carven Cavern, set the pronoun them to palest pastel plates;
	if plaster psalter is in Carven Cavern, set the pronoun it to plaster psalter;
	if apertured departure is in Carven Cavern, set the pronoun it to apertured departure;
	continue the action;

check exiting in Carven Cavern:
	if stapler is moot:
		say "Exiting the cavern, entering [the departure], the same thing.";
		try going inside instead;
	say "Even if you can't see way to enter [the departure], it's got to be much safer to go in, not out, here." instead;

check going inside in Carven Cavern:
	if plaster is in Carven Cavern, say "There's nowhere to go in, yet." instead;
	if stapler is not moot:
		say "The [departure] isn't wide enough yet." instead;
	if respect specter is touchable:
		say "'I offer you much luck and respect in your journey. [if got-thru-respect is true]Thanks for listening. I am impressed your ethical standards were too high to take a bonus point[else]I am impressed you want to get on with things and not worry about silly trivia and points like, um, me[end if],' the Respect Specter calls, with a hint of sadness.[wfak]";
		process the post-specter-scepter rule;
		say "[line break]";
	say "You walk through [the departure]--and you've certainly departed! You wander through an obscure part of Old Warpy, the mysterious area of Yorpwald that connects distant and seemingly unrelated parts of Yorpwald. You hear a voice: 'You! Find! Unify! Do!' Is it [gtmn]? Perhaps it is. It's only when you totally lose your sense of direction that you see a way out. It's the Trips Strip, er, Strip of Profits. Which looks the same and different. You look at your treatise one last time--it can't help you any more, but you put it deep in your super purse for sentimental value, for later.";
	moot teariest treatise;
	solve-region Ordeal Reload;
	the rule succeeds;

chapter Respect Specter

the Respect Specter is a vanishing LLPish person in Carven Cavern. "[one of]You hear a rustle, then you see an apparition. 'Hi! I'm the Respect Specter. I appreciate what you did to defeat Red Bull Burdell, and I, um, was sent here to help you figure what to do with ambiguous settler readings. It might be pretty clear what to change me to, but what's really important is dealing with ambiguous readings. So you can [b]SCAN[r] me if you want. I'll sit in the corner and wait.'[or]The Respect Specter sits innocuously and respectfully in the corner, and you can [b]SCAN[r] it if you want, or figure what it can become or give you.[stopping]". description is "It's just hanging around, nondescript, not much to say except to help you."

a-text of respect specter is "RRYRRYR". b-text of respect specter is "?R?????". parse-text of respect specter is "?[sp]x[sp]?[sp]?[sp]?[sp]?[sp]?". respect specter is parse-spoilable.

got-thru-respect is a truth state that varies.

section Inducted Deductin

Inducted Deductin is a warpable boring thing. printed name is "Inducted Deductin[']". initial appearance is "(bug)". description is "Inducted Deductin['] has [number of deduction-pages in words] pages of brief examples. You can read them by saying X X1, X X2, X X3, X X4 and X X5. If you READ a page explicitly, you start over.[paragraph break]You can also [b]DROP[r] it if you feel you don't need it.". bore-check of Inducted Deductin is bore-deduct rule.

a deduction-page is a kind of thing. it is usually boring and cluey. bore-text of a deduction-page is usually "You can really only examine or read the Inducted Deductin['] pages to see their sample logic.". a deduction-page has a number called deduct-part. a deduction-page has a table name called logic-table. bore-check of a deduction-page is usually bore-deduct rule. description of a deduction-page is usually "BUG.".

this is the bore-deduct rule:
	if current action is dropping:
		say "Are you sure you wish to drop [deductin]? You should only do so if you fully understand what ambiguous cheat mode readings do, or you're worried that learning might spoil too many puzzles.";
		if the player regex-prompt-consents:
			say "Okay. It's gone now.";
			moot inducted deductin;
		say "Okay. The nag will appear if you try again, but you can still drop it." instead;

carry out examining a deduction-page:
	now noun is read-yet;
	if deduct-part of noun is 0:
		say "You read the first logical step. It looks like there are [logic-steps of noun in words] total.[paragraph break]";
	increment deduct-part of noun;
	if deduct-part of noun > logic-steps of noun:
		say "You go back to the top and begin rereading.[paragraph break]";
		now deduct-part of noun is 1;
	choose row (deduct-part of noun) in logic-table of noun;
	say "([deduct-part of noun]/[number of rows in logic-table of noun]) [cheat-clue entry][line break]";
	if deduct-part of noun is logic-steps of noun, say "[line break]Well, that's the end of that example.";
	the rule succeeds;

to decide which number is logic-steps of (dp - a deduction-page):
	decide on number of rows in logic-table of dp;

check reading a deduction-page:
	if deduct-part of noun < logic-steps of noun and deduct-part of noun > 0, say "You interrupt your reading and go to the top.[line break]";
	try examining the noun instead;

X1 is a deduction-page. it is part of Inducted Deductin. logic-table of X1 is table of X1 reasoning.

table of X1 reasoning
cheat-clue
"Example 1 gives the example of [b]APES[r]['] [b]APSE[r] and RYY?."
"The fourth letter of [b]APES[r]/[b]APSE[r] must be E or S, but it also must be a consonant, or the final word would have three consonants and one vowel. So it is S."
"Knowing slot 4 is S means slot 1, a consonant, is P."
"But then since slot 3 is yellow, it can't be E. That gives us [b]PEAS[r]."

X2 is a deduction-page. it is part of Inducted Deductin. logic-table of X2 is table of X2 reasoning.

table of X2 reasoning
cheat-clue
"Example 2 is [b]MERE MOOR[r] scanning to R?R?. It notes the two words aren't anagrams, but combined, they anagram [b]EMOR EMOR[r], twice."
"So the final word is an anagram of [b]EMOR[r]. Figuring the 'right' anagram from two different words that don't anagram each other requires a bit of counting. So what is the original word?"
"Since slots 1 and 3 are consonants, and the final word has two vowels and two consonants, so both slots 2 and 4 must be vowels."
"Slot 2 is ambiguous as it can be E or O, but slot 4 has to be E. So slot 2 is O."
"Slot 1 can't be M, so it is R. [b]ROME[r]. Note that this is a proper name, which should not show up except for optional points."

X3 is a deduction-page. it is part of Inducted Deductin. logic-table of X3 is table of X3 reasoning.

table of X3 reasoning
cheat-clue
"Example 3 is of the [b]SACRED CEDARS[r] you visited on your trip to Yorpwald, and if, hypothetically, it scanned six question marks. Which seems completely unhelpful. But it is not!"
"Each ambiguous reading has two possibilities, giving [b]SC[r]/[b]AE[r]/[b]CD[r]/[b]RA[r]/[b]ER[r]/[b]DS[r]."
"Here is where there is relatively focused guesswork. S, C and D form a loop, as do A, R and E. There are four possibilities total."
"[b]SACRED[r], [b]SECARD[r]. [b]CADRES[r], [b]CEDRAS[r]."
"Since [b]SACRED[r] is part of the original phrase, you can eliminate it. Two of the possibilities are, in fact, proper names, but [b]CADRES[r] is the only one that's a word."

X4 is a deduction-page. it is part of Inducted Deductin. logic-table of X4 is table of X4 reasoning.

table of X4 reasoning
cheat-clue
"Example 4 is of a three-word thing object called a [b]LOTS-O-LOOTS STOOL[r]. In this case, the three groupings of five letters may make question marks more ambiguous, but non-question marks may be clearer."
"If the reading you get is R??R?, you may be discouraged to see slot 5 can be O, S and L. Slot 2 and 3 can be O or T, making slot 5 a consonant, but since there are two O's, you could have OO to make slot 5 a vowel."
"However, you may notice slot 1 is forced to be T, since it's a consonant and not L or S."
"Similarly, slot 4 must be L."
"That leaves OO for slots 2 and 3, and slot 5 is S. [b]TOOLS[r] is the answer."
"This case is here to remind you that sometimes question-marked clues will lead the way, but other times, solid colors on the settler will. Especially for longer words, it's worth writing your logic out."

X5 is a deduction-page. it is part of Inducted Deductin. logic-table of X5 is table of X5 reasoning.

table of X5 reasoning
cheat-clue
"Example 5 is an [b]ESPRIT STRIPE[r]. The clue is ?R??R?."
"Believe it or not, things falls into place quickly if you use some logic-puzzle tricks."
"The first letter is E/S, the second P/R, the third P/R, the fourth I/R, the fifth R/S/T, and the sixth is E/T."
"The fourth letter is the only one that doesn't eliminate I. Now there are two possibilities for letters 2/3 (P or R) and two for 1/5/6 (E/S, S/T and E/T)." [bold-ok]
"That makes a total of four, and you can probably guess which of [b]SPRITE[r], [b]EPRIST[r], [b]ERPIST[r], and [b]SRPITE[r] is an actual word."
"But you also may be aided by red writing that indicates all letters are wrong. In this case, if [b]PRIEST[r] were written on the stripe in red, it would help you eliminate three options."
"Maybe it's a can of Sprite, a pixel or a spirit. Either way, you have the answer: [b]SPRITE[r]. One more note, though."
"At some point, though, strict logic isn't quite enough. Common sense may eliminate answers with too many consonants in a row, and certain combinations of letters can be removed. It's also possible to use trial-and-error zebra-puzzle logic on many longer words."

chapter plaster psalter

a plaster psalter is scenery in Carven Cavern. "It looks sturdy enough, but out of place[if plates are touchable]. Some plates lie on top of it[end if]. Maybe you can make it into something more useful."

check taking plaster:
	say "It's stuck to the floor. What would you do with it, anyway?" instead;

a-text of plaster psalter is "RRYRRYR". b-text of plaster psalter is "RRGRRGP". parse-text of plaster psalter is "x[sp]x[sp]A[sp]x[sp]x[sp]E[sp]R". plaster psalter is parse-spoilable.

chapter stapler

the stapler is a container. description of stapler is "[if stapler contains staple]Locked and loaded with a staple[else]Empty, but given its width, ready for some heavy-duty ammo[end if].". "An oddly wide metal stapler lies here. The normal material would nearly get lost in it."

check examining stapler: ignore the examine containers rule;

check closing stapler: say "No need to futz. [if staple is in stapler]You already have something in there[else]When you put something in the stapler, it'll be good[end if]." instead;

check opening stapler:
	if staple is in stapler, say "You don't need to. The staple belongs in there, to be stapled against the sorts of things that find themselves getting stapled." instead;
	if player has staple:
		say "I'm going to assume you mean opening the stapler to put the staple in.";
		try inserting staple into stapler instead;
	say "You don't have anything to put in the stapler." instead;

check inserting into stapler: if noun is not staple, say "Only one thing goes in a stapler." instead;

after inserting staple into stapler:
	say "The staple fits in with minimal fuss.";
	the rule succeeds;

chapter apertured departure

the apertured departure is boring scenery. description of the apertured departure is "The apertured departure is currently [if stapler is not moot]not [end if]wide enough to enter[if stapler is moot]. It's lined, like a sheet of notebook paper (one red vertical line, many blue horizontal, holes on the side,) and you probably can't pry it open with your bare hands[end if].". bore-text is "[if stapler is moot]You've opened [the apertured] fully. Nothing special to do[else]The [apertured] needs a specific action here to pull it aside. Perhaps special materials are required[end if].". bore-check is bore-departure rule.

understand "aperture" as apertured departure.

this is the bore-departure rule:
	if current action is touching, try going inside instead;
	if current action is opening or current action is pulling or current action is taking, say "[could-staple]." instead;
	if current action is stapleing, now boring-exception is true;

to say could-staple: say "[if stapler is moot]You can just enter [the departure][else if player carries stapler]Maybe you could use the stapler to [b]STAPLE[r] [the departure][stapload][else]There must be something to do to [the departure][end if]";

to say stapload: say ", [if staple is in stapler]especially since[else]once[end if] it's loaded";

chapter pastel plates

the palest pastel plates are plural-named scenery in Carven Cavern. description of plates is "They're...a bit squarish. Odd. And they're cracked and useless and appear to be squarish, but each has metallic trim around its edge and even some red writing[if plaster is in Carven Cavern]. The plates seem like they belong with the plaster[end if].".

check taking plates: say "[if plaster is touchable]The plates are wedged in, as if they belonged there. Sort of[else]They are too broken and bulky to be of much use[end if]." instead;

a-text of palest pastel plates is "RRYRRY". b-text of palest pastel plates is "RR?RRY". parse-text of palest pastel plates is "x[sp]x[sp]-[sp]x[sp]x[sp]-".

chapter staple

the staple is a thing. description is "It looks unbent (well, beyond the two bends all staples have) and usable. It's the biggest staple you've seen by a long shot."

understand "staples" as staple.

check taking staple: if staple is in stapler, say "It belongs in the stapler." instead;

chapter stapleing

stapleing is an action applying to one thing.

understand the command "staple [something]" as something new.

understand "staple [something]" as stapleing.

does the player mean stapleing the apertured departure: it is very likely.

rule for supplying a missing noun when stapleing: if apertured departure is touchable, now noun is apertured departure.

carry out stapleing:
	if player does not have stapler, say "You need something to staple with." instead;
	if staple is not touchable, say "You can't staple with that stapler until you have a staple." instead;
	if stapler is not in staple and player has staple:
		say "(Putting the staple in the stapler first)";
		try inserting staple into stapler;
		if staple is not in stapler, say "[reject]" instead;
	if noun is treatise, say "It's only one piece of paper. It doesn't need stapling." instead;
	If noun is the player, say "I can't imagine where you want to staple yourself, and I don't want to know." instead;
	if noun is not apertured departure, say "That doesn't need stapling." instead;
	say "You staple [the departure]. The staple is the right strength to cut in all the layers, grab them at once, and peel them back. As it does so, the center of [the departure] opens up until it's wide enough to enter. However, it also pulls the by-now-useless stapler in with it. You can't repaper, but [if latches are touchable]with those latches, you may[else]you won't[end if] need to prepare to go [b]in[r] to further adventure!";
	moot staple;
	moot stapler;
	reg-inc;
	the rule succeeds;

turns-wasted is a number that varies.

high-sign is a truth state that varies.

every turn when Elmo is touchable and Elmo has rifle (this is the sign-imminent rule):
	increment turns-wasted;
	if turns-wasted > 4:
		if high-sign is false:
			say "You hear a sigh nigh. It looks like a high sign from Elmo!";
			now high-sign is true;
			now high sign is in Largely All Grey Gallery;
		else:
			say "Elmo is flashing some sort of high sign. Bold cue? Could be.";
	else:
		say "Elmo listlessly [one of]mutters 'a rifle re-fail.'[or]sings 'He's got a hostage.'[in random order]";

check going outside in Carven Cavern:
	say "There's no way back, and you wouldn't want to go back." instead;

chapter Mole Elmo

Mole Elmo is a person. description is "He is waving that rifle you probably need to neutralize. Yet you can't tell if his expression says wry, or worry.". "[if do-i-chat is true]Mole Elmo's rifle changes to a flier[else]Mole Elmo looks at you, then the rifle, half as if he wants you to do something with it[hi-sign][end if].".

Mole Elmo holds the rifle. description of rifle is "It's probably loaded with a bullet with your name on it. But you don't want to find out. You think you can read writing on it, if you look closely.". bore-text of rifle is "You're not in a position to do anything physical with the rifle. Maybe it can become something.". bore-check of rifle is bore-rifle rule. the rifle is vanishing.

understand "gun" as rifle.

after doing something with rifle:
	if the player's command includes "gun", say "It's a rifle, not a gun. This may or may not help.";
	continue the action;

check fliptoing when rifle is touchable and player is in Largely All Grey Gallery:
	if noun is not rifle, say "Any distraction, and Elmo might fire. Unless, of course, you can change the rifle itself." instead;

this is the bore-rifle rule:
	if the current action is taking, say "Not even if you were an action hero." instead;

a-text of rifle is "RRYYR". b-text of rifle is "RRYYR". parse-text of rifle is "[bug-report]". rifle is parse-spoilable.

selftalk-warn is a truth state that varies.

check talking to Gretta:
	if parleys splayer players are touchable, say "The [players] are monopolizing the conversation. Maybe you should get rid of them." instead;

check talking to a person:
	if litany of noun is table of no conversation:
		if selftalk-warn is false:
			ital-say "[b]ASK[i] ([b]PERSON[i]) [b]ABOUT[i] ([b]PERSON[i]/[b]THING[i]) or [b]A[i] ([b]THING[i]) is what [this-game] uses for detailed conversation. However, [b]TALK[i] is a shortcut to asking an NPC about themselves, which often has clues.";
			pad-rec "talking";
			now selftalk-warn is true;
		try objasking noun about noun instead;
	now qbc_litany is litany of noun;
	display the QBC options;

check talking to:
	if noun is not terse:
		repeat through unmatched topic responses table of mrlp:
			if noun is askee entry and there is a dialogue-text entry, say "[dialogue-text entry][line break]" instead;
	if noun is yourself, say "You give an elfish 'Hi, self.' You discuss how maybe the game needs better developed NPCs, or maybe they just need to give more hints." instead;
	if noun is not brr hub, say "You can only talk to animate objects. This isn't one, or the game (mistakenly or otherwise) doesn't think it's one." instead;

check talking to Mole Elmo (this is the can't talk while Elmo has the rifle rule) : if rifle is not moot, say "'Hostages['] hot gases!' Elmo booms, waving his rifle." instead;

to say hi-sign: if high-sign is true, say ", even flashing a high sign";

the high sign is boring scenery. description of the high sign is "Elmo appears to be flashing the numbers 3, 4, 2, 5 and 1 in order with his fingers. Then a pause, then he tries it again[one of]. Hm, nothing here five letters except that rifle[or][cycling].". bore-text is "Not much to do but look."

check scaning when rifle is touchable: say "Elmo might shoot you if you went for the settler, which you notice is blinking [spacies of a-text of rifle]. Which has to be the rifle. You hope." instead;

section elmo dialogue

the litany of Mole Elmo is the table of Elmo comments.

table of Elmo comments [tco-mo]
prompt	response	enabled
"Ask Elmo about how to use your Settler, because you're not sure yet."	flier-quip	1
"Show Elmo the sweet Settler you know how to use."	showset-quip	1
"Check the scale that can flip to laces and back."	scale-quip	0
"Check the [b]ELMO[r] nametag that could show him up as a mole."	elmomole-quip	0
"Check the [b]PLUG[r] of nutrients that could become a [b]GULP[r] bottle."	gulp-quip	0
"Recall the tables/stable flip."	stable-quip	0
"Recall the my niche/chimney flip."	chimney-quip	0
"Recall the ten beams/basement flip."	basement-quip	0
"Recall the pram/ramp flip."	ramp-quip	0
"Recall the giant pin/painting flip."	painting-quip	0
"Recall the stair flip."	stair-quip	0
"Recall everything you tried with the diorama."	dio-quip	0
"Look through all the diorama data."	dio-2-quip	0
"Oh, cool, I know what the reds and yellows are for, now."	got-red-yellow-quip	0
"Geez. I'm still busted. Kinda shaken by...well, the excitement."	still-busted-quip	0
"Ask Elmo about the lamp"	lamp-quip	0
"Explain you know what the colors besides red and yellow mean, and you're wondering what to DO."	gp-quip	0
"Ask Elmo about the 'Letters Settler' text."	settler-quip	0
"Ask Elmo about the 'Yorpwald-Wordplay' text on the laced decal."	yorp-quip	0
"Scan everything about the diorama."	dio-elm-2-quip	0
"Yeah, I see what orange means."	orange-know-quip	0
"Hmm, I don't see what orange means."	orange-dunno-quip	0
"Oh, hey. The satchel. Maybe I could scan it for some data!"	satchel-quip	0
"Hm, still not clear on the green/purple."	still-no-gp-quip	0
"Tell Elmo you got what the cheat button does, thanks!"	got-it-quip	0
"[unless y-orange is true]Hm, I even see what orange is for. [end if]Got some reinvestigator interrogatives, hustle-sleuth."	interr-quip	0
"Ask Elmo about her toy theory"	toy-theory-quip	0
"Ask Elmo about your trial trail"	trial-trail-quip	0
"Strip of Profits? Was that the Trips Strip? What's at the...?"	trips-quip	0
"Strategy-try stage? Get artsy?"	artsy-quip	0
"Poss. Clue? Closeups?"	clues-quip	0
"Gretta Garett-Tatger?"	gretta-quip	0
"Jumbo, um, job. Six of [']em? Some fix!"	shortcut-quip	0
"Ask Elmo about new stores in the Strip of Profits"	strip-quip	0
"Complain about the weather [bracket]NOTE: complaining, or listening to Elmo complain, is possibly therapeutic, but utterly unproductive[close bracket]"	weather-quip	0
"Complain about your favorite sports team"	sports-quip	0
"Complain about the media"	media-quip	0
"Complain about the media some more"	media-quip-2	0
"Complain about how more exciting people and stories pushed you to the curb"	curb-quip	0
"Complain about social forces in general"	social-quip	0
"Let Elmo complain about his lack of success with women"	girls-quip	0
"Finish Fishin[']."	bye-Elmo-quip	1

table of quip texts (continued) [tqt-mo]
quip	quiptext
curb-quip	"'It's not your fault you didn't have a super perfect story when you rescued Yorpwald. That's the fault of -- someone above -- if they even exist. Maybe if you fix what's wrong here, it'll be a more compelling story and pontificators won't turn against you. Or get bored.' Elmo turns to the fourth wall. 'Or have an excuse to pretend they're bored.'" [start ELMO text]
interr-quip	"'The Strip of Profits is--well, it's tied up with Old Warpy again. You know, how Old Warpy sent you to the forest and metros and sortie? Yeah, there's people buying stuff from the stores, but they're so occupied, they won't notice YOU! Still, you've got a trial trail ahead. Elvira's got her toy theory started. About you being bad for Yorpwald.'"
toy-theory-quip	"You've sort of heard it, and you've sort of thought it, but yeah. She really did backhand-compliment you (not bad for boring old mathy stuff, but you did the job, she guessed) while saying people needed someone more exciting to mythologize about.[wfak][paragraph break]Like, gosh, HER! 'Her united con continued unnoticed. But it's too perfect. Tough to--ugh. Something messes up, she denounces it right away. SHATTER-THREATS is so specific to you, too. That's why I don't like it.'[paragraph break]'There's evidence you might possibly be behind the influx of annoying anagrams. But then, she might be trolling us by framing you. That's an...other-y theory, eh, tyro?'"
strip-quip	"'Yeah, lots to explore. But I bet observing and talking to people will help. About themselves or Elvira. You'll get clues how to deal with them, even if they don't want to help. There also may be some--illegal types around stores K and N. You don't need them, but they can't hurt. There's others towards the end of the alphabet. New places that might have clues.'"
clues-quip	"'Examine everything. People and things blocking you. Try to get by them. Just plain listen, or smell. Dialogues also guide. Oh, and if you can find Gretta Garett-Tatger, bonus.'"
gretta-quip	"'She's a good investigative reporter, the best. She's dug further into Elvira's doings than anyone else. But she's become a bit of a--target.' You both cringe. 'No, her name's not your fault. Just, she may have found something, even left a cue in the Strip of Profits.' Elmo shows you a picture of her."
trial-trail-quip	"'More trouble, more stores. Six of [']em. But you can't just switch stuff to other stuff. That'd be more hokey and homeworky. You'll have to infer finer things to upset the setup. But I have some basic notes.' Elmo hands you a paper. 'It's a Gird Grid. More details there. Read it later.'"
shortcut-quip	"'Hm, maybe a covert vector after you solve two...'[paragraph break]Elmo pauses. 'Oh, hey, if you want to complain about random stuff, go ahead. It might not give any practical help, but I don't mind listening. I've thrown a lot at you.'"
flier-quip	"'Hmm. Well, my last name's not Stetler, but I can give it a shot.' You and Elmo scan the flier, which is [if setspace is true]R Y R R Y[else]RYRRY[end if] with cheat or teach mode. 'I saw your settler was [if setspace is true]R R Y Y R[else]RRYYR[end if] when I had the rifle.' Elmo speed-reads your treatise. 'So the colors tell you what stuff should become. That gives us five letters.'[paragraph break]'I and E are yellow for the rifle AND the flier, and R and F and L are red. Hm. Dunno if that's enough. I have some other supplies [gtmn] gave me.' You note a [b]PLUG[r] of nutrients, laces, and an [b]ELMO[r] nametag." [check what's scanned]
scale-quip	"You experiment with changing the laces to a scale and back. Laces to scale is [if setspace is true]R Y R R Y[else]RYRRY[end if], scale to laces is [if setspace is true]R Y R Y R[else]RYRYR[end if]. [mo-data]."
gulp-quip	"The plug becomes a gulp, then back to a plug, no more unappetizing than before. You note plug to gulp is [if setspace is true]R Y R R[else]RYRR[end if], gulp to plug is [if setspace is true]R R Y R[else]RRYR[end if], and cheat mode changes nothing. [mo-data]."
elmomole-quip	"You flip the nametag to [b]MOLE[r] and back, tracking the scanner. Elmo to Mole is [if setspace is true]R Y R Y[else]RYRY[end if], Mole to Elmo is [if setspace is true]Y R R Y[else]YRRY[end if]. [mo-data]."
got-red-yellow-quip	"'Yyupp. Vowels. But we haven't found anything where the cheat button actually does anything.' You try and think of something where it might."
still-busted-quip	"You shake your head. 'Duh, I'm humid. Uh, dim.'[paragraph break]'A, e, i, o, u,' Elmo points out. 'Vowels.'[paragraph break]'Maybe other letters too...nah, too many consonants go to red. Yeah. Vowels and consonants.' You figure the cheat button might be a good idea to learn for the future. Might be a good idea to start small. Like--with the lamp."
showset-quip	"'Hint agent thing! Neat!' You show him what the red and yellow mean, then the green and purple. He asks if there are any other colors, like orange."
lamp-quip	"'Yeah, sorry about the lamp.' You say no worries--you're trying to figure what it means. Elmo doesn't judge. 'Yeah, you been under stress, I bet, let's work it out.' The settler vaguely goes red, yellow/green, red and red near the fragments. 'Hm, cheat mode changes A from yellow to green. That must mean something.'"
gp-quip	"'Awesome! Yeah, cheating adds blue to the reds and yellows if the letters are right. To purple and green[if y-orange is false]. Any other colors? Hm, on the back of the settler, YORPWALD's D is orange, and WORDPLAY's W is, too[end if].'"
settler-quip	"'LETTERS SETTLER. Hm, the E-T-T change color when you switch cheat mode on. Maybe that's because they are in the right places. Yellow e to green, red t to purple. Not clear if it's e and t specifically that change, though.'"
yorp-quip	"'Hm, [if chimney-quip is mowered]more orange letters to Y[else]the D in Yorpwald and W in Wordplay are orange. Or maybe it's what the letters can become. Orange, we haven't seen much of that[end if]. Also, interesting, the O-R change colors when you go cheat mode. Looks like they're already in the right place.'[paragraph break]'Gotcha, doc. Good catch.'"
stable-quip	"You remember cheat mode did not change the tables when you scanned them before entering the stable--there was a lot of red writing, too, which your pedanto-notepad says was wrong letters. But there were some yellows, too. They were probably wrong, but a different sort of wrong."
basement-quip	"You remember cheat mode did not change the ten beams when you scanned them before entering the basement. There were the same reds and yellows."
chimney-quip	"You remember cheat mode did not change the 'my niche' text when you scanned it before entering the chimney--[b]MY NICHE[r] was in red writing, which your pedanto-notepad says was wrong letters. But there were some yellows, too. And an orange. You suddenly realize the orange mapped to Y[y-know]."
ramp-quip	"You recall red, yellow, red, red for the ramp, cheat or no."
painting-quip	"You recall R Y Y R R Y R R for non-cheat mode, with the center two going purple in cheat mode. Figuring why only those two go purple would be big."
stair-quip	"You recall R R Y Y R with one tile changing color with cheat mode. But it is probably best to focus on non-cheat mode."
dio-quip	"You consult the pedanto-notepad, and Elmo looks at your diorama notes.[paragraph break][dior-scan]That's a lot to take in! But you suspect it will help."
dio-elm-2-quip	"With everything scanned now, you take a closer look.[paragraph break][dior-scan][paragraph break]You focus on the rare greens and purples. Elmo coughs, as if cuing you to something--how the greens and purples are in the same position between flipped diorama parts."
dio-2-quip	"You hash the purples and greens out some more.[paragraph break]You focus on the rare greens and purples. Crabgrass and brass crag, letters two and three. Pedestal and steel pad, letters four and seven. You think on what is special about these, in both words."
satchel-quip	"'Ach, let's...' you say. You scan the satchel both ways and notice the two end characters are red, but the rest switch from red and yellow to purple and green on cheat mode. That's the most purple and green you've seen yet."
still-no-gp-quip	"Elmo notes that individual letters can be either red-or-purple or yellow-or-green. All green letters in cheat mode were yellow in non-cheat, and the same for purple to red. Then the ones that are purple/green--are in the right place.[paragraph break]Elmo thinks a minute and notes red plus blue is purple, and yellow plus blue is green."
got-it-quip	"'Excellent! So, yeah, the settler adds blues when you're in cheat mode and the letters are right. Purple consonants, green vowels.'[if y-orange is false] Elmo looks over your settler once more. 'Hmm. What's the orange for? On Yorpwald/wordplay?'[else] You and Elmo note orange is for Y's, and you suspect correct oranges become brown or something.[end if]"
orange-know-quip	"You've got this one--Yorpwald, wordplay, the orange D at the end goes to Y, the orange W at the start to Y, too[y-know]."
orange-dunno-quip	"You [if backside is examined]re-[end if]examine the backside of the settler and note how Yorpwald lines up with Wordplay--those two orange letters stand out a bit. Then you both realize both orange letters go to a Y that's not in the right place[y-know]."
bye-Elmo-quip	"[if hold-it-up is false][note-gretta]A pause. 'Go, you doer. You're good. Un-retire, reuniter. Re-shift it fresh. Disable bad lies. There's an evac-cave over thataway. You'll know what to do. I think. Forsake fears, ok?'[paragraph break][gridchek]You leave, feeling less resave-averse, but run as you hear 'Get Elmo!' / 'Get ol['] me? Let me go!' 'Sympathy?' / 'My hat, spy!' ... 'A spy yaps, pays...'[paragraph break]You crawl through the evac-cave, which exits to writing behind a dune, man. UNNAMED: MUNDANE, but you look closer and see RETRAIN TERRAIN in a font that feels rantier. Behind is a Carven Cavern. It looks as good a place as any to visit.[end if]" [end ELMO text] [bold-ok]

section extra quip checks

to say gridchek:
	say "Elmo [if player does not have gird grid]hands you an additional note--a Gird Grid--to help you on your way. He also [end if]notes it's worth reading red writing and trying to get by enemies in your way, even if they're too big. You'll see clues.[line break]";
	pad-rec-q "methods";
	now player has gird grid;

to say mo-data:	say "[one of]More data[or]Even more data[or]Ok, you've got a whole body of data, now[stopping]";

last-yays is a number that varies.

chapter Gird Grid

the Gird Grid is a warpable thing. description is "The Gird Grid [one of]is the real thing--endorsed by Dr. Ridrig! It [or][stopping]is divided 2x3, into sections labeled, not quite in alphabetical order, U(1), V(2), P(3), Y(4), W(5) and T(6).[paragraph break]It's tricky enough to look at, you can't just [b]X[r] it to examine. You need to [b]XG[r], along with the part of the grid you want to examine!"

after printing the name of gird grid when gird grid is examined:
	say " (X 1 through X 6 to read quickly)";

section xging

xging is an action applying to one topic.

understand the command "xg" as something new.

understand "xg [text]" as xging when player has gird grid.

grid-x is a number that varies.

carry out xging:
	let got-any be false;
	repeat through table of gird grid topics:
		if the topic understood matches the grid-topic entry:
			say "[reg-blurb entry][line break]";
			now got-any is true;
			if there is a reg-match entry:
				if reg-match entry is solved or reg-match entry is bypassed, say "You're pretty sure you don't need to deal with the [reg-match entry], any more. Still, you re-read the description and take time to feel [if reg-match entry is bypassed]relieved you didn't have to deal with that[else]pleased with what you fixed[end if]." instead;
			if there is a reg-match entry and mrlp is reg-match entry, say "[line break][if cur-score of mrlp is 0]Hm. Maybe you'll figure out what to do, and how[else]Hm. The hints make a bit more sense, now[end if].";
			if x-yet entry is false:
				now x-yet entry is true;
				increment grid-x;
				if grid-x is 6:
					say "You outline the places to visit in your notepad.";
					pad-rec-q "progress";
			now gird grid is examined;
			continue the action;
	say "You need to chose 1-6, or one of PTUVWY. Case insensitive." instead;
	the rule succeeds;

table of gird grid topics
grid-topic (topic)	x-yet	reg-match	reg-blurb
"1/u"	false	routes	"The Poison Stripe surrounding the Same Mesa has caused people there to lose all sense of direction, physically and mentally. If one person could escape, that would change. The Oopsin['] Priest may be able to help you."
"2/v"	false	troves	"Spoiloplis was founded on self-help books, pyramid schemes, and other shady industries. Mayor Irv Lea lauds it as a center of positive thought. And not the nerdy brainy thought that goes into anagrams. You probably can't meet him, but maybe you can upset the social order."
"3/p"	false	presto	"There is rumor of a Hacks['] Shack immune to Elvira's SHATTER-THREATS legislation behind a near-nonsensical maze that may have you saying or thinking impolite words. In that Hacks['] Shack, you may feel a sense of normality that gets you back to how things were before Elvira."
"4/y"	false	oyster	"A seashore seahorse mentioned subsea abuses you need freaky fakery to avoid. Something about a hideout, and a gang called DIE THOU. Vigorous action is necessary, and a lot of it."
"5/w"	false	towers	"The Wildest Wilteds are not to be traversed lightly. People protecting their territory just because. Bandits sacking taverns for no reason. The Curst Palace lies there, at the other side of Leak Lake. Condemned to be torn down to make a new MoneyCo office. Tax-free and all. Oh, and luxury condos endorsed by Avrile, that lifestyle maven. But if you could restore the palace somehow..."
"6/t"	false	otters	"Little is known about the region beyond Store T except that an Or-Not-O-Tron dissuades people from paying it much attention. It must be important!"
"0"	--	--	"You'd guess area zero would be the ordeal reload in your Means Manse."
"7"	--	--	"You vaguely dread a seventh[area-but]!"
"8"	--	--	"You vaguely dread an eighth area[area-but]!"
"9"	--	--	"You vaguely dread a ninth area[area-but]!"
"f"	--	--	"You daydream back to solving Store F. Salad days!"
"i"	--	--	"You daydream back to solving Store I. Salad days!"
"m"	--	--	"You daydream back to solving Store M. Salad days!"
"r"	--	--	"You daydream back to solving Store R and defeating Red Bull Burdell. Salad days!"

to say area-but: say " area, as if there isn't enough already. But on the other hand, it would be nice to have assurance you'd survive all the way thereZ"

book Farming Framing

Farming Framing is an innie sideroom in Ordeal Reload. It is stairy. "Well, this was supposed to be a stable, but it never got fully built. You never actually used this stable to, say, let a foal named Olaf loaf. But you always meant to[if stair is touchable]. The stair you made leads [b]DOWN[r][end if][if tables are moot]. You can go back [b]IN[r] to the Dusty Study[note-study-out][end if].". roomnud of farming framing is table of farming framing nudges. missed-text of Farming Framing is "a room behind the tables in Dusty Study".

to say note-study-out: if sitar is not moot, say " or, since that's the only exit, [b]OUT[r] works, too"

understand "stable" as Framing Farming when tables are moot or framing farming is visited.

the sitar is a vanishing thing in Farming Framing. "A sitar, from your kitschy phase, sits here[one of]. You were wondering where it went[or][stopping]."

a-text of sitar is "RRYYR". b-text of sitar is "PRYYP". parse-text of sitar is "UNIQUE". sitar is parse-spoilable.

description of sitar is "It possesses a one-is-many-ness about it that can lead you to dizzying heights of thought...or sink you down low. You can read it to find its previous owner."

backcheck is a truth state that varies.

check going outside in Farming Framing:
	if backcheck is true:
		now backcheck is false;
		say "You don't really need to go back to Dusty Study unless you're unsure of how your powers work[if latches are not moot]. You haven't figured what to do with the latches, and maybe their 'right' form will give you clues[end if]. Plus, the sitar [if sitar is touchable]has an odd thereness about it[else]became a nice stair to the basement[end if].[paragraph break]Still, go back to the study anyway?";
		if the player regex-prompt-consents, continue the action;
		say "Okay, onward." instead;

check going inside in Dusty Study: if tables are in Dusty Study, say "Hm, maybe those tables on the wall provide a clue where 'in' leads[if Dusty Study is not lit], or they would, if you could see them[end if]." instead;

chapter girding ridging

the girding ridging is bounding boring scenery in Farming Framing. description of the girding ridging is "It blocks your way out, but on the other hand, it blocks a mob's way in, which is more important right now.". bore-text is "The girding ridging is probably holding people back from entering. You don't need to do anything. You need a hidden escape[if Largely All Grey Gallery is visited], like in the gallery below[end if]."

book Highest Heights

Highest Heights is an innie sideroom in Ordeal Reload. "Well, you're in the top room of the Means Manse, here. The floor is, of course, divided in eighths, set high, with niches up to several inches. The patented closest closets lead back down the chimney again[if ramp is touchable], and the ramp you made slopes down[end if].". roomnud of highest heights is table of highest heights nudges. missed-text of Highest Heights is "a room above the Dusty Study via [if my niche is moot]the chimney[else][b]MY NICHE[r][end if]".

study-closeted is a truth state that varies.

definition: a room (called rm) is uncloseted:
	if rm is unvisited, yes;
	if rm is dusty study and study-closeted is false, yes;
	no;

after going when heights are visited and Strip of Profits is unvisited:
	if location of player is uncloseted: [and location of player is not heights]
		say "You recall [one of]a[or]another[or]yet another[stopping] passage twisting in the closest closets.";
		move closets backdrop to all visited rooms;
		if location of player is dusty study, now study-closeted is true;
	continue the action;

the closest closets are a backdrop. drop-region of closest closets is Ordeal Reload. "You can't quite see where they are going. They are weird to look inside. St. Cole's designed them meticulously. But they probably lead back to the [if player is in Dusty Study]Highest Heights[else]Dusty Study[end if]."

understand "closet" as closets.

check taking closets: try entering closets instead;

the closest closets are in Highest Heights.

check entering closets:
	move closets backdrop to all visited rooms;
	if player is in Dusty Study:
		say "The closets sure are faster than climbing the chimney.";
		now player is in Highest Heights instead;
	if player is in Highest Heights:
		say "You go back down to the closets[if ramp is touchable], not ready for the ramp yet[else], not able to figure the pram yet[end if].";
	else if player is in Largely All Grey Gallery:
		if backcheck is false:
			now backcheck is true;
			say "You shouldn't need to go back to your study unless you want to get more points. Do you want or need to do this?";
			if the player regex-prompt-consents:
				now gallery-been is true;
				say "[if meet bans are in Dusty Study]You go back through the closets to your study[else]Woo! You save the effort of climbing up stairs[end if].";
				now player is in Dusty Study instead;
			else:
				say "Ok, probably best to find a way out." instead;
	else if player is in Farming Framing:
		say "[if tables are in Dusty Study]You go back through the closets to your study[else]Woo! You save the effort of walking through where the tables are[end if].";
	now player is in Dusty Study instead;

the pram is a thing in Highest Heights. "A pram lies here, one of those stupid gifts you never got to use."

a-text of pram is "RYRR". b-text of pram is "RYRR". parse-text of pram is "x[sp]A[sp]x[sp]x". pram is any-spoilable.

check taking the pram: say "It'd be hard to carry any reasonable distance." instead;

description of pram is "It was a painfully obvious hint of a gift from someone very well-meaning. But it seemed pretty useless, what with all the stairs in the rest of the manner you had to go up and down. [painful-memory]"

to say painful-memory:
	say "[one of]You see red at a further painful memory. Relive it?[or]Re-relive the painful memory associated with it?[stopping]";
	if the player regex-prompt-consents:
		say "[one of]The person who gave it to you said it would help you [if player is female]meet[else]feel like[end if] Mr. Pa. You see red as you cringe at the memory.[or]The memory of encouragement to [if player is female]meet[else]be[end if] Mr. Pa still makes you see red after all this time.[stopping][run paragraph on]";
	else:
		say "Yeah, you probably don't need to, to figure what to do with the pram.[no line break]";

the ramp is scenery. "The ramp slopes down, not too sharply."

check taking ramp:
	say "To take the ramp in the going somewhere sense, go [b]DOWN[r]." instead;

check going down in Highest Heights:
	if ramp is not touchable, try entering closets instead;
	say "You slide down the ramp--into the basement you [if meet bans are not in Dusty Study]uncovered another, easier way to get to[else]nearly forgot you had[end if].";
	now player is in Largely All Grey Gallery instead;

check going inside in Highest Heights: try entering closets instead;

volume stores

after choosing notable locale objects when player is in Strip of Profits:
	if store h is in Strip of Profits, set the locale priority of store h to 0;
	if throes hoster is in Strip of Profits, set the locale priority of hoster to 0;
	if solid idols are in Strip of Profits, set the locale priority of solid idols to 10;
	if tokers are in Strip of Profits, set the locale priority of tokers to 1;
	if tokers are in Strip of Profits and nestor is in Strip of Profits, set the locale priority of nestor to 0;
	continue the action;

book definitions

to decide whether (myp - a thing) is nonpost: [nonpost is short for "a portal, but not to store h"]
	if myp is not a portal, decide no;
	if myp is Throes Hoster, decide no;
	if myp is in Strip of Profits, decide yes;
	decide no;

definition: a sto is game-critical:
	if it is not in Strip of Profits, no;
	if it is not flippable, no;
	if it is bedruggled, no;
	if it is Store H, no;
	if it is Store B, no;
	yes;

definition: a sto is supporting: [ie need to win before entering store T. K/N don't count]
	if it is Store T, no;
	if it is Store H, no;
	if it is Store B, no;
	if it is bedruggled, no;
	if it is game-critical, yes;
	no;

book what is a sto

does the player mean scaning a sto: it is very likely;

a sto is a kind of thing. a sto is usually undescribed. a sto is usually fixed in place. description of a sto is "This is some posh shop or other. But it has been integrated into the whole strip. It can't lead anywhere interesting. It's greyed out, like an area in a video game you can't get to."

a sto is usually proper-named.

a sto can be bedruggled. a sto is usually not bedruggled. [K and N are bedruggled]

specification of sto is "Something that may or may not change into a portal."

cur-hint-sto is a sto that varies. cur-hint-sto is usually Store U.

the plural of sto is stos.

check entering a sto:
	if noun is store b, say "You [if store b is reflexive]need to say what you want a free sample of[else]already got your free sample[end if]." instead;
	if noun is store c, say "You'd have to show ID. Then they'd know who you were. Then Elvira would have you arrested. Plus, ew." instead;
	if noun is store h, say "[if roved is true]You need to figure how to convert Store H into something different[else]Store H looks so wild and confusing, you're disoriented when approaching it. Maybe take care of Elvira first[end if]." instead;
	if noun is store k or noun is store n, say "That looks distinctly too seedy. It actually does need to be demolished, somehow." instead;
	if noun is useless, say "There's nothing you'd want in that store, even if you were shopping." instead;
	if noun is flippable, say "Probably not in its present state." instead;
	say "You're not here to shop. You're here to save Yorpwald[if noun is nonreflexive]. Not shop in some random store[one of]. You changed a few other stores to get where you needed before--maybe do that again[or]. Like this one[stopping][else], and you remember how changing stores helped you get places before[end if]." instead;

check taking a sto: say "You can't take that, [if noun is flippable]but you can maybe change it and enter it[else]and you can't do much else, either." instead;

book Strip of Profits

Strip of Profits is a room in Stores. last-loc of Stores is Strip of Profits. "[if roved is true]Well, those stores you took care of are gone, and so is the megaton magneto-montage. [h-or-others][else]Most of the twenty-six stores from your first time here remain, though you're not here to shop[which-stores].[paragraph break]A megaton magneto-montage[i-u] stands here[end if][if-bush].". roomnud of strip of profits is table of strip of profits nudges.

outside-text of Strip of Profits is "The stores are where it's at. You can go [b]IN[r] [now-once of whether or not number of not off-stage portals > 0] you've found what they can become.".

exits-text of Strip of Profits is "There are no directional exits here, but you [if number of touchable portals is 0]may want to try opening up a store[else if number of touchable portals is 1]can go [b]IN[r] to the store-portal you made[else]have multiple ex-stores you can enter[end if].".

hub-room is Strip of Profits.

understand "trips/profit" as Strip of Profits when debug-state is true.

to say which-stores:
	let stoflip be number of touchable flippable stos;
	if stoflip is 0:
		say ", but there aren't any more you can switch up";
		the rule succeeds;
	if stoflip is 1:
		say ". Only [random touchable flippable sto] is still worth investigating";
		the rule succeeds;
	let BBQ be a list of things;
	now BBQ is list of flippable not bedruggled stos in Strip of Profits;
	remove Store B from BBQ, if present;
	remove Store H from BBQ, if present;
	let nlt be number of entries in BBQ;
	if nlt is 0, continue the action;
	sort BBQ;
	let A be indexed text;
	now A is "[BBQ]";
	now A is "[A in title case]";
	replace the text "store " in A with "", case insensitively;
	replace the text "And" in A with "and";
	say ". Store[if nlt > 1]s[end if] [A] seem[if nlt is 1]s[end if] in decent shape[if Throes Hoster is in Strip of Profits], but that hoster you made looks too scary for now[end if].[no line break][tokies] Looks like near the end of the alphabet's where it's at";

to decide whether you-can-advance:
	let QQ be number of solved regions;
	increase QQ by number of bypassed regions;
	if QQ < 5, decide no;
	decide yes.

to say tokies:
	if number of touchable bedruggled stos is 0:
		say "[no line break]";
		continue the action;
	say " Also, [list of touchable bedruggled stos] seem[if number of touchable bedruggled stos is 1]s[end if] nearly condemned.[no line break]";

check going inside in Strip of Profits (this is the which portal rule) : [we choose the "easiest" by default]
	if number of maingame portals in strip is 1:
		if Throes Hoster is in strip, say "You figure the throes hoster can be put off [']til later.";
		try entering a random touchable maingame portal instead;
	if Throes Hoster is in strip and roved is true:
		say "Yup. Only the throes hoster's left.";
		try entering throes hoster instead;
	if number of maingame portals in strip > 1:
		say "You have more than one area you can enter[if Throes Hoster is in strip], not counting the throes hoster, which you'll deal with later[end if].";
		let RP be nothing;
		let curdif be 99;
		repeat with EP running through portals in strip:
			if diffic of EP < curdif:
				now RP is EP;
				now curdif is diffic of EP;
		say "[line break]The [RP] look[if RP is not plural-named]s[end if] le[if number of portals in strip is 2]ss[else]ast[end if] intimidating[if RP is mangiest steaming], though maybe not even worth it[end if]--try [if RP is plural-named]them[else]it[end if]?";
		if the player regex-prompt-consents, try entering RP instead;
		say "Okay. [if RP is plural-named]They're[else]It's[end if] not going anywhere[unless patcher is off-stage], unless you fry it with the patcher[end if]. If you want to try another entrance, [b]ENTER[r] it specifically." instead;
	if mangiest steaming is in strip, try entering mangiest steaming instead;
	if hoster is touchable, try entering hoster instead;
	say "There's nothing you can enter--the plain old stores don't count. You don't have time to shop." instead;

to say i-u: if magneto montage is unexamined, say ", which looks like a directory of some sort,"

section exstores

an exstore is a kind of thing. an exstore is scenery. an exstore is boring and useless. bore-check of an exstore is usually the bore-exstore rule. bore-text of an exstore is usually "You did enough with [the noun] last game. Onwards!"

this is the bore-exstore rule:
	if current action is entering, say "You don't know if you'd be welcome at that tourist trap, and there's nothing more to do there. It was last game." instead;
	if current action is taking, say "You took that area (out) last game." instead;

section hubs bush

[the hubs bush is now linked in STS Common.i7x]

section describing the Strip

to say h-or-others:
	say "[if store h is in strip]But Store H remains[else]That throes hoster remains where Store H was[end if]"

after printing the locale description for Strip of Profits when Strip of Profits is unvisited:
	if roved is false:
		say "You remember something from your first trip to Yorpwald--how Terry would help you [b]RETRY[r] if you got stuck in any stores. So you write that in your pedanto-notepad. Also, as a fourth-wall note, if you have solved any area, simply type the command you used to win it.";
		pad-rec-lump "retry";
		pad-rec "warp";

chapter all the stores

disamb-store is privately-named useless scenery in Strip of Profits. printed name of disamb-store is "the entire store bank". understand "store" and "entire/ store bank/" and "stores" as disamb-store.

description of disamb-store is "[sto-desc].".

to say sto-desc:
	say "Some stick out more than others. Some have too many shoppers around. Some seem more solitary and ready to explore[one of]. You notice stores F, I, M and R are missing--of course they are, since you got past them to the forest, sortie, metros and resort last time here[or][stopping]. You can examine one in particular with, say, [b]X STORE Q[r]"

check taking disamb-store: say "You can't take one store, much less all." instead;

check entering disamb-store: say "Hmm, you can't enter all the stores at once. You'll need to pick a store--you can also refer to it by its abbreviation, e.g. Q for Store Q." instead;

does the player mean examining disamb-store:it is likely.
does the player mean entering disamb-store: it is likely.

chapter store a

There is a sto called Store A. It is in Strip of Profits. It is useless.

understand "store 1/one" and "1/one" as store a when player is in Strip of Profits.

chapter store b

Store B is a LLPish reflexive sto in Strip of Profits. description of Store B is "It's not as greyed out as most of the other stores. It reads, in red, [first custom style]BERTO'S[r] (crossed out) then [first custom style]OBERT'S BEST, OR...[r] It also claims to be better than Dupree Pureed[if store b is reflexive]. It's probably some sort of food store, and it feels a bit cold nearby[end if][one of]. You think you see who built this--you could examine it again. Red text[or]. The builder's name is [first custom style]REST, BO[r], in red text[stopping]." [bold-ok]

understand "store 2/two" and "2/two" as store b when player is in Strip of Profits.

a-text of store b is "RYRRYR". b-text of store b is "PYRRGR". parse-text of store b is "S[sp]O[sp]x[sp]x[sp]E[sp]x". store b is parse-spoilable.

chapter store c

Store C is a useless sto in Strip of Profits. description of Store C is "[one of]To porn! Pronto! [or][stopping][randbla]".

understand "store 3/three" and "3/three" as store c when player is in Strip of Profits.

check examining Store C for the first time:
	say "You look in, noticing a corset ideal for the escort sector--and that the doorbell if you're (lol) bored is in the basement--but She Bop Phobes cry 'Skeezer! Eekzers! Sicko! So ick!'[paragraph break]";
	ital-say "store C is no gamier mirage but a pro-sin prison--enough smut you must need Tums--so this fun fort may be a turnoff to examine again[if censor-minor is true], especially since you have profanity disabled[end if]. So, pardon da porn (hetero or the other) or call pornog no-prog. I'm not judging. I just discovered them all by intellectual curiosity and guesswork, so stop saying that. Go on. Harp. Pry.";
	the rule fails;

chapter store d

Store D is a useless sto in Strip of Profits.

understand "store 4/four" and "4/four" as store d when player is in Strip of Profits.

chapter store e

Store E is a useless sto in Strip of Profits. description of Store E is "It's bolted up but seems to be advertising a stereo sale."

understand "store 5/five" and "5/five" as store e when player is in Strip of Profits.

chapter store f, i mean, forest

the forest is an exstore in Strip of Profits. understand "store f" and "store/f" as forest when player is in Strip of Profits. "It's not really Store F any more. It's been preserved--a foster forest. But new stores have sprouted up around it since last game. Or, more accurately, at the other end of the alphabet.".

understand "store 6/six/f" and "6/six/f" as forest when player is in Strip of Profits.

chapter store g

Store G is a useless sto in Strip of Profits.

understand "store 7/seven" and "7/seven" as store g when player is in Strip of Profits.

chapter store h

Store H is a sto in Strip of Profits.

understand "store 8/eight" and "8/eight" as store h when player is in Strip of Profits.

description of Store H is "Store H appears broken-down. It sprawls a bit but is not particularly tall. Writing in bright red seems to warn you away."

a-text of store h is "YRRYRR". b-text of store h is "YPRYRR". parse-text of store h is "-[sp]T[sp]x[sp]-[sp]x[sp]x".

check scaning store h: if otters is not solved, say "The settler gives a weird noise, as if it doesn't want to scan this store--yet." instead;

to it-him-her (x - a thing):
	set the pronoun it to x;
	set the pronoun her to x;
	set the pronoun him to x;

section throes hoster

the Throes Hoster is a not lumpable not maingame portal. understand "others" as throes hoster when throes hoster is in location of player. "That stupid throes hoster sits here where Store H was. [if roved is true]Since[else]If[end if] you have nothing better to do than explore Yorpwald instead of saving it, it's worth a shot.". description is "It's a truly terrifying open, smiling mouth, being far too welcoming. But it also has a sadness about it. As if it knows Elvira's influence [if roved is false]will slowly wane[else]is slowly waning[end if] the longer she is gone, but perhaps some hero (you?) can destroy things quicker.". diffic of hoster is 9. entry-rule of Throes Hoster is enter-hoster rule. go-region of Throes Hoster is Others.

this is the enter-hoster rule:
	if roved is false, say "You think about entering, but you remember Elmo saying it wasn't critical to save Yorpwald." instead;
	say "After the darkest, sad trek, a frazzled beady-eyed man runs up to you and mutters about the Postage Gestapo and Tubers Brutes and so forth. Then he looks up. 'Curtis. Turf is fruits. CEO of TruSci.'[paragraph break]'Yeah, you. You, um, [tgw] Listen, I need help with my business. Elvira grew all kinds of un-nutritious stuff. It'd help Yorpwald, and maybe it's help you. I bet it'd be real easy for you...and I'll give you something cool for every four fruits. Until I'm out of cool stuff. What do you say?'[wfak][paragraph break]'Great! You do your thing, then I'll do mine. It's weird technical biotech stuff, increase yields--a step past your...not that you're...um, never mind, get on it. Oh, here's an augural arugula, if you get stuck on something. Just eat it and la! a [b]GURU[r]!'[paragraph break]He's a bit brusque, but that's the legacy of bad leaders like Elvira--the people opposed to them the loudest can get annoying before anyone notices[get-arug].";
	if arugula is not moot, pad-rec "guru";

understand "mouth" as Throes Hoster.

does the player mean entering a sto: it is unlikely.
does the player mean entering a portal: it is likely.
does the player mean doing something with Store Z: it is unlikely.

chapter store i

the sortie is an exstore in Strip of Profits. description of sortie is "The sortie leads to the erstwhile Mean Old Mondale-Doleman's (now Amend-Lo-Mo[']-Deal'N) territory, which you were able to neutralize your first time through. You think he still likes you--but you've no time to verify that. You'll want to fix the other stores."

understand "store 9/nine/i" and "9/nine/i" as sortie when player is in Strip of Profits.

chapter store j

Store J is a useless sto in Strip of Profits.

understand "store 10/ten" and "10/ten" as store j when player is in Strip of Profits.

chapter store k

Store K is a bedruggled LLPish sto in Strip of Profits. description of Store K is "[one of]A peculiar smell of smoke and incense seeps from Store K, but that's probably not the BIG reason this place went downhill. 'Hey! stop violating our privacy, Dude, or we will maybe, like, insult you next time![or]'Dude! We're trying to [first custom style]REST, OK[r]?' someone looks briefly at you through bloodshot red eyes.[or]Someone with bloodshot red eyes begins blasting the truly awful music of [first custom style]K. T. Rose[r].[or]You wonder how they can rest okay while listening to the music of [first custom style]K. T. Rose[r].[stopping]" [bold-ok]

understand "store 11/eleven" and "11/eleven" as store k when player is in Strip of Profits.

a-text of Store K is "RYRYRR". b-text of Store K is "RYRYRR". parse-text of store k is "x[sp]-[sp]x[sp]-[sp]x[sp]x".

section mangiest steaming

the mangiest steaming is a not maingame not lumpable portal. diffic of mangiest steaming is 1. "The tokers['] mangiest steaming hovers--[if Cruelest Lectures is visited]but you don't want to go back[else]maybe there's a small 'adventure' inside[end if].". entry-rule of mangiest steaming is enter-steaming rule. description of mangiest steaming is "It hangs all around the tokers, a product of their, umm, activity[if Cruelest Lectures is visited]. You don't really want to go back[else]. But it probably won't kill too many brain cells to [b]ENTER[r] it. You might even expand your consciousness[end if].". go-region of mangiest steaming is stores.

this is the enter-steaming rule:
	if nestor is off-stage, say "'Dude, we, like, can't share these righteous fumes unless you help us. Maybe find our friend or something.'" instead;
	if blabber babbler is reflexive:
		say "The tokers begin singing 'Oh sigh, so high,' then 'TO PHONY TYPHOON!' and you're all 'Rest. OK?' You step into the mangiest steaming and find yourself on a way high highway. (Proof that stuff's an entry drug.) You wind up saving lands similar to Yorpwald which speak Spanish, French, German and Italian.[paragraph break]Well, in a dream, anyway. Then you wake up to see someone with a badge: GUARD ON A GROUND DURANGO. They ask if you're on drugs. Before you can reply: 'No jukein['] on, junkie.'[paragraph break]After a stern lecture about how using drugs makes you miss obvious details (other than, well, a WANTED poster of you that you see) and you druggies think you're special but there's nothing magical about drugs, the no-[crap] narc-op pushes you to an anti-drug seminar.[paragraph break]'The blabber babbler will set you straight. They call themselves that because of irony, see. Because they have something useful to say. Humor.' Seeing your blank look, because you realize that's now how self-parody works, Durango excoriates your cognitive abilities or lack thereof, though you're just confused because 'blabber babbler' is something Nestor and the tokers might giggle at."; [bold-ok]
		min-up;
		now player is in Cruelest Lectures instead;
	say "If Cruelest Lectures is still destroyed, no point going back. If it isn't, you'll be in big trouble." instead; [we need these in here since it is a nonstandard portal]

section tokers

the tokers are plural-named people. "Some tokers are here[if Store N is touchable], moaning about their friend they lost nearby[else], doing their tokin['] thing[if-nest][end if]."

description of tokers is "Long-haired, lazy, babbling bums, unwilling to do anything nearing earning. Their taste in clothes is worse than their taste in music. they seem to be fervently arguing whether it is best to say dude, like, or man too much."

rule for printing a locale paragraph about tokers:
	now nestor is mentioned;
	continue the action;

to say if-nest: if nestor is in Strip of Profits, say ", your friend Nestor participating fervently"

chapter store l

Store L is a useless sto in Strip of Profits. description of Store L is "You take a peek inside but feel loster and loster as you do."

understand "store 12/twelve" and "12/twelve" as store l when player is in Strip of Profits.

chapter store m

the metros are a plural-named exstore in Strip of Profits. description of metros is "It's probably a quick path to Mt. Rose, which does not need your help. In fact, with public opinion as it is right now, if you showed up there, you might get beaten up for implying there was something wrong with Mt. Rose."

understand "store 13/thirteen/m" and "13/thirteen/m" as metros when player is in Strip of Profits.

chapter store n

Store N is a bedruggled LLPish sto in Strip of Profits. description of Store N is "Someone appears to be in there. Maybe if you called their name, they'd come out."

understand "store 14/fourteen" and "14/fourteen" as store n when player is in Strip of Profits.

a-text of Store N is "RYRRYR". b-text of Store N is "RYRRYR". parse-text of store n is "x[sp]E[sp]x[sp]x[sp]O[sp]x". Store N is parse-spoilable.

section nestor

Nestor is a person. description of nestor is "[if tokers are touchable or mangiest steaming is touchable]Nestor is somewhere among the tokers, you'd guess[else]Nestor pines for his most bummedly lost friends[end if].". initial appearance of Nestor is "Nestor mopes around, hoping his friends drop by."

rule for printing a locale paragraph about nestor:
	if mangiest steaming is touchable or tokers are touchable, do nothing instead;
	continue the action;

to say move-toners: now toners are in Strip of Profits.

check taking toners: say "They aren't yours. And you don't need to look good while adventuring." instead;

the bottles of toners are a plural-named cluey thing. understand "lotions" as toners. description is "They are trial-sized red bottles of toners for skin care[one of]. Thankfully, they weren't made of Sterno, which wouldn't have helped you at all and makes you see red just imagining[or]. They're so rent you can't see a brand name[or]There's, er, tons (feel free to see red) to deduce from themuy[stopping]. The bottles are disgracefully red."

chapter store o

Store O is a useless sto in Strip of Profits. description of Store O is "You'd think there'd be something you could do with Store O, but you haven't.".

understand "store 15/fifteen" and "15/fifteen" as store o when player is in Strip of Profits.

chapter store p

Store P is a sto in Strip of Profits. description of Store P is "There's a big poster in the window of this average-sized store.".

understand "store 16/sixteen" and "16/sixteen" as store p when player is in Strip of Profits.

a-text of Store P is "RRYRRY". b-text of Store P is "RRYRRY". parse-text of store p is "x[sp]x[sp]E[sp]x[sp]x[sp]O".

section tropes poster

the tropes poster is part of Store P. the tropes poster is auxiliary.

description of tropes poster is "It features many important, if mis-stated, memes, including how certain nonsense words reliably move the plot forward or make something out of nothing. When you think on them, they are so pert, you see red."

a-text of tropes poster is "RRYRRY". b-text of tropes poster is "??YRRY". parse-text of tropes poster is "x[sp]x[sp]E[sp]x[sp]x[sp]O". tropes poster is parse-spoilable.

section odorant tornado

the odorant tornado is a portal. understand "presto" as odorant tornado when odorant tornado is fungible. diffic of odorant tornado is 5. the go-region of odorant tornado is Presto. description is "The odorant tornado swirls about. Yuck! You fear what [if Grey Gyre is visited]is[else]might be[end if] behind it. There's a general roar that makes you back up a bit. Still, you suspect you need to [if Grey Gyre is visited]re-[end if][b]ENTER[r] them.". initial appearance of odorant tornado is "An odorant tornado swirls where Store P used to reside.". entry-rule of odorant tornado is enter-tornado rule.

this is the enter-tornado rule:
	say "[one of]Shoof! Foosh! A tentacle of Old Warpy snatches at you as you enter the odorant tornado, and you don't stop spinning for a minute. [if curst crust is off-stage]You somehow manage to grab an unappetizing hunk of bread--some curst crust--as you are blown off your feet. [get-crust][end if] Poof! Foop! Danglin['], then landing. With a plomf, maybe a flomp.[or]You hurtle through the odorant tornado and Old Warpy again, managing to land on your feet this time.[stopping]"

chapter store q

Store Q is a useless sto in Strip of Profits. description of store Q is "This is a posh shop like many others in the Strip of Profits. It doesn't look likely to hide any sort of portal, even shared with Store U."

understand "store 17/seventeen" and "17/seventeen" as store q when player is in Strip of Profits.

chapter store r

the resort is an exstore in Strip of Profits. description of resort is "It would probably lead back to the Means Manse, which is surrounded. So, bad idea."

understand "store 18/eighteen" and "18/eighteen" as resort when player is in Strip of Profits.

chapter store s

Store S is a useless sto in Strip of Profits. description of Store S is "As you get near, you hear GO AWAY YOU TOSSER. The accent doesn't sound British, so you suspect this person just needed to use a new swear and kind of forced things a bit."

understand "store 19/nineteen" and "19/nineteen" as store s when player is in Strip of Profits.

chapter store t

Store T is a sto in Strip of Profits. description of Store T is "Store T is average-sized, but it seems to repel you. Its window is really lovely stained-glass--it's a depiction of a family of sea animals. There's an engraving below it."

understand "store 20/twenty" and "20/twenty" as store t when player is in Strip of Profits.

a-text of Store T is "YRRYRR". b-text of Store T is "YPRYRR". parse-text of store t is "-[sp]T[sp]x[sp]-[sp]x[sp]x".

section solid idols portal

the solid idols are a plural-named not lumpable portal. understand "otters" as solid idols when solid idols are fungible. diffic of solid idols is 8. description of solid idols is "Not the sort you would be silly enough to bow down to, bcause otters are cool but not powerful. There's also something below their names, and it reads:". initial appearance is "Solid idols of otters wait here where store T was, facing each other--it's all blurry behind them.". entry-rule of solid idols is enter-idols rule. go-region of solid idols is Otters.

report examining solid idols: try examining engravings;

understand "otters/idol" as solid idols.

definition: a region (called reg) is otters-blocking:
	if reg is not unsolved, no;
	if reg is others, no;
	if reg is stores, no;
	if reg is otters, no;
	yes;

this is the enter-idols rule:
	if number of otters-blocking regions > 0:
		d "[list of otters-blocking regions].";
		say "As you step between them, you feel a passive sap-vise. Then a voice. 'To rest! To rest!' You just can't move forward, and you move back before you feel rot set. You just aren't strong enough yet. Maybe you need to build yourself up by fixing things elsewhere[if patcher is in Strip of Profits], or you can cheat with that patcher. I won't judge. The fate of a world is at stake[end if]." instead;
	if Minded Midden is unvisited, say "'To rest! To rest!' a voice calls, again. But you shake that off, whispering '...or test!'[paragraph break]The idols create a sort of bumper-maze, and from the feeling in your stomach you know it has gone through Old Warpy.[paragraph break]Those otters weren't standing guard for no reason. Elvira must be close. But you don't know what she's ultimately up to. You note in your pad it might be an extra good idea to ask about her, if people are around.[paragraph break]";
	say "[if bleary barley is moot]You turn around when you pass through the otters, but the Strip of Profits is gone.[else if Minded Midden is visited]You stumble back into the Minded Midden and when you turn around, you can't see the otters anywhere.[else]As you walk through, you feel a tingling, like giant wasp paws. Your powers feel dormant but hopefully not mordant. A voice says 'This area is not to be braved lightly. Seriously!'[end if][paragraph break]";
	pad-rec-q "asking";
	pad-rec-q "powers";

chapter store u

Store U is a sto in Strip of Profits. description of Store U is "Though Store U is the smallest of the stores that stand out, along with Store V[if store v is not touchable] before you changed it[end if], you see a dizzying array of branching possibilities inside. Well, roads, except each seems to have a number or label. The roads are red and almost seem to form letters if you look at them right."

understand "store 21/twentyone" and "21/twentyone" as store u when player is in Strip of Profits.

a-text of Store U is "RYYRYR". b-text of Store U is "RYYRGR". parse-text of store u is "x[sp]O[sp]U[sp]x[sp]E[sp]x". Store U is parse-spoilable.

section roads

the roads are a plural-named boring thing. they are part of store u. description of the roads is "When you stare just right, the red roads reform to 'Sure to set our...'". bore-text is "The roads are inside the store. You can really only examine them.".

a-text of roads is "RYYRYR". b-text of roads is "RYYRYR". parse-text of roads is "x[sp]O[sp]U[sp]x[sp]E[sp]x".

section course source

the course source is a portal. diffic of course source is 3. understand "routes" as course source when source course is fungible. description of course source is "It appears as though it would branch out in many different directions if you started along it.". initial appearance of course source is "A course source stands near where Store U was. You may wish to [if Same Mesa is visited]re[end if]enter it.". entry-rule of course source is enter-source rule. go-region of course source is Routes.

this is the enter-source rule:
	say "[one of]The route turns a bit, then begins branching. You are no longer sure what direction you are going in, and each seems to lead through Old Warpy, anyway. But still you keep walking, until you cross a red line and hear a buzz. There is no way back. 'No curse cure, son!' booms a voice[if player is female] sadly ignorant of your gender[end if].[paragraph break]After walking on for a bit, you find yourself somewhere that might be populated. Well, there are buildings around[or][if Harms Marsh is visited]Somehow, the routes lead you underground[else]It's easier to get lost the way you need to the second time[end if][stopping].[line break]"

chapter store v

Store V is a sto in Strip of Profits. description of Store V is "Store V would be the smallest of the stores that stand out, but for Store U[if store u is not touchable] before you changed it[end if]. Strange garnets lie inside. You also see a hologram of voters."

understand "store 22/twentytwo" and "22/twentytwo" as store v when player is in Strip of Profits.

a-text of Store V is "RRYRYR". b-text of Store V is "RRGRGR". parse-text of store v is "x[sp]x[sp]O[sp]x[sp]E[sp]x".

section voters

voters are part of Store V. understand "hologram" as voters. description of voters is "The voters in the hologram seem to be complaining 'Elections? Selection. Have to vote. Ha. Pols? Slop.'[paragraph break]An impressive display of defeatist thinking."

a-text of voters is "RRYRYR". b-text of voters is "RRYRYP". parse-text of voters is "x[sp]x[sp]-[sp]x[sp]-[sp]S".

section Tastee Estate

the Tastee Estate is a portal. diffic of Tastee Estate is 2. go-region of Tastee Estate is troves. understand "troves" as tastee estate when Tastee Estate is fungible. initial appearance of Tastee Estate is "A Tastee Estate sits where Store V used to be, seeming too good to be true.". description of Tastee Estate is "Shiny. Tempting. If it does not lead to riches, it must lead to a rich experience if you [b]ENTER[r].". entry-rule of Tastee Estate is enter-estate rule.

this is the enter-estate rule:
	say "[one of][if tokers are in Strip of Profits]'Materialism! It's a trap! Like, literally!' But you don't listen, as you know how the word 'literally' can be abused. But there is one![paragraph break][end if]A protean neo-trap! A blingo-goblin sargent grabs you as you reach for the argents and garnets! Of course the trove was too overt. You shake him off and run. The sarge rages and gears--you hit the, er, gas. Into Old Warpy, because of course. You run through the darkness, and you start to feel VERY cold before winding up in a hovel labeled [heat].[paragraph break]But you are soon thrown outside! There are no freeloaders in that most successful of cities: Spoiloplis![wfak][paragraph break]A girdled griddle where people go from poverty--to the very top. Cars--outrageous rogue autos--scar arcs, spraying water on you and knocking you from the curb as you reach for a demi-dime.[wfak][paragraph break]'Insurer Inurers! Darn you and your...' you hear someone yell from the back seat. They get out. 'Dawdler! Waddler!' You cringe, waiting for a lecture, but instead you only feel a slight thud on your chest. 'Toughen up! Enough put.' They re-enter the car, which speeds off.[paragraph break]You look down to a copy of [i]Pa, Egg, Pea[r] by Peg A. Page--a success manual of parsable parables.[or]You think positively as you walk back through the troves, and what do you know, you wind up where you used to be.[stopping][line break]" [?? need to account for RETRY/TERRY stuff. What if you RETRY with the super purse gone?]

chapter store w

Store W is a sto in Strip of Profits. description of Store W is "It's the biggest structure in the strip. You see replicas of two tall, narrow buildings. You can also [b]READ[r] who made it.".

understand "store 23/twentythree" and "23/twentythree" as store w when player is in Strip of Profits.

a-text of Store W is "RYRYRR". b-text of Store W is "RYRYRR". parse-text of store w is "x[sp]-[sp]x[sp]-[sp]x[sp]x".

section truster turrets

the truster turrets are a plural-named portal. diffic of truster turrets is 7. understand "towers" as truster turrets when truster turrets are fungible. the go-region of truster turrets is Towers. initial appearance of truster turrets is "Two truster turrets stand where Store W used to be.". description of truster turrets is "Ivy or ivory. You can't tell which is tower, er, two. They're probably, hopefully, linked some way so you can [b]ENTER[r]. But their size indicates a hefty quest ahead.". entry-rule of truster turrets is enter-turrets rule.

towers-warn is a truth state that varies.

this is the enter-turrets rule:
	if number of kayoed regions < 5 and towers-warn is false:
		now towers-warn is true;
		if patcher is touchable:
			say "The turrets are imposing enough that you look back at the patcher and feel relieved you can just [b]RETRY[r] and zap your way through in case you get stuck.";
		else:
			say "Man, those towers are imposing! They are easily bigger than the other stores, maybe as big as any two [if number of portals in Strip of Profits is 1]stores[else if number of stos in Strip of Profits is 0]portals[else]stores or portals[end if] combined. You may want to chip away at [if number of solved regions is 1]a couple easier places[else]another easier place[end if] first[if oyster is solved]--the towers look way more re-enforced than even the balancer barnacle[end if]. Proceed anyway?";
			unless the player yes-consents, say "You decide to look around a bit more." instead;
	say "[one of]As you attempt to enter the truster turrets, they seem to move away will stop when you try to go closer, they move even further away. But you keep walking, and of course you feel that churning sensation that only happens when you discovered Old Warpy accidentally, and you can't tell when you're out for a while, but eventually you realize you have arrived at the Wildest Wilteds! There's not much there, but you've heard people guard the silliest things, just because. So when you find a tavern, you stop in for some help.[wfak][line break]Someone is willing to talk to you. But unfortunately it is a marauder of whom you have only heard rumors: Yo-Rend-or-Deny Rodney! He has held the tavern hostage! And you stumbled in just as he'd got everyone scared and ready to let him loot the place![wfak][paragraph break][or]You warp back to the Wildest Wilteds again.[stopping]"

chapter store x

Store X is a useless sto in Strip of Profits.

understand "store 24/twentyfour" and "24/twentyfour" as store x when player is in Strip of Profits.

chapter store y

Store Y is a sto in Strip of Profits. description of Store Y is "The store seems filled with water. It's wide but not tall. You think you see shells. The window of store y has [first custom style]TOYERS[r] in red with a line through."

understand "store 25/twentyfive" and "25/twentyfive" as store y when player is in Strip of Profits.

a-text of Store Y is "YORRYR". b-text of Store Y is "YORRGR". parse-text of store y is "O[sp]Y[sp]x[sp]x[sp]E[sp]x". store y is parse-spoilable.

the shells are a boring thing. they are part of store y. the shells are uncluing. description of shells is "You can't see what you can do with the shells, but maybe they just help show what is behind Store Y.". bore-text of shells is "Messing with the shells won't help you get in Store Y, but maybe they're a clue.".

section barnacle balancer

the balancer barnacle is a portal. diffic of balancer barnacle is 6. understand "oyster" as barnacle balancer when barnacle balancer is fungible. the go-region of barnacle balancer is Oyster. "The barnacle balancer that swallowed up the Store Y oyster is open. You could definitely sneak in.". description of barnacle balancer is "It's not particularly tall, but its width suggests there's a lot to do there.". entry-rule of balancer barnacle is enter-barnacle rule.

oyster-warn is a truth state that varies.

this is the enter-barnacle rule:
	if number of solved regions < 2 and oyster-warn is false:
		now oyster-warn is true;
		if patcher is touchable:
			say "The oyster is wide enough that you look back at the patcher and feel relieved you can just [b]RETRY[r] and zap your way through in case you run out of gas.";
		else:
			say "The oyster looks very wide but not tall--it's quite possible there's a ton to do. It's not particularly magical or scary--not as much as [if store w is touchable]store W[else if towers is not unsolved]the towers were[else]the truster turrets[end if], but you may want to warm up your skills somewhere else first. Proceed anyway?";
			unless the player yes-consents, say "You decide to look around a bit more." instead;
	say "[one of]You're a bit worried the balancer barnacle will gobble you up, but Old Warpy puts the jinx on that. You're sucked well away to a bar--so busy and loud people don't notice you fell in. They don't even notice that, unlike them, you are not a seafood person. Err, sea person. Everyone seems worried about a seaside disease[or]You return to the sea people's area[stopping]."

chapter store z

Store Z is a useless sto in Strip of Profits.

understand "store 26/twentysix" and "26/twentysix" as store z when player is in Strip of Profits.

chapter megaton magneto montage

the megaton magneto montage is cluey boring scenery in Strip of Profits. printed name of montage is "megaton magneto-montage". bore-text is "The magneto-montage's not good for much besides looking at. But it's a useful guide.". bore-check is the bore-megaton-magneto-montage rule. description of megaton magneto montage is "It's a sort of directory of all the stores[one of]. You read it through, but you can gloss through it for interesting bits (or even call it M/MM/MMM,) later[or]. You gloss through for what interests you[stopping]."

after examining megaton magneto montage: [ the code is neater this way ]
	say "[b]CLOSED ON YORPDAY (that's today)[r]: A, D, E, G, J, L, O, Q, S, X, Z."; [bold-ok]
	if store b is reflexive, say "[b]FREE SAMPLES:[r] B."; [bold-ok]
	if store c is not examined, say "[b]NO PRUDES, USED !!!!:[r] C."; [bold-ok]
	say "[b]DON'T BOTHER UNLESS YOU'VE NOTHING, I MEAN NOTHING, TO DO[r]: H."; [bold-ok]
	say "[b]OF HISTORICAL SIGNIFICANCE[r]: F/Forest, I/Sortie, M/Metros, R/Resort."; [bold-ok]
	if store k is in strip or store n is in strip, say "[b]CONDEMNED[r]: K, N."; [bold-ok]
	say "[b]NOT ELVIRA-APPROVED. ENTER AT OWN RISK[r]: P, U, V, W, Y."; [bold-ok]
	if store t is in Strip of Profits, say "[b]ELVIRA SAYS KEEP EXTRA DOUBLE OUT[r]: T."; [bold-ok]
	say "[line break][if engravings are examined]Those engravings are at the bottom, too[else]You note engravings craftily hidden below all this. They might be worth examining on their own[end if].";
	if montage-change-warn is false:
		if number of solved regions + number of bypassed regions > 1:
			say "[line break]It's kind of out of date since you got to work fixing things, but it'll be good enough reference in the future.";
		now montage-change-warn is true;
	say "[one of][line break]Also, the montage was created by Tom Egan. Of course. Can't say he was not game.[or][stopping]";
	continue the action;

this is the bore-megaton-magneto-montage rule:
	if current action is scaning, say "Your settler registers nothing. It looks too dense to change. Besides, it's got information on the stores, and you wouldn't want to lose that." instead;

understand "mmm/mm/m" as megaton magneto montage when player is in Strip of Profits.

check examining magneto montage when roved is true:
	say "It's not really relevant now that there's just [if store h is in Strip of Profits]Store H[else]the throes hoster." instead;

montage-change-warn is a truth state that varies.

section engravings

the engravings are part of magneto montage. the engravings are plural-named. understand "engraving" and "names" as engravings when engravings are fungible.

description of engravings is "[emph of odorant tornado]Man, [r][b]SOMEONE[r] [emph of truster turrets]evil[r] [emph of Tastee Estate]will[r] [emph of barnacle balancer]pay[r] [emph of course source]up[r], [emph of solid idols]hard[r].[paragraph break][i]NOUNED: UNDONE.[r][if note-progress is true][paragraph break]The letter emphases seem to have changed since you last read the engravings.[npoff][end if]"

to say npoff: now note-progress is false;

to say emph of (po - a portal):
	say "[r]";
	if po is touchable:
		say "[i]";
	else if go-region of po is solved or go-region of po is bypassed or go-region of po is shortcircuited:
		say "[b]";

eng-scan is a truth state that varies.

check scaning engravings:
	say "None of the words on the engravings scan to anything.";
	now eng-scan is true instead;

after examining engravings when eng-scan is false:
	say "You scan the engravings, just in case, but none of the words turn up anything special. There's probably a different hint at stake, here. Also, it's odd an anti-Elvira message would be around. Maybe it's Gretta's clue Elmo mentioned, and maybe it'll make more sense after you've made your way a bit more[one of]. You glance [if magneto montage is examined]back [end if]over at [the montage] and make a rough outline of what you expect your progress to be[or][stopping].";
	pad-rec-q "progress";
	now eng-scan is true;
	continue the action;

chapter windows

the windows are useless plural-named boring scenery in Strip of Profits. understand "window" as windows. description of windows is "Unfortunately, you can't do much with the windows. Since stores sort of have to have them, that gets ambiguous. It's probably simpler to refer to the store you want to inspect.". bore-text is "Unfortunately, with all those windows, it's hard to be specific. But you should be able to refer to the store with the windows you want to look in.". bore-check of windows is bore-windows rule.

this is the bore-windows rule:
	if current action is attacking, say "Unfortunately, if you enter a store that way, while it's still a store, there'd be nothing worth exploring.[paragraph break]Plus Elvira'd have a field day if and when you get caught." instead;

book Cruelest Lectures

Cruelest Lectures is an innie room in Stores. "You're standing in the back of an uncomfortable auditorium. There's some teasing seating, but you're not sure it'd improve the experience[one of]. A blabber babbler at the front leaves your fellow speaker parkees in a trance. But not drug-induced, of course[or][stopping]. Nearby, a passage leads to[if e-revealed is false] somewhere called[end if] Studio E.". roomnud of cruelest lectures is table of cruelest lectures nudges.

outside-text of cruelest lectures is "There must be a general way to leave, but that's not quite it."

exits-text of Cruelest Lectures is "You can't make it to any exits right now. You need to disrupt things. Listen or talk to the Rehabs Basher for clues.".

check looking in Cruelest Lectures for the first time: say "As you march through the smoke, you hear 'Pored? ... ROPED, doper! Anti-drug drag unit!' You turn around to see a tall bulky man wearing a T-shirt saying 'QUADS SQUAD.'[paragraph break]'So! you're one of those people who have been poking around stores K and N. But these are no-drugs grounds. [if mangiest steaming is examined]Second hand funny-smoke. No rationalizations about how you cheat drug lords that way. It's an entry drug and that's facts. [end if]Let's go.'[paragraph break]He frog-marches you to an auditorium. It's quite a crowd, and you're a bit late, so you can't even sit.";

check exiting in Cruelest Lectures:
	say "[one of]You make a half-hearted (well, 42.86%-hearted) effort to leave, but without a planned destination (jeesh! The self-help speak's already hitting you) you'll just wind up coming back around here. Even though it's so [t-d-s][or]You managed to leave for a bathroom break, and you were sort of curious what was in Studio E. You tried the door. It was locked[or]You might wander around inside, but you would come back. That's how you got stuck inside your cubicle at the company so long. Tedious but safe. Oops[or]They...they can't zap your severance check for ditching this tedious lecture? Probably not. But the ushers would guilt trip you into sitting back down[or]The blabber babbler even more tedious than coworker chitchat you never could pull yourself away[or]Tedious, tedious, tedious. You can't help seeing red[or][tedcue]Your eyes wander to the top of the screen. Um, the screen behind the blabber babbler, that sort of blends in with the room[stopping]." instead;

to say t-d-s: say "[i]tedious[r], making you see red"

tedious-cue is a truth state that varies.

to say tedcue: now tedious-cue is true;

chapter teasing seating

tried-seating is a truth state that varies.

to say seat-try: now tried-seating is true;

the teasing seating is useless boring scenery in Cruelest Lectures. "Some of it is open, but you figure it's reserved, or someone will peg you back. ". bore-check of teasing seating is bore-seating rule.

this is the bore-seating rule:
	if current action is scaning, say "You consider scanning them, but it'd freak out the audience. Or the Rehabs Basher. Or the blabber babbler." instead;
	if current action is entering or current action is climbing, say "[seat-try]'If you'd gotten here earlier, you might've gotten one,' growls the Rehabs Basher, as you move towards empty seating. You're not sure that'd make sense even if you actually [i]were[r] stoned. The seating is apparently reserved for others. Or maybe nobody's allowed to sit in it, to show how drugs make you miss out on life." instead;

the speaker parkees are boring useless scenery in Cruelest Lectures. "They sit there staring at [bab-name], the blabber babbler, go on and on. If you didn't know better, you'd think it was a drug-induced trance, but if they weren't staring, they'd get zinged for no attention span.". bore-text is "The speaker parkees are helpless and can't help you. You need to find another way to release them, and yourself."

chapter passage

the passage is scenery in Cruelest Lectures. "[if e-revealed is true]You don't want to go back. You already got the YYRRGRG clue for Studio E[else]The passage that leads to Studio E seems unguarded. Maybe you could sneak in there[end if]."

check scaning passage: say "[if e-revealed is true]You already got YYRRGRG for Studio E from it.[else]Be brave! [b]ENTER[r] the passage![end if]" instead;

check taking passage: say "[b]EXAMINE[r] it, instead." instead;

understand "studio e" and "studio" as passage.

e-revealed is a truth state that varies.

check entering passage:
	if e-revealed is true, say "No. Regardless of how cynical you are, you don't need to see that again. But you remember YYRRGRG." instead;
	say "You sense that you may uncover a deeply disturbing truth if you enter. Or, you might just get a too-spoilery hint that gets you out of here. Care to continue?";
	if the player regex-prompt-consents:
		say "You step into studio E. There, you see well-known pharmaceutical industry barons discussing perfectly legal and safe substitutes to various illegal drugs, along with perfectly air-tight patents and tax avoidance schemes. You also see 'DORI'S ROIDS' bottled (for the Rehabs Basher) with a so-tired needle beside it.[paragraph break]You rush out of Studio E before you see anything more--although you quickly [if cheat-on is false]switch your gadget back and forth and note it[else]note your gadget[end if] flashes YYRRGRG."; [bold-ok]
		now e-revealed is true;
	else:
		say "You decide to rely on what you see in the Lectures to get out.";
	the rule succeeds;

[strudel/lsd-ture and joke if eat after visiting]

chapter outsideing

outside-warned is a truth state that varies.

chapter blabber babbler

the blabber babbler is a reflexive person in Cruelest Lectures. "A blabber babbler rattles on about why and how [his-her] wasting your time is better for society than how you waste your time. And how the sooner you agree, the less you'll waste [his-her-u] time. Real golden rule stuff. [if suit ode is examined][he-she-c] mostly drowns out [suit ode][else]You hear a song beneath all this. It might provide a clue as to how to leave[end if]."

check scaning blabber babbler:
	say "Nothing, when you point the settler at the babbler. But you wave the settler around, and you catch [if suit ode is not examined]a song--[end if][suit ode]. It gives a reading!";
	now suit ode is examined;
	try scaning suit ode instead;

understand "example" as blabber babbler.

understand "max/peel" and "max peel" as blabber babbler when player is male.

understand "pam/exel" and "pam exel" as blabber babbler when player is female.

to say bab-name-u: say "[if player is male]MAX PEEL[else]PAM EXEL[end if]"

to say bab-name: say "[if player is male]Max Peel[else]Pam Exel[end if]"

description of blabber babbler is "The blabber babbler is bedecked in a very expensive suit and jewelry. You're not sure why they should be expensive, but you know they are. They're probably about as showy as drug dealers['] $5,000 suits and jewelry--unaffordable if the blabber babbler actually used drugs, of course. You read [bab-name-u], EXAMPLE (sponsored by RutCorp, who help pull you out of ruts) projected behind [him-her][one of]. One look at [him-her] and you figure you'll have to focus on things in general to get out of here[or][stopping]."

section Suit Ode Douse It

Suit Ode Douse It is boring reflexive scenery in Cruelest Lectures. description of Suit Ode is "It's a really terrible self-help anthem. Catchy, yes, and it doesn't let you go for a better tune.". printed name of Suit Ode is "[i]Suit Ode: Douse It[r]". bore-check of Suit Ode is the bore-suit-ode rule. bore-text of Suit Ode is "All you can really do is listen to [suit ode].".

a-text of suit ode douse it  is "YYRRYRY". b-text of suit ode douse it is "Y?R?Y??". parse-text of suit ode douse it is "-[sp]-[sp]x[sp]x[sp]-[sp]?[sp]?".

this is the bore-suit-ode rule:
	if current action is listening, now boring-exception is true;

chapter Rehabs Basher

the Rehabs Basher is a boring person in Cruelest Lectures. description of Rehabs Basher is "In case you were wondering about [his-her] actual name, [his-her] shirt advertises [him-her] as [i-n-u], A DRUG GUARDIAN.[paragraph break]'What? Those biceps are from pure hard work. And a proper diet. And Nativism Vitamins.' [he-she-c] nods and points to the blabber babbler[if pamphlets are off-stage]. And yet, in a weird way, it seems the Rehabs Basher actually wants you to talk to them, so they have an excuse to talk you down[end if].". initial appearance of Rehabs Basher is "The Rehabs Basher guards the only exit. Whether [he-she] bashes people before, after or during rehabs, or all three, [he-she] will definitely bash you if you try to leave the standard way.". bore-check of the Rehabs Basher is the bore-rehabs-basher rule. bore-text of Rehabs Basher is "[basher-pamph]".

understand "ian" as rehabs basher when player is male.
understand "nia" as rehabs basher when player is female.
understand "guardian" and "drug" and "drug guardian" as rehabs basher.

to say basher-pamph:
	if player has pamphlets:
		say "Before you can do anything, the Rehabs Basher points at the pamphlets [he-she] shared on you. Or at you. But not just plain with you. [he-she-c]'s so much bigger than you, it distracts you from whatever you meant to do.";
	else:
		say "Before you can do anything with or to the Rehabs Basher, [he-she] thrusts pamphlets labeled [i]Help Stamp Hemp: SPLAT[r] at you[one of][or] again[or] yet again[stopping]. 'It will help you in ways you don't know. And even I don't know.' Do you take them?";
		if the player yes-consents:
			now player has pamphlets;
			say "'Good choice. Say, if they're good enough, do you think I could become an even better blabber babbler than ... [him-her]?'";
		else:
			say "The Rehabs Basher looks hurt but blames it on the lack of attention span from the drugs you've been taking. That cheers [him-her] up.";

this is the bore-rehabs-basher rule:
	if current action is scaning or current action is sbing, say "'No offense, chum, but it's me who should probably be scanning you lawbreakers.' [he-she-c] nods and smiles, faux-friendly, and you turn back to the blabber babbler." instead;
	if current action is attacking, say "Bad idea. The Rehabs Basher can, er, bash and re-bash." instead;

section reflections

The Help Stamp Hemp SPLAT pamphlets are a plural-named thing. printed name is "[i]Help Stamp Hemp: SPLAT![no line break][r]".

after doing something with pamphlets:
	set pronoun it to pamphlets;
	continue the action;

description of pamphlets is "It's a list of thirty-odd sentences beginning [b]I USED TO[r]. It's in hard-hitting simple language but no less painful to read for all that. I will spare you the details--a brochure's such a borer[one of][or], but the second time through, you read it faster. FASTER. HAHAHAHA[stopping]." [bold-ok]

a-text of pamphlets is "YYRRYRY". b-text of pamphlets is "YGRRYRY". parse-text of pamphlets is "-[sp]U[sp]x[sp]x[sp]-[sp]x[sp]-".

volume routes

check going outside when mrlp is routes: [?? what if cur-score of routes is 0]
	if mrlp is routes and outside-warned is false and cur-score of routes > 0:
		say "(That's a preposition, but it's not one you need.)";
		now outside-warned is true;

book quest-items

a quest-item is a kind of thing.

after taking inventory:
	if number of carried quest-items is 3,say "You should go back to the Cleric Circle now.";
	if number of carried quest-items > 0, say "You're on your way to helping Brother Horbert.";
	continue the action;

the specification of quest-item is "One of three items needed for Brother Horbert's potion."

check objasking brother horbert about a quest-item:
	if player has second noun, try giving second noun to brother horbert instead;
	say "'Found it? ... Find out! Do it! Fun!' Brother Horbert looks slightly guilty at his impatience and vagary, afterwards[one of]. But the mesa doesn't seem too big--what you need can't be far off[or][stopping]." instead;

book Same Mesa

when play begins (this is the make one way passages rule):
	now same mesa is mapped outside idle deli;
	now same mesa is mapped outside adobe abode;
	now same mesa is mapped outside cleric circle;
	now horned hedron is mapped outside end den;

Same Mesa is a room in Routes. last-loc of routes is Same Mesa. "Routes lead in all directions here, but they seem to twist before going anywhere[if worst ad is in Same Mesa]. Far off, beyond the perimeter of the poison stripe, you can see the worst ad you've ever seen[go-worst][end if].[paragraph break]You see three places to enter: [if cleric is visited]back into the Cleric Circle[else]a Cleric Circle, covered by scripture picturers, looks almost welcoming[end if]. [if adobe is visited]Oscar's is back across[else]There's an Uhh Tut Hut with lairage regalia[end if], and [if Idle Deli is visited]you can go back past to Pat's[else]a resto store advertises with an adsorbing signboard[end if].[paragraph break]Finally, [if Gast is moot]that [sit a nag] [Gast] sat on still lies here, but you're probably done with it[else if Gast is in Same Mesa][Gast]'s [sit a nag] lies here[else]there's a [sit a nag][one of] (okay, a bench, but this is Yorpwald,)[or],[stopping] which is rather big, so it must be a giant's[end if].". roomnud of Same Mesa is table of Same Mesa nudges.

outside-text of Same Mesa is "[if a bev o be ova is off-stage]Any direction from the Same Mesa seems as bad or good as any other. Perhaps there will be better clues what to do if you look around[else]There's something new to observe here since you helped Brother Horbert. Maybe it will lead where you need to go[end if]."

after looking in Same Mesa:
	if Gast is in Same Mesa:
		it-him-her Gast;
	else if THE BEAN is not in Same Mesa:
		set the pronoun it to sit a nag;
	continue the action;

part verbs

chapter make sure they don't clash

[?? can we delete this?]

insideing is an action applying to nothing.

understand the command "inside" as something new.

understand "inside" as insideing.

carry out insideing:
	if player is in Same Mesa and Cleric Circle is unvisited, try fliptoing picturers instead;
	try going inside instead;

part people and things

chapter Gast

Gast is a male person. "[gast] sits here on the [sit a nag][if Rude N Nuder is in Same Mesa], waving something called Rude [']N Nuder in the air[else], going on some [i]tirades[r] about something or other. You're not sure if [he-she] needs space or someone to listen to[end if].". printed name of Gast is "[i-n] Gast".

understand "giant" as Gast when mrlp is routes.

description of Gast is "You can't do much more than listen to [gast]. [if sit a nag is reflexed]You're not sure what [he-she]'s complaining about, but it seems [he-she] really needs to[else if WOE BOW BELL is reflexed][his-her-c] is drowned out by [the woe bow bell][else][he-she-c] seems to be half gesturing for you to have a seat, which is ironic, because only half a seat is left[end if]."

check taking Gast: say "You'll have to take [his-her]'s babble, but not [him-her]." instead;

check scaning Gast (this is the scan other things than Gast instead rule):
	if side art is reflexive, try scaning the side art instead;
	if WOE BOW BELL is reflexive:
		say "The settler registers something everywhere you point it, probably due to [the woe bow bell].";
		try scaning WOE BOW BELL instead;
	if nuder is touchable:
		say "The settler only registers when it's pointed at Rude [']N Nuder.";
		try scaning nuder instead;

chapter tirades

tirades are scenery. "They're not very good tirades[if nuder is touchable], but they're all about Rude [']N Nuder[else if side art is reflexed], and you're more concerned about [the WOE BOW BELL][else], but maybe you could position yourself better to listen to them[end if]."

check scaning tirades:
	if side art is reflexive, try scaning side art instead;
	if WOE BOW BELL is reflexive:
		say "The settler stays lit whether you scan the tirades. Must be [the WOE BOW BELL].";
		try scaning WOE BOW BELL instead;
	say "The settler really lights up when [Gast] waves the book at it.";
	try scaning Nuder instead;

chapter poison stripe

the poison stripe is boring scenery in Same Mesa. description of poison stripe is "You can't really see it, but you can feel it pushing you away if you wander close to it.". bore-text is "You can really only sense the poison stripe, which is all you need to do. You will need to look around for a way out."

chapter snatchier chantries

the snatchier chantries are scenery in Same Mesa. "The snatchier chantries [if scripture picturers are reflexive]seem to twist about. They don't seem as welcoming as an entry to a place of worship should. Maybe the scripture picturers above can help you out[else]seem more welcoming now that you figured the scripture picturers[end if]."

check entering snatchier chantries:
	if gast is touchable, try fliptoing snatchier chantries instead;
	try going inside instead;

does the player mean doing something with rs:
	if player is in Same Mesa, it is likely;
	it is unlikely.

chapter rs (private routes)

rs are privately-named boring scenery in Same Mesa. understand "routes" as rs. printed name of rs is "routes". description of rs is "Staring at them makes you lose your sense of direction even further.". bore-text is "They're painful to think about for too long. They wind together and go off in the distance and loop around."

chapter scripture picturers

the scripture picturers are reflexive flippable scenery in Same Mesa. "Parish of Satin Saint Astin[paragraph break][if Cleric Circle is unvisited]Six letters below, in red, which seem to flip between odd misleading messages, but right now, they say: [scriran][else]The picturers now say: Pal, Meet a Temple! Hubris-b-rubbish[end if]!".

to say scriran: say "[one of]Dine? SI[or]DIE SIN[or]Ed is In[cycling]" [bold-ok]

understand "scripture picture/picturer" as picturers.
understand "picture/picturer" as picturers.

a-text of scripture picturers is "YRRYRY". b-text of scripture picturers is "YRRYRY". parse-text of scripture picturers is "-[sp]x[sp]x[sp]-[sp]x[sp]-".

check taking the scripture picturers: say "Appropriation of church property! [if Cleric Circle is visited]Brother Horbert[else]Whoever's in there[end if] wouldn't deserve that." instead;

sign-pushed-prompt is a truth state that varies.

after scaning scripture picturers:
	if cheat-on is true and sign-pushed-prompt is false:
		now sign-pushed-prompt is true;
		say "Man! That wasn't helpful at all! The sign does look a bit wobbly, though, and you know these things are two-sided. Give it a push?";
		if the player yes-consents, try pushing scripture picturers instead;
		say "Well, if you feel like it later, the sign or whoever put it there will forgive you."

inwarn is a truth state that varies.

in-try is a truth state that varies.

to say aop:
	say "[if Adobe Abode is not visited][b]PAST[r][else if Idle Deli is not visited][b]ACROSS[r][else][b]PAST[r] or [b]ACROSS[r][end if]";

check entering the snatchier chantries:
	if Cleric Circle is unvisited, say "The Cleric Circle's doors are open to all, but one does not enter it by brute forcing directions." instead;
	say "You re-enter, no longer worried about the exact preposition for doing so.";

chapter Uhh Tut Hut

the Uhh Tut Hut is auxiliary scenery in Same Mesa. "Yorpwaldian Uhh Tut Huts are usually round and house a grouchy resident, one who wants to see people in order to complain to them a bit.[paragraph break]The lairage regalia announces the Uhh Tut Hut's owner. That might be a helpful clue."

check entering Uhh Tut Hut:
	if Gast is in Same Mesa, try fliptoing lairage instead;
	if Adobe Abode is unvisited:
		now oscar-annoy is true;
		say "You try going directly to Oscar's, but the place curves away from you." instead;
	else:
		if oscar-annoy is true:
			say "No more funny business from Oscar's. You walk in without having to pretend to walk away.";
			now oscar-annoy is false;
		now player is in Adobe Abode;
	the rule succeeds;

does the player mean scaning Uhh Tut Hut: it is likely.

understand "oscar's/oscars/oscar" and "sos/arc" and "sos arc" as the Uhh Tut Hut when player is in Same Mesa.

the lairage regalia is reflexive scenery in Same Mesa. "[one of]As Yorpwaldian lairage regalia go, it's cheerless and unwelcoming. It says: [or][stopping][b][ast]Oscar's SOS ARC[ast][r]. [if Adobe Abode is visited]Well, Oscar wasn't so bad[else]Whoever's in there will probably be a bit of a complainer[end if]."

to say ast: say "[if screenread is true] ** [end if]"

check scaning Uhh Tut Hut:
	say "The uhh tut hut gives nothing, but the lairage regalia above it gives a reading.";
	try scaning lairage regalia instead;

a-text of lairage regalia is "YRRYRR". b-text of lairage regalia is "YRRYR?". parse-text of lairage regalia is "UNIQUE". lairage regalia is parse-spoilable.

chapter resto store

the resto store is auxiliary scenery in Same Mesa. "The resto store looks terribly plain, but it's somewhere to eat. There's a signboard indicating whose it is."

check entering resto store:
	if Idle Deli is unvisited, say "You try to do so, but the building shifts further away." instead;
	if Gast is in Same Mesa, try fliptoing signboard instead;
	say "You walk back into Pat's Idle Deli more confidently the second time. The building does not shift.";
	now player is in Idle Deli instead;

check scaning resto store:
	say "The adsorbing signboard gives a reading.";
	try scaning adsorbing signboard instead;

does the player mean scaning resto store: it is likely.

the adsorbing signboard is reflexive scenery in Same Mesa. "[b][ast]Pat's Stap[ast][r][one of] (ugh! You cringe at the forced short-a anagram, as well as how Elvira blamed you for this sort of thing.)[or][stopping][paragraph break]Only the fliest filets![paragraph break]Hopefully, that's figurative and not literal. You also note the intended pronunciation of Stap is probably Stahp, because that sort of forced anagramming is abused in Yorpwald these days. True, there are bigger problems, but..."

understand "sign/board" and "adsorbing sign/board" as signboard.

understand "pats/pat" and "pats/pat stap" as the resto store when player is in Same Mesa.

a-text of adsorbing signboard is "RYRR". b-text of adsorbing signboard is "??RR". parse-text of adsorbing signboard is "?[sp]?[sp]x[sp]T". adsorbing signboard is any-spoilable.

does the player mean entering the Uhh Tut Hut:
	if lairage regalia is reflexed, it is very likely;
	it is likely;

does the player mean entering the resto store:
	if adsorbing signboard is reflexed, it is very likely;
	it is likely;

check entering lairage regalia: try entering Uhh Tut Hut instead;
check entering adsorbing signboard: try entering resto store instead;

chapter bench

the anti sag sit a nag is reflexive scenery in Same Mesa. "[if Gast is in Same Mesa][Gast]'s on it, and [he-she] covers enough of it, you could only half squeeze in between [him-her] and the armrests[else if Gast is off-stage]It'd be a chore to sit on--it looks like it's a giant's. Probably because the words A GIANT'S are painted where you would sit. Maybe they will arrive[touch-sag-clue][else][Gast] probably won't be around here any more[end if].". printed name of anti sag sit a nag is "anti-sag sit-a-nag". understand "bench" as sit a nag when mrlp is routes.

nag-touched is a truth state that varies.

to say touch-sag-clue:
	if sit a nag is prefigured, continue the action;
	if nag-touched is true, continue the action;
	say ". Perhaps TOUCHing it would give a clue, too"

check entering the anti sag sit a nag:
	say "[if Gast is moot]You don't need to fool with the [sit a nag] any more.[else if Gast is touchable][Gast] is more worth focusing on, now[else]From the size, the [sit a nag] seems to be [i]a giant's[r]. If [he-she] came along, [he-she] could sit on you pretty easily.[end if]" instead;

check touching sit a nag:
	if gast is touchable and sit a nag is reflexive:
		now nag-touched is true;
		say "You see red and pull your hand back, reflexively screaming 'Sting! Aa!'" instead;

check taking sit a nag: say "The [sit a nag] is too big." instead;

a-text of anti sag sit a nag is "YRYYRRR". b-text of anti sag sit a nag is "?RY??RR". parse-text of anti sag sit a nag is "?[sp]x[sp]-[sp]?[sp]?[sp]x[sp]x".

check scaning sit a nag:
	if Gast is off-stage, continue the action;
	if sit a nag is reflexed:
		if side art is reflexive:
			say "The settler blinks a bit during each lull in [Gast]'s tirades.";
			try scaning side art instead;
		if WOE BOW BELL is reflexive:
			say "Everywhere you scan, the same setting. It's as ubiquitous as [the WOE BOW BELL].";
			try scaning WOE BOW BELL instead;
		if nuder is touchable:
			say "Nothing happens until [Gast] starts waving Rude [']N Nuder in your face.";
			try scaning rude instead;
	if Gast is moot, say "There's no more magic in the [sit a nag]. Nothing more to do." instead;

section side art

the side art is part of the anti sag sit a nag. description of side art is "Boy! There's a lot here.". the side art is reflexive.

a-text of side art is "YRRRYRY". b-text of side art is "YRRRYRY". parse-text of side art is "-[sp]x[sp]x[sp]x[sp]-[sp]x[sp]-".

check taking side art: say "The [sit a nag] is too well made." instead;

chapter WOE BOW BELL

the WOE BOW BELL is vanishing boring thing. description of WOE BOW BELL is "You can only hear it. You can't help hearing it. But maybe if you [b]LISTEN[r], it could provide a clue.". "The [WOE BOW BELL] continues to clang in the distance.". bore-text is "You can only hear [the WOE BOW BELL]. It makes you see red.". bore-check of woe bow bell is bore-bell rule.

this is the bore-bell rule:
	if current action is taking, say "The [WOE BOW BELL] is distant and loud." instead;
	if current action is listening, now boring-exception is true;

a-text of woe bow bell is "RYRYR". b-text of woe bow bell is "RYRYR". parse-text of woe bow bell is "x[sp]E[sp]x[sp]O[sp]x". woe bow bell is parse-spoilable.

chapter Rude N Nuder

Rude N Nuder is a vanishing boring thing. description of Rude N Nuder is "You aren't able to see the inside, and that's probably a good thing. People do tend to get worked up a bit more than they should about this sort of 'work,' whether extolling freedom of speech or saying how tasteless it is.". bore-text of Rude N Nuder is "You don't need to do anything special with [nuder]. Well, maybe apart from the special stuff you've been doing so far this game.". printed name is "Rude [']N Nuder".

a-text of Rude N Nuder is "YRRYR". b-text of Rude N Nuder is "YRPG?". parse-text of rude n nuder is "U[sp]x[sp]D[sp]E[sp]x". Rude N Nuder is parse-spoilable.

does the player mean doing something with Rude N Nuder when Rude N Nuder is touchable: it is likely.

section U NERD ENDUR REDUN

U NERD ENDUR REDUN is a proper-named uncluing quest-item. description of U NERD ENDUR REDUN is "It's definitely runed. A glimpse on the inside, though, gives you a pretty good idea that even if you understood the runes['] basic meaning, you aren't the one to grasp the subtleties needed to use it and invoke its powers. After all, ENDUR = ender or endure, and REDUN = redone, readin['] or redundant. Whew!". bore-text of U NERD ENDUR REDUN is "Best not try anything fancy. You probably want to get that book back to [if list o toils is examined]Brother Horbert[else]someone who can use it properly[end if].". [bold-ok]

printed name of U NERD ENDUR REDUN is "U NERD: ENDUR (REDUN)". [bold-ok]

after printing the name of U NERD ENDUR REDUN while taking inventory: say " (runed)"

understand "runed/book" and "runed book" as U NERD ENDUR REDUN.

does the player mean doing something with U NERD ENDUR REDUN when U NERD ENDUR REDUN is touchable: it is likely.

chapter worst ad

the worst ad is LLPish vanishing scenery in Same Mesa. "Dang it, a giant ad for [first custom style]RADWOST[r], and it's all in red, but it's too lousy to determine what [first custom style]RADWOST[r] is about. Maybe if you point your settler at it, you can pick it up. You're not sure how best to approach it, with all these twisty roads. You're not sure if you need to, really."

to say go-worst: if worst ad is prefigured, say "--the one you tried to go [b]TOWARDS[r] with [Gast] around";

a-text of worst ad is "RYRYRRR". b-text of worst ad is "R??Y??R". parse-text of worst ad is "x[sp]?[sp]?[sp]-[sp]?[sp]?[sp]x". worst ad is parse-spoilable.

check taking worst ad: say "You'd need to get closer. Which isn't easy." instead;

chapter MORF FORM

the MORF FORM is a flippable thing. description is "It's huge all right. And it's a thing. It could cloud the stripe for a while. Perhaps it is what the priest summoned. If you could bring it down, maybe you could see what it is.". "The [MORF FORM] hangs menacingly above. You can't just leave it there."

printed name of MORF FORM is "MORF-FORM" [bold-ok]

check taking MORF FORM: say "It'd crush you. You need another way to bring it down." instead;

check going when MORF FORM is touchable: say "That [MORF FORM] is lingering threateningly. Maybe you should deal with it now." instead;

a-text of MORF FORM is "RRYR". b-text of MORF FORM is "?RY?". parse-text of morf form is "x[sp]x[sp]O[sp]x". MORF FORM is any-spoilable.

chapter THE BEAN

There is a vanishing thing called THE BEAN. it is scenery. description of THE BEAN is "It's not just any bean. It's stamped [THE BEAN] in all-red letters. In case you were wondering if it was an egg or something, I guess.". printed name of THE BEAN is "[b]THE BEAN[r]".

check taking THE BEAN:	say "You can't move it. Maybe you can find a way to get inside or under--wait, no, those have been done here." instead;

check entering THE BEAN: say "It doesn't appear cracked." instead;

a-text of THE BEAN is "RYRYYRR". b-text of THE BEAN is "RYRYYRR". parse-text of the bean is "x[sp]E[sp]x[sp]E[sp]A[sp]x[sp]x".

check going when THE BEAN is in Same Mesa and player is in Same Mesa:
	if noun is down, say "Maybe there is something below, or something. But you can't prove it." instead;
	say "You are transfixed by [THE BEAN] and how to get around it." instead;

chapter A Bev O' Be Ova'

A Bev O Be Ova is a proper-named thing. printed name is "A Bev['] O['] Be Ova[']". "[one of]A bottle rattles out from the wastes and stops at your feet. It's ... it's [be ova]! You've seen these before. They're usually given to people in Yorpwald to pretend like the end is closer than it actually is. The gift usually feels a bit forced, but in the right situation, it can help them fool themselves into persisting at something they need to do when giving up seems more sensible.[or]You still see [be ova] at your feet. You're not thirsty, but it might be useful.[stopping]". bore-text of A Bev O Be Ova is "It's not to drink, but it is a clue where to look next.". bore-check of A Bev O Be Ova is the bore-bev rule. description is "It's unopenable, and you're not sure if you'd want to drink what's inside. But hey, maybe it's some sort of unsubtle hint or nudge in the next direction to go or look."

a-text of A Bev O Be Ova is "YRYRY". b-text of A Bev O Be Ova is "???PY". parse-text of a bev o be ova is "?[sp]?[sp]?[sp]V[sp]E". a bev o be ova is parse-spoilable.

this is the bore-bev rule:
	if current action is drinking, say "No. You know you're nowhere near the end, and you don't just want to give up. [bev] has a different message." instead;

book Cleric Circle

Cleric Circle is an innie room in Routes. "Things seem less confused here than outside--but oppressive, from organs['] groans to a Latiny litany to skyier kyries. Chants snatch but don't stanch[if list o toils is touchable]. You see a list-o-toils on the wall[end if]. Of course, there are Spew Pews, a common legacy from Elvira's suggestions to make religion more exciting and practical, along with a lament-mantle.". roomnud of cleric circle is table of cleric circle nudges.

exits-text of Cleric Circle is "[only-mesa].".

to say only-mesa: say "You can only go back out to the Same Mesa"

after looking in Cleric Circle:
	if number of held quest-items is 3:
		mootl list of all quest-items;
		say "'You have all the reagents! Wonderful!' Brother Horbert sniffs the pipe soot. 'Pope Otis brand! Wow! Even better than Opie Post or P. S. Pie too!'[paragraph break]The priest gains esprit. 'Mixture...mixture...true mix! To censor crones like the Spiter Sprite and repeal the red orb border, changing the moronic omicron to dreamiest diameters, nag ol['] No-Lag Logan beyond an un-road to dig an urn during an... rarify this friary ... act divine. Vindicate.' He rushes off to a private office.[paragraph break]No-Lag Logan. That's an odd name. You write it down.";
		pad-rec "No-Lag Logan";
		moot Brother Horbert;
		pad-del "reagents";
		move a bev o be ova to Same Mesa;
	continue the action;

after printing the locale description for Cleric Circle when Cleric Circle is unvisited (this is the reveal snoop spoon rule):
	say "(press any key)[wfak][paragraph break]";
	say "Brother Horbert steps on something that flips up into the air and into your hands! He points at you. 'It...you...I was told...the spoon must be for you!'[paragraph break]He explains it is a snoop spoon, one that helps the right person--the one it chooses--to examine it for direction when needed. Apparently you have to tilt it right so all the rays or whatever get focused at the focal point, but you can figure that out as you go.";
	now player has snoop spoon;

check going outside when player is in Cleric Circle (this is the horbert-bye rule):
	if toils is unexamined or pews are unexamined:
		if toils are in Cleric Circle:
			say "You look back at the [if toils is examined]pews[else if pews are examined]list-o-toils[else]pews and list-o-toils[end if]. Perhaps closer inspection might give you [if toils is examined]the 'why'[else if pews are examined]the 'what'[else]the 'what' and 'why'[end if] for dealing with the directionless Same Mesa.[paragraph break]";
	say "[randbla]";
	now player is in Same Mesa instead;

chapter brother horbert

Brother Horbert Berroth is a person in Cleric Circle. description is "Slightly anxious, and in the usual black clerical garb.". "[one of]You see a man muttering, 'Only hope? Holy peon!' He turns and blinks. 'Greetings! I am Brother Horbert Berroth. Father Hafter and Veteran Rev. [n-t] are not here to help with the colossal local SOS from the previous viperous pious rev.'[paragraph break]'Some people call me the Oopsin['] Priest because...oops!'[or]Brother Horbert, the oopsin['] priest, paces about here.[stopping]"

printed name of Brother Horbert is "Brother Horbert".

understand "oopsin priest" and "oopsin/priest" as Brother Horbert

to say pri-who: say "[if list o toils is examined]Brother Horbert[else]someone[end if]";

check giving something to Brother Horbert:
	if noun is a quest-item, say "You should maybe wait to give Brother Horbert all the reagents first. He would probably forget where he put the [noun]." instead;

chapter snoop spoon

the snoop spoon is a thing. description is "The spoon looks pretty normal despite the powers Brother Horbert claims it has."

snoop-warn is a truth state that varies.

check examining snoop spoon:
	if scams is false:
		if snoop-warn is false:
			now snoop-warn is true;
			say "Examine the spoon at just the right angle, for a hint?";
			unless the player regex-prompt-consents:
				continue the action;
	now spoilit is true;
	abide by the routes-hinting rule;
	now spoilit is false;
	the rule succeeds;

chapter silly circle scenery

to say not-upb:
	say "Not the most upbeat music, but then, you aren't here for art critiques"

section latiny litany

the latiny litany is amusing boring scenery in Cleric Circle. "[not-upb].". bore-text is "The music is there just to provide spiritual atmosphere."

section skyier kyrie

the skyier kyries are amusing plural-named boring scenery in Cleric Circle. "[not-upb].". bore-text is "The music is there just to provide spiritual atmosphere."

section spew pews

the spew pews are amusing plural-named scenery in Cleric Circle. "You rifle absentmindedly through the pews some more, but nothing turns up."

check searching pews: try examining pews instead;

check looking under pews: try examining pews instead;

check entering pews: say "A voice seems to intone: '[']Tis no sin to sit on, is...? NOT!'" instead;

check examining the pews when Mum Rays Summary is off-stage:
	say "You search through the pews, just as when you were a kid, looking for anything, maybe a note from the last person. You found something from yourself, once. But this time, something actually turns up! It's been hidden carefully, tucked where two woody bits are glued together. Mum Ray's Summary![paragraph break]An initial glance reveals nothing about Mum Ray's identity. Is it a woman with a last name of Ray? A silent fellow named Ray who preferred to write? Or just a pen name? They probably needed the anonymity, with the power Rev. Ali had, and either way, there's a lot to read.";
	now player has the summary instead;

section Mum Ray's Summary

Mum Rays Summary is a thing. description of Mum Rays Summary is "[part-of-summary]". printed name is "Mum Ray's Summary".

check closing Mum Rays Summary:
	say "You fold up the summary and start at page 1.";
	now summary-page is 1;
	try examining Mum Rays Summary instead;

check opening Mum Rays Summary:
	try closing Mum Rays Summary instead;

understand "mum ray" and "ray summary" and "ray" and "mum ray summary" as Mum Rays Summary when mrlp is routes.

to say part-of-summary:
	increment summary-page;
	choose row summary-page in the table of mum ray summary pages;
	say "[sum-page entry]";

summary-page is a number that varies. summary-page is usually 0.

table of mum ray summary pages
sum-page
"The story starts with Rev. Ali being violently opposed to Elvira. He dropped by the Same Mesa, and many people followed him. He was constantly yelling how she was too exciting, and the way to fight back was not to get swept up in her newness and be happy enough, you guess."
"People listened to Rev. Ali, and his austerity helped prevent hearing about Elvira's latest charm offensive. But he got more and more severe, restricting where people could go, and even directions how to get there. If people knew where they wanted to go, and it was really important, they'd get there."
"Then Elvira dropped by. Rev. Ali took the time to admit he was wrong! In doing so, he informed the residents of the Same Mesa that they would do well to follow his lead. Terrified, they accepted. Elvira's excitement had matured, and he didn't realize how good she was at pointing out people's faults. It would help to improve them."
"Rev. Ali left, but with one final 'character-building' challenge. The roads out of the Same Mesa would lead nowhere until someone found a new clever way out beyond them. And if nobody found the way out--well, there were some wise guys who were all about thinking for yourself. Maybe they were not as good at it as they claimed to be."
"It was rumored Rev. Ali moved on to a new community to 'help.' His legacy remains, though. People are not willing even to visit Pat's and Oscar's. Why should they? The Same Mesa is a mix of countermanding and warnings about what you can't do, and how you can't even get the basics right, like cardinal directions. Someone needs to break through, somehow."

after examining summary (this is the notify last summary page rule) :
	if summary-page is number of rows in table of mum ray summary pages:
		say "Whew. That was the last page.";
		now summary-page is 1;
	else if debug-state is false:
		say "Push P to read the next page (you're at [summary-page] of [number of rows in table of mum ray summary pages]).";
		let cho be the chosen letter;
		if cho is 80 or cho is 112:
			try examining the summary;
			the rule succeeds;
		else:
			say "Okay. You'll start at the next page, next time. You can [b]OPEN[r] or [b]CLOSE[r] the summary to start at the first page.";
			the rule succeeds;
	the rule succeeds;

chapter lament mantle

the lament mantle is useless scenery in Cleric Circle. "[one of]It's full of regrets. Regrets Rev. Ali and his hangers-on have that people do certain things, and regrets those people will have that they did them[or]Another interdict[stopping]. [pious1][randbla][one of], full of tarnished sin-hatred and obliged god-bile for your sinner inners[or][stopping]. [one of]Their creeds-screed contains[or]Another no-heart rant, e-oh:[stopping] [pious1][randbla]"

check examining lament mantle for the first time:
	say "Just a small check-off: there's some religious stuff in here, poking fun at hot button issues. This might be annoying, and I don't want do do that. Do you wish to go ahead?";
	unless the player dir-consents, say "Okay. This warning will vanish next time." instead;
	say "Man! Whoever wrote this is a grouch. You have morals and all, but geez."

check asking Brother Horbert about: say "Brother Horbert shrugs. 'I should know more about the exotic outside world, but it's hard, with the poison stripe.'" instead;

to say pious1: [otherwise the picture has trouble with randbla for random stuff]
	now pious-state is whether or not pious-state is false;

pious-state is a truth state that varies.

chapter list o toils

does the player mean doing something with the list o toils:
	if player is in Cleric Circle:
		it is likely;
	it is unlikely.

the list o toils is scenery in Cleric Circle. "[list-o-toils-text]"

understand "list-o-toils" as list o toils.

understand "recipe" as list o toils.

read-list is a truth state that varies.

to say list-o-toils-text:
	say "Precise recipes # 2: Mix of reagents greatens. Fix mo['].[no line break]";
	repeat with QQ running through quest-items:
		say "[line break]([if QQ is enclosed by the player]Y[else]N[end if]) [if qq is u nerd]runed book[else][QQ][end if]";
	if read-list is false and Brother Horbert is touchable and number of quest-items enclosed by player < 3:
		say "[line break]";
		pad-rec "reagents";
		say "[paragraph break]Brother Horbert mumbles something about how if they had any reagents left around here, they'd have used them, but they don't.[no line break]";
		now read-list is true;

book Adobe Abode

Adobe Abode is an innie room in Routes. "A dilapidated residence with a trashy ashtray, which [if pipe soot is in Adobe Abode]could use some emptying[else]you emptied, so there's probably not much left to do here[end if]. The only exit is out to the Mesa.".roomnud of adobe abode is table of adobe abode nudges.

exits-text of Adobe Abode is "[only-mesa].".

check exiting in Adobe Abode: try going outside instead;

check going outside in Adobe Abode:
	say "You leave the adobe/abode.";
	now player is in Same Mesa instead;

chapter oscar

Oscar is a person in Adobe Abode. description is "He gives a weary hi. 'Haywire.'". "[one of]Someone who must be Oscar, this being Oscar's and all,[or]Oscar[stopping] mopes around here, probably not willing to talk about more than himself."

chapter ashtray

a trashy ashtray is boring scenery in Adobe Abode. description of a trashy ashtray is "[if pipe soot is in Adobe Abode]The ashtray is full of pipe soot, but at least, no Pepsi too[else]You emptied the ashtray[end if].". bore-text is "You can't do much with the ashtray besides be all 'Artsy, ha!' or 'Ay, trash.'". bore-check is the bore-ashtray rule.

understand "ash/tray" as ashtray.

this is the bore-ashtray rule:
	if current action is sbing or current action is scaning:
		if player does not have pipe soot:
			say "Only the pipe soot does anything to the settler, so you focus on that.[paragraph break]";
			try scaning pipe soot instead;

oscar-annoy is a truth state that varies. oscar-annoy is usually false.

chapter pipe soot

some pipe soot is a reflexive singular-named quest-item in Adobe Abode. it is scenery. the indefinite article of pipe soot is "some".

check taking the pipe soot when soot is in adobe:
	say "Oscar snaps at you. 'Hey! Whoa! No stealing! Even worthless stuff!'[paragraph break]Maybe if you could position yourself so he can't see you taking it." instead;

a-text of pipe soot is "YRRYRYRY". b-text of pipe soot is "YRPYPYRY". parse-text of pipe soot is "-[sp]x[sp]P[sp]-[sp]S[sp]-[sp]x[sp]-".

the description of pipe soot is "If you picked it apart, which you don't need to, there might be evidence it was once tobacco. It actually smells more like some fruit you can't, and won't, recognize."

check eating pipe soot: say "Well, it doesn't [b]SMELL[r] that bad, but...umm, no." instead;

book Idle Deli

Idle Deli is an innie room in Routes. "This restaurant has no customers and little ambience, not even pie crust pictures by Stu Price. But there are craving carvings, and ants be absent. You can go back out to the outback, err, the Same Mesa.[paragraph break]A seed pit gapes at you[unless stupor sprout is off-stage], but you already got the stupor sprout from there[end if].". roomnud of idle deli is table of idle deli nudges.

exits-text of Idle Deli is "[only-mesa].".

after looking in Idle Deli:
	set the pronoun him to pat;
	set the pronoun her to pat;
	set the pronoun it to pat;
	continue the action;

Pat is a person in Idle Deli. description is "Pat looks beaten down from the lack of business.". "[one of]'Lint? Use utensil. Fix store for exits...' mumbles some poor soul, presumably Pat. 'Oh! A customer!'[or]Pat is still plodding here.[stopping]"

check exiting in Idle Deli:
	say "You leave Pat's Idle Deli.";
	now player is in Same Mesa instead;

check going outside in Idle Deli:
	try exiting instead;

chapter seed pit and cravings carvings

The cravings carvings are plural-named auxiliary scenery in Idle Deli. "All sorts of food doodles are here, and if you [b]READ[r] them, they might form a message, too."

a-text of cravings carvings is "RYRRYRY". b-text of cravings carvings is "RYRRYRY". parse-text of cravings carvings is "x[sp]E[sp]x[sp]x[sp]I[sp]x[sp]E".

a stupor sprout is a boring quest-item. description of stupor sprout is "Just looking at it makes you feel relaxed and happy and dopey. But not too dopey!". bore-text of stupor sprout is "Best not do anything to alter the stupor sprout. [if toils is examined]Brother Horbert will know what to do with it[else]It looks a bit arcane[end if]."

the seed pit is reflexive scenery in Idle Deli. "[if stupor sprout is off-stage]It's ugly and moldy but you find yourself thinking, if I had just one reason to go in there, against any warnings...[else]You got through okay once, but you don't want to know what might sit deep in there.[end if]"

understand "seedpit" as seed pit.

a-text of seed pit is "RYRRYRY". b-text of seed pit is "RGRRYRY". parse-text of seed pit is "x[sp]E[sp]x[sp]x[sp]-[sp]x[sp]-".

check entering seed pit: say "[if stupor sprout is off-stage]Pat holds you back, warning 'best [first custom style]SPEED IT[r] away from there!' You see red at the odd-sounding admonition[else]You already got the stupor sprout from there. Don't be greedy[end if]." instead;

book Harms Marsh

Harms Marsh is an innie room in Routes. description of Harms Marsh is "You are in a Harms Marsh, which you know to be full of sheol-holes, so tricky to find even in full light. [if darkness is touchable][paragraph break]And this area seems like it was always unlit... but you intuit null about how to change that...[else if un road is in Harms Marsh]Now you've found the un-road to get to No-Lag Logan, how to navigate it?[else]Now, you need to find No-Lag Logan. You need to find a good unroad...because roads and inroads will loop back. Perhaps the odd run on aura will help you with that.[end if]". roomnud of harms marsh is table of harms marsh nudges.

after looking in Harms Marsh:
	set the pronoun them to sheol holes;
	set the pronoun it to sheol holes;
	continue the action;

chapter useless scenery

section Sheol Holes

the Sheol Holes are plural-named reflexive boring bounding scenery in Harms Marsh. description of Sheol Holes is "You can't nail down where the Sheol Holes are, but you do know you need to be careful[one of].[paragraph break]They're just there as an agent to make you find the right way out. Oh, Sheol is the Old Testament name for Hell, if you were wondering. TMYK![or].[stopping]". bore-text is "The Sheol Holes are to be avoided by moving, well, some unusual way or other."

understand "hole" and "sheol hole" as sheol holes when player is in Harms Marsh.

section stripey pyrites

the stripey pyrites are useless scenery. "The pyrites look pretty, but you're not here for a treasure hunt. You're here to find No-Lag Logan."

check taking stripey pyrites: say "Take a hint from them, where they may lead you." instead;

chapter stuff to flip

section NULL IT unit

the NULL IT unit is a vanishing boring thing in Harms Marsh. description of NULL IT unit is "It seems to be a source of at least some of the darkness. It also seems like it's been here a good long while. It looks rather sturdy, but maybe there's a way to neutralize it.". initial appearance of NULL IT unit is "You think you can make out, just barely, see why things are so unlit: a [NULL IT unit].". printed name of NULL IT unit is "NULL-IT unit".

a-text of NULL IT unit is "YRRYR". b-text of NULL IT unit is "YRR?R". parse-text of null it unit is "-[sp]x[sp]T[sp]-[sp]x". NULL IT unit is parse-spoilable.

section darkness

the darkness is boring auxiliary scenery in Harms Marsh. description of darkness is "There's not much to see of the darkness. You just need to get rid of it.". bore-text is "You rage against the darkness, randomly thinking 'Ill unit, nut.' Well, you see red after that."

check scaning darkness:
	say "The darkness leaves your settler ... dark. But the [it unit] seems to pick up something.";
	try scaning null it unit instead;

to say to-o: say "Brother Horbert talked about how if you had faith, and patience to see them right, they might lead you to an un-road or to No-Lag Logan if you knew how to study them."

section odd run on aura

the odd run on aura is boring scenery. description of odd run on aura is "It seems to beckon you, but you're not sure how to follow it.". bore-text of aura is "It's ephemeral, just a guide."

a-text of odd run on aura is "YRYYRR". b-text of odd run on aura is "YRY?RR". parse-text of odd run on aura is "-[sp]R[sp]-[sp]-[sp]N[sp]D". odd run on aura is parse-spoilable.

section all noon gag

the all noon gag is a vanishing boring thing. "An all noon gag rests here. It's not useful, but maybe it can help you get near No-Lag Logan.". description of noon gag is "It seems to absorb light a bit. You don't want to take it, but maybe it can be useful.". bore-text is "The all noon gag might be too powerful to handle for too long. But maybe it can lead you in a new, positive direction.".

a-text of all noon gag is "YRYRR". b-text of all noon gag is "??Y??". parse-text of all noon gag is "?[sp]?[sp]-[sp]?[sp]?". all noon gag is parse-spoilable.

section un-road

the un road is vanishing boring scenery. description of un road is "The un-road must lead to No-Lag Logan. But how to follow it?". bore-text is "The un-road leads somewhere, you think. But how to follow it to No-Lag Logan?". printed name of un road is "un-road".

understand "trail" and "un/road/unroad" as un road when mrlp is routes.

a-text of un road is "YRYYRR". b-text of un road is "YRYYRP". parse-text of un road is "-[sp]R[sp]-[sp]-[sp]N[sp]D". un road is parse-spoilable.

book Ripe Pier

Ripe Pier is a room in Routes. "You're at a shore. An admits-mist ad advertises what are, apparently, data-dim mists behind. You just can't see, anyway. It looks dangerous to enter without a plan. But something must be behind. Perhaps No-Lag Logan's boat!". roomnud of ripe pier is table of ripe pier nudges.

after looking in Ripe Pier:
	set the pronoun it to admits mist ad;
	continue the action;

chapter two ways out

section data dim mists

the data dim mists are boring vanishing scenery in Ripe Pier. "There's not much to see in the data-dim mists, though you can probably munge the letters you need to get through them, so they're only dim, not totally dark.". printed name of data dim mists is "data-dim mists".

bore-check of data dim mists is bore-mists rule.

this is the bore-mists rule:
	if current action is taking, say "Mist-ake. Ha ha ha." instead;
	if current action is entering, say "Part of you admits it will be tricky to figure out. Maybe if you entered the mist behind the ad the right way, with a good plan... or even a bad one... it would work out." instead;

a-text of data dim mists is "YRYRRR". b-text of data dim mists is "Y??RRR". parse-text of data dim mists is "-[sp]?[sp]?[sp]x[sp]x[sp]x". data dim mists are parse-spoilable.

section admits mist ad

the admits mist ad is auxiliary boring scenery in Ripe Pier. description of admits mist ad is "Apparently, behind it are DATA-DIM MISTS. There must be some nonlinear way to navigate things, though. You might be able to [b]READ[r] parts of it in red for clues, though.".

a-text of admits mist ad is "YRYRRR". b-text of admits mist ad is "?RYRRR". parse-text of admits mist ad is "-[sp]x[sp]-[sp]x[sp]x[sp]x". admits mist ad is parse-spoilable.

book Cripple Clipper

Cripple Clipper is a room in Routes. "Hooray...or ahoy? This isn't quite the HMS SMH. It has no leeks for food or sleek keels for transport. You feel a case of sail-ails, not being able to get going.[paragraph break]There's a free reef in the distance, but you didn't get enough instructions how to get there. You can pretty clearly see mess-up spumes all around.[paragraph break]The thickness sketchins, presumably from Logan, are all you have to go on. A bit nonsensical, but maybe they'll give a clue where or how to adventure next. They're all you've got.". roomnud of cripple clipper is table of cripple clipper nudges.

the bad oar is a thing. description is "It looks weird, but hey, it got you aboard the Cripple Clipper.". "The bad oar that helped you aboard the Cripple Clipper lies here, but you probably need to figure how to work things in general here."

after looking in Cripple Clipper:
	set the pronoun it to free reef;
	set the pronoun them to thickness sketchins;
	continue the action;

chapter thickness sketchins

the thickness sketchins are plural-named vanishing scenery in Cripple Clipper. "They're thick, both physically (big letters) and in content, and you suspect they are Logan's opus about all his travels. They read:[paragraph break][bold type]WHAT, TAR? TA, WRATH THAT RAW! ART, THAW![roman type]" [bold-ok]

understand "sketchin" and "thickness sketchin" as thickness sketchins.

a-text of thickness sketchins is "YRRRYRR". b-text of thickness sketchins is "?RRR?RR". parse-text of thickness sketchins is "A[sp]T[sp]x[sp]x[sp]A[sp]x[sp]T". thickness sketchins are parse-spoilable.

[whattar tawrath thatraw artthaw <=> athwart]

chapter free reef

the free reef is boring useless scenery in Cripple Clipper. description of free reef is "It looks like where you want to go. But how?". bore-text is "The reef is far away. You need to find a way to navigate to it.". bore-check is bore-reef rule.

this is the bore-reef rule:
	if current action is scaning, say "The reef is too far away to scan, and you check the combination of letters anyway. Nothing. Perhaps what you need is on the Cripple Clipper." instead;

chapter mess up spumes

the mess up spumes are boring useless scenery in Cripple Clipper. description of mess up spumes is "The mess-up spumes fizzle all about. You can't seem to avoid them by a standard direction. You doubt they themselves will give you clues, but maybe Logan left a clue behind in the Cripple Clipper.". bore-text is "The spumes aren't going to help you get through them. You need advice from somewhere else.".

printed name of mess up spumes is "mess-up spumes".

book Sonancy Canyons

Sonancy Canyons is a room in Routes. "[if patters are in Sonancy Canyons]Raptest patters spatter, distracting you from your goal[else if hurt hog is not moot]With the raptest patters gone, you can probably [b]LISTEN[r] better[else]There can't be much left to do since you helped the hog and ewe[end if].[paragraph break]Spheric ciphers surround you and prevent passage out. [if yob den is in Sonancy Canyons]The yob den nearby now provides most of the noise and also provides a small break in the ciphers[else if hurt hog is reflexive]A hurt hog mumbling 'Urgh! Hot!' and a bent ewe moaning 'We be ten!' block your progress ahead[else]The hurt hog and bent ewe are gone now. But there is red writing in their place[end if].". roomnud of sonancy canyons is table of sonancy canyons nudges.

chapter hurt hog

the hurt hog is reflexive boring scenery in Sonancy Canyons. description of hurt hog is "The hog [if bent ewe is reflexed]seems more relaxed than before[else]is staring the poor bent ewe down. Maybe you can act as peacemaker[end if].". bore-text is "The hurt hog just grunts. You [if hurt hog is reflexive]need a little magic here[else]did what you could. It's doing well enough[end if]."

a-text of hurt hog is "RRRYYRR". b-text of hurt hog is "RRPYYRR". parse-text of hurt hog is "x[sp]x[sp]R[sp]-[sp]-[sp]x[sp]x".

chapter bent ewe

the bent ewe is reflexive boring scenery in Sonancy Canyons. description of bent ewe is "The bent ewe [if bent ewe is reflexed]seems freer now with you blocking the hog's view[else]seems frozen by the hurt hog's gaze[end if].". bore-text is "The bent ewe [if bent ewe is reflexive]looks scared of the hurt hog[else]won't be doing much, but you helped it,, so yay[end if]."

a-text of bent ewe is "RYRRYYR". b-text of bent ewe is "PGRRGYR". parse-text of bent ewe is "B[sp]E[sp]x[sp]x[sp]E[sp]E[sp]x". bent ewe is parse-spoilable.

chapter raptest patters

the raptest patters are plural-named vanishing LLPish boring scenery in Sonancy Canyons. description of raptest patters is "An over-cheery voice: 'Thou wit!'[paragraph break]A familiar voice...yours... 'Who, I? Tut!'[paragraph break]'Hut! I wot...'[paragraph break]You know, it's tough to know the best way to ignore this sort of flattering nonsense, but the right word generally blocks it out quickly enough.". bore-check is the bore-raptest-patters rule. bore-text is "All you can do with the raptest patters is [b]LISTEN[r]."

this is the bore-raptest-patters rule:
	if current action is listening, try examining the raptest patters instead;

chapter yob den

the yob den is vanishing scenery. "You're not sure the best way to deal with the yob den is to enter it. But what's a good way to avoid it?"

a-text of yob den is "RYOYRR". b-text of yob den is "RYOYRR". parse-text of yob den is "x[sp]E[sp]Y[sp]O[sp]x[sp]x". yob den is parse-spoilable.

chapter spheric ciphers

the spheric ciphers are bounding boring scenery in Sonancy Canyons. "You look into them and see nothingness. It would be bad to move too far away and risk getting too close to one.". bore-text is "The ciphers are nothing, and you can do nothing with them."

volume troves

book very basics

check going up in troves: say "Moving on up needs to be a state of mind here." instead;

check going down in troves: say "It is important to be down to earth as you work your way to the top, yes." instead;

purse-stolen is a truth state that varies.

chapter Pa Egg Pea (book)

Pa Egg Pea is a proper-named reflexive LLPish thing. printed name of Pa Egg Pea is "Pa, Egg, Pea"

after printing the name of Pa Egg Pea while taking inventory, say " ([if pa egg pea is reflexive]un[end if]grokked)";

does the player mean doing something with pa egg pea when mrlp is troves: it is likely.
does the player mean doing something with LEAD when mrlp is troves: it is very likely.

description of Pa Egg Pea is "[randbla]".

a-text of Pa Egg Pea is "RYRY". b-text of Pa Egg Pea is "??R?". parse-text of pa egg pea is "?[sp]?[sp]P[sp]?". pa egg pea is any-spoilable.

understand "book" as Pa Egg Pea.

check opening Pa Egg Pea:
	say "(to read it, I assume)[line break]";
	try reading Pa Egg Pea instead;

check examining Pa Egg Pea for the first time:
	say "[i]Pa, Egg, Pea[r], of course, recently topped [i][twiddle of table of self-help bestsellers and 1][r] and [i][twiddle of table of self-help bestsellers and 1][r] as the best-selling self-help book all-time in Yorpwald, at least until its promised sequels in the Tryin[']-it Trinity, [i]The MORE Theorem[r] and [i]No Guts? Go Nuts[r], appear. It combines overused success-story fables with spectacularly improbably leaps of logic to 'prove' both thinking your way to success and doing your way to success are more important than the other, and anybody who finds these to be a contradiction is just intellectually lazy.[paragraph break]The introduction explains YOU AND ONLY YOU must think up the way out of a tough situation.[paragraph break]A rudimentary flip through shows that it's full of aphorisms spouted by the main character, Gaga Pepe, and heavily invested in sustaining the personality cult of its author, Peg A. Page. You remember a suppressed review that went 'Ee! Gag! Pap!' and aren't sure of the best way to read it, if any. Though it's probably symptomatic of the times, you doubt it can help you with your specific situation[if cur-score of troves is 0], but it may help you get started[else], especially now you're started a bit[end if]." instead; [bold-ok]

book Loather Rathole

Loather Rathole is a room in Troves. last-loc of troves is Loather Rathole. "Nothing but bone-chilling poverty here in [one of]what must be [or][stopping]the forbidding Spoiloplis suburb of Retches-Chester. Of course, with all this lost hope, there are plenty of potholes about to distract you from moving up in the world. Every possible exit[if race acre is touchable], even the Race Acre,[end if] looks like a hurt thru[if tears taser is touchable]. You also detect a hidden tears taser, which may be a distraction from or warmup for your challenges ahead[end if].[paragraph break]Under the stinky tin sky, [if race acre is touchable]you see the Race Acre where the thief ran, but you're too bummed to follow, And you can't go back in[else][heat] stands. Lor['], [b]HEAT[r]! You're not getting back in. You feel the heat out on the street, but more importantly, you're feeling the loss of your super purse. You just aren't motivated to look for the thief. You temporarily lost the ability to emote when kicked out of [heat][end if].". roomnud of Loather Rathole is table of Loather Rathole nudges.

the hurt thru is bounding boring scenery in Loather Rathole. description of the hurt thru is "Every way there's a hurt thru, looking seedy and dangerous. Your sensible side knows better, but you also need to leave some way[care-hate-clue].". bore-text is "If you think about doing something with a hurt thru, it'll scare you away. You need to think about yourself, your situation, get emotionally involved. [care-hate-clue]."

to say care-hate-clue:
	say "[if race acre is touchable]Motivate yourself to get through the Race Acre[else]Find a substitute for [heat][end if]"

understand "hurt thrus" and "thrus" as hurt thru.

after looking in Loather Rathole:
	set the pronoun it to Eh At Heat;
	if Race Acre is in Loather Rathole, set the pronoun it to Race Acre;
	set the pronoun them to potholes;
	continue the action;

check looking in Loather Rathole for the first time: now the player has Pa Egg Pea.

after printing the locale description for Loather Rathole when Loather Rathole is unvisited:
	say "Skid Row, Wordski.";
	continue the action;

chapter eh at heat

Eh At Heat is boring reflexive scenery in Loather Rathole. "[eh at heat] is run-down, but it was a source of warmth. You could read it to find whom to contact to get back in ... not that you could actually do so.". bore-check of eh at heat is the bore-heat rule. bore-text of eh at heat is "There's probably no way back in, but maybe there's a similar way to warm yourself. Or bring your emotions to a boil.". printed name of Eh At Heat is "[i]Eh, At Heat[r]".

a-text of eh at heat is "RYRY". b-text of eh at heat is "?YRY". parse-text of eh at heat is "x[sp]A[sp]x[sp]E". eh at heat is any-spoilable.

this is the bore-heat rule:
	if current action is entering, say "[one of]You know you will get thrown out again, but maybe if you try to enter again, you will hear something that will help you.[or]You try to enter but lose your will at the last minute. Still, you hear' 'Tea! Hat? Eh!' It makes you see red.[stopping]".

chapter Race Acre

Race Acre is boring vanishing proper-named scenery. description is "You look over at Race Acre (and what's an acre doing in a big city?) but you're too worn out from hate to follow whoever stole your super purse. You need a different emotion.". bore-text of Race Acre is "Ho-hum. You should be motivated to follow that thief to Race Acre, but you can't.".

a-text of Race Acre is "RYRY". b-text of Race Acre is "R??G". parse-text of Race Acre is "C[sp]?[sp]?[sp]E". Race Acre is any-spoilable.

chapter fretful truffle

the fretful truffle is a thing. description is "It's probably a character building experience to eat it. You may learn something about how to think or what to do."

truf-warn is a truth state that varies.

spoilit is a truth state that varies. spoilit is false.

chapter potholes

the potholes are useless plural-named boring scenery in Loather Rathole. bore-text is "The potholes symbolize lost hope. You don't need that sort of thinking right now!". description of potholes is "You probably can't use them or do anything with them. They symbolize lost hope."

chapter tears taser

the tears taser is vanishing boring LLPish scenery in Loather Rathole. "The tears taser winks menacingly at you. It is there to cull the weaklings: those who cry at the sight or thought of it, and those who buckle at a little pain. You need to show it no fear, whether you ignore or confront it.". bore-text of tears taser is "You can't really do anything active to destroy it."

a-text of tears taser is "RRYRY". b-text of tears taser is "RR??Y". parse-text of tears taser is "x[sp]x[sp]?[sp]?[sp]-". tears taser is parse-spoilable.

book Bustle Sublet

Bustle Sublet is a room in Troves. "A hopeless passe hole. Well, not totally. Grubburg is a step up from Retches-Chester, but you don't want to stay here forever. Reastier arteries seem too forbidding all around. Someone seedy owns this area, [randbla][if mussier misuser is touchable]. To make matters worse, a mussier misuser ducks in and out of view--you probably don't need to outsmart them, but it'd be nice to[end if]. This messhole with a sidewalk laid askew is almost as bad as being homeless...[paragraph break]You need to think less emotionally than in the Loather Rathole. [if sob ever verbose is in Bustle Sublet]Everything seems to be going too fast for you, except for a stop post. Also, a sob ever verbose sails through the air[else]The stop post is still there, commanding your attention with the sob ever verbose gone[end if]. You'll need to look around to find what to do.". roomnud of Bustle Sublet is table of Bustle Sublet nudges.

[flipping the stop post now sends you to Boarded Roadbed.]

after looking in Bustle Sublet:
	set the pronoun it to sob ever verbose;
	continue the action;

chapter mussier misuser

the mussier misuser is LLPish vanishing boring scenery in Bustle Sublet. "The misuser skulks just out of sight, probably plotting how to use people. Perhaps they are worth showing to yourself you're better than that, perhaps not. But you will have to think your way to feeling better than them.". bore-text of mussier misuser is "The mussier misuser can probably be safely ignored, but you may be able to look at it, or think of it, effectively."

a-text of mussier misuser is "RYRRYRY". b-text of mussier misuser is "R?RR?RY". parse-text of mussier misuser is "S[sp]-[sp]x[sp]x[sp]-[sp]S[sp]-". mussier misuser is parse-spoilable.

chapter useless scenery

section reastier arteries

the reastier arteries are plural-named bounding boring scenery in Bustle Sublet. description of the reastier arteries is "They lead other places even worse, more likely. You need to focus on what to do here.". bore-text is "The reastier arteries will only distract you. Concentrate on what's here."

section a sidewalk laid askew

a sidewalk laid askew is useless boring scenery in Bustle Sublet. description of a sidewalk laid askew is "You don't really have time to memorize the sidewalk's cracks.". bore-text is "[more-pos].".

to say more-pos: say "You may want to pay attention to something more positive and alive"

chapter sob ever verbose

bab-lis is a truth state that varies.

the sob ever verbose is vanishing scenery in Bustle Sublet. "The sob ever verbose just rattles on and on. A sad, stupid, winding story about [one of][first custom style]BEEVOR'S[r][or]how [first custom style]Erv be SO[r][or]poor, poor [first custom style]Eve Bors[r][or]that [first custom style]Bev Oser[r][or]shifty [first custom style]Bo Evers[r][in random order], which makes you feel bad you don't feel bad enough about it. After a few minutes of this, you're seeing red." [bold-ok]

after doing something with sob ever verbose:
	if sob ever verbose is not moot:
		set the pronoun it to sob ever verbose;
	else:
		set the pronoun it to stop post;
	continue the action;

check taking sob ever verbose:
	say "It's not something you can take. It's just something you can pay attention to." instead;

a-text of sob ever verbose is "YRRYRRY". b-text of sob ever verbose is "YRR?RR?". parse-text of sob ever verbose is "-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-".

verbose-sob-check is a truth state that varies.

check examining sob ever verbose:
	if verbose-sob-check is false:
		now verbose-sob-check is true;
		say "You wonder if the sob ever verbose might reveal TOO much information. Maybe if you figured what to do, you'd feel obliged to it. Listen closer anyway?";
		if the player yes-consents, continue the action;
		say "Okay. This nag won't appear next time." instead;

chapter stop post

The stop post is reflexive scenery in Bustle Sublet. "[if sob ever verbose is reflexive]You're so distracted by it, you can't stop and see the big picture. It blocks out all but the sob ever verbose--you could look at it a while without seeing anything meaningful. It's the intersection of Evans Ave N/S and Weave Ave E/W, but this means nothing to you[else if post is reflexive]The stop post has something written on it[end if]."

check scaning post:
	if sob ever verbose is reflexive, try scaning sob ever verbose instead;
	if post is reflexed, say "You've dealt with the post." instead;

check examining stop post when sob ever verbose is in Bustle Sublet:
	say "The sob ever verbose distracts you from getting a good look at the post. You need to find a way to step back and ignore ambient noise." instead;

check taking stop post: say "The post is firmly in place." instead;

check scaning stop post:
	if sob ever verbose is touchable:
		say "Nothing happens until you move the settler away from the post and towards the sob ever verbose.";
		try scaning sob ever verbose instead;

a-text of stop post is "RRYR". b-text of stop post is "?R??". parse-text of stop post is "?[sp]x[sp]?[sp]?". stop post is any-spoilable.

book Boarded Roadbed

Boarded Roadbed is a room in Troves. "You've moved up to Boorboro from Grubburg, though you've still a way to go! It's odd...bare... except for one business, [tasty say], which [if tasty say is reflexed]you've neutralized in your mind[else]can't be where you need to be. It's up to you how whether to ignore it completely or to make a show of ignoring it[end if].[paragraph break]But you know L'Clear Cellar must be around somewhere. You can't quite remember where, but you can work backwards to find it, without distractions. Running away can't help.". roomnud of Boarded Roadbed is table of Boarded Roadbed nudges.

every turn when player is in Boarded Roadbed:
	if bee-score > 0:
		if current action is not listening:
			say "How to discover L'Clear Cellar? Distractions have gone, and you're focused there, now[if bee-score is 1]... though you may also have fun smacking the bee down a bit more[end if].[paragraph break]";

chapter THE BEE and 2 solutions

section bee proper (believe)

the evil bee is a reflexive thing in Boarded Roadbed. printed name of evil bee is "[vile-evil] bee"

after looking in Boarded Roadbed:
	set the pronoun it to evil bee;
	set the pronoun her to evil bee;
	continue the action;

initial appearance of evil bee is "[one of]An[or]The[stopping] [evil bee] floats here above a [SNORE SO ARENA], against the laws of physics. It's [if bee-score is 0]really[else if bee-score is 1]kind of, but not fatally,[else if bee-score is 2]is no longer[end if] distracting you from the thinking you need to do[if SNORE SO ARENA is reflexive]. There's also noise coming from the [SNORE SO ARENA][end if]."

a-text of evil bee is "RYRYYRY". b-text of evil bee is "RYRYYRG". parse-text of evil bee is "x[sp]-[sp]x[sp]-[sp]-[sp]x[sp]E"

[(code below needed to confirm vile bee is, in fact, converted to believe)]

[
a-text of vile bee is "RYRYYRY". b-text of vile bee is "RYPYYRG". parse-text of vile bee is "UNIQUE".
]

check taking evil bee: say "I'll be stingy. Better me than the bee, eh?" instead;

Include (-
	has transparent animate
-) when defining evil bee.

description of evil bee is "[if bee-score is 2]It looks utterly defeated, but at least it didn't die[else if bee-score is 0]It seems to know you want to go down to L'Clear Cellar. Bees can smell that, especially an [b]EVIL BEE[r][one of]. One thing's for sure, no free beers while this bee's freer[or][stopping][else]It's buzzing a bit, but it's not moving around so fast. You're not threatened by it any more. You could probably sneak past it[end if][if bee-score < 2]. It seems pretty [vile-evil][end if]."

to say vile-evil: say "[if bee-score is 0]evil[else if bee-score is 1]vile[else]live[end if]"

[the below is really awful but I don't see a better way]

understand "vile" and "vile bee" as evil bee when bee-score > 1.
understand "live" and "live bee" as evil bee when bee-score is 2.

check scaning evil bee:
	if evil bee is reflexed and snore so arena is reflexive:
		say "The bee shows nothing, but the [SNORE SO ARENA] does.";
		try scaning snore so arena instead;

check scaning snore so arena:
	if evil bee is reflexive and snore so arena is reflexed:
		say "Nothing shows up until you scan the evil bee.";
		try scaning evil bee instead;

section SNORE SO ARENA

the SNORE SO ARENA is scenery in Boarded Roadbed. the SNORE SO ARENA is reflexive. description is "It's bright red, and the [evil bee] dances around it. There's also red writing[if snore so arena is reflexive], and it emits noise, too[end if]."

a-text of SNORE SO ARENA is "RYYRYR". b-text of SNORE SO ARENA is "RYYRYR". parse-text of SNORE SO ARENA is "x[sp]-[sp]-[sp]S[sp]-[sp]x". printed name of SNORE SO ARENA is "[b]SNORE SO ARENA[r]". SNORE SO ARENA is parse-spoilable.

to decide which number is bee-score:
	let temp be 0;
	if SNORE SO ARENA is reflexed, increment temp;
	if evil bee is reflexed, increment temp;
	decide on temp;

chapter L'Clear Cellar door (after bee dispatched)

L Clear Cellar is proper-named vanishing boring scenery in Boarded Roadbed. "You can't really examine L'Clear Cellar if you don't know where it is, but maybe finding ways to hone your mind or remove distractions will give you some sort of clue what is going on, here.". bore-text of L Clear Cellar is "No, you need to do something to find L'Clear Cellar. Since you can't quite remember...". bore-check of cellar is bore-cellar rule. printed name of L Clear Cellar is "L'Clear Cellar".

a-text of L Clear Cellar is "RYRYRR". b-text of L Clear Cellar is "R?RYRR". parse-text of L Clear Cellar is "UNIQUE". L Clear Cellar is parse-spoilable.

this is the bore-cellar rule:
	if current action is taking or current action is opening or current action is closing, say "Easier said than done, until you locate L'Clear Cellar." instead;

chapter A Sty, Tasty, Say

A Sty Tasty Say is a proper-named LLPish reflexive scenery in Boarded Roadbed. printed name is "[i]A Sty: Tasty, Say[r]". "It feels both hard and easy to ignore, [if tasty say is reflexed]even after you've dealt with it[else]but perhaps there is a simple way to cast it aside. Not that you need to[end if]."

a-text of a sty tasty say is "RRYO". b-text of a sty tasty say is "RR??". parse-text of a sty tasty say is "S[sp]T[sp]?[sp]?". a sty tasty say is any-spoilable.

book Drain Nadir

to say ecs: say "Eddie C.[']s"

Drain Nadir is a room in Troves. "Ho hum. Phantomhampton would actually be a tolerable place to live, if you had no motivation. But you do, at least you think you do. Still, you have enough, and you want to be more than upset you don't have quite enough, really. [if diapers are in Drain Nadir]You notice trappings of spiritual and material poverty: an Ires Pad, to help you emote RIGHT, a box of diapers, and a spider crawling. They all point to a rock bottom you haven't hit yet, but it may be necessary now, to start to find a way out[else]But you're getting better, you've half cleared the Drain Nadir of negative influences, and now [ecs] song is playing. Perhaps listening could uplift you fully.[paragraph break]You want to break out of the funless fulness, here, to take control of your destiny[end if].". roomnud of Drain Nadir is table of Drain Nadir nudges.

chapter adeiprs

[?? small clue later with statue]

check examining Ires Pad for the first time:
	say "It's, well, really red. It's not clear whether it advocates focusing or losing your bad emotions, but either way, it changes views each time you look at it. Since its help might be too on-the-nose, you abstain from looking into the details of the current picture. But you can always look again, if you need that." instead;

an Ires Pad is auxiliary scenery in Drain Nadir. "It is the Hail-Maryest of motivational tools. Currently it contains a picture [one of]labeled [first custom style]AS I DERP[r][or]labeled [first custom style]ERA DIPS[r][or]labeled [first custom style]RIPE, SAD[r][or]labeled [first custom style]SPA RIDE[r][or]labeled [first custom style]RAP SIDE[r][or]by [first custom style]Si Preda[r][or]by [first custom style]Pa Dries[r][in random order]. So much red, too!"

a-text of Ires Pad is "RYRRYYR". b-text of Ires Pad is "RYRRYYR". parse-text of ires pad is "x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]x".

the box of diapers is vanishing scenery in Drain Nadir. "The diapers are a symbol of a new rebirth by starting from nothing, or something. At least, you hope they are."

a-text of diapers is "RYRRYYR". b-text of diapers is "PYRPYYR". parse-text of diapers is "D[sp]-[sp]S[sp]P[sp]-[sp]-[sp]R". diapers are parse-spoilable.

a spider is scenery in Drain Nadir. "You're don't know whether to crush it or even think 'I spared a spider.'"

a-text of a spider is "RYRRYYR". b-text of a spider is "RYRRYYP". parse-text of a spider is "x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]R". spider is parse-spoilable.

Include (-
	has transparent talkable
-) when defining spider.

chapter lager

The can of Large Regal Lager is a vanishing LLPish thing in Drain Nadir. description is "It has a picture of someone smiling as he chugs a can of Large Regal Lager--the [b]LARGE[r] being black and above the red Regal Lager below. A warning on the can notes drinking too many of these is as bad for the economy not drinking enough if you have nothing better to do, and you probably don't. You can read red writing to see how it was allegedly brewed.". "A can of Large Regal Lager sits here. Perhaps you can do something more moral than drinking it."

check opening Large Regal Lager: try drinking Large Regal Lager instead;

a-text of Large Regal Lager is "RRYRY". b-text of Large Regal Lager is "RRYR?". parse-text of large regal lager is "G[sp]x[sp]-[sp]x[sp]-". large regal lager is parse-spoilable.

check eating lager: say "It drinks like a meal, you're sure, but you need more nourishment than that." instead;

check taking lager: say "No, touching or holding a can almost always leads to drinking from it. You may even be able to ignore the Large Regal Lager altogether. But you will need to steel yourself before taking it." instead;

chapter I'd Cede

Id Cede is reflexive boring scenery. description of Id Cede is "The song warbles on.". bore-text is "You can't do much with I'd Cede but listen to it.". bore-check is bore-id-cede rule. printed name of Id Cede is "[i]I'd Cede[r]".

a-text of Id Cede is "RYRYRY". b-text of Id Cede is "RYPYPG". parse-text of Id Cede is "UNIQUE". Id Cede is parse-spoilable.

this is the bore-id-cede rule:
	if current action is examining, try listening instead;

book Boredom Bedroom

Boredom Bedroom is an innie room in Troves. "You've moved up in the world, to the suburb of Drag-Grad. Or is it Drag-Gard? Anyway, you should have more than enough, but it doesn't feel that way. Your domicile is no bro-dome--it leaves you feeling all me, BROOD. Not much of a dump, um, pad. Well, even with the shmoe homes surrounding it outside, it beats Get-a-Cot Cottage[if me arts are in Boredom Bedroom]. And the [b]ME ARTS[r] hung up are inspiring, or should be[end if]. As with the Drain Nadir, you could leave physically, but you hope to soar mentally above your situation.". roomnud of Boredom Bedroom is table of Boredom Bedroom nudges.

chapter shmoe homes

the shmoe homes are plural-named bounding boring scenery in Boredom Bedroom. description of shmoe homes is "You look out on the shmoe homes. You're sure you can do better. You suppose they can add to your boredom or add to your motivation to do better.". bore-text is "You DON'T want to do anything with the shmoe homes except let out oh-mes at the thought of being associated with them for too long. Perhaps you should look around your bedroom for ways to improve yourself."

chapter how to pre-deal

section lobster

the BORTLES Lobster is a vanishing thing in Boredom Bedroom. description is "Oh, man, there's no lobster like [BORTLES lobster]. You wonder if you really deserve to eat it. If you built yourself up the right way, I'm sure you could chow down[if ME ARTS is moot]--though you are feeling confident enough, having dealt with the [b]ME ARTS[r][end if].". initial appearance of BORTLES lobster is "Some [BORTLES Lobster], the best lobster in all of Yorpwald, sits here. It'd be a great meal, but you're not sure if you're fully up to eating it, yet."

the BORTLES lobster is vanishing.

a-text of Bortles Lobster is "RYRRRYR". b-text of Bortles Lobster is "?GR??G?". parse-text of Bortles Lobster is "x[sp]O[sp]x[sp]x[sp]x[sp]E[sp]x". bortles lobster is parse-spoilable.

check taking Bortles Lobster: say "To become a big thinker, you shouldn't worry about procedural details like taking something before eating it." instead;

section ME ARTS

The ME ARTS are plural-named vanishing boring scenery in Boredom Bedroom. description of ME ARTS is "It's labeled MR. EAST STREAM TAMERS. It's really weird and abstract, but maybe you can get the hang of it. It shimmers based on how you stare at it[if lobster is moot]. You doubt you need to do anything with it, since you had that delicious lobster, but then, it might be one more overachievement[end if].". bore-text is "You should probably futz with the [b]ME ARTS[r] mentally and not physically." [bold-ok]

a-text of ME ARTS is "RYRRYR". b-text of ME ARTS is "??RRYR". parse-text of me arts is "?[sp]?[sp]x[sp]x[sp]E[sp]R". me arts is parse-spoilable.

to decide which number is bedroom-solve:
	let temp be 0;
	if lobster is moot, increment temp;
	if me arts are moot, increment temp;
	decide on temp;

chapter LEAD

LEAD is a vanishing thing in Boredom Bedroom. "A copy of [LEAD][one of], the bestseller Pa, Egg, Pea dethroned,[or][stopping] lies here, chock full of self-improvement and stuff[if bedroom-solve is 0], but it's too much for you right now[else], and you're up to grokking it, you think[end if].". description of LEAD is "It's by Dale Elda and Leda Adle, with both the last names in red. You skim it, noting the exploits of [randbla], but it doesn't soak in, yet. You aren't in the right frame of mind. Just from the cover, and the authors['] names, you bet the writing is kind of forced.[paragraph break]But if you managed not to worry about style nitpicks, it might help you focus and move on.". printed name of LEAD is "[i]LEAD, All: a Deed[r]". [bold-ok]

a-text of LEAD is "RYYR". b-text of LEAD is "???R". parse-text of lead is "?[sp]?[sp]?[sp]L". LEAD is any-spoilable.

understand "copy" and "book" as LEAD when player is in Boredom Bedroom.

does the player mean doing something with LEAD when the player is in Boredom Bedroom: it is likely.

check taking LEAD: say "You already have one motivational book. Perhaps you need to find the right way to soak up [LEAD]'s essence." instead;

chapter pleaser leapers

the pleaser leapers are a plural-named vanishing LLPish thing in Boredom Bedroom. "Pleaser Leapers[one of], a weird automated toy that give something like cheer if you don't think too hard, frolic around here. You suddenly have a memory of needing them emotionally, even though they gave nothing[or] continue to frolic[stopping]. Perhaps the right sort of action will help make you ditch them for good and your story more gripping. Or you could just move on.". description is "They all look very cheery. They jump and hop and skip and almost make you feel as if you aren't wasting your life. Red writing on them gives the name of the company that produced them."

a-text of pleaser leapers is "RYRYRRY". b-text of pleaser leapers is "R?R?RRY". parse-text of pleaser leapers is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-".

book Browse Bowers

Browse Bowers is an innie room in Troves. "It's very look-don't-touch here in Trop-Port, where everything's a bit too gaudy and people try too hard to seem upper-crust. You note that dour tan rotunda off to the side and, well, the Miser Emirs['] Mires beyond, which--well, you have your sights set even farther.[paragraph break]An exhibit called a See Dir advertises upscale housing[if divorces is touchable], with a copy of [DIVORCES magazine] off to the side[end if].". roomnud of Browse Bowers is table of Browse Bowers nudges.

chapter DIVORCES magazine

DIVORCES Magazine is vanishing LLPish boring scenery in Browse Bowers. description of DIVORCES magazine is "[one of]Its motto: 'A hipper, happier paper. Hi!' You note all sorts of lurid articles and features about depravity in high society and its 'wonderful' fashion, too. One[or]Another 'worldly' article[stopping] is [randbla][paragraph break]Perhaps there is something deeper to [DIVORCES] and its advocacy of enhanced lifestyles than you might suspect. It might not be critical, but it could be there.". bore-text is "About the only thing you can do with [DIVORCES] is read it. Maybe you'll have an epiphany about it in general.". bore-check is bore-divorces rule. printed name of DIVORCES is "[i]DIVORCES[r] Magazine". [bold-ok]

a-text of divorces is "RYRRYRYR". b-text of divorces is "PGRRYRGR". parse-text of divorces is "D[sp]I[sp]x[sp]x[sp]O[sp]x[sp]E[sp]x".

this is the bore-divorces rule:
	if current action is taking, say "No. It's best read briefly, if at all." instead;

chapter Miser Emirs Mires

the Miser Emirs Mires are plural-named boring bounding scenery in Browse Bowers. "The mires aren't literal mire. They're just, well, full of people who are socially mire. Perhaps you would've been satisfied there once, but just being in the Browse Bowers makes you want to do more. Perhaps someone or something closer can help you. No daydreaming and gazing off into the distance!". bore-text of Miser Emirs Mires is "You don't need to do anything with the Mires except move on from them.". printed name is "Miser Emirs['] Mires".

chapter dour tan rotunda

the dour tan rotunda is boring scenery in Browse Bowers. description of the dour tan rotunda is "It looks sad and neglected. It might've been really big before the Browse Bowers, bigger and slicker, came along--say, before Version 4 of this game.". bore-text is "The rotunda has not kept up with progress. Do not worry about it."

chapter Si Reed

Si Reed is a vanishing person in Browse Bowers. description is "Impossibly cheery and dressed in bright red.". "[one of]'Hey! I'm Si Reed. I'll help with your mental attitude so you deserve better than the Shmoe Homes, here.'[or]Si Reed continues to pump his fist and Believe In You.[stopping]"

a-text of Si Reed is "RYRYRY". b-text of Si Reed is "RYRYRY". parse-text of si reed is "x[sp]E[sp]x[sp]I[sp]x[sp]E". Si Reed is parse-spoilable.

the See Dir is boring scenery in Browse Bowers. description of See Dir is "One random real estate ad in the See Dir advertises [randbla]. You could also [b]READ[r] the See Dir [if See Dir is read-yet]again [end if]for anything that might catch your eye.". bore-text is "The See Dir is just there for the (useless) advertising. And a clue, along with Si Reed, to get out of the Browse Bowers[if See Dir is not read-yet]. It may be worth reading[end if].".

a-text of See Dir is "RYRYRY". b-text of See Dir is "RGRYRY". parse-text of see dir is "x[sp]E[sp]x[sp]-[sp]x[sp]-". See Dir is parse-spoilable.

understand "exhibit" as See Dir when player is in Browse Bowers.

book Econ Cone

Econ Cone is a room in Troves. printed name of Econ Cone is "Econ-Cone". "You've reached the recent center of the econ-cone, thus called because [the lodgings] in the center form the top of a cone of buildings. The official name of the suburb is Potherthorpe. There's lots of pother, but it's the rich person's kind. Less rusty din, more industry (it's un-dry. Sturdyin['].)[paragraph break][i]Sectarian Craniates[r], the famous artwork, rests here, which you [if craniates is reflexive]can decipher if you want[else]already got soemthing from[end if]. Save aves branch out each way. They're okay for lesser people, but the praise spirea [if spirea is reflexive](which is making noise--you could [b]LISTEN[r] to it) [end if]and astute statue of Trevis Vister will unlock true wealth and power! [if rivets is reflexive and praise spirea is reflexive]Maybe learning their lessons right will motivate yourself even more[else if rivets is reflexive or praise spirea is reflexive]Now you're super-motivated, maybe you need to have the right sort of think[or-myst][else]Now they've taught you all they could, so maybe you can move on--or in--to [the lodgings][end if][if end proner pod is touchable]. If you think right, surely there must be a way past the [proner][end if].". roomnud of Econ Cone is table of Econ Cone nudges.

to say or-myst: say ", or you could seek to grok [if rivets is reflexed]the praise spirea[else]Trevis Vister[end if]";

understand "econ-cone" as Econ Cone.

the save aves are plural-named bounding boring scenery in Econ Cone. description of the save aves is "They lead out every way to less affluent and powerful places.". bore-text is "The save aves are good enough for other people, but not you. You want the best!".

check going inside in Econ Cone:
	say "You can't just walk in[if cone-points is 1] even with your desire at its level[end if]! You need the right sort of thinking. You have not achieved it yet. Your eyes turn [if Trevis Vister is examined]back [end if]to the astute statue of Trevis Vister, and the rivets beneath it, and the praise spirea nearby." instead;

after looking in Econ Cone:
	set the pronoun it to Trevis Vister;
	set the pronoun him to Trevis Vister;
	set the pronoun them to rivets;
	if END PRONER POD is in Econ Cone, set pronoun it to END PRONER POD;
	continue the action;

chapter godlings' lodgings

the godlings lodgings are plural-named boring scenery in Econ Cone. "It's built by [trev] and is emblazoned with his twin motto, PROPERTY IS PROSPERITY and ADVERTS-STARVED? READ TVS. It doesn't let up on opulent. You remember reading a scientific study that just wanting to work there five minutes a day increases productivity by 25%.". bore-text of godlings lodgings is "Don't think too much about them directly. There are other ways to think yourself in.". printed name is "godlings['] lodgings". [bold-ok]

understand "skyline" as godlings lodgings.

check scaning godlings lodgings:
	if END PRONER POD is off-stage, say "The godlings lodgings shows nothing. Which is sort of a relief, though it probably means you haven't found what you need to focus on. Perhaps something will come along that you can focus on." instead;
	say "Your settler seems to give the same reading for lodgings as for the [END PRONER POD].";
	try scaning END PRONER POD instead;

chapter Sectarian Craniates

Sectarian Craniates is reflexive LLPish boring scenery in Econ Cone. "It's about as portentious as you'd imagine something called Sectarian Craniates would be. But [if craniates is reflexed]you got something out of it[else]maybe you can get something out of it, if it's worth your time. It might not be[end if].". bore-text of Sectarian Craniates is "Hmm. Something passive [if craniates is reflexive]will work better[else]worked better[end if]."

a-text of sectarian craniates is "YRRYRRYYR". b-text of sectarian craniates is "YR?YRRYY?". parse-text of sectarian craniates is "-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]I[sp]x".

chapter statue parts

section Trevis Vister

Trevis Vister is proper-named scenery in Econ Cone. "[one of]The statue of Trevis Vister is, of course, of [trev] and built by Su Tate. It's thirty feet tall and a decent likeness, except it's a shocking red, so nobody can miss it, and he has a full head of hair instead of that ridiculous comb-over. Also, his arm is around air, because when this statue was initially commissioned, his third wife demanded to be part of it. She was removed when he remarried, replaced by his fourth wife, who divorced him when she was portrayed as shorter than he was.[or][trev] is unchanged, himself, just waiting for you to want to be like him.[stopping][paragraph break]Red rivets lie at the bottom of the statue[one of]. It is not a statue of limitations, for sure. [paragraph break]But at least it is not an oil'd idol, or an acts-cast showing Trevis Vister closing a business deal. Sadly, those exist here in Yorpwald, thanks to Elvira's promotions[or][stopping]." [?? X TREVIS when I get a chance ]

to decide which number is cone-points:
	decide on (boolval of whether or not rivets are reflexed) + (boolval of whether or not praise spirea is reflexed);

Include (-
	has transparent talkable
-) when defining Trevis Vister.

a-text of Trevis Vister is "RRRYRY". b-text of Trevis Vister is "RRRYRY". parse-text of Trevis Vister is "x[sp]x[sp]x[sp]-[sp]x[sp]-".

understand "astute/statue" and "astute statue" as Trevis Vister.

section rivets

the rivets are a plural-named reflexive boring scenery in Econ Cone. description of rivets is "After looking for a while, you realize the rivets spell something you could [b]READ[r].". bore-check is the bore-rivets rule. bore-text is "[if rivets are reflexed]You figured what to do with the rivets[else]You need to figure what to do with the rivets--or what to have them inspire you to do[end if]."

this is the bore-rivets rule:
	if current action is taking, say "Petty theft is not big thinking! You'd do better to take a message from the rivets.[paragraph break]Plus, you don't have the right tool." instead;

rivets-first is a truth state that varies.

check objhinting when player is in Econ Cone:
	if cone-points is 2:
		if noun is Trevis Vister or noun is rivets or noun is praise spirea, say "You learned all you could from the statue." instead;

the praise spirea is reflexive scenery in Econ Cone. "The praise spirea is beautiful and inspiring and all, but you don't want to be caught staring at it just because it's pretty, or listening to it just because it sounds nice."

check examining praise spirea:
	if praise spirea is reflexive, say "[one of]You hear something from the praise spirea. It might help you, but then again, it might make what you want/need to do too obvious.[or]The praise spirea seems to turn red as you hear: 'Spare, I ape SIR! I reaps, I reaps! Ire? Sap!'[stopping]" instead;

a-text of praise spirea is "YRRYRY". b-text of praise spirea is "YRR?R?". parse-text of praise spirea is "-[sp]S[sp]x[sp]-[sp]x[sp]-". praise spirea is parse-spoilable.

check scaning rivets (this is the switch to praise rule): if rivets are reflexed and praise spirea is reflexive, try scaning praise spirea instead;

[?? unlock praise/rivets difference]
a-text of rivets is "RRRYRY". b-text of rivets is "RRRYRY". parse-text of rivets is "x[sp]x[sp]x[sp]I[sp]x[sp]E".

chapter END PRONER POD

the END PRONER POD is boring vanishing scenery. "It's very red and pulsing fearfully. There's red writing on it (ok, with a black outline, so you can see it) that might help you avoid [the END PRONER POD] as your own fate.". bore-text of END PRONER POD is "You don't even want to think of [the END PRONER POD]. Well, except to think just so, to blank it from your mind and avoid your former benefactor's fate. How to think around it creatively?". bore-check of END PRONER POD is the bore-proner rule.

this is the bore-proner rule:
	if current action is taking or current action is entering, say "You need to kill yourself making it to the top, not before you make it to the top." instead;

a-text of END PRONER POD is "RYRRYR". b-text of END PRONER POD is "RYRRYR". parse-text of END PRONER POD is "x[sp]O[sp]x[sp]x[sp]E[sp]x". end proner pod is parse-spoilable.

after examining END PRONER POD:
	if r cad card is off-stage:
		say "And what's this? An r-cad card, that universal communication of contempt, is stuck by [the END PRONER POD].";
		now r cad card is in Econ Cone;
	continue the action;

understand "neprod" and "n e prod" as END PRONER POD when END PRONER POD is examined.

section card

the r cad card is scenery. "It's got red writing on it that you could read.". printed name of r cad card is "r-cad card".

check taking the r cad card: say "It's stuck next to [the END PRONER POD]. And it's not for you. If it were for you, you'd be in trouble, anyway." instead;

a-text of r cad card is "RYRRYR". b-text of r cad card is "RYRRYR". parse-text of r cad card is "P[sp]O[sp]N[sp]x[sp]E[sp]x".

to say trev:
	say "Trevis Vister[one of], Ph.D in Life Success[or][stopping]";

book Upscale Capsule

Upscale Capsule is an innie room in Troves. "[if salt is moot]Perhaps your true destiny is not in Dest-Sted, but it's where you are[else]You've made it to Dest-Sted, the most distinguished suburb of Spoiloplis! But you've only sort of made it. There is some great revelation ahead, you're sure[end if]. [capsule-desc].". roomnud of Upscale Capsule is table of Upscale Capsule nudges.

to say capsule-desc:
	if red vees are in Upscale Capsule:
		say "This office isn't very well-populated yet. Just some red vees here. Of course, you don't want clutter, but the right surroundings would help you succeed. You need to believe in yourself just right";
	else:
		say "From the nerf fern to the wonga wagon and Desk-Sked on your cark rack to the pharos phasor above, this FiefCo Office conforms to the opulent/no let-up deco-code. It's ... well, you're too busy and focused to even look for a way out[if salt is moot][which-capsule-pics][end if][if salt is in Upscale Capsule].[paragraph break]A shaker of salt sits on the wonga wagon, too. You're drawn to it[end if][if creationism is in Upscale Capsule]. A ponderous, horribly important tome called [creationism] lies around. It's probably less important than it seems, but maybe you can figure how to deal with it[end if]"

to decide which number is mbb-sis-points:
	let temp be 0;
	if mbb is moot, increment temp;
	if Sister Tressi is moot, increment temp;
	decide on temp;

to say which-capsule-pics:
	say "[if mbb-sis-points is 0]. Likenesses of motivational prosperity gospel types, [bb-st], stare at you to keep you busy[else if Sister Tressi is in Upscale Capsule]. A likeness of Sister Tressi regards you severely[else if mbb is in Upscale Capsule]A likeness of [mbb] regards you severely[else]You are no longer hounded by the pictures of [bb-st][end if]"

to say bb-st: say "[one of][mbb] and Sister Tressi[or]Sister Tressi and [mbb][at random]"

chapter red vees

[song or noise + capsule = wrong ??]

[vee/vees/red vee in nudges ??]
["'Enraged times. Disagreement denigrates me,' you think, as he calls you a stony nasty-o before saying 'Er, goin['].' He will run about, a burnout. You leave the failed afield, his offense seen off in this office ice-off. His density cost his destiny. Legit to let it go. 'Delays: SLAYED!' you remark. 'NO IMPOSTOR PROMOTIONS!'[paragraph break]Wow! Emptying your mind was easy once you put your mind to it! Your wonga wagon changes in tribute." ??]

The red vees are vanishing plural-named boring scenery in Upscale Capsule. description of the red vees is "They look like they could be hooked together, but you can't do so by standard means.". bore-text is "Hmm. You need to know what to do with the vees, or around them, to fill up your office."

a-text of red vees is "RYRYRRY". b-text of red vees is "RGRYRRY". parse-text of red vees is "x[sp]E[sp]x[sp]E[sp]x[sp]x[sp]E".

[?? er go in = old ignore erin/go go/erin One Rig / Rig One Region]

chapter St Al Salt

the St Al Salt is vanishing boring scenery. printed name of salt is "St. Al Salt". description of salt is "St. Al Salt is, from what you are reading, engineered to maximize your productivity from (motivational stress * remaining years,) much better than other brands. It helps you preserve yourself, sort of. It is emblazoned with a picture of St. Al, recently enshrined as Yorpwald's patron saint of Not Faffing Around.". bore-text is "Your mind stalls at what to do with the salt, or how to ignore it.". bore-check is bore-salt rule.

this is the bore-salt rule:
	if current action is eating, say "That would be potentially lethal. And gross." instead;
	if current action is putting on:
		ignore the can't put what's not held rule;
		if second noun is lobster, say "That'd ruin it." instead;
		say "The salt is there for ornamental and inspirational purposes. Plus, there's nothing here to eat[if lobster is touchable], except the lobster, which doesn't need it[end if]." instead;

understand "shaker" and "salt shaker" and "shaker of salt" as St Al Salt

a-text of salt is "RYRR". b-text of salt is "R?R?". parse-text of salt is "x[sp]?[sp]x[sp]?". salt is any-spoilable.

chapter Creationism Reactionism

Creationism Reactionism is vanishing boring LLPish scenery. "It's ... well, big and long and [i]there[r] and impressive. Everyone important has a copy. Apparently it's a good practical read, but you never have and probably never will. You suspect you don't have to, in any sense, but all the same, it's there to wrestle with, if you want. You feel a rebellious urge to daydream, just looking at it. The authors['] names are in red writing.". printed name is "[i]Creationism, Reactionism[r]". bore-text is "It would distract you both from attempts to keep up the corporate life as well as attempts to free yourself. You need to ignore it or do something to dispel it."

a-text of creationism reactionism is "RYRYRRYRYRY". b-text of creationism reactionism is "?YR?RRYRGPY". parse-text of creationism reactionism is "?[sp]-[sp]x[sp]?[sp]x[sp]x[sp]-[sp]x[sp]I[sp]S[sp]-".

chapter glarers

section glarer progress stub(s)

to report-glarers:
	if mbb is moot and tressi is moot:
		say "Well! You feel very relaxed now, with both [mbb] and Sister Tressi gone. You feel more in touch with yourself, less obliged to do what society requires...";
	else:
		say "You look over to [if mbb is moot]Sister Tressi[else][mbb][end if]. Maybe there's a way to get rid of [if mbb is moot]her[else]him[end if], too, or maybe there's not, but either way, you feel progress and prestige don't weight quite so heavily, now."

section Sister Tressi

the Sister Tressi Siters are plural-named vanishing boring scenery. description of the Sister Tressi Siters is "Everyone knows Sister Tressi and her catch phrase, 'Set, Sir!' to people both emotionally and morally sluggish. She's very compelling, and her image is as ubiquitous as [mbb]'s.". bore-text is "Sister Tressi can't be moved by normal means. You sort of want to fight mentally against her, but you're not sure how."

after doing something with Sister Tressi Siters:
	set the pronoun her to Sister Tressi Siters;
	continue the action;

a-text of Sister Tressi Siters is "RYRYRR". b-text of Sister Tressi Siters is "RY?Y?R". parse-text of Sister Tressi Siters is "UNIQUE". sister tressi siters is parse-spoilable.

section marble blamer mr beal

to say mbb-txt: say "A stern looking fellow who is big on personal responsibility and as ubiquitous as the Sister Tressi Siters. His big competition is, of course, [other-mbb]. You can [b]READ[r] who created this marble"

to say other-mbb: say "[if mbb is Balmer]Mr. Beal[else]Balmer[end if]"

Marble Blamer Mr Beal is proper-named vanishing boring scenery. description of marble blamer mr beal is "[mbb-txt].". bore-text is "Mr. Beal can't be moved by normal means. Maybe you can fight mentally against him."

printed name of Mr Beal is "Marble Blamer Mr. Beal".

a-text of Marble Blamer Mr Beal is "RYRRRY". b-text of Marble Blamer Mr Beal is "R?R???". parse-text of Marble Blamer Mr Beal is "x[sp]?[sp]x[sp]?[sp]?[sp]?". marble blamer mr beal is parse-spoilable.

chapter marble blamer balmer

Marble Blamer Balmer is proper-named vanishing boring scenery. description of marble blamer balmer is "[mbb-txt].". bore-text is "Balmer can't be moved by normal means. Maybe you can fight mentally against him."

a-text of Marble Blamer Balmer is "RYRRRY". b-text of Marble Blamer Balmer is "R?R???". parse-text of Marble Blamer Balmer is "x[sp]?[sp]x[sp]?[sp]?[sp]?". marble blamer balmer is parse-spoilable.

mbb is a thing that varies. mbb is Marble Blamer Balmer.

to decide which thing is not-mbb:
	if mbb is Marble Blamer Balmer, decide on Marble Blamer Mr Beal;
	decide on Marble Blamer Balmer;

does the player mean doing something with mbb: it is very likely.

chapter Trance Nectar

the Trance Nectar is a vanishing thing. "Some Trance Nectar lies here. It's totally different from the Large Regal Lager, which keeps you from being productive, but you now realize both will leave you equally miserable. There must be a way to break free from its influence!". description is "It's guaranteed to keep you focused on what you need to do, even if not thrilled about it, and recommended by Elvira herself! But .. you're sick of that. And of achieving and so forth. Maybe there's some way to break free."

a-text of trance nectar is "RYRYRR". b-text of trance nectar is "R??YRR". parse-text of trance nectar is "x[sp]?[sp]?[sp]-[sp]x[sp]x". trance nectar is parse-spoilable.

chapter silly Upscale Capsule scenery

section nerf fern

The nerf fern is useless boring scenery. description of nerf fern is "It saves time, since you don't have to water it. But you can't see how it gives any new ideas.". bore-text is "Don't futz with it. It's there for ambiance. The sort of ambiance people less busy than you care about.".

section pharos phasor

the pharos phasor is boring amusing scenery. description of pharos phasor is "It gives enough light to keep you awake and nervous and needing to do more.". bore-text is "The pharos phasor would be expensive and toxic to futz with."

section cark rack

the cark rack is boring scenery. description of cark rack is "Made of nice to notice eco-tin, this--well, it's a desk, really, but one you can complain about hard work over--is more popular and efficient than the [randbla], an inferior product for promoting productivity.". bore-text is "No, the desk is good as it is.". understand "dsk" as cark rack.

section desk sked

the Desk Sked is boring scenery. description of Desk Sked is "You browse some steno-notes on your Desk-Sked: [randbla]". bore-text is "The Desk Sked is already optimally tidy."

printed name of Desk Sked is "Desk-Sked". understand "desk-sked" as desk sked.

section wonga wagon

the wonga wagon is boring amusing scenery. description of wonga wagon is "The wonga wagon is utterly useless and tacky. I mean, wonga is tacky slang for money as it is, and it's just, well, there. It's engraved CEO FOR US? OF COURSE!". bore-text is "Maybe the wonga wagon is worth scanning, but that's it.". bore-check of wonga wagon is bore-wagon rule.

this is the bore-wagon rule:
	if current action is opening, say "It's already open." instead;
	if current action is scaning:
		say "You scan around the wonga wagon for clues.[paragraph break]";
		if lobster is in Upscale Capsule and ME ARTS is in Boredom Bedroom:
			say "Your settler picks up a signal when it moves to the lobster.";
			try scaning lobster instead;
		if salt is in Upscale Capsule:
			say "Your settler picks up a signal when it moves to the salt.";
			try scaning salt instead;
		if trance nectar is in Upscale Capsule:
			say "Your settler picks up a signal when it moves to the trance nectar.";
			try scaning trance nectar instead;
		say "But you weren't able to find any. That's a bug, but still, there must be something to do!" instead;

section votes vetos stove

the votes vetos stove is boring amusing scenery. description of votes vetos stove is "It's not the real thing, of course. If there were a real thing. But it's symbolic. It shows you know people. It's a reminder some people don't deserve to vote, but you guess you have to let them, but you don't have to make it easy. Oh, and that you deserve access to the vote-counters. It's also Just a Joke, because of course it is."

volume presto

definition: a room (called r) is in-the-maze:
	if r is a mazeroom, yes;
	if r is nowt town, yes;
	if r is unwary runway, yes;
	no;

book general stuff and rules

chapter interjections

to decide whether (int - a thing) is interjective: [this is for hinting in presto: do you think something, or envision something?] [this is also deprecated as the hinting is just done case by case]
	if int is lamb or int is hump or int is tsar star, decide yes;
	if int is dart or int is plebe or int is boing, decide yes;
	if int is leo or int is rand or int is hoop, decide yes;
	if int is volt maze or int is maze walls or int is ether, decide yes;
	if int is keys or int is hogs or int is log ons, decide yes;
	if int is alert or int is ought, decide yes;
	decide no;

chapter CURST CRUST

the curst crust is a thing. description of crust is "[one of]It's probably from Curt's, the worst bakery in the world. [or][stopping]You have about [swears in words] bites of this disgusting thing left to eat."

understand "bread" as curst crust.

swears is a number that varies. swears is usually 2.

chapter crust parsing

crust-warn is a truth state that varies.

track-crust is a truth state that varies.

every turn when player has curst crust and mrlp is presto and track-crust is true:
	increment swears;
	try eating curst crust;

chapter turn rules

every turn when mrlp is presto and Rand is eager (this is the Leo-Rand lackey rule):
	if location of player is Nowt Town:
		if Leo was touchable, say "'Oo Boss. We ain't up to dat maze. It's makes us fink too much!' [l-n-r] wait outside.";
	else:
		if location of player is adjacent to location of Leo:
			if Leo is not dismissed:
				if hogs are touchable:
					say "[l-n-r] didn't flee, but they're not quite as big as the hogs. You may have to be sneaky, here.";
				else:
					say "[l-n-r] lug after[one of], grateful[or], no fear glut[or], no flat urge[stopping].";
				move Leo to location of player;
				move Rand to location of player;
				move wzup to location of player;
				if hogs are not touchable, set the pronoun them to wzup

book presto specific verbs

chapter loading

sloading is an action applying to two things.

understand the command "load [something] with [something]" as something new.

understand "load [something] with [something]" as sloading.

rule for supplying a missing second noun when sloading:
	if noun is stapler:
		now second noun is staple;
	if noun is staple:
		now noun is stapler;
		now noun is staple;
	if noun is popgun:
		if player has dart:
			now second noun is dart;

does the player mean sloading the popgun: it is likely.

carry out sloading:
	try inserting second noun into noun instead;

chapter shooting

shooting is an action applying to one thing.

understand the command "shoot [something]" as something new.

understand "shoot [something]" as shooting.

understand the command "fire [something]" as something new.

carry out shooting: [no section notes here since you only have a gun in Presto]
	if player does not have popgun, say "You have no gun." instead;
	if noun is lamb, say "Utter meanie. Maybe just scare it with a gun sound." instead;
	if popgun does not contain dart, say "Your grunty gun try fails without ammo[if player holds dart], but that dart could work[end if]." instead;
	if noun is hoop, say "But you have no basketball. I mean, the dart won't knock the hoop off." instead;
	if noun is hump, say "It's more a psychological barrier than a physical one." instead;
	if noun is player, say "You try for self-harm but your arm flesh fails you." instead;
	if noun is popgun, say "Try shooting whomever or whatever you want to shoot." instead;
	if noun is hoop, say "Shooting hoops is only a figurative expression." instead;
	if noun is Leo and Rand is off-stage, say "He backpedals out of range, looking a bit scared. Perhaps you can find a better target to shoot, later." instead;
	if noun is zany meter, say "That would just be destructive. The zany meter is there to help you." instead;
	if noun is maze walls, say "Too sturdy. There must be a better way for them to tumble down." instead;
	if noun is a bruiser:
		if noun is fightin, say "That'd just make him madder." instead;
		if noun is Leo and Rand is fightin, say "That wouldn't help you beat Rand, and if it did, it'd make Leo madder." instead;
		say "After saying Whassup to them both? That's be cold. Plus, [if noun is Rand]Leo[else]Rand[end if] would avenge his friend." instead;
	if noun is a mazeguide, say "[noun] isn't preventing you from trying to complete the maze." instead;
	if noun is cistern, say "Pointless vandalism." instead;
	if noun is ether, say "You can't see through it. Plus, the popgun is not a gun of un-fog. Maybe just having the popgun would help you get through." instead;
	if noun is Nowt Town, say "Brute force is a better way to get maze hints." instead;
	say "Less shooting, more soothing. You'll be prepared when there is a fight." instead;
	the rule succeeds;

chapter pouring

pouring it into is an action applying to two things.
understand the command "pour [something] in/into/on [something]" as something new.
understand "pour [something] in/into/on [something]" as pouring it into.

book Grey Gyre

Grey Gyre is a room in Presto. last-loc of Presto is Grey Gyre. "It's windy here, but nothing dangerous, and the place is just an unappetizing grey all around. It's calmer but burnt to the south, and you see a way east, too[if hump is not touchable], as well as west over the hump you cleared[end if][if volt maze is in Grey Gyre]. You see a path to what looks like a maze to the north--a maze entry zany meter is nearby, too[else if ether is touchable]. The maze entrance north has been replaced by ether[else]. [ether-check]ou can go north[end if][if hump is in Grey Gyre].[paragraph break]A hump to the west looks much more intimidating than it should be[end if].". roomnud of Grey Gyre is table of Grey Gyre nudges.

does the player mean doing something with the volt maze when the player is in Grey Gyre: it is very likely.

to say ether-check: say "[if Saps Pass is visited]With the ether cleared, y[else]Y[end if]"

the ether is vanishing scenery. "It's trickier to see through than moist-o-mist. [if ether-try is true]Those three bums who did the business on you must be hiding, still[else]Anyone or anything could be waiting[end if]."

check entering ether:
	try going north instead;

a-text of ether is "RRYRY". b-text of ether is "RRYRY". parse-text of ether is "x[sp]x[sp]E[sp]x[sp]E". ether is parse-spoilable.

chapter lamb

The lamb is a vanishing LLPish female animal in Grey Gyre. "A poor lost lamb seems stuck here. She's too frightened to move."

check taking lamb:
	say "It's not a bit lamb, but it wouldn't fit in your super purse." instead;

a-text of lamb is "RRYR". b-text of lamb is "RRYR". parse-text of lamb is "x[sp]x[sp]A[sp]x". lamb is any-spoilable.

description is "Cute and adorable and so terrified at being away from home she's petrified with fear. Maybe you could scare her home."

check inserting something into boing go bin:
	try inserting noun into popgun instead;

check going east in Grey Gyre: if plebe is touchable, say "'Atten-HUT!' The taunt, then--taut, the plebe blocks your way east. '[if player is female]Stop, Ma'am! Ammo past!'[else]You, sir! Is your...'[end if][line break]You'll need to show your authority [if tsar star is worn]and not just with that tsar star. Probably the right word[else]with probably some sort of medal[end if][if Leo is touchable].[paragraph break]'You too, booby and yobbo!'[else].[end if]" instead;

ether-try is a truth state that varies.

check going north in Grey Gyre:
	if cur-score of presto < 3, say "You don't fully have your bearings here yet. You're not up to walking through a maze. Perhaps you need to figure how to deal with things before entering the maze." instead;
	if ether is in Grey Gyre:
		say "[one of]You walk forward. That dangerous looking ether? It[if ether-try is true]'s still hiding[else] hid[end if] some actual dangerous people.[paragraph break]'AMBUSH!' / 'Ah, bums!'[paragraph break]You are pushed roughly back to where you came[if Leo is touchable]. [l-n-r] mutter that if you point out where dose peoples is, they'll do the business[else]. 'Intruder? Dire runt!' You could use a meaty matey or two[end if][or][l-n-r] might help you win the fight, but you'll need some way to find the people in the ether [if Leo is not touchable]and some henchmen to tackle them[end if][stopping].";
		set the pronoun it to ether instead;
		now ether-try is true instead;
	if Saps Pass is not visited and ether is not off-stage, say "You stride confidently north with your two friends. You can tackle anyone!";

chapter maze scenery

section maze entry zany meter

the maze entry zany meter is scenery in Grey Gyre. "It's like one of those things you hit with a carnival hammer, but you don't have any hammer. Bunched at the bottom are three bummer options for, presumably, the zaniest way to solve the maze.[paragraph break]0: be too scared to enter the maze[line break]0: run through the maze[line break]0: run through the maze again[line break]1: ignore and reject Nowt Town[line break]2: congratulate yourself for solving [ezolav] Volt Maze.[line break]3: (written in red again) congratulate yourself for solving [ezolav] WITHOUT EVEN GOING THROUGH IT OR ASKING FOR HINTS. "

to say ezolav: say "the [first custom style]E-Z Ol['] Av(TM)[r] Volt Maze (in red)"

check scaning zany meter: try scaning volt maze instead;

section volt maze path

the volt maze is vanishing scenery in Grey Gyre. "At the start of the path is tiled Welcome to the (in red) [first custom style]VOLT MAZE[r]. You can read red writing about who made it.". understand "path" as volt maze when player is in Grey Gyre.

a-text of volt maze is "RYRYRRYR". b-text of volt maze is "RYRYRRYR". parse-text of volt maze is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

check entering volt maze: try going north instead;

maze-points is a number that varies. maze-points is 0.

to destroy-nowt-town:
	moot maze entry zany meter;
	moot volt maze;
	remove maze walls from play;
	remove n-t-air from play;
	now ether is in Grey Gyre;
	now Saps Pass is mapped north of Grey Gyre;
	now Grey Gyre is mapped south of Saps Pass;
	continue the action;

chapter hump

the hump is vanishing boring scenery in Grey Gyre. "It doesn't look like it'd be too hard to get over, but as you walk over to inspect it, you feel a bit drained.". bore-check of hump is bore-hump rule. bore-text is "the hump is surprisingly demotivational. You need some succinct way to blow off your laziness.".

this is the bore-hump rule:
	if current action is taking, say "You can take it if you believe in yourself and motivate yourself the right way!" instead;

check going west in Grey Gyre: if hump is in Grey Gyre, say "You try to be all 'I leap a pile' but can't get over the hump. Hmph." instead;

a-text of hump is "YRRR". b-text of hump is "YRRR". parse-text of hump is "U[sp]x[sp]x[sp]x". hump is any-spoilable.

chapter plebe

the plebe is a vanishing person in Grey Gyre. description is "He's got the shaved head, boring monochrome clothes--nothing on him marks him as too special to be yelled at.". "A plebe is standing at attention here to the east, waiting for a command from someone in charge. Or just bossy[if plebe is prefigured and player wears tsar star][one of]. Now that you're wearing that tsar star, maybe you can use that semi-cuss you used earlier[or][stopping][end if]."

check taking plebe: say "That plebe won't be pushed aside." instead;

a-text of plebe is "RRYYR". b-text of plebe is "RPGYR". parse-text of plebe is "UNIQUE". plebe is parse-spoilable.

bleep-clue is a truth state that varies. bleep-clue is false.

book Char Arch

Char Arch is south of Grey Gyre. It is in Presto. "You see gasp-gaps to the west and a mad dam east, though north-south is unimpeded. [if dart is not in cistern]The cretins['] cistern you looted stands uselessly here[else if cistern is examined]Maybe you could get the dart out of the cretins['] cistern standing here[else]A cretins['] cistern sits here. It might be worth looking at, or in[end if].". roomnud of Char Arch is table of Char Arch nudges.

leaf-clue is a truth state that varies.

after printing the locale description for Char Arch when leaf-clue is false:
	if player has leaf:
		say "The yak briefly tries to nibble at your leaf. You pull the leaf away.";
		now leaf-clue is true;
		continue the action;

chapter bounding scenery

section mad dam

a mad dam is bounding boring scenery in Char Arch. description of mad dam is "The mad dam pours water on itself. The waterfall's flaws alter as you watch, though you can't do much with it. Beautiful in its own way.". bore-check is bore-mad-dam rule.

this is the bore-mad-dam rule: if current action is taking, say "You take in the dam's beauty for a moment." instead;

section gasp gaps

some gasp gaps are bounding boring plural-named scenery in Char Arch. "You can't see much of the gaps, but you know you don't want to get close to them. Because you'd have to fall to get there."

understand "gasp-gaps" as gasp gaps.

chapter bored yak

The bored yak is a neuter animal in Char Arch. "[one of]A yak languishes here. It looks bored, and that drab yoke around it doesn't help[or]The bored yak with the drab yoke is still hanging around[stopping]."

to decide whether yak-around:
	if yak is touchable, yes;
	if skid is touchable and yak is on skid, yes;
	no;

after doing something with the bored yak:
	set the pronoun him to the bored yak;
	set the pronoun her to the bored yak;
	continue the action;

a-text of bored yak is "RYORYYRR". b-text of bored yak is "RYORYYRR". parse-text of bored yak is "x[sp]-[sp]Y[sp]x[sp]-[sp]-[sp]x[sp]x".

check giving to yak:
	if noun is leaf, say "The yak has gotten far too lazy already. You shouldn't encourage it by giving it more food just for staying put. You feel it, or the drab yoke, might be useful elsewhere. Just giving the yak the food would give it an excuse to stay put." instead;
	if noun is crust, say "That's borderline animal cruelty." instead;
	say "The yak sniffs, but that's not really something edible. Well, by a yak." instead;

understand the command "place" as "put".

check putting it on the skid (this is the yak-skid rule):
	if noun is censer, say "The censer isn't flat enough to stay on the skid over all the bumps. It doesn't seem like it needs moving at all. Changing. maybe." instead;
	if noun is yak:
		say "[if yak is on skid]It already is.[else]The yak doesn't want to budge. Maybe if you had something tasty.[end if]" instead;
	if noun is leaf:
		if yak is touchable:
			now yak is on skid;
			now leaf is on skid;
			say "The yak walks up to the leaf you dropped, sniffs, climbs on the skid and begins munching[if yak-badbook is true]. Maybe it will trust you enough to eat that really awful book, now[end if]." instead;
		continue the action;
	say "You don't need the skid to transport [the noun]." instead;

the yak-skid rule is listed before the can't put what's not held rule in the check putting it on rulebook;

check pushing yak to:
	if yak is on skid, try pushing skid to second noun instead;
	say "The yak groans lazily. Maybe if it were on something you could push, that would work." instead;

description of yak is "The yak eyes you [if yak is on skid]neutrally, now you fed it[else]warily[end if]. It is clearly not a shining example for beasts of burden everywhere. In fact, its odd reddish tinge is not physically shining. The yak wears a small drab yoke it probably won't let you get near on principle."

printed name of yak is "bored yak"

every turn (this is the leaf-yak rule):
	if yak is not on skid and leaf is on skid and skid is touchable and yak is touchable:
		say "The yak perks up, walks over and onto the skid, and starts munching away at the leaf.";
		now yak is on skid;

the yak wears a drab yoke.

description of the drab yoke is "[if yak wears yoke]It doesn't look very comfortable, but it also doesn't look locked. It probably has some sort of safety catch, so if the yak runs into anything, it will break off. There are scratchings that look familiar, but you can't get close enough to read them. You could probably read it to see if it has a brand name. But one thing you can read is that the yoke may break if subjected to strong magnetic fields.[else]Looking closely, you see 0123456789 )!@#$%^&*( engraved near the yoke's top, with the 26 letters of the alphabet and all manner of odd punctuation scrawled in an order that seems random--no, worse than random, if you were trying to group them sensibly. The drab yoke feels less exciting than just about everything else you've seen here, [yoke-interj][end if]."

to say yoke-interj: say "[if cur-score of presto is 0]and that may come in handy once you figure what's going on[else]so maybe you need a different sort of word for it[end if]"

a-text of drab yoke is "RYORYYRR". b-text of drab yoke is "RYOPYYRR". parse-text of drab yoke is "x[sp]-[sp]Y[sp]B[sp]-[sp]-[sp]x[sp]x".

the scratchings are a plural-named boring thing. they are part of the yoke. description of the scratchings is "[bug-report]". bore-text is "The yoke is more important to manipulate than the scratchings, though they may be worth examining[if yak is not moot] once the yak is gone[end if].". bore-check is bore-scratchings rule.

understand "scratches" as scratchings.

this is the bore-scratchings rule:
	if yak wears yoke, say "[if current action is taking]The yak shifts--it may think you want to tighten the yoke or something[else]You can't get close enough to see or do anything with the scratchings[end if]." instead;
	if current action is examining, try examining yoke instead;
	if current action is scaning, try scaning yoke instead;

does the player mean showing a badbook to yak: it is very likely.

understand "bad book" as a badbook.

before giving pedanto notepad to yak:
	say "You don't want to risk the yak nibbling at that. Maybe try something less useful." instead;

try-keyboard is a truth state that varies.

yak-badbook is a truth state that varies.

before giving a badbook to yak:
	if yak is not on skid:
		now yak-badbook is true;
		say "[one of]The yak doesn't trust you with something that doesn't look quite enough like food. Maybe you if you gained the yak's trust, first, it might...[or]Still, the yak doesn't trust you enough to eat what was THAT part of a tree. Yet.[stopping]" instead;
	say "The yak gazes blankly at the book. Then, it ignores the leaf for a second. It begins to munch on the book, for a change of pace. But the actual paper is as indigestible as the words. Some deep animal intuition makes it shudder. It almost pounds its head on the skid--and snap! The safety on the drab yoke calls it to crack and fall off. The yak, dazed, walks away. You pick up the drab yoke--it's not that heavy.";
	now yak-sol is 2;
	move drab yoke to location of player;
	now player has drab yoke;
	moot yak;
	moot noun;
	reg-inc;
	do nothing instead;

to yak-and-yoke:
	say "[line break][if try-keyboard is true]Now, you can flip to the keyboard like you tried before, and w[else]W[end if]ith the yak off the skid, you remember the lossless compression that will let you change the skid back to a disk.";
	now yoke is in Hacks Shack;
	moot leaf;
	moot yak;

this is the leo-rand-forward rule:
	if Leo is touchable, say "'I don't wanna go back dere, boss. I wants adventureses. Fightses.' says [l-r]." instead;

check going south in Char Arch:
	abide by the leo-rand-forward rule;
	if Leo is dismissed, abide by the post-wall-arch rule;

this is the post-wall-arch rule:
	if casserole is moot:
		say "You don't have another workout for [l-n-r].";
	else if yak is moot:
		say "[if casserole is moot]You don't have another casserole. Or another chore[else]You maybe could've used [l-n-r] to push the yak around, but not now[end if].";
	else if yak is on skid:
		if casserole is in Hacks Shack:
			say "You offer [l-n-r] the casserole in exchange for pushing the skid north. 'Fuel? Us? Useful!' It's a great workout for them, and though they're a bit careless pulling the skid into the shack, it breaks a safety catch on the drab yoke, which falls to the ground. The yak blinks, nods at all three of you, and runs off. The casserole replenishes vital carbohydrates or something for [l-n-r]. They ask to keep the dish, which is fine with you. The shack's messy enough.";
			reg-inc;
			moot yak;
			now yak-sol is 3;
			now skid is in Hacks Shack;
			now drab yoke is in Hacks Shack;
			moot casserole;
			move player to Hacks Shack;
		else:
			say "You'd like to ask for help, but you don't have enough muscle food for [l-n-r] after they pull the skid. Those escaroles simply aren't meaty enough.";
	else:
		say "'Nyurgh! Hungry!' you recall [l-n-r] saying. [if casserole is off-stage]Maybe if you can make some food, and[else]You've made food they might like, so[end if] once you have some manual labor they'd be better suited for, you can visit them.";
	the rule fails;

chapter keyboard

the keyboard is a thing.

description of keyboard is "[if caps lock is part of keyboard]It's complete, now, since you put the caps lock button in[else]It's missing a button on the left[end if][if TBA key is part of keyboard]. Also, there's a weird 'TBA' key[else]. You fixed the TBA key to a tab key[end if]."

chapter cretins' cistern (holds dart)

the cretins cistern is scenery in Char Arch. the cretins cistern is an opaque container. printed name of cretins cistern is "cretins['] cistern". description of cretins cistern is "Property of Sinbad's Sad Bins, it reeks of bad sins. Written on it is RIP permadust/spumed tar/dumpster/dreamt-ups Release 3. [if dart is in cretins cistern]You take a peek in--to see [one of]a dart in[or]that dart still[stopping] there[else]It's empty, now you took the dart[end if].".

check taking cretins cistern: say "Way too heavy." instead;

check examining cretins cistern: ignore the examine containers rule;

cistern-look is a truth state that varies.

check searching cretins cistern: try examining cretins cistern instead;

burn-check is a truth state that varies.

check entering cretins cistern: say "You'd feel dumb trying to get out again." instead;

check scaning cretins cistern:
	if dart is in cistern:
		say "Hmm...there's a reading when you scan over the dart.";
		try scaning dart instead;
	say "With the dart gone, the cretins['] cistern shows up nothing." instead;

section dart

the dart is a reflexive thing. description is "[if dart is in popgun]Locked and loaded[else if dart is not in cistern]It's long and narrow, made more for stunning than killing, for propulsion than throwing[else]The dart is in the cretins['] cistern, just out of reach[end if]."

a-text of dart is "RRYR". b-text of dart is "PRYP". parse-text of dart is "UNIQUE". dart is any-spoilable.

the cretins cistern contains the dart.

check taking the dart when dart is in cretins cistern:
	say "You grunt and stretch, but you can't quite reach the dart. The cretins['] cistern seems to bend unexpectedly when you get close--crestin['], if you will. You [if cur-score of presto is 0]may not have found how to get things done here[else]probably didn't grunt the right thing[end if]. Maybe you just need to get disgusted you can't get the dart the easy way." instead;

check throwing it at (this is the don't throw dart rule) :
	if noun is dart:
		if noun is part of popgun, say "Now that the dart is in the gun, you don't want to unload it. You will shoot it when you need to." instead;
		if noun is rand or noun is leo, say "It wouldn't hurt someone as big as [noun], and you don't need to." instead;
		say "The dart is some weird foam that is tough to throw. It's probably better to shoot it[if player does not have popgun] once you've got something to shoot it with[end if]." instead;
	say "You don't have many good rangy weapons in this game. Attacking instead (though that's useless too)...";
	try attacking the second noun instead;

chapter tsar star

a tsar star is a reflexive wearable thing in Char Arch. "A tsar star--the sort you pin to your clothes to show authority--is mired in some tars here. You might be able to take it, if you are in the right emotional state: not too confident, not too despondent."

a-text of tsar star is "RYRR". b-text of tsar star is "RYRR". parse-text of tsar star is "R[sp]A[sp]x[sp]x". tsar star is any-spoilable.

description of tsar star is "It's not some paper gold star from Mrs. Crabtree's third grade class. It's actual dull metal. Shows you are a tsar of some sort of arts.". bore-text of tsar star is "Straightforward taking won't work, and neither will other manipulation. You wonder what sort of magic might get the tsar star out.". bore-check of tsar star is bore-tsar-star rule.

this is the bore-tsar-star rule:
	if current action is taking and tsar star is in Char Arch, say "The tsar star whooshes and rotates just enough to frustrate you. You mutter 'bad star' under your breath, but that's almost a bit too harsh even for this area. You figure you'll probably see how to get it once you give up, but you can't give up just to take it." instead;

check taking off tsar star: say "[if plebe is moot]But it looks so jaunty and reminds you of how you got rid of that plebe[else]You shouldn't remove it. You might need to impress someone with it[end if]." instead;

section tars (clue tsar star)

the tars are cluey scenery in Char Arch. "Ucky and grimy. You may need to do or say something special to pull the tsar star out."

a-text of tars is "RYRR". b-text of tars is "RGRP". parse-text of tars is "UNIQUE". tars are any-spoilable.

check scaning tars:
	say "Nothing, until you aim at the tsar star.";
	try scaning tsar star instead;

book Dirge Ridge

Dirge Ridge is a room in Presto. Dirge Ridge is south of Char Arch. "[if odes song is moot]With the sods-gone odes song gone, you're ... well, just mad about stuff. [else]Asods-gone odes song floating around leaves you thinking 'Erg... I'd ...' [end if]A vile veil covers any way except back north.". printed name of Dirge Ridge is "[if odes song is moot]Ires['] Rise[else]Dirge Ridge[end if]". roomnud of Dirge Ridge is table of Dirge Ridge nudges.

the vile veil is bounding boring scenery in Dirge Ridge. description of the vile veil is "It's so horrible to even look at, and you realize whatever it is protecting you from must be even worse.". bore-text is "The veil's oppressive to even think about, but it also protects you from falling off. You don't need to do anything with it."

after looking in Dirge Ridge:
	set the pronoun it to vile veil;
	continue the action;

check going north in Dirge Ridge:
	if Leo is fightin or Rand is fightin, say "You're able to run away. [if Rand is in Dirge Ridge]Leo's down, and Rand's only interested in his turf, maybe protecting his new friend[else]Leo doesn't seem up to chasing you, so maybe he's not a real bad guy[end if].";
	if Leo is eager and sods gone odes song is not moot, poss-d;

check going to Dirge Ridge for the first time: say "A rather big fellow has his back to you, wishfully blubbing 'Oblige Big Leo. I want a twin.' He turns around and sees...you, a lot smaller than him. 'Sneak! Snake!' Leo runs at you! He's a bit slow, fortunately. But he's a bit mad you caught him in a less-than-macho moment."

every turn when player is in Dirge Ridge (this is the fight rand or leo rule):
	if Leo is fightin:
		say "Leo bulls at you, but you're easily able to outrun and outwit him. Maybe you can easily discourage him, too.";
	else if Rand is fightin:
		say "Rand charges at you straightforwardly, but he's as lumbering as Leo. He can probably be tricked by a similar fake-out.";

check dropping while in Dirge Ridge:
	say "You have nothing worthless enough to leave lying around in or by here." instead;

chapter bruiser definitions

a bruiser is a kind of person. a bruiser can be fightin, washed up, eager, or dismissed. a bruiser is usually fightin.

chapter Leo/Rand stubs

lr-acq is a truth state that varies.

to say lrblab:
	say "[if lr-acq is true]recount[else]discover";

check scaning a bruiser (this is the clue whassup if washups rule) :
	if Leo is washed up and Rand is washed up, try scaning wzup instead;

to say r-l of (p - a person): say "[if p is Leo]Rand[else if p is Rand]Leo[else]BUG[end if]"

check taking a fightin bruiser: say "You can 'take' [noun] by trickery." instead;

to say l-r: say "[if a random chance of 1 in 2 succeeds]Leo[else]Rand[end if]"

to say l-n-r: say "[one of]Leo and Rand[or]Rand and Leo[at random]"

persuasion rule for asking an eager bruiser to try pulling the sled:
	say "[noun] says 'If somethin['] useful an['] heavy was onnit, sure, boss.'";
	persuasion fails;

persuasion rule for asking an eager bruiser to try attacking the hogs:
	say "[noun] counts on his fingers, reasoning that three is more than two and a haff. 'Sorry, boss.'";
	persuasion fails;

persuasion rule for asking a bruiser to try doing something:
	if noun is not eager:
		say "[noun] isn't up to that.";
		persuasion fails;
	say "Alas, [l-n-r] are men of action.";
	persuasion fails;

before scaning a bruiser: if Rand is washed up and Leo is washed up, try scaning wzup instead;

for writing a paragraph about a bruiser:
	if Rand is not touchable:
		say "Leo is here, looking strong if not fast.";
		now Leo is mentioned instead;
	now Leo is mentioned;
	now Rand is mentioned;
	if Rand is fightin, say "Rand is here, looking to do a little better than Leo." instead;
	if Leo is eager, say "[l-n-r] are here, [if rebuked is true]tentatively[else]eagerly[end if] waiting to follow you[if harpings phrasing is touchable] to further adventure, though you don't know if you want to share a mutism summit with them. They don't seem like they'd enjoy keeping quiet[end if]." instead;
	if Rand is washed up and Leo is washed up, say "[l-n-r] are here[r][one of], commiserating. Maybe a bit of a talking and listening would cue you to help them feel less like [i]washups[r][or], half wanting a third party to drop a nice word, maybe listen a bit, and assure them they aren't [i]washups[r][stopping]." instead;

chapter Leo

check scaning Leo when Rand is in Dirge Ridge and Rand is fightin: say "It's Rand you need to deal with, now." instead;

Leo is a reflexive bruiser. Leo is in Dirge Ridge. description is "[if Rand is off-stage]Huge but lumbering. Almost like a bull[else]Leo is Rand's mirror image--violent, not evil. A naughty anythug on a gay hunt[end if][if Leo is washed up]. He seems upset. For all their macho talk, he and Rand might just need someone to talk to[end if]."

a-text of Leo is "YRY". b-text of Leo is "YRY". parse-text of leo is "UNIQUE". leo is any-spoilable.

initial appearance of Leo is "[bug-report]".

chapter Rand

Rand is a reflexive bruiser. description is "Rand is Leo's mirror image, loutish and muscular and taller than you[if Rand is washed up]. He seems upset. For all their macho talk, he and Leo might just need someone to talk to[else if rand is fightin]. He looks over-focused, like he can be suckered by a feint, but nothing TOO subtle[end if]."

a-text of Rand is "RYRR". b-text of Rand is "RGRR". parse-text of Rand is "x[sp]A[sp]x[sp]x". rand is any-spoilable.

initial appearance of Rand is "[bug-report]".

chapter whassuping

the wzup is privately-named proper-named reflexive boring scenery. printed name of wzup is "between [l-n-r]". description of wzup is "You shouldn't be able to see the 'washups' text, so this is a BUG.". bore-text is "You don't need to refer to both [l-n-r] at once. Referring to one is as good as referring to the other.".

a-text of wzup is "RRYRRYR". b-text of wzup is "PRYRRYR". parse-text of wzup is "W[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

check asking about "whassup" when wzup is touchable: if noun is a bruiser, try fliptoing wzup instead;

chapter sods gone odes song

the sods gone odes song is LLPish vanishing boring scenery in Dirge Ridge. description of sods gone odes song is "The song fits Dirge Ridge well, but that's not necessarily a compliment.". bore-text is "You can really only listen to (or X) the song. But maybe, with the right word, you could get rid of it. Not that you need to.". bore-check is bore-sods rule.

a-text of sods gone odes song is "RYYRRYRR". b-text of sods gone odes song is "R?YRRYRR". parse-text of sods gone odes song is "x[sp]O[sp]O[sp]x[sp]x[sp]E[sp]S[sp]S". sods gone odes song is parse-spoilable.

this is the bore-sods rule:
	if current action is examining:
		say "You can really only listen to the song.";
		try listening instead;
	unless the action is procedural, try listening instead;

book Austerer Treasure

Austerer Treasure is an innie room in presto. Austerer Treasure is west of Grey Gyre. "[if ye hoop is touchable]This room's pretty barren. I mean, a lot of treasure rooms generally get looted of unicorns['] coin urns and all before text adventurers without weapons make it there, but man. All that remains is an ancient-looking hoop about nine feet up labeled YE HOOP.[paragraph break]Looking at how it's out of reach sort of makes you want to give up, or maybe just pretend to give up and maybe something'll turn up[else]You've completely looted this place[end if]. The only way to leave is back east.". roomnud of Austerer Treasure is table of Austerer Treasure nudges.

after looking in Austerer Treasure:
	if ye hoop is in Austerer Treasure, set the pronoun it to ye hoop;
	continue the action;

chapter Ye Hoop

Ye Hoop is proper-named vanishing boring scenery in Austerer Treasure. description of Ye Hoop is "It's a hoop rather high up. 'Yo, hope,' you think to yourself, imagining it would totally crumble and reveal a treasure if you could grab it. But then you think 'Ooh, yep,' seeing how high it is.". bore-check of Ye Hoop is bore-hoop rule.

this is the bore-hoop rule:
	if current action is jumping or current action is pushing or current action is pulling or current action is taking, say "It's too high up to grab. Especially with your possessions weighing you down. You may need to find the right way to say you don't need them for a moment." instead;

a-text of Ye Hoop is "[if ye-rec]RRYYYO[else]RYYR[end if]". b-text of Ye Hoop is "[if ye-rec]RRYGYO[else]RGGR[end if]". parse-text of ye hoop is "[if ye-rec]x[sp]x[sp]-[sp]O[sp]-[sp]Y[else]POOH[end if]". ye hoop is parse-spoilable.

[this is cheaty text for logsync.py. So don't delete it!

a-text of hoop1 is "RYYR". b-text of hoop1 is "RGGR". parse-text of hoop1 is "UNIQUE". hoop1 is any-spoilable.

a-text of hoop2 is "RRYYYO". b-text of hoop2 is "RRYGYO". parse-text of hoop2 is "x[sp]x[sp]-[sp]O[sp]-[sp]Y".

]

ye-scan is a truth state that varies.
no-ye-scan is a truth state that varies.
ever-hoop-both is a truth state that varies.

after scaning ye hoop:
	if ye-rec:
		now ye-scan is true;
	else:
		now no-ye-scan is true;
	if no-ye-scan is true and ye-scan is true:
		if ever-hoop-both is false:
			say "Hm, different readings whether it's ye hoop or not.";
			now ever-hoop-both is true;
	continue the action;

to decide whether ye-rec:
	if the player's command includes "ye", decide yes;
	decide no;

phooeyed is a truth state that varies.

chapter angrier earring

the angrier earring is a thing. description is "It pulses in your hands. Perhaps it has some purpose you haven't discovered yet."

section N E Recs Censer (earring, after visiting Hacks Shack)

the N E Recs censer is a thing. description of censer is "N-E-Recs is a popular brand name in Yorpwald for stuff you can pass off as classier or more vintage or whatever than it is. It's black with blocky flecks of bright green. If they were lumped together and you stared too long, you'd get a headache. The year 1983 is scratched in, possibly AD or BC.". "The N-E-Recs censer, black with flecks of black green, rests here.". printed name of censer is "N-E-Recs Censer" [bold-ok]

a-text of n e recs censer is "RRRYYR". b-text of n e recs censer is "RR???R". parse-text of n e recs censer is "x[sp]x[sp]?[sp]?[sp]?[sp]x". n e recs censer is parse-spoilable.

check taking N E Recs censer: say "It's too heavy and bulky. You see no need to lug it around. Perhaps whatever it could change into will be more manageable." instead;

the computer screen is a thing. description is "It's an N-E-Recs brand, just like the censer it sprang from, but really, there's no difference between the SEEN-CR, SEER-CN, CN-SEER and CR-SEEN that all fight over market share.[paragraph break]Technical details? [if computer screen is not on labs slab]Vid-o-Void, since it's not hooked up to anything[else if BUB DUDE EGG is part of the computer screen]Ugh. It's got [BUB DUDE EGG] on the screen. You've compiled, but there's one more thing to do[else]A bunch of nonsense code that might not even work[end if]." [bold-ok]

Include (-
	has transparent talkable
-) when defining computer screen.

check putting screen on skid:
	say "It's just the wrong shape to do that. It is far enough from a perfect cube that any sort of wobbling will make it tumble over, and given how old-school the screen is, that could break it. When you need it, you can just carry it." instead;

book Marines Seminar Remains

Marines Seminar Remains is east of Grey Gyre. Marines Seminar Remains is in Presto. "The only way out is back west. The sport ports in the other directions indicate this was once a busy seminar, though you aren't and won't be equipped to get through them[if popgun is not in Marines Seminar Remains]. Nothing's left, now that you took the popgun[end if].". roomnud of Marines Seminar Remains is table of Marines Seminar Remains nudges.

after printing the locale description for Marines Seminar Remains when Marines Seminar Remains is unvisited:
	say "You hear a loud voice yell 'REISMAN! Snare [']im!' / 'Mean, sir!' Uh oh. That plebe might be in trouble. But it's nice to know the plebe's name. You resolve to do what you can to lobby for amnesty once Elvira's out of the way.";
	continue the action;

chapter PG-on-up popgun

The PG on up popgun is a container in Marines Seminar Remains. "The only equipment left over from the seminar is a PG-on-up popgun.". printed name of PG on up popgun is "PG-on-up popgun". understand "gun" as PG on up popgun.

description of PG on up popgun is "It's cheap plastic but probably packs a punch with the right ammo--but if it were G? No, pup[if boing is reflexed]. Its boing-go bin, now[else]. You notice its boing-go bin, where you put the ammunition, is broken. It may take a eureka moment to figure out how to fix this spoilt pistol[end if][if dart is in popgun]. Loaded, too, with that dart![end if]. You notice a serial number."

check scaning PG on up popgun:
	if boing go bin is not reflexed:
		say "Only the boing-go bin shows anything.";
	try scaning boing go bin instead;

after printing the name of the popgun while taking inventory:
	say " ([if dart is in popgun]loaded with the dart[else]unloaded[end if])";
	omit contents in listing;

rule for printing room description details of the PG on up popgun:
	if number of things in popgun is 0:
		do nothing.

check scaning popgun when boing is reflexive:
	say "No reading until you hit the boing-go bin.";
	try scaning boing instead;

report taking popgun:
	say "You take the gun and look it over. You're not one for violence, but the gun doesn't look lethal. But since it's PG-on-up and G-on-up, it can't be a totally po['] gun. It could stun an opponent, with the right ammo.";
	the rule succeeds;

check examining popgun: ignore the examine containers rule;

understand "spoilt/pistol" and "spoilt pistol" as popgun.

section boing go bin (part of popgun)

The boing go bin is a boring thing. it is part of the popgun. the boing go bin is reflexive. description of the boing go bin is "[if boing is reflexive]It's sort of springy, but it doesn't seem to really bounce around. You may need a eureka moment to figure how to fix it[else]The boing mechanism is fully equipped to go boing again. Yay[end if].". bore-text is "Your mechanical abilities won't help[if boing is reflexed], but they don't need to[else], but there may be a slick way to get the [b]BOING[r] back[end if].". printed name of boing go bin is "boing-go bin".

a-text of boing go bin is "RYRRY". b-text of boing go bin is "?YRRY". parse-text of boing go bin is "x[sp]I[sp]x[sp]x[sp]O". boing go bin is parse-spoilable.

section serial number (part of popgun)

The serial number is a boring thing. it is part of the popgun. description of serial number is "B09140715.". bore-text of serial number is "You can't do much with it except examine it.". bore-check of serial number is bore-serial rule.

this is the bore-serial rule:
	if the current action is scaning, try scaning the popgun instead;

gun-load-tried is a truth state that varies.

section inserting into popgun

check inserting it into (this is the don't insert if already inserted rule): if noun is in second noun, say "But [the noun] is already in [the second noun], where it needs to be." instead;

the don't insert if already inserted rule is listed before the can't insert what's not held rule in the check inserting it into rulebook.

check inserting it into (this is the dart-popgun rule):
	if noun is dart and noun is in popgun, say "The dart is loaded nicely in the popgun." instead; [?? do we reach this?]
	if second noun is popgun and boing is reflexive:
		if noun is dart:
			now gun-load-tried is true;
			say "It seems like it should fit, but it doesn't. You can't quite compress the boing-go bin right, but if you had a moment of insight, you could." instead;
		say "That's not the right shape to fit in the gun to fire. Anyway, the boing-go bin looks broken." instead;
	if noun is dart and second noun is not popgun, say "How could that launch the dart?" instead;
	if noun is not dart and second noun is popgun, say "That's not the right shaped ammo for the popgun." instead;
	if noun is dart and second noun is popgun, ignore the can't insert into what's not a container rule;

chapter sport ports LLP

the sport ports are plural-named reflexive LLPish boring scenery in Marines Seminar Remains. description of the sport ports is "As you get close, you see how tough they might be and think to yourself 'I'm saner.' They won't help with your main quest, and [if sport ports are reflexive]yet, you feel there may be a right way to salute them and the challenge they provide[else]you already showed them some respect[end if]. You can [b]READ[r] the firm who made them.". bore-text is "The sport ports would probably do something unfavorable to you. You don't need to do anything with them."

understand "sport port" and "port" as sport ports when player is in Marines Seminar Remains.

a-text of sport ports is "RRYRR". b-text of sport ports is "?R?R?". parse-text of sport ports is "?[sp]x[sp]?[sp]x[sp]?". sport ports are parse-spoilable.

book Saps' Pass / Phat Path

Saps Pass is a room in Presto. "This path cuts between two lethally beautiful areas, for a dope combination of safety and aesthetics.[paragraph break]Mount Um-Not blocks you to the east, with Deil's Slide to the west. [wall-sentence][if hawt thaw is in Saps Pass]. There's also an odd clump of Hawt Thaw off to the side[end if]. You can retreat south, too, of course.". roomnud of Saps Pass is table of Saps' Pass nudges. printed name is "[if lawl wall is moot]Phat Path[else]Saps['] Pass[end if]".

understand "phat/path" and "phat path" as Saps Pass when hogs are moot.

check scaning in Saps Pass when Leo is in Saps Pass: say "[l-n-r] ooh and aah at how you're using a thing to find out about things.";

to say wall-sentence:
	if lawl wall is touchable:
		say "There's also a big wall here, blocking the way north. Feels like it's taunting you--must be a lawl wall. It's got keys hanging from it";
	else:
		say "There's not much left with the wall gone, except for [if harpings phrasing is in Saps Pass]a harpings phrasing guarding [end if][one of]a quiet-looking structure which must be a MUTISM SUMMIT[or]the mutism summit[stopping] to the north[if starch charts are in Saps Pass][desc-starch][end if]" [bold-ok]

check going in Saps Pass when lawl wall is touchable:
	if noun is south, say "The hogs snicker as you walk away.";
	if noun is north, say "Not with the wall and the hogs in the way." instead;

chapter bounding scenery

section Mount Um Not

Mount Um Not is bounding boring scenery in Saps Pass. description of Mount Um Not is "It's as huge and unwelcoming as Cupid's Cuspid isn't.". bore-text is "Mount Um-Not is just there for scenery. Intimidating scenery, but scenery.". bore-check is the bore-mount-um-not rule. printed name of Mount Um Not is "Mount Um-Not".

this is the bore-mount-um-not rule:
	if current action is climbing or current action is entering, try going east instead;
	if current action is taking, say "Stronger adventurers than you couldn't take Mount Um-Not." instead;

chapter Deils Slide

Deils Slide is bounding boring scenery in Saps Pass. description of Deils Slide is "You swear you can see the toxic fumes seeping from it. It's too dangerous to explore[swan-puma].". bore-check of Deils Slide is bore-deils-slide rule. understand "deil" and "deil slide" as Deils Slide.

this is the bore-deils-slide rule:
	if current action is taking, say "The Deil's Slide is more likely to take YOU." instead;
	if current action is climbing or current action is entering, try going west instead;

check going west when player is in Saps Pass: say "The Deil's Slide would make quick work of even [if Leo is in Dirge Ridge]your old friends [end if][l-n-r][swan-puma], with or without a goop-pogo." instead;

check going east when player is in Saps Pass: say "[if Leo is touchable][l-n-r] don't have the endurance to climb Mount Um, Not. Neither do you[else]You don't want to climb Mount Um, Not[end if]. The rest of your journey lies north." instead;

Check going inside in Saps Pass: if mutism summit is touchable, try going north instead;

chapter lawl wall

the lawl wall is vanishing scenery in Saps Pass.

check taking lawl wall: say "You'll need to take the keys, somehow." instead;

description of lawl wall is "A spams-spasm of bad jokes, and I'd tell you a few, but it'd be a bigger time sink than playing games where you point and click instead of just sensibly typing. It seems to be laughing at your lack of progress. You can see keys on the wall."

section keys (part of lawl wall)

some keys are part of the lawl wall. the keys are vanishing and plural-named. description is "You're pretty sure the keys open the lawl wall, since the hogs are keeping an eye on them, but you can't be sure."

a-text of keys is "RORY". b-text of keys is "RORY". parse-text of keys is "UNIQUE". keys is any-spoilable.

the hogs are vanishing plural-named people in Saps Pass. description is "They're as big as [l-n-r] but meaner. Plus there are three of them. They look much more pompous, though--maybe distracting them just right can get under their skin or sneak those keys on the wall.". "Hogs are stretched against the lawl wall, in no hurry to try to get by. They look like tough customers, too tough for the sort of words that got you here. Or ... are they?"

hogs-not-keys is a truth state that varies.

after printing the locale description for Saps Pass when Saps Pass is unvisited:
	say "Shouldn't be much of a problem to get the keys and...oh no! you hear...[wfak][line break]";
	say "A 'PSS!' Suddenly three hogs, all [l-n-r]'s size, block your way.'Hello, eh?! LOL!'[paragraph break]One just up and takes your popgun, smashes it, laughs, and even rips off your tsar star and crumples before going to guard the keys, the big jerk. What to do?";
	moot tsar star;
	moot popgun;

chapter hogs

a-text of hogs is "RYRR". b-text of hogs is "RGRR". parse-text of hogs is "x[sp]O[sp]x[sp]x". hogs are any-spoilable.

check taking hogs:
	say "You and [l-n-r] can take [']em. But not literally." instead;

chapter hawt thaw

the clump of hawt thaw is LLPish vanishing boring scenery in Saps Pass. description of hawt thaw is "It doesn't make much immediate sense, and it's probably not critically important to your quest. It's not in the way. But maybe thinking about it right will widen your horizons a bit.". bore-text is "From what you know of hawt thaw, it may not be entirely safe. It sort of appears and disappears with little rhyme or reason."

a-text of hawt thaw is "RRYR". b-text of hawt thaw is "R???". parse-text of hawt thaw is "W[sp]?[sp]?[sp]?". hawt thaw is any-spoilable.

chapter mutism summit

the mutism summit is boring scenery. description of mutism summit is "[if Hacks Shack is visited]The mutism summit/Hacks['] Shack looks just as you left it[else]The mutism looks quiet and inviting. You won't need interjections once you're in there[end if].". bore-text is "The mutism summit is pretty stable. Not much to do but [if Hacks Shack is visited]re[end if]enter to the north.". bore-check is the bore-mutism-summit rule.

this is the bore-mutism-summit rule:
	if current action is entering, try going north instead;
	if current action is attacking,	say "Whack the shack? Back!" instead;

to say swan-puma:
	say "[one of], with or without the fabled Sawn Swan (whose victims emit tearful NAWs) and Ampu-Puma (whose victims plaintively cry 'Um, PA') or even the LMAO-loam which lures unwary travelers to their death[or][stopping]";

chapter harpings phrasing

the harpings phrasing is scenery. description of harpings phrasing is "It's got warnings against entering the shack:[paragraph break]'ALERT! ALTER! RETREAT, ALL![paragraph break]LOG ONS? NO! SLOG![paragraph break]UGH! GOTH, OUT! THUG TOO? UGH! GO, HUT!'" [bold-ok]

check taking harpings phrasing: say "Removing the warning won't make the warning any less valid." instead;

check scaning harpings phrasing: say "It's all over the place. Maybe you should focus on a specific row[if rebuked is true] you haven't worked with yet[end if].";

byebyes is a list of things variable. byebyes is { log ons letters, alert letters, ought letters}.

bye-disambig is a truth state that varies.

does the player mean doing something with entry 1 of byebyes:
	if bye-disambig is false:
		say "(picking one of the capitalized sets of letters on the sign at random)";
		now bye-disambig is true;
	it is likely.

rebuked is a truth state that varies.

section log ons

the log ons letters are a plural-named reflexive thing. the log ons letters are part of the harpings phrasing. description is "[if log ons are reflexed]The letters seem dull now you said so long[else]They're bolded, IN CAPS and slightly raised[end if]."

understand "logons/letters" and "logons letters" as log ons letters.

a-text of log ons is "RY*RYRR". b-text of log ons is "RG*RGPR". parse-text of log ons is "x[sp]O[sp] [sp]x[sp]O[sp]N[sp]x". log ons are parse-spoilable.

section alert

the alert letters are a plural-named reflexive thing. the alert letters are part of the harpings phrasing. description is "[if alert letters are reflexed]The letters seem dull now you said later[else]They're bolded, IN CAPS and slightly raised[end if]."

understand "alter letters" and "alter/letters" as alert letters.

a-text of alert is "RYRYR". b-text of alert is "RY???". parse-text of alert is "x[sp]A[sp]?[sp]?[sp]?". alert is parse-spoilable.

section ought

the ought letters are a plural-named reflexive thing. the ought letters are part of the harpings phrasing. description is "[if ought letters are reflexed]The letters seem dull now you said tough[else]They're bolded, IN CAPS and slightly raised. They're also red[end if]."

a-text of ought is "RYYRR". b-text of ought is "RYYRR". parse-text of ought is "x[sp]O[sp]U[sp]x[sp]x". ought is parse-spoilable.

chapter yrnet entry

the YrNet Entry is boring amusing scenery. "You can't see where the YrNet Entry is. It's top-notch security, designed to fool even Elvira's sneakiest minions!". bore-text of YrNet Entry is "The YrNet Entry ultimately [if Leo is touchable]will[else]did[end if] not restrict you from entering the Hacks['] Shack.".

check going north in Saps Pass when hogs are moot or keys are moot:
	move YrNet Entry to Saps Pass;
	if Leo is touchable, say "[one of]You walk north into the hacks['] shack. [l-n-r] follow. An electronic voice booms at them! 'YrNet Entry rejects N-E-Try!' It's one of those out-of-sight high-tech alarm devices, and it's detected them as not smart enough! It's not fair, and it's not nice, but if you need to do some programming, maybe they won't be much help anyway.[paragraph break]It'd be sad to see [l-n-r] go, but perhaps a nicer way than yelling at them could help give them time to get to know each other without you standing in the way. Perhaps you could take a cue from that sign by the shack--it might give you some authority[or]You don't want that electronic warning. [l-n-r] don't, either. You glance at the sign again. Whether or not they can read it, you can tell them the gist. It'll be a softer letdown, coming from you[stopping]." instead;
	if Hacks Shack is unvisited, say "You feel a small tingle--you've felt it before, from the invisible YrNet Entry which disrupts unwanted visitors. But only people. Sometimes it also breaks up really oppressive software and hardware, too. It doesn't reject you, and that's good."

chapter Starch Charts

the Starch Charts are vanishing LLPish plural-named scenery. "The starch charts seem a bit beyond you, yet they seem to be indicating something. You're not sure what, and you're not sure you need to 'solve' the charts to know. But they're covered with all the interjections you've used so far--well, up to a certain point. Where the interjections become, well, actual concrete nouns or even verbs you could spit out in disgust to similar effect. Some are misspelled for effect, but you still recognize them."

a-text of starch charts is "RRYRRR". b-text of starch charts is "RRGR??". parse-text of starch charts is "x[sp]x[sp]A[sp]x[sp]x[sp]x".

to say desc-starch: say ". [if starch charts are reflexed]The starch charts you ridiculed are tacked to the side of the mutism summit[else]Some starch charts on the side of the mutism summit may or may not be an interesting distraction[end if]";

book Hacks' Shack

Hacks Shack is an innie room in Presto. Hacks Shack is north of Saps Pass. "[if Hacks Shack was unvisited]You feel a sense of peace here but also one of mission. You feel the magnetic magic-net, the rebuff-buffer that will let you change stuff to stuff and keep out of E-Viral's snooping eye, but all those interjections you've been using need to give way to problem solving[else]You're in the shack where you probably need to write a program or something[end if][if Im Le Cop polemic is reflexed]. You feel obliged not to [i]budge[r] [']til you figure out that computer. You must be close[end if][if starch charts are in Hacks Shack]. [one of]Some starch charts are tacked to the side of the hacks['] shack[or]Those starch charts are still here to solve, if you want[stopping][end if].". roomnud of Hacks Shack is table of Hacks' Shack nudges. printed name of Hacks Shack is "Hacks['] Shack".

outside-text of Hacks Shack is "No. You can't go out until the job here is done. You don't need to."

shack-looked-yet is a truth state that varies.

after looking in Hacks Shack (this is the implicitly change angrier earring and keyboard rule):
	if shack-looked-yet is false:
		say "Yes. It is nice and quiet here. No need for interjections. Back to ... well, other ways to do things.";
		if player has angrier earring, say "[line break]But the quiet is shattered for a moment! ";
	if player has angrier earring:
		say "The angrier earring shakes violently--rangier rearing, I garner. Then it flies out of your hands and sticks into a recess in a wall you hadn't noticed. A secret compartment opens up, and out tumbles ... a censer! And not just any censer, an N-E-Recs Censer, flecked with black and green![paragraph break]'Err ... gain?' you ask, bemused. A censer seems bulky and impractical. But perhaps it can become something else.";
		moot angrier earring;
		move N E Recs censer to Hacks Shack;
	if keyboard is prefigured:
		say "You know, you're safe from SHATTER-THREATS here. You should turn that drab yoke into a [b]KEYBOARD[r], now.";
	continue the action;

check putting keyboard on labs slab:
	say "You suddenly realize how nicely the keyboard would fit in on the labs slab. Yes, just right there. You adjust it back and forth a bit for fun.";

to say my-auth: say "[author of random touchable badbook]";

after choosing notable locale objects when player is in Hacks Shack:
	set locale priority of slab to 9; [slab should appear first]

to say a-the:
	say "[one of]a[or]the[stopping]";

for writing a paragraph about a thing (called gbg) in Hacks Shack:
	if gbg is slab or gbg is futon or gbg is fount:
		say "The shack is furnished with a [if fount is touchable]fount too quaint and small to be a proper fountain[else]futon[end if]. There's also a labs slab, which [one of]still [or][stopping]holds [a list of things on labs slab][if number of badbooks in Hacks Shack is 1]. And oh dear, a copy of [my-auth]'s [my-bad], too[end if].";
		now all touchable badbooks are mentioned;
		now labs slab is mentioned;
		now futon is mentioned;
		now fount is mentioned;
		continue the action;
	if gbg is listed in shack-mess:
		let a be 0;
		repeat with gbg2 running through shack-mess:
			if gbg2 is in Hacks Shack:
				increment a;
		let b be a;
		say "[one of]This shack is a bit of a mess, too, because that's how programmers roll. Or, well, fail to roll and get out. Maybe you could clean up (in your own way)[or]Still part of the mess here:[stopping] ";
		let firsts be true;
		repeat with myitm running through shack-mess:
			if myitm is in Hacks Shack:
				if firsts is false and number of entries in shack-mess > 2:
					say ", ";
				now firsts is false;
				decrement a;
				if a is 0 and b > 1:
					say "and ";
				say "[if myitm is disk]that disk lying on the floor[else if myitm is flea][a-the] flea which looks dead[else if myitm is trim socks][one of]some[or]the[stopping] trim socks, though you don't need to dress up[else if myitm is gum][a-the] stick of gum[else if myitm is coal]the pile of coal[else if myitm is escaroles]some escaroles[else if myitm is casserole]a hot casserole[else][a-the] [polemic][end if]";
				now myitm is mentioned;
		say ".";
		continue the action;
	continue the action;

shack-mess is a list of thing variable. shack-mess is { disk, coal, socks, gum, Im Le Cop polemic, flea, escaroles, casserole }.

check going in Hacks Shack (this is the maybe lock player in rule):
	if noun is outside, try going south instead;
	if noun is not south and keyboard is not off-stage and censer is not off-stage, say "Nothing [noun], but you need to just sit and finish things here anyway." instead;
	abide by the shack-south rule;

this is the shack-south rule:
	if Im Le Cop polemic is reflexed:
		say "You're so close. You must be. [if dude bub egg is reflexed]Just do something simple with that [b]USB[r][else]You can't [i]budge[r] until you fix this program, here[end if].";
		the rule fails;
	if keyboard is not off-stage and screen is not off-stage:
		if hawt thaw is moot and starch charts are moot and lamb is moot and sport ports are reflexed:
			say "You've done everything else you could've, including some weird small details. You probably want to focus on things here.";
		else:
			say "You should have what you need. It's time to sit down and plow through some computer work, here.";
		the rule fails;
	else if screen is off-stage:
		say "You feel you're missing something. You probably should see about [treas-west].";
	else if keyboard is off-stage:
		if yak is not moot:
			say "That yak. Maybe you could release it from its yoke.";
		else:
			say "That drab yoke. What could it become?";
	make no decision;

to say treas-west:
	if austerer is not visited:
		say "the area west of the hump you didn't get past yet";
	else if hoop is in Austerer Treasure:
		say "the hoop in Austerer Treasure";
	else:
		say "what the censer could become";

chapter coal and ALocalCo cola

the pile of coal is a thing in Hacks Shack. description is "Black and disgusting as rotted teeth. Good for energy, apparently.". "Coal lies here in a corner."

check taking coal: say "You don't need an armful of THAT." instead;

a-text of coal is "RYRY". b-text of coal is "PGRY". parse-text of coal is "UNIQUE". coal is any-spoilable.

the ALocalCo Cola is a singular-named proper-named boring thing. description of ALocalCo cola is "In place of nutritional information on this bottle, you read: [paragraph break]O-CAL!!! Soda -> A sod. Pop !-> O.P.P.". bore-text of ALocalCo cola is "You can just drink it, or [b]POUR[r] it somewhere, when the time is right.". bore-check of ALocalCo Cola is bore-alocalco-cola rule.

this is the bore-alocalco-cola rule:
	if current action is drinking or current action is eating, now boring-exception is true;
	if current action is inserting or current action is pouring, now boring-exception is true;

[?? inserting into could be an action, here]

Does the player mean drinking ALocalCo: it is very likely.
does the player mean drinking the mug: it is very likely.

understand "bottle" as ALocalCo Cola when ALocalCo Cola is fungible.

chapter fount / futon

the fount is a thing in Hacks Shack. "A fount--too small to be a fountain[one of] (three keystrokes)[or][stopping]--is here. It is dry."

understand "fountain" as fount.

check switching on fount: say "You can't find a way to turn the fount on. It might overflow the shack as-is, anyway, so maybe it'd be better as something else." instead;

check switching off fount: say "It already is." instead;

a-text of fount is "RYRYR". b-text of fount is "PYRYR". parse-text of fount is "UNIQUE". fount is parse-spoilable.

check taking the fount: say "It is heavier than it seems. Plus, it's too bulky." instead;

description of fount is "It's relaxing to look at, even if it isn't running. Perhaps it was a fount of knowledge, and knowledge was just too dry for the water that was in it."

the futon is a thing. description is "It doesn't have any brand name like [randbla]. [unless cpuready]Like most futons, it's unsoft. You wouldn't want to sleep there unless you had some really tiring task ahead[else if peels speel is reflexive]It looks almost comfortable. It's sewn with designs of all sorts of peels--banana, orange, apple, and some you can't identify. Like most futons, it's unsoft[else]You're impressed you slept on it for so long. It looks lumpy now[end if].". "The futon you [if peels speel is reflexive]made from the fount[else]slept on[end if] lies here."

check entering futon: say "It's not quite for sitting, but it may help you make [i]leeps[r] of logic." instead;

check taking the futon: say "You need to get programming, here, not interior decorating." instead;

to decide whether cpuready:
	if keyboard is not on slab, decide no;
	if computer screen is not on slab, decide no;
	if caps lock is not part of keyboard, decide no;
	if disk is not in drive a, decide no;
	if Be Troo E Robot is reflexive, decide no;
	decide yes.

chapter locs pack

the Clack Ops Locs Pack is a flippable thing in Hacks Shack. "A Clack Ops Locs Pack is here, empty.". description is "It's empty. You don't see how sunglasses could make you type quieter, but you never know about technology. You might be able to read it to find out about related products or competitors."

check taking locs pack: say "It seems to have no use for you in that form." instead;

a-text of Clack Ops Locs Pack is "RYRRRYRR". b-text of Clack Ops Locs Pack is "?YR?R???". parse-text of clack ops locs pack is "?[sp]A[sp]x[sp]?[sp]x[sp]?[sp]?[sp]?".

chapter trim socks / rom sticks

a pair of trim socks are plural-named things in Hacks Shack. "Trim socks lie here. They're too small for you to wear, but they look comfortable and efficient."

a-text of trim socks is "RYR*RRYRRR". b-text of trim socks is "RYR*RRYPPP". parse-text of trim socks is "x[sp]O[sp]x[sp] [sp]x[sp]x[sp]I[sp]C[sp]K[sp]S".

description of trim socks is "Small and narrow. Probably not critical to figure what they do, but they might save time down the road."

check taking socks:
	say "They're way too narrow for your feet. Plus, you don't know if someone wore them. If they can't help you do things more efficiently, then probably best not to mess with them." instead;

a pair of rom sticks are plural-named LLPish things. description is "You imagine it can't be too hard to open up the disk drive[if location of player is not Hacks Shack] back at the shack[end if] and put them in.". the indefinite article of rom sticks is "a".

chapter escaroles / casserole

the escaroles are a plural-named thing in Hacks Shack. description is "Typical bleah garnish. Nothing close to a hearty meal."

the casserole is an LLPish thing. description is "Piping hot, but not your style to eat. You're not sure what's in it, and you don't want to look too closely."

a-text of escaroles is "RYRRYRYRY". b-text of escaroles is "RYRRYRYRY". parse-text of escaroles is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-".

check taking casserole:
	say "It's a bit too hot for that. It'll probably stay that way. Plus, it's kind of icky and gross unless you need a ton of calories after a big workout." instead;

check giving the casserole to the yak:
	ignore the can't give what you haven't got rule;
	say "The yak makes an unfortunate noise and turns its nose up. You probably want to give it something a little more herbivorous. Or save it for those with more carnivorous tastes. Or both." instead;

check putting the casserole on the skid:
	ignore the can't put what's not held rule;
	say "The container is annoyingly slick. It would probably roll off, or maybe even shatter if you hit a bump. You would be better off bringing someone back to the shack, if you wanted to give it to them later. You know, after they finished a workout. Like carrying something even heavier on the skid.[paragraph break]";
	ital-say "if you're thinking of giving it to the yak, yaks are herbivores.";
	do nothing instead;

check taking the escaroles:
	say "Bleah. They seem like useless garnish." instead;

chapter flea

a giant dead flea is a thing in Hacks Shack. "A giant dead flea is here, probably not decomposing yet."

check taking flea:
	say "Eww. Gross. Germy. Taking dead plants? Okay. Dead pests? Not so okay." instead;

a-text of flea is "RYYR". b-text of flea is "RYYR". parse-text of flea is "UNIQUE". flea is any-spoilable.

description of giant dead flea is "It's not been dead too long, fortunately. It's already turning some combination of dark oranges, reds and browns. Which is nicer than how animals usually biodegrade."

section leaf

a giant fallen leaf is a thing. description is "It's a beautiful collection of colors. If you were a herbivore, and you weren't colorblind, you probably couldn't resist eating it."

report putting leaf on skid:
	say "The leaf fits nicely there. It won't fall off.";
	set the pronoun it to the skid;
	the rule succeeds;

check taking leaf when leaf is on skid:
	ignore the can't put what's not held rule;
	if yak is touchable, say "The yak might bite you if you tried." instead;
	say "No, it's probably easier to move on the skid." instead;

chapter gum

the gum is a singular-named thing in Hacks Shack. description of gum is "It's wrapped and unchewed. The wrapper says it's never-ending gum that provides potentially infinite energy from one stick and a not-total-loss of flavor. It carries a warning against programming and chewing gum at the same time.". indefinite article of gum is "some".

a-text of gum is "RYR". b-text of gum is "RGR". parse-text of gum is "UNIQUE". gum is any-spoilable.

section mug

the mug is a container. understand "cola" as mug when player is in hacks shack and ALocalCo Cola is moot.

after printing the name of the mug while taking inventory:
	say " ([if ALocalCo cola is moot]full of ALocalCo cola[else]empty[end if])";
	omit contents in listing; [trix]
	continue the action;

description of mug is "Beneath text ('CPU CUP' over a UPC symbol) is a message explaining it slowly refills whatever beverage you put in there, but only very slowly."

check inserting into mug:
	if noun is ALocalCo Cola:
		say "You drain the ALocalCo cola bottle. It fills the mug, and you take a tiny sip. The liquid level refills after a minute. It tastes like car fuel, which makes you careful--and hopeful for a far clue. You feel more inspired and calmer than if you'd tried Loco-Alca or Loca-Alco, and your mind's clear enough, you finally see the right way to use a co-alloc. A recycling trap door makes a noise, and you pitch the empty cola bottle into it absent-mindedly.[paragraph break]The [e robot][if robot is reflexed], from under the labs slab,[end if] clicks reprovingly. Probably because it's a bot o['] root beer.";
		moot ALocalCo cola;
		the rule succeeds;
	say "Only liquids would belong there." instead;

check inserting into (this is the cola/mug/censer rule) :
	if noun is ALocalCo cola:
		if second noun is on slab, say "Programmer rage! Love it!" instead;
		if noun is censer, say "The censer wasn't made for that." instead;
		if second noun is not mug, say "You need to pour into something that can contain a liquid." instead;

chapter labs slab

the labs slab is a supporter in Hacks Shack. it is fixed in place. understand "table" as labs slab.

the block tying rule is not listed in any rulebook.

port-warn is a truth state that varies.

check inserting into labs slab (this is the on not in slab rule):
	say "[if port-warn is false]The labs slab has no ports, but you can put stuff on it.[else](on, not in)[line break][end if]";
	now port-warn is true;
	try putting the second noun on the labs slab instead;

check putting a thing on labs slab (this is the check what to put on labs slab rule):
	if noun is on labs slab:
		ignore the can't put what's not held rule;
		say "It already is!" instead;
	if second noun is labs slab:
		if noun is disk or noun is caps lock, say "That sort of belongs on the labs slab, but it needs to be a part of something." instead;
		if noun is rom sticks, try inserting noun into drive instead;
		if noun is not computer screen and noun is not keyboard, say "That's not something that you can hook up to the computer." instead;

after putting a thing on the labs slab (this is the prep the labs slab rule): [ note: 2 are on the slab to start, namely Drive A and the schematic catechism. 3 and 4 are the screen and keyboard, likely in that order. ]
	if number of things on labs slab is 3, say "Only one more piece of hardware is needed, and the computer will work." instead;
	if number of things on labs slab is 4, say "You can now do computery things unimpeded! Hooray!" instead;
	say "Too [if number of things on labs slab > 3]much[else]little[end if] is on the labs slab. This is a bug in the player-notification code but not a game-breaker." instead;

check taking labs slab: say "The labs slab is there so you don't have to take stuff. Plus it's too heavy." instead;

description of labs slab is "A labs slab is specifically designed to do smart-person stuff and boost intellectual experiments! You could call it a table if you want, but that's an extra keystroke.[paragraph break]It's quite ergonomic and sturdy and not just because none of the twenty-two other things you (yes, you) could zap it to make any sense."

to decide which number is drive-score:
	decide on boolval of (whether or not Drive A is reflexed) + boolval of (whether or not Drive E is reflexed);

check tying it to (this is the put on the slab rule) :
	if noun is second noun, say "Tautology? Got ya, lout!" instead;
	if noun is dongle and second noun is drive, say "The drive and dongle are already tied together." instead;
	if noun is drive or noun is dongle, try tying second noun to noun instead;
	if second noun is Drive A or second noun is dongle or second noun is labs slab, try putting noun on labs slab instead;
	if noun is keyboard and second noun is screen, try tying second noun to noun instead;
	if second noun is keyboard and noun is screen:
		if keyboard is on slab and screen is on slab, say "They're both connected to the drive. No need to tangle things." instead;
		if keyboard is on slab, try putting screen on slab instead;
		if screen is on slab, try putting keyboard on slab instead;
		say "They keyboard and screen don't tie to each other but to Drive A." instead;
	say "This game doesn't recognize the [b]ATTACH[r]/[b]TIE[r] verb for either of those objects. Perhaps it should, but you may be better off using [b]PUT ABC ON[r]/[b]IN XYZ[r]." instead;

chapter Drive A

Drive A is proper-named reflexive LLPish container on the labs slab. understand "disk drive" and "eco-trump computer" and "computer" and "hard" and "hard drive" as Drive A.

understand "a drive" as drive a.

a-text of drive a is "YRYRYR". b-text of drive a is "?R?R?R". parse-text of drive a is "-[sp]V[sp]-[sp]D[sp]-[sp]R". drive a is parse-spoilable.

does the player mean inserting the disk into Drive A: it is very likely.
does the player mean inserting the disk into Drive E: it is likely.

does the player mean doing something with Drive A: it is very likely.
does the player mean doing something with Drive E: it is likely.

check opening Drive A: say "You don't need to. You can just put the sort of stuff that goes in disk drives in the drive." instead;

the switch computer pieces rule is listed before the can't switch on unless switchable rule in the check switching on rules.

check switching on (this is the switch computer pieces rule) :
	if noun is drive a, say "There [if drive a is reflexed]was[else]is[end if] a button for that." instead;
	if noun is computer screen or noun is keyboard or noun is dongle, say "You don't need to switch any auxiliary equipment on or off." instead;

the golden dongle is a boring thing. it is part of Drive A. description of golden dongle is "The golden dongle looks powerful and important. Computers in Yorpwald don't have one unless they're really important. It can do stuff like dual-op upload, whatever that is, but even better, it's more universal than a [b]USB[r] port, and you can attach all sorts of things to it.". bore-text is "You don't need to do anything fancy with the dongle. It's there to connect Drive A to other computer parts, and it works."

description of Drive A is "It's an old-school hard drive (brand name: Eco-Trump Computer) where you put clunky square disks. It has a golden dongle you don't want to mess with. You can also [b]READ[r] it for its status."

chapter Be Troo E Robot

The Be Troo E Robot is a boring reflexive thing in Hacks Shack. "A Be Troo E Robot waits here for an important order.". bore-text of Be Troo E Robot is "[if robot is reflexed]It needs a special command[else]The [robot] has no more work to do[end if].". bore-check of Be Troo E Robot is bore-robot rule. printed name is "Be-Troo E-Robot".

this is the bore-robot rule:
	if current action is taking, say "[if robot is reflexed]It's resting. Don't bother it[else]The [robot] inches away. It's a servant, not a pet[end if]." instead;

understand "oberto" as Be Troo E Robot when Be Troo E Robot is read-yet.

a-text of Be Troo E Robot is "RYRYYR". b-text of Be Troo E Robot is "R?RYG?". parse-text of Be Troo E Robot is "x[sp]?[sp]x[sp]-[sp]O[sp]?". Be Troo E Robot is parse-spoilable.

description of Be Troo E Robot is "[if robot is reflexive]It looks back up at you, eager for an order[else]You check where it's hidden. It looks to be sleeping after helping you reboot[end if]."

understand "code/program" as screen when be troo e robot is reflexed and player is in Hacks Shack.

check taking (this is the can't remove computer parts from labs slab rule):
	if noun is in Drive A, say "The disk is where it should be." instead;
	if noun is on labs slab, say "[The noun] is where it needs to be." instead;

check inserting it into (this is the disk in drive and wired computer rule):
	if noun is disk:
		ignore the can't insert what's not held rule;
		if noun is in Drive A, say "The disk's already in Drive A." instead;
	if second noun is Drive A:
		if noun is not disk, say "[if noun is rom sticks]You'll wait [']til you're ready to program[else]It's a disk drive. Only disks fit in there[end if]." instead;
		if keyboard is off-stage, say "You don't have enough pieces to the computer to make it work. Specifically, no input device." instead;
		if computer screen is off-stage, say "(Protip: you might want to get something like a screen to figure what's going on.)" instead;

chapter Drive E

Drive E is proper-named reflexive LLPish boring scenery in Hacks Shack. description of drive e is "It reads both [b]DRIVE E[r] and [b]E DRIVE[r]. Maybe both are right in their own way. It's [if drive e is reflexive]making sluggish noises right now, so maybe there's a way to fix it and save some time, but it's probably not critical[else]humming along nicely now you figured how to fix it[end if].". bore-text is "[if drive e is reflexed]You already improved Drive E[else]There's probably a way to make Drive E more efficient, but it's probably some irregular action[end if].".

a-text of drive e is "RYRYRY". b-text of drive e is "?Y???G". parse-text of drive e is "?[sp]-[sp]?[sp]?[sp]?[sp]E". drive e is parse-spoilable.

understand "e drive" as drive e.

check inserting into drive e: say "Drive E is too small. It's just an auxiliary drive. [if disk is in drive a]You already put the disk in drive a, anyway[else]Drive A may be able to hold stuff[end if]." instead;

to decide which number is drive-llp:
	let temp be 0;
	if drive a is reflexed, increase temp by 2;
	if drive e is reflexed, increment temp;
	decide on temp;

chapter badbooks

to say my-bad:
	say "[random badbook in Hacks Shack]";

report taking a badbook:
	say "You look around guiltily. Thankfully, nobody's here to see you take it.";
	the rule succeeds;

check opening a badbook:
	say "Try reading it instead." instead;

check closing a badbook:
	say "It is, but you can try READing it." instead;

a badbook is a kind of thing. a badbook has text called theme. a badbook has text called author. a badbook is usually cluey.

does the player mean doing something with a badbook when player is in Hacks Shack: it is likely.

does the player mean giving a badbook to the yak: it is likely.

does the player mean reading catechism when yak is moot: it is very likely.

a-text of a badbook is usually "RYORYYRR".

understand "book" and "bad book" as a badbook.

does the player mean doing something with a touchable badbook: it is very likely.

Bakery Do is a badbook. author of Bakery Do is "DeRoy Bak". theme of Bakery Do is "overoptimistic views on entrepeneurism".

a-text of Bakery Do is "RYORYYRR". b-text of Bakery Do is "RYORYYRR". parse-text of bakery do is "x[sp]-[sp]Y[sp]x[sp]-[sp]-[sp]x[sp]x".

Bred Okay is a badbook. author of Bred Okay is "Bad Korey". theme of Bred Okay is "pointless rebellion".

a-text of Bred Okay is "RYORYYRR". b-text of Bred Okay is "RYORGYRR". parse-text of bred okay is "x[sp]-[sp]Y[sp]x[sp]O[sp]-[sp]x[sp]x".

Day Broke is a badbook. author of badbook is "Rob Keady". theme of Day Broke is "schmaltzy supernatural love affairs".

a-text of Day Broke is "RYORYYRR". b-text of Day Broke is "RYBPYYRR". parse-text of day broke is "x[sp]-[sp]Y[sp]B[sp]-[sp]-[sp]x[sp]x".

Dear Koby is a badbook. author of Dear Koby is "Yoda Berk". theme of Dear Koby is "thinly-veiled wishful-thinking autobiography and cyberspace epistles".

a-text of Dear Koby is "RYORYYRR". b-text of Dear Koby is "RGORYYRR". parse-text of dear koby is "x[sp]E[sp]Y[sp]x[sp]O[sp]A[sp]x[sp]x".

eBay Dork is a badbook. author of eBay Dork is "Kary Bode". theme of eBay Dork is "puberty and predictable nonconformity".

a-text of eBay Dork is "RYORYYRR". b-text of eBay Dork is "RYORYYPR". parse-text of ebay dork is "x[sp]-[sp]Y[sp]x[sp]-[sp]-[sp]R[sp]x".

Yo Be Dark is a badbook. author of Yo Be Dark is "Dr. Bo Kaye". theme of Yo Be Dark is "the hopelessness of hopelessness". printed name of Yo Be is "Yo, Be Dark".

a-text of Yo Be Dark is "RYORYYRR". b-text of Yo Be Dark is "RYORYGPR". parse-text of Yo Be Dark is "x[sp]E[sp]Y[sp]x[sp]O[sp]A[sp]R[sp]x". Yo Be Dark is parse-spoilable.

description of a badbook is "[the item described], by [author], is a hopelessly simplistic look at [theme of item described] that rose to inexplicable bestsellerdom and consequent bestseller-movie adaptation. You've never read it, though you recall it's even worse than [ev-worse]. Or maybe it's the other way around. Or maybe it's true both ways, somehow."

a badbook can be unalluded or alluded. a badbook is usually unalluded.

to say ev-worse:
	if number of unalluded badbooks is 0:
		let mybk be a random off-stage badbook;
		say "[mybk] by [author of mybk]";
	else:
		let mybk be a random off-stage unalluded badbook;
		now mybk is alluded;
		say "[mybk] by [author of mybk][if number of unalluded badbooks is 0] (that's the last one)[end if]";

check reading a badbook:
	if yak is moot, say "You shouldn't. You really shouldn't. But you do. It...it's pretty indigestible. Nothing lasting, but enough to inspire an animal urge to bang your head against the floor." instead;
	say "It would probably make you dumber just reading it for ironic laughs. That's the last thing you need right now." instead;

chapter pouring

Understand the command "put [other things] in/inside/into [something]" as something new.

Understand "put [other things] in/inside/into [something]" as pouring it into.

check pouring it into:
	if noun is ALocalCo cola, try inserting noun into second noun instead;
	say "That won't work. You need to pour a liquid (a small amount) into something." instead;

chapter disk

a disk is a thing in Hacks Shack. description is "This disk is plain, chunky and 3 1/4' square. Small print indicates the disk contains not only a powerful compression algorithm that allows portability but also critical system repair programs that only run on startup.". "[if disk is handled]You see a disk lying on the labs slab here[else]A disk is lying on the floor here[end if]."

a-text of disk is "RRYR". b-text of disk is "RRYR". parse-text of disk is "x[sp]x[sp]I[sp]x". disk is any-spoilable.

the caps lock button is a thing. understand "capslock" and "capslock button" as caps lock.

description of caps lock is "[if caps lock is part of the keyboard]It is fitting into the keyboard nicely[else]You could probably snap it into a keyboard[end if]."

the TBA key is part of the keyboard. the TBA key is llpish and reflexive. printed name of TBA key is "[if TBA key is reflexive]TBA[else][b]TAB[r][end if] key". description is "[if TBA key is reflexive]It says TBA but could be...abort or...hmm[else]It's a tab key, useful for keeping code organized. Okay, spaces may be better, but your text editor should convert a tab to four spaces or whatever[end if]."

check scaning TBA key:
	say "You sense there can't be much to do with something saying TBA. Still, go ahead and scan?";
	unless the player yes-consents, say "OK, you should get it now." instead;

a-text of TBA key is "RYR". b-text of TBA key is "PYR". parse-text of TBA key is "UNIQUE". TBA key is any-spoilable.

understand "tab key" and "tab" as TBA key when TBA key is reflexed.

The schematic catechism is a thing. it is on the labs slab.

does the player mean doing something with catechism when player is in Hacks Shack: it is likely;

check scaning catechism: say "You think back to an annoying computer science professor who raved you just can't scan books like this and hope to get useful information.[paragraph break]He's literally right, here, but he probably meant just reading, though[if catechism is examined]. As you already did[end if]." instead;

understand "algorithms logarithms" and "algorithms/logarithms" and "textbook" and "text/book" as schematic catechism.

check taking catechism: say "It's pretty much tied to the table and not worth untying--it's too heavy, anyway." instead;

after examining catechism for the first time:
	d "[list of things on labs slab].";
	d "[number of things on labs slab].";
	say "Well, that was probably too technical. You peek at the introduction. Page 1, 'Noob-Boon: Hi-Tech Itch, Eh?' condescendingly but effectively lays out the basics:[line break]--your favorite frustration word, major or minor, doesn't make you a better programmer.[line break]--create and assemble your materials first.[line break]--then and only then, get to the programming actions and stuff[if number of things on labs slab > 2].[paragraph break]Well, you already started assembling stuff. Yay[end if]. You tackle a whole droll hello world--the rest will come later. You can, of course, look for random information for fun, but you'll probably naturally use the book for reference once you get seriously programming.[line break]";
	pad-rec "hacking";
	the rule succeeds;

description of schematic catechism is "[one of]The title is [i]Algorithms, Logarithms[r], and it's by Olga Smirth. Olga's goals seem to be a slog, all 1337 pages, and they footnote too often. There's probably far more than you need to know here to get basic programming done[or]Maybe something new'll turn up[stopping]. You flip to a random page, which burgeons with information useless to your task at hand: [randbla]"

no-yak is a truth state that varies.

after reading catechism when yak is in Hacks Shack and no-yak is false:
	say "The yak's ears perk up a little as you mumble to yourself on reading. It's all pretty neutral and over the yak's head. Perhaps something simpler would give it more of a reaction.";
	now no-yak is true;
	continue the action;

chapter skid

the skid is a supporter. "The skid lying here [skid-do]."

to say skid-do:
	if yak is moot:
		say "has done its job. Well, as the skid. Perhaps it's more useful as what it was";
		continue the action;
	say "can probably be pushed around[if number of things on skid > 0]. It's currently carrying [the list of things on skid][end if]";

the skid is pushable between rooms.

a-text of skid is "RYRR". b-text of skid is "RYRR". parse-text of skid is "x[sp]I[sp]x[sp]x". skid is any-spoilable.

check taking the skid: say "It's too heavy, but you can pull or push it in the direction where you want it to go." instead;

the description of the skid is "It's three feet wide by six feet, and it's got small straps and niches so you can put an animal on them. It's also got a handy oper rope so you can [b]PULL[r] or [b]PUSH[r] it even without sledge ledges."

section oper rope

the oper rope is a boring thing. The oper rope is part of the skid. description of oper rope is "It's attached so you can pull the skid from room to room.". bore-text is "The oper rope isn't special or important except as something that helps you [b]PULL[r] the skid around."

check pulling oper rope: try pulling skid instead;

chapter speel

the peels speel is boring reflexive scenery. description of speel is "It's full of all sorts of weird jargon of figurative banana peels you could slip on. The jargon's a bit beyond you at the moment, but maybe if your mind were fully sharp, you'd know what to do. Some stuff sticks out in red.". bore-text is "It's just plain computer text."

a-text of peels speel is "RRYYR". b-text of peels speel is "?RG?R". parse-text of peels speel is "?[sp]x[sp]E[sp]?[sp]P". speel is parse-spoilable.

understand "peels speel" and "peels/speel" as peels speel when can-name-speel.

to decide whether can-name-speel:
	if be troo e robot is reflexed and polemic is not reflexed, yes;
	no;

check inserting into the keyboard (this is the insert-keyboard rule):
	ignore the can't insert into what's not a container rule;
	try putting noun on second noun instead;

check putting the keyboard on (this is the keyboard-on-something rule): ignore the can't put what's not held rule;

check putting on the keyboard (this is the complete-keyboard rule):
	ignore the can't put onto what's not a supporter rule;
	if noun is caps lock:
		if caps lock is part of the keyboard, say "It already is." instead;
		say "It fits in perfectly, right beneath the [if TBA key is reflexed][b]TAB[r][else]TBA (ehh? That's not quite right)[end if] key.";
		now caps lock is part of the keyboard instead;
	say "That's not a key that needs to fit in the keyboard." instead;

does the player mean doing something with BUB DUDE EGG: it is likely.

chapter showing

the block showing rule is not listed in any rulebook.

hows-show-warn is a truth state that varies.

carry out showing it to:
	if hows-show-warn is false:
		say "(Showing usually means giving. I'll try that. Either will work okay.)[paragraph break]";
		now hows-show-warn is true;
	try giving noun to second noun instead;

chapter Compile

the Im Le Cop polemic is a reflexive thing in Hacks Shack. description of Im Le Cop polemic is "[one of]It's a [i]polemic[r] about programming languages, processors, and user-friendliness in general. E-trash haters too. Whoever wrote it relies on pedants['] pentads, and while it's full of important facts, you aren't sure you'd actually want to meet the writer. It looks like they left out some stuff they found obvious and intuitive, and they're too good to actually mention it themselves[or]The polemic doesn't shed any light on main problems the second time through[stopping]. You see a messy signature at the bottom.". printed name of polemic is "I'm Le Cop Polemic".

report taking polemic: say "You take it. You don't need to, but it'd be nice to have handy." instead;

does the player mean doing something with the teariest treatise when Strip of Profits is visited: it is unlikely.

a-text of Im Le Cop polemic is "RYRRYRY". b-text of Im Le Cop polemic is "R?RRYRY". parse-text of Im Le Cop polemic is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-".

the signature is part of the Im Le Cop polemic.

description of signature is "It's in red and takes a bit of time to decipher. [one of][first custom style]MEL COPI[r] is this guy's name. There's a bit more[or]The author rails against the McPoeil method[or]The author compares a manual to a lice mop[or]The author bangs on about how [first custom style]I'M LE COP[r][cycling]." [bold-ok]

understand "polemic" as Im Le Cop polemic.

chapter BUB DUDE EGG

BUB DUDE EGG is proper-named reflexive boring scenery. description of Bub Dude Egg is "Ugh! There must be something wrong with the code you compiled, to print such a defiant message. If only there was a way or action to fix code that's compiled but still doesn't do what you want!". bore-text is "You can really only examine it--other actions leave you seeing red, thinking '[first custom style]BUDGE[r]! [first custom style]BUDGE[r]!'".

a-text of BUB DUDE EGG is "RYRYR". b-text of BUB DUDE EGG is "???Y?". parse-text of BUB DUDE EGG is "?[sp]?[sp]?[sp]-[sp]?". bub dude egg is parse-spoilable.

check scaning computer screen: if BUB DUDE EGG is touchable, try scaning BUB DUDE EGG instead;

check restarting the game when player is in Hacks Shack:
	say "[if Be Troo E Robot is reflexive]You look over at Drive A--it doesn't quite need a restart. Hmm, what's the word, now. However, if you actually want to restart the game, I'll let you.[else]You've already restarted the computer. So if you're trying to restart it and not the game, you don't need to, any more.[end if]";

to go-back (rm - a room):
	say "[line break][bold type]Back at [rm][roman type][paragraph break]";
	move player to rm, without printing a room description;

chapter USB

the USB is a vanishing boring thing. description of the USB is "It's an ordinary [b]USB[r]. Or it would be, around anyone but you.". "The [b]USB[r] that the golden dongle degenerated into lies here.". bore-text is "No need to do anything fancy with the [b]USB[r]. Well, anything fancy other than using your fancy powers. Really, anything fancy with them. It's only three letters.". bore-check is the bore-usb rule.

a-text of USB is "RYR". b-text of USB is "RY?". parse-text of usb is "x[sp]U[sp]x". usb is any-spoilable.

usb-scan-warn is a truth state that varies.

issub is a truth state that varies.

this is the bore-usb rule:
	if current action is taking, say "Well, you don't need to take it in THAT sense." instead;

check scaning USB:
	if usb-scan-warn is false:
		now usb-scan-warn is true;
		say "You wonder if you need to. There aren't many possibilities. There may even be two ways to change it. After all, it's pretty universal. Scan anyway?";
		if the player yes-consents:
			say "Okay.";
		else:
			say "Good sport!" instead;

book Volt Maze [L to V]

a mazeroom is a kind of room. the printed name of a mazeroom is usually "Nowt Town". a mazeroom is usually innie.

the specification of mazeroom is "A room you don't need to visit at all but which might give clues."

a mazeguide is a kind of person. a mazeguide has a number called maze-order. initial appearance of a mazeguide is usually "[one of]A man introducing himself as [or][stopping][printed name] stands here [if the item described is bscanned or item described is escanned]nervously[else]waiting for you to do something[end if].". description of a mazeguide is usually "[the person described] looks around nervously, aware he's a bit of a prop.".

chapter going nowhere in volt maze

voltzap is a truth state that varies.

symp-yet is a truth state that varies.

the zaphint rule is listed before the main can't go that way rule in the check going rulebook.

before going up when location of player is a mazeroom or location of player is Unwary Runway (this is the photopia reference rule) :
	say "You know, there was one really fun text adventure where this was the solution. I'd be plagiarizing if that was here. And if you haven't played it, I don't want to spoil it." instead;

to say exits-lead:
	say ". The walls glow[if voltwarn is false] like an old static electricity ball from that physics class where you learned so much[end if]";
	say ". [if number of viable directions is 1]The only exit leads[else]Exits lead[end if] [list of viable directions]";

voltwarn is a truth state that varies.

after printing the locale description for r22 when voltzap is false and voltwarn is false:
	say "Boy, this maze is getting annoying quickly. You briefly wonder if running into a wall might give a hint about what to do.";
	now voltwarn is true;
	continue the action;

the description of mazeroom is "You're in a maze room with no distinguishing features[exits-lead].";

check going to Nowt Town when player was in Grey Gyre:
	say "[one of]You hope the maze isn't too big. Then you hope there's a quick way around it--[if zany meter is examined]the zany meter seems to indicate there might be[else]maybe the zany meter has advice[end if][or]You re-enter, not knowing whether to feel bad you're [if Unwary Runway is visited]trying[else]not even patient enough[end if] to brute-force things and run through the maze or bad you want an easy way through[if voltzap is false and Unwary Runway is visited] or too scared to touch any walls[end if][if Unwary Runway is visited and zany meter is unexamined] or too hasty to even read that zany meter this time around[end if][stopping]."

Nowt Town is north of Grey Gyre. Nowt Town is in Presto. "You can exit back south or hit the maze proper to the west. A big L is tiled into the floor here[if lev tzoma is escanned]. Nothing really seems to have changed about the maze several times through, and you may flip if you have to go through the L-to-V maze again[end if].". roomnud of Nowt Town is table of Nowt Town nudges.

the big l is scenery in Nowt Town. "It's a decent enough example of an L[if r00 is unvisited]. Maybe there are other letters in the maze[end if].". understand "letter" and "letter l" as big l when player is in Nowt Town.

[is a mazeroom/a mazeroom is usually in presto]

big-let is a privately-named backdrop. drop-region of big-let is presto. big-let is in r10, r00, r01, r02, r12, r22, r32, r33, r23, Unwary Runway. printed name of big-let is "the big letter"

the maze walls are a reflexive plural-named uncluing useless backdrop. drop-region of maze walls is presto. the walls are in Grey Gyre, r00, r01, r02, r03, r04, r10, r11, r12, r13, r14, Nowt Town, r21, r22, r23, Unwary Runway, r30, r31, r32, r33, r34, r40, r41, r42, r43, and r44.

n-t-air is a reflexive plural-named privately-named backdrop. drop-region of n-t-air is presto. description is "[bug-report]". n-t-air is in Grey Gyre, r00, r01, r02, r03, r04, r10, r11, r12, r13, r14, Nowt Town, r21, r22, r23, Unwary Runway, r30, r31, r32, r33, r34, r40, r41, r42, r43, and r44. printed name is "Nowt Town".

a-text of n-t-air is "RYRR". b-text of n-t-air is "RGR?". parse-text of n-t-air is "UNIQUE". n-t-air is any-spoilable.

a-text of maze walls is "RYRYRRYR". b-text of maze walls is "RYRYRRYR". parse-text of maze walls is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

description of maze walls is "[if player is in Grey Gyre]Up north[else]This[end if] is a volt maze, but they don't seem juiced enough to zap you good. Running into them might be a useful lesson in character building. Or an outright clue."

description of big-let is "It's a letter[if r10 is visited]. Much like back to the L you saw at the beginning[else]. Maybe there are others later along[end if]."

understand "floor" as big-let.

understand "big/letter m" and "letter/m" as big-let when player is in r10.
understand "big/letter n" and "letter/n" as big-let when player is in r00.
understand "big/letter o" and "letter/o" as big-let when player is in r01.
understand "big/letter p" and "letter/p" as big-let when player is in r02.
understand "big/letter q" and "letter/q" as big-let when player is in r12.
understand "big/letter r" and "letter/r" as big-let when player is in r22.
understand "big/letter s" and "letter/s" as big-let when player is in r32.
understand "big/letter t" and "letter/t" as big-let when player is in r33.
understand "big/letter u" and "letter/u" as big-let when player is in r23.
understand "big/letter v" and "letter/v" as big-let when player is in Unwary Runway.

chapter all the rooms

nowt-town-p is a privately-named room. it is in Meta Team. description of nowt-town-p is "[bug-report]." [this is a small internal-map hack]

r10 is a privately-named mazeroom in Presto. r10 is west of nowt-town-p. "A big M is tiled into the floor here[exits-lead].". roomnud of r10 is table of r10 nudges.

r00 is a privately-named mazeroom in Presto. it is west of r10. "A big N is tiled into the floor here[exits-lead].". roomnud of r00 is table of r00 nudges.

understand "r00" as r00 when debug-state is true. [this is a very silly hack for testing a specific mistake case]

r01 is a privately-named mazeroom in Presto. it is north of r00. "A big O is tiled into the floor here[exits-lead].". roomnud of r01 is table of r01 nudges.

r02 is a privately-named mazeroom in Presto. it is north of r01. "A big P is tiled into the floor here[exits-lead].". roomnud of r02 is table of r02 nudges.

r03 is a privately-named mazeroom in Presto. it is north of r02.

r12 is a privately-named mazeroom in Presto. it is east of r02. "A big Q is tiled into the floor here[exits-lead].". roomnud of r12 is table of r12 nudges.

r11 is a privately-named mazeroom in Presto. it is south of r12.

r21 is a privately-named mazeroom in Presto. it is east of r11.

r31 is a privately-named mazeroom in Presto. it is east of r21.

r22 is a privately-named mazeroom in Presto. it is east of r12. "A big R is tiled into the floor here[exits-lead].". roomnud of r22 is table of r22 nudges.

understand "r22" as r22 when debug-state is true. [this is a very silly hack for testing a specific mistake case]

r32 is a privately-named mazeroom in Presto. it is east of r22. "A big S is tiled into the floor here[exits-lead].". roomnud of r32 is table of r32 nudges.

r42 is a privately-named mazeroom in Presto. it is east of r32.

r41 is a privately-named mazeroom in Presto. it is south of r42.

r40 is a privately-named mazeroom in Presto. it is south of r41.

r30 is a privately-named mazeroom in Presto. it is west of r40.

r43 is a privately-named mazeroom in Presto. it is north of r42.

r44 is a privately-named mazeroom in Presto. it is north of r43.

r34 is a privately-named mazeroom in Presto. it is west of r44.

r33 is a privately-named mazeroom in Presto. it is north of r32. "A big T is tiled into the floor here[exits-lead].". roomnud of r33 is table of r33 nudges.

r23 is a privately-named mazeroom in Presto. it is west of r33. "A big U is tiled into the floor here[exits-lead].". roomnud of r23 is table of r23 nudges.

r13 is a privately-named mazeroom in Presto. it is west of r23.

r14 is a privately-named mazeroom in Presto. it is north of r13.

r04 is a privately-named mazeroom in Presto. it is west of r14.

book Unwary Runway

Unwary Runway is an innie room in Presto. it is north of r23. "A big V is tiled into the floor here. You can go back south, but ahead things narrow--it's a bit scary, and you could be ambushed. Maybe it's worth a try[if Zo Mavelt is off-stage and Tom Avlez is off-stage]![else], and maybe that riddle dreidl won't push you back this time!". roomnud of unwary runway is table of unwary runway nudges.

to say zztrue: now voltzap is true;

check going north in Unwary Runway:
	say "The exit! [if zo mavelt is not off-stage]'Shalom, ol['] sham' calls [random mazeguide in Unwary Runway].[paragraph break][end if]You've mapped it out...and just as you are about to cross, [one of]a[or]that[stopping] giant spinning robot dreidl pushes you back to the start of the maze as it belts riddle after riddle. It spins back with a monotone 'OY VEY.' [if Zo Mavelt is off-stage]You see someone coming from the north to check on the noise, but you can't get a really good look.[else][paragraph break][end if]";
	say "[if voltzap is false]You find the walls really are electric--not too nasty, but bad enough, and you see red and say, with each ZVT(VZT?), LAME-O[zztrue].[else][one of]You manage to avoid the walls this time, but you doubt that riddle dreidl's going away[or]There must be a better way through[stopping].";
	replace-mazeguide;
	go-back Grey Gyre;
	the rule succeeds;

mazeguide-scanned is a truth state that varies.

after scaning a mazeguide:
	now mazeguide-scanned is true;
	continue the action;

description of a mazeguide is "Perfectly unremarkable except for being dressed in red and unimpressed with your (not) solving this maze. He looks curiously at your settler."

chapter Zo Mavelt

Zo Mavelt is a mazeguide.

a-text of Zo Mavelt is "RYRYRRYR". b-text of Zo Mavelt is "RYRYRRYR". parse-text of Zo Mavelt is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

chapter Tom Avlez

Tom Avlez is a mazeguide.

a-text of Tom Avlez is "RYRYRRYR". b-text of Tom Avlez is "RYRYRRYR". parse-text of Tom Avlez is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

chapter Lev Tzoma

Lev Tzoma is a mazeguide.

a-text of Lev Tzoma is "RYRYRRYR". b-text of Lev Tzoma is "RYRYRRYR". parse-text of Lev Tzoma is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

chapter replacing mazeguys

maze-guys is a list of things that varies. maze-guys is { Zo Mavelt, Tom Avlez, Lev Tzoma }.

guide-loop is a truth state that varies.

maze-index is a number that varies.

to replace-mazeguide:
	if maze-index is 0:
		say "As you turn your head, you notice someone come into view behind the Riddle Dreidl.";
		move Zo Mavelt to Unwary Runway;
		increment maze-index;
	else:
		let X be entry maze-index in maze-guys;
		if X is escanned:
			moot X;
			increment maze-index;
			if maze-index > 3:
				now maze-index is 1;
				now guide-loop is true;
			say "As you turn your head, you see someone [if guide-loop is true]familiar[else]new[end if] come into view in the Unwary Runway.";
			move entry maze-index of maze-guys to Unwary Runway;
		say "[guide-loop].";

volume oyster

the can't search unless container or supporter rule is not listed in any rulebook.

carry out searching:
	if noun is ol trap, say "That's the right idea. But not the right way to search. You need to walk all over the floor, here, to disable the ol['] trap." instead;
	if noun is pol art portal, say "The portal has nothing." instead;
	say "You're not able to find anything hidden." instead;

book Posh Hops Shop

Posh Hops Shop is an innie room in oyster. last-loc of Oyster is Posh Hops Shop. "This toastin['] station isn't a dive bar I'd brave. Gulpers splurge. Crabs ignore carbs, forgetting what caused them to get sauced. A sign is posted here[if tunes are in hops shop], tunes you'd do almost anything to get rid of emit from a jukebox[end if][if tips pits are in hops shop], pits['] tips lie within reach[end if], and LOLstr trolls block the way out.". roomnud of posh hops shop is table of posh hops shop nudges.

outside-text of Posh Hops Shop is "Bars tend to be a bit disorienting regarding compass directions. So you figure you need to get by [the trolls] somehow.".

exits-text of Posh Hops Shop is "You can't just sneak past the LOLstr trolls. But there is a way."

after choosing notable locale objects when player is in Posh Hops Shop:
	set the locale priority of pesty types to 0;

chapter pesty types

the pesty types are useless boring plural-named people in Posh Hops Shop. description of pesty types is "Indistinguishable from most barflies, er, bar-fish. They're definitely not pets-y (sorry.)". bore-text of pesty types is "The pesty types aren't important. They're just trying to get drunk[if silly-acts > 0], and you've already started to distract them from that[end if].". bore-check of pesty types is bore-pesty-types rule. the pesty types are scenery.

understand "patrons" as pesty types when player is in posh hops shop.

this is the bore-pesty-types rule:
	if current action is attacking, say "You'd be outnumbered." instead;

the tips pits are reflexive plural-named boring scenery in Posh Hops Shop. description of tips pits is "They're probably stumbler tumblers--mini things you could drink out of, but [if tips pits are reflexed]not now, after what you did[else]that'd be less apt[end if].". bore-text is "The tips['] pits are there for a specific purpose.". bore-check is bore-pits rule.

understand "stumbler/tumblers" and "stumbler tumblers" as tips pits.

this is the bore-pits rule:
	if current action is taking, say "Even the people who didn't give tips would notice your rudeness." instead;
	if current action is spiting, now boring-exception is true;

chapter gins sign

the gins sign is reflexive scenery in Posh Hops Shop. "It advertises various gins and intox-toxin-tonix--'Thirsty? Try this,' though someone scribbled 'Embrace Beer, Mac!' at the bottom. It advises against sharing garnish as well as making your own music."

check taking gins sign:	say "That'd load you down as you tried to get out." instead;

a-text of gins sign is "RYRR". b-text of gins sign is "?G?R". parse-text of gins sign is "x[sp]I[sp]x[sp]G". sign is any-spoilable.

m-bk is useless privately-named boring scenery in Posh Hops Shop. description of m-bk is "[bug-report]". printed name of m-bk is "Posh Hops Shop". bore-text is "You can only really try looking in the Posh Hops Shop."

understand "posh/hops shop" and "shop" and "posh hops shop" as m-bk when player is in Posh Hops Shop. [?? instead of doing something with a location]

check exiting when in Posh Hops Shop: try going outside instead;

chapter tines

the tines are plural-named reflexive scenery in Posh Hops Shop. "They look perfect for fitting a stein into, for refills."

check taking tines: say "[if stein is moot]You destroyed them already[else]Wrong way to vandalize things, here[end if]." instead;

a-text of tines is "YRRYR". b-text of tines is "YRRGR". parse-text of tines is "I[sp]x[sp]x[sp]E[sp]x". tines is parse-spoilable.

does the player mean inserting into tines: it is likely.
does the player mean inserting stein into: it is likely.

rule for supplying a missing second noun when inserting into:
	if tines are in Posh Hops Shop, now second noun is tines;

rule for supplying a missing noun when inserting into:
	if stein is in Posh Hops Shop, now noun is stein;

chapter tunes

The tunes are plural-named vanishing scenery in Posh Hops Shop. "The tunes really are awful. You wish you could just get rid of them with some technical know-how."

check taking tunes: say "Ironically, they're the sort of tunes you really can't take. Isn't that ironic? Yes, I really do think." instead;

a-text of tunes is "YRRYR". b-text of tunes is "YRRGR". parse-text of tunes is "U[sp]x[sp]x[sp]E[sp]x". tunes is parse-spoilable.

The jukebox is uncluing boring thing in Posh Hops Shop. It is fixed in place. description of jukebox is "[if tunes are reflexed or perma amper is reflexed]The jukebox is finally silent, but the pesty types aren't.[else]It has the usual bunch of song buttons and a perma-amper inside to make sure the terrible tunes it's spewing are loud and continuous. You notice writing on the side.[end if]". bore-text is "You [if tunes are moot]did[else]probably need to do[end if] something special to bust the jukebox."

a-text of tips pits is "RRYR". b-text of tips pits is "RRYR". parse-text of tips pits is "S[sp]x[sp]I[sp]x". tips pits are any-spoilable.

check scaning jukebox:
	if perma amper is touchable:
		say "You wind up scanning the perma-amper in the jukebox.";
		try scaning perma amper instead;
	say "The jukebox gives nothing with the tunes and perma-amper gone." instead;

chapter perma amper

the perma amper is part of the jukebox. printed name of perma amper is "perma-amper".

the perma amper is a reflexive boring thing. description of perma amper is "It's--well, I'm not big on electronics, but futz with it wrong and you'll get a perm. Or worse.". bore-text is "You really aren't sure of the right way to fiddle with it. Maybe there is one.". bore-check is bore-perma-amper rule.

a-text of perma amper is "RYRYR". b-text of perma amper is "R?RYR". parse-text of perma amper is "UNIQUE". perma amper is parse-spoilable.

this is the bore-perma-amper rule:
	if debug-state is true, say "[current action].";
	if current action is remaping, now boring-exception is true;
	if debug-state is true, say "[boring-exception].";

the song buttons are part of the jukebox. description is "They're number and letter, though you're not familiar with the song, so no one button seems worse than any other. You hope."

check pushing the song buttons: say "[if tunes are moot]The jukebox is already out of order[else]They're probably all pretty terrible. You need to focus on exactly what you want to do, to muck with the tunes[end if]." instead;

does the player mean doing something with song buttons when player is in Posh Hops Shop: it is likely.

chapter LOLstr Trolls

the LOLstr trolls are plural-named reflexive people in Posh Hops Shop. description is "LOLstr trolls have gained prominence in Yorpwald by being especially good at baiting patrons they don't like. Each is bigger and stronger than you and eyeing you as a fishy character. Each has got a mohawk that says WHAM! OK! and is wearing a vets['] vest. They're hired to cram pesty types back in. No sprat parts til he traps them with his strap.". "[if silly-acts > 0]LOLstr return your gapin['] with aping, menacingly. They probably don't want an apology[else]LOLstr block the door out[end if][one of]. They're not exactly froodish doorfish[or][stopping]."

a-text of LOLstr trolls is "RRRYRR". b-text of LOLstr trolls is "RRRY?R". parse-text of LOLstr trolls is "x[sp]x[sp]x[sp]O[sp]x[sp]x".

the vets vest is a useless thing. description is "It reads: [i]We toss sots. Ew![r] You suspect this means probably only the disruptive, broke sots who patronise this noise trap.". printed name of vets vest is "vets['] vest".

check scaning vets vest:
	say "You scan the trolls instead.";
	try scaning trolls instead;

the LOLstr trolls wear the vets vest.

chapter Casper Spacer

Casper Spacer is a person in Posh Hops Shop. description is "He hides the writing in his Capers Recaps from your prying eyes.". "Casper Spacer, the famous fish author, is here, working on his latest book, Capers Recaps[one of]. He seems to want to be bothered and not want to be at the same time. Writers have a way of massaging life's contradictions[or][stopping]."

casper-talk is a truth state that varies.

check objasking casper spacer about:
	if casper-talk is false, casper-chat instead;

check asking casper spacer about:
	if casper-talk is false, casper-chat instead;

to casper-chat:
	say "Before you can pull a bar seat abreast... 'Here's a hint, mac. GO HUNT A HANGOUT. Write that in your pedanto-notepad.' He touches on the Die Thou Hideout in the Horned Hedron. An Absolute Lout Base. And the ghost that may be haunting the area. You congratulate him on his storytelling, but he says 'Pff, nothing on this new novel of mine. Which I need to get back to. To which I need to get back.'[add-hangout]"

to say add-hangout:
	now casper-talk is true;
	pad-rec-lump "the haunter";
	pad-rec "DIE THOU";

understand "author" as Casper Spacer.

understand "fish" as Casper Spacer.

a-text of casper spacer is "RRRYRY". b-text of casper spacer is "?RRYRY". parse-text of casper spacer is "x[sp]x[sp]x[sp]-[sp]x[sp]-".

Capers Recaps is reflexive scenery in Posh Hops Shop. description of Capers is "It's Casper's latest rough draft journal. A quick glance references an OCD cod named Doc. Capers and looks to be, due to its blackboardy texture, even grittier than Consider I Scorned No Ciders, Pincer Prince or Some Urge Gruesome or This Bane Bathes in the Basin. Which Casper wrote drunk on absinthe."

does the player mean doing something with capers recaps when player is in Posh Hops Shop: it is likely.

understand "book" as Capers Recaps.

check scaning casper: try scaning recaps instead;

check scaning recaps when recaps is not reflexed and cheat-on is true:
	say "Your settler is not giving a full readout. Spacer's books are known for deceptive simplicity, for stringing together short words everyone knows confusingly. Still, those three reds at the start must be a clue."

a-text of capers recaps is "RRRYRY". b-text of capers recaps is "RRR??Y". parse-text of capers recaps is "x[sp]x[sp]x[sp]?[sp]?[sp]-". capers recaps is parse-spoilable.

check taking capers recaps: say "The whole bar would beat you up for that. Think of other ways to distract the trolls. Disturb the peace more directly." instead;

chapter stein

a stein is a thing in Posh Hops Shop. initial appearance is "You see a stein here by some tines. It looks like it'd almost fit in."

check inserting stein into tines:
	say "It almost fits when you try to insert it. About five-sixths of the way. Perhaps you could find some other way to do things." instead;

a-text of stein is "YRRYR". b-text of stein is "YRRYR". parse-text of stein is "I[sp]x[sp]x[sp]E[sp]x". stein is parse-spoilable.

description of stein is "It's undoubtedly from the Set-In-Nites corporation, mostly black but with red writing[one of]. You mentally compare it to the tines, and you reckon if you inserted it, it'd be 20% too big[or][stopping]."

shop-hint-items is a list of thing variable. shop-hint-items is { tines, tips pits, recaps, gins sign, tunes }.

chapter Posh Hops Shop min up rule

to silly-min:
	increment silly-acts;
	if silly-acts < 3, min-up;

chapter remaping

remaping is an action applying to one thing.

understand the command "remap" as something new.

understand "remap [something]" as remaping.

does the player mean remaping the perma amper: it is very likely.

rule for supplying a missing noun when remaping:
	if player is in Posh Hops Shop:
		now noun is perma amper;
	else:
		say "You already dealt with the tunes and perma-amper.";
		reject the player's command;

carry out remaping:
	if noun is perma amper:
		if tunes are moot, say "The perma-amper has already been destroyed. Re-remapping won't do any good. Or bad." instead;
		try fliptoing perma amper instead;
	say "There's only one thing to remap in the game." instead;

remapped is a truth state that varies.

chapter spiting

spiting is an action applying to one thing.

understand the command "spit" as something new.

understand "spit [something]" as spiting.
understand "spit in/at/on [something]" as spiting.

does the player mean spiting the location: it is very likely.

rule for supplying a missing noun when spiting:
	if player is in Posh Hops Shop, now noun is tips pits;

carry out spiting:
	if noun is the player, say "I! Pst! It's I! Psst!" instead;
	if noun is tips pits, try fliptoing tips pits instead;
	if player is in Cripple Clipper or player is in Fighter Freight or player is in Disease Seaside or player is in Rawest Waster Waters, say "Pointless." instead;
	if noun is a person, say "Loogy-ology is not useful except in one specific case[if noun is a person]. Plus, spitting on people is rude[end if]."; [?? test double]

chapter inseting

inseting is an action applying to one thing.

understand "inset [something]" as inseting.

carry out inseting:
	if noun is tines:
		say "I think you meant inseting the stein.";
		try inseting stein instead;
	if noun is stein:
		if player does not have stein:
			say "(Taking the stein)";
			try fliptoing tines instead;
	say "You can't really inset [the noun]--you might be better off inserting it, and even so, inserting is only marginally useful in this game." instead;

chapter unseting

unseting is an action applying to one thing.

understand the command "unset" as something new.

understand "unset" as unseting.
understand "unset [something]" as unseting.

rule for supplying a missing noun when unseting:
	if tunes are touchable:
		now noun is tunes;
	else:
		say "You already dealt with the tunes and perma-amper.";
		reject the player's command;

does the player mean unseting tunes: it is very likely.

carry out unseting:
	if tunes are moot and player is in Posh Hops Shop, say "You already dealt with the tunes[if remapped is true] when you mucked up the perma-amper[end if]." instead;
	if noun is tunes, try fliptoing tunes instead;
	if noun is jukebox, say "The jukebox--or the tunes?" instead;
	say "That doesn't quite make sense here." instead;

chapter scrapeing

scrapeing is an action applying to one thing.

understand the command "scrape" as something new.

understand "scrape [something]" as scrapeing.
understand "scrape" as scrapeing.

does the player mean scraping capers recaps: it is very likely.

carry out scrapeing:
	if noun is casper or noun is capers recaps:
		if capers is reflexed, say "Casper would be alert to that, now." instead;
		if noun is casper, say "Hm, what he's writing on would make even more noise...so, let's try that.";
		try fliptoing capers recaps instead;
	try attacking noun instead;

section insert-shorting

insetring is an action applying to one thing.

understand "insert [something]" as insetring when player is in posh hops shop.

carry out insetring:
	if noun is tines or noun is stein, try inserting stein into tines instead;
	if player is in hops shop, say "[if stein is in hops shop]Almost, but with the stein, there[else]You already inset the stein[end if].";
	say "You need to specify what to insert that into." instead;

chapter inseting

silly-acts is a number that varies.

strolled is a truth state that varies.

to annoy-trolls:
	silly-min;
	if silly-acts is 1:
		say "Your singular antic seems to have attracted the attention of a few pesty types, and the trolls look up, too.";
	else if silly-acts is 2:
		say "'Job perks: bop jerks,' say the [trolls]. The pesty types have formed a half-circle around you now.";
	else:
		say "The [trolls] and pesty types have almost completely surrounded you, but they are so shocked, even waiting for an explanation, they won't jump at you yet. Best play it cool and find a way out[if trolls are prefigured]--now's a good time to [b]STROLL[r][end if].";

to say gloaty: say "[one of]. The galoots gloat so[or]. They act sore to scare, sure you stole a coaster[or][stopping]. Perhaps if you were more obnoxious, they'd be less inclined to keep you in";

to check-silly-death:
	say "You've caused enough damage for the trolls to kick you out. Any more and they might just kick you. Still, you sure?";
	unless the player yes-consents:
		say "The trolls nod as if they were the ones who stopped you from further nonsense.";
		continue the action;
	say "The pesty types still stare in belief, but the trolls are onto you. They give you a (self-) righteous beat-down. As the trolls beat you up, they mention you're probably the sort of punk who needs to undo stuff a lot to win a game, and that's not really hardcore.[paragraph break]Perhaps you should've played it cool and fled, instead.";
	now undo-code is 8;
	get-dead;
	follow the shutdown rules;

chapter Lil Ps Pills

the Lil Ps Pills is in Posh Hops Shop. it is proper-named. "A jr. jar of Li'l P's Pills lies off to the side here. It's not quite pretzels or peanuts, but it doesn't seem to be anyone's.". description is "Li'l P's Official Yorpwaldian Jumping Pills, a product of CopeLabs Placebos. The obligatory warning message suggests that using the pills may temporarily enhance your life and solve problems, but long-term, you may be slightly bummed you did not solve them yourself. Plus you won't get bonus point for figuring how best to use them, and it will not help you with stuff you don't 100% need[one of].[paragraph break]It's not very big--just a jr. jar[or][stopping].". printed name of Lil Ps Pills is "Li'l P's Pills".

understand "jar/jr" and "jar of pills" and "pill jar" and "li l p/ps" and "li l" and "lil p" and "lil p pills" as Lil Ps Pills when Lil Ps Pills are fungible.

a-text of Lil Ps Pills is "RRYRR". b-text of Lil Ps Pills is "RRY?R". parse-text of lil ps pills is "S[sp]x[sp]I[sp]x[sp]x". lil ps pills is parse-spoilable.

after printing the name of the Lil Ps pills while taking inventory:
	if jar-empty is true, say " (empty)";

Rule for clarifying the parser's choice of pills: do nothing.

jar-empty is a truth state that varies.

check opening the Lil Ps Pills: say "[if jar-empty is true]The jar's kind of empty now.[else]It's tamper proof. It's one of those jars you can't open until you're thinking about doing something other than eating them--but what could you do with pills?[end if]" instead;

pill-warned is a truth state that varies.

chapter spilling

produce-redo-cup is a truth state that varies. produce-redo-cup is false. [ this is an option in the beta test module but needs to come here since code that must stay in the release section uses it]

spilling is an action applying to one thing.

understand the command "spill [something]" as something new.

understand "spill [something]" as spilling.

does the player mean spilling pills: it is very likely;

spill-target is an object that varies. spill-target is nothing.

after spilling:
	if pills are moot and spill-target is nothing:
		d "BUG: I mistracked a pill spill.[line break]";
	else if scams is true:
		say "[if spill-target is nothing]PILLS NOT USED SUCCESSFULLY[else]HOW PILLS WERE USED: [how-pills-used][end if].";
	continue the action;

spill-loc is a room that varies. spill-loc is strip of profits.

to tag-spill-cheated (gc - a thing):
	now spill-target is gc; [this is for testing MISSES without going to the end]
	if produce-redo-cup is false:
		now jar-empty is true;
		now undo-code is 3;
	else:
		say "You blink and notice the jar of Li'l P's Pills has filled up again. It's probably less safe to eat the pills than ever, but they could still hint stuff.";
		now player has the pills;

every turn when mrlp is oyster and debug-state is true:
	d "Current oyster hint/spill item = [oyster-item]/[oyster-spill-item].";

to decide which thing is oyster-spill-item:
	if player is in posh hops shop, decide on LOLstr trolls;
	if player is in Lean Lane and tea at a tee is in Lean Lane, decide on tea at a tee;
	let temp be oyster-item;
	if temp is thin hint, decide on the player;
	decide on temp;

check spilling (this is the general game state spill reject rule):
	if noun is not pills, say "You can't spill that. Or you can, but it won't help you or distract anyone or anything blocking you." instead;
	if jar-empty is true, say "You already spilled the pills. None are left." instead;
	if pills are not touchable, say "Nothing to spill here.";
	if player does not have pills:
		say "(Taking them first, to be pedantic.)";
		now player has pills;
	if the player's command includes "jar":
		if the player's command does not include "pills":
			say "You can't spill the jar--just what's in it.";

to say an-sol of (th - a thing):
	repeat through regana of mrlp:
		if the-from entry is th:
			say "[right-word entry in upper case]";
			continue the action;
	say "NOTHING (BUG)";

check spilling (this is the specific game state spill reject rule):
	if player is in Sclerous Closures:
		if Achers Chaser Arches is prefigured, say "You remember that SEARCHing might've worked better with the sardine gone." instead;
	if location of sausage is location of player:
		if player is not in Anger Range, say "You don't need to leave the sausage a trail of pills." instead; [this is probably only a valid code path during spill-every-turn testing]
		if sausage is reflexed, say "[one of]The haunter-sausage points at the pills and wags its finger at you. It is beyond the help of medication. Perhaps it was killed off by medication and you were extra rude to remind it[or]You don't need the haunter-sausage's anti-drug message again[stopping]. Perhaps you can get the haunter to follow you just by walking around[if player is not in anger range] some more[end if]." instead;
	if player is in Anger Range and carps are moot:
		if digger is off-stage, say "A single pill jumps out, tries to burrow in the ground, and pops back in the jar. Looks like you need to dig somehow for the haunter, but you don't have an instrument." instead;
		if HUNTER HUNT AREA is in Anger Range:
			if thin hint is not in Rascal Craals, say "A single pill jumps out, and you could swear it yelped before jumping back in the bottle. Maybe you need to prepare before digging up whatever's under Anger Range." instead;
	if player is in Lean Lane:
		if Paw R Wrap is not off-stage:
			say "That would be a rude parting gift. You've claimed your reward--the Paw-R-Wrap bubble wrap[if tea at a tee is not moot]. Though it would seem polite--and straightforward--to try something from the [tea][end if]." instead;
	if player is in Rascal Craals:
		if ruby is off-stage or digger is off-stage, say "A solitary pill tries to burrow into the ground but fails. Hm. Maybe you should come back later if you need to hide something." instead;
	if player is in Horned Hedron and walleyes are in Horned Hedron, say "You don't have one for everyone, and there's too many everyone, anyway. You'll need to outsmart the walleyes." instead; [walleyes can't really be flipped. You need to go through the sausage.]
	if player is in End Den, say "Unfortunately, the pills won't roll off and lead the way to where you need to go. You need some sort of map[if player has gleaner and bogus-enlarge is moot]. One might be in your inventory, and you just need to examine it[end if]." instead;
	let oi be oyster-spill-item;
	if oi is the player, say "You spill out a pill, cautiously, but nothing happens. Maybe you're done here. You replace the pill. It wasn't on the ground that long." instead;
	if oi is thruhinted, say "You already got hints of what to do with [the oi]: [an-sol of oi]. So you decide to save the pills for later." instead;
	if pill-warned is false and scams is false:
		say "[if Anger Range is not visited]You briefly wonder if the pill jar might be better saved for later[else]You have a brief vision of Elvira trolling '[he-she-c] needed DRUGS!' which is silly, but yeah[end if]. Release the pills anyway?";
		now pill-warned is true;
		unless the player yes-consents, do nothing instead;
		say "Okay.";
	if oi is waste or oi is heaps or oi is lance, abide by the ant-side-quest-check rule;

flip-spill-flag is a truth state that varies.

after fliptoing when flip-spill-flag is true:
	now flip-spill-flag is false;
	continue the action;

spill-block is a truth state that varies.

carry out spilling:
	now spill-target is nothing;
	let oi be oyster-spill-item;
	d "Spilling [oi].";
	now flip-spill-flag is true;
	if spill-block is true, say "[b]SPILL[r] directed me to [the oi], but it's currently blocked. This should never happen outside of testing." instead;
	repeat through table of oyster anagrams:
		if the-from entry is oi:
			now spill-loc is location of player;
			try fliptoing the-to entry;
			tag-spill-cheated the-from entry;
			if debug-state is true, say "DEBUG: MISSES will show [endgame-spill-instead].";
			now flip-spill-flag is false;
			if produce-redo-cup is false, moot pills;
			the rule succeeds;
	say "WARNING could not flip-from [oi].";
	now flip-spill-flag is false;
	the rule succeeds;

to say endgame-spill-instead: say "Instead of spilling the pills, you could've tried to [how-pills-used]"

this is the ant-side-quest-check rule:
	say "That might be a bit dirty, and you wonder if it's really worth it to use the pills on beautification (fourth wall note: this will only help with an optional side quest). Go ahead anyway?";
	if the player regex-prompt-consents:
		do nothing;
	else:
		say "You save the pills for a real emergency." instead;

report spilling pills:
	if scams is true:
		d "Let's refill the pills, since we're scam-testing.";
		now jar-empty is false;
		now player has pills;

book Olde Lode

Olde Lode is a room in Oyster. "You've reached what was probably an old mining pit. As in the Hops Shop, you can't tell one direction from another, especially not with those scary baser braes all around. You feel both a need to panic and a need not to panic. But there must be simple action to take to get out of here.". roomnud of Olde Lode is table of Olde Lode nudges.

exits-text of Olde Lode is "As in the [hops shop], it's not about any one direction but getting past an obstacle."

after looking in Olde Lode:
	if clam is in Olde Lode, set the pronoun it to clam;
	continue the action;

chapter clam

the clam is a vanishing animal in Olde Lode. initial appearance of clam is "A clam snaps here, unwilling to let you pass.". description is "Full of chargin['] Chagrin! As if being boxed in by the baser braes wasn't bad enough! You'll have to do something other--but maybe simpler--than call [']m Mac."

a-text of clam is "RYRR". b-text of clam is "PYRP". parse-text of clam is "UNIQUE". clam is any-spoilable.

check taking clam: say "It would put the clamps on your hand." instead;

section calming

calming is an action applying to one thing.

understand the command "calm" as something new.

understand "calm [something]" as calming.

does the player mean calming the clam: it is very likely.

carry out calming:
	if noun is aunt tuna, say "No way." instead;
	if noun is clam, try fliptoing clam instead;
	if noun is sausage, say "It's a sausage. It needs more. Like an explanation, or where the ruby is." instead;
	if noun is player, say "[if clam is touchable]You can take a good calming, but you need to dish it out[else]That felt nice, if ineffective[end if]." instead;
	if noun is a person, say "You don't need to calm [if noun is plural-named]them[else if noun is a male person]him[else if noun is a female person]her[else]that[end if]." instead;
	if noun is marcel, say "Er...close." instead;
	if noun is not a person, say "You can't really speak the language." instead;
	say "You just aren't good enough with words to do that. Well, schmoozy words." instead;

chapter urn

the urn is a vanishing thing. "An urn lies here, drawing you in unnaturally, with the lure of riches. No wonder the clam was so aggressive. It feels a bit evil, even.". description of urn is "It's--well, beautiful, like you could take it and forget all about this quest."

a-text of urn is "RYR". b-text of urn is "RYP". parse-text of urn is "UNIQUE". urn is any-spoilable.

check taking urn:
	say "As you take the urn and peek inside, the cursed wealth inside possesses your mind. You spend the rest of your free time gazing at it, until Elvira's goons catch you. A-ha! Proof you were a greedbag! Your loot is confiscated--for the public good, of course. A small fraction of it is donated to endow a scholarship to the agnostic who writes the best essay about why you should never have been trusted in the first place.";
	now joke-death is true;
	get-dead;
	follow the shutdown rules instead;

check opening urn: try taking urn instead;

the block vaguely going rule is not listed in any rulebook. [?? does this work in Shuffling too?]

section runing

understand the command "run" as something new.

understand "run [direction]" as going.

chapter baser braes

the baser braes are plural-named bounding boring scenery in Olde Lode. description of baser braes is "Who knows what might be hiding there? You're too scared to walk or stroll into them, which kind of leaves you trapped in the Olde Lode, unless you take evasive action.". bore-text is "The baser braes are all around. They'd be too hard to change.".

book Disease Seaside

Disease Seaside is a room in Oyster. "You don't feel sick here, but you'll probably get sick of being on this side of the Saccade Cascade, the most watchably active river in all of Yorpwald. It's packed with sabot boats, and there's a frat raft docked here. A canoe too!". roomnud of Disease Seaside is table of Disease Seaside nudges.

exits-text of Disease Seaside is "Yet again, no directions here. You need to get on or past the boats, and swimming north won't cut it."

after looking in Disease Seaside:
	set the pronoun them to sabot boats;
	set the pronoun it to frat raft;
	continue the action;

chapter canoe

the canoe is scenery in Disease Seaside. "The canoe is all red and has a fish carved into it. The fish seems to be trying to cut...a tree?!"

check taking canoe: try entering canoe instead;

check entering canoe: say "It's too narrow. How stupid of the designer. Plus it has no oars. Maybe the frat raft or sabot boats can get you across." instead;

a-text of canoe is "YRYYR". b-text of canoe is "YRYYR". parse-text of canoe is "-[sp]x[sp]-[sp]-[sp]x".

section fish

the fish is part of the canoe. the fish is boring. description of fish is "You can't tell what sort of fish it is. It may not be important. It seems to be cutting down a tree, but you can't tell.". bore-text of fish is "Not much you can do with the fish embedded in the canoe."

joke-death is a truth state that varies.

to say uurrgg:
	now joke-death is true;
	get-dead;

chapter sabot boats

The sabot boats are vanishing plural-named boring scenery in Disease Seaside. bore-check is bore-boats rule. bore-text is "Sabot is not short for sabotage but a rather small boat. They're moving quickly past, but perhaps you could draw enough attention to yourself that one might see you and dump you at the far shore.".

a-text of sabot boats is "RYYRR". b-text of sabot boats is "???R?". parse-text of sabot boats is "?[sp]?[sp]?[sp]x[sp]?". sabot boats are parse-spoilable.

this is the bore-boats rule:
	if action is blathery, continue the action;
	if current action is sobating, now boring-exception is true;

description of sabot boats is "They're sabot boats, not shippish, and there are too many to swim through without getting hit[if player is on frat raft]. Probably even to raft through[else][end if][if clam is moot]. You can hear loud voices from the sabot boats[end if]."

chapter frat raft

the frat raft is scenery in Disease Seaside. description is "It's a frat raft, by the looks of it. All sorts of Greek symbols and crude jokes are written on it. You probably have to do something pretty hokey to get it fueled up, or whatever.[paragraph break]It's made of oaks-as-OK which soak and carry interlocking--and completely locked--oars."

a-text of frat raft is "RYRR". b-text of frat raft is "??RP". parse-text of frat raft is "?[sp]?[sp]R[sp]T". frat raft is any-spoilable.

the frat raft is an enterable reflexive supporter. the frat raft is fixed in place.

check taking raft: say "You probably want to [b]ENTER[r] or [b]CLIMB[r] or [b]GET ON[r] the raft. It's too big to take, physically." instead;

check going when player is in raft: say "The raft is a bit clunky. You can't even move the oars." instead;

section oars

the interlocking oars are part of the frat raft. the interlocking oars are reflexive. description is "The oars are some red metal, more like containers than something that could get you through the water. They don't seem mobile[if raft is reflexed]--they seem a bit bulkier than before you, um, gave a gas refill[end if].".

a-text of oars is "RYYR". b-text of oars is "RYYR". parse-text of oars is "UNIQUE". oars is any-spoilable.

check taking oars: say "The oars won't budge from the raft." instead;

chapter useless scenery

section Saccade Cascade

Saccade Cascade is boring scenery in Disease Seaside. description of Saccade Cascade is "Sabot boats pass on Saccade Cascade so fast you can't stop blinking and looking around. It's a real arrive-a-river, you could say, though that wouldn't help things.[paragraph break]You probably need to cross it, but you can't expect a groupie pirogue to show up. [if player is on frat raft]Your frat raft bobs gently in the Cascade[else]A frat raft is also docked by[end if].". bore-check of Saccade Cascade is bore-cascade rule.

this is the bore-cascade rule:
	if current action is taking, say "Saccade Cascade drips through your fingers. You blink." instead;
	if current action is entering, say "You dip a toe in but are overwhelmed by some schmaltzy philosopher asking, how does one enter a river, and can one truly cross a river, and why does one cross a river.[paragraph break]The answer is probably something stupid, passive, and impractical. You need a way across that'll appropriately avoid, or use, those sabot boats." instead;

check going north in Disease Seaside: say "You can't cross Saccade Cascade on your own. One of the sabot boats would hit you. Or, if you went underwater, you'd fear strident tridents." instead;

section matterless streamlets

the matterless streamlets are plural-named bounding boring scenery in Disease Seaside. description of matterless streamlets is "The streamlets flow everywhere. While they are, indeed, matter, they don't actually, um, matter.". bore-text is "The streamlets are nice to look at, but they're not good for much."

chapter sobating (joke reject verb)

sobating is an action applying to one thing.

understand the command "sob at" as something new.

understand "sob at [something]" as sobating.

does the player mean sobating the sabot boats: it is very likely.

carry out sobating:
	if player is not in Disease Seaside and player is not in Fighter Freight, say "[reject]" instead;
	if noun is not sabot boats, say "That's not a good thing to sob at. At which to sob. Actually, nothing is." instead;
	say "Show some confidence! Boats are no places for whining." instead;
	the rule succeeds;

book Fighter Freight

Fighter Freight is a room in Oyster. "You're near the edge of a Fighter Freight--of the RIG-HEFT brand, of course, though escape from your captors is more relevant now. They got in good with Elvira, fast, to monopolize the market for pointlessly ugly, aggressive boats.[paragraph break]You're close enough to the far shore, you could make it if you fled right. But you're half-paralyzed with fear, With or without that pale plea echoing from below and... well... you think you smell something, too.". roomnud of Fighter Freight is table of Fighter Freight nudges.

after looking in Fighter Freight:
	set the pronoun it to pale plea;
	continue the action;

chapter scary crays

some scary crays are plural-named terse people in Fighter Freight. "Scary crays hover here, on the verge of attacking.". description is "They don't have any weapons, but they are staring intently at you, ready to take you down."

understand "scary/ cray" as crays.

chapter pale plea

the pale plea is vanishing boring scenery in Fighter Freight. description of pale plea is "[one of]'A... [']elp!'[or]'Pal! Pal! Ee!'[in random order]". bore-text of pale plea is "You can't do much besides [b]LISTEN[r] to the plea.".

a-text of pale plea is "RYYR". b-text of pale plea is "RYYR". parse-text of pale plea is "UNIQUE". pale plea is any-spoilable.

scray-scan is a truth state that varies.

check scaning when player is in Fighter Freight:
	if noun is not plea, try scaning plea instead;
	if scray-scan is true, say "You worry what will happen to you, or the settler, if you pull it out again. You remember seeing RYYR from the pale plea." instead;
	say "The crays are still slightly leery the settler might be a weapon. During the moment of delay, you point it towards the pale plea and see something.";
	now scray-scan is true;

chapter leaping (verb)

leaping is an action applying to nothing.

understand the command "leap" as something new.

understand "leap" as leaping.

carry out leaping:
	if location of player is not Fighter Freight, try jumping instead;
	try fliptoing pale plea instead;

book Anger Range

Anger Range is a room in Oyster. "This place [if sausage is moot]no longer [end if]manages to n-rage you, [if sausage is moot]now you helped [the sausage][else if carps are touchable]as well as the fish who live here[else if sausage is not touchable]and you sense there may be something else angré in the area. You see a [HUNTER HUNT AREA], which is probably the source of a lot of the hate[hau-clue][else]even without [the sausage]'s whining[end if][if player has ruby or player has wrap]. You feel a pin nip from your [rub-wr] as you walk across[end if]. You see plains to the north, and you can go west or east, too[one of]. You think back to someone annoying named Regan[or][stopping]. There are also snarled darnels here, which [if darnels are reflexed]no longer upset you[else]upset and distract you, for whatever reason[end if][if sausage is moot].[paragraph break]There's even a super cult sculpture of Shoer Osher here. It's perfectly useless, and you feel jobbed you aren't getting credit for calming things down here, but it seems appropriate aesthetically[end if].". roomnud of Anger Range is table of Anger Range nudges.

understand "shero/hero/heros shore" and "shero/hero/heros/shore" as Anger Range when sausage is moot.

printed name of Anger Range is "[if sausage is not moot]Anger Range[else if player is male]Hero's Shore[else]Shero Shore[end if]"

after printing the locale description for Anger Range:
	if trout is in Anger Range, set the pronoun it to trout;
	if pikes are in Anger Range, set the pronoun it to pikes;
	if pikes are moot and Lean Lane is unvisited:
		say "Your friend the trout left to the east. He wanted you to follow. Maybe you should go see him. Perhaps he could help.";
	continue the action;

to say hau-clue:
	say "[if ruby is moot and sausage is off-stage], even more than before you buried the ruby[end if]";

to say rub-wr:
	say "[if player has ruby]ruby[else]wrap[end if]";

check going south in Anger Range: say "You don't want to go back over Saccade Cascade. Your goal must be here." instead;

chapter random fishy bullies

check taking a person in anger range:
	if noun is sausage, say "Yes, you must take [the sausage] somewhere." instead;
	if noun is trout, say "You could take the trout away, but he needs to stay and fight." instead;
	if noun is carps or noun is pikes, say "That's the wrong way to 'take' [the noun].'" instead;

carps-pref is a truth state that varies.

understand "fish" and "bullies" as carps when carps-pref is true.

understand "fish" and "bullies" as pikes when carps-pref is false.

section carps

the carps are plural-named vanishing people in Anger Range. "They are sneering and teasing the poor trout."

description of carps is "They are sneering and teasing the poor trout. You're bigger than them, by two feet."

a-text of carps is "RRRYR". b-text of carps is "RRPYR". parse-text of carps is "x[sp]x[sp]R[sp]A[sp]x". carps are parse-spoilable.

section pikes

the pikes are plural-named vanishing people in Anger Range. initial appearance of pikes is "[bug-report]"

the chum of the pikes is the carps.

a-text of pikes is "RRYRY". b-text of pikes is "RRYRY". parse-text of pikes is "x[sp]x[sp]-[sp]x[sp]-".

description of pikes is "They are sneering and teasing the poor trout. You're bigger than them, by two feet."

section descriptions

for printing a locale paragraph about a person (called xyzyx) in Anger Range:
	if xyzyx is sausage, continue the activity;
	if xyzyx is carps:
		say "Some carps and pikes re-nag and re-nag a poor little trout here. Another reason for anger!";
		now trout is mentioned;
		now carps are mentioned;
		now the player is mentioned;
		now pikes are mentioned;
	else:
		set the locale priority of xyzyx to 0;
		continue the activity;

aunt-tuna-cross is a truth state that varies. aunt-tuna-cross is false.

check going east in Anger Range:
	if sausage is in Anger Range, say "Aunt Tuna has a weak heart. That would not be nice! To her or the people she'd complain about the haunter to later." instead;
	if aunt-tuna-cross is true, say "Not after you so rudely spilled those pills." instead;

check going in Anger Range:
	if carps are in Anger Range, say "Nagger-rage fills you as you notice the trout's getting bullied. You could probably take the carps or the pikes or, well, both, really. You're bigger than they are." instead;

chapter trout

The trout is a reflexive person in Anger Range. description is "[if carps are touchable]He is about half your size, cringing in terror from the other fish bullies[else if trout is reflexive]He is looking up at you, as if a thing you could show him how you dealt with those big mean fish[else]He has an air of confidence about him now[end if].". "Your friend [one of][or]Tortu [stopping]the trout is here, looking [if trout is reflexive]timid[else]confident[end if]."

check scaning trout when player is in Anger Range:
	say "The trout doesn't need that right now. He needs someone who can help him deal with the pikes and carps." instead;

understand "tortu" as trout.

a-text of trout is "RYRYR". b-text of trout is "PYRYR". parse-text of trout is "UNIQUE". trout is parse-spoilable.

check taking trout: say "You can't just take him and run. You need to fight back." instead;

chapter snarled darnels

does the player mean slandering the darnels: it is likely.

slandering is an action applying to one thing.

understand the command "slander" as something new.

understand "slander" as slandering.
understand "slander [something]" as slandering.

rule for supplying a missing noun when slandering:
	if darnels are touchable:
		now the noun is the darnels;
	else:
		now the noun is the player;

carry out slandering:
	if noun is darnels, try fliptoing darnels instead;
	if player is in Anger Range, say "There's something more logical to slander. I mean, slander isn't logical, but yeah." instead;
	say "That's not a useful action here. I mean, slander's never useful on a heroic adventure, [if darnels are moot]and you already had your catharsis[else]but you'll know when to[end if]." instead;
	the rule succeeds.

the snarled darnels are plural-named LLPish reflexive scenery in Anger Range. "The snarled darnels do make [location of player] a bit untidy, a plant-kingdom comb-over with prickles all up and down. You can't tell they start or end, but [if darnels are reflexed]at least you vented about them[else]they just seem to be nagging you to say something, as a distraction[end if].".

a-text of snarled darnels is "RRYRRYR". b-text of snarled darnels is "?R??R?R". parse-text of snarled darnels is "x[sp]x[sp]a[sp]x[sp]x[sp]e[sp]x".

chapter Shoer Osher

Shoer Osher is scenery. "Everyone knows the story of Shoer Osher and [if player is male]his[else]her[end if] rise to fame from humble farm life, and everyone knows it's sort of fake, but nobody can say much. The statue itself improves Osher's looks and muscle tone. It's still quite frankly creepy enough. One look and you are that much more eager to dispose of the Horned Hedron and get out of here."

Understand "sculpture" and "super/ cult/ sculpture" as Osher.

check taking Osher: say "You have enough heroism by yourself." instead;

chapter verbs to clear range at first

section scraping (verb)

scraping is an action applying to one thing.

does the player mean scraping the carps: it is very likely.

understand the command "scrap" as something new.

understand "scrap with [something]" as scraping.
understand "scrap at [something]" as scraping.
understand "scrap [something]" as scraping.

carry out scraping:
	if the player's command matches "carps", try fliptoing carps instead;
	if noun is pikes, say "Right action...wrong name." instead;
	try attacking noun instead;

section spikeing (verb)

spikeing is an action applying to one thing.

understand the command "spike" as something new.

understand "spike [something]" as spikeing.

does the player mean spikeing the pikes: it is very likely.

carry out spikeing:
	if noun is carps, say "Right action...wrong name." instead;
	if noun is pikes, try fliptoing pikes instead;
	try attacking noun instead;

chapter unearthing (verb)

understand "haunter" as sausage.

unearthing is an action applying to one visible thing.

understand "unearth" as unearthing.
understand "unearth [any thing]" as unearthing.

rule for supplying a missing noun when unearthing:
	if sausage is not off-stage, say "You already unearthed what you needed to." instead;
	if player is in Rascal Craals:
		if thin hint is in Rascal Craals:
			now noun is thin hint;
		else:
			now noun is location;
		continue the action;
	if player is not in Anger Range, say "Nothing worth unearthing here." instead;
	if HUNTER HUNT AREA is touchable, now the noun is the sausage;

The HUNTER HUNT AREA is boring vanishing scenery. "You feel hate pulsing from it, even an odd urge to attack it. You can also [b]READ[r] its details.". bore-text of HUNTER HUNT AREA is "The [HUNTER HUNT AREA] is hiding something potentially malevolent. But what?". bore-check is bore-hunter-hunt-area rule.

understand "scrawl" as HUNTER HUNT AREA.

this is the bore-hunter-hunt-area rule:
	if current action is unearthing, now boring-exception is true;

a-text of HUNTER HUNT AREA is "YRYYRRR". b-text of HUNTER HUNT AREA is "??Y??R?". parse-text of HUNTER HUNT AREA is "?[sp]?[sp]-[sp]?[sp]?[sp]x[sp]?". hunter hunt area is parse-spoilable.

does the player mean unearthing the sausage: it is very likely.

carry out unearthing:
	if mrlp is not oyster, say "[reject]" instead;
	[if player does not have rigged digger:] [now covered in the pre-haunter rule]
	if noun is HUNTER HUNT AREA, say "Close, but I'm going to make you unearth what's under the [hunt area]." instead;
	if noun is sausage:
		if location is not Anger Range, say "Wrong place to unearth the haunter." instead;
		if the player's command includes "sausage", say "Somehow, you got ahead of yourself and used the haunter's 'real' name. I'm going to be pedantic and make you refer to it by the currently correct, anagrammatical one." instead;
	if player is in Rascal Craals:
		if noun is location, say "You haven't buried anything, and you're not aware of treasure here. Plus, if you dig too long without knowing what to look for, you might attract attention." instead;
		if noun is ruby, say "That is wasted work." instead;
		if noun is thin hint, say "That would be wasted work, unearthing the thin hint[if sausage is not moot] and the ruby below it[end if]." instead;
	if player is not in Anger Range, say "Nothing to unearth here. Maybe somewhere more wide-open." instead;
	if noun is HUNTER HUNT AREA, try fliptoing HUNTER HUNT AREA instead;
	say "Not worth unearthing, but that's the right idea.";
	preef HUNTER HUNT AREA;
	the rule succeeds;

chapter Use Saga Sausage

the Use Saga Sausage is a neuter reflexive person. description is "It's a seven-foot tall sausage--or, rather, a stick figure of several sausages tied together, with a bacon comb-over, a ham hock shield and a pork chop bone for a weapon. It looks very put-upon, and it's probably up to you to fix that.". printed name is "Use-Saga Sausage". "The [sausage] moans impatiently and shifts restlessly, hoping [if sausage is reflexive]for a single kind word[else]to be led somewhere[end if][one of][or][or][or][or]! It cries for any news of its lost jewel[cycling]!"

check taking sausage:
	say "It's incorporeal. But maybe you can take it somewhere." instead;

check answering sausage that (this is the ruby answer rule):
	if the player's command includes "ruby", try objasking sausage about ruby instead;

understand "ghost" as sausage when sausage is fungible or player is in posh hops shop.

understand "etahn/ru" and "etahn ru" as sausage when sausage is fungible.

a-text of use saga sausage is "YRRYYRY". b-text of use saga sausage is "Y?RYGP?". parse-text of use saga sausage is "-[sp]?[sp]S[sp]-[sp]A[sp]G[sp]?". use saga sausage is parse-spoilable.

this is the wrong-sausage-direction rule:
	if player is in anger range and noun is not west, say "That'd be leading away from where you buried the ruby." instead;
	if player is in sclerous closures and noun is not north and noun is not inside, say "No, you need to keep moving towards the Horned Hedron." instead;
	if player is in horned hedron:
		if noun is inside, say "Hmm. That might cause some chaos, but too much might alert Elvira. You probably want to finish the frame job you started." instead;
		if noun is not west, say "You're close to where you buried the ruby. Finish the frame job." instead;

check going when location of sausage is location of player:
	if sausage is reflexive, say "Running would just make [the sausage] suspicious. Perhaps you could get on its good side." instead;
	abide by the wrong-sausage-direction rule;

every turn (this is the track sausage rule):
	if sausage is moot or sausage has not been in Anger Range, continue the action;
	if location of sausage is adjacent to location of player:
		say "The [sausage] follows you, wailing and moaning.";
		move sausage to location of player;
		if location of player is Horned Hedron and walleyes are in Horned Hedron:
			say "[line break]The walleyes spout yea-wells. Their toothy cackling becomes toothy clacking as [the sausage] hovers over you protectively.";
			the rule succeeds;
		if location of player is Rascal Craals:
			say "[line break]The [sausage] sees the thin hint! It gestures as if you should dig. You do. With the ruby, [the sausage] becomes a wholer howler. It jets off to the east. As you bury the rigged digger (no need to re-dig, G,) you hear 'Scaring me?' then, after [the sausage] booms 'CRIME SNAG...' SCREAMING, with manic 'ERGs.' 'Run! A - the - a hunter!'[paragraph break]You can probably enter the ol['] trap back in the Horned Hedron now. [if ol trap is prefigured]It'll be easier to [b]PATROL[r] with the walleyes gone[else]Well, once you find where to disarm it[end if].[paragraph break]The [sausage] did a lot of damage. You go back east to the Hedron before several craals collapse.[wfak]";
			moot rigged digger;
			moot walleyes;
			moot sausage;
			moot thin hint;
			move shoer osher to Anger Range;
			move player to Horned Hedron;
			now Rascal Craals is shunned;
			reg-inc;
			the rule succeeds;

[of such extreme action that you may wind up using extra nouns at your own risk]

chapter assuageing

assuageing is an action applying to one thing.

understand the command "assuage" as something new.

understand "assuage" as assuageing.
understand "assuage [something]" as assuageing.

does the player mean assuageing the sausage: it is very likely.

Rule for clarifying the parser's choice of sausage while assuageing:
		say "(sausage)[line break]";

carry out assuageing:
	if noun is sausage:
		if number of words in the player's command > 1:
			if player's command does not include "sausage", say "Right verb, wrong noun. I'm being strict, here." instead;
		try fliptoing noun instead;
	if noun is Elvira, say "A peace treaty is not an option." instead;
	if noun is walleyes or noun is carps or noun is pikes, say "Bullies never work that way." instead;
	if noun is trout, say "[if noun is in Anger Range]Concentrate on the carps and pikes instead[else]He's already happy with you[end if]." instead;
	if noun is the player, say "Believe in yourself! You can do it! Yeah!" instead;
	if noun is not a person, say "There's only one living thing you need to assuage." instead;
	say "You don't need to use your charisma, there." instead;

book Hardest Trashed Dearths

Hardest Trashed Dearths is a room in oyster. Hardest Trashed Dearths is east of Anger Range. "Somewhere, you may find your friend. But he ran too fast. You could go back west if you want, or you can try to find him. With all the crackling and general blurriness, you suspect you are surrounded by potentially lethal spark parks, with no quick directional way out.[paragraph break]You do hear something, though[if cans are touchable], and the ground is littered with cans[end if].". roomnud of Hardest Trashed Dearths is table of Hardest Trashed Dearths nudges.

check going west in Hardest Trashed Dearths:
	say "The [if pets are in dearths]pets can't be too hard to evade[else]eeks shouldn't be too hard to find[end if]. Still go back west?";
	if the player yes-consents:
		continue the action;
	else:
		say "Yes, you'll work through things and discover where to go.";

section spark parks

the spark parks are plural-named boring bounding scenery in Hardest Trashed Dearths. description is "You can't clearly see or feel the spark parks, and it might hurt if you got close. But you know they're there.". bore-text is "You don't want to do anything with the spark parks, as they might do something to you. You need to find a safe way out.".

after looking in Hardest Trashed Dearths:
	if cans are in Hardest Trashed Dearths:
		set the pronoun them to cans;
	else if eeks are in dearths:
		set the pronoun them to eeks;
	else:
		set the pronoun them to pest pets;
	continue the action;

section cans

the cans are vanishing flippable LLPish scenery in Hardest Trashed Dearths. "The cans are all icky and sticky and--eww. It'd take something weird to counter the chemical reaction that made--whatever's non-biodegradable in there. They're quite red and, if you look carefully, you can probably see the name of the company who produced them, in a more garish red."

a-text of cans is "RRYR". b-text of cans is "RRYR". parse-text of cans is "x[sp]x[sp]A[sp]x". cans are any-spoilable.

check taking the cans:
	say "There are too many. Even one or two would be too icky and mess up your super purse. You don't even have a garbage sticker, but maybe another tool would work." instead;

check scaning the cans (this is the bonus point rule) :
	if the player's command includes "scan", try fliptoing cans instead;
	say "You're over-thinking this one." instead;

section pest pets

the pest pets are vanishing animals in Hardest Trashed Dearths. "Pest pets seem to jump around and block you from going anywhere except the way you came.". description of pest pets is "They're bright red, and more surprisingly, they have a brand name written on them in entirely different bright red.".

a-text of pest pets is "RRYR". b-text of pest pets is "RRYR". parse-text of pest pets is "x[sp]x[sp]e[sp]p".

section eeks

the eeks are plural-named boring vanishing scenery. description is "If you listen or look the right way, you could figure where the eeks are coming from.". bore-text of eeks is "Can't do much more than listen to the eeks, or--something else, to find how to follow them.". bore-check of eeks is bore-eeks rule.

a-text of eeks is "RYYR". b-text of eeks is "RGYR". parse-text of eeks is "UNIQUE". eeks are any-spoilable.

this is the bore-eeks rule:
	if current action is seeking or current action is listening, now boring-exception is true;

book Lean Lane

Lean Lane is an innie room in Oyster. "You're in a dingy but comfortable residence. A raw red [rew-war] drawer leans against one wall[wipes-too]. You may leave to the west--anywhere else is probably a bit too private[if tea at a tee is touchable]. A Tea-At-A-Tee provides refreshment for once you've helped your friend the trout[end if].". roomnud of Lean Lane is table of Lean Lane nudges.

to say wipes-too: if wipes are in Lean Lane, say ", and you notice some wipes on it";

after looking in Lean Lane:
	if tea at a tee is in Lean Lane, set the pronoun it to tea at a tee;
	if wipes are in Lean Lane, set the pronoun them to wipes;
	continue the action;

Aunt Tuna is a female person in Lean Lane. description is "Grayin['], grainy. 'Staring at people you barely know! Where are your manners?'". "Aunt Tuna putters around here, nodding and clucking and shaking her head. Well, as much as a fish can[if tea at a tee is touchable]. She occasionally motions to the [tea] she laid out for you[end if]."

does the player mean eating the tea at a tee: it is very likely;

chapter tea (eat)

The tea at a tee is edible vanishing scenery in Lean Lane. description is "Not quite an arty tray, but it is the Yorpwaldian quasi-mini-table of choice. It has tea on it: the meal, not the drink[one of]. And no beak-bake in it[or][stopping]. But why stare at it? That's not what food is for.". printed name is "Tea-at-a-Tee"

a-text of tea at a tee is "YYR". b-text of tea at a tee is "YYR". parse-text of tea at a tee is "UNIQUE". tea at a tee is any-spoilable.

the paler pearl is an undesc. description is "It might be valuable if it weren't cut jaggedly in half. Where could the other half be?"

chapter gleaner

the general gleaner is a thing. description is "[if bogus-enlarge is moot]You see a map of all the paths in the Horned Hedron. They twist around a lot, and once you re-angle, it dilates details so you can see the way to get to...the Tenfold Teflon'd Den Loft (avec evac-cave,) with even a separate pest area on the side[oy-can-win][else]You hope to have peered deeper for a vision, but it's too small. All you can make out in the morbid dim orb is [ho-he] and the words GENERAL GLEANER, though if you look closely you may be able to read some red writing--the artist's name, too[end if]."

gleaner-viewed is a truth state that varies.

after examining gleaner when gleaner-viewed is false and bogus-enlarge is moot (this is the gleaner helps you through rule):
	if player is in end den:
		say "Oh! So that's how the map looks! And that's where you are now! You trace around a bit. Yes. Going like so will get you to the center...";
		move player to Tenfold Teflond Den Loft;
	else if end den is visited and Tenfold Teflond Den Loft is not visited:
		say "You see where you made the wrong turn to the End Den before. You'll get things right the next time.";
	know-loft;
	continue the action;

after printing the locale description for den loft:
	know-loft;
	continue the action;

to know-loft:
	d "Now you know about the loft den.";
	now gleaner-viewed is true;

after printing the name of the general gleaner while taking inventory:
	say " ([if bogus-enlarge is moot]enlarged[else]neat but small[end if])";
	continue the action;

check examining gleaner when player is in Tenfold Teflond Den Loft: say "You found the way in and know the way out. Better deal with the [if yapper is touchable]yapper and [end if]dialer, now." instead;

to say ho-he:
	say "[if end den is visited]maybe the maze you [are-were-hedron] stuck in[else if player is in Horned Hedron]somewhere, maybe somewhere close[else if Horned Hedron is visited]the Horned Hedron[else if Sclerous Closures is visited]a structure, possibly the Horned Hedron north of [here-there of Sclerous Closures],[else]some structure[end if]";

to say are-were-hedron: say "[if player is in end den]are[else]were[end if]"

to say oy-can-win:
	if aunt-tuna-cross is true and wipes are in lean lane, say ", but it's dimmed, as if the place is off-limits"

section bogus-enlarge

the bogus-enlarge is a privately-named vanishing thing. It is part of the general gleaner. printed name is "general gleaner". description is "[bug-report]".

a-text of bogus-enlarge is "YRRYRRY". b-text of bogus-enlarge is "YRR??RY". parse-text of bogus-enlarge is "-[sp]x[sp]x[sp]?[sp]?[sp]x[sp]-".

check scaning gleaner:
	if bogus-enlarge is touchable, try scaning bogus-enlarge instead;
	if bogus-reangle is touchable, try scaning bogus-reangle instead;

check objhinting gleaner:
	if bogus-enlarge is touchable, try objhinting bogus-enlarge instead;

section bogus-reangle

the bogus-reangle is a privately-named reflexive LLPish thing. description is "[bug-report]".

a-text of bogus-reangle is "RYYRRRY". b-text of bogus-reangle is "R?YRRRY". parse-text of bogus-reangle is "x[sp]E[sp]A[sp]x[sp]x[sp]x[sp]E".

chapter enlargeing

enlargeing is an action applying to one thing.

understand the command "enlarge" as something new.

understand "enlarge [something]" as enlargeing.

carry out enlargeing:
	if noun is not bogus-enlarge and noun is not gleaner, say "That's not part of your powers. Well, not generally[if bogus-enlarge is moot], and you already did that to the gleaner, anyway[end if]." instead;
	if bogus-enlarge is moot, say "You don't need to[b]ENLARGE[r] the general gleaner any more." instead;
	try fliptoing bogus-enlarge instead;
	the rule succeeds.

does the player mean enlargeing the bogus-enlarge: it is very likely.

chapter reangle

reangleing is an action applying to one thing.

understand the command "reangle" as something new.

understand "reangle" as reangleing.
understand "reangle [something]" as reangleing.

carry out reangleing:
	if noun is not gleaner, say "There's only one thing you can reangle in the game, and it's not critical[if bogus-reangle is reflexed], and you've already reangled it[end if]." instead;
	if bogus-enlarge is touchable:
		say "You might be able to [b]REANGLE[r] after doing something more necessary with the gleaner.";
		preef bogus-reangle;
		the rule succeeds;
	try fliptoing bogus-reangle instead;
	the rule succeeds.

does the player mean reangleing the gleaner: it is very likely.

rule for supplying a missing noun when reangleing:
	if gleaner is touchable, now the noun is the gleaner;

chapter seeking

seeking is an action applying to one thing.

understand the command "seek" as something new.

understand "seek [something]" as seeking.

does the player mean seeking the eeks: it is very likely.

carry out seeking:
	if noun is eeks, try fliptoing eeks instead;
	if noun is Achers Chaser Arches, say "Not quite the right way to poke through the arches." instead;
	try searching noun instead;
	the rule succeeds.

chapter Paw-R-Wrap wrap

warp-try is a truth state that varies.

After printing the name of the wrap while taking inventory:
	if warp-try is true, say " (to warp in the right place)";

some Paw R Wrap is a singular-named flippable thing. indefinite article of Paw R Wrap is "some". understand "bubble/bubbles" and "bubble wrap" as Paw R Wrap.

a-text of Paw R Wrap is "RYRR". b-text of Paw R Wrap is "??R?". parse-text of paw r wrap is "?[sp]?[sp]x[sp]?". Paw R Wrap is any-spoilable.

description of Paw R Wrap is "Paw-R-Wrap has been a great commercial success in Yorpwald, appealing to two demographics with its alternate interpretations: 'Power' wrap, for the practical, and 'Paw [']er,' for those who just love the noise it makes.[paragraph break]As for this piece of wrap, it's about two feet in diameter, all twisted up and thick enough to be covering something. But you don't have time to pop each bubble individually.". printed name of Paw R Wrap is "Paw-R-Wrap".

chapter warping

warping is an action applying to one thing.

understand the command "warp" as something new.

understand "warp [something]" as warping.

does the player mean warping the Paw R Wrap: it is very likely.

carry out warping:
	if noun is Paw R Wrap, try fliptoing ruby instead;
	if sardine is moot, say "You already warped what you needed to" instead;
	say "There's only one thing you can warp, and [if noun is plural-named]those aren't[else]that's not[end if] it.";
	the rule succeeds;

chapter eat stub

check taking the tea at a tee: say "'Goodness me, no! It is rude to [b]TAKE[r] all the tea! You can have it without taking it!' says Aunt Tuna." instead;

check eating tea at a tee:
	if the player's command does not include "eat", say "Be straightforward, here." instead;
	if trout is reflexive, say "You feel slightly guilty eating before helping the trout, but Aunt Tuna nods, it's okay for you to eat first.";
	try fliptoing tea at a tee instead;
	moot tea at a tee;
	reg-inc;

to say tee-details: say "[if trout is reflexive]hints you've SURELY got enough nourishment now to help Tortu stand up to the bullies as you did[else]thanks you for doing so much. She can't imagine anything more you could do for Tortu[end if]";

tuna-first is a truth state that varies.

check objasking tuna about: if tuna-first is false, tuna-chat instead;

check asking tuna about: if tuna-first is false, tuna-chat instead;

to tuna-chat:
	say "Aunt Tuna ignores your specific question and instead launches into a tirade about innocent people not being able to hide from the Die Thou Hideout in the Horned Hedron, and what with the haunter running around, that's one more thing to worry about! And it would be nice if they could be played against each other, but the real world doesn't work that way, even though she TRIES to be optimistic.";
	pad-rec-lump "the haunter";
	pad-rec "DIE THOU";
	now tuna-first is true;

to pearl-check:
	say "[line break]";
	if player has paler pearl:
		say "The two halves of the paler pearl seem to fit together. You can see something in there, but you're not sure what. It's quite simply not big enough. It's scratched over so the words GENERAL GLEANER engulf it.";
		now player has general gleaner;
		set the pronoun it to general gleaner;
		now paler pearl is off-stage;
	else:
		say "The pearl seems only half a sphere. Maybe the other half is elsewhere.";
		set the pronoun it to paler pearl;
		now player has paler pearl;

chapter raw red drawer

the raw red drawer is boring scenery in Lean Lane. description of raw red drawer is "It's, well, raw and red[if dent is part of raw red drawer], with a visible dent[end if][if wipes are in Lean Lane]. There are also some wipes on it[end if][if trout is reflexive]. Aunt Tuna nods and points to Tortu as you look at it, indicating you could get what's in there if you help him[end if].". bore-text of the raw red drawer is "'Disturb? I'd burst!' says Aunt Tuna[if dent is touchable], as she mentions that [b]DENT[r] is ugly enough[end if].". bore-check of raw red drawer is bore-drawer rule.

this is the bore-drawer rule:
	if current action is opening, say "[if Paw R Wrap is not off-stage]There's no secret compartment or anything. No need to be greedy[else if trout is not reflexed]Aunt Tuna mentions subtly-not-so-subtly that a guest is not a thief[else]Aunt Tuna exclaims 'Re-treat? Retreat!' Abashed, you assure yourself she shuffled the duplicate letters around, somehow[end if]." instead;

understand "warder drawer" as raw red drawer when trout is reflexive.
understand "raw/red warder drawer" as raw red drawer when trout is reflexive.
understand "red warder drawer" as raw red drawer when trout is reflexive.
understand "raw red warder drawer" as raw red drawer when trout is reflexive.

understand "reward drawer" as raw red drawer when trout is reflexive.
understand "raw/red reward drawer" as raw red drawer when trout is reflexive.
understand "red reward drawer" as raw red drawer when trout is reflexive.
understand "raw red reward drawer" as raw red drawer when trout is reflexive.

to say rew-war: say "[if trout is reflexive]warder[else]reward[end if]"

check putting on raw red drawer: say "No. Aunt Tuna keeps her place tidy." instead; [??]

section dent

the dent is part of the raw red drawer. the dent is LLPish and vanishing. description is "It'd probably take the right sort of futzing to get rid of."

a-text of dent is "RYRR". b-text of dent is "RGPR". parse-text of dent is "UNIQUE". dent is any-spoilable.

section tending

tending is an action applying to one thing.

understand the command "tend" as something new.

understand "tend [something]" as tending.

does the player mean tending the dent: it is very likely.

carry out tending:
	if noun is not dent, say "You're not sure how to tend that." instead;
	try fliptoing dent instead;

chapter wipes

after choosing notable locale objects when player is in Lean Lane:
	if wipes are in Lean Lane, set locale priority of wipes to 0;

some wipes are plural-named and reflexive and LLPish. some wipes are in Lean Lane. description of wipes is "[first custom style]I-SPEW[r] wipes is written in red on them.".

a-text of wipes is "RRYRY". b-text of wipes is "RRYRY". parse-text of wipes is "x[sp]x[sp]-[sp]x[sp]-".

check taking the wipes: say "Aunt Tuna asks if you are offering to help clean the house. You get the hint and pull your hand back. But maybe if you were quicker, you could take them." instead;

section swipeing

swipeing is an action applying to one thing.

understand the command "swipe" as something new.

understand "swipe [something]" as swipeing.

does the player mean swipeing the wipes: it is likely.

carry out swipeing:
	if noun is wipes:
		if player has wipes, say "Better to swipe the wipes across something dirty[if lance is touchable]--hmm, there's that lance, there[end if]." instead;
		try fliptoing wipes instead;
	if noun is a person, say "Whether pickpocketing or attacking something living...that's not cool!" instead;
	say "You don't need to take that so quickly.";
	try taking noun instead;

book Lapsin' Plains

Lapsin Plains is north of Anger Range. Lapsin Plains is in oyster. "Boy, it's desolate here! [if span pans are touchable]Span pans[knob-link] guard your way into Shut huts[else]Shut huts lie thus here, and you can go inside[end if][if fragments are touchable]. You see debris from a crate[end if][if bogus-plains is reflexive], and you have this weird urge to say something, even with nobody around[end if]. Sloppy polyps make travel inadvisable everywhere except past [if pans are in Lapsin Plains]the pans[else]where the pans were[end if] and back south.". roomnud of Lapsin Plains is table of Lapsin' Plains nudges. printed name of Lapsin Plains is "Lapsin['] Plains".

chapter traceing

traceing is an action applying to one thing.

understand the command "trace" as something new.

understand "trace" as traceing.
understand "trace [thing]" as traceing.

does the player mean traceing the crate: it is very likely.

to trac-trace-nag: d "[b]TRAC[r] is used to trace, since [b]TRACE[r] is verb you [if bogus-trace is moot]figured[else]must figure out[end if] [if mrlp is not oyster]elsewhere[else if player is not in lapsin plains]somewhere near[end if].";

rule for supplying a missing noun when traceing:
	trac-trace-nag;

carry out traceing:
	trac-trace-nag;
	if noun is not crate, say "[reject]" instead;
	if bogus-trace is moot, say "You already did that. If you retrace, you might get lost at a terrace." instead;
	try fliptoing bogus-trace instead;

check scaning crate: if bogus-trace is in Lapsin Plains, try scaning bogus-trace instead;

check opening span pans: try going inside instead;

check going inside when player is in Lapsin Plains:
	if crate is reflexive, say "As you go for the door, you [one of]feel[or]remember[stopping] something hitting you in the [one of]back[or]head[or]leg[or]kidney[or]foot[or]patookus[or]appendix[in random order]. It's not particularly harmful, but it's distracting enough that you won't be able to [if knob is touchable]smack the door around the right way[else]get through the door[end if] until you reckon about that conker." instead;
	if skis are not moot, say "Those skis block the door pretty handily." instead;
	if knob is not moot, say "The knob seems stuck--and attached to the pans." instead;
	if span pans are in Lapsin Plains, say "The span pans still block your way, but it should be a breeze to get by them. No, that's not quite it. A cinch? No..." instead;
	if Shuttle Hutlets is unvisited:
		say "You've made it past the pans but have a new problem. You need a hut in the circle of huts. But how to identify it? Disturbing a resident could be troublesome. They are in all shapes and sizes. Hmm, a hut, a hut...[wfak][paragraph break]Wait! Maybe it's this one, or...[wfak][paragraph break]That one! A hut shaped like Utah! Of course! You'd recognize that rectangle with a rectangle bitten out of one corner anywhere. You feel slightly...haut.";
	else:
		say "You go back into a hut shaped like Utah."

chapter sloppy polyps

the sloppy polyps are plural-named bounding boring scenery in Lapsin Plains. description of sloppy polyps is "Maybe the polyps are holding the plains together, but crossing them would be inadvisable. You can guess why.". bore-text is "It's more likely the sloppy polyps would do something with you instead of the other way around. You don't need to go beyond.".

bogus-trace is vanishing privately-named scenery in Lapsin Plains. bogus-trace is undesc. printed name of bogus-trace is "wherever the crate is coming from"

understand "bogus-trace" as bogus-trace when debug-state is true.

a-text of bogus-trace is "RRYRY". b-text of bogus-trace is "RPGRG". parse-text of bogus-trace is "UNIQUE". bogus-trace is parse-spoilable.

does the player mean opening the span pans: it is likely.

chapter crate

the crate is reflexive boring scenery in Lapsin Plains. description of the crate is "[if crate is reflexed]You can only see fragments of what it was, and they're not worth paying attention to[else]You can't see the crate but you know it, or one just like it, is about to be thrown at you. Crates are a dime a dozen for any bad guys, so that could go on for a while[end if].". bore-text of crate is "You don't need to fiddle randomly with the debris.". bore-check of crate is bore-crate rule.

this is the bore-crate rule:
	if current action is traceing, now boring-exception is true;

a-text of crate is "RYYRR". b-text of crate is "RYGRR". parse-text of crate is "x[sp]E[sp]A[sp]x[sp]x". crate is parse-spoilable.

understand "debris" and "crates" as crate.

section fragments

fragments are plural-named scenery. "Rotten brown fragments. Annoying and gross, but not harmful. They seem to be from a crate."

check taking the fragments: say "Eww. You would rather trace where they came from." instead;

chapter shut huts

the shut huts are plural-named scenery in Lapsin Plains. "They're shaped like a big ol['] upended tush.". understand "tush" and "hut" as shut huts.

check taking shut huts: try going inside instead;

check entering huts: try going inside instead;

after printing the locale description for Lapsin Plains when Lapsin Plains is unvisited:
	say "You hear splintering and notice a crate that fell near you. Someone or something doesn't like you here.";
	now fragments are in Lapsin Plains;

chapter skis

the skis are a plural-named flippable thing in Lapsin Plains. the skis are fixed in place. "Skis criss-cross over the pans, blocking you from entry."

a-text of skis is "RYRR". b-text of skis is "RYRP". parse-text of skis is "UNIQUE". skis are any-spoilable.

to say ski-la:
	if skis are moot:
		say ", and you already nailed that";

description of skis is "They're [one of][b]SISK[r] brand (of course) and[or][stopping] criss-cross over the span pans. You won't make it through without getting rid of them."

the skis are vanishing.

check taking skis: say "They're wedged to the door right now. The more you force them, the more they seem to pull away. But how to be nice to skis?" instead;

chapter splaining

bogus-plains is privately-named LLPish reflexive scenery in Lapsin Plains. understand "plains" as bogus-plains when player is in Lapsin Plains and debug-state is true and bogus-plains are not moot. printed name is "all around the plains". description of bogus-plains is "The plains would be bigger except for the sloppy polyps."

understand "bp" as bogus-plains when debug-state is true.

a-text of bogus-plains is "RRRYYR". b-text of bogus-plains is "RRRY??". parse-text of bogus-plains is "x[sp]x[sp]x[sp]A[sp]?[sp]?". bogus-plains is parse-spoilable.

chapter knob

to say knob-link: say "[if knob is in Lapsin Plains], linked by a knob,[end if]"

does the player mean bonking the knob: it is very likely.

the knob is vanishing scenery in Lapsin Plains. the knob is flippable and vanishing. description of knob is "It's just a doorknob, though you can imagine it saying 'Noob! Dork!' You'd just love to give it a good effective smack."

understand "doorknob" as knob.

a-text of knob is "RYRR". b-text of knob is "RYRR". parse-text of knob is "x[sp]O[sp]x[sp]x". knob is any-spoilable.

does the player mean bonking the knob: it is very likely.

section bonking

bonking is an action applying to one thing.

understand the command "bonk [something]" as something new.

understand "bonk [something]" as bonking.

bonkies is a truth state that varies.

carry out bonking:
	if location of player is not Lapsin Plains, say "[reject]" instead;
	if noun is door:
		say "I'll assume you meant the knob instead...";
		try bonking the knob instead;
	if noun is not knob:
		d "bonk to attack.";
		try attacking noun instead;
	try fliptoing knob instead;

chapter span pans

the span pans are plural-named vanishing scenery in Lapsin Plains. "They're squarish, so you can't scootch under them, and they're too sturdy to push aside directly. However, the red writing of who created them may provide a clue.[paragraph break][if skis are in Lapsin Plains and knob is in Lapsin Plains]Skis and a knob hold the pans together[else if skis are in Lapsin Plains]Skis crisscross over the pans[else]A knob still holds the pans together[else]You got rid of the knob and skis, but the pans are still in the way[end if]." [bold-ok]

check scaning span pans:
	if knob is moot and skis are moot, continue the action;
	say "The settler gives weird readouts depending on if you go over [if knob is in Lapsin Plains and skis are in Lapsin Plains]the knob, skis or pans[else if knob is in Lapsin Plains]the knob or pans[else]the skis or pans[end if], but when you focus on the skis, this is what you get:[paragraph break]";

to say pan-block:
	if knob is in Lapsin Plains and skis are in Lapsin Plains:
		say "[one of]skis and knob[or]knob and skis[at random]";
	else if knob is in Lapsin Plains:
		say "knob";
	else:
		say "skis"

a-text of span pans is "RRYR". b-text of span pans is "?R?R". parse-text of span pans is "?[sp]x[sp]?[sp]P". span pans are any-spoilable.

understand "pan" and "snap pan" as span pans when player is in Lapsin Plains and span pans are in Lapsin Plains.

after doing something with span pans:
	set the pronoun it to span pans;
	continue the action;

check taking span pans: say "Much too heavy." instead;

check entering span pans: try opening span pans instead;

chapter snaping

snaping is an action applying to nothing.

understand the command "snap" as something new.

understand "snap" as snaping.

carry out snaping:
	if player is in Lapsin Plains and span pans are touchable, try fliptoing span pans instead;
	say "This isn't the time or place to snap. Literally or figuratively.";
	the rule succeeds;

check opening the span pans:
	if knob is touchable, say "The pans are jammed together, and there's no key. Or keyhole under the knob[one of]. And no, there's no mat to look under anywhere for a key. Just FYI[or][stopping]." instead;

book Shuttle Hutlets

to say mr-miss: say "[if player is male]Mr.[run paragraph on][else]Miss[end if]";

to say heepy: say "[if waste is touchable]waste lying around, though you probably don't need to expend the physical effort to tidy it up unless you want to be [mr-miss] Perfect[else if heaps are reflexive]ugly looking heaps, though you may not care about aesthetics[else]the heaps you beautified[end if]"

Shuttle Hutlets is inside of Lapsin Plains. It is in Oyster. it is innie. "[one of]Man! This hut was much bigger than you expected. It's so big, you probably could store a plane in here. Not that it would be useful or desirable to drag one in[or]You're, [uaah]. A big one[stopping]. [if digger is off-stage]You squint through the relative lack of light and notice some random stuff[else]Looks like you got most of the useful stuff from here[end if][if heaps are touchable or waste is touchable]. You see [heepy][end if]. You can only go back outside.". roomnud of Shuttle Hutlets is table of Shuttle Hutlets nudges.

understand "hut" and "huts" and "hutlet" as Shuttle Hutlets.

to say uaah:
	say "[one of]uh, at[or]at, uh,[in random order] a hut".

chapter prod

the prod is a thing. description is "It's a corroded decor-rod--nah, just a prod. But it's rather thick and not uniformly smooth. It reminds you of one of those umbrellas you can't open up until you figure how by accident. One of those deals that are both really easy and not easy at all at the same time.[paragraph break]So you'll probably have to do something that'll feel obvious once you did it[if drop-try is true], something I already said wasn't usually useful[end if]."

does the player mean dropping the prod: it is very likely.

a-text of prod is "RRYR". b-text of prod is "RPGR". parse-text of prod is "UNIQUE". prod is any-spoilable.

check opening prod:
	say "You flash back to the door saying NOPE. You can't figure a way to open the prod, but maybe brute force will work, instead." instead;

check dropping prod:
	if word number 1 in the player's command is not "drop", say "That's not the right way to abuse the prod to open it." instead;
	try fliptoing rigged digger instead; [eg flipping the prod to the digger]

section rigged digger

the rigged digger is a thing. description is "It is, unsurprisingly, a product of Shovel Hovels. It looks suited to its advertised purpose.". understand "shovel" as digger.

to say dig-purpose:
	if sausage is moot and ruby is moot:
		say "You're finished with the digger.";
		continue the action;
	if ruby is moot:
		say "You managed to bury the ruby. On to the next bit.";
		continue the action;
	if player is in Rascal Craals and hint is in Rascal Craals:
		say "Now you've buried the ruby, you could maybe show what you've found. No point undoing what you did.";
		continue the action;
	say "You need to dig to some purpose";
	if player is in Anger Range and sausage is off-stage:
		say ", like uncovering the haunter";
	else if player is in Rascal Craals and player has ruby:
		say ", maybe to hide something here to frame the walleyes";
	else:
		say ", though maybe somewhere else";
	say "--and not just dig. Dig?";

chapter tubs

the tubs are a plural-named vanishing thing in Shuttle Hutlets. "Tubs lie here--two glued together by their tops--and perhaps there's something inside."

check taking tubs: say "Way too bulky. But actually not as heavy as you thought." instead;

description of tubs is "They seem glued together. Maybe there is a way to break them open to see if there's anything inside."

a-text of tubs is "RYRR". b-text of tubs is "RGRR". parse-text of tubs is "x[sp]U[sp]x[sp]x". tubs is any-spoilable.

section busting

busting is an action applying to one thing.

understand the command "bust" as something new.

understand "bust [something]" as busting.

does the player mean busting tubs: it is very likely.

carry out busting:
	if noun is tubs, try fliptoing tubs instead;
	try attacking noun instead;

chapter heaps

the heaps are reflexive plural-named LLPish scenery. "[if heaps are reflexed]You have beautified them. Yay, you.[else]They are just a mess. You're not obligated to beautify Yorpwald, but maybe something could be done to them.[end if]"

a-text of heaps is "RRYRY". b-text of heaps is "RRGPY". parse-text of heaps is "UNIQUE". heaps are parse-spoilable.

check searching the heaps:
	say "[if player has rigged digger]Don't get greedy[else]That'd be too boring. You might have more fun creating something with the heaps. You don't know why, but you just do[end if]." instead;

check taking heaps: say "[if heaps are reflexive]They're too big and amorphous to fit in the purse[else]Alas, there is no art teacher nearby to show them to[end if]." instead;

section shapeing

shapeing is an action applying to one thing.

understand the command "shape" as something new.

understand "shape [something]" as shapeing.
understand "shape" as shapeing.

does the player mean shapeing heaps: it is very likely.

carry out shapeing:
	if noun is heaps, try fliptoing heaps instead;
	say "[reject]" instead;
	the rule succeeds.

chapter waste

the waste is vanishing LLPish scenery. "It'd take strength and effort to move or pick through.".

check taking waste: say "Waste of inventory space. Even with the purse." instead;

a-text of waste is "RRYYR". b-text of waste is "RRYYR". parse-text of waste is "x[sp]x[sp]-[sp]-[sp]x".

chapter lance

the clean lance is an LLPish reflexive thing. description of lance is "[if lance is reflexed]Clean and ready for righteous smiting[else]Too grimy and dirty[end if].". "A lance lies here, too dirty and gross to pick up."

printed name of lance is "[if lance is reflexed]clean [end if]lance"

a-text of lance is "RRYYR". b-text of lance is "RRYYR". parse-text of lance is "x[sp]x[sp]-[sp]-[sp]x".

check taking lance when player does not have lance:	say "It's too icky." instead;

section cleaning

cleaning is an action applying to one thing.

understand the command "clean" as something new.

understand "clean [something]" as cleaning.

does the player mean cleaning the lance: it is very likely.

does the player mean cleaning the player when player does not have lance: it is very likely;

carry out cleaning:
	if noun is the player, say "You are morally and physically okay." instead;
	if noun is lance, try fliptoing lance instead;
	if player does not have wipes:
		say "You have nothing to clean [if noun is lance]the lance[else]anything[end if] with.";
		if noun is lance, preef lance;
		the rule succeeds;
	if noun is waste, say "The wipes won't begin to clear away the waste. You need good old fashioned physical effort." instead;
	if noun is not lance, say "You don't need to clean that." instead;

chapter shadier airshed

the shadier airshed is bounding boring scenery in Shuttle Hutlets. description of shadier airshed is "The shadier airshed surrounds about half of the Shuttle Hutlets. It doesn't look like there's any way in, and even if there were, you don't know what you'd do there.". bore-text of shadier airshed is "You can't, and don't need to, do anything with the shadier airshed."

book Sclerous Closures

Sclerous Closures is a room in oyster. Sclerous Closures is west of Anger Range. "Arches lead north to [if Horned Hedron is unvisited]what could be [end if]the Horned Hedron[if Achers Chaser Arches is reflexed], but you already searched them[else]. They could maybe also be called Chaser Arches since there are so many hidden places you could ambush someone from[end if][if Achers Chaser Arches is reflexive and sardine is moot] or hide yourself, or things[end if].[paragraph break]You can go back east to Anger Range, too[if sardine is moot], as well as north[hedron-if-v][end if]. A sign labeled OH NERD HERD NO 'welcomes' you to the Hedron, and you see a handsome sand home beyond the sclerous closures that block the way south and west.". roomnud of Sclerous Closures is table of Sclerous Closures nudges.

check going north in Sclerous Closures: if sardine is in Sclerous Closures, say "'Sop, no snoop,' says the sandier sardine, pulling you back." instead;

check going in Sclerous Closures:
	if noun is inside, try going north instead;

chapter scenery

section handsome sandhome

the handsome sand home is bounding boring scenery in Sclerous Closures. description of handsome sand home is "It's definitely not mean-shod. But you probably don't want to disturb a private residence.". bore-text of handsome sand home is "There's not much to do with the handsome sand home.". bore-check is the bore-handsome-sand-home rule.

this is the bore-handsome-sand-home rule:
	if current action is entering, try going south instead;

to say hedron-if-v: if Horned Hedron is visited, say " to the Horned Hedron"

section OH NERD HERD NO

OH NERD HERD NO is boring scenery in Sclerous Closures. "OH NERD HERD NO covers the front of the Horned Hedron. I suppose it's not meant to be welcoming.". bore-text of OH NERD HERD NO is "Doing anything with or to a 'welcoming' message isn't constructive.". bore-check of OH NERD HERD NO is bore-onho rule.

understand "horned/hedron" and "horned hedron" as OH NERD HERD NO. [this is a potentially bad hack to redirect conversation to the hedron, because the game doesn't see the hedron as a topic of conversation]

this is the bore-onho rule:
	if current action is entering, try going north instead;

chapter Achers Chaser Arches

the Achers Chaser Arches are plural-named reflexive scenery in Sclerous Closures. description of Achers Chaser Arches is "[if Achers Chaser Arches is reflexed]You already searched the arches and found something[else]A quick examination turns up nothing, but maybe if you were more methodical, something might turn up[end if].". printed name is "Achers['] Chaser Arches".

check taking Achers Chaser Arches: say "[if Achers Chaser Arches are reflexed]You got enough from the arches[else]You might find something in there. How to do that without taking them[end if]." instead;

a-text of Achers Chaser Arches is "RYYRRR". b-text of Achers Chaser Arches is "RY?RRR". parse-text of Achers Chaser Arches is "x[sp]-[sp]-[sp]x[sp]x[sp]x". achers chaser arches is parse-spoilable.

does the player mean searching the Achers Chaser Arches: it is very likely.

check searching Achers Chaser Arches:
	if sardine is in Sclerous Closures:
		say "A snider near-dis from the sardine keeps you in check. You'll need to get rid of him to have a serious look.";
		preef Achers Chaser Arches instead;
	if the player's command includes "search":
		try fliptoing Achers Chaser Arches; [?? if something is flipto'd, it should become unfigured, or we should have error checking]
		now Achers Chaser Arches are unfigured;
		the rule succeeds;
	say "[if Achers Chaser Arches are reflexed]You already searched, and there's nothing else[else]No, that is not quite the way to look through the arches[end if]." instead;

chapter sandier sardine

The sandier sardine is a person in Sclerous Closures. description is "He keeps putting his hands to his ears every so often, as if to avoid sudden noise. The right one might set him off.". "A sandier sardine waits nervously here. He seems armed, so you probably can't go north while he's still around."

check scaning sardine: say "[one of]The sardine smirks a bit then comments he's glad he can't hear the worst of the infrared noises now that he's a bit older.[or]The sardine barely notices, this time.[stopping][line break]The settler didn't seem to light up when pointed at the sardine. Perhaps you don't need to do anything with him directly." instead;

book Horned Hedron

Horned Hedron is north of Sclerous Closures. Horned Hedron is in Oyster. Horned Hedron is innie. "[one of]Nothing to see here. It's an ominous nothing to see here, like a flower store or a restaurant that never has customers or even running water. [stopping]There're also some theses sheets tacked here. [if ol trap is in Horned Hedron]An ol['] trap blocks passage to[else]A portal[end if] leads into the Horned Hedron proper[if ol trap is in Horned Hedron]. You probably can't just walk in, but all the same, there must be some way to disarm it[end if]. [if walleyes are moot]Collapsed old places[else]Rascal Craals[end if] lie west.". roomnud of Horned Hedron is table of Horned Hedron nudges.

check going west when player is in Horned Hedron: if sausage is moot, say "Collapsed old places are that way. No need to go back." instead;

thug-tell is a truth state that varies.

check going south when player is in Horned Hedron and ruby is moot:
	if thug-tell is false:
		say "You hear snickers as DIE THOU thugs are, presumably, digging up your ruby. If anyone or anything is looking for it, the weaselly walleyes will be the ones who have it. Or who are caught with it.";
		now thug-tell is true;

chapter theses sheets

the theses sheets are plural-named amusing boring scenery in Horned Hedron. description of theses sheets is "[one of]They could be a heists thesis except they're definitely not shiest. They're a MEAN FIST MANIFEST written in praise of Ulf-Theo The Foul ('Feh, lout!')[paragraph break]Beneath the main HIDEOUT! DIE THOU! slogan (OH, ENTER NOT HERE) one[or]Another[stopping] point reads: [randbla]". bore-text is "You can really only read the theses sheets for entertainment value.". bore-check is bore-sheets rule.

this is the bore-sheets rule:
	if current action is taking, say "No denial they're nailed." instead;
	if current action is scaning, say "The words on the theses can certainly be twisted into something worse, but the sheets cannot be changed for the better." instead;

chapter ol trap and portal

the ol trap is flippable scenery in Horned Hedron. printed name of ol trap is "ol['] trap".

a-text of ol trap is "RYRRYR". b-text of ol trap is "RYPPYR". parse-text of ol trap is "UNIQUE". trap is parse-spoilable.

check taking ol trap: say "That'd be a good way to spring it." instead;

description of ol trap is "Naturally, it is there to make you rot, pal, if you try to get by it. But there must be some mechanism to disarm it. Somewhere hidden in this room. You just need to look around right."

The weaselly walleyes are plural-named people in Horned Hedron. "[one of]Some weaselly walleyes whisper to each other and smirk at your every move[or]Those weaselly walleyes are still acting and looking all shifty[stopping]."

say-something is a number that varies. say-something is 0.

every turn when player is in Horned Hedron and walleyes are in Horned Hedron (this is the talking henchmen rule):
	if say-something is 3:
		now say-something is 0;
	if say-something is 0:
		say "[one of]One relates a story of framing someone else for burying a hidden treasure, then getting the treasure as a reward. Some sub-henchman who worries it'll happen to him is beaten up[or]One remarks he's heard there's buried treasure where you'd least expect it in the Horned Hedron--he speculates where that is, then says, oops, it's not least expected any more[or]One speculates on where the Horned Hedron's treasure stash might be[or]One sneers it'd be funny if the ruby turned up in some innocent person's home, and the haunter took them out[cycling].";
	increment say-something;

description of walleyes is "Oh, they are seedy, all right. But they seem more interested in laughing at you than attacking. They're probably just flunkies who will take a fall."

check going inside in Horned Hedron:
	if pol art portal is in Horned Hedron, try entering pol art portal instead;
	if ol trap is in Horned Hedron, try entering ol trap instead;
	say "There's nothing to enter at the moment." instead;

check entering ol trap: say "It's an obvious ol['] trap but likely an effective one." instead;

section pol art portal

the pol art portal is auxiliary scenery. description of pol art portal is "Despite the pol(itical) art on it prpoagandizing Elvira smashing her opponents, including a grossly inaccurate caricature of you, it looks safe. It doesn't crackle or anything. The only question is where it leads."

check going north in Horned Hedron:
	if pol art portal is in Horned Hedron, try entering pol art portal instead;
	say "No. You might set off an ol['] trap. Look around for a way to disarm it." instead;

check entering pol art portal:
	if ruby is not moot, say "Weaselly walleyes jump out and buffet you and throw you back into the main entrance of the Horned Hedron. 'Boss told us not to let you air-breathers in. Even with a gift. But we'll be watching you.' They run back out of view." instead;
	if walleyes are in Horned Hedron, say "Not with those walleyes waiting and watching." instead;
	if gleaner-viewed is true:
		say "You make your way [if Tenfold Teflond Den Loft is visited]back to the Tenfold Teflon'd Den Loft[else]through the portal maze, guided by what you remember from the gleaner. You wind up somewhere important and final-looking[end if].";
		move player to Tenfold Teflond Den Loft instead;
	else:
		say "You try to make your way through the Horned Hedron, but you eventually wind up in an[one of][or]other (?)[run paragraph on][stopping] end den.[paragraph break]";
		move player to End Den instead;

section patroling (verb)

patroling is an action applying to nothing.

understand the command "patrol" as something new.

understand "patrol" as patroling.

carry out patroling:
	if player is in Horned Hedron:
		if ol trap is touchable, try fliptoing pol art portal instead;
		say "You already patrolled." instead;
	if Horned Hedron is visited:
		if walleyes are moot and ol trap is in Horned Hedron and mrlp is oyster:
			say "You suddenly realize how to search out the ol['] trap in the Horned Hedron.";
			move player to Horned Hedron, without printing a room description;
			try fliptoing pol art portal instead;
		if walleyes are in Horned Hedron and mrlp is oyster:
			say "That's a good idea. Maybe you can search the Horned Hedron once if the walleyes are gone.";
			preef ol trap;
			do nothing instead;
	say "You pace around for a bit, but nothing happens. Maybe this isn't quite the place to look[if ol trap is moot]--it already worked in the Horned Hedron, and once is enough[end if]." instead;
	the rule succeeds;

book Rascal Craals

Rascal Craals is west of Horned Hedron. "The Rascal Craals, where the Hedron workers live, are lined up nice and scalar[if ruby is not moot]. This would be a good place to hide something, because nobody who fears for their life would want to go here[else]. You [one of]still [or][stopping]see the thin hint you marked in the ground with your rigged digger[end if]. A round bay boundary blocks all ways out except back east.". Rascal Craals is in Oyster. Rascal Craals is innie. roomnud of Rascal Craals is table of Rascal Craals nudges.

chapter scenery

section round bay boundary

the round bay boundary is bounding boring scenery in Rascal Craals. description of round bay boundary is "It's pretty scenic, and it's also big enough to keeping you from going any way except back east.". bore-text of round bay boundary is "The boundary is nice to look at, but you don't have to do anything with it."

chapter thin hint

the thin hint is boring scenery. description of thin hint is "The thin hint marks where you buried the ruby. You will be able to find it if you leave and come back.". bore-text of thin hint is "There's nothing to do with that hint except point it out to someone else, later.". bore-check of thin hint is bore-thin-hint rule.

this is the bore-thin-hint rule:
	if current action is taking, say "You don't need to take a hint you yourself dropped." instead;

chapter burying

burying is an action applying to one thing.

understand the command "bury [something]" as something new.

understand "bury [something]" as burying.
understand "bury" as burying.

does the player mean burying the ruby: it is very likely;

rule for supplying a missing noun when burying:
	if player has ruby:
		now noun is ruby;
	else:
		now noun is the player;

the ruby is a vanishing thing. description of ruby is "[one of]See ruby, rub eyes. [or][stopping]You feel heat run from you as you see the words [first custom style]HAUNTER[r] on it. It's somehow a slightly different red from the ruby, but still distinctive and familiar."

a-text of ruby is "RYRO". b-text of ruby is "RGRB". parse-text of ruby is "UNIQUE". ruby is any-spoilable.

carry out burying:
	if ruby is moot, say "You half forgot where you dug the ruby. You're not sure if you want it back." instead;
	if noun is not ruby, say "That's not something worth BURYing." instead;
	if player does not have ruby, say "Nothing you have is valuable enough to bury." instead;
	if player is in Anger Range, say "That would reunite the haunter with the ruby, but you might be a prime suspect for taking it. Maybe you can use the haunter to take out an enemy." instead;
	if player is in Horned Hedron, say "The walleyes would find the ruby and take it, and you'd be out--but maybe you could frame them for its theft by burying the ruby somewhere near." instead;
	if player is not in Rascal Craals, say "You don't need to sock away wealth. You have enough. But that ruby--you've heard of it before. Maybe this is not the right place. If you want to hide the ruby, hide it somewhere hidden." instead;
	now ruby is in Rascal Craals; [necessary for flipping to work]
	try fliptoing thin hint;
	the rule succeeds;

book End Den

End Den is an innie sideroom in Oyster. "You look around, but this probably isn't where you're supposed to be. You can probably go back out[if player has gleaner]. Or maybe you have something that could get you to the right place[end if].". roomnud of End Den is table of End Den nudges. missed-text of End Den is "a useless dead-end room if you'd entered the portal without examining the enlarged gleaner".

exits-text of end den is "You can go back outside to the Horned Hedron.".

check exiting in End Den:
	say "You find your way back to the Horned Hedron entrance.";
	if sausage is touchable, move sausage to Horned Hedron;
	now player is in Horned Hedron instead;

book Plasm Lamps

Plasm Lamps is an innie sideroom in oyster. "It's a bit disorienting here, but your lance helps you feel like going SPLAM! SPLAM! with it.". roomnud of Plasm Lamps is table of Plasm Lamps nudges. missed-text of Plasm Lamps is "a room behind the Templar Ramplet".

bogus-psalm is privately-named reflexive LLPish scenery in Plasm Lamps. description of bogus-psalm is "They light this murky area, [if bogus-psalm are reflexed]and you managed to be clever around them[else]but maybe they present another challenge[end if].". printed name of bogus-psalm is "area around".

a-text of bogus-psalm is "RRYRR". b-text of bogus-psalm is "?R?R?". parse-text of bogus-psalm is "?[sp]x[sp]?[sp]x[sp]?". bogus-psalm is parse-spoilable.

plasm-warn is a truth state that varies.

check going outside in Plasm Lamps: say "C'mon. The natant ant isn't meant to be tough. [if bogus-psalm are reflexed]You already did the bonus preparation[else]Not as tough as the other optional point here[end if]." instead;

after looking in Plasm Lamps:
	it-him-her the ant;
	continue the action;

the natant ant is a terse vanishing animal in Plasm Lamps. "Attn: an ant! It is swimming about in the plasm on the floor, making it, err, [b]NATANT[r] as well. It seems more off-putting than anything, but just to be sure, your lance seems to hold it at bay.". description of ant is "If you look at it one way, it's a light brown--no, that's not it--but another way, it's a bright red, a simulacrum of the legendary Tar Rat Art. You're glad you have that lance to do something simple to fend it off, or maybe even run it off[if bogus-psalm are reflexed]. But maybe you can show something for style points, first[end if]."

check taking natant ant: say "The action for dealing with the ant is even shorter and easier than [b]TAKE[r]. But not [b]GET[r]." instead;

a-text of natant ant is "RYR". b-text of natant ant is "R?R". parse-text of natant ant is "UNIQUE". ant is any-spoilable.

chapter taning

taning is an action applying to one thing.

understand the command "tan" as something new.

understand "tan [something]" as taning.
understand "tan" as taning.

rule for supplying a missing noun when taning:
	if location of player is Plasm Lamps, now noun is natant ant;

does the player mean taning the natant ant: it is very likely;

carry out taning:
	if noun is not natant ant, try attacking noun instead;
	say "Whack! Pow! 'Scum ant! Can...must...must tan mutants!' After your glancing clanging, the lance turns into a red-hot hate rod and breaks in the process as the ant runs away. You completed a mini-SOS mission!";
	if bogus-psalm are reflexive:
		say "[line break]And yet... you feel you missed a style point. Perhaps the proper display before thwacking the ant, suitable to the locale.";
		poss-d;
	reg-inc; [this is an optional point, but it was already predestined by you entering]
	moot ant;
	moot lance;
	now Plasm Lamps is shunned;
	now player is in Tenfold Teflond Den Loft instead;

book Den Loft

Tenfold Teflond Den Loft is an innie room in Oyster. "[one of]You're at the center of what's really a nice mob combine, all things considered. I mean, the mob isn't nice, but it's obviously a spendy spy den. It's unclear if it's above or below ground, it's so well protected a city-fail facility. [or][stopping]You can exit or go out to leave this place, though it's probably better just to find a way to mess up the whole Horned Hedron.[paragraph break]A huge dialer takes up the bulk of the wall--it seems to have settings to tell it what to do[if yapper is not in Tenfold Teflond Den Loft], and there's a lever to the side, too[end if].". roomnud of den loft is table of den loft nudges. printed name is "Tenfold Teflon'd Den Loft".

exits-text of Tenfold Teflond Den Loft is "You can go back outside, though you can also finish the job back here."

understand "loft den" as Tenfold Teflond Den Loft.

check going outside in Tenfold Teflond Den Loft: if min-score of oyster is poss-score of oyster, say "You can't leave now. You're so close. There's nothing left to do elsewhere." instead;

chapter papery yapper

the papery yapper is a vanishing neuter person in Tenfold Teflond Den Loft. "A papery yapper, full of sharp edges that would bleed you to death, blocks access to the dialer. It is wearing a stupid paper necklace.". description of papery yapper is "It looks precisely folded, but also shifty, like it could be bribed. But you probably can't just bribe it directly."

after printing the locale description when player is in Tenfold Teflond Den Loft:
	if yapper is in Tenfold Teflond Den Loft, it-him-her yapper;
	if yapper is moot and wipes are moot and templar ramplet is off-stage:
		move templar ramplet to Tenfold Teflond Den Loft;
		say "This time around, you notice something you didn't before. A templar ramplet leading off to the side!";
	continue the action;

a-text of papery yapper is "RRYRYO". b-text of papery yapper is "?RY?Y?". parse-text of papery yapper is "?[sp]x[sp]E[sp]?[sp]A[sp]?". papery yapper is parse-spoilable.

section stupid paper necklace

the stupid paper necklace is a cluey thing. description is "It's red and readable and not very gangsta, but it shows a likely weakness for bling.". bore-text is "The necklace isn't worth meddling with beyond maybe giving an odd clue.".

the papery yapper wears the stupid paper necklace.

check giving the gleaner to the papery yapper:
	say "'Nonsense! I would love one of those, but I couldn't take such an overt bribe.' You're not sure if it winked." instead;

check giving something to the papery yapper:
	say "'Bribe? Sigh. Gibberish. Maybe we could reclassify the donation with creative financing[if noun is not gleaner], and make it a better donation, too[end if].' You're not sure if he rolled his eyes." instead;

section notcrime intercom

the NotCrime intercom is scenery in Tenfold Teflond Den Loft. "The NotCrime intercom, the let-in-intel device of choice for the shadier denizens of Yorpwald. It probably works with the dialer in some way."

Include (-
	has transparent talkable
-) when defining intercom.

check taking intercom: say "You'd probably get a nasty shock and set off an alarm." instead;

the jumble is a boring thing. it is part of the dialer. description of jumble is "[if bogus-derail is touchable][b]DIALER[r][else][b]DERAIL[r][end if] seems to indicate its current task.". bore-text is "The lettering jumble looks like it can be shifted around to things you can do."

check scaning jumble: try scaning dialer instead;

chapter dialer

the dialer is boring scenery in Tenfold Teflond Den Loft. "It's a big intimidating important looking thing. You probably won't understand details of how it works. A jumble on the dialer spells out, conveniently, [if bogus-derail is touchable][b]DIALER[r][else][b]DERAIL[r][end if]. [if pins are reflexive and pins are touchable]You jammed it, somehow--some pins look a bit stuck[else]It looks like you could shift the dialer[shift-dialer][end if]. You also see some red writing, in small print.". bore-text of dialer is "There's probably something unusual to do with the dialer. It looks versatile.". bore-check of dialer is bore-talk-thru rule.

to say shift-dialer:
	if bogus-derail is moot, say " again"

Include (-
	has transparent talkable
-) when defining dialer.

check taking dialer: try attacking dialer instead;

check scaning dialer:
	if bogus-derail is touchable, try scaning bogus-derail instead;
	if bogus-redial is touchable, try scaning bogus-redial instead;
	if pins are touchable, try scaning pins instead;
	say "Nothing up with the dialer at the moment. There should be later, but not now." instead;

check objhinting dialer:
	if papery yapper is touchable, say "You need to get the papery yapper out of the way before dealing with the dialer.";
	if bogus-derail is touchable, try objhinting bogus-derail instead;
	if pins are touchable, try objhinting pins instead;
	if bogus-redial is touchable, try objhinting bogus-redial instead;

section derailing

the bogus-derail is privately-named vanishing scenery in Tenfold Teflond Den Loft. bogus-derail is undesc. printed name of bogus-derail is "dialer".

a-text of bogus-derail is "RYRYYR". b-text of bogus-derail is "PYRYYR". parse-text of bogus-derail is "D[sp]-[sp]R[sp]-[sp]-[sp]L". bogus-derail is parse-spoilable.

section redialing

the bogus-redial is privately-named vanishing scenery. bogus-redial is undesc. printed name of bogus-redial is "repaired dialer".

a-text of bogus-redial is "RYRYYR". b-text of bogus-redial is "RYRYYR". parse-text of bogus-redial is "x[sp]-[sp]x[sp]-[sp]-[sp]x".

chapter lever

The lever is reflexive LLPish boring scenery. description of lever is "You're quite glad you found it, even if you're not sure how or why to pull it, yet.". bore-check is bore-lever rule. bore-text is "You're not sure what you can do with the lever, really[if lever is reflexed], and it doesn't seem as fun any more anyway.". [it's moved here after the yapper is gone]

a-text of lever is "RYRYR". b-text of lever is "RGPGR". parse-text of lever is "UNIQUE". lever is parse-spoilable.

this is the bore-lever rule:
	if current action is pushing or current action is pulling or current action is taking, say "You try to pull it, but it seems stuck. EVL-ER and EVL-ER, you muse to yourself. [if lever is reflexed]But you had your fun[else]Yet, there may be a way to have fun[end if]." instead; [??check pulling lever/check pushing lever]

check exiting in Tenfold Teflond Den Loft:
	say "You could finish things off now, but hey, you can always find your way back easily enough.";
	now player is in Horned Hedron instead;

chapter pins

[?? if player has pills then reg-inc]

some pins are vanishing boring plural-named scenery. "The pins cover the dialer. There's probably more than one way to get rid of them, but right now, they're blocking you from using it again. Or, in other words, from...wait for it...[paragraph break]PS'in.". bore-text of pins is "You need to get the pins out of the way, but don't worry, it's pretty simple.". bore-check of pins is bore-pins rule. [bold-ok]

this is the bore-pins rule:
	if current action is sniping or current action is spining, now boring-exception is true;
	if current action is dropping, say "Only twenty-four combinations. Two work. The pin(s) will drop." instead;
	if current action is taking, say "They'd poke you nastily. Give you nips and all." instead;

a-text of pins is "RRYR". b-text of pins is "RRYR". parse-text of pins is "x[sp]x[sp]I[sp]x". pins are any-spoilable.

section sniping

sniping is an action applying to one thing.

understand the command "snip" as something new.

understand "snip" as sniping.
understand "snip [something]" as sniping.

rule for supplying a missing noun when sniping:
	if pins are not touchable:
		now the noun is the player;
	else:
		now the noun is the pins;

does the player mean sniping the pins: it is very likely;

carry out sniping:
	if pins are touchable:
		if pins are reflexed, say "You've dealt with the pins. Now to mess with the dialer, again." instead;
		if noun is pins, say "You don't have anything with a small enough blade to cut the pins. And even then, they'd still be in the way of operating the dial again. But that has to be close to what you need to do." instead;
	say "There's no scissors or anything in this game. Sorry." instead;

section spining

spining is an action applying to one thing.

understand the command "spin" as something new.

understand "spin" as spining.
understand "spin [something]" as spining.

does the player mean spining the pins: it is very likely.

carry out spining:
	if noun is pins, try fliptoing noun instead;
	say "You need to spin letters around, but spinning things around isn't useful except maybe in one special case[if pins are moot]. Which you found[end if]." instead;

chapter templar ramplet

the templar ramplet is vanishing boring LLPish scenery. description of templar ramplet is "The templar ramplet isn't something to be approached lightly. You sense you need the right way to get on it.". bore-text of templar ramplet is "Hmm. You need to make a scene to cross the templar ramplet.". bore-check of templar ramplet is bore-ramplet rule.

this is the bore-ramplet rule:
	if current action is entering or current action is climbing, say "Too tame a way to get on the templar ramplet." instead;
	if current action is trampleing, now boring-exception is true;

a-text of templar ramplet is "RRYRRRY". b-text of templar ramplet is "?RYRRRY". parse-text of templar ramplet is "x[sp]x[sp]-[sp]x[sp]x[sp]x[sp]-".

section trampleing

trampleing is an action applying to one thing.

understand the command "trample" as something new.

understand "trample [thing]" as trampleing.

does the player mean trampleing the templar ramplet: it is very likely.

carry out trampleing:
	if templar ramplet is not touchable, say "You have no need to trample anyone or anything here." instead;
	if noun is not templar ramplet, say "Wrong thing to trample." instead;
	if wipes are not moot, say "You should've cleaned the lance before seeing the ramplet. That you don't is a BUG. I don't know what to do, but it's not story-critical. Sorry." instead;
	try fliptoing templar ramplet instead;

check entering templar ramplet: say "You need to enter the right way." instead;

volume towers

[this is the biggest area of the game, though Oyster has almost as many lines. Guardians are a sort of specific person, as are picaros. Because picaros are only in the Loftier Trefoil, they will be in that section.]

definition: a thing (called th) is noexit-LLPish:
	if th is bogus-rousted or th is bogus-dandier, yes;
	no;

book towers specific verbs

chapter toasting

xrayvision is a truth state that varies.

check inserting into the Rosetta toaster:
	if xrayvision is true, say "You've already got some x-ray vision. So you can just [b]XRAY[r] whatever you want." instead;
	if noun is not a skansnak, say "That's not a toaster pastry." instead;
	if noun is strudel and noun is reflexive:
		say "You pause momentarily, wondering if you could've done something with the strudel to make it feel--well, yours. But you don't need style points.";
	now noun is heated;
	now xrayvision is true;
	say "[if xray-warn is false]Looking at yourself after eating the pastry, you see you can see what you'd want to be--stronger, slimmer, etc. You feel like you could look through something else to see what it really should be now. Just [b]XRAY[r] it[else]The x-ray vision comes back. Once again, you can [b]XRAY[r] what you want to[end if].";
	now xray-warn is true;
	if noun is strudel and strudel is reflexive, poss-d;
	pad-rec "xray";
	moot noun;
	do nothing instead;

toasting is an action applying to one thing.

understand the command "toast/heat/warm" as something new.

understand "toast [something]" and "heat [something]" and "warm [something]" as toasting.

carry out toasting:
	if noun is the player and toaster is touchable, say "That's not the way to get on a hot streak." instead;
	if player does not have the toaster:
		if toaster is touchable:
			try taking the toaster;
			if player does not have toaster, say "You can't get the toaster to do that." instead;
		else:
			say "You have no toasting device." instead;
	if noun is a guardian or noun is reflexive or noun is vanishing:
		if noun is strudel:
			do nothing;
		else:
			say "The correct usage is to toast something edible, and then you can xray something." instead;
	if noun is a person, say "The toaster is not a weapon. It's not that big, either." instead;
	try inserting the noun into the toaster;

chapter xraying

xraying is an action applying to one thing.

does the player mean xraying a guardian: it is very likely.

understand the command "xray/x-ray [something]" as something new.

understand "xray [something]" as xraying.
understand "x-ray [something]" as xraying.
understand "xray" as xraying.

definition: a thing (called th) is ambient-flip:
	if th is not touchable, no;
	if th is bogus-rousted or th is bogus-dandier, yes;
	no;

rule for supplying a missing noun when xraying or xring:
	if number of ambient-flip things is 1:
		say "Your x-ray vision seems to enlighten ... well, all around you.";
		now the noun is a random ambient-flip thing;
		continue the action;
	if player is in arid den:
		say "The settler gets a reading when you scan all around.";
		now the noun is bogus-dandier;
		continue the action;
	if number of flippable touchable things is 1:
		say "Because this is a vanishing cheat mechanism, and because some anagrams are only conditionally necessary, I'm going to force you to explicitly refer to [the random flippable touchable thing].";
	reject the player's command;

to say if-duck: if duck is not touchable, say "--but nothing [if Shaven Havens is visited]here [end if]seems to fit with [b]UNLOCKED[r]";

to say big-hint of (rayx - a thing) :
	if noun is lars eede or noun is elsa erde or noun is reeds ale:
		say "[b]RELEASED[r] or [b]RESEALED[r]";
		continue the action;
	repeat through table of towers anagrams:
		if the-from entry is rayx:
			say "[b][right-word entry in upper case][r]";
			if rayx is duck:
				say "--well, maybe the duck will help something become unlocked";
			continue the action;
	say "NOTHING--sorry, this is a bug/missed case, but it won't cost your x-ray vision.";
	now xray-bug-sorry is true;

xray-warn is a truth state that varies.

palace-warn is a truth state that varies.

xray-bug-sorry is a truth state that varies.

definition: a thing (called th) is xray-warnable:
	if th is LLPish, yes;
	if th is yurts, yes;
	if th is a white guardian, yes;
	no;

check xraying:
	if noun is crocus, say "The succor crocus reveals no molecular biological secrets. It is probably good as-is." instead;
	if noun is top opt pot, say "The top opt pot is sturdy. It can't be changed." instead;
	if noun is rayed and xraytrump is false:
		ital-say "you already xrayed this, so you're just remembering what it was...";
	else if xrayvision is false and xraytrump is false:
		say "You don't have x-ray vision now." instead;
	else if xraytrump is true:
		d "using x-ray trump on [noun].";
	if mrlp is not towers:
		if Topside Deposit is unvisited, say "[reject]" instead;
		say "That was for the towers. It doesn't work anywhere else because, well, different areas are different." instead;
	if noun is prefigured:
		choose row with the-from of noun in table of towers anagrams;
		say "You already remember the word [right-word entry in upper case]--which seems right, just a matter of getting other things right first. Maybe they already are." instead;
	if noun is thruhinted:
		choose row with the-from of noun in table of towers anagrams;
		say "You remember, from somewhere behind a fourth wall, figuring you could just say [right-word entry in upper case].";
		if scams is false, the rule succeeds;
		say "NOTE: [the noun] [if noun is plural-named]were[else]was[end if] thruhinted, but the 'scam' testing flag is on, so we disabled the fourth-wall nudge to see the hint we would've gotten.";
	if noun is the player, say "Even if you could, you might expose yourself to harmful rays and stuff." instead;
	if noun is agnostic:
		if Dinger is in Actionless Coastlines, try xraying Dinger instead;
		if agnostic is in Obscurest Subsector and atblock is in Obscurest Subsector, try xraying atblock instead;
	if noun is sled rut:
		if strudel is touchable, try xraying strudel instead;
		say "Without the strudel, you can't really see into the sled rut." instead;
	if noun is Dr Yow:
		if Dr Yow has been rowdy and Dr Yow has been wordy, say "You've done what you can with Dr. Yow. [he-she-c] can still be rowdy or wordy." instead;
		say "You realize Dr. Yow has a [if Dr Yow has been wordy]rowdy side, too[else if Dr Yow has been rowdy]wordy side, too[else]wordy and rowdy side that have been crushed by prison[end if].";
	if noun is bot boat:
		if turbos are reflexed and blaster is reflexed:
			if red wire is part of the bot boat, try xraying red wire instead;
			say "The bot boat and its parts appear as workable as it can be." instead;
		if t-or-b is reflexive, try xraying t-or-b instead;
		if blaster is reflexive, try xraying blaster instead;
		if turbos are reflexive, try xraying turbos instead;
	if noun is reflexed or noun is nonreflexive:
		repeat through hintobjstable of mrlp:
			if noun is hint-entry entry:
				if there is a parallel-entry entry:
					d "Mapping xraying from [noun] to [parallel-entry entry].";
					try xraying parallel-entry entry;
					the rule succeeds;
		say "Your x-ray vision doesn't seem to work. So you probably don't have to do anything, there. Maybe find something or someone else to x-ray." instead;
	if noun is palace:
		if palace-warn is false:
			now palace-warn is true;
			say "Boy! This is a big one. You are overwhelmed by the superlativeness of the way to describe the castle. You are pretty sure you can handle that word being spoiled. Well, I'm pretty sure you are pretty sure. uAre you pretty sure you can handle the spoiler?";
			if the player yes-consents:
				do nothing;
			else:
				say "You decide to be pretty sure you can figure it on your own, instead." instead;
	now xray-bug-sorry is false;
	if noun is xray-warnable:
		say "You blink a bit. You wonder if this would be the best way to use your x-ray vision. Do so anyway?";
		unless the player regex-prompt-consents:
			say "Okay. Save it for something else.";
			continue the action;
	if noun is guardian:
		say "Hmm. You bet you could get past if [the noun] were [big-hint of noun].";
	else if noun is picaro: [do I need this? Since picaros moved to start]
		say "Boy! [noun] might be less oppressive if he were [big-hint of noun].";
	else if noun is rayed:
		say "You remember you could still think [big-hint of noun]." instead;
	else:
		say "After a thoughtful gaze, you reckon [the noun] could [xray-verb of noun] [big-hint of noun].";
	if xray-bug-sorry is true:
		now xray-bug-sorry is false;
		continue the action;
	if xraytrump is false:
		if used-ray is false, poss-d;
		now used-ray is true;
	now noun is rayed;
	preef noun;
	if scams is false:
		now xrayvision is false;
		now undo-code is 2;
		prevent undo;
	else:
		d "Xray cheat retains x-ray vision.";
	the rule succeeds;

to say xray-verb of (th - a thing):
	if th is itster:
		say "make [the sitter]";
	else if th is anodyne:
		say "leave St. Teri";
	else:
		say "be"

used-ray is a truth state that varies.

xraytrump is a truth state that varies.

book all about guardians

section initalization

when play begins (this is the place guardians rule):
	repeat with myg running through guardians:
		if clue-text of myg is not empty, now myg is clueneedy;

book which room is how far

to decide which number is palace-let: [I could've defined a new variable but it's nice to have this in one place. This shows how many letters the settler gives.]
	let LP be location of player;
	if LP is Topside Deposit or LP is Outer Route, decide on 4;
	if LP is Scope Copse, decide on 5;
	if LP is Lost Lots or LP is Fringe Finger or LP is Leveraged Everglade or LP is Baldest Blasted Saltbed, decide on 6;
	if LP is Treading Gradient or LP is Obscurest Subsector or LP is Danger Garden or LP is Shaven Havens or LP is Anemic Cinema, decide on 7;
	if LP is Salted Deltas or LP is Artist Traits Strait, decide on 8;
	if LP is Actionless Coastlines, decide on 9;
	if LP is Rawest Waster Waters or LP is Mesprise Premises, decide on 10;
	if LP is Mislit Limits, decide on 11;
	decide on 2;

book drawing the map

to decide whether across-leak-lake:
	if Rawest Waster Waters is visited or Mislit Limits is visited, yes;
	no;

to decide whether can-see-map:
	if across-leak-lake, no;
	if Spec O Scope is unexamined, no;
	if mrlp is towers, yes;
	no.

tow-x-start is a number that varies. tow-x-start is 320.
tow-y-start is a number that varies. tow-y-start is 8.
tow-delta is a number that varies. tow-delta is 16.
square-from-center is a number that varies. square-from-center is 4.

after examining Spec O Scope (this is the specoscope draw rule):
	draw-my-loc;
	continue the action;

to draw-my-loc: [this draws a black square in your current location]
	let myx be 0;
	let myy be 0;
	draw-towers-map;
	repeat through table of towers x y locations:
		if location of player is my-loc entry:
			change current foreground-color to (R 0 G 0 B 0);
			now myx is tow-x-start + (tow-delta * my-x entry) - 2;
			now myy is tow-y-start + (tow-delta * my-y entry) - 2;
			draw a rectangle (current foreground-color) in current graphics window at myx by myy with size 5 by 5;

carry out looking when mrlp is towers (this is the towers YOU ARE HERE redraw rule):
	now location of player is visited;
	if can-see-map, draw-my-loc;
	continue the action;

to wipe-towers-map:
	if can-see-map:
		change current foreground-color to (R 255 G 255 B 255);
		let x-start be tow-x-start - square-from-center;
		let y-start be tow-y-start - square-from-center;
		draw a rectangle (current foreground-color) in current graphics window at x-start by y-start with size 1 + (2 * square-from-center) + (4 * tow-delta) by 1 + (2 * square-from-center) + (4 * tow-delta);

to draw-towers-map:
	let sqsz be (square-from-center * 2) + 1;
	let myx be 0;
	let myy be 0;
	repeat through table of towers x y locations:
		if my-loc entry is accessible:
			if my-loc entry is unvisited:
				change current foreground-color to (R 42 G 126 B 126);
			else:
				change current foreground-color to (R 42 G 210 B 42);
		else if my-loc entry is sideview:
			change current foreground-color to (R 168 G 168 B 42);
		else if my-loc entry is mightaswell:
			change current foreground-color to (R 120 G 120 B 120);
		else:
			change current foreground-color to (R 210 G 42 B 42);
		now myx is tow-x-start + (tow-delta * my-x entry) - square-from-center;
		now myy is tow-y-start + (tow-delta * my-y entry) - square-from-center;
		draw a rectangle (current foreground-color) in current graphics window at myx by myy with size sqsz by sqsz;
	repeat with myg running through guardians:
		if myg is bonker, next;
		unless myg gendermatches, next;
		if myg is moot:
			change current foreground-color to (R 42 G 210 B 42);
		else:
			change current foreground-color to (R 210 G 42 B 42);
		if myg is stinger: [ a special case ... this is the bonker's original gualoc/guadir but whether we can go east depends on if the stinger is blocking ]
			draw-line Obscurest Subsector and west;
			next;
		d "[myg] line-drawing: [gualoc of myg] [guadir of myg] has color [current foreground-color].";
		draw-line (gualoc of myg) and (guadir of myg);

to draw-line (lcc - a room) and (bd - a direction):
	choose row with my-loc of lcc in table of towers x y locations;
	let x-start be tow-x-start + (tow-delta * my-x entry);
	let y-start be tow-y-start + (tow-delta * my-y entry);
	let x-end be tow-x-start + (tow-delta * my-x entry);
	let y-end be tow-y-start + (tow-delta * my-y entry);
	if bd is north:
		decrease y-start by square-from-center;
		decrease y-end by (tow-delta - square-from-center) - 1;
	if bd is south:
		increase y-start by square-from-center + 1;
		increase y-end by (tow-delta - square-from-center);
	if bd is east:
		increase x-start by square-from-center + 1;
		increase x-end by (tow-delta - square-from-center);
	if bd is west:
		decrease x-start by square-from-center;
		decrease x-end by (tow-delta - square-from-center) - 1;
	linedraw (current foreground-color) in current graphics window from x-start by y-start to x-end by y-end with 1;
[To linedraw (hue - a number) in (win - a g-window) from (x1 - a number) by/x (y1 - a number) to (x2 - a number) by/x (y2 - a number) with (wgt - a number):]

table of towers x y locations [arranged n to s then w to e. Dourest Detours/Arid Den are not included, as that would draw something in an odd position.]
my-loc	my-x	my-y
Shaven Havens	1	0
Fringe Finger	0	1
Anemic Cinema	1	1
Salted Deltas	2	1
Actionless Coastlines	3	1
Baldest Blasted Saltbed	1	2
Treading Gradient	2	2
Artist Traits Strait	3	2
Outer Route	0	3
Scope Copse	1	3
Leveraged Everglade	2	3
Danger Garden	3	3
Obscurest Subsector	4	3
Topside Deposit	1	4
Lost Lots	3	4
Mislit Limits	4	0

book basic guardian work

definition: a guardian (called gu) is mas:
	if gu is lars eede, yes;
	if gu is hostile is he lot, yes;
	no;

definition: a guardian (called gu) is fem:
	if gu is elsa erde, yes;
	if gu is lois the hostile, yes;
	no;

to decide whether bad-gender-match of (myg - a guardian):
	if myg is mas and player is female, yes;
	if myg is fem and player is male, yes;
	no;

for writing a paragraph about a guardian (called gua):
	if gua is unripe ur pine or gua is Reeds Ale, continue the action;
	let so-far be 0;
	repeat with myg running through touchable not prevseen guardians:
		if bad-gender-match of myg, next;
		if so-far > 0, say "[line break]";
		guar-pro myg;
		say "[if so-far is 0]Oh, look[else if so-far is 1][line break]But there's more[else if so-far is 2][line break]And that's not all[else][line break]Man, it's busier than it should be here[end if]! [initial appearance of myg]";
		increment so-far;
		now myg is mentioned;
	if so-far > 0, say "[line break]";
	let psg be number of prevseen touchable guardians;
	let guasofar be 0;
	if psg > 0:
		say "You can [if number of prevseen guardians is 0]also [end if]still see ";
		repeat with myg running through prevseen touchable guardians:
			increment guasofar;
			guar-pro myg;
			say "[the myg] blocking passage [if gualoc of myg is location of player][guadir of myg][else][opposite of guadir of myg][end if]";
			if guasofar < psg - 1:
				say ", ";
			if guasofar is psg - 1:
				say " and ";
		say ".";
	now all touchable guardians are prevseen;
	now all touchable guardians are mentioned;
	continue the action;

to decide which number is guar-here: decide on number of touchable guardians;

to guar-pro (g - a person):
	if g is neuter, set the pronoun it to g;
	if g is female, set the pronoun her to g;
	if g is plural-named, set the pronoun them to g;

guardians-seen is a number that varies.

before looking when mrlp is towers (this is the reset-guardian-count rule): now guardians-seen is 0.

progress-to-castle is a number that varies.

after printing the locale description when mrlp is towers (this is the castle near/far rule) :
	let rm be location of player;
	let any-reveal be false;
	repeat with adude running through touchable guardians:
		if adude is clueneedy and any-reveal is false:
			now adude is not clueneedy;
			now any-reveal is true;
			say "[clue-text of adude][paragraph break]";
	if rm is a towloc listed in the table of towers progress comments:
		choose row with towloc of rm in table of towers progress comments;
		if there is a towquo entry:
			say "[towquo entry][line break]";
			blank out the towquo entry;
		else if there is a towdist entry and progress-to-castle < towdist entry:
			now progress-to-castle is towdist entry;
			choose row progress-to-castle in table of castle approaching narratives;
			say "[observ entry][line break]";
	if player is in Actionless Coastlines:
		if agnostic is off-stage:
			say "You think you hear rustling off to the side, as if someone or something is hiding from the [random touchable guardian].[paragraph break]";
	continue the action;

the castle near/far rule is listed last in the after printing the locale description rulebook.

to say which-cue of (therow - a number) :
	say "[observ in row therow of table of castle approaching narratives]";

table of castle approaching narratives
observ
"The palace is barely visible now."
"The palace seems a bit closer now. You probably have a way to go, but it's a start. Maybe the Spec-O-Scope could provide some sort of map. And those three guardians--well, maybe you can bribe, attack or talk to them. For information if nothing else. The bluster butlers, particularly, keep their eyes on you. Maybe they're guarding something important."
"You still can't make out any details of the palace, but it's certainly there, across the big lake to the northeast. But there are more stupid guardians here--they look more resolute and tougher to figure, but you are getting the hang of things. You think."
"The palace looks a little bigger now--but you may eventually need to cut [if location of player is Anemic Cinema]east[else]north[end if] a bit to get to it. It looks like there're dead ends [if location of player is Anemic Cinema]north and west[else]south and east[end if], and you still aren't sure how to cross Leak Lake."
"You're a good deal closer to the palace than at the Scope Copse, but you can probably go northeast a bit more to get closer. That still leaves Leak Lake to pass."
"Now that you're at the shores of Leak Lake, it's too far to swim. You may need some craft. And crossing here might leave you far from the palace."
"You can see the other side of Leak Lake from here. It's still too far to swim, but it's clearly closer than anywhere else you've been."
"Since your head's barely above water, you can't see a shore any more. But you know it must be there."
"The palace--well, you can see why it was spectacular, once."

table of towers progress comments
towloc	towdist	towquo
Loftier Trefoil	0	"The palace--well, you couldn't even see it before you stepped in here. Maybe someone will help you, once you've sorted this mess out."
Topside Deposit	1	--
Outer Route	--	"The palace has receded a bit, but--well--that machine's got to be good for something."
Scope Copse	2	--
Baldest Blasted Saltbed	3	--
Leveraged Everglade	3	--
Anemic Cinema	4	--
Danger Garden	4	--
Treading Gradient	5	--
Salted Deltas	6	--
Artist Traits Strait	6	--
Shaven Havens	--	"You're going side-to-side to see the Curst Palace without getting closer, but hooray to seeing some other life form."
Obscurest Subsector	--	"You're going side-to-side to see the Curst Palace, but hooray to seeing some other person. Even if he is locked up."
Lost Lots	--	"This may've been a step away from the palace, but hooray, stuff to pick up."
Fringe Finger	--	"This may've been a step away from the palace, but hooray, stuff to pick up."
Actionless Coastlines	7	--
Rawest Waster Waters	8	--
Mislit Limits	9	--

to say tow-dirs:
	let golist be a list of directions;
	repeat with DR running through directions:
		unless the room DR of location of player is nowhere:
			add DR to golist;
	repeat with VG running through touchable guardians:
		if gualoc of VG is location of player:
			remove guadir of VG from golist, if present;
		else:
			remove opposite of guadir of VG from golist, if present;
	if number of entries in golist > 0:
		say ". You have clear passage [golist]";

chapter keycar

the yacker keycar is a LLPish vanishing thing. description of keycar is "The yacker keycar zips around randomly, probably just to distract you from bigger things. It's red, but it has entirely different red writing all around. You'd be able to read it with out too much difficulty.". "The red yacker keycar continues to zip back and forth here, but it's not actually blocking you."

understand "key" and "key car" and "car" as keycar.

Include (-
	has transparent animate
-) when defining keycar.

check taking keycar: say "The keycar zooms around, bantering about how it's a bit too fast for you." instead;

a-text of yacker keycar is "RRYYRO". b-text of yacker keycar is "RRYYRO". parse-text of yacker keycar is "x[sp]x[sp]-[sp]-[sp]x[sp]Y".

book Loftier Trefoil

Loftier Trefoil is an innie room in Towers. "This opt-outs['] outpost is slightly classier than servant taverns. Still, you can't afford to stay, and you can't leave it with Rodney around. It has other rooms, but since this isn't an RPG, the cellar below and rooms upstairs are off-limits.". roomnud of Loftier Trefoil is table of Loftier Trefoil nudges.

exits-text of Loftier Trefoil is "You probably aren't going anywhere until Rodney does, first.".

last-loc of Towers is Loftier Trefoil.

w-p is privately-named plural-named boring abstract scenery in Loftier Trefoil. printed name of w-p is "picaros". description of w-p is "Deal with the picaros individually.". bore-check of w-p is bore-picaros rule. bore-text of w-p is "Deal with the picaros individually."

understand "picaros/picaro" as w-p.

to decide which number is here-picaros: decide on number of picaros in Loftier Trefoil;
to decide which number is moot-picaros: decide on number of moot picaros;

this is the bore-picaros rule:
	if here-picaros is 1, try objhinting rodney instead;

after printing the locale description for Loftier Trefoil when Loftier Trefoil was unvisited:
	say "The ambience here makes you think 'Lo, I fret.'";
	if debug-state is true:
		say "[line break]";
		ital-say "For testing purposes, note [b]WARWAR[i] skips through the warriors.";
		say "[line break]";
		ital-say "Also, [b]PLOP[i] drops all the picaros here, but crazy things may happen if you move on from unit testing.";
	set the pronoun him to rodney;
	set the pronoun them to w-p;
	continue the action;

rule for printing a locale paragraph about a picaro (called pp):
	if pp is not Rodney, The rule succeeds;
	now Rodney is mentioned;
	say "[Rodney], still loud and boastful, is [if here-picaros is 1]making his last stand--he won't attack anyone unprovoked, but nobody's going out with him around[else][one of]calling to[or]leading[stopping] [a-bunch] of prosaic picaros blocking the way out. [they-just] [list of followy picaros][end if][one of].[paragraph break]But maybe this show of force will backfire. They don't look as gung-ho as they could, and once you pick off one weak link, you'll know what people--or things--are like, here[or][stopping].";
	now all touchable picaros are mentioned;

to say they-just:
	say "[if here-picaros is 2]Well, there's just one, now:[else]They include[end if]"

chapter escaping or not

check asking Rodney about: say "He stares at you, seeming to ask rhetorically, 'Redo? Y/N!' You see red at this." instead;

check going outside in Loftier Trefoil:
	if Rodney is in Loftier Trefoil, say "Rodney is blocking the way[if here-picaros > 1], and he has help[end if]." instead;
	say "BUG! you should have been kicked out after talking to Renato.[wfak]";
	move player to Topside Deposit;

check going up in Loftier Trefoil: say "One stare at the rates for an overnight room almost leads you to tears. You exit the large inn with a lean grin and no learning." instead;

check going down in Loftier Trefoil:
	say "'Don't loot the wines. Swine.' someone calls. Harsh." instead;

chapter recital article

a recital article is boring vanishing LLPish scenery in Loftier Trefoil. "It's the sort of thing Elvira's allies paste up on walls to show ownership and be intimidating or whatever. Even though it looks firmly attached to the wall, perhaps you could magic it down by yourself and save people the trouble once Rodney's gone, or you could, well, just get rid of [Rodney].[paragraph break]Also, the author's name is in red writing at the bottom.". bore-text of recital article is "You probably need to change the recital article somehow, with your powers, to get rid of it."

a-text of recital article is "RYRRYYR". b-text of recital article is "RYRRYYR". parse-text of recital article is "x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]x".

chapter picaros

A picaro is a kind of person. a picaro is usually vanishing. a picaro can be leaderly. a picaro is usually not leaderly. a picaro can be pinko. a picaro is usually not pinko. a picaro is usually terse. a picaro has a number called pod-num. a picaro has a number called pod-ord. the plural of picaro is picaros.

initial appearance of a picaro is "[the item described] looks to Rodney for orders, though he really should be lumped in with the rest."

h-p is a picaro that varies. [h-p means hinted picaro]

the specification of picaro is "A person who blocks your way out of the Loftier Trefoil."

roddro is a truth state that varies.
rodyon is a truth state that varies.

after fliptoing a picaro (this is the loftier trefoil exit rule):
	if noun is Rodney, continue the action;
	d "[list of picaros in Loftier Trefoil].";
	if here-picaros < 4:
		min-up;
	else if here-picaros is 4:
		say "Rodney's followers look a bit shaken. If you got rid of him by saying [if roddro is true and rodyon is true][b]YONDER[r] or [b]DRONEY[r][else if rodyon is true][b]YONDER[r][else if roddro is true][b]DRONEY[r][else]something to shoo him[end if], you might be able to clear the lot. Or you can mess with all his pals, first. Your choice.";
	if here-picaros > 1:
		pick-a-picaro;
	else:
		say "Time to put Rodney out of his misery. Okay, he'll still be miserable, so just put [i]yourself[r] out of the range of his misery.";
		now h-p is rodney;
	continue the action;

rod-hint is a truth state that varies.

check objhinting a not leaderly picaro (this is the poke Rodney but don't spoil him rule):
	if cur-score of towers > 3 and rod-hint is false:
		ital-say "Rodney's vulnerable enough now, you can [b]HINT RODNEY[i] if you don't care about maximum points. I will simply plow through his comrades, otherwise.";
		now rod-hint is true;

check taking a picaro: say "You'll have to deal with him[if noun is rodney] and/or his followers[end if] indirectly." instead;

Yo Rend Or Deny Rodney is a leaderly picaro. description is "A big strong fellow who probably won't be removed by physical force. He looks sort of like Red Bull Burdell's slightly weaker younger brother.". The chum of Rodney is yourself. pod-num of Rodney is 7. pod-ord of Rodney is 1. printed name of Rodney is "Yo-Rend-Or-Deny Rodney".

a-text of Yo Rend or Deny Rodney is "OYRRYR". b-text of Yo Rend or Deny Rodney is "??RR?R". parse-text of yo rend or deny rodney is "?[sp]?[sp]N[sp]D[sp]?[sp]R". rodney is parse-spoilable.

the chum of a picaro is usually Andres. [moved here so Rodney appears first when iterating through picaros]

section picaro pod 1

Geno is a picaro. description is "Well, Geno is ... here. He hasn't left yet. He may ordinary even among the prosaic picaros, but he's still stronger than you.". pod-num of Geno is 1. pod-ord of Geno is 1.

a-text of Geno is "RYRY". b-text of Geno is "PYPY". parse-text of geno is "UNIQUE". geno is any-spoilable.

Royce is a picaro. description is "Royce seems to be muttering-not-muttering about what a tough guy he is.". pod-num of Royce is 1. pod-ord of Royce is 2.

a-text of Royce is "RYOYR". b-text of Royce is "RGBYR". parse-text of royce is "UNIQUE". royce is any-spoilable.

Tyson is a picaro. description is "Tyson keeps snarling at people, red-faced.". pod-num of Tyson is 1. pod-ord of Tyson is 3.

a-text of Tyson is "RRYRO". b-text of Tyson is "RRYRO". parse-text of tyson is "x[sp]x[sp]O[sp]x[sp]Y". tyson is any-spoilable.

Wade is a picaro. description is "Wade looks confident, as if nothing can drain that. He's dressed in red.". pod-num of Wade is 1. pod-ord of Wade is 4.

a-text of Wade is "YRYR". b-text of Wade is "YRYR". parse-text of wade is "-[sp]x[sp]-[sp]x". wade is any-spoilable.

section picaro pod 2

Daryl is a picaro. description is "Daryl appears to be in tremendous physical shape.". pod-num of Daryl is 2. pod-ord of Daryl is 1.

a-text of Daryl is "RYRRO". b-text of Daryl is "RGPRO". parse-text of daryl is "UNIQUE". daryl is any-spoilable.

Dewey is a picaro. description is "Dewey is solidly build, almost less just a man than a big tree.". pod-num of Dewey is 2. pod-ord of Dewey is 2.

a-text of Dewey is "RYYRO". b-text of Dewey is "RGYRB". parse-text of dewey is "UNIQUE". dewey is any-spoilable.

Goldy is a picaro. description is "Goldy has an amoral, mercenary look about him.". pod-num of Goldy is 2. pod-ord of Goldy is 3.

a-text of Goldy is "RYRRO". b-text of Goldy is "PGRRB". parse-text of goldy is "UNIQUE". goldy is any-spoilable.

Shane is a picaro. description is "Shane looks well-tanned, but a bit reddish-faced.". pod-num of Shane is 2. pod-ord of Shane is 4.

a-text of Shane is "YRRYR". b-text of Shane is "YRRYR". parse-text of shane is "-[sp]x[sp]x[sp]-[sp]x".

section picaro pod 3

Blake is a picaro. description is "Blake beams, likely a paragon of positive thinking.". pod-num of Blake is 3. pod-ord of Blake is 1.

a-text of Blake is "RRYYR". b-text of Blake is "PPYYR". parse-text of blake is "UNIQUE". blake is parse-spoilable.

Bredo is a picaro. description is "Bredo seems unusually focused and interested.". pod-num of Bredo is 3. pod-ord of Bredo is 2.

a-text of Bredo is "RYRYR". b-text of Bredo is "PYRYR". parse-text of bredo is "B[sp]-[sp]x[sp]-[sp]x". bredo is parse-spoilable.

Edwin is a picaro. description is "Edwin looks sober and focused, except when he briefly gives a red-faced glare at all the alcohol in here he isn't allowed to destroy yet.". pod-num of Edwin is 3. pod-ord of Edwin is 3.

a-text of Edwin is "RYRYR". b-text of Edwin is "RYRYR". parse-text of edwin is "x[sp]I[sp]x[sp]E[sp]x". edwin is parse-spoilable.

Eldon is a picaro. description is "Eldon looks vigorous. Perhaps he's been led on by youthful follies.". pod-num of Eldon is 3. pod-ord of Eldon is 4.

a-text of Eldon is "YRRYR". b-text of Eldon is "YPPYP". parse-text of eldon is "UNIQUE". eldon is parse-spoilable.

section picaro pod 4

Archie is a picaro. description is "Archie looks free of pain, big or small.". pod-num of Archie is 4. pod-ord of Archie is 1.

a-text of Archie is "YRRYYR". b-text of Archie is "GRRYYR". parse-text of archie is "A[sp]x[sp]x[sp]I[sp]E[sp]x". archie is parse-spoilable.

Barney is a picaro. description is "Barney feels close and far at the same time, like he should be placed somewhere else.". pod-num of Barney is 4. pod-ord of Barney is 2.

a-text of Barney is "RYYRRO". b-text of Barney is "RYYRRB". parse-text of barney is "x[sp]E[sp]A[sp]x[sp]x[sp]Y". barney is parse-spoilable.

Ernest is a picaro. description is "Ernest looks relaxed and ready to gaffle tavernlings.". pod-num of Ernest is 4. pod-ord of Ernest is 3.

a-text of Ernest is "RYRRYR". b-text of Ernest is "RYPRYR". parse-text of ernest is "x[sp]E[sp]N[sp]x[sp]E[sp]x". ernest is parse-spoilable.

Reggie is a picaro. description is "Reggie looks spotless--no stains on his clothes. He probably smells as nice as he looks, too.". pod-num of Reggie is 4. pod-ord of Reggie is 4.

a-text of Reggie is "YRRYYR". b-text of Reggie is "YRPYYR". parse-text of reggie is "-[sp]x[sp]G[sp]-[sp]E[sp]x". reggie is parse-spoilable.

section picaro pod 5

Andres is a picaro. description is "Andres's movements are carefree as he sways back and forth.". pod-num of Andres is 5. pod-ord of Andres is 1.

a-text of Andres is "RRYRYR". b-text of Andres is "RPYPGR". parse-text of andres is "UNIQUE". andres is any-spoilable.

Andrew is a picaro. description is "Andrew has a careless look in his eyes. He does not seem to be aware of risk. Just imagine the sort of bugs that would slip through if he wrote text adventures and kept adding one more feature! Oops, maybe you don't have to.". pod-num of Andrew is 5. pod-ord of Andrew is 2.

a-text of Andrew is "RYRRYR". b-text of Andrew is "RYRRGR". parse-text of andrew is "x[sp]A[sp]x[sp]x[sp]E[sp]x".

Marcel is a picaro. description is "Marcel looks just plain agitated, which can't hurt in his line of work.". pod-num of Marcel is 5. pod-ord of Marcel is 3.

a-text of Marcel is "RYRRYR". b-text of Marcel is "RGRRGR". parse-text of marcel is "x[sp]A[sp]x[sp]x[sp]E[sp]x".

Marlon is a picaro. description is "Marlon doesn't look like all the rest. In fact, he's sort of looking down his nose at them a bit.". pod-num of Marlon is 5. pod-ord of Marlon is 4.

a-text of Marlon is "RYRRYR". b-text of Marlon is "RYPRYR". parse-text of marlon is "x[sp]O[sp]R[sp]x[sp]A[sp]x". marlon is parse-spoilable.

section picaro pod 6

Cedrick is a picaro. description is "Cedrick stretches effortlessly, without any hitches.". pod-num of Cedrick is 6. pod-ord of Cedrick is 1.

a-text of Cedrick is "RRYRRYR". b-text of Cedrick is "PRYRRYR". parse-text of cedrick is "C[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

Demitri is a picaro. description is "Demitri stares out confidently, bolder than his compatriots.". pod-num of Demitri is 6. pod-ord of Demitri is 2.

a-text of Demitri is "RYRYRYR". b-text of Demitri is "RYPGRYR". parse-text of demitri is "x[sp]I[sp]M[sp]I[sp]x[sp]E[sp]x". demitri is parse-spoilable.

Leander is a picaro. description is "Leander looks too dumb to contemplate anything besides knocking people's heads in.". pod-num of Leander is 6. pod-ord of Leander is 3.

a-text of Leander is "RYYRRYR". b-text of Leander is "PGGRRGR". parse-text of leander is "L[sp]E[sp]A[sp]x[sp]x[sp]E[sp]x". leander is parse-spoilable.

Preston is a picaro. description is "Preston appears to be the best protected of your persecutors.". pod-num of Preston is 6. pod-ord of Preston is 4.

a-text of Preston is "RRYRYRR". b-text of Preston is "PPYRYRR". parse-text of preston is "P[sp]R[sp]O[sp]x[sp]E[sp]x[sp]x". preston is parse-spoilable.

Terrance is a picaro. description is "Terrance constantly looks at Rodney and nods obediently. Perhaps you could help him gain a freer mindset.". pod-num of Terrance is 6. pod-ord of Terrance is 5.

a-text of Terrance is "RYRRYYRR". b-text of Terrance is "RGRPYYRR". parse-text of terrance is "x[sp]E[sp]x[sp]R[sp]E[sp]A[sp]x[sp]x".

The chum of Andres is yourself.

max-picaro-pods is a number that varies. max-picaro-pods is usually 7.

to decide which number is picaro-count of (wc - a number):
	let temp be 0;
	repeat with QQ running through picaros:
		if pod-num of QQ is wc:
			increment temp;
	decide on temp.

when play begins (this is the distribute picaros rule) :
	now all picaros are off-stage;
	repeat with mypod running from 1 to max-picaro-pods:
		let G be the picaro-count of mypod;
		[say "[mypod] has picaro-count of [G].";]
		let H be a random number from 1 to G;
		repeat with QQ running through picaros:
			if pod-num of QQ is mypod and pod-ord of QQ is H:
				now QQ is in Loftier Trefoil;
	pick-a-picaro;

to pick-a-picaro:
	now h-p is a random not leaderly picaro in Loftier Trefoil;
	if debug-state is true, say "DEBUG INFO: [h-p] is the next prosaic picaro to hint.";

[This pulls 1 guy from each wargroup. As of release 3 there are 26 distinct guys with 5.65 letters on average--the shuffling was previously totally random but now it's weighted down to ~5.61 with a more uniform distribution. You are sure to get 2 6's, 2 5's, a 7-8 and a 4-5.]

book Topside Deposit

Topside Deposit is a room in Towers. "A fire-torn frontier leads everywhere but south, where the Shout-So Hut you [one of]just [or][stopping]left stands, and north. That way's [if adders are in Topside Deposit]un[end if]blocked.". roomnud of Topside Deposit is table of Topside Deposit nudges.

for printing a locale paragraph about a thing (called nongua) in Topside Deposit (this is the lump tarts with toaster rule):
	if nongua is start tarts and toaster is in Topside Deposit, now start tarts are mentioned;
	continue the action:

check taking a guardian: say "Sadly, you can't just move anyone or anything out of the way in the Wildest Wilteds." instead;

inside of Topside Deposit is nowhere.

check going north in Topside Deposit:
	if player does not have Rosetta Toaster and dreads adders are not touchable, say "[one of]The Rosetta Toaster looks handy, you have to admit, looking back at it[or]You ignore the toaster, again[stopping].";

chapter dreads adders

The dreads adders are a plural-named terse purple guardian in Topside Deposit. "Dreads adders may or may not be lethal, but you're scared of passing them to the north. [one of]If you look at them again, you may remember the two people who created them[or][sade-sard][stopping].". description is "They look like they're trying to invoke fear, but perhaps there's another emotion?" [unfortunately the move-to rule fires before the reorg-guardians rule so we need to specify where the dreads adders are. And it'd take longer to rewrite the rules than just to add what room the adders are in.]

to say sade-sard:
	say "[one of]Dr. Sade[or]Ed Sard[in random order] was one of their creators, you remember now, as you see red"

a-text of dreads adders is "RYRRYR". b-text of dreads adders is "RY?RYR". parse-text of dreads adders is "x[sp]-[sp]x[sp]x[sp]-[sp]x". dreads adders is parse-spoilable.

gualoc of Dreads Adders is Topside Deposit. guadir of Dreads Adders is north. block-text of Dreads Adders is "The dreads adders may or may not be lethal. In fact, they may be perfectly harmless. But one look at them makes you worry, what if you were the first slob to be killed by them as you tried to pass? Especially since, as you calculate things, there can't be many possibilities.[paragraph break]You don't see red until you turn away and get lost in your own dreads.". clue-text of Dreads Adders is "From what you know about dreads adders, they shouldn't be harmful, and they rely more on intimidation than subterfuge. Maybe you could change how THEY think, even though they outnumber you!".

chapter toaster

The Rosetta Toaster is a container. It is in Topside Deposit. "A Rosetta Toaster rotates here[if start tarts are in Topside Deposit], with a pack of start tarts nearby[end if]."

check scaning toaster:
	say "[one of]The toaster looks like a pretty good diagnostic item as-is, and it doesn't need an upgrade, so you're not disappointed when nothing pops up[or]Still nothing. The toaster probably doesn't need an upgrade[stopping]." instead;

check taking toaster when player is in Actionless Coastlines: say "[if toaster is in Actionless Coastlines]Best leave it with the agnostic[else]You don't need to take it again[end if]." instead;

Rule for printing room description details of the Rosetta Toaster: do nothing instead.

the Rosetta Toaster has a number called charges. the charges of the Rosetta Toaster is usually 0.

the description of the Rosetta Toaster is "[one of]You begin to stare.[paragraph break][or][stopping]This nutriments instrument, according the writing beneath 'O Treats,' automatically applies a much more appropriate description to the target of your choice than the most obvious one. Which makes up for it not having a dial for how dark you toast your preferred flat bread product. It's not available at-store and known to cause conflicts with namer ramen[one of].[paragraph break]It's also known as a toast-o-stat[or][stopping]."

understand "toast-o-stat" and "stat" as toaster.

Report taking the Rosetta toaster:
	say "You feel a small surge as you pick up the toaster, but it stops spinning nonetheless. It seems useful." instead;

chapter start tarts

a pack of start tarts is a skansnak in Topside Deposit. description is "They are a mystery flavor. They're that breakfast pastry with goo on the inside that everyone eats but nobody admits to, or particularly likes. You remember they taste gross cold but help get your day started with a good strat. You can probably eat them whenever, though, as long as you warm them up first.". "A pack of start tarts lies here.". indefinite article of start tarts is "a".

after doing something with pack of start tarts:
	set the pronoun them to start tarts;
	continue the action;

chapter scenery

section fire torn frontier

the fire torn frontier is bounding boring scenery in Topside Deposit. description of fire torn frontier is "It's pretty rough. You don't know what's beyond it, but it can't be anything useful.". bore-text is "The frontier is just there to block and intimidate you. You can't do anything with it. [if adders are in Topside Deposit]You should probably find a way past the adders[else]You got rid of the adders, and that's all you need to do[end if].".

section shout so hut

the Shout So Hut is bounding boring scenery in Topside Deposit. bore-text is "You don't want anything to do with the Shout-So Hut. Onward!".  bore-check is bore-shout-hut rule. "It doesn't look that intimidating, but it's noisy enough to keep you away.". printed name of Shout So Hut is "Shout So Hut"

this is the bore-shout-hut rule:
	if current action is entering, try going south instead;

check going south in Topside Deposit: say "The Shout-So Hut booms out a reproval: '[one of]Hut! So[or]Oh! Shutouts[or]Shh! Oust! Out[or][huh-uhh], so stout[or][huh-uhh]Huh, toss out[or]Us, shut! Hoot[in random order]!'[one of][line break]It's probably got a bunch of those.[or][stopping]" instead;

to say huh-uhh: say "[if a random chance of 1 in 2 succeeds]Huh[else]Uhh[end if]"

book Scope Copse

Scope Copse is north of Topside Deposit. Scope Copse is in Towers. "A spec-o-scope [one of](scope, for short)[or](scope)[stopping] rests in the center of this wooded area. [if try us yurts are touchable]Some yurts also stand here, looking out of place. [end if]Paths lead in all directions, though things seem more open to the north and east.". roomnud of Scope Copse is table of Scope Copse nudges.

chapter Yurts

the Try Us Yurts are plural-named vanishing boring scenery in Scope Copse. description of Try Us Yurts is "The Try Us Yurts, of dull sturdy metal, don't look very lived-in, because they're too small. They're mostly for storage, and they're not blocking you, but maybe they're hiding something useful.". bore-text is "It would be fun to see what is in or behind the yurts, but you probably need to do something magical.". bore-check of Try Us Yurts is bore-yurt rule.

[NOTE: yurts are not llpish but brownies--the objects you get from the yurts--are. That's how I wrote the code. I could do it better, but I didn't.]

this is the bore-yurt rule:
	if current action is entering, say "There's no easy way in. They'd be too cramped once you were inside, anyway." instead;
	if current action is taking, say "They're too strongly built to even flake a piece off." instead;

understand "yurt" as try us yurts.

a-text of try us yurts is "RYRRO". b-text of try us yurts is "R?R?O". parse-text of try us yurts is "x[sp]?[sp]x[sp]?[sp]Y". try us yurts are any-spoilable.

section Owers' Bin Brownies

some Owers Bin Brownies are a plural-named LLPish skansnak. description of Owers Bin Brownies is "These cheap brownies don't look too appetizing. However, nobody wanted to eat them until it was re-advertised as food that helps you think your way out of your problems, because it definitely can't be served at parties. Nobody much still wants to eat them, because doing so is now an admission you have, well, problems.". printed name of Owers Bin Brownies is "Owers[']-Bin Brownies".

understand "brownie" and "owers/bin/ower brownie" and "ower brownies" as Owers Bin Brownies.

chapter spec-o-scope

the Spec O Scope is scenery in Scope Copse. understand "speco/specoscope" and "copse scope" as Spec O Scope. understand "map/telescope" as Spec O Scope when Spec O Scope is fungible and Spec O Scope is examined. printed name of Spec O Scope is "Spec-O-Scope".

Include (-
	has transparent talkable
-) when defining Spec O Scope.

check taking Spec O Scope: say "It's firmly stuck in place. And it might lose its powers if you moved it." instead;

check searching Spec O Scope: try examining Spec O Scope instead;

before examining Spec O Scope for the first time: say "A telescope! Place to see!"

check examining Spec O Scope:
	say "[one of]It seems like an OK tool to look. You notice the word HI carved in big block letters on the Spec-O-Scope--the I being just the H rotated.[paragraph break][or][stopping][i][bracket][one of]Fourth wall time--w[or]W[stopping]ould you prefer a full-text summary of the map in the Spec-O-Scope to a text map?[close bracket][r][line break]"; [bold-ok]
	if the player regex-prompt-consents:
		say "An area three rooms square. A river, maybe a lake, borders it on the north and east. About [number of accessible rooms in words] area[if number of accessible rooms is not 1]s are[else] is[end if] open in the center, with [number of sideview rooms in words] open off to the side. In particular, the highlighted area just north of the north shore is [unless mardier admirer is moot]un[end if]available, another just west is [unless ingrates are moot]un[end if]available, a particularly important location east of the east shore seems [unless bonker is moot]un[end if]available, and just south of it, an area looks [unless natives site van is moot]un[end if]available. It also appears the area just west of you is highlighted, there's something northeast of the water.";
		now Spec O Scope is examined;
		process the specoscope draw rule;
		the rule succeeds;

description of Spec O Scope is "You look into the Spec-O-Scope and see:[paragraph break][fixed letter spacing]
[line break]  !      *
[line break]  [pc of cinema and north]~~~~~~
[line break]+[pc of cinema and west].[pc of cinema and east].[pc of deltas and east].~ +
[line break]  [pc of saltbed and north] [pc of gradient and north] [pc of strait and north]~
[line break]  .[pc of saltbed and east].[pc of gradient and east].~
[line break]  [pc of copse and north] [pc of everglade and north] [pc of garden and north]~
[line break]![pc of copse and west].[pc of copse and east].[pc of everglade and east].[pc of garden and east]!
[line break]  [pc of topside and north]   [pc of garden and south]
[line break]  !   +[variable letter spacing][paragraph break]| = passage, x = no passage, . = location, ! = important, + = treasure."

to decide whether (g - a guardian) gendermatches:
	if g is mardier admirer, yes;
	if g is female and player is male, decide no;
	if g is male and player is female and other-g of g is not dreads adders, decide no;
	decide yes;

to say pc of (myr - a room) and (myd - a direction): [passage character]
	let maybe be true;
	repeat with myg running through guardians:
		now maybe is false;
		if myr is gualoc of myg and myd is guadir of myg, now maybe is true;
		if myr is far-room of myg and myd is opposite of (guadir of myg), now maybe is true;
		if maybe is true and myg gendermatches:
			say "[if myg is not moot]x[else if myd is west or myd is east]-[else]|[end if]";
			continue the action;
	say "[qr]"

book Outer Route

Outer Route is west of Scope Copse. Outer Route is in Towers. "It's a bit outre here, but nothing to rue. You can only go back east. Sway-ways surround you, which might be too adventurous[note-detour].". roomnud of Outer Route is table of Outer Route nudges.

chapter diverse deviser

A diverse deviser is a reflexive thing in Outer Route. "A diverse deviser [if deviser is reflexed]labeled RAPIER REPAIR[else]with some red writing on it[end if] [if dagger is held]chugs[else]fizzles[end if] along in the campiest campsite nearby. At least [one of]yon camp has no campy company (copy, man?)[or]no campers scamper[or]saucy yucas haven't burst from the ground[in random order] here.". description is "It's a hi-watts whatsit that reads 'Paranoid? A poniard!' It looks like what you imagined a left-handed smokebender did, back when you were being hazed in [if player is male]Boy[else]Girl[end if] Scouts. [if deviser is reflexive]It doesn't seem to work as well as it could. [else if dagger is moot]But it's done its job. [end if][if dagger is not moot]You could probably [b]PUT[r] any blade smaller than a rapier in there[else]You seem to have broken it creating the [gizmo][end if]."

understand "machine" as deviser when player is in Outer Route.

understand "revised" and "revised deviser" and "rapier/repair" and "rapier repair" as diverse deviser when diverse deviser is reflexed.

a-text of diverse deviser is "RYRYRYR". b-text of diverse deviser is "R?P???R". parse-text of diverse deviser is "x[sp]?[sp]V[sp]?[sp]?[sp]?[sp]x". diverse deviser is parse-spoilable.

check taking diverse deviser: say "Heavens, no! It fits in TOO well with the campiest campsite! Plus, it's at best impractical and at worst impossible to take. [if deviser is reflexive]And it's not useful in its current state[else if dagger is moot]Plus you already used it[else]Using it would just make its day, I'm sure, if you could just find what it could hone[end if]." instead;

the I ZOMG Gizmo is a thing. description is "[one of]Whew. I'm buffaloed on this one. Somebody who knows how to build things would probably understand how to activate, much less use, the [randbla] or [randbla]. Hey, if I understood, I would be writing stuff far less silly than this game[or]You find yourself baffled by the [giz-part][stopping]."

to say giz-part:
	choose row with mytab of table of gizmo parts in table of megachatter;
	if curidx entry is maxidx entry:
		say "[randbla]";
	else if curidx entry is maxidx entry - 1:
		say "[randbla]. Or, still, the [randbla]";
	else:
		say "[randbla] and [randbla]";

check opening gizmo:
	say "It's too complicated to learn about." instead;

check inserting into diverse deviser:
	ignore the can't insert into what's not a container rule;
	if diverse deviser is reflexive, say "The [deviser] is not yet the best form it can be. Maybe your magicking can help upgrade it." instead;
	if noun is gizmo, say "But the [deviser] broke itself producing the gizmo for you." instead;
	if noun is toaster, say "In a different Wasteland, that would be very practical, indeed. Especially if you know the bit-flip infinite skill trick. But not here." instead;
	if ragged dagger is moot, say "The diverse deviser machine has already given its all to create the gizmo." instead;
	if noun is not ragged dagger, say "That's nothing like a rapier. It's not sharp, metal and pointed. You'll need to find something else." instead;
	say "The ragged dagger is sucked into [the deviser], which gets raspier as it repairs and likely, parries dangerous rear-psi. A couple minutes of proclaiming itself 'the sharpener that resharpens' and an alarming increase in smoke and a final wheezing choke later, you open it. Instead of a riper rapier, or a clever cleaver, it's a gizmo--bearing the label of the famed novelty company I ZOMG. Which is certainly a diverse tool indeed![paragraph break]The [deviser] still fizzles fruitlessly as a reminder of the work it once did, but the gizmo probably used up all the diversity in the deviser. But hey, if you gotta go, you might as well go right after making your masterpiece.";
	now player has the I ZOMG Gizmo;
	moot ragged dagger;
	set the pronoun it to I ZOMG Gizmo;
	now diverse deviser is realized;
	reg-inc instead;

section repairing (verb)

repairing is an action applying to one thing.

understand the command "repair" as something new.

understand "repair [something]" as repairing.

carry out repairing:
	if diverse deviser is not touchable, say "You need to be by a machine that could repair other things." instead;
	try inserting noun into diverse deviser instead;

chapter scenery

section sway ways

the sway ways are plural-named boring bounding scenery in Outer Route. "Just looking at the yaws makes your head swim. They're meant to be tricky to walk on without the proper ways through. An extra level of security. But then they probably lead back to even more dangerous parts of the Wildest Wilteds, anyway.". bore-text of sway ways is "You have no idea how to fix the sway-ways to make them less unsafe, but you don't need to.". bore-check of sway ways is bore-sway-ways rule. printed name of sway ways is "sway-ways".

understand "yaws" and "sway-ways" as sway ways.

this is the bore-sway-ways rule:
	if current action is entering, try going west instead; [west is arbitrary here. Any direction gives the same message.]

section Campiest Campsite

the campiest campsite is boring useless scenery in Outer Route. description of campiest campsite is "My goodness! The campiest campsite is beyond splendid! It's a bit redundant and over-the-top, so you might not sensibly make a whole room out of it, but...this is a good place for it.". bore-text of campiest campsite is "Well, gosh! There's not a whole lot to do with the camp but have fun being around it! Oh, and maybe [if diverse deviser is reflexive]figure how to buff up the diverse deviser[else if dagger is not moot]figure what goes in the diverse deviser[else]mourn the diverse deviser's demise[end if].".

understand "camp/site/campsite" and "yon camp" as campsite.

book Baldest Blasted Saltbed

Baldest Blasted Saltbed is a sideroom. It is north of Scope Copse. It is in Towers. "This is a dreary place that doesn't seem worth guarding, [if guar-here is 0]but you took care of everyone here[else]so maybe people, or things close enough, are just stopping you leaving[end if]. Some old ice is to the west[if old ice are reflexive][one of]. You doubt it's blocking anything, but it might look more impressive if it were less, well, flat[or][stopping][else]. You made it coiled, so it looks cool[end if]. The stew wets behind the old ice are too dangerous[tow-dirs].". roomnud of Baldest Blasted Saltbed is table of Baldest Blasted Saltbed nudges. missed-text of Baldest Blasted Saltbed is "an area on the west edge with an LLP".

check going west in Baldest Blasted Saltbed: say "The stew wets are way too dangerous. But any other way is okay." instead;

chapter scenery

section stew wets (west scenery)

the stew wets are boring bounding scenery in Baldest Blasted Saltbed. description of stew wets is "The stew wets are just another bit of treacherous terrain that help prevent your journey from being more expansive than it already has been.". bore-text of stew wets is "[wets-no]."

section docile old ice LLP

the docile old ice is LLPish reflexive scenery in Baldest Blasted Saltbed. "[if old ice is reflexed]It's coiled into a really cool pattern now, thanks to you[else]Big chunks of ice are always impressive, but this could be more artistic if it weren't so flat[end if][one of]. Another look and you'll remember where you saw a beautiful carved ice sculpture[or]. You see red remembering an LiedCo sculpture that showed this[stopping]."

a-text of docile old ice is "RYYRYR". b-text of docile old ice is "R?YRYR". parse-text of docile old ice is "x[sp]-[sp]-[sp]x[sp]-[sp]x".

check taking old ice: say "You'd get your hands stuck. And I won't double dog dare you." instead;

book Leveraged Everglade

Leveraged Everglade is a sideroom in Towers. Leveraged Everglade is east of Scope Copse. "The land here is mucky, but something unseen and man-made allows passage every way except south, where screech creches block your way. You doubt there's much to do here besides get on[if guar-here is 0], especially since you got rid of the guardians here[end if]. Organised ego drains dot the area[if ego drains are in Leveraged Everglade]. They're not blocking you, but they do leave you feeling slightly bummed[end if].". roomnud of Leveraged Everglade is table of Leveraged Everglade nudges. missed-text of Leveraged Everglade is "a room on the north edge west of [coastlines]".

check going south in Leveraged Everglade: say "You aren't equipped to brave the screech creches to the south, and you won't be. Any other way is okay, though." instead;

chapter scenery

section screech creches

the screech creches are bounding boring scenery in Leveraged Everglade. description of screech creches is "You can't get close enough to the screeching to get a good look at the creches. They're pretty much there just to block you.". bore-text is "You don't want or need to do anything with the screech creches.". bore-check is bore-creches rule.

this is the bore-creches rule:
	if current action is entering, try going south instead;

section organised ego drains LLP

the organised ego drains are plural-named LLPish vanishing boring scenery in Leveraged Everglade. description of ego drains is "Staring at them makes you feel small and insignificant, and what's more, they seem incredibly factual and precise. You could probably get away with not removing them, but Yorpwald would be nicer if you did.[paragraph break]'[first custom style][one of]NO, SIR! EGAD[or]NO, EGAD, SIR[or]SIR, EGAD, NO[at random][r]!' you seem to hear as you look at them more closely, through a mist that turns red. [if player is female]You lack the confidence even to mention you are female, so they're wrong like that, at least. [end if]You also get this idea in your mind--why bother going that way? It's coherent and not over-the-top, [one of]why not to visit that [first custom style]SAD REGION[r][or]that you could get there some other way, [first custom style]DIG, REASON[r][or]that you're lucky you got no [first custom style]EAR DOSING[r][or]capped with a motto, [first custom style]DOERS GAIN[r][in random order]. So few words, so much seeing red.". bore-text is "The ego drains are there, just waiting to mess with your mind. They aren't stopping you from doing anything, but you may be able to deal with them for your own edification and self-assurance.". bore-check of ego drains is the bore-talk-thru rule. [bold-ok]

a-text of organised ego drains is "RRYRRYYRY". b-text of organised ego drains is "R?YRR?YRY". parse-text of organised ego drains is "x[sp]?[sp]-[sp]x[sp]x[sp]?[sp]-[sp]x[sp]-".

this is the bore-talk-thru rule:
	say "[the current action]. [whether or not action is blathery].";
	if action is blathery:
		now boring-exception is true;
		continue the action;

book Anemic Cinema

Anemic Cinema is north of Baldest Blasted Saltbed. "Well, you're not [i]in[r] the cinema. It's off to the side, calling itself the THEATER THEREAT, though it seems too beaten-up to matter[if ingrates are touchable]. Something smells to the west, too[end if][tow-dirs].". Anemic Cinema is in Towers. roomnud of Anemic Cinema is table of Anemic Cinema nudges.

after printing the locale description for Anemic Cinema when Anemic Cinema is unvisited:
	say "The ingrates grumble about how their territory is useless, and that's really not their fault. Maybe you don't really need to get rid of them.[paragraph break]";

chapter theater thereat

The theater thereat is boring useless scenery in Anemic Cinema. description of theater is "The theater has long since been in disuse. It can't be important. I mean, who needs visual images, much less moving ones, to have an adventure? Really!". bore-text of theater thereat is "The theater thereat, with such lame titles as 'Me, I can,' / 'Nice, Ma!' and 'I, Manic Menace,' has been abandoned. And really, you shouldn't be staring at some screen when you are trying to save a world.". bore-check of theater thereat is bore-theater rule.

understand "theatre" and "theatre thereat" as theater thereat.

understand "anemic/cinema" and "anemic cinema" as theater when player is in Anemic Cinema.

check going inside when player is in Anemic Cinema: try entering theater instead;

this is the bore-theater rule:
	if current action is entering, say "You take a brief look inside. Nothing useful." instead; [?? move movies list to Theater Thereat]

book Treading Gradient

Treading Gradient is north of Leveraged Everglade and east of Baldest Blasted Saltbed. "[grad-by-points]. You see [if weeds are touchable and mended mini denim is touchable][we-g] along with the mended mini denim patching what's probably a hole[else if weeds are touchable][we-g][else if mended mini denim is touchable]mended mini denim patching a hole[else]nothing else you can shake down for items[end if]. Paths lead in all four directions here[if guar-here is 0], all unobstructed[else if guar-here is 1], even if one's blocked[else], even if some are blocked[end if].". Treading Gradient is in Towers. roomnud of Treading Gradient is table of Treading Gradient nudges.

to decide which number is grad-points: [?? we could possibly convert this into having a list and having moots of a list being the number of moot items in the list]
	let temp be 0;
	if mended mini denim is moot, increment temp;
	if weeds are moot, increment temp;
	if realist tailers are moot, increment temp;
	if fluster self rut is moot, increment temp;
	if lars eede is moot or elsa erde is moot, increment temp;
	if sweatier wait seer is moot, increment temp;
	decide on temp;

to say grad-by-points:
	say "[if grad-points < 2]This place is quite messy and busy[else if grad-points is 2]There's a lot to clean up here[else if grad-points is 3]You've got a bit you can clean up here[else if grad-points is 4]This place was a lot busier before you started hacking through it[else if grad-points is 5]You've got very little left to do here[else]This place was busy once, but you fixed that with your mad skills[end if][if arid den is unvisited and denim is moot]. You made a way down through the denim. It may not lead anywhere really important, but it might be nice if you like challenge for its own sake[end if]"

to say we-g: say "weeds swaying, despite no wind,"

every turn when player is in Treading Gradient and weeds are in Treading Gradient and player was in Treading Gradient: say "The weeds [one of][or]continue to [stopping]sway freely and menacingly[one of]. Perhaps you can get rid of them, since they're not actual people blocking passage[or], but they can't be THAT tough[stopping].";

check going down in Treading Gradient:
	if arid den is visited, say "You already went down." instead;
	if mended mini denim is moot:
		say "You go down into the darkness...";
		min-up; [no matter what happens, you must figure the word to get out, which gives you a point.]
		move player to Arid Den;
		the rule succeeds;

chapter mended mini denim

some mended mini denim is LLPish vanishing singular-named boring scenery in Treading Gradient. bore-text of mended mini denim is "The denim is too tough to get a grip on and too heavy for normal tools to cut or get by. You'll need something magical to make it disappear.". description of mended mini denim is "It seems sturdy, but maybe there's some unorthodox way to cut it.". printed name of mended mini denim is "mended mini-denim".

a-text of mended mini denim is "RYRYR". b-text of mended mini denim is "?Y?YR". parse-text of mended mini denim is "x[sp]I[sp]x[sp]E[sp]x". mended mini denim is parse-spoilable.

chapter weeds

the weeds are vanishing scenery in Treading Gradient. "They look like some sort of mutant weeds from the future, maybe a crazy one with multi-layered cities. They blow in some undetectable wind: west, then east a while, then down and south. There may be something inside them, but you can't tell."

check taking weeds: say "They spin around you like a garment before picking you up and placing you away." instead;

a-text of weeds is "RYRYR". b-text of weeds is "RGRYR". parse-text of weeds is "x[sp]E[sp]x[sp]E[sp]x". weeds are parse-spoilable.

chapter ragged dagger

the ragged dagger is a thing.

description of ragged dagger is "It can't shag much less gash. For cutting, it's worse than grade f. It's grade g. (See what I did there?)[paragraph break]Written on it is evidence it was once Hank's shank."

chapter raves saver

the raves saver is a reflexive LLPish thing. the raves saver can be yow-talk, yow-yell, goosey, ducky, or silent. the raves saver is silent.

understand "replay/player" and "replay player" as raves saver.

understand "tape recorder" and "tape/recorder" as raves saver.

check opening raves saver: say "It's cheap and rickety enough, the tapes are stuck in like paste. It has no open button or mechanism." instead;

a-text of raves saver is "RYYRRO". b-text of raves saver is "???RR?". parse-text of raves saver is "?[sp]?[sp]?[sp]x[sp]x[sp]?". raves saver is parse-spoilable.

description of raves saver is "[if saver is reflexive]It has an inscription REPLAY PLAYER, which is a violation of copyright law--those have video--but nobody's going to sue or care. But[else]It's slightly more polished now you made it pearly, and[end if] it also has a REPEAT button and a RETAPE button[one of].[paragraph break]It doesn't even have a socket for Hears-Share earphones.[stopping]"

section buttons

repeat button is part of the raves saver.

description of repeat button is "It looks as pushable as the retape button."

retape button is part of the raves saver.

description of retape button is "It looks as pushable as the repeat button."

does the player mean doing something with repeat button when repeat button is not touchable: it is unlikely.

this is the saver-check rule:
	if lone duck is friendly, say "Don't mess with the raves saver while the duck is following you." instead;
	if lone duck is close or lone duck is returned or lone duck is moot, say "[one of]You don't really need to fiddle with the raves saver any more.[or][stopping]"; [?? run paragraph on??]
	if across-leak-lake, say "The saver got bumped around too much when you crossed Leak Lake. Well, you got good use out of it." instead;
	if saver is touchable and player does not have saver, try silently taking raves saver;

check pushing retape button:
	abide by the saver-check rule;
	if Dr Yow is touchable:
		if agnostic is touchable, say "You don't need to record the two of them, now." instead;
		if Dr Yow is calm, say "Recording the awkward silence with Dr. Yow around would do little." instead;
		if Dr Yow is wordy:
			if raves saver is yow-talk, say "That's already on the saver." instead;
			say "You record Dr. Yow talking[prev-rec].";
			now raves saver is yow-talk instead;
		if Dr Yow is rowdy:
			if raves saver is yow-yell, say "That's already on the saver." instead;
			say "You record Dr. Yow ranting[prev-rec].";
			now raves saver is yow-yell instead;
	if duck is touchable:
		if raves saver is ducky, say "The duck's already on the saver." instead;
		say "The clicking of the RETAPE button causes the duck to quack inquisitively. The saver records the quacks[prev-rec].";
		now raves saver is ducky instead;
	if player is in Danger Garden:
		if raves saver is goosey, say "The duck's already on the saver." instead;
		say "You record the geese's honks[prev-rec].";
		now raves saver is goosey instead;
	if agnostic is touchable, say "'Whoah! That thing looks ancient!' the agnostic yells before you push the button[if saver is yow-talk or saver is yow-yell]. Maybe you meant to push repeat...the agnostic is interested in science, and Dr. Yow's voice is in the recorder[end if]." instead;
	say "There's nothing that seems worth re-taping here, so you decide against doing so." instead;

to say prev-rec:
	say " over [if saver was silent]the previous silence[else if saver was ducky]the duck's quacking[else if saver is goosey]the geese's honking[else if saver is yow-yell]Dr. Yow's rants[else if saver is yow-talk]Dr. Yow's talking[end if]";

check pushing repeat button:
	abide by the saver-check rule;
	if raves saver is not silent:
		if guar-here > 0, say "Nothing on your saver is abrasive enough to move a guardian out of your way." instead;
	if agnostic is touchable:
		if raves saver is goosey or raves saver is ducky, say "'Yawn. The zoo is kind of boring. I like making stuff.'" instead;
		if raves saver is yow-yell or raves saver is yow-talk, try objasking agnostic about Dr Yow instead;
		say "'Whoah! That thing looks ancient!' the agnostic yells before you push the button." instead;
	if Dr Yow is touchable:
		if raves saver is yow-yell or raves saver is yow-talk, say "Dr. Yow doesn't need to be mimicked." instead;
	if player is in Danger Garden and saver is ducky, say "The geese honk in protest. One tries to attack your saver until the recording dies down." instead;
	if duck is touchable and saver is goosey, say "The duck cowers in fear, unable to locate the source of the noise[if Dr Yow is touchable], and Dr. Yow seems to glare at you a bit[end if]." instead;
	if raves saver is yow-yell and duck is touchable, say "The duck seems to walk forward but gets scared by the volume and rapidity of the noise." instead;
	if raves saver is yow-talk and duck is touchable:
		if duck is midstage, say "You've already got the duck's attention." instead;
		say "The duck perks up. It recognizes Dr. Yow's voice! It gives a hankering honk and comes closer to you and the sound of Dr. Yow's voice.";
		now duck is friendly;
		now raves saver is realized;
		the rule succeeds;
	say "[if raves saver is silent]Silence. Nothing has been recorded, yet.[else if raves saver is yow-yell]You hear someone yelling.[else if raves saver is ducky]Quack, quack.[else if raves saver is goosey]Honk, honk.[else]You hear Dr. Yow talking.[end if]" instead;

after going somewhere (this is the duck-follows-you rule):
	if duck was touchable and duck is friendly:
		say "The duck [one of]quacks along[or]waddles[or]trudges[or]schleps[in random order] behind you.";
		move duck to location of player;
	continue the action;

section retapeing

retapeing is an action applying to nothing.

understand the command "tape/retape/record" as something new.

understand "tape" and "retape" and "record" as retapeing.

carry out retapeing:
	if retape button is not touchable, say "You don't have a device that you can make [b]RETAPE[r]." instead;
	try pushing retape button instead;

section repeating

repeating is an action applying to nothing.

understand the command "repeat" as something new.

understand "repeat" as repeating.

carry out repeating:
	if repeat button is not touchable, say "You don't have a device that you can make [b]REPEAT[r]." instead;
	try pushing repeat button instead;

chapter éclairs

Claires Scalier Eclairs is an LLPish skansnak. description is "To those who eat these scalier éclairs (O CALORIES,) much is clear. However, it is not recommended that you eat them cold.". printed name of Claires Scalier Eclairs is "Claire's Scalier Éclairs". "Some Claire's Scalier Eclairs are lying here, packaged neatly."

understand "éclair/éclairs" as Eclairs.

after doing something with Eclairs:
	set the pronoun them to Eclairs;
	continue the action;

book Danger Garden

Danger Garden is a room in Towers. Danger Garden is east of Leveraged Everglade. printed name of Danger Garden is "[if stinger is not moot]Danger[else]Gander[end if] Garden". "[if stinger is not moot]This garden seems both describable and indescribable. You're sure it's inspired its share of overblown prose and poetry, and of thinking how things are or should be, but there's no time for that now[else]You hear a gander of geese honking now with the bonker and stinger gone, but they are too scared of you[end if]. The curst palace is barely visible in the distance north-ish, and you can take a path any which way.". roomnud of Danger Garden is table of Danger Garden nudges.

understand "gander" as geese when geese are in Danger Garden.

understand "gander garden" as Danger Garden when mrlp is towers and geese are in Danger Garden.

chapter scenery (after bonker/stinger gone)

the geese are useless boring plural-named scenery. description of geese is "You can't get a glimpse of the gander for all their noise.". bore-text is "The gander is noisy but not worth poking for. None of the geese can help you."

book Salted Deltas

Salted Deltas is north of Treading Gradient and east of Anemic Cinema. "Leak Lake, with its shoals aslosh, is to the north and far too wide to cross[tow-dirs].". Salted Deltas is in Towers. roomnud of Salted Deltas is table of Salted Deltas nudges.

chapter salted deltas scenery

s-d are useless boring privately-named scenery in Salted Deltas. description of s-d is "Not as dangerous as Leak Lake but not worth exploring.". bore-text of s-d is "The Salted Deltas are scenery. No need to futz.".

understand "salted deltas" and "salted/deltas" as s-d when player is in salted deltas. printed name of s-d is "salted deltas".

to say vis-guar:
	let ngs be number of guardians in Salted Deltas;
	if ngs is 0:
		say ". You've gotten rid of all nuisances here, anyway";
	else:
		say ". Might be more productive to deal with [the list of guardians in Salted Deltas], instead[if ngs is 2]. Especially the atheists[end if]";

to say agnostic-first: say "[if agnostic is male]Scot[else]Staci[end if]"

book Artist Traits Strait

to say relig-mf:
	if player is male:
		say "the Hostile-Is-He Lot";
	else:
		say "Lois the Hostile";

to decide which guardian is the-hostile:
	if player is male, decide on hostile is he lot;
	decide on lois the hostile;

Artist Traits Strait is a sideroom in Towers. it is north of Danger Garden and east of Treading Gradient. "Coulds-Clouds above (strati) give this strait a feeling of reflective gloom. Leak Lake spans to the east, too far to cross. A Thearchy Hatchery[if the-hostile is moot], where [relig-mf] went,[else], possibly for [relig-mf],[end if] lies disused here, not to be confused with a lone shire[tow-dirs].". roomnud of Artist Traits Strait is table of Artist Traits Strait nudges. missed-text of Artist Traits Strait is "a room on the east edge south of [coastlines]".

chapter coulds clouds

the coulds clouds are useless boring scenery in Artist Traits Strait. description of coulds clouds is "The strati are definitely coulds-clouds, full of possibility. They almost make you say 'It's art! I start!'". understand "coulds-clouds" as coulds clouds. bore-text is "The clouds are too far away to do anything other than look at. They won't help you solve anything. They're just there.".

understand "strati" as coulds clouds when player is in Artist Traits Strait.

book important side rooms ahead

book Shaven Havens

Shaven Havens is north of Anemic Cinema. Shaven Havens is in Towers. "This place wasn't, like, shaved with a razor. It's just free of anything that could hide bad guys, so hooray for small things. Savager ravages spread out every way except back south[note-detour].". roomnud of Shaven Havens is table of Shaven Havens nudges.

chapter savager ravages

the savager ravages are boring bounding scenery in Shaven Havens. description of savager ravages is "They're pretty forbidding. Trust me, you don't want to go any way but back south.". bore-text is "You don't want to mess with the savager ravages.".

duck-goto-note is a truth state that varies.

after printing the locale description for Shaven Havens when duck-goto-note is false:
	ital-say "you may wish to [b]GO TO DUCK[i] or even [b]GT DUCK[i] to get back here with less hassle.";
	now duck-goto-note is true;
	continue the action;

chapter lone duck

The lone duck is an animal in Shaven Havens. "[duck-desc]."

to say duck-desc:
	if duck is returned:
		say "Dr. Yow's lone duck, no longer alone, is by Dr. Yow's side";
		continue the action;
	say "[if lone duck is friendly]That[else]A[end if] lone duck is quacking along here[if id tag is examined]. It is wearing a small ID tag[end if][if agnostic is touchable], and it's ignoring the agnostic[end if]"

a-text of lone duck is "YRRYRRYR". b-text of lone duck is "YRRYRRYR". parse-text of lone duck is "-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

understand "loud neck" and "loud/neck" as lone duck when id tag is examined.

check giving something to duck: say "The duck doesn't seem interested in anything edible. Or inedible." instead;

check taking the duck:
	if lone duck is returned, say "It's Dr. Yow's. No stealing." instead;
	say "It gives you a wobbly blowby [if lone duck is friendly]despite your raves saver[else]and gives a warning honk. Maybe you need to find some way to befriend it[end if]." instead;

description of lone duck is "A pretty normal duck, but it doesn't seem that interested in you. It's not running away, though. So it's probably domesticated, but a bit timid--so don't make any loud noises[one of]. It pecks at a speck you can't see[or][stopping][if luck node is not moot].[paragraph break]You see red at how lonely it seems[end if]."

the ID tag is a boring thing. it is part of the lone duck. description of the ID tag is "' Loud Neck (in red)[paragraph break]Dr. Yow's Duck'". bore-text is "It's just there for identification. [if luck node is moot]Probably not a useful clue now, anyway[else]Maybe it'll provide a clue[end if]."

the lone duck can be aloof, friendly, close or returned. the lone duck is aloof.

definition: the lone duck is midstage:
	if the lone duck is friendly, yes;
	if the lone duck is close, yes;
	no;

book Obscurest Subsector

Obscurest Subsector is east of Danger Garden. Obscurest Subsector is in Towers. "A place this obscure is perfect for prison ropins, which [if duck is returned]you so neatly dispatched with the duck's help[else]are holding someone in captivity, with the help of a most devious luck node[end if]. A log-gaol blocking every way but west keeps the subsector obscurest[if dr yow is moot], and with Dr. Yow gone, you don't need to do anything else here[end if].". roomnud of Obscurest Subsector is table of Obscurest Subsector nudges.

chapter scenery

section a log gaol

a log gaol is bounding scenery in Obscurest Subsector. "It surrounds the subsector on four sides, helping keep it obscure."

subsector-visit is a truth state that varies.

after printing the locale description for Obscurest Subsector when subsector-visit is false:
	ital-say "in the future, you may wish to [b]GO TO[i]/[b]GT GAOL[i] to get back here with less hassle.";
	now subsector-visit is true;
	continue the action;

after printing the locale description for Obscurest Subsector when duck is friendly:
	say "The duck lies down for a moment. It seems to want to be here.";
	now duck is close;

after choosing notable locale objects when player is in Obscurest Subsector:
	set locale priority of prison ropins to 0;

to say no-rips:
	say "[if player has dagger]The dagger is too ragged[else if player has gizmo]The gizmo is too unwieldy to fit between the mesh. You try to cut it, but the blade squeaks against the steel[else]You have nothing that could cut anything[end if]."

section luck node

the luck node is boring vanishing scenery in Obscurest Subsector. "It's bright red and one of those combination dealies that will pop up if you get the right combination. You just need a little luck. Though, actually, there are probably a few million combinations, so you need a lot of luck. Just knowing that one combination works, though, has suckered many a Yorpwaldian to try and keep trying, without any, err, luck. There's also a fissure (a Fries-Us Fissure) which looks almost like a mouth. If you could manipulate the fissure or node, you could probably rescue Dr. Yow. You also notice red writing on the back.". bore-text of luck node is "You fiddle with the luck node a bit, but ... no luck."

a-text of luck node is "YRRYRRYR". b-text of luck node is "YRRYRRYR". parse-text of luck node is "-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

section prison ropins

The prison ropins are a plural-named transparent container in Obscurest Subsector. ropins are fixed in place. "The prison ropins are dense and strong enough that they will cause no rips, but you can see through them. They're made to ensure no rips (of course!) and are tied together with a sturdy luck node. There's some writing on the ropins, too."

check scaning prison ropins:
	say "Nothing happens until you scan the luck node.";
	try scaning luck node instead; [??]

check taking ropins: say "They're much too heavy and bulky." instead;

understand "jail" as prison ropins.

check entering prison ropins: say "It's not very full of fun or useful things. If it were, Dr. Yow would've gone all MacGyver and burrowed out without your help." instead;

check going inside in Obscurest Subsector: try entering prison ropins instead; [?? make sure this isn't short circuited]

description of ropins is "[if duck is returned]The prison ropins are open now, not that you want to enter.[else]The gaol advertises itself as the involuntary home of one Dr. Yow.[end if]"

check examining ropins: ignore the examine containers rule;

check scaning ropins:
	say "The settler does very little until you get near the luck node.";
	try scaning luck node instead;

squee-warn is a truth state that varies.

check opening prison ropins:
	say "[if Dr Yow is in prison ropins]You rattle it a bit, but it's too strong. Probably dead-bolted too, so it's physically impossible to use brute force[else]It's got nothing you want there any more[end if].";
	the rule succeeds;

check opening ropins: say "It's too sturdy, and you've no reason to believe what's behind it is worth visiting." instead;

check unlocking it with duck:
	if noun is luck node or noun is ropins or noun is log gaol:
		if luck node is moot, say "You already got things [b]UNLOCKED[r] here." instead;
		say "Almost. You're going about it wrong, though. Think about what sort of words in towers, and you'll see how to help the lone duck deal with things." instead;

before locking (this is the yow unlock rule) :
	if noun is ropins or noun is luck node or noun is fissure, say "It already is, and two locks won't make an unlock." instead;
	say "There's no need to lock anything in this game." instead;

does the player mean unlocking with dagger: it is very likely;
does the player mean unlocking with settler: it is likely;

does the player mean unlocking with pedanto notepad when settler is off-stage: it is likely.

does the player mean locking with dagger: it is very likely;
does the player mean locking with settler: it is likely;

the can't unlock without a lock rule is not listed in any rulebook.

check unlocking:
	if player is in Obscurest Subsector:
		if noun is prison ropins or noun is fissure or noun is luck node:
			if luck node is moot, say "The prison is already open." instead;
			if second noun is gizmo, say "You fumble with the gizmo but have utterly no luck. The prison remains locked." instead;
			if duck is touchable, say "The duck looks curiously at what you're trying to do. You can't pick it up, but maybe you can coax the duck with the right word..." instead;
			if noun is fissure, say "Nothing you have seems to fit in there." instead;
			say "The prison doesn't seem like something you can unlock--well, not with a key. 'Luck...done,' you mumble as you try. 'Done, luck.' You see red. There's nothing that resembles a keyhole. That weird fissure, maybe..." instead;
	if noun is drab yoke, say "It doesn't seem to have a key or anything. But whatever's inside it might." instead;
	if noun is isolani liaison, say "[if Report Porter Perrot is off-stage]Just open it instead[else]With what's outside? Bad idea[end if]." instead;
	if noun is span pans, say "There's no keyhole in the span pans. But there must be some easy way to open the pans!" instead;
	if noun is prison ropins, say "[if duck is returned]You already did[else]Yes. There should be a way to open it...but you haven't found a key, or anything like it, anywhere[end if]." instead;
	say "You don't have anything resembling a key, and that doesn't seem to need to be unlocked." instead;

chapter fries us fissure

the fries us fissure is part of the ropins. description is "It's rounded, more ovular than elliptical. It doesn't seem to fit any sort of keycard--and you can't see any tumblers in it. It's shaped like a mouth mid-complaint, and from what you know about that sort of fissure, it does fire up people who try and fail to unlock it.". the fissure is vanishing and auxiliary. printed name is "Fries-Us Fissure"

a-text of fries us fissure is "RYRRYYR". b-text of fries us fissure is "PY??YYR". parse-text of fries us fissure is "F[sp]U[sp]S[sp]S[sp]-[sp]-[sp]R". fries us fissure is parse-spoilable.

check entering fissure: say "The fissure is much too small and narrow." instead;

fissure-flip is a truth state that varies.

check inserting into the fissure: say "Nothing from your inventory seems to fit it. It's really oblong." instead;

chapter Dr Yow

Dr Yow is a flippable person in prison ropins. description is "[one of]You remember a slanderous (or is it libelous?) article claiming [he-she] was really Dr. Ieow, but [he-she] does look a[or]A[stopping] bit wonky, y'know? But with an intense look in [his-her] eyes[if Dr Yow is rowdy] as [he-she] yells[else if Dr Yow is wordy] as [he-she] babbles[end if][what-can-doc-say].". "Dr. Yow is pacing around semi-absent-mindedly[if Dr Yow is not in prison ropins] enjoying[else] pining for[end if] [his-her] freedom."

printed name of Dr Yow is "Dr. Yow"

check taking Dr Yow: say "[if Dr Yow is in ropins]You'll need to open the gaol first[else]Dr. Yow doesn't need that, after a spell in gaol[end if]." instead;

to decide what number is yow-has-said:
	let temp be 0;
	if Dr Yow has been rowdy, increment temp;
	if Dr Yow has been wordy, increment temp;
	decide on temp;

to say what-can-doc-say:
	say "[if yow-has-said is 2]. [he-she-c] looks repressed, as if [he-she] has so many ways to say things but needs someone to bring it out of him[else if yow-has-said is 1]. [he-she-c] looks slightly agitated, as if [he-she]'s only said half of what [he-she] wants to say[end if]"

a-text of Dr Yow is "RYRRO". b-text of Dr Yow is "RYRRO". parse-text of Dr Yow is "x[sp]O[sp]x[sp]x[sp]Y". Dr Yow is any-spoilable.

[a-text of Dr Yow2 is "RYRRO". b-text of Dr Yow2 is "RYRRO". parse-text of Dr Yow2 is "x[sp]O[sp]x[sp]x[sp]Y". Dr Yow is parse-spoilable.]

understand "doctor/doc yow" and "doctor/doc" as Dr Yow.

Dr Yow can be rowdy, wordy or calm. Dr Yow is calm.

section rowdying

every turn when doc-cool > 0 (this is the cool rowdy rule):
	decrement doc-cool;
	if doc-cool is 1:
		if Dr Yow is touchable, say "Dr. Yow was [if Dr Yow is rowdy]rowdier[else]wordier[end if] a bit ago. Now [he-she]'s worried.";
	if doc-cool is 0:
		if Dr Yow is touchable, say "Dr. Yow quits talking. [he-she-c]'s not [if Dr Yow is rowdy]rowdy[else]wordy[end if] any more.";
		now Dr Yow is calm;

doc-cool is a number that varies. doc-cool is usually 0.

rowdying is an action applying to nothing.

understand the command "rowdy" as something new.

understand "rowdy" as rowdying.

carry out rowdying:
	if Dr Yow is not touchable, say "[reject]" instead;
	if Dr Yow is rowdy:
		say "You recharge Dr. Yow's rowdiness.";
	else:
		say "Dr. Yow appears charged! [he-she-c] begins ranting about scientific solutions and implementations and so forth, and how [one of][he-she] was called [if player is male]wormy Mr. Yow[else]My Sow Ms. Yow[end if] until [he-she] got [his-her] Ph.D., and the worst [he-she] gets is 'Wooly Ol['] Yow' now[or]someone needs to grundy Dr. Yung[or]you can be a weirdo AND woe-rid[or]Dr. Ney is [his-her] idol[cycling]. It's quite a sight[if Dr Yow is in prison ropins], even through the jail door[end if][unless Dr Yow has been rowdy][one of]. You doubt [he-she]'s like this all the time, though. Maybe [he-she] can speak more calmly, in other situations[or][stopping][end if].";
	unless Dr Yow has been rowdy, reg-inc;
	now Dr Yow is rowdy;
	now doc-cool is 3;
	if agnostic is touchable, ag-gets-it instead;
	the rule succeeds;

[rowdy -> attentive]

to ag-gets-it:
	say "[line break]The agnostic's understanding is paltry at first, but [he-she]'s attentive, so [he-she] gets it partly, before raptly exclaiming 'Droll Dr. LOL!' Dr. Yow's confident now, explaining patly and aptly. 'Call me Dr. Leo--older version of you.' They converse animatedly about the dream of no-silage gasoline, but Dr. Yow convinces [him-her] to start small.";
	if ag-atten is false:
		say "[line break]It seems to take a bit longer than it should, but Dr. Yow is patient and even having fun. You wonder if you could've helped a bit more, but you did enough--and [agnostic-first] will find [his-her] own clever life hacks to focus more.";
	else:
		say "[line break]The lecture goes extra quickly with [agnostic-first] attentive! So much common sense, but there's so much deep stuff, too. Suddenly you understand how certain machines that confused you as a kid worked.";
	say "[line break]The lecture over, [agnostic-first] says, 'Dr.?'[paragraph break]'Toy! Try! Do!'[paragraph break][agnostic] smacks [his-her] forehead and runs off 'It--it won't just be pseudo-souped! Pen lids, spindle...'[paragraph break]'Wait! I have this lots-o-tools stool...' but the agnostic's gone.[paragraph break]'Wait! Where is it? O lost!' [he-she-c] searches [his-her] pockets, just in case.[paragraph break]'Dr. Yow's Drowsy. My lab: balmy. Long cameo.' Then, above [his-her] duck's quack, 'come along.' [he-she-c] follows a loading diagonal, off for some [if player is female](sic) [end if]bachelor lab chore. Before [he-she] does, [he-she] shows you a picture labeled CURSEE RESCUE, featuring--a very unflattering portrait of yourself, before sticking it in [his-her] pocket. 'That dude[if player is female], um, dudess[end if] with the powers. House arrest, I heard. You look like someone who cares. Maybe you can rescue them, too!' Unintentional compliments are the nicest.";
	moot Dr Yow;
	moot duck;
	if atblock is in Obscurest Subsector:
		now ag-atten is false;
		poss-d;
	moot atblock;
	now agnostic is in Actionless Coastlines;

section wordying

wordying is an action applying to nothing.

understand the command "wordy" as something new.

understand "wordy" as wordying.

carry out wordying:
	if Dr Yow is not touchable, say "[reject]" instead;
	if Dr Yow is wordy:
		say "You recharge Dr. Yow's wordiness.";
	else:
		say "[if agnostic is touchable]Dr. Yow starts discussing Wry Do too theoretical for uninitiated ears to appreciate. You hear the agnostic mutter 'Ow. Dry.'[line break][else]Dr. Yow just starts talking about stuff like the weather, etc. It's drivel, a nice version of Dr. Evil[wordy-hinty].[end if]";
	unless Dr Yow has been wordy, reg-inc;
	now Dr Yow is wordy;
	now doc-cool is 3;
	if agnostic is touchable, say "[line break][if Dr Yow was wordy]Dr. Yow's wordiness isn't helping the agnostic[else]The agnostic initially seems excited as Dr. Yow begins to talk, but it's all a bit too wonky, y'know? It quickly becomes dry--ok, dorky. Perhaps if the presentation were more exciting[end if].";
	the rule succeeds;

to say wordy-hinty: say "[unless Dr Yow has been wordy][one of]. You doubt [he-she]'s like this all the time, though. Maybe [he-she] can speak more excitingly, in other situations[or][stopping]"

book Actionless Coastlines

Actionless Coastlines is north of Artist Traits Strait. Actionless Coastlines is east of Salted Deltas. Actionless Coastlines is in Towers. "Leak Lake is calmer and narrower here, but even with no rocks, you can't make it across on your own. If you had some sort of craft, maybe you could[if atheists are in Actionless Coastlines]. You can go back south, however[else if the-hostile are in Actionless Coastlines]. You can go back west, however[else]. You can go west and south, though[end if][one of]. There's no sign of sectionals, past, present or future[or][stopping].[paragraph break]A maturation natatorium and Thearchy Hatchery provide local flavor.". roomnud of Actionless Coastlines is table of Actionless Coastlines nudges.

understand "incessant/instances" and "incessant instances" as Actionless Coastlines when coasting agnostic carries gizmo.

printed name of Actionless Coastlines is "[if bot boat is off-stage]Actionless Coastlines[else]Incessant Instances[end if]"

check going northeast in Actionless Coastlines: try going north instead; [crossing leak lake]

chapter Coasting Agnostic

Coasting Agnostic is a proper-named person. "[Agnostic], the Coasting Agnostic, [if dinger is in Actionless Coastlines]continues to read listlessly[else]smiles happily, half lost in technical abstract thought[end if]."

understand "idk/kid" and "idk kid" as Coasting Agnostic.

printed name of Coasting Agnostic is "[if player is male]Scot Agin[else]Staci Ong[end if]"

understand "staci/ong" and "staci ong" as Agnostic when player is female.
understand "scot/agin" and "scot agin" as Agnostic when player is male.

check objhinting agnostic:
	if player is in Obscurest Subsector and agnostic is in Obscurest Subsector, try objhinting atblock instead;

before objasking agnostic about when dinger is in Actionless Coastlines:
	ag-fid instead;

before asking agnostic about when dinger is in Actionless Coastlines:
	ag-fid instead;

to ag-fid:
	say "[agnostic-first] says 'Sorry, I get too distracted talking about random stuff. I'm even distracted by how I'm distracted, and why I am, and why I shouldn't be, and how I'm wasting my smarts, but I need to be confident in my smarts, and at the same time, I better not think I'm too smart.'[paragraph break]You need to pull [agnostic-first] away from that book. Maybe make it less attractive.";

every turn when player is in Actionless Coastlines and dinger is in Actionless Coastlines:
	say "[agnostic] continues perusing [dinger], not looking particularly thrilled."

atblock is privately-named LLPish vanishing scenery. printed name of atblock is "[Coasting Agnostic]". description is "[bug-report]". [no "the" because if we guess attentiev we want to see from Scot, not from the Scot]

ag-atten is a truth state that varies.

understand "atblock" as atblock when debug-state is true.

a-text of atblock is "YRRYRRYRY". b-text of atblock is "YRRYRPGPG". parse-text of atblock is "-[sp]x[sp]T[sp]-[sp]x[sp]T[sp]I[sp]V[sp]E". atblock is parse-spoilable.

a bot boat is a reflexive thing. understand "botboat" and "bot-boat" as a bot boat.

the weirder red wire is part of the bot boat. description is "You know, it's not really red, more reddish, if you look at it right. But it just seems superfluous and tangled. You're too worried about electricity to touch it, but maybe with the right plan...you could make it neater.".

the weirder red wire is LLPish and vanishing.

a-text of weirder red wire is "RYRYRYR". b-text of weirder red wire is "?GRYR?R". parse-text of weirder red wire is "?[sp]E[sp]x[sp]-[sp]x[sp]?[sp]x". weirder red wire is parse-spoilable.

check scaning bot boat (this is the scan boat components and not boat rule):
	[showme whether or not blaster is reflexive;
	showme whether or not turbos are reflexive;]
	if blaster is reflexive and turbos are reflexive:
		say "The blaster and turbos both give something different, but you focus on [the t-or-b].";
		try scaning t-or-b instead;
	if blaster is reflexed and turbos are reflexed:
		if weirder red wire is touchable:
			say "With the boat's components fixed, you focus on the weirder red wire.";
			try scaning weirder red wire instead;
		say "Nothing any more. You probably fixed the boat all you can." instead;
	if blaster is reflexed, try scaning turbos instead;
	try scaning blaster instead;

to say if-tent:
	if player is in Actionless Coastlines:
		say ", looking far-off, as if for inspiration [he-she] hasn't found yet";
	if player is in Obscurest Subsector:
		say ", looking [if atblock is moot]attentive[else]tentative[end if]"

check answering agnostic that: if the player's command includes "doctor" or the player's command includes "yow" or the player's command includes "dr", try objasking agnostic about Dr Yow instead;

check sbing agnostic: if agnostic is in Obscurest Subsector and atblock is in Obscurest Subsector, try sbing atblock instead;

check scaning agnostic:
	if agnostic is reflexed, say "'Oh! Yeah! I bet I could make one of those, one day." instead;
	if dinger is in Actionless Coastlines:
		say "Nothing, but that book...[paragraph break]";
		try scaning dinger instead;
		continue the action;
	if player is in Obscurest Subsector and atblock is in Obscurest Subsector:
		say "[agnostic] doesn't fidget, but [he-she] is kind of tentative now.[paragraph break]";
		try scaning atblock instead;

to say what-ag-sez:
	say "[if agnostic has gizmo][agnostic] stands proudly by a bot-boat [he-she] made. [he-she-c] looks nervously at you--[he-she] can't bring [him-her]self to ask you to try them.[no line break][else]The Coasting Agnostic potters around here. 'Aww man! I have a wicked awesome plan for a bot-boat! But I don't have the right tools.' [he-she-c] kicks at the ground[end if]";

before taking gizmo:
	if agnostic has gizmo, say "That'd be mean, since you gave it to the agnostic in the first place." instead;

check giving raves saver to agnostic: say "[one of][he-she-c] frowns at it. 'No way! That's way too ancient! Maybe it's useful for you, cause you're one of a few people remembers how it works, but...' [he-she] pauses awkwardly.[or]That isn't a useful tool for the agnostic to build anything.[stopping]" instead;

before giving something to Dr Yow when Dr Yow is in prison ropins: say "Nothing fits through the prison ropins." instead;

check objasking Dr Yow about gizmo when player has gizmo: if Dr Yow is not in prison ropins, try giving gizmo to Dr Yow instead;

check giving gizmo to Dr Yow: say "'A bit too applied for me.'" instead;

check objasking agnostic about gizmo: if player has gizmo, try giving gizmo to agnostic instead;

to say heat-remain:
	if number of skansnaks carried by the player > 0:
		say ", first heating your remaining pastr[if number of skansnaks carried by the player is 1]y[else]ies[end if] to get x-ray vision";
	now xrayvision is true;
	now all carried skansnaks are heated;

check giving gizmo to agnostic:
	if Dr Yow is moot:
		say "[he-she-c] takes the gizmo. 'Gee! Not as stone age...stage one...' He activates the gizmo's pliers, ignoring design perils--but he doesn't have enough. You [if player has toaster]offer your toaster[heat-remain][else]remember that toaster in Topside Deposit[end if]--the toaster would've caused an electric shock in the water anyway. And you won't be needing the raves saver, either. After frantic craftin['], the spare parts just allow [him-her] to craft a bot boat, with turbos and a blaster. They don't look TOO sturdy, but maybe you can fix that.";
		wfak;
		say "[line break]Once a bot boat is built, you begin hearing incessant instances. (Instances being the lesser-known definition of the word--strong suggestions.) Many seem to be useless, but they all seem to say the same thing, especially one in particular: the [canniest].";
		now agnostic has gizmo;
		moot toaster;
		moot raves saver;
		now bot boat is in Actionless Coastlines;
		now agnostic is following;
		move canniest ancients' instance to Actionless Coastlines;
		now blaster is part of bot boat;
		now turbos are part of bot boat instead;
	else:
		say "'Wow! That'd be neat if I had something to build.'" instead;

description of agnostic is "Freckly-faced and buck-toothed and talking to [him-her]self[if Dr Yow is touchable]. [he-she-c]'s visibly [i][at-ten][r] just being around Dr. Yow[end if].";

to say at-ten:
	say "[if agnostic is reflexed]attentive[else]tentative[end if]"

the agnostic can be lonely or following or found. agnostic is lonely.

section agnostic shows up

to say what-ag-does: [?? this is orpaned text -- it seems useful for the initial description]
	if dinger is in Actionless Coastlines:
		say "nodding at the trashy [i]Reading a Dinger[r]";
		continue the action;
	if agnostic is in Obscurest Subsector:
		say "looking [if agnostic is reflexed]attentive[else]tentative[end if]ly at Dr. Yow";
		continue the action;
	say "[if bot boat is in Actionless Coastlines]looking proud of [his-her] bot bot boat[else]pacing slightly, looking for more than a silly bestseller could ever give [him-her]"

chapter reading a dinger

a thing called Reading a Dinger is vanishing scenery. "It's certainly impressively presented, but the writing inside is, well, not so great. It involves utter nonsense like someone figuring out centuries-old world secrets because they know the Fibonacci sequence. But it's popular in Yorpwald. Saner places would reject it, I'm sure.".

printed name of Reading a Dinger is "[i]READING: a Dinger[r]" [bold-ok]

check taking dinger:
	say "You hear a rage din from the coasting agnostic. You both see red. They might not be particularly fond of the book, but since it's there and it's theirs, they don't want to give it up. Maybe you can make it more unattractive somehow." instead;

a-text of reading a dinger is "RRYYRYR". b-text of reading a dinger is "RR?YR?R". parse-text of reading a dinger is "x[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x".

chapter scenery

section canniest ancients' instance

the canniest ancients' instance is boring scenery. bore-text of instance is "You can really only listen to it.". "You don't know where it's coming from, but the advice is a bit obvious."

understand "instances" as instance.

section Maturation Natatorium

the Maturation Natatorium is a boring backdrop. drop-region of Maturation Natatorium is towers. the Maturation Natatorium is in Actionless Coastlines and Salted Deltas. description is "It extends [if player is in Actionless Coastlines]west[else]east[end if]. There's no clear way in[if atheists are moot], but you probably don't want to see the atheists again[else], and the atheists would probably pull you back if you tried[end if], anyway. Inscribed on the front is HE SITS AT THIS SEAT.". bore-check is bore-maturation-natatorium rule. bore-text is "There's nothing much to do with the maturation natatorium. It's just a gaudy structure.".

this is the bore-maturation-natatorium rule:
	if current action is entering and player is in Salted Deltas, say "[if atheists are moot]No need to disturb [relig-mf] now you're past[else]You're worried the atheists might give you a working over, verbal or physical. Perhaps a one-hour lecture on why not to waste time with religion. Ugh[end if]." instead;

section Thearchy Hatchery

the Thearchy Hatchery is a boring backdrop. drop-region of Thearchy Hatchery is towers. Thearchy Hatchery is in Actionless Coastlines and Artist Traits Strait. bore-text of thearchy hatchery is "There's nothing much to do with the Hatchery. It's just a gaudy structure.". bore-check of thearchy hatchery is bore-thearchy-hatchery rule.

this is the bore-thearchy-hatchery rule:
	if current action is entering:
		if player is in Artist Traits Strait, say "[if the-hostile are moot]No need to disturb [relig-mf] now you're past[else]You're worried [relig-mf] might have you strung up for sacrilege. So [b]HOSTILE[r][end if]." instead;
		say "That would probably be sacrilegious. You'd get a good scolding, I'm sure." instead;

description of Thearchy Hatchery is "It's a pretty impressive structure, with a note 'RIP once-sad deacons: aced, son (just before release 4).' Hmm[if the-hostile is touchable]. You'd think [relig-mf] would belong there, but maybe they are trying to preach to whatever masses drop by[end if]."

section solve-a-loaves

some solve a loaves are an edible plural-named skansnak. "Some solve-a-loaves have been left here.". description is "Inscribed with 'lo, save,' they are not huge loaves and could probably fit in a small oven[if player has toaster], like your toaster[end if]."

printed name of solve a loaves is "solve-a-loaves".

chapter a bot boat

description of bot boat is "You don't see much on the boat you understand, except some turbos and a blaster. [if turbos are reflexed]The turbos seem robust enough[else]A pair of turbos doesn't look quite ...hardy? No, some other word ... to help propel you across Leak Lake[end if]. [if blaster is reflexed]The blaster seems stabler than it used to be[else]The blaster hums and shakes erratically[end if].[paragraph break][if weirder red wire is touchable]The bot boat is nicely rewired, now[else]Some wires inside are also connected [i]weirder[r] than they should be. Maybe they can be fixed, though that's probably not as important as the main hardware[end if]."

t-or-b is a thing that varies.

check taking bot boat: try entering bot boat instead;

check entering bot boat:
	if turbos are not part of bot boat, say "'It's not even built yet, [mrmaam]! I need a tool to get the blaster and turbos working!'" instead;
	if player has toaster:
		say "'Hey! [mrmamu]! It'd be dangerous to take that toaster across the water!' [he-she-c]'s right[if number of carried skansnaks > 0]. But you decide to heat up what you have[end if]. You leave the toaster--you bet the agnostic could do some cool stuff with it. It will be a decent enough payment for [his-her] time and efforts. The agnostic leaves the toaster on the sand.[line break]";
		now all carried skansnaks are heated;
		now toaster is in Actionless Coastlines;
	else if toaster is touchable:
		if number of carried not heated skansnaks > 0:
			say "You heat up the food you found since you were last here.";
		now all carried skansnaks are heated;
	if turbos are reflexive and blaster is reflexive, say "[one of]'Go, [mrmaam]!' The boat sinks as you enter it. You fiddle with the controls--but they choke. The turbos conk out, and the blaster fizzes, too. 'Dang! What do I need to do?' the agnostic mutters to [him-her]self.[or]Unfortunately, nothing's changed since the last time you were here. 'Man! I still need to fix the blaster. Or the turbos. Maybe both.'[stopping]" instead;
	say "BRRRRM! The boat works great. 'I'll make a glider girdle next!' the agnostic shouts, out of view.";
	if turbos are reflexed and blaster is reflexed:
		say "You speed across the deeps of the Rawest Waster Waters as if on nine-seg engines and to the shore on the other side--so hard, they snap in two. Well, it would've been hard to return them to the agnostic anyway. You've made it!";
		towers-min-adj;
		now player is in Mislit Limits instead;
	say "Then you hear a voice call AIR FLUE FAILURE as you hear the [if turbos are reflexive]turbos go burst-o[else]blaster, er, blast[end if]. You fall in the waters, about halfway to the opposite shore.[paragraph break]Panicked, you grab at your super purse, but it's sealed automatically--and it's water-proof, too! Whew.";
	towers-min-adj;
	now player is in Rawest Waster Waters instead;

check going inside when player is in Actionless Coastlines:
	if bot boat is in Actionless Coastlines, try entering bot boat instead;
	say "You can't make up your mind which of the natatorium and hatchery would annoy you less, so you opt for neither. They can't be relevant." instead;

check examining bot boat:
	if turbos are not part of bot boat, say "The bot boat seem bare-bones at the moment, not ready to ride." instead;

section turbos

the turbos are a reflexive boring plural-named thing. description of turbos is "You're not sure how they should work, but [if turbos are reflexed]you managed to[else]maybe you can[end if] counter the agnostic's technical knowledge by tweaking it.". bore-text is "The turbos are too technical for you--you can probably just examine or scan them.".

a-text of turbos is "RYRYRR". b-text of turbos is "RYRYRR". parse-text of turbos is "x[sp]O[sp]x[sp]U[sp]x[sp]x".

section blaster

the blaster is a reflexive thing. description of blaster is "You're not sure how it should work, but [if blaster is reflexed]you managed to[else]maybe you can[end if] counter the agnostic's technical knowledge by tweaking it. You see red writing on it.". bore-text is "The blaster is too technical for you--you can probably just examine or scan it."

a-text of blaster is "RRYRRYR". b-text of blaster is "RRGRRGP". parse-text of blaster is "x[sp]x[sp]A[sp]x[sp]x[sp]E[sp]R".

to towers-min-adj: [this is when you leave the mainland]
	wipe-towers-map;
	if number of moot guardians is 0:
		d "All guardians erased!";
	else:
		d "Left [number of not moot guardians] guardians: [list of not moot guardians].";
	now poss-score of towers is cur-score of towers + 7; [SPECTACULAR (required), punier, antsier, present, triste, annoyed, give top opt pot]
	now min-score of towers is cur-score of towers + 1; [spectacular]
	unless turbos are reflexed and blaster is reflexed:
		increment poss-score of towers; [dropping the player in Rawest Waster Waters means we haven't gotten the second boat point yet.]
		min-up;
		d "adding min/poss points for Rawest Waster Waters. [cur-score of mrlp] [min-score of towers]-[poss-score of towers].";
	if used-ray is false:
		increment poss-score of towers;
		if number of carried skansnaks is 0, min-up; [no way to cheat if we have no skansnaks]
	if player has strudel and strudel is reflexive, increment poss-score of towers; [we can still make it RUSTLED]

to say mrmamu: say "[if player is female]Ma'am[else]Mister[end if]";

book Lost Lots

Lost Lots is a sideroom. it is south of Danger Garden. Lost Lost is in Towers. "[one of]Well, I guess those annoying natives were right. [or][stopping]There's not much in this area, not even a useful slot. A gadflies['] gasfield surrounds you every way except back north[if sporties ripostes are in Lost Lots], and worse, sporties['] ripostes mock you. You can probably ignore them if you want, but if you're clever, maybe you can deal with them[end if][note-detour].". roomnud of Lost Lots is table of Lost Lots nudges. missed-text of Lost Lots is "an area behind [the site van] south of [danger garden]".

after looking in Lost Lots:
	if strudel is carried by player or strudel is moot, set the pronoun it to gasfield;
	continue the action;

Report taking the strudel:
	say "You take it from the rut with no problem. Maybe you could've done it fancier, but eh, well." instead;

the gadflies gasfield is bounding scenery in Lost Lots. "You can't 100% see the gasfield, since it's hazy. But it's there, and it blocks you.". printed name is "gadflies['] gasfield".

check opening a skansnak: say "You can just try to [if player has toaster][b]TOAST[r] or [end if][b]EAT[r] that if you want." instead;

section sporties ripostes

the sporties ripostes are plural-named vanishing boring LLPish scenery in Lost Lots. description of sporties ripostes is "They may not be clever, but they're slick and efficiently delivered. Like all taunts, you don't need to neutralize them, but it might feel good.". bore-text is "The ripostes are annoying to deal with, because they are so quick and witty, but maybe you can find a way.". bore-check of sporties ripostes is bore-ripostes rule. printed name is "sporties['] ripostes".

a-text of sporties ripostes is "RRYRYYRR". b-text of sporties ripostes is "RR?RYYRR". parse-text of sporties ripostes is "x[sp]x[sp]-[sp]x[sp]-[sp]-[sp]x[sp]x".

this is the bore-ripostes rule:
	if current action is taking, say "Actually, you want to find a way to say, you're NOT going to take them any more." instead;
	if action is talkative, say "Despite your wordplay magic proficiency, you'll never win an argument. Maybe you can be more circumspect to get rid of the ripostes." instead;

book Fringe Finger

Fringe Finger is a sideroom. it is west of Anemic Cinema. Fringe Finger is in Towers. "This Fringe Finger looks out over a logged dogleg to ... well, it's a long way down to the unorg'd ground. Falling would mean grief'n.". roomnud of Fringe Finger is table of Fringe Finger nudges. missed-text of Fringe Finger is "an area west of [cinema] behind [the ingrates]".

[NOTE: no note-detour/detourable state here because you would fall and die off the finger/fringe]

understand "loaves" and "loaf" as solve a loaves.

check going down in fringe finger: say "The logged dogleg prevents you from jumping to your doom below to the unorg'd ground." instead;

chapter scenery

section logged dogleg

the logged dogleg is bounding boring scenery in Fringe Finger. description of logged dogleg is "The logged dogleg curves around so you don't fall off the fringe finger.". bore-check of logged dogleg is bore-dogleg rule. bore-text of logged dogleg is "You can't move the dogleg. It's there for your safety.".

this is the bore-dogleg rule:
	if current action is climbing, say "But you would fall to your death on the unorg'd ground." instead;
	if current action is entering:
		let Q be a random number from 1 to number of entries in dogleg-dirs;
		let mydir be entry Q in dogleg-dirs;
		try going mydir instead;

section unorg'd ground

the unorgd ground is bounding boring scenery in Fringe Finger. description of unorgd ground is "The unorg'd ground is not worth falling down to explore. Or worth falling down.". bore-text of unorgd ground is "The unorg'd ground is not worth your time.". printed name is "unorg'd ground".

understand "unorg" and "unorg ground" as unorgd ground.

chapter strudel

some strudel is a LLPish reflexive skansnak in Fringe Finger. it is singular-named. "Some strudel sits here in a sled rut[one of]. Whoever lost it probably forgot it[or][stopping].". description is "It reminds you of stuff stolen from parents['] cabinets during sleepovers--wouldn't ordinarily taste great, but stolen? A bit better. You notice the letters [i]Certified Nutritious by Dr. Eltus[r] stamped on it, in red. Magically, it doesn't look dirty from having spent time on the ground."

a-text of strudel is "RYRRRYR". b-text of strudel is "RYRRRGR". parse-text of strudel is "x[sp]U[sp]x[sp]x[sp]x[sp]E[sp]x".

check scaning strudel:
	if strudel is reflexed, say "You already rustled it." instead;
	say "You don't suspect you need to do anything with the strudel, but the settler still pops something up. Maybe it'd be practice to figure how you could've taken it.";

section sled rut

The sled rut is auxiliary scenery in Fringe Finger. "It's flecked with red, oddly[if strudel is in Fringe Finger], and the strudel's still in it[else if strudel is reflexed], though you think you know why, now[end if].".

a-text of sled rut is "RYRRRYR". b-text of sled rut is "RYRRRYR". parse-text of sled rut is "x[sp]U[sp]x[sp]x[sp]x[sp]E[sp]x".

check taking sled rut: say "[if strudel is in Fringe Finger]Maybe take the strudel instead[else]The sled rut is nothing and holds nothing[end if]." instead;

book Rawest Waster Waters

Rawest Waster Waters is a sideroom in Towers. "Ew. Rats. You're splashing around in a spry raspy spray, unable to go back. All you hear is [one of]a call ... can it be? It is! The [neaters]! They are always willing to help someone, but they can't do it by themselves[or]the [neaters], again[stopping].". roomnud of Rawest Waster Waters is table of Rawest Waster Waters nudges. missed-text of Rawest Waster Waters is "the middle of Leak Lake if you didn't fix a bot-boat".

outside-text of Rawest Waster Waters is "You know you need to exit, but you need to change things so an exit's more accessible."

exits-text of Rawest Waters is "The [neaters] will help you leave. But you need to help them align right!"

every turn when player is in Rawest Waster Waters:
	say "Spirited riptides... your eyes go red [one of]thinking of Ernesta, the lady of finding directions[or]half-praying to St. Renae[or]half-praying to St. Earne[in random order]."

chapter scenery

section Earnest Eastern Neaters (flippable)

the Earnest Eastern Neaters are boring plural-named reflexive scenery in Rawest Waster Waters. "The Earnest Eastern Neaters can help you, but they just feel a bit too far away. You may need to help them, too."

a-text of Earnest Eastern Neaters is "RYYRYRR". b-text of Earnest Eastern Neaters is "???RG??". parse-text of Earnest Eastern Neaters is "?[sp]?[sp]?[sp]x[sp]E[sp]?[sp]?". Earnest Eastern Neaters are parse-spoilable.

section raspy spray (bounding)

the raspy spray is boring bounding scenery in Rawest Waster Waters. description is "Well, you don't have much time to look at it in detail. You'd just like to get to one of the shores.". bore-text of raspy spray is "You need to worry about getting away from the spray. One of the shores must be reachable.". bore-check of raspy spray is bore-raspy-spray rule.

does the player mean drinking the spray: it is very likely.

this is the bore-raspy-spray rule:
	if current action is drinking, say "You'd hate the taste of the sips." instead;

book Mesprise/Emprise Premise(s)

Mesprise Premises is a sideroom. it is west of Mislit Limits. printed name of Mesprise Premises is "[if anodyne is not moot]Mesprise Premises[else]Emprise Premise[end if]". Mesprise Premises is an innie room in towers. "A plain dwelling. The only exit is back out east.". roomnud of Mesprise Premises is table of Mesprise Premises nudges. missed-text of Mesprise Premises is "a dwelling west of Mislit Limits".

chapter tetris sitter

the Tetris Sitter is an auxiliary person in Mesprise Premises. description is "[if itster is touchable]Absorbed in a game on her bright red [first custom style]ITSTER[r][else if anodyne is not moot]Still more distant than she should be[else]A little more at peace with herself now and more interested in other people[end if].". "[The tetris sitter] sits here, [if itster is touchable]playing Tetris. She seems rather good at it and almost pleased, but you know 'winning' mindless, endless games doesn't provide the [i]real[r] happiness of fighting through a thoughtful, challenging, well-crafted text adventure[else if top opt pot is moot]legitimately happy now, eager to talk about anything or everything that might help. Like maybe the curst palace, if you need the help[else]a bit sad now you brought her back to reality, but maybe you can change that[end if]."

a-text of Tetris Sitter is "RRYRRY". b-text of Tetris Sitter is "?RYRRY". parse-text of Tetris Sitter is "x[sp]x[sp]-[sp]S[sp]x[sp]-". tetris sitter is parse-spoilable.

understand "st/teri" and "st teri" as tetris sitter when itster is moot.

check going east in Mesprise Premises (this is the force give top opt pot rule):
	if player has top opt pot and top opt pot contains crocus:
		if anodyne is moot:
			say "Before you leave, you remember Ornate Atoner Renato's speech--the succor crocus in the top opt pot seems like a nice gift for [the tetris sitter], now she's not stuck on her [first custom style]ITSTER[r] game of Tetris. You give it to her.[paragraph break]'Come back if you need help with [up-arc]!' she says, as she goes to set the crocus out somewhere nice.";
			moot top opt pot;
			reg-inc;
		else if itster is moot:
			say "[sitter] seems to get up and try to prevent you from going. You sensed you were so close to helping her, and of course you didn't have to, but maybe the right word would change things.";
	continue the action;

Ornate Atoner Renato is an undesc.

check giving to Tetris Sitter:
	if second noun is crocus, try giving top opt pot to Tetris Sitter instead;
	if itster is touchable, say "She mumbles '[']S trite,' [unless noun is top opt pot]without looking up[else]but she does seem slightly intrigued. Maybe you need to change her outlook[end if]. You see red at her mumbling." instead;
	unless noun is top opt pot, say "St. Teri thanks you, but [if top opt pot is moot]the top opt pot was probably enough[else]that's not quite what she wants[end if]." instead;
	if anodyne is touchable, say "[sitter] seems interested, but her hands reflexively grasp [the anodyne]. How could you dispose of it?" instead;
	if crocus is off-stage, say "You consider giving the top opt pot to St. Teri, but that blub bulb won't make anyone happy. Maybe you can do a few last-minute things to make a plant bloom." instead;
	say "St. Teri smiles at the top opt pot and looks less tense. She realizes whom the gift must be from. She sighs, nods, hangs her new flower out back where it can get better, then returns, thanking you.[paragraph break]She then mentions that, while she's sure you'll figure what to do with the curst palace, you can come back inside for help if you need it. Her mind is clearer, and she'll have more ideas.";
	min-and;
	if cur-score of towers is max-score of towers - 2 and min-score of towers is max-score of towers - 2, say "[line break]NOTE: you probably deserve to know the remaining optional point is for not using any [passrite]. So if you fix the Curst Palace, you'll hit the maximum. Good work! Towers is a long area.";
	moot top opt pot instead;

check going outside in Mesprise Premises: try going east instead;

section itster

the itster is boring vanishing LLPish scenery in Mesprise Premises. description of itster is "It's red, and boy what a high score [the Tetris Sitter] has.". bore-text of the itster is "The itster is [the Tetris Sitter][']s, but maybe you can remind her there's a lot more to life.". bore-check of itster is bore-itster rule.

a-text of itster is "RRYRRY". b-text of itster is "RRYRRY". parse-text of itster is "x[sp]x[sp]-[sp]x[sp]x[sp]-".

this is the bore-itster rule:
	if current action is playing, say "You'll want to interrupt the game a bit less directly. Make [the sitter] not want to play it any more." instead;

chapter Done Any Anodyne

the Done Any Anodyne is boring vanishing LLPish scenery. "It's sitting there. The [sitter] isn't really in the mood to drink it, but it's there, and she has nothing better to do at the moment. Maybe you can help her break out of that. There's red writing on it.". printed name is "Done-Any Anodyne".

a-text of done any anodyne is "YRRYOYR". b-text of done any anodyne is "???Y?YR". parse-text of done any anodyne is "?[sp]?[sp]?[sp]-[sp]y[sp]e[sp]x". done any anodyne is parse-spoilable.

chapter top opt pot

the top opt pot is a container. description of top opt pot is "A top opt pot is sturdy (a welt-proof top opt pot, if you will) and conducive to giving life. The [if bulb is in top opt pot]blub bulb[else]succor crocus you found under the ur pine[end if] rests inside."

check examining top opt pot: ignore the examine containers rule;

the blub bulb is a boring thing. description of blub bulb is "One look makes you b blu and not bubl. But maybe it can become something cheerier some day. Or it can irrigate a much cheerier seedling.". the top opt pot contains the blub bulb. bore-text of blub bulb is "You don't want to mess with the blub bulb. Maybe it could become, or help something else become, something better. It's fragile but safe in the top opt pot."

after printing the name of the top opt pot while taking inventory:
	say " (holding a [if crocus is in top opt pot]succor crocus[else]blub bulb[end if])";
	now succor crocus is mentioned;
	now blub bulb is mentioned;
	omit contents in listing;
	continue the action;

understand "flowerpot" and "flower pot" as top opt pot.

check inserting into the top opt pot:
	if noun is crocus:
		if noun is in Mislit Limits, try taking noun instead;
		say "The crocus is in the top opt pot already." instead;
	say "Only a flower [if crocus is in top opt pot]like the crocus [end if]belongs in the top opt pot." instead;

check wearing the top opt pot: say "Devo is not accepting new members." instead;

check putting on the top opt pot: say "The top opt pot is just for holding a flower. Or future flowers." instead;

chapter succor crocus

before giving the crocus to: try giving top opt pot to second noun instead;
before giving the blub bulb to: try giving top opt pot to second noun instead;

before showing the crocus to: try showing top opt pot to second noun instead;
before showing the blub bulb to: try showing top opt pot to second noun instead;

understand "flower" as crocus.

the succor crocus is a boring LLPish flippable thing. "The succor crocus in the top opt pot makes you happier than a WE-ROFL flower or even a reflow-flower.". bore-check of succor crocus is bore-crocus rule.

this is the bore-crocus rule:
	if current action is taking, say "No. It took long enough for the crocus to grow." instead;

description of crocus is "It looks much better than the blub bulb it was."

flip-final-clue is a truth state that varies.

section planting

planting is an action applying to one thing.

understand the command "plant" as something new.

understand "plant [something]" as planting.

carry out planting:
	if noun is bulb or noun is crocus, say "It already is.";
	say "You can only plant a, well, plant. One that's not too big." instead;

book Mislit Limits

Mislit Limits is a room in Towers. "Everything looks a bit wrong here. It is most definitely a curst place, very reddish and separate from the curst palace nearby. You're gonna need some crazy action, or word, to make it what it was. And yet--something in the air says, lo, curse or clues? Scaly clays rise steeply enough to block progress every way except west, [if Mesprise Premises are unvisited]where it looks like someone might be living[else]which houses [the Tetris Sitter][end if][if current-mislit-scenery is not the player]. That [current-mislit-scenery] is also worth a look, or a scan[end if][if ur pine is in Mislit Limits].[paragraph break]An unripe ur-pine also stands here, intimidatingly big[end if].". roomnud of Mislit Limits is table of Mislit Limits nudges.

chapter scaly clays

the scaly clays are plural-named bounding boring scenery in Mislit Limits. description of scaly clays is "They rise up at such an angle they'd be dangerous to climb. The curst palace is sprawled out on top of them.". bore-text of scaly clays is "The scaly clays just block you. But you don't need to deal with them to fix the curst palace."

chapter unripe ur-pine

the unripe ur pine is boring vanishing LLPish scenery in Mislit Limits. understand "urpine" and "unripe urpine" as ur pine. "It covers a lot of ground[if crocus is not off-stage], but there's probably nothing else beneath it. [one of]Maybe it's hiding something. [or]You see red wondering if you'd see anything as ridiculous in Peru[stopping][end if].". bore-text is "The unripe ur-pine just sits there, almost impossibly big. Maybe you could make it smaller.". bore-check is the bore-ur-pine rule. printed name of unripe ur pine is "unripe ur-pine".

this is the bore-ur-pine rule:
	if current action is attacking, say "[one of]'I prune!' you think to yourself, involuntarily, seeing red.[or]'Re-up-in[']?' you hear a voice say, and you see red at how vernacular and contrived it sounds.[in random order]" instead;

a-text of unripe ur pine is "RYRYYR". b-text of unripe ur pine is "RYRGYR". parse-text of unripe ur pine is "x[sp]-[sp]N[sp]I[sp]-[sp]x". unripe ur pine is parse-spoilable.

chapter Nastier Stainer Retinas

the nastier stainer retinas are a plural-named boring vanishing LLPish thing. description is "They must be guarding ... well, something. They stare at you intensely.". "Nastier Stainer Retinas, which you uncovered by removing the unripe ur-pine, seem to be guarding something.". bore-text is "The retinas continue their, uh, stare-in.". bore-check of nastier stainer retinas is bore-retinas rule.

a-text of nastier stainer retinas is "YRRRYYR". b-text of nastier stainer retinas is "YR?R???". parse-text of nastier stainer retinas is "-[sp]x[sp]?[sp]x[sp]?[sp]?[sp]?".

this is the bore-retinas rule:
	if current action is attacking, say "You'd suffer, uh, tearins[']." instead;

chapter repents serpent

understand the command "present" as something new.

A repents serpent is a vanishing LLPish animal in Mislit Limits. initial appearance of repents serpent is "[one of]Oh, no! A[or]The[stopping] repents serpent guards the way west. It lets out ten reps of a particularly nasty hiss.". description of repents serpent is "Just one look at it and you feel re-spent and re-spent until you're spenter. It's good at mental pester'n, that's for sure.". understand "repent" and "repent serpent" as repents serpent.

a-text of repents serpent is "RRYRYRR". b-text of repents serpent is "RRYR???". parse-text of repents serpent is "x[sp]x[sp]E[sp]x[sp]?[sp]?[sp]?".

rule for supplying a missing second noun when showing:
	if repents serpent is touchable, now second noun is repents serpent.

chapter curst palace

The Curst Palace is a reflexive boring backdrop. drop-region of Curst Palace is towers. description of Curst Palace is "The Curst Palace [up-arc] [if player is in mislit limits]rises impressively. You are close enough to read its name(s) if you wish[else]towers high enough to see across the lake[end if]. Just one word could make it nicer! But which word?". bore-text of Curst Palace is "[if player is in mislit limits]Physical action won't help. You need to re-describe the Curst Palace to restore it[else]The palace is too far away to interact. You need to get closer, and even then, you can probably only examine or scan it. Or say the right word to restore it[end if].".

understand "castle up arc" and "castle arc up" and "castle up/arc" and "up arc" and "arc up" and "castle" as curst palace.

to say up-arc: say "[one of]Castle Up Arc (or is it Arc Up?)[no line break][or][one of]Castle Up Arc[or]Castle Arc Up[in random order][stopping]"

towers-min-flag is a truth state that varies;

check examining curst palace when player is not in Mislit Limits: say "The Curst Palace is too far away to make out details beyond its general decrepitude." instead;

max-pal-seen is a number that varies.

check scaning curst palace (this is the nab a few letters rule) :
	if curst palace is prefigured, continue the action;
	if player is in Loftier Trefoil, say "You'll want to walk outside first, at the very least." instead;
	if player is not in Mislit Limits:
		let newdelt be palace-let - max-pal-seen;
		if max-pal-seen is 0:
			say "You'd think you would see eleven lights for the curst palace, but some are blacked out, as if the settler was too far away to analyze everything.";
		else if newdelt > 0:
			say "Ooh! [if newdelt is 1]Another light[else if newdelt is 2]A couple more lights[else]A few more lights[end if], now.";
		else:
			say "You don't see any new information about the curst palace this time[if palace-let < max-pal-seen]. In fact, you have less information than when you were closer[end if].";
	else if max-pal-seen < 11:
		say "The entire settler lights up[if max-pal-seen is 0]--but it takes a while. You're lucky you're so close[else], finally[end if]!";
	if max-pal-seen < palace-let, now max-pal-seen is palace-let;

[logsync.py force next]
a-text of curst palace is "[cpset of pal-a]". b-text of curst palace is "[cpset of pal-b]". parse-text of curst palace is "[cpset of pal-clues]". curst palace is any-spoilable.

pal-clues is text that varies. pal-clues is "xx-xt-x-x-x".

pal-a is text that varies. pal-a is "RRYRRYRYRYR".

pal-b is text that varies. pal-b is "RRYR?YRYRY?".

to say cpset of (myt - text):
	let p-l be palace-let;
	repeat with L running from 1 to 11:
		say "[if L <= p-l][character number L in myt][else]*[end if]"

check entering curst palace: say "Less tours, more roust." instead;

check going inside in Mislit Limits:
	say "(assuming the way west, since [up-arc] is too high up)[paragraph break]";
	try going west instead;

check going west in Mislit Limits:
	if serpent is in Mislit Limits, say "[one of]You can't risk sneaking by the serpent--[up-arc] is right here, waiting to be changed! Just one (long) word! Though maybe if you could get rid of the serpent, you might have more wrongs to right. Maybe even some help with the task of restoring [up-arc]![or]'Step near a serpent... you muse, then 'TRAP SEEN.'[cycling]" instead;

chapter various curst palace clues

the accurst leap is auxiliary cluey scenery. "It would be sad if you jumped off it, so close to your goal."

a-text of accurst leap is "RRYRRYRYRYR". b-text of accurst leap is "RRYRRYRYRGR". parse-text of accurst leap is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]A[sp]x".

check jumping when player is in Mislit Limits and accurst leap is in Mislit Limits: say "I won't let you! You're too close! You can't jump into the accurst leap now!" instead;

the packet of clear catsup is auxiliary cluey scenery. "The packet of clear catsup is something you'd have missed without knowing about it. It is the sort of litter that keeps the castle seeming worse than ordinary."

check opening clear catsup: say "Not only is it litter, but it doesn't have any ridged bits to make it open easier. Still, a potential clue is a potential clue." instead;

a-text of clear catsup is "RRYRRYRYRYR". b-text of clear catsup is "RRGRRYRYRYR". parse-text of clear catsup is "x[sp]x[sp]E[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]A[sp]x".

the pest accrual is auxiliary cluey scenery. "Eww! Maybe they're good for nature or something."

a-text of pest accrual is "RRYRRYRYRYR". b-text of pest accrual is "RRYRRYPYRGR". parse-text of pest accrual is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]C[sp]-[sp]x[sp]A[sp]x".

the c-p is privately-named auxiliary cluey scenery. printed name of c-p is "cactus pearl". "You're pretty sure it's not a pearl cactus. That'd be bigger."

a-text of c-p is "RRYRRYRYRYR". b-text of c-p is "RRYRRYRYRYR". parse-text of c-p is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

does the player mean doing something with the c-p when c-p is touchable: it is likely.
does the player mean doing something with the pearl cactus when c-p is not touchable: it is likely.

the pearl cactus is auxiliary cluey scenery. "You're pretty sure it's not a cactus pearl. That'd be smaller and rounder."

a-text of pearl cactus is "RRYRRYRYRYR". b-text of pearl cactus is "RRYRRYRYRYR". parse-text of pearl cactus is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

the accu plaster is auxiliary cluey scenery. "It was meant to hold some of the curst palace together, but it's crumbling now."

a-text of accu plaster is "RRYRRYRYRYR". b-text of accu plaster is "RRYRRYRYRYP". parse-text of accu plaster is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]R".

the capsule cart is auxiliary cluey scenery. "It is bright red and could've held anything, really, but it reads [first custom style]CAPSULE CART[r]."

a-text of capsule cart is "RRYRRYRYRYR". b-text of capsule cart is "RRYRRYRYRYR". parse-text of capsule cart is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

the Last Acre Cup is auxiliary cluey scenery. "A reward for a forgotten and useless contest, just part of the garbage here."

a-text of last acre cup is "RRYRRYRYRYR". b-text of last acre cup is "RRYRRYRYRYR". parse-text of last acre cup is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

the Talc Spa Cure is auxiliary cluey scenery. "It's empty, but it's another sort of luxury item that people moving into the Curst Palace's old location would love."

a-text of Talc Spa Cure is "RRYRRYRYRYR". b-text of Talc Spa Cure is "RRYPRYRYRYR". parse-text of talc spa cure is "x[sp]x[sp]-[sp]C[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

nextclue is a list of thing variable. nextclue is { accurst leap, clear catsup, pest accrual, cactus pearl, pearl cactus, accu plaster, capsule cart, last acre cup, talc spa cure }

palace-clue-index is a number that varies.

current-mislit-scenery is a thing that varies.

after going to Mislit Limits (this is the add palace clues if talked to teri rule):
	if flip-final-clue is true:
		say "You notice something [if palace-clue-index > 0]else [end if]you wouldn't have seen without St. Teri's help.[run paragraph on]";
		if palace-clue-index > 0, moot entry palace-clue-index in nextclue;
		increment palace-clue-index;
		if palace-clue-index > number of entries in nextclue, now palace-clue-index is 1;
		now current-mislit-scenery is entry palace-clue-index in nextclue;
		move current-mislit-scenery to Mislit Limits;
		say " That [entry palace-clue-index in nextclue] must be important. You note it as further scenery in your pedanto-notepad.";
		pad-rec-q "scenery";
		now flip-final-clue is false;
	continue the action;

check taking scenery in Mislit Limits:
	if noun is curst palace, say "You need to make it worth taking back." instead;
	if noun is clear catsup, say "Picking up litter is admirable, but it's small thinking with your powers." instead;
	if noun is accurst leap, say "Take a leap of logic instead." instead;
	say "You can't and don't need to take it, but maybe you can take a clue from it." instead;

table of towers final command synonyms
blurb
"Breathtaking"
"Exceptional"
"Fantastic"
"Magnificent"
"Marvelous"
"Miraculous"
"Outstanding"
"Overwhelming"
"Sensational"
"Stupendous"
"Superlative"
"Unsurpassed"

to say a-bunch: say "[if here-picaros is 2]an ex-bunch[else]a bunch[end if]"

definition: a room (called twr) is towery:
	if twr is Loftier Trefoil, decide no;
	if map region of twr is towers, decide yes;

definition: a thing is followy:
	if it is rodney, no;
	if it is a picaro and it is touchable, yes;
	no.

book Leak Lake (backdrop)

Leak Lake is a proper-named useless boring backdrop. It is in Salted Deltas, Actionless Coastlines, Artist Traits Strait, Mislit Limits. drop-region of Leak Lake is towers. "Leak Lake is so named because many bodies of water leak into it, and it leaks into others. You are glad it doesn't smell of carp, but it does smell of some sort of vegetable.". bore-check is bore-leak-lake rule. bore-text is "[cross-leak-lake].".

this is the bore-leak-lake rule:
	if the current action is drinking, say "Yo, sick! So icky!" instead;
	if the current action is entering:
		if player is in Actionless Coastlines and bot boat is in Actionless Coastlines, try entering bot boat instead;
		say "Go out, eh? Too huge!" instead;

to say cross-leak-lake: say "The [noun] [is-are of noun] just there. Not much to do with [it-them of noun]. You [if player is in Mislit Limits]found[else]need[end if] a way to cross [the noun].";

book shoals aslosh (backdrop)

the shoals aslosh are a useless boring plural-named backdrop. they are in Salted Deltas, Actionless Coastlines, Artist Traits Strait, Mislit Limits. "They make you say 'Ah! Loss!' (or Oh! Lass! if you're feeling romantic.) And, of course, if you focus on one, you see halos.". bore-check is the bore-leak-lake rule. bore-text is "[cross-leak-lake].". drop-region of Shoals Aslosh is towers.

book Dire and Arid Den

there is a sideroom called Dire and Arid Den. It is innie. It is in Towers. "You feel drained dreadin['] at the thought of dying here. It's so thick, you bet you could examine or even scan it. You don't really see a way back up, and you aren't going to, until you start thinking more positively.[paragraph break]A Nerd-Aid Diner ad lies here, too.". roomnud of Arid Den is table of Dire And Arid Den nudges. missed-text of Arid Den is "a room below the [denim] in [gradient]".

check going up in Dire and Arid Den: say "You wish you could feel positive enough to figure a way back up, but you're just too drained." instead;

outside-text of arid den is "You need to snap out of the funk you're in. Get the right mindset.".

exits-text of arid den is "You aren't thinking positively enough to find a way out at the moment."

chapter bogus-dandier (flippable scenery for room)

the bogus-dandier is privately-named ssno vanishing scenery in Arid Den. description is "BUG: you should not see this.". printed name is "Dire and Arid Den".

a-text of bogus-dandier is "RYRRYYR". b-text of bogus-dandier is "?YR?Y?R". parse-text of bogus-dandier is "?[sp]-[sp]x[sp]?[sp]-[sp]?[sp]R". bogus-dandier is parse-spoilable.

section drained dreadin

drained dreadin is ssno boring scenery in Arid Den. description is "It works doubly on you to make you feel cheerless.". bore-text is "You need some way to dispel the drained dreadin[']. Replace it with a more positive emotion.". printed name of drained dreadin is "drained dreadin[']".

a-text of drained dreadin is "RYRRYYR". b-text of drained dreadin is "PYRRY?R". parse-text of drained dreadin is "D[sp]-[sp]x[sp]x[sp]-[sp]-[sp]R".

check scaning the player when player is in Arid Den:
	say "You can't escape the feeling of drained dreadin['].";
	try scaning drained dreadin instead;

section nerd aid

the Nerd Aid Diner ad is boring auxiliary scenery in Arid Den. printed name of Nerd Aid diner ad is "Nerd-Aid Diner ad". description of Nerd Aid is "It's an advertisement for a place that might help you out of messes like the one you're in now. Which is a bit confusing, because you'd need to get out of this mess to get there. Maybe it's helpful in its own way, though.". bore-text of nerd aid is "The Nerd-Aid Diner ad is not worth doing anything with.".

a-text of Nerd Aid Diner ad is "RYRRYYR". b-text of Nerd Aid Diner ad is "?Y??YYR". parse-text of Nerd Aid Diner Ad is "x[sp]A[sp]x[sp]x[sp]I[sp]E[sp]x". nerd aid diner ad is parse-spoilable.

book Dourest Detours

Dourest Detours is an outie sideroom in Towers. "Negativity and apathy overwhelm you here. There must be some way to brush them off and feel energy again. The negativity--well, you can even hear it! You could go any which way, but why bother?". roomnud of Dourest Detours is table of Dourest Detours nudges. missed-text of Dourest Detours is "a room outside of the dead-end edge-rooms if you try to go further out".

exits-text of Dourest Detours is "You don't have the energy to find exits in any direction at the moment. How to change that?"

last-detour is a room that varies.

to say note-detour: if dourest detours are unvisited, say ". You could probably get lost exploring [the random bounding scenery in location of player], if you wanted to see ALL of the Wildest Wilteds"

check entering when location of player is detourable:
	if noun is bounding scenery and dourest detours are unvisited, try going northwest instead;

chapter "rousted" flip-scenery

the bogus-rousted is a privately-named vanishing boring scenery in Dourest Detours. description of bogus-rousted is "[bug-report]". bore-text is "[bug-report]". printed name of bogus-rousted is "Dourest Detours". [it is an LLP but not LLPish. Once you've entered the Dourest Detours, you have to solve it to get out, so it can't go through the usual LLPish code paths.]

a-text of bogus-rousted is "RYYRRYR". b-text of bogus-rousted is "R??RRYR". parse-text of bogus-rousted is "x[sp]-[sp]-[sp]x[sp]x[sp]-[sp]x".

chapter seismal samiels

the seismal samiels are a plural-named LLPish vanishing boring thing in Dourest Detours. description of seismal samiels is "Airy-sounding words, and what an airy mess! And yet, they aren't distracting you. Probably there are some mesails (another airy word) floating in them. The choice is yours: you can disperse with the seismal samiels for a small moral boost, or you can just get on with getting out of here.". "Seismal samiels swirl around here. Lots of hot air for two pretty hot-air-ish words. They sort of seem like they're trying to impede and depress you, and of course they'd be nice to get out of the way for good -- or just ignore completely, to get back to [last-detour]."

a-text of seismal samiels is "YYRRYRR". b-text of seismal samiels is "YY?R?R?". parse-text of seismal samiels is "-[sp]I[sp]?[sp]x[sp]?[sp]x[sp]?". seismal samiels are parse-spoilable.

book Guardians

[this is arranged from south to north, then east to west, and the first place you see a guardian running through this way is where we define the guardian.]

chapter stubs, etc

to say gd of (zz - a guardian):
	if zz is the-hostile, say "[one of][or] (still mum about their hostile ol['] heist)[stopping]";
	if zz is atheists, say "[one of] (well, they're certainly wasting each other's time talking about there's no afterlife)[or][stopping]";
	if zz is natives site van, say "[one of][or] (you assume, by how the people inside are talking about the Wildest Wilteds and looking at you funny)[stopping]";

to say mb-aswell:
	if guardians-seen is 3:
		say " as well";

to say mb-also:
	if guardians-seen is 2:
		say " also";

the initial appearance of a guardian is usually "[gd of the item described]."

chapter Scope Copse guardians

section bluster butlers

the bluster butlers are a plural-named neuter purple guardian. understand "bluster butler" and "butler" as bluster butlers. "Bluster butlers, masters of direct intimidation, guard the way [psgdir of bluster butlers]."

description of bluster butlers is "Bluster butlers are known for handling undesirables roughly. Their employers (or alma mater) are sewn into what they're wearing: [i]Trebul's[r]."

a-text of bluster butlers is "RYRRRYR". b-text of bluster butlers is "R?RRR??". parse-text of bluster butlers is "x[sp]?[sp]x[sp]x[sp]x[sp]?[sp]?".

gualoc of bluster butlers is Scope Copse. guadir of bluster butlers is west. block-text of bluster butlers is "The butlers begin running around, roaring all sorts of reasons you don't want to go west and it wouldn't be good for society anyway. 'See what's west? URL best!' one says. You see red at the horrible rhyme.". clue-text of bluster butlers is "Maybe if the butlers were quieter, they'd have a better place to guard than here.". taunt-text of bluster butlers is "The bluster butlers cough far too loudly, almost half-laughing, before babbling about the importance of teams working together to guard important places. Perhaps they have no clue they might be next."

section denier nereid

a denier nereid is a red guardian. "A denier nereid, surprisingly far from shore, blocks your way [psgdir of denier nereid]."

description of denier nereid is "Alluring and all that, but very languid. She's not doing much, and she's doing a lot (for her) to tell you you don't need to do much."

a-text of denier nereid is "RYYRYR". b-text of denier nereid is "RGYR??". parse-text of denier nereid is "R[sp]E[sp]-[sp]x[sp]?[sp]?". denier nereid is parse-spoilable.

gualoc of denier nereid is Scope Copse. guadir of denier nereid is north. block-text of denier nereid is "She languidly expresses how you don't really need to go [psgdir of denier nereid], and anyway, if you do save somebody or something, they won't be properly grateful, so why bother. She sees you getting tired and says '[first custom style]END IRE[r]!' This causes you to see red.". clue-text of denier nereid is "Looking again at the denier nereid, she is rather far away from her native water. Perhaps she should be pulled back.". taunt-text of denier nereid is "The denier nereid gives a 'why bother' gesture."

section snider diners

The snider diners are plural-named flippable blue guardians. "Snider diners block the way [psgdir of snider diners].". description is "They're sniffing the air and mumbling about sophisticated palates and not being interrupted. All very drily."

understand "diner" as diners.

a-text of snider diners is "RYRRYR". b-text of snider diners is "R??R?R". parse-text of snider diners is "x[sp]?[sp]?[sp]x[sp]?[sp]x". snider diners is parse-spoilable.

gualoc of snider diners is Scope Copse. guadir of snider diners is east. block-text of snider diners is "They sniff and seem to dig around for concealed cutlery. You don't need or want any part of that, or of their wit[if player has dagger], even if your ragged dagger were more effective[end if].". clue-text of snider diners is "The diners mutter about how bad weather can ruin the ambience of open-air meals.". taunt-text of snider diners is "The diners smack their lips, and you think you hear the zhk of silverware."

chapter Baldest Blasted Saltbed guardians

section promise imposer

The promise imposer is a blue neuter guardian. "A promise imposer stands [psgdir of promise imposer], not willing to let you by. [imposer-guard][one of]. Promise Imposers are the highest-paid and most esteemed of Elvira's henchmen, assigned to repress potential anti-Elivra types from from doing what they want or need to do[or][stopping].". description of promise imposer is "Looking serious and confident and superior. It's not clear what promises they're imposing, but the net result is, they just don't want you to get by. But perhaps you could bump its social or job status down a notch."

to say imposer-guard:
	let rm2 be far-room of promise imposer;
	if rm2 is visited:
		say "After all, you've been to [rm2]";
	else if rm2 is tower-accessible:
		say "After all, you can to get wherever's behind the imposer, if you think about it";
	else:
		say "You don't have full documentation why you NEED to get to the other side"

a-text of promise imposer is "RYRYRRY". b-text of promise imposer is "RYRYRRY". parse-text of promise imposer is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-".

gualoc of promise imposer is Baldest Blasted Saltbed. guadir of promise imposer is east. block-text of promise imposer is "The promise imposer shuffles into position, promising you there's another way around, and perhaps you promised not to move them and forgot about it. Man, they're good at what they do!". clue-text of promise imposer is "Whoever they promised, whatever they promised, or whomever they make promise something, the promise imposer is the best at their job.". taunt-text of promise imposer is "The promise imposer mutters how, now you can get around a little easier, you don't NEED to get rid of them much at all. That's how it works, right?"

section traipse pirates

some traipse pirates are plural-named red guardians. "Traipse pirates dance to the [psgdir of pirates].". description of pirates is "Sun-burnt and proud of it. They're unlikely to hand you a piastre or discuss the REST API."

understand "pirate" as pirates.

pirate-countdown is a number that varies.

every turn when traipse pirates are touchable:
	if pirate-countdown > 0:
		decrement pirate-countdown;
	else:
		if a random chance of 1 in 5 succeeds:
			say "One of the pirates swats at an air pest, red-faced--and reaps it! But it leaves a red welt.";
			now pirate-countdown is 3;

a-text of traipse pirates is "RYRRYYR". b-text of traipse pirates is "?YRRY?R". parse-text of traipse pirates is "?[sp]-[sp]x[sp]x[sp]-[sp]?[sp]x". traipse pirates are parse-spoilable.

gualoc of pirates is Baldest Blasted Saltbed. guadir of traipse pirates is north. block-text of traipse pirates is "'Tips are...' one pirate says. 'Spare it!' you lash out. Everyone's a bit red-faced over this.". clue-text of traipse pirates is "You can't make the pirates less in-shape, but maybe something more cosmetic will work.". taunt-text of traipse pirates is "A wry, wary 'Yawr!' from the pirates makes you feel awry."

chapter Anemic Cinema guardians

section ingrates

some angriest ingrates are plural-named white guardians. "Angriest ingrates whining about any old thing block the way [psgdir of ingrates]."

understand "ingrate" and "angriest ingrate" as ingrates.

description of angriest ingrates is "They're spouting some of the angriest ranting you've heard, though it doesn't make you see red right away. And yet, angriest is so close to whining."

a-text of angriest ingrates is "YRRRRYYR". b-text of angriest ingrates is "?PPRRY?R". parse-text of angriest ingrates is "-[sp]N[sp]G[sp]x[sp]x[sp]-[sp]-[sp]R". angriest ingrates is parse-spoilable.

gualoc of ingrates is Anemic Cinema. guadir of ingrates is west. block-text of ingrates is "They quite simply won't shut up about things, though they seem well-feed, intelligent and un-ugly enough. They're the rangiest of the nuisances you've come across, zipping back and forth in a red blur.". clue-text of ingrates is "Gee. It would be nice to make the ingrates less aggressive, even if you can't make them less whiny.". taunt-text of ingrates is "The ingrates seem almost upset they are not important enough to get rid of."

section reed's ale

the Reeds Ale is a vanishing thing. description of Reeds Ale is "It's open and, from [el-la-full]'s frequent swigs, apparently bottomless. You can't read the details of the bottle, but it's probably not very good for you. Or [el-la-first]. Yet [el-la-first] is attached to it, for some reason. Well, you probably know why by now, if you got this far.". understand "reed/reeds ale" and "reed/reeds" as Reeds Ale. printed name is "Reed's Ale".

a-text of Reeds Ale is "RYRYYRYR". b-text of Reeds Ale is "PGRYYRYR". parse-text of Reeds Ale is "R[sp]E[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x".

to say deal-seer:
	say "[one of]'[el-la-full], deal seer, at your service!' someone with a bottle of Reed's Ale ambushes you. They don't seem like they want to be budged[or][el-la-full], Deal Seer, remains here, with that bottle of Reeds Ale[stopping]"

Lars Eede is a red guardian. "[deal-seer]."

a-text of Lars Eede is "RYRYYRYR". b-text of Lars Eede is "RYRYYRYR". parse-text of Lars Eede is "x[sp]E[sp]x[sp]E[sp]A[sp]x[sp]E[sp]x".

description of Lars Eede is "He's carrying that bottle of Reed's Ale but seems awfully jittery."

gualoc of Lars Eede is Anemic Cinema. guadir of Lars Eede is east. block-text of Lars Eede is "'I'm a deal seer, and I'm obliged to make deals with people before they go on their way.'". clue-text of Lars Eede is "Maybe you can free Lars from his capitalist or drinking urges.". taunt-text of Lars Eede is "Lars Eede reaches for a hidden bottle of Reed's Ale and takes a swig."

Elsa Erde is a red female guardian. "[deal-seer].".

a-text of Elsa Erde is "RYRYYRYR". b-text of Elsa Erde is "RYRYYRYR". parse-text of Elsa Erde is "x[sp]E[sp]x[sp]E[sp]A[sp]x[sp]E[sp]x".

description of Elsa Erde is "She's carrying that bottle of Reed's Ale but seems awfully jittery."

other-g of lars eede is elsa erde. other-g of elsa erde is lars eede.

understand "deal seer" and "deal/seer" as Lars Eede when player is male.

understand "deal seer" and "deal/seer" as Elsa Erde when player is female.

rese is a truth state that varies. [checks if our point scoring command was resealed (true) or released (false)]

to say el-la-full:
	say "[if player is female]Elsa Erde[else]Lars Eede[end if]"

to say el-la-first:
	say "[if player is female]Elsa[else]Lars[end if]"

gualoc of Elsa Erde is Anemic Cinema. guadir of Elsa Erde is east. block-text of Elsa Erde is "'I'm a deal seer, and I'm obliged to make deals with people before they go on their way.'". clue-text of Elsa Erde is "Maybe you can free Lars from his capitalist or drinking urges.". taunt-text of Elsa Erde is "Elsa Erde reaches for a hidden bottle of Reed's Ale and takes a swig."

section mardier admirer

A mardier admirer is a female purple guardian. "A mardier admirer to the [psgdir of mardier admirer] would rather you stay here and listen to their 'honest' evaluations than go past them."

a-text of mardier admirer is "RYRRYYR". b-text of mardier admirer is "???R?GR". parse-text of mardier admirer is "?[sp]?[sp]?[sp]x[sp]?[sp]E[sp]x". mardier admirer is parse-spoilable.

gualoc of mardier admirer is Anemic Cinema. guadir of mardier admirer is north. block-text of mardier admirer is "The mardier admirer, a rampant [if player is female](ow!) wo[end if]mantrap, hugs you and won't let go and explains you are even cuter than the lost duck over behind them.". clue-text of mardier admirer is "If only there were a legal or moral reason for the mardier admirer to cool their ardor for you!". taunt-text of mardier admirer is "'Good job, I guess,' calls the mardier admirer."

description of mardier admirer is "[if mardier admirer is male]He[else]She[end if] seems to be gazing at you with a bizarre mix of reverence and scorn. While [admsex] is too scared to approach you, that doesn't stop a constant stream of dialogue. It's like [admsex] is lonely for that special someone to help share and develop their feelings but doesn't know how to express it."

to say admsex:
	say "[if mardier admirer is male]he[else]she[end if]"

chapter Leveraged Everglade guardians

section realist tailers

the realist tailers are blue plural-named guardians. "Realist tailers to the [psgdir of realist tailers] will probably let you pass ... at first. But they will calmly ask if your decision is based on some silly dream or cold, hard logic."

description of realist tailers is "Looking very smug. One or two, you could deal with and dismiss. But a whole deluge? Probably not, even though you know their brand of 'realism' is quite silly. And yet, perhaps you could make them too silly for each other."

a-text of realist tailers is "RYRRYYR". b-text of realist tailers is "R?RR?YR". parse-text of realist tailers is "x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]x".

gualoc of realist tailers is Leveraged Everglade. guadir of realist tailers is north. block-text of realist tailers is "The realist tailers let you by ... at first. But then, from behind, they start pointing out that's not the only way through, and besides, do you really need to go past? Their arguments aren't much, but they bog you down and pull you back.". clue-text of realist tailers is "Perhaps you can subject the realist tailers to too much of their realism, even for them.". taunt-text of realist tailers is "The realist tailers mention that sort of thing happens to people who aren't as living-in-the-real-world as they are."

section fluster self rut

the fluster self rut is a boring red guardian. description is "Just looking at it makes you feel agitated, makes you waste energy worrying how much energy it has wasted and will waste. Maybe there's a way to calm it, and yourself, down. Reading it might reveal a brand name, or it might not.". "A fluster-self rut blocks your way [psgdir of fluster self rut].". bore-text of fluster self rut is "You can't do much with the fluster self rut. Well, nothing exciting. But there is a way to deal with it, and it'd be convenient to have out of the way.". printed name is "fluster-self rut".

a-text of fluster self rut is "RYRRRYR". b-text of fluster self rut is "R?RRR?R". parse-text of fluster self rut is "x[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x".

gualoc of fluster self rut is Leveraged Everglade. guadir of fluster self rut is east. block-text of fluster self rut is "You try going [psgdir of fluster self rut]. It should be easy, but it's nearly impossible. Maybe you can make the fluster-self rut less active.". clue-text of fluster self rut is "You should be able to make it over the fluster-self rut, but you can't. It's just active enough to brush you back.". taunt-text of fluster self rut is "nonsensical yabbering from the fluster-self rut leaves you wondering if you just got rid of the [if number of touchable guardians > 1]easiest[else]easier[end if] obstacle."

chapter Treading Gradient guardians

section resident trendies

some Resident Trendies are plural-named terse blue guardians. "Resident trendies block your way [psgdir of resident trendies].". description is "They seem a bit too cool for you, but then, cool is a state of mind, and maybe you could change that."

a-text of resident trendies is "RYRRYYRR". b-text of resident trendies is "R?RRY?R?". parse-text of resident trendies is "x[sp]?[sp]x[sp]x[sp]-[sp]?[sp]x[sp]?".

gualoc of resident trendies is Treading Gradient. guadir of resident trendies is east. block-text of resident trendies is "The resident trendies can't imagine why YOU earned the right to just cut past them like that! As if you were cool enough to even get close!". clue-text of resident trendies is "Looking back at the resident trendies, they still seem too cool for you. But maybe it is all in your mind.". taunt-text of trendies is "The trendies say you did okay but also they are sure they could've done that, too, if they had nothing better to do."

section sweatier wait-seer

The sweatier wait seer is a blue guardian. "A sweatier wait-seer seems in no hurry to let anyone [psgdir of wait seer].". printed name of wait seer is "sweatier wait-seer". description of sweatier wait seer is "The wait-seer is sweatier than anyone else you have run across here but has more than enough energy to block you getting by. You glance away, seeing red, after hearing 'I...we...stare.'"

a-text of sweatier wait seer is "RYYRYYRR". b-text of sweatier wait seer is "?YYRY?RR". parse-text of sweatier wait seer is "?[sp]-[sp]A[sp]x[sp]-[sp]?[sp]x[sp]x".

gualoc of wait seer is Treading Gradient. guadir of wait seer is north. block-text of wait seer is "The wait-seer doesn't break a second sweat convincing you you don't need to go past. There are other more scenic ways around, and perhaps you don't need to visit what is behind to fulfill whatever your quest is anyway. The logic leaves your head spinning, but the wait-seer sits as serenely as at the start of the lecture, or whatever mind-fu you got pulled on you.". clue-text of wait seer is "Boy! You'd get tired with the wait-seer's life. Maybe you could make them tired, too.". taunt-text of wait seer is "The sweatier wait-seer nods slowly and mumbles some Hakuna Matata nonsense.".

chapter Salted Deltas guardians

section atheists

the asset hit atheists are plural-named purple guardians. "Asset-hit atheists to the [psgdir of atheists] seem quite set in their ways. And their territory. Maybe a closer look will tell more about them.". description is "They nod and gesture and say 'A-ha!' a lot, but they do seem to draw out everything they say. They look well off. Asset-hit, if you will. [one of]Their style--you know, if you examine again, you might look closer and get a clue how to get rid of them[or]Their ties, hats... you see red[stopping].". printed name of asset hit atheists is "asset-hit atheists". understand "atheist" as atheists.

a-text of asset hit atheists is "RYRRYYRR". b-text of asset hit atheists is "RY?R?YR?". parse-text of asset hit atheists is "x[sp]-[sp]?[sp]x[sp]?[sp]-[sp]x[sp]?".

gualoc of atheists is Salted Deltas. guadir of atheists is east. block-text of atheists is "The atheists slowly and painfully explain to you that you're ignoring them and their very logical arguments. You can run away, but running through them--that's just rude.". clue-text of atheists is "The atheists have no shortage of compelling logic, but perhaps their presentation could be adjusted.". taunt-text of atheists is "The atheists commend your logic. Piffling, compared to theirs. But a start."

chapter Danger Garden guardians

section alarming grailman

the alarming grailman is a red guardian. understand "liam garn" and "liam/garn" as grailman. "An alarming grailman to the [psgdir of grailman] has you worried there's no way by him."

description of grailman is "You could probably take a below-average grailman, but this one's a cut above. He seems to be flexing his muscles a lot, waiting for someone to try going by."

a-text of alarming grailman is "RYRRYRYR". b-text of alarming grailman is "RYRRYR?R". parse-text of alarming grailman is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x".

gualoc of grailman is Danger Garden. guadir of grailman is north. block-text of grailman is "The grailman, with well-above-average skills for your average passage-blocker, gets in front of you. 'Arm! Align!' he booms, making you see red. You're not going that way with him there.". clue-text of grailman is "The grailman is the first you've ever met, but he seems more than adequate enough to block your way.". taunt-text of grailman is "The grailman stands a bit taller, as if challenging you to remove him, or seeing proof he is even more above average than he thought he was."

section natives' site van

the natives site van is a white guardian. "A natives['] site van block your way [psgdir of natives site van], though you don't really see anything interesting there.". printed name is "natives['] site van". description of natives site van is "They're not, like, a particular skin color or with a particular accent. That'd be racist of me. They just seem to talk about the Wildest Wilteds like they know all about it, and they're looking at you funny, as if they know you don't fit in."

a-text of natives site van is "RYYRYRR". b-text of natives site van is "??YRYRR". parse-text of natives site van is "?[sp]?[sp]-[sp]x[sp]-[sp]x[sp]x".

understand "native" and "native site/van" and "native site van" as natives site van.

gualoc of natives site van is Danger Garden. guadir of natives site van is south. block-text of natives site van is "The natives assure you there isn't anything you REALLY want to see there. Perhaps there are better things elsewhere, but nothing behind there. I mean, they don't even know why they're HERE. They should be doing better.". clue-text of natives site van is "That natives['] site van seems ill-placed, here. Maybe you can help it move somewhere more interesting.". taunt-text of natives is "The natives mention no TRUE resident of the Wildest Wilteds would be displaced so easily." [bold-ok]

section bonker

The REB NOK bonker is a purple guardian. "You [one of]recognize a[or]still see that[stopping] [bonker] guarding the way [psgdir of bonker][one of]. Something must be behind--while they're usually just for intimidation, they can, well, knock rebels like you[or][stopping].". description of bonker is "It's twice your height and upright and club-shaped and ready to [if bonker is passtried]re-[end if]bonk anyone who goes east while it's still functional, and boy does it look functional[one of]. While it's not quite as violent as a boot-o-bot or space-taking as Obst-Bots, its presence indicates something important to the east[or][stopping].". printed name of REB NOK bonker is "REB-NOK bonker".

a-text of REB NOK bonker is "RRYRYR". b-text of REB NOK bonker is "?RY??R". parse-text of REB NOK bonker is "?[sp]x[sp]-[sp]?[sp]?[sp]x". bonker is parse-spoilable.

retrytext of REB NOK bonker is ", poised to re-bonk"

gualoc of bonker is Danger Garden. guadir of bonker is east. block-text of bonker is "[if bonker was passtried]RE-BONK! You see red and[else]'No, berk!' the bonker booms, before, um, bonking you. You see red. Your retinas re-stain. It's not lethal or anything, but you[end if] stagger back, dazed, to the center of Danger Garden[if natives site van is touchable]. The natives can't help but mutter that THEY would've known better[end if]. The bonker still looks in good shape.". clue-text of bonker is "'BONKER DEFENDING JAIL AT 100% EFFICIENCY!' you hear from the east.". taunt-text of bonker is "'THE BONKER IS NOT DESTROYED SO EASILY!'". [bold-ok]

section stinger

The grin set stinger is a purple terse guardian. "The stinger that replaced the bonker remains here guarding the east passage, fizzing about actively. It's got a grin set in it. You could also [b]READ[r] its brand.". description of stinger is "It's certainly active. Maybe if it calmed down, you could get past it.". printed name of grin set stinger is "grin-set stinger".

a-text of grin set stinger is "RYRRYRR". b-text of grin set stinger is "RYRRYRR". parse-text of grin set stinger is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x".

gualoc of stinger is Mislit Limits. guadir of stinger is east. block-text of stinger is "The stinger needles at you menacingly. You back off.". clue-text of stinger is "The stinger looks unusually active.". taunt-text of stinger is "Fizzing and buzzing from the stinger." [the stinger isn't really in Mislit Limits, but I need this hack for it to replace the bonker.]

chapter Artist Traits Strait guardians

to say hostile-guardian: say "[if player is female]Lois the Hostile[else]the Hostile-Is-He Lot[end if]"

section lois the hostile

Lois the Hostile is a female proper-named purple guardian. "You recognize Lois the Hostile, renowned for forced-contrarian views on religion, as well as the 'real' Lois. She just likes to block people, and in this case, she's blocking your way [psgdir of lois the hostile].". description is "She doesn't exactly look happy, but she doesn't look irredeemably evil."

a-text of lois the hostile is "RYRYYRR". b-text of lois the hostile is "?GRYYRR". parse-text of lois the hostile is "x[sp]O[sp]x[sp]I[sp]E[sp]x[sp]x". lois the hostile is parse-spoilable.

gualoc of lois the hostile is Artist Traits Strait. guadir of lois the hostile is north. block-text of lois the hostile is "She mentions you [one of]should know better than[or]are more persistent than[stopping] that agnostic with [his-her] blasphemous science experiments.[paragraph break]How very [i]hostile[r]. It might be good for her divinity career if you fixed that.". clue-text of lois the hostile is "Boy! Lois sure could use some down-home kindness.". taunt-text of lois the hostile is "Lois the Hostile sniffs as if to say, they deserved what they got. Then she looks at you askance."

section hostile is he lot

The Hostile Is He Lot is a plural-named purple guardian. "The Hostile-is-He Lot, a swarm of contrarians who question anything and everything except their own nuisance value, block the way [psgdir of hostile is he lot].". description is "It's amazing, the variety of hostile expressions!". printed name of Hostile Is He Lot is "Hostile-Is-He Lot".

a-text of he lot is "RYRYYRR". b-text of he lot is "??RYYR?". parse-text of he lot is "?[sp]?[sp]x[sp]-[sp]-[sp]x[sp]?". he lot is parse-spoilable.

other-g of Lois the Hostile is he lot. other-g of he lot is Lois the Hostile.

gualoc of he lot is Artist Traits Strait. guadir of he lot is north. block-text of he lot is "They mention you [one of]should know better than[or]are more persistent than[stopping] that agnostic with [his-her] blasphemous science experiments.[paragraph break]Hostile indeed! Fixing that might help their divinity careers.". clue-text of he lot is "Boy! The Lot sure could use some down-home kindness.". taunt-text of he lot is "The Hostile-is-He Lot sniffs as if to say, they deserved what they got. Then they look at you askance."

chapter rules for flipping guardians

after fliptoing a guardian (this is the guardian taunt and track progress rule) :
	if guar-here is 0:
		if keycar is off-stage and player is not in Topside Deposit and player is not in Actionless Coastlines: [note you can avoid the keycar if you really want, even clearing other rooms of guardians without the keycar appearing, but the NW/SE rooms must eventually cause it to pop up if you try to clear everything. You can ignore the nereids and grailman to have maximum mobility, in fact]
			say "A keycar speeds into view with all the guardians gone! And not just any keycar. An annoying yacker keycar, a novelty toy whose sales helped make Elvira rich, before she sponsored a campaign to fine reckless keycar users. No kickbacks were proven.[paragraph break]Anyway, the keycar's probably not going to stop you going anywhere, but it'd be nice to get rid of.";
			move keycar to location of player;
		continue the action;
	if other-g of noun is not dreads adders, moot other-g of noun;
	repeat through table of guardian specific taunts:
		if noun is guagone entry and guaname entry is touchable and guaname entry is not prevtaunt:
			deliver-taunt guaname entry and noun;
			continue the action;
	let tauntgar be the list of touchable not prevtaunt guardians;
	if number of entries in tauntgar > 0:
		sort tauntgar in random order;
		say "[taunt-text of entry 1 in tauntgar][line break]";
		now entry 1 in tauntgar is prevtaunt;
	continue the action;

after fliptoing a guardian (this is the recalculate minimums no matter what rule) :
	choose-new-hint-guardian;
	shuffle-guardians noun;
	continue the action;

to deliver-taunt (g1 - a guardian) and (g2 - a guardian):
	repeat through table of guardian specific taunts:
		if g1 is guaname entry and g2 is guagone entry:
			say "[guatext entry][line break]";
			now g1 is prevtaunt;
			continue the action;
	say "[taunt-text of g1][line break]";

section specific taunt table

table of guardian specific taunts
guaname	guagone	guatext
Lois the Hostile	grailman	"Lois the Hostile sniffs that the grailman probably wasn't even guarding a very, um, virtuous grail."
hostile is he lot	grailman	"The Hostile-is-He Lot sniffs that the grailman probably wasn't even guarding a very, um, virtuous grail."

chapter min-score-of-towers

adjblasting is an action applying to one thing.

a room can be tower-accessible. a room is usually not tower-accessible.

a room can be accessible, sideview, mightaswell or inaccessible. a room is usually inaccessible.

to shuffle-guardians (goner - a guardian):
	let MR be other-room of goner;
	if debug-state is true, say "DEBUG: opening path to [MR]. It is [unless MR is accessible]not [end if]accessible.";
	now goner is prodded;
	if goner is dreads adders:
		now Topside Deposit is accessible;
		now Scope Copse is accessible;
		continue the action;
	if goner is white: [white guardians are optional]
		now MR is mightaswell;
		min-up;
		if can-see-map:
			draw-my-loc;
		continue the action;
	if goner is purple: [purple guardians must be dispelled]
		if goner is bonker, continue the action; [bonker is replaced by stinger]
		if MR is Actionless Coastlines or player is in Actionless Coastlines:
			now MR is accessible;
		else:
			now MR is sideview;
		if can-see-map, draw-my-loc;
		continue the action;
	if MR is tower-accessible:
		say "You [if MR is visited]notice somewhere [G] you already went to, so it'll be a little easier to get around[else]calculate you found a new path to an area you haven't seen yet[end if].";
		d "You already unlocked [MR].";
	else:
		d "You just unlocked [MR].";
	let gua-before be gua-to-clear;
	now MR is tower-accessible;
	if MR is not sideview or MR is not mightaswell:
		now MR is accessible;
	if gua-before is gua-to-clear: [if we still need to clear the same number of guardians, increase minimum score]
		d "unnecessary guardian cleared.";
		min-up;
	d "List of accessible rooms: [list of accessible rooms].";
	if can-see-map:
		draw-my-loc;
	let RG be number of not moot red guardians;
	if Lars Eede is moot or Elsa Erde is moot, decrement RG; [Lars and Elsa both go]
	let BG be number of not moot blue guardians;
	d "Reds left = [list of not moot red guardians].";
	d "Blues left = [list of not moot blue guardians].";
	d "Reds now [RG], blues now [BG]. [goner] = [if goner is red]red[else if goner is blue]blue[else if goner is white]white[else]purple[end if], gua-before = [gua-before], gua-after = [gua-to-clear].";
	if MR is Salted Deltas:
		now Artist Traits Strait is tower-accessible;
		now Actionless Coastlines is accessible;
		now Artist Traits Strait is accessible;
	if MR is Artist Traits Strait:
		now Salted Deltas is tower-accessible;
		now Actionless Coastlines is accessible;
		now Salted Deltas is accessible;
	else if Scope Copse is visited:
		if any-cleared is false:
			now any-cleared is true;
		else if number of not moot guardians is 0:
			say "That's all the pesky guardians gone! You're free to move around. But now, you want to move beyond. To the other side of the lake.";
		else if number of towers-access-needed rooms is 0:
			if clear-warn is false:
				say "You can move everywhere you need, now[if number of tower-accessible rooms < 14], but maybe you can clear a few more passages, if you want[end if].";
				now clear-warn is true;
		else if number of tower-accessible rooms >= 10:
			say "You probably don't have much left to do, to get everywhere you need.";
	continue the action;

definition: a room (called rm) is towers-access-needed:
	unless map region of rm is towers, no;
	if rm is Loftier Trefoil or rm is Fringe Finger or rm is Lost Lots or rm is Rawest Waster Waters or rm is Mislit Limits or rm is Mesprise Premises, no;
	if rm is tower-accessible, no;
	yes;

to decide which number is gua-to-clear:
	let temp be 0;
	if blasted saltbed is not accessible and Leveraged Everglade is not accessible, decide on 5; [1]
	if Treading Gradient is not accessible, increment temp; [2]
	if Anemic Cinema is not accessible, increment temp; [3]
	if Danger Garden is not accessible, increment temp; [4]
	if Salted Deltas are not accessible and Artist Traits Strait is not accessible, increment temp; [5]
	decide on temp. [ the proof of this is straightforward: we need a path (deleted guardian) to get to each corner. For the NE, either strait/deltas is ok since we must clear the hostile and the atheists. We also need to get by the Scope Copse. Therefore we have 5 separate areas to link up: x+y=0, y=2, x=2, x=1 y=1, x+y=3. This is necessary/sufficient as anything in part 2-3-4 is 1 away from part 5. So if 5 is accessible, anything undone is 1 away from it. If 5 is not accessible, then it is 1 away from something done (except 1, in which case we just see the first area we go to from the 1's) and then the other not accessible areas are 1 away from 5, where we can go next. ]

clear-warn is a truth state that varies.

any-cleared is a truth state that varies;

[	if MR is a hotcorner:
		now distance of MR is 0;
	repeat with HS running through hotcorners:
		if MR is adjacent to HS and MR is a hotcorner and distance of MR > 1:
			now distance of MR is 1;
	d "[new-br-needed] is the new br needed. [br-needed] is the old.";
	d "Blue = [number of not moot blue guardians] Red = [number of not moot red guardians], overall = [new-br-needed].";]

guardian-to-hint is a guardian that varies.

check going (this is the guardian taunt and block rule):
	if mrlp is Towers:
		if noun is not a direction, say "You need to specify a direction, not a place." instead;
		if Mislit Limits is visited, continue the action; [probably not necessary but due to a silly hack with the stinger, I just want to make sure of things]
		repeat with QQ running through touchable guardians:
			if (gualoc of QQ is location of player and guadir of QQ is noun) or (gualoc of QQ is not location of player and guadir of QQ is opposite of noun):
				now QQ is passtried;
				if QQ is neuter, set the pronoun it to QQ;
				now guardian-to-hint is QQ;
				say "You're blocked going [noun] by [the QQ]. [block-text of QQ][line break]" instead;
		if number of taunty guardians > 0:
			let QQ be a random taunty guardian;
			say "[taunt-text of QQ][line break]";
			continue the action;

definition: a guardian (called myg) is taunty:
	if location of myg is not location of player, decide no;
	if taunt-text of myg is empty, no;
	yes;

to choose-new-hint-guardian:
	if guar-here is 0, continue the action;
	let max-priority be 0;
	let guardian-list be a list of things;
	repeat with gcand running through touchable guardians:
		if debug-state is true, say "DEBUG [gcand]: [other-room of gcand], [guard-hint-prio of gcand] priority vs max priority [max-priority].";
		if guard-hint-prio of gcand < max-priority, next;
		if guard-hint-prio of gcand > max-priority:
			now guardian-list is {};
			now max-priority is guard-hint-prio of gcand;
		add gcand to guardian-list;
	sort guardian-list in random order;
	let RND be a random number from 1 to number of entries in guardian-list;
	now guardian-to-hint is entry RND of guardian-list;
	if debug-state is true, say "DEBUG: guardian hint choice is [guardian-to-hint] from [guardian-list].";

to decide which number is guard-hint-prio of (gu - a guardian): [I use "other-room" here to make clear what map squares we need to go. "if gu is butlers" would be shorter code, but it wouldn't quite say what the guardian guarded, which is more important]
	if other-room of gu is lost lots or other-room of gu is fringe finger, decide on 1; [these are totally optional.]
	if other-room of gu is shaven havens or other-room of gu is obscurest subsector, decide on 10; [these feature the big Dr Yow quest]
	if other-room of gu is outer route: [take care of scope copse special case. One of diners/nereid if all 3 there, then butlers take priority]
		if diners are moot or denier nereid is moot, decide on 9;
		decide on 2;
	if other-room of gu is actionless coastlines, decide on 7; [whether or not AC is visited, it's important. You need to bump off both guardians. But unlocking corner/center rooms comes first. Then unlocking AC. Then other passages.]
	if other-room of gu is not tower-accessible: ["unvisited" almost works but if we, say, DINERS, E, DRAINED, HIMSELF, N, RELEASED, E, we want to point north to open up Coastlines]
		if other-room of gu is treading gradient or other-room of gu is anemic cinema or other-room of gu is danger garden, decide on 8; [all critical rooms]
		decide on 6;
	decide on 5; [the number values themselves don't matter. We want to direct the player to the most important areas.]

after going (this is the guardian reposition after rule):
	if mrlp is Towers:
		now guardians-seen is 0;
		reposition-guardians;
		choose-new-hint-guardian;
	continue the action;

chapter reposition-guardians

to reposition-guardians:
	[say "Repositioning guardians.";]
	repeat with myg running through guardians:
		if myg is moot, next;
		if bad-gender-match of myg, next;
		if other-g of myg is not dreads adders and other-g of myg is moot, next; [this is for testing purposes. If we moot the Hostile Lot and gender flip, Lois may turn up in the Hostile Lot's place. Since the player cannot change gender mid-game, this should not matter in the release build.]
		if location of player is gualoc of myg or location of player is far-room of myg, move-with-aux myg;

to move-with-aux (myg - a guardian):
	let ai be aux-item of myg;
	move myg to location of player;
	if ai is letters settler, continue the action;
	if debug-state is true, say "DEBUG: [ai] is an auxiliary item. We put it in play, too.";
	if ai is Reeds Ale:
		now myg carries ai;
	else:
		move ai to location of player;

volume otters

chapter otters specific definitions

section definitions

try-fail-pit-north is a truth state that varies.
try-fail-cathedral-south is a truth state that varies.

to decide whether try-fail-animal:
	if try-fail-pit-north is true, decide yes;
	if try-fail-cathedral-south is true, decide yes;
	decide no;

chapter block-concepts and concept-rooms

section concept-rooms

a concept-room is a kind of room.

a concept-room has a list of things called concept-list.

a concept-room has a number called concept-index.

when play begins:
	repeat with X running through concept-rooms:
		now concept-index of X is 0;
		repeat with Y running through block-concepts in X:
			add Y to concept-list of X;
		sort concept-list of X in random order;

section block-concepts

a block-concept is a kind of thing. a block-concept is usually scenery. a block-concept is usually vanishing. a block-concept is usually boring. bore-text of a block-concept is usually "That [if noun is in Shiner Shrine]evaluation[else]activity[end if] is nothing you can observe or manipulate physically, but if you focus on [the noun], you might be able to [b]SCAN[r] it if you need to.". description of a block-concept is usually "Well, [the item described] is there, and it's definitely distracting you from going [past-barley-vert].". a block-concept is usually ssno. bore-check of a block-concept is usually the bore-concept rule. a block-concept has text called flip-name.

a block-concept can be forcemooted. a block-concept is usually not forcemooted. a block-concept can be northern or southern.

this is the bore-concept rule:
	if current action is taking, say "Well, the problem is, you can't take [the noun]. You'd like to get rid of it." instead;

to say past-barley-vert: say "[if player is in Shiner Shrine]north[else if player is in Clarthead Cathedral]south[else]somewhere you haven't been[end if]"

after scaning a block-concept:
	if player is in Clarthead Cathedral:
		say "The settler then garbles and changes. The whiners have more than one way of staying loud.";
	else if player is in Shiner Shrine:
		say "The settler then gets garbled a bit. The imp has more than one way to be active.";
	else:
		say "BUG. You shouldn't have been able to scan things this way.";

section two-of-threers

a two-of-threer is a kind of person.

check scaning a two-of-threer:
	let old-concept-index be concept-index of location of player;
	increment concept-index of location of player;
	while concept-index of location of player is not old-concept-index:
		if concept-index of location of player > number of entries in concept-list of location of player, now concept-index of location of player is 1;
		let scan-candidate be entry (concept-index of location of player) of concept-list of location of player;
		if scan-candidate is not moot, try scaning scan-candidate instead;
		increment concept-index of location of player;
	say "Oh no! I found no concept to scan for [the noun]. This is a BUG." instead;

chapter turn rules

after going (this is the parrot follows you rule):
	if parrot is in an adjacent room:
		if location of player is not Bran Barn and location of player is not Loop Pool:
			say "The parrot follows you.";
			move parrot to location of player;
		else:
			say "'Awk! Not sure you need to mess around there now.' The parrot does not follow you.";
	continue the action;

chapter puzzle animals in the north and south

a puzanimal is a kind of animal. a puzanimal is usually neuter. a puzanimal can be northy or southy. a puzanimal has text called locale-text.

for printing the name of a puzanimal (called pa) while printing the locale description: say "[locale-text of pa]".

a prepuzanimal is a kind of thing. a prepuzanimal has text called locale-text.

for printing the name of a prepuzanimal (called pa) while printing the locale description: say "[locale-text of pa]".

after doing something with a puzanimal:
	set the pronoun him to noun;
	if noun is not satyr, set the pronoun her to noun;
	set the pronoun it to noun;
	continue the action;

book otters specific verbs

chapter quicklying

to get-dead:
	if location of player is not Rancho Archon Anchor:
		if joke-death is false:
			d "Missed joke-death.";
		now joke-death is true;
	if the have-died flag is false:
		now undo-code is 9;
	else:
		now undo-code is 10;
	if location of player is freight:
		ital-say "maybe that pale plea can help you figure how to escape.";
	else if location of player is Rancho Archon Anchor:
		ital-say "there are a few ways to die here in the confrontation with Elvira, including a silly joke death or two, but you should always be able to back out. In fact, you can flee if you think you need to.";
	else if location of player is Reclusion Inclosure:
		do nothing;
	else if joke-death is true:
		ital-say "this joke death was an easter egg. I hope it amused you. The death message below is random, and it's probably easier to read the source or win the game than [b]UNDO[i] and retry them.";
	d "Getting dead: [undo-code].[line break]";
	end the story saying "[deth]";

ever-fig is a truth state that varies.

to preef (thi - a thing): [text listed in table of preflip clues]
	if thi is reflexed:
		if debug-state is true, say "DEBUG: not writing [thi] to pad because it was already reflexed.";
		continue the action; [so we don't suggest something already done. The main and perhaps only case is in the Same Mesa with Gast present, but it's a pretty big one.]
	now ever-fig is true;
	if player is in Dusty Study:
		check-get-pad;
	if thi is not prefigured:
		say "[line break][i](You add the information to your pedanto-notepad under [b]FLIPS[r].)[r]";
	now thi is prefigured;
	if player is not in Dusty Study and player does not have pedanto notepad:
		say "You should have your notepad, but you don't. This is a BUG, reportable at [email], and I'm giving you the notepad.";
		now player has pedanto notepad;
		check-sad-ads;
	pad-rec "flips";

to preef-nol (thi - a thing):
	now ever-fig is true;
	if thi is not prefigured:
		say "[i](You add the information to your pedanto-notepad under [b]FLIPS[r].)[r]";
	now thi is prefigured;
	if player is in Dusty Study:
		check-get-pad;
	pad-rec "flips";

to say med-unf: say "[if medals are unfigured], but that feels right. You note what to do for later[end if]"

i-quipped is a truth state that varies.

Elvira-delay is a number that varies.

every turn when player is in Rancho Archon Anchor and player was in Rancho Archon Anchor (this is the Elvira gains confidence rule):
	unless action is procedural:
		if current quip is final-quip:
			if current action is not playing whistle and current action is not qbc responding with and current action is not objasking generically and current action is not objasking about and current action is not asking about and current action is not asking generically:
				increment Elvira-delay;
				if Elvira-delay is 2:
					say "Elvira smirks when she sees you have no plan. 'Antagonist stagnation? Wane anew, blunder bundler,' she says as she gives that silvery laugh.[paragraph break] 'Potent--to [b]PENT[r]' are the final words you hear. Hmm. You probably can't hang around, but there must be a simple way to defeat her[if whistle is not reflexed]. Perhaps you can even retreat to prepare to defeat her[end if].";
					get-dead instead;
				else:
					say "Elvira looks a little less shocked, now. You might want to retreat if you have no plan to defeat her.";

chapter cinders

the cinders are a vanishing LLPish plural-named thing. "Cinders lie here, probably cold enough to take.";

report taking cinders:
	say "They crackle with energy and possibilities as you take them. Perhaps there is more than one thing you can do with them.";
	the rule succeeds;

Include (-
	has transparent talkable
-) when defining cinders.

description of cinders is "You feel a wave of power as you [if player has cinders]finger through[else]get close to[end if] them. Nothing dangerous, but power to see how to do something, if you think right. But also power to believe you can do it all on your own. You could [b]READ[r] them if you were willing to suffer a headache to learn what to do with them."

check dropping cinders:
	say "You may be able to get rid of them, but they're holy and powerful and you may need some sort of ritualistic action." instead;

a-text of cinders is "RYRRYRR". b-text of cinders is "R?RR??R". parse-text of cinders is "x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]x".

section discerning

discerning is an action applying to one thing.

understand the command "discern" as something new.

understand "discern [something]" as discerning.

does the player mean discerning the cinders: it is very likely.
does the player mean discerning the player: it is likely.

rescind-cinders is a truth state that varies.

discern-warn is a truth state that varies.

to decide whether conditional-llp-present:
	if power-back is true:
		if player is in Bran Barn and Gore Ogre is touchable, yes;
		if player is in Loop Pool and eels are touchable, yes;
		if player is in Perverse Preserve and nounsolve is 3, yes;
		if player is in Lamer Realm and adjsolve is 3, yes;
	no;

carry out discerning:
	if mrlp is not otters, say "[reject]" instead;
	if player is in Minded Midden and cinders are in Minded Midden:
		say "(taking the cinders first)[line break]";
		try taking the cinders;
	if cinders are moot, say "[if rescind-cinders is true]You rescinded the cinders, so you can't [b]DISCERN[r][else]You already used the cinders to [b]DISCERN[r][end if]." instead;
	if cinders are not touchable, say "You need the cinders for that. They are back in [Minded Midden]." instead;
	if otters-cur-item is player, say "[one of]You can do that with the cinders, but[or]Y[stopping]ou're not able to discern anything right here and now. Maybe move somewhere with things you haven't tackled yet. Or maybe you can do something else with them!" instead;
	if discern-warn is false:
		say "You feel sort of clever finding what to do with the cinders, but maybe you can be even cleverer, if you're a perfectionist and all[if ed riley is touchable]. Plus, it seems a bit early[end if]. Discern anyway?";
		now discern-warn is true;
		unless the player yes-consents:
			say "Okay. This nag won't appear again." instead;
	if noun is not cinders:
		if noun is reflexed, say "You already did something, there." instead;
		if noun is prefigured, say "You already found what to do, there. [b]PAD FLIPS[r] to see what." instead;
		repeat through hintobjstable of mrlp:
			if noun is hint-entry entry:
				if there is no spoil-entry entry:
					break;
				if there is a parallel-entry entry:
					try discerning parallel-entry entry instead;
				cinders-bye;
				say "The cinders swirl away into the air. You have a revelation: [spoil-entry entry].";
				the rule succeeds;
		say "You discern nothing. The cinders stay where they are. But that's a sort of clue in itself." instead;
	if player is in Reclusion Inclosure and medals are reflexed and whistle is reflexed, say "Your destiny awaits to the west! You are fully prepared to take on Elvira." instead;
	now spoilit is true;
	process the otters-hinting rule; [note: this takes care of decrementing the region maximum if we found anything.]
	now spoilit is false;
	the rule succeeds;

to cinders-bye:
	prevent undo;
	now undo-code is 7;
	poss-d;
	moot cinders;

to say animals-left:
	if adjsolve < 3:
		say "the [if Lamer Realm is visited][Lamer Realm][else]room north of the Shiner Shrine[end if]"; [?? it is possible not to have visited the shrine]
		if nounsolve < 3, say " and ";
	if nounsolve < 3:
		say "the [Preserve]"

book Minded Midden

to say if-ed: say "[if ed riley is in Minded Midden]Ed Riley is still blocking the way west[else]You can go west past where Ed Riley was[end if]"

Minded Midden is a room in Otters. last-loc of otters is Minded Midden. "[if bleary barley is touchable]You sense someone is watching you here. Also, bleary barley blocks you completely, stretching out seamlessly, endlessly. Who planned to watch you? Men did. Probably[else][if-ed], and though a nude dune blocks your way east, you cleared paths north and south through the barley and can see the Edictal Citadel to the west[end if][if lilac bays are in minded midden][lilac-bay-desc][end if].".  roomnud of Minded Midden is table of Minded Midden nudges.

outside-text of Midden is "There's no way out until the bleary barley is gone.".

exits-text of Minded Midden is "Maybe you'll see some exits if you get rid of the barley.".

understand "burnt brunt" and "burnt/brunt" as Minded Midden when bleary barley is moot.

to say lilac-bay-desc:
	if lilac bays are reflexed:
		say ". The asyllabic lilac bays you spruced up help this place not look too bereft";
	else:
		say ". [one of]Some asyllabic lilac bays have bloomed since last you passed through. They're still a bit sickly, but if you want to take a break from your quest to prettify things, maybe the right word can spring them up. Maybe it's a useless word that doesn't really nourish the human mind. After all, plants like plant food, which, ick[or]The asyllabic lilac bays wait here, in decent enough health, but maybe you can take a break from your quest to perk them up a bit more[stopping]"

printed name of Minded Midden is "[if nude dune is in Minded Midden]Burnt Brunt[else]Minded Midden[end if]"

check going east in Minded Midden when bleary barley is moot: say "The dune is too big and tough to climb. There's nothing that way, anyway." instead;

[glow red as you want to get rid of them]

check going in Minded Midden:
	if noun is up or noun is down, continue the action;
	if bleary barley is touchable, say "The bleary barley is nearly everywhere. Without knowing where you're going, you'll get lost." instead;
	if Ed Riley is in Minded Midden:
		if noun is south or noun is north:
			say "Ed Riley booms, 'Yielder! That's right. Go [noun]. Not west.'";
			continue the action;

after printing the locale description for minded midden when nounsolve is 4 and adjsolve is 4:
	if blase bales are off-stage:
		say "What's this? You missed this before. Of course, it was easy. There are blase bales littered all around the nude dune! Well, you wonder what you can make of them.";
		move blase bales to minded midden;
	continue the action;

chapter bleary barley

the bleary barley is scenery in Minded Midden. description of bleary barley is "It ranges expansively--but the weird thing is, it hasn't flowered. And it's not all planted. Someone must have placed it very carefully or deliberately so you'd progress slowly."

a-text of bleary barley is "RYRYRO". b-text of bleary barley is "P??YRB". parse-text of bleary barley is "B[sp]?[sp]?[sp]E[sp]L[sp]Y". bleary barley is parse-spoilable.

check taking bleary barley: say "Your inventory doesn't expand infinitely." instead;

chapter nude dune

the nude dune is boring bounding scenery. description of nude dune is "It is impressive and blocks your way east.". bore-check of nude dune is bore-dune rule. bore-text is "The dune is just there, blocking your way east. And you don't need to go east.".

this is the bore-dune rule:
	if current action is entering, say "That would END U. See what I did there?" instead;
	if current action is climbing, say "There's nothing on the other side. You would probably just slide back down if you tried to climb it, too." instead;

chapter asyllabic lilac bays

the asyllabic lilac bays are reflexive LLPish scenery. "They [if lilac bays are reflexed]look nice now you fixed them[else]look like they need something. You're not sure what. You've heard plants like classical music, but they're unusual plants, so they just might need the right word. It's weird, but if you listen closely, the wind through the lilacs seems to say something[end if]."

chapter blase bales

the blase bales are boring vanishing LLPish scenery. "They look so boring, such a dull color. You're not even sure if they're straw or hay, and you feel like you should know the difference after swapping the two in [shuf]. Nevertheless, it would be nice to bring them to life.". bore-text of blase bales is "They are bales. You can't do much with them in their present state."

a-text of blase bales is "RYRRY". b-text of blase bales is "R?RR?". parse-text of blase bales is "x[sp]a[sp]x[sp]x[sp]e".

chapter Ed Riley

Ed Riley is a vanishing boring man. description is "'Er, yield idly [']ere!' Ed Riley booms at regular intervals. For all this bluster, you get the feeling his loud voice hides an insecurity.". "Ed Riley acts as a steward here to keep you eastward, carrying a loaf of deli rye.". bore-text of ed riley is "You probably don't need much more than your usual tricks to get past him. Even in your diminished state.". bore-check is bore-ed-riley rule.

check taking ed riley: say "Ed Riley raises up on his toes and booms 'I'm no YIELDER!'" instead;

check taking deli rye: say "Ed Riley snatches it away forcefully. 'I'm no YIELDER!'" instead;

the deli rye is an edible auxiliary thing. description is "It looks delicious enough for Ed not to share with you.". Ed Riley carries the deli rye.

a-text of deli rye is "RYYRYRO". b-text of deli rye is "RGYRYRO". parse-text of deli rye is "x[sp]E[sp]-[sp]x[sp]-[sp]x[sp]Y".

this is the bore-ed-riley rule:
	if action is procedural, continue the action;
	if current action is taking, now boring-exception is true;

understand "yielder" and "steward" as Ed Riley.

a-text of ed riley is "RYYRYRO". b-text of ed riley is "RYYRYRB". parse-text of ed riley is "x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]Y".

to say ed-nonsense: say "[one of], and then he bangs on about not trying to sing or attack him[or][or][or][cycling]"

check going west in Minded Midden: if Ed Riley is touchable, say "'Re-yield, yielder! Ye Idler! Er, yield idly [']ere!' booms Ed Riley[ed-nonsense].[paragraph break]He's not bigger than you, but his loud voice scares you. And he could probably swat you with that deli rye. You back away." instead;

book Disowned Downside

Disowned Downside is west of Minded Midden. It is a room in Otters. "This crossroad is [if Gretta is touchable]thickly populated with men talking loudly and 'excitingly,' trying to impress [one of]one woman[or]Gretta Garett-Tatger[stopping][else]unobstructed now you dispersed the [players][end if]. A [if merle is moot]wide (thanks to the parrot/raptor)[else]narrow[end if] entry to Elvira's Edictal Citadel is to the west[if Reclusion Inclosure is unvisited]--you'll want to brave it some time[end if][if atmo moat is in Disowned Downside]. A moat blocks entry right now, though[end if]. You can also go back east or [if Loop Pool is visited or Bran Barn is visited]re-[end if]check what's north or south[if power-back is true], not that you need to[end if]. Sample maples make it a bit less dreary here[if laya is touchable].[paragraph break]The [laya] still chirps away here, praising Elvira. Putting it out of commission might be a nice distraction[end if].". roomnud of Disowned Downside is table of Disowned Downside nudges. [ic]

after looking in Disowned Downside:
	if parleys splayer players are in Disowned Downside:
		set the pronoun them to parleys splayer players;
		set the pronoun her to gretta;
	continue the action;

check going in Disowned Downside when Gretta is in Disowned Downside:
	if noun is north or noun is south or noun is east, say "[cree-pee].";

to say cree-pee:
	say "A few [players] [if player is male]laugh at how you obviously can't give Gretta Garett-Tatger the attention they can[else]let Gretta Garett-Tatger know she's more worth impressing than you[end if] as you leave"

check taking atmo moat:
	say "Way too big." instead;

check going west in Disowned Downside:
	if players are in Disowned Downside, say "One of the [players] stops you from falling in the atmo-moat, and he tries to convince Gretta he's a great guy for saving you. The others yell at him for trying to play hero too obviously." instead;
	if atmo moat is in Disowned Downside, say "The moat just--scares you. It's too red, and when you recognize it as an atmo-moat, it turns blue, but it's still scary." instead;
	if pen o nope is in Disowned Downside, say "No, the [pen o] is manned. But there must be a simple way to dispel it!" instead;
	if Gretta is touchable, say "[cree-pee]." instead;

chapter atmo-moat

the atmo moat is vanishing scenery in Disowned Downside. understand "atmo/moat" and "atmo moat" as atmo moat. "Nothing subtle, no bustle. It's not the bluest you've seen water--in fact, for a moat, it's really red.". printed name of atmo moat is "atmo-moat".

a-text of atmo moat is "YRYR". b-text of atmo moat is "??YR". parse-text of atmo moat is "?[sp]?[sp]O[sp]M". atmo moat is any-spoilable.

Include (-
	has transparent animate
-) when defining atmo moat.

check entering atmo moat: say "It's too gulfy. Things'd get fugly. You've no diver pod provided. Plus you might get poked by strident tridents." instead;

after printing the locale description for Disowned Downside when Disowned Downside was unvisited:
	if do-i-chat is true:
		moot parleys splayer players;
		now all pickup-lines are in Meatier Emerita Emirate;
		try talking to gretta;
		the rule succeeds;
	say "[line break]But whatever they call themselves, you know [pla-ma]s['] M.O. Jump from subject to subject, to seem 'exciting,' and capitalize on when people give the benefit of the doubt. Still, there's always a hole in their 'impressive' stories--and even if you realize it a few turns later, you can drain their perseverance.";
	if debug-state is true:
		say "[line break]";
		ital-say "For testing purposes, [b]PLOP[i] drops all the pickup lines here.";
	continue the action;

chapter parleys splayer players

the parleys splayer players are plural-named reflexive people in Disowned Downside. description is "'[if player is male]You can watch, but you won't LEARN[else]We're not trying to impress YOU. Geez[end if].' Their looks aren't so important--but they seem to be rotating through subjects quickly, and maybe you could catch them out on the right one. Given what you've done so far here, well, there'll be certain restrictions on what you can do--and that might actually help you narrow things down.". "[players-c] dressed all coy-hued are here, [if gretta-score is 0]completely besieging[else if gretta-score is 1]still trying to impress[else]anxiously trying to captivate[end if] Gretta."

understand "macks" as players when players are reflexed.

after examining parleys splayer players for the first time:
	say "Oh, and I couldn't resist: they're definitely not going to be yer pals. You need to get rid of them!";
	continue the action;

printed name of parleys splayer players is "[if parleys splayer players are reflexed]macks[else]parleys splayer players[end if]"

to say players-c: say "[if parleys splayer players are reflexed]Macks[else]Parleys splayer players[end if]"

to say pla-ma: say "[if parleys splayer players are reflexed]mack[else]player[end if]"

understand "mack/player" as parleys splayer players.

a-text of parleys splayer players is "RRYRYRO". b-text of parleys splayer players is "???R?RO". parse-text of parleys splayer players is "?[sp]?[sp]?[sp]x[sp]?[sp]x[sp]Y".

rule for printing a locale paragraph about parleys splayer players:
	say "[one of]Wait a minute. You think you recognize whom the parleys splayer players are trying to impress. It's that lady from the picture Elmo showed you: Gretta Garett-Tatger! Their pick-up lines and stories are just horrible, but their technique keeps them afloat. It's strong enough, they're not just macks, but parleys splayer players. There's nothing strictly preventing Gretta from running, but it's easy to feel boxed-in[how-played][stopping].";
	now Gretta is mentioned;
	now parleys splayer players are mentioned;

to say how-played:
	if gretta-score is 1:
		say ", though not as much as when they started, since you got them";
	else if gretta-score is 2:
		say ", but they're wavering a bit. If you blow up their flow once more, you could probably get rid of them"

chapter Yer All a Yell'r

Yer All a Yell'r is vanishing boring scenery in Disowned Downside. description is "It's a song and a bad one. You may wish to [b]LISTEN[r], as if you can suffer through it, you may get a hint.". bore-check of Yell'r is bore-yer-all rule. bore-text of Yell'r is "You don't want to do much more than [b]LISTEN[r] to [yell'r], if that,"

a-text of Yer All a Yell'r is "RYYRRO". b-text of Yer All a Yell'r is "R?Y?PO". parse-text of Yer All a Yell'r is "r[sp]e[sp]a[sp]l[sp]l[sp]y". yer all a yell'r is parse-spoilable.

this is the bore-yer-all rule:
	if current action is listening, continue the action;

chapter Gretta Garett Tatger

Gretta Garett Tatger is a female person in Disowned Downside. "[bug-report]". description of Gretta is "She seems to be cringing at the pick-up lies, or the prospect she will let one work so she doesn't have to listen to them anymore.". printed name of Gretta Garett Tatger is "Gretta Garett-Tatger".

before doing something when Gretta is touchable and parleys splayer players are not touchable:
	if current action is examining, say "You should probably talk with Gretta Garett-Tatger a bit." instead;
	if current action is attacking, say "She's on your side." instead;
	if action is blathery, say "She's heard enough rambling conversation on others['] terms, here." instead;
	if current action is discerning, say "That can wait until you've finished talking." instead;
	if current action is not talking to Gretta and current action is not QBC responding with:
		say "[convoforce].";
		reject the player's command;
	continue the action.

the litany of Gretta Garett Tatger is the table of Gretta comments.

to say but-stuck:
	say "[if try-fail-animal], but I got chased after that[end if]"

table of Gretta comments [tco-gr]
prompt	response	enabled
"Boy, those players, huh?"	gre-players-quip	1
"What's your history with Elvira?"	gre-elv-quip	0
"I sort of lost my powers. Well, most of them. What can I do now?"	gre-what-quip	0
"[if Loop Pool is visited]What can I do with the pool[else]What's[end if] to the north?"	gre-north-quip	0
"[if Bran Barn is visited]What can I do in the barn[else]What's[end if] to the south?"	gre-south-quip	0
"What can I do back east[if sly imp is moot or whiners are moot]? I got rid of some nuisances[but-stuck].[else]?[end if]"	gre-east-quip	0
"Rescuing animals? How?"	gre-animals-quip	0
"[if optleft of Gretta is 1]Wow! You've been a big help[else if gre-go-warn is true]That's really all, now[else]Um, that's all, I guess[end if]. Thanks."	gre-go-quip	0

table of quip texts (continued) [tqt-gr]
quip	quiptext
gre-players-quip	"She introduces herself as Gretta. 'I was just trying to explain what Elvira's about, why to fight her. They started telling me they were all socially conscious--then they started hitting on me.' It's true--Elvira's brand of 'magic without magic,' which places excitement over boring honesty, has been captured in the horrid [i]OK, Be Hot: The Book[r], by Beth Koo and Theo Bok. It mentions anyone can learn its techniques--sadly, that's the truest part of the book by far.[paragraph break]You let slip it's the sort of word twisting that you can't and won't do. She pauses, then realizes how you managed to disrupt the parleys splayer players without doing anything. You're that [shuf] person, with those powers. 'Hmm, I guess Elvira hates you even more than she hates me. I mean, she actually said I was almost as bad as you, to my face.'" [start GRETTA text]
gre-elv-quip	"'Elvira backstabbed me. [']A nice gal? An [b]ICE[r] gal!['] Being called a gal was bad enough. But she used to rent the Edictal Citadel from me. Then SHATTER-THREATS somehow let her not pay rent in the name of national security. Then own it. And, well, it's secure now, all right. I haven't got by her ideas aides, but I found out she's--well, [i]augmenting[r] animals.'"
gre-what-quip	"'You can't rely on people coming together. They're either too scared to resist, or too eager to kiss up. But animals might be willing to help. She's still training the ones she made.' Gretta looks nervously around."
gre-north-quip	"'Maybe you will figure how to help the eels to the north and their spirit, Le Mer. They're suspicious of people, though, after Elvira failed to recruit them.'"
gre-south-quip	"'Mr. Lee is ready to blame his failed crops on anyone. Elvira's got him convinced it's not her, but if you help him, he could be swayed back. Plus, he's a farmer, so, more animals.'"
gre-east-quip	"'There are animal pens back east.' [if Clarthead Cathedral is visited and Shiner Shrine is visited]You nod your head[else if Clarthead Cathedral is unvisited and Shiner Shrine is unvisited]You cough a bit, realizing you didn't look there[else]You make a note to check the other pen[end if]. 'Perhaps animals can succeed where people failed, because Elvira won't be able to charm them with words. Well, not all of them. She captured and changed some, but you'd win their gratitude--and their friends[']--if you changed them back. Even, or especially, the ones guarding the pens.'"
gre-animals-quip	"'The animals aren't just imprisoned but reduced to mockeries of their real selves--whether they know it or not. Maybe one reason she wanted to discredit you was, you might be able to change them back.'"
gre-go-quip	"[if hold-it-up is false]'Here. Take these. They are ancient emblems of magic and power--damsel medals--from long before people cringed at words like damsel. They are worn out, but good deeds can restore them.'[paragraph break]They look very tarnished, but a gift is a gift. You take them. They probably aren't any old medals--they deserve a closer look.[paragraph break]'[gre-other].' She nods and walks off[check-started-yet].[end if][paragraph break]As she does, you hear a small mechanical voice. It is coming from a [laya], one of Elvira's favorite propaganda weapons!" [end GRETTA text]

to decide which number is optleft of (myp - a person):
	let mytemp be 0;
	let myt be the litany of myp;
	repeat through myt:
		increase mytemp by enabled entry;
	decide on mytemp;

after quipping:
	d "current quip = [current quip].";

after quipping when qbc_litany is the table of Gretta comments (this is the process Gretta chat rule):
	if hold-it-up is true:
		choose row with response of gre-go-quip in table of Gretta comments;
		now enabled entry is 1;
		continue the action;
	if current quip is gre-players-quip:
		enact gre-elv-quip;
		enact gre-what-quip;
		enact gre-go-quip;
	else if current quip is gre-elv-quip or current quip is gre-what-quip:
		if gre-elv-quip is mowered or gre-what-quip is mowered: [this seems a bit odd, but marking a quip as mowered doesn't happen til the "after quipping" which fires afterwards]
			say "'Not everyone here loves Elvira. Some are willing to help, if they're just treated right. I can tell you who, or what's, where.' Gretta looks around, worried the players will narc her out to Elvira, even though none of them headed west to the Edictal Citadel, but you can probably grill her for quick information.[paragraph break]";
			enact gre-north-quip;
			enact gre-east-quip;
			enact gre-south-quip;
	else if current quip is gre-east-quip:
		enact gre-animals-quip;
	else if current quip is gre-animals-quip:
		do nothing;
	else if current quip is gre-go-quip:
		terminate the conversation;
		now the player wears medals;
		move laya to disowned downside;
		pad-del "asking";
		moot Gretta;
		if do-i-chat is true:
			moot hydra;
			now whistle is reflexed;
			move player to Rancho Archon Anchor;
	else if current quip is gre-north-quip or current quip is gre-south-quip or current quip is gre-elv-quip:
		do nothing;
	else:
		debug-fallthrough;

chapter cut ya all cult laya

the Cut Ya All Cult Laya is LLPish vanishing scenery. printed name of laya is "Cut-Ya-All Cult Laya[']". description is "The [laya] keeps chirping away with inane ramblings of how great Elvira is, only it's all buried under ten levels of irony, so it can't be cultish. You can [b]LISTEN[r] for a clue, if you really want to. The designers['] names are also written in red on here."

a-text of Cut Ya All Cult Laya is "YRRYYRRO". b-text of Cut Ya All Cult Laya is "YR?Y?R?O". parse-text of Cut Ya All Cult Laya is "-[sp]x[sp]?[sp]-[sp]?[sp]x[sp]?[sp]Y".

chapter boring scenery

section Edictal citadel

the Edictal Citadel is a boring backdrop in Disowned Downside. drop-region of Edictal Citadel is otters. description is "It takes up a huge chunk of space to the west.". bore-text of Edictal Citadel is "[if player is in Reclusion Inclosure or player is in Rancho Archon Anchor]You can't do anything to the Edictal Citadel, which is probably a good thing, as that'd probably destroy you too now you're inside it[else]Not much to do with the Edictal Citadel but look at it and realize it must be protected for a reason[end if].".

section sad elm

the sad elm is boring useless scenery in Disowned Downside. description of sad elm is "It was probably sad before the [players] came along, but it's not really important.". bore-text of sad elm is "You can't make the elm happier[if player had medals], not even if you do something with the damsel medals you got from it[end if].". bore-check is bore-sad-elm rule.

this is the bore-sad-elm rule:
	if current action is climbing, say "[if Gretta is touchable]You can beat [']em, so don't join [']em trying to impress her[else]Yorpwald's still up a tree. Don't join it[end if]." instead;

section sample maples

the sample maples are boring amusing scenery in Disowned Downside. "Well, they're, uh, trees. You could [b]READ[r] one that's been carved, but the information doesn't seem important.". bore-text is "No need to mess with the maples. They aren't particularly lovely trees, but they're the best thing about the Disowned Downside."

understand "elm sap" as sample maples.

understand "sample maple" and "maple" as sample maples.

chapter OPEN puzzle

rule for supplying a missing noun when opening:
	if player is in disowned downside and Neon Pope is in disowned downside:
		try fliptoing Pen O Nope instead;

check opening when player is in disowned downside (this is the assume the player sees OPEN flip rule):
	if noun is Pen O Nope or noun is Neon Pope or noun is Nope Peon, try fliptoing Pen O Nope instead;

does the player mean opening Pen O Nope: it is likely;

section Neon Pope

a nonepepo is a kind of person. initial appearance of a nonepepo is "BUG the [pen o] guardians should be listed together!"

for printing a locale paragraph about a nonepepo (called per) in Disowned Downside:
	unless per is Neon Pope or per is Nope Peon, continue the action;
	if per is mentioned, continue the action;
	say "The Neon Pope and Nope Peon continue to taunt you from the safety of [the pen o]. If only there were a simple way to get through!";
	now neon pope is mentioned;
	now nope peon is mentioned;

the Neon Pope is an auxiliary nonepepo. description of the Neon Pope is "A glowing exemplar of all things pro-Elvira, the Neon Pope encapsulates the 'respect authority' side of why Elvira is so great."

a-text of neon pope is "YRYR". b-text of neon pope is "YRY?". parse-text of neon pope is "UNIQUE".

section Nope Peon

the Nope Peon is an auxiliary nonepepo. description of the Nope Peon is "A smarmy Uriah Heep type, one of many who like to convince others that, despite Elivra wielding most of the power in Yorpawld these days, it's still rebellious and edgy to think she needs even more power, and any arguments against her gaining more power deserve a big fat, well, nope."

the chum of the Neon Pope is the Nope Peon.

a-text of nope peon is "YRYR". b-text of nope peon is "YRY?". parse-text of nope peon is "UNIQUE".

check scaning neon pope: [ this is just to avoid duplicate/super similar text and so the player doesn't have to scan both the pope and peon ]
	try scaning nope peon instead;

section pen o nope

the Pen O Nope is vanishing scenery. description is "It's blocking you right now. It's constructed relatively simply, though. Perhaps its purpose is symbolic, or perhaps it's the sort of thing Elvira's followers use to make dissidents feel, geez, if something wimpy like that blocks me, what the heck good can I do?[paragraph break]It has some red writing on it, too.". printed name is "Pen O['] NOPE".

a-text of Pen O Nope is "YRYR". b-text of Pen O Nope is "YRYR". parse-text of Pen O Nope is "-[sp]x[sp]-[sp]x".

chapter smacking

[ a stub that gives a SMACK MACKS reject ]

smacking is an action applying to one thing.

understand the command "smack" as something new.

understand "smack [thing]" as smacking.

does the player mean smacking the parleys splayer players: it is likely.

carry out smacking:
	if noun is parleys splayer players, say "They really, really deserve it, but keep your cool. Smack their arguments down instead and they may smack each other for you." instead;
	try attacking noun instead;
	the rule succeeds;

chapter medals

the damsel medals are a reflexive wearable plural-named thing.

to decide which number is medals-shiny:
	decide on boolval of (whether or not adjsolve >= 3) + boolval of (whether or not nounsolve >= 3);

to decide whether medals-worthy:
	if medals-shiny is 2, yes;
	no;

understand "iq/lucky medal/medals" and "iq/lucky/medal" as damsel medals.

after printing the name of medals while taking inventory:
	say " ([if nounsolve is adjsolve]both [entry (adjsolve + 1) in medalings][else if nounsolve < adjsolve][entry (adjsolve + 1) in medalings] and [entry (nounsolve + 1) in medalings][else][entry (adjsolve + 1) in medalings] and [entry (nounsolve + 1) in medalings][end if][if medals are not examined]--oh, you should examine them, too[end if])";

medalings is a list of text variable. medalings is { "crusted over", "grimy", "dull", "shiny", "gleaming" }

description of the medals is "They're roped together and spin about as you look at them. The larger, [tarn of adjsolve]tarnished, says [b]LUCKY[r]. The smaller, [tarn of nounsolve]oxidized, says [b]IQ[r]."

after examining medals for the first time:
	say "You remember Gretta said something about good deeds restoring the medals. Also, you remember a most improper story (by Kasi Saik? Isak? Hmm... I ask...) about medals clinking together when someone good hid from a vicious animal, but ... you'll take your chances.";
	continue the action;

to say tarn of (tlev - a number):
	say "[if tlev is 0]extremely [else if tlev is 1]very [else if tlev is 2]somewhat [else if tlev is 3]barely [else if tlev is 4]un[else]BUG[end if]";

nounsolve is a number that varies.
adjsolve is a number that varies.

check scaning medals:
	if medals-shiny < 2, say "The settler reads oddly for a while but doesn't show anything. Maybe you need to reveal the medals some more." instead;

a-text of medals is "RYYRRRO". b-text of medals is "R?YRRR?". parse-text of medals is "x[sp]?[sp]-[sp]x[sp]x[sp]x[sp]?".

chapter parleys splayer players flipping

irately is a truth state that varies.

check fliptoing a pickup-line (this is the NO ESP rule): if noun is not playable, say "[ly-ish]." instead;

gretta-score is a number that varies. gretta-score is usually 0.

check talking to Gretta when players are in Disowned Downside:
	say "The [players] outnumber you. You won't get a word in." instead;

chapter parleys splayer players' smoove mooves

to decide which number is pickup-pod-size of (mc - a number):
	let temp be 0;
	repeat with QQ running through pickup-lines:
		if pod-num of QQ is mc:
			increment temp;
	decide on temp.

to install-pickup-line (x1 - a number) and (x2 - a number):
	let one-yet be false;
	repeat with XX running through pickup-lines:
		if pod-num of XX is x1 and pod-ord of XX is x2:
			if one-yet is true:
				say "Oops [XX] is a duplicate.";
			else:
				now XX is in Disowned Downside;
				now XX is available-this-time;
				now one-yet is true;
	if one-yet is false:
		say "Oops [x1] pod [x2] ord had no pickup line.";

when play begins (this is the pickup-randomize rule):
	let my-wt be 0;
	repeat with X running from 1 to max-pod-num:
		now cur-pod-num is X;
		let G be the pickup-pod-size of X;
		[say "[G] pickup lines in pod [X + 6].";]
		let H be a random number from 1 to G;
		install-pickup-line X and H;
	assign-random-pickup-priority;
	now cur-pod-num is 0;

definition: a pickup-line (called mm) is unprioritized:
	if pickup-prio of mm is 0 and mm is in Disowned Downside, decide yes;
	decide no;

to assign-fixed-pickup-priority:
	now cur-player-blab is 0;
	repeat with B running through pickup-lines:
		if B is in Disowned Downside:
			now pickup-prio of B is pod-num of B;

to assign-random-pickup-priority:
	now cur-player-blab is 0;
	repeat with B running through pickup-lines:
		now pickup-prio of B is 0;
	let C be number of pickup-lines in Disowned Downside; [should be 7, but yeah]
	repeat with B running from 1 to C:
		let this-pickup be a random unprioritized pickup-line;
		now pickup-prio of this-pickup is B;

a pickup-line is a kind of undesc. a pickup-line is usually privately-named. a pickup-line is usually reflexive. a pickup-line is usually unscannable. a pickup-line has a number called pod-num. a pickup-line has a number called pod-ord. a pickup-line has text called player-move. a pickup-line has text called pickup-description. a pickup-line has a number called hint-prog. pickup-description of a pickup-line is usually "MISSING CASE".

definition: a pickup-line (called pl) is playable:
	unless pl is touchable, no;
	if debug-state is true, yes;
	if pl is ment, yes;
	no;

rule for deciding whether all includes pickup-lines:
	it does not.

a pickup-line has a number called pickup-prio. pickup-prio of a pickup-line is usually 0. a pickup-line is usually abstract.

a pickup-line can be ment. a pickup-line is usually not ment. a pickup-line can be available-this-time. a pickup-line is usually not available-this-time.

max-pod-num is a number that varies. max-pod-num is 7. cur-player-blab is a number that varies. cur-player-blab is 0.

current-idea is a pickup-line that varies. cur-pod-num is a number that varies. ever-loop-players is a truth state that varies.

For printing a locale paragraph about a pickup-line (called the item):
	set the locale priority of the item to 0;
	continue the activity.

section 7 letters repeating - pod 1

t-bossily is a pickup-line. pod-num is 1. pod-ord is 1. a-text of t-bossily is "RYRRYRO". b-text of t-bossily is "RYRRYRO". parse-text of t-bossily is "x[sp]O[sp]S[sp]x[sp]I[sp]x[sp]Y". player-move is "Fake plaintiveness makes you see red! 'Sly bois? I? Sly SOB? Si Bloy's...'". pickup-description is "(not) being sly bois".

t-cattily is a pickup-line. pod-num is 1. pod-ord is 2. a-text of t-cattily is "RYRRYRO". b-text of t-cattily is "RGRRYPB". parse-text of t-cattily is "CATTILY". player-move is "Each [pla-ma] discusses tacitly why he's got something the others don't.". pickup-description is "acting tacitly". t-cattily is parse-spoilable.

t-seedily is a pickup-line. pod-num is 1. pod-ord is 3. a-text of t-seedily is "RYYRYRO". b-text of t-seedily is "RYGRGRO". parse-text of t-seedily is "x[sp]E[sp]E[sp]x[sp]I[sp]x[sp]Y". player-move is "A few [pla-ma]s do something stupid with their eyelids to get her attention.". pickup-description is "twiddling their eyelids". t-seedily is parse-spoilable.

t-tearily-irately is a pickup-line. pod-num is 1. pod-ord is 4. a-text of t-tearily-irately is "??YRYRO". b-text of t-tearily-irately is "??GR?RB". parse-text of t-tearily-irately is "?[sp]?[sp]a[sp]x[sp][if cheat-on is true]?[else]-[end if][sp]l[sp]y". player-move is "The [players] ooze on about how women want companionship, as much as men, and that's REALITY. It seems they could be flustered two different ways, but they aren't close, yet.". pickup-description is "defining reality".

t-tersely is a pickup-line. pod-num is 1. pod-ord is 5. a-text of t-tersely is "RYRRYRO". b-text of t-tersely is "RGRRYPO". parse-text of t-tersely is "x[sp]E[sp]x[sp]x[sp]E[sp]L[sp]Y". player-move is "The [players] continually restyle and restyle their various positive attributes.". pickup-description is "continuing to restyle and restyle". t-tersely is parse-spoilable.

section 7 letters non-repeating - pod 2

t-angrily is a pickup-line. pod-num is 2. pod-ord is 1. a-text of t-angrily is "YRRRYRO". b-text of t-angrily is "YRRRGPB". parse-text of t-angrily is "A[sp]x[sp]x[sp]x[sp]I[sp]L[sp]Y". player-move is "The [players] discuss topics rangily, even saying 'Any girl: I, gnarly!' It's too ridiculous to see red over.". pickup-description is "discoursing rangily". t-angrily is parse-spoilable.

t-nastily is a pickup-line. pod-num is 2. pod-ord is 2. a-text of t-nastily is "RYRRYRO". b-text of t-nastily is "RGRRYPB". parse-text of t-nastily is "x[sp]A[sp]x[sp]x[sp]I[sp]L[sp]Y". player-move is "The [players] suddenly start acting very saintly.". pickup-description is "acting saintly". t-nastily is parse-spoilable.

t-shadily is a pickup-line. pod-num is 2. pod-ord is 3. a-text of t-shadily is "RRYRYRO". b-text of t-shadily is "RRYRGRO". parse-text of t-shadily is "x[sp]x[sp]A[sp]x[sp]I[sp]x[sp]Y". player-move is "The [players] try to talk about ladyish things and fob off any awkwardness in the conversation to simple honesty.". pickup-description is "seeming ladyish".

t-snidely is a pickup-line. pod-num is 2. pod-ord is 4. a-text of t-snidely is "RRYRYRO". b-text of t-snidely is "RRYPYRB". parse-text of t-snidely is "x[sp]x[sp]-[sp]D[sp]-[sp]x[sp]Y". player-move is "The [players] blather about how she is better than Lindsey.". pickup-description is "negging Lindsey".

t-starkly is a pickup-line. pod-num is 2. pod-ord is 5. a-text of t-starkly is "RRYRRRO". b-text of t-starkly is "RRYRRRO". parse-text of t-starkly is "x[sp]x[sp]A[sp]x[sp]x[sp]x[sp]Y". player-move is "Some of the [players] compare her to Krystal, being sort-of favorable to both. Still, it's icky.". pickup-description is "comparing Gretta and Krystal".

section 8 letters repeating - pod 3

t-blearily is a pickup-line. pod-num is 3. pod-ord is 1. a-text of t-blearily is "RRYYRYRO". b-text of t-blearily is "RRYYRYPB". parse-text of t-blearily is "x[sp]x[sp]-[sp]-[sp]x[sp]-[sp]L[sp]Y". player-move is "The [players] cut each other off reliably, giving Gretta no time to reject them or point out they're not THAT exciting.". pickup-description is "interrupting each other reliably".

t-coitally is a pickup-line. pod-num is 3. pod-ord is 2. a-text of t-coitally is "RYYRYRRO". b-text of t-coitally is "RGYRYRRB". parse-text of t-coitally is "x[sp]O[sp]-[sp]x[sp]-[sp]x[sp]x[sp]Y". player-move is "The [players] discuss how nice it is to meet her in this locality.". pickup-description is "'admiring' this locality".

t-formally is a pickup-line. pod-num is 3. pod-ord is 3. a-text of t-formally is "RYRRYRRO". b-text of t-formally is "?YR?YRRO". parse-text of t-formally is "x[sp]O[sp]x[sp]x[sp]A[sp]x[sp]x[sp]Y". player-move is "The [players] manage to seem surprisingly fly, moral. 'A folly, Mr.!' they say, at random. They've got the confidence and pace to pull it off, for now.". pickup-description is "too fly/moral". t-formally is parse-spoilable.

t-ribaldly is a pickup-line. pod-num is 3. pod-ord is 4. a-text of t-ribaldly is "RYRYRRRO". b-text of t-ribaldly is "RYRYRRPB". parse-text of t-ribaldly is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]L[sp]Y". player-move is "The [players] ask if she has been thinking bridally.". pickup-description is "talking bridally".

t-shabbily is a pickup-line. pod-num is 3. pod-ord is 5. a-text of t-shabbily is "RRYRRYRO". b-text of t-shabbily is "RRYRRYRO". parse-text of t-shabbily is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]Y". player-move is "A [pla-ma], going for the intellectual angle, describes the atmosphere by his lab, and his friend from a BBS, Hal Yi. He...he has to have messed up some details, somewhere.". pickup-description is "describing things shabbily".

t-shoddily is a pickup-line. pod-num is 3. pod-ord is 6. a-text of t-shoddily is "RRYRRYRO". b-text of t-shoddily is "RRYRRYRO". parse-text of t-shoddily is "x[sp]x[sp]O[sp]x[sp]x[sp]I[sp]x[sp]Y". player-move is "A tag-team effort. One [pla-ma] gives an odd sly hi. The other replies 'Dish, Loyd!' It's ridiculous, but polished enough that they pull it off leaving you seeing red.". pickup-description is "giving an odd sly hi".

t-silently is a pickup-line. pod-num is 3. pod-ord is 7. a-text of t-silently is "RYRYRRRO". b-text of t-silently is "P??YRR?O". parse-text of t-silently is "S[sp]?[sp]?[sp]-[sp]x[sp]x[sp]?[sp]Y". player-move is "The [players] perform a disturbingly convincing snit-yell: a style nit over a joke at SillyNet.". pickup-description is "having a snit-yell".

t-suddenly is a pickup-line. pod-num is 3. pod-ord is 8. a-text of t-suddenly is "RYRRYRRO". b-text of t-suddenly is "RYRRYRRO". parse-text of t-suddenly is "x[sp]U[sp]x[sp]x[sp]E[sp]x[sp]x[sp]Y". player-move is "The [players] incorporate the stylings of Desy Lund [']N Sly Dude, their perfect smooth timings making you see red.". pickup-description is "not stopping suddenly". t-suddenly is parse-spoilable.

section 8 letters non-repeating - pod 4

t-modestly is a pickup-line. pod-num is 4. pod-ord is 1. a-text of t-modestly is "RYRYRRRO". b-text of t-modestly is "RYRYRRRO". parse-text of t-modestly is "x[sp]O[sp]x[sp]E[sp]x[sp]x[sp]x[sp]Y". player-move is "Three [pla-ma]s put on a production. 'Ed, my lost styledom! Yet old Ms...' 'Ty, sod...' / 'Mel!' It's over-the-top, but through seeing red you almost admire their courage.". pickup-description is "behaving fake-modestly".

t-steamily is a pickup-line. pod-num is 4. pod-ord is 2. a-text of t-steamily is "RRYYRYRO". b-text of t-steamily is "?RYYRY?O". parse-text of t-steamily is "x[sp]x[sp]-[sp]-[sp]x[sp]I[sp]x[sp]Y". player-move is "The [players] claim they like May Islet Misty Ale for the taste and not the ridiculous commercials. It doesn't taste a bit like slimy tea!". pickup-description is "mis-discussing Misty Ale". t-steamily is parse-spoilable.

t-stupidly is a pickup-line. pod-num is 4. pod-ord is 3. a-text of t-stupidly is "RRYRYRRO". b-text of t-stupidly is "RRYRYRRO". parse-text of t-stupidly is "x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]Y". player-move is "One [pla-ma] idly puts in a mention he doesn't let duty slip. 'I ply dust.' It's tidy, plus, and it makes you see all red.". pickup-description is "talking all tidy-plus".

section 9 letters - pod 5

t-martially is a pickup-line. pod-num is 5. pod-ord is 1. a-text of t-martially is "RYRRYYRRO". b-text of t-martially is "PGPRYGPPB". parse-text of t-martially is "MARTIALLY". player-move is "Some of the [players] even begin to talk maritally.". pickup-description is "blabbing maritally". t-martially is parse-spoilable.

t-sincerely is a pickup-line. pod-num is 5. pod-ord is 2. a-text of t-sincerely is "RYRRYRYRO". b-text of t-sincerely is "RYRRYRYRO". parse-text of t-sincerely is "x[sp]I[sp]x[sp]x[sp]E[sp]x[sp]E[sp]x[sp]Y". player-move is "Someone shouts 'Celery's in! [']N slice yer...' / 'Rec, Lin, yes!' You cringe and see red at how forced and fake it is.". pickup-description is "speaking too sincerely".

t-sobbingly is a pickup-line. pod-num is 5. pod-ord is 3. a-text of t-sobbingly is "RYRRYRRRO". b-text of t-sobbingly is "RGPPYRRRO". parse-text of t-sobbingly is "x[sp]O[sp]B[sp]B[sp]I[sp]x[sp]x[sp]x[sp]Y". player-move is "The [pla-ma]s continuing their lobbyings, far too cheery and confident.". pickup-description is "making lobbyings".

t-tediously is a pickup-line. pod-num is 5. pod-ord is 4. a-text of t-tediously is "RYRYYYRRO". b-text of t-tediously is "RYRYYYRRO". parse-text of t-tediously is "x[sp]-[sp]x[sp]-[sp]-[sp]-[sp]x[sp]x[sp]Y". player-move is "Each [pla-ma] discusses how he outyields someone else with a lousy diet, all, 'Idlest! You!' You see red.". pickup-description is "disparaging a lousy diet". [the pod-ord being 5 is intentional. If we solve "tedious" we don't want "tediously" later.]

t-wearingly is a pickup-line. pod-num is 5. pod-ord is 5. a-text of t-wearingly is "RYYRYRRRO". b-text of t-wearingly is "RYYRYRRRO". parse-text of t-wearingly is "x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]x[sp]x[sp]Y". player-move is "The [pla-ma]s begin lawyering about why she should probably choose ONE of them. You see red, a bit.". pickup-description is "lawyering".

section 10-11 letters - pod 6

t-desperately is a pickup-line. pod-num is 6. pod-ord is 1. a-text of t-desperately is "RYRRYRYRYRO". b-text of t-desperately is "RYRRYRYRYRO". parse-text of t-desperately is "x[sp]E[sp]x[sp]x[sp]E[sp]x[sp]A[sp]x[sp]E[sp]x[sp]Y". player-move is "The [pla-ma]s stare deeply as they discuss a variety of subjects. One that makes you see extra red is how Patsy leered.". pickup-description is "continuing to stare deeply".

t-drawlingly is a pickup-line. pod-num is 6. pod-ord is 2. a-text of t-drawlingly is "RRYRRYRRRO". b-text of t-drawlingly is "PPYPRYRRRO". parse-text of t-drawlingly is "D[sp]R[sp]-[sp]W[sp]x[sp]-[sp]x[sp]x[sp]x[sp]Y". player-move is "Amazingly, the [pla-ma]s make projects like drywalling seem almost exciting--how competent they are, how incompetent some other guys are. Maybe it's just they're talking so fast, that they make [i]drywalling[r] interesting.". pickup-description is "blabbing about drywalling".

t-emotionally is a pickup-line. pod-num is 6. pod-ord is 3. a-text of t-emotionally is "YRYRYYRYRRO". b-text of t-emotionally is "YRYRYYRYRRO". parse-text of t-emotionally is "-[sp]x[sp]-[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]x[sp]Y". player-move is "One [pla-ma], seizing the moment, asks 'YOLO Ailment? Oo, tally mine. I yell at moon.' The response: 'All? No time, yo.' But it's surprisingly subdued. You see red, anyway.". pickup-description is "behaving emotionally".

t-reactively is a pickup-line. pod-num is 6. pod-ord is 4. a-text of t-reactively is "RYYRRYRYRO". b-text of t-reactively is "RYYRPGPGPB". parse-text of t-reactively is "REACTIVELY". player-move is "The [pla-ma]s keep talking creatively and creatively, looking around to make sure Gretta appreciates it.". pickup-description is "discoursing creatively". t-reactively is parse-spoilable.

section 12 letters - pod 7

t-despairingly is a pickup-line. pod-num is 7. pod-ord is 1. a-text of t-despairingly is "RYRRYYRYRRRO". b-text of t-despairingly is "RGRRYYRYRRRO". parse-text of t-despairingly is "x[sp]E[sp]x[sp]x[sp]-[sp]-[sp]x[sp]I[sp]x[sp]x[sp]x[sp]Y". player-move is "The [pla-ma]s begin redisplaying and redisplaying why they're so great.". pickup-description is "redisplaying their alleged greatness"

t-indiscreetly is a pickup-line. pod-num is 7. pod-ord is 2. a-text of t-indiscreetly is "YRRYRRRYYRRO". b-text of t-indiscreetly is "GRRYRRRGYPPB". parse-text of t-indiscreetly is "I[sp]x[sp]x[sp]-[sp]x[sp]x[sp]x[sp]E[sp]-[sp]T[sp]L[sp]Y". player-move is "The [pla-ma]s continue to babble, their clothes shining iridescently.". pickup-description is "wearing clothes shining iridescently".

to decide whether (n - a number) is unworkable:
	decide yes;

this is the find-pickup-line rule:
	repeat with QQ running through pickup-lines:
		if QQ is in Disowned Downside and pickup-prio of QQ is cur-player-blab:
			now current-idea is QQ;
			the rule succeeds;
	the rule fails;

to decide which pickup-line is pickup-to-hint:
	let cur-prio be 10;
	let got-pickup be false;
	let cur-pickup be t-despairingly;
	repeat with QQ running through ment reflexive pickup-lines in Disowned Downside:
		d "(DEBUG considering [QQ]) ";
		if pickup-prio of QQ < cur-prio:
[			d "(DEBUG potentially choosing [QQ]) ";]
			now cur-pickup is QQ;
			now cur-prio is pickup-prio of QQ;
			now got-pickup is true;
	if got-pickup is false:
		say "(BUG in pickup-line code) ";
	decide on cur-pickup.

every turn when player is in Disowned Downside and parleys splayer players are in Disowned Downside (this is the how players hit on Gretta rule):
[	repeat with QQ running through reflexive pickup-lines in Disowned Downside:
		if debug-state is true:
			say "DEBUG NOTES: [qq]: [pickup-prio of qq].";]
	let loop be false;
	while cur-pod-num is unworkable:
		increment cur-player-blab;
		if cur-player-blab > max-pod-num:
			if loop is true:
				say "The [pla-ma]s seem to be out of ideas! [bug-report]";
				continue the action;
			now loop is true;
			now cur-player-blab is 1;
		process the find-pickup-line rule;
		if the rule succeeded:
			if loop is true:
				if ever-loop-players is false:
					now ever-loop-players is true;
					say "The [pla-ma]s take a break. They've [one of][or]once again [stopping]babbled for long enough, and about enough, they can repeat their 'exciting' conversation all over again[if gretta-score > 0], except for what you managed to alter[end if].[paragraph break]";
			now current-idea is ment;
			say "[player-move of current-idea][line break]";
			if debug-state is true:
				repeat through table of otters anagrams:
					if the-from entry is current-idea:
						say "DEBUG spoiler: say [right-word entry].";
			continue the action;
	continue the action;

check scaning parleys splayer players when parleys splayer players are reflexed:
	say "You already dealt with the players in general, so you focus on their current method.";
	try scaning current-idea instead;

book Bran Barn

Bran Barn is an innie sideroom in Otters. Bran Barn is south of Disowned Downside. "This is a Bran Barn, empty of grain right now, and it'll probably stay that way[if gore ogre is in Bran Barn]. A painting covers a good chunk of the interior here[end if]. The only way out is back north--you can't imagine you'd be safe in the infidel infield in other directions. The Edictal Citadel can also be seen to the northwest, as the inside of the barn isn't totally shuttered from the outside[check-vow].". roomnud of Bran Barn is table of Bran Barn nudges. missed-text of Bran Barn is "an alternate recharging room south of [downside]".

Mr Lee is a person in Bran Barn. description is "He is one of those people you see nothing and everything special about at the same time[if Reclusion Inclosure is visited]. Sort of like [e-n-m]'s much, much nicer brother[end if].". "Mr. Lee stands here, undescribed."

lee-yet is a truth state that varies.

for printing a locale paragraph about Mr Lee:
	if lee-yet is false:
		say "Someone cries 'Hunger, [one of]he rung[or]rehung[in random order],' lamenting his destroyed barley. 'What more can you do to Mr. Lee? Guh, o, halt!' You see red at the last bit.";
		now lee-yet is true;
	else:
		say "Mr. Lee hangs around here, ";
		if Gore Ogre is moot:
			say "doing farmy chores.";
		else if ghoul hat is moot:
			say "glancing nervously at the Gore Ogre.";
		else:
			say "[one of]musing 'Here to [first custom style]GLOAT, HUH[r]?'[or]looking red-eyed and growling 'Hola, thug!'[or]giving a hot laugh.[or]crying, red-eyed, 'Ugh! O, halt!'[cycling]"; [bold-ok]
	now Mr Lee is mentioned.

chapter infidel infield

the infidel infield is bounding boring scenery in Bran Barn. "The infidel infield is Mr. Lee's property. While he would probably let you look around there[if gore ogre is not moot] with the ogre ogre gone[end if], you don't need to go there. It has, however, provided surprisingly good resistance so close to Elvira, perhaps at the cost of some of Mr. Lee's mental health."

chapter ghoul hat

Mr Lee wears the ghoul hat. printed name of Mr Lee is "Mr. Lee".

the ghoul hat is vanishing. description is "red and bloody and gruesome, it seems affixed to Mr. Lee. Maybe you can help it come loose, and Mr. Lee would appreciate that."

a-text of ghoul hat is "YRRRYYRR". b-text of ghoul hat is "YRRRYYRR". parse-text of ghoul hat is "-[sp]x[sp]x[sp]x[sp]-[sp]-[sp]x[sp]x".

check scaning Mr Lee when ghoul hat is touchable:
	say "Nothing happens until the settler points to the ghoul hat.";
	try scaning ghoul hat instead;

chapter Gore Ogre

the Gore Ogre is a vanishing person in Bran Barn. description is "Fortunately, the Gore Ogre doesn't seem immediately violent, but it is still intimidating Mr. Lee.". "[one of]A[or]The[stopping] Gore Ogre paces back and forth here, intimidating Mr. Lee."

a-text of Gore Ogre is "YRRY". b-text of Gore Ogre is "YRRY". parse-text of gore ogre is "UNIQUE". gore ogre is any-spoilable.

chapter sullenness us

Sullenness Us is vanishing LLPish scenery. description is "You hear voices call 'Sullenness, us? Sullenness! Us!' as if they are getting tired of being sullen, but what else can they do? Or maybe they wish they could maybe not be quite so sullen, but they don't deserve it. Whatever, they could use a helping hand if you have the time. And it's weird ... you think you see red writing you could read, if you stare and listen hard enough."

a-text of Sullenness Us is "YRRYRR". b-text of Sullenness Us is "YR?YR?". parse-text of Sullenness Us is "-[sp]x[sp]x[sp]-[sp]x[sp]x".

book Loop Pool

Loop Pool is a sideroom in Otters. Loop Pool is north of Disowned Downside. "Here a wire weir bars you from [one of]a Loop Pool[or]the Loop Pool containing the allot atoll[stopping] and restricts you going every way except back south. You can see the Edictal Citadel to the west, too[check-unless].". roomnud of Loop Pool is table of Loop Pool nudges. missed-text of Loop Pool is "an alternate recharging room north of [downside]".

to say check-unless: if sullenness us is touchable, say ". The 'Sullenness, Us' still echoes. You've done what you need, but maybe you can fix that, too"

to say check-vow: if vow here is touchable, say ". That vow here still echoes. It's not harming you, but maybe you could get rid of it"

after looking in Loop Pool for the first time:
	say "You hear whispering ... 'Le Mer guards the allot atoll from the not yet worthy.' Well, it's good to know what to call the center of the Loop Pool.";
	continue the action;

chapter le mer

Le Mer is a boring person in Loop Pool. description is "You can't locate where, exactly, Le Mer is.". bore-text is "Le Mer just exists. You can't do much with Le Mer.". Le Mer is scenery.

after choosing notable locale objects when player is in Loop Pool:
	if sea cube is in Loop Pool, set locale priority of eels to 0; [?? make sure le mer doesn't show up]

chapter sea cube

the sea cube is a vanishing boring transparent container in Loop Pool. description of sea cube is "You see eels in the cube.". "Eels float inside a sea cube here, just across the Loop Pool[eels-them].". bore-text of sea cube is "You aren't getting across the pool to do anything with the sea cube.".

to say eels-them: set the pronoun them to eels;

check examining sea cube: ignore the examine containers rule;

a-text of sea cube is "RYRYYRY". b-text of sea cube is "RGRYGRG". parse-text of sea cube is "x[sp]E[sp]x[sp]A[sp]U[sp]x[sp]E". sea cube is parse-spoilable.

chapter eels

the eels are a plural-named reflexive person. the eels are in the sea cube. description of eels is "[if eels are reflexive]They seem listless, as if they need a reason to do something[else]Swimming calmly and undistractedly[end if].". "Eels [if eels are reflexive]squirm around waiting for your directive[else]swim contentedly here between the weir and atoll[end if]."

a-text of eels is "YRRY". b-text of eels is "GRRY". parse-text of eels is "UNIQUE". eels are any-spoilable.

chapter vow here

the vow here is vanishing LLPish scenery. "You could probably [b]LISTEN[r] to hear the vow better. It doesn't make you see red if you don't hear the details."

a-text of vow here is "RYRYRYR". b-text of vow here is "RGPYRYR". parse-text of vow here is "x[sp]O[sp]W[sp]E[sp]x[sp]E[sp]x". vow here is parse-spoilable.

chapter boring scenery

section allot atoll

the allot atoll is boring scenery in Loop Pool. description of allot atoll is "[if eels are reflexed]You've been there. You don't need to go back[else]It doesn't look like a place everyone's allowed to go. Maybe you can be worthy of getting there[end if].[paragraph break]It's nothing to LOL at.". bore-text of allot atoll is "The allot atoll is behind the wire weir. [if eels are reflexed]You don't need to worry about it[else]It doesn't seem like a place you just visit for yucks[end if].". bore-check is the bore-allot-atoll rule.

this is the bore-allot-atoll rule:
	if current action is entering, say "Too far." instead;

section wire weir

The wire weir is bounding boring scenery in Loop Pool. description of wire weir is "It's there to prevent you from falling into the Loop Pool.". bore-text of wire weir is "The wire weir is there to keep you from going anywhere but back south. No need to mess with it.". bore-check is the bore-wire-weir rule.

this is the bore-wire-weir rule:
	if current action is climbing, say "That would be dangerous even without the eels ready to zap intruders[if eels are reflexed]--yes, intruders they already helped[end if]." instead;
	if current action is touching, say "That might get you zapped a bit." instead;

book Shiner Shrine

Shiner Shrine is an innie concept-room in Otters. Shiner Shrine is north of Minded Midden. "This north-south passage is [if sly imp is touchable]frustratingly blocked[else]pleasantly lifeless with the imp gone[end if]. You recognize coma camo to the east and west.". roomnud of Shiner Shrine is table of Shiner Shrine nudges.

chapter imp

The simply sly imp is a flippable neuter two-of-threer in Shiner Shrine. "A simply sly imp zooms about [list of touchable block-concepts], causing vaster averts[if power-back is true]. But for all that, you think you could've taken the imp even before you regained your full powers[end if].". description of sly imp is "It looks back at you with an entirely tiny leer, planning how to keep one step ahead of you as effortlessly as it can, or keep you just mad enough not to think how to get rid of it.[paragraph break]It seems to have several tricks, but that may just mean several ways to get at it."

after looking in Shiner Shrine:
	if sly imp is in Shiner Shrine, it-him-her sly imp;
	continue the action;

after doing something with imp (this is the imp gender neutralize imp rule):
	it-him-her sly imp;
	continue the action;

check taking imp: say "Simply much too fast." instead;

to decide which number is imp-score: decide on number of moot northern block-concepts.

section motleyer

motleyer is a vanishing northern block-concept in Shiner Shrine. flip-name of motleyer is "REMOTELY".

a-text of motleyer is "RYRYRYRO". b-text of motleyer is "RYRYRYRO". parse-text of motleyer is "x[sp]E[sp]x[sp]-[sp]x[sp]-[sp]x[sp]Y". [remotely]

section butlery

butlery is a vanishing northern block-concept in Shiner Shrine. flip-name of butlery is "BRUTELY".

a-text of butlery is "RRYRYRO". b-text of butlery is "PRYRGRB". parse-text of butlery is "B[sp]x[sp]U[sp]x[sp]E[sp]x[sp]Y". butlery is parse-spoilable. [brutely]

section legendary

legendary is a vanishing northern block-concept in Shiner Shrine. flip-name of legendary is "ENRAGEDLY".

a-text of legendary is "YRRYRYRRO". b-text of legendary is "YRRYRYRRB". parse-text of legendary is "E[sp]x[sp]x[sp]A[sp]x[sp]E[sp]x[sp]x[sp]Y". [enragedly]

check going north in Shiner Shrine:
	if imp is touchable, say "The imp gives a sidle-slide, then idles in front of you. It's [if one-imp-down]still a bit [end if]too smooth for you right now." instead;
	if power-back is false:
		now try-fail-pit-north is true;
		say "[one of]You hear a dangerous hooting as you go north. You run from a bunch of owls before they can carve at you with their beaks, but boy, they were quick, and it was close. You don't want to risk it again[or]Those owls are too much for you[stopping], with your powers drained." instead;

chapter coma camo

the coma camo is a boring bounding backdrop. It is in Shiner Shrine and Clarthead Cathedral. drop-region of coma camo is otters. description is "You're clever enough to see the coma camo. Most people are. But it's still an effective deterrent. And yet--you bet you could see a pattern of letters in it, if you look closely enough.". bore-text of coma camo is "You won't be able to dispel the coma camo, and you won't need to.".

book Lamer Realm

Lamer Realm is north of Shiner Shrine. Lamer Realm is a room in Otters. "[if adjsolve >= 3]Since it's been redone, there're no deer--or need! It's so much nicer here than the lamer realm it was, or unblest sunbelt it could be. [end if]Exotics coexist here, hardly the coxiest[if adjsolve is 4]. There're so many you think Gee, Fur Refuge[end if][atleast-evenbetter]. You can go back south--saturnic curtains guard all other ways out. They might even prevent loosing olingos, if any olingos were about.". roomnud of Lamer Realm is table of Lamer Realm nudges.

to say atleast-evenbetter: say ". [if enough-animals-solved-here]Even better,[else]At least[end if] it's secluded enough you can't see the Edictal Citadel from here"

to decide whether enough-animals-solved-here:
	if player is in Lamer Realm and adjsolve >= 3, yes;
	if player is in Perverse Preserve and nounsolve >= 3, yes;
	no;

printed name of Lamer Realm is "[if adjsolve < 3]Lamer Realm[else]Blest Belts[end if]"

understand "blest/belts" and "blest belts" as Lamer Realm when adjsolve >= 3.

the saturnic curtains are plural-named bounding boring scenery in Lamer Realm. description of the saturnic curtains is "They shine metallically and menacingly. You know better than to touch them. They are effective at keeping everything in one place[if adjsolve >= 3] and my even provide a safeguard for the animals you rescued[end if].". bore-text is "Saturnic means infected with lead poisoning, not just dark or ethereal, so you don't want to do too much with them."

for printing a locale paragraph about a reflexive puzanimal (called th) in Lamer Realm:
	if th is mentioned, continue the action;
	let X be number of reflexive puzanimals in Lamer Realm; [?? can this be adjsolve?]
	if X < 4, say "[line break]";
	say "[if X is 1]One more animal seems[else if X < 4]Some animals still seem[else]Several animals seem[end if] to need your help here: [list of touchable reflexive puzanimals].";
	now all touchable reflexive puzanimals are mentioned;

for printing a locale paragraph about a reflexed puzanimal (called th) in Lamer Realm:
	if th is mentioned, continue the action;
	let X be number of reflexed puzanimals in Lamer Realm;
	say "Just seeing the animal[if X > 1]s[end if] you helped ([list of touchable reflexed puzanimals]) leaves a peaceful feeling--you have allies nearby against Elvira.";
	now all touchable reflexed puzanimals are mentioned;

after choosing notable locale objects when player is in Lamer Realm (this is the group animals in lamer realm rule):
	repeat with X running through all reflexive puzanimals in Perverse Preserve:
		set the locale priority of X to 1;
	repeat with X running through all reflexed prepuzanimals in Perverse Preserve:
		set the locale priority of X to 5;
	if owls are in Lamer Realm,
		set the locale priority of owls to 9;
	continue the action;

chapter ocelots

the ocelots are plural-named reflexive neuter northy puzanimals. description is "[if ocelots are reflexive]They glance nervously back, as if they've done something wrong[else]They glance back at you, give you a finger-point you're not cool enough to give back, then ignore you in the nicest possible way[end if].". "Ocelots are making gestures here that you'd look silly making[if ocelots are reflexive]. They do, too, with their stupid sunglasses[else]. But they don't, thanks to your help[end if].". locale-text is "ocelots making gestures you'd look silly [if ocelots are reflexive](and so do they) [end if]making"

understand "ocelot" as ocelots.

the SlopInc Clip Ons are a boring thing. description of SlopInc Clip Ons is "Just terribly un-hip. They make the ocelots look like jive turkeys and not jive cats.". bore-text is "Uncool. Both the clip-ons and paying too much attention to them. And by too much, I mean any. Maybe you can help the ocelots, though.". the ocelots wear the SlopInc Clip Ons. understand "clipons" and "slopinc clipons" as SlopInc Clip Ons.

the Look Kool Shades are a wearable thing. description of Look Kool Shades is "Man! You couldn't wear them, or tell why they rout the cheap Ok-Ol[']-Look knockoffs, but the coolest ocelots can."

understand "sunglasses/glasses/shades" as SlopInc when ocelots wear SlopInc.
understand "sunglasses/glasses/shades" as Look Kool Shades when ocelots wear Look Kool Shades.

a-text of ocelots is "RYYRYRR". b-text of ocelots is "RYYPYRR". parse-text of ocelots is "x[sp]O[sp]O[sp]L[sp]E[sp]x[sp]x". ocelots are parse-spoilable.

chapter leopard

The leopard is a reflexive neuter northy puzanimal. "A leopard is here--[if leopard is reflexive]its colorings make it look like it is wearing a tacky (mostly) burnt orange jumpsuit, and it seems paw-tied, too[else]it looks more camouflaged since you changed it[end if].". locale-text is "a leopard whose markings look [if leopard is reflexive]like a jail jumpsuit[else]tough and fierce[end if]".

a-text of leopard is "RYRYRYR". b-text of leopard is "RYRYRYP". parse-text of leopard is "x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]D".

description of leopard is "He's got those jumpsuit markings and appears to be [if leopard is reflexed]no longer [end if]handcuffed."

the jumpsuit is part of the leopard. description is "The leopard looks back at you as if sorry for some inexplicable things it did, as if hoping it's served his time.". understand "markings" as jumpsuit.

chapter badger

The badger is a reflexive neuter northy puzanimal. description is "[if badger is reflexed]He looks dumber with those clothes, but you aren't about to tell him[else]Despite having all that fur, he seems embarrassed with his body[end if].". "[if badger is reflexed]A garbed badger stands around confidently here[else]A badger covers his naughty bits that were buried under his fur anyway[end if].". locale-text is "[if badger is reflexed]a garbed badger[else]a badger that seems uncomfortable in its fur alone[end if]".

a-text of badger is "RYRRYR". b-text of badger is "RGRRGR". parse-text of badger is "x[sp]A[sp]x[sp]x[sp]E[sp]x".

chapter satyr

the stray satyr is a reflexive male northy puzanimal. description is "He looks [if satyr is reflexed]like he's dreaming of a poem or something. You've made him happier[else]He looks preoccupied and mistrustful[might-read-satyr][end if].". "A stray satyr strides here, [if satyr is reflexed]dreaming of a better Yorpwald[else]looking out for himself[end if].". locale-text is "a stray satyr [if satyr is reflexed]dreaming of a better Yorpwald[else]resistant to all but practicality and survival[end if]".

to say might-read-satyr: say "[if satyr is read-yet]. You might be able to [b]READ[r] him--his name seems branded on"

understand "tsyra" as stray satyr when satyr is read-yet.

a-text of stray satyr is "YRRRO". b-text of stray satyr is "YR?R?". parse-text of stray satyr is "A[sp]x[sp]?[sp]x[sp]?". stray satyr is any-spoilable.

chapter owls

the owls are plural-named terse vanishing animals in Lamer Realm. description of owls is "Their big owly eyes follow you.". "[one of]You hear hooting and a flapping of wings. You've probably triggered some sort of trap. You look up to see owls swooping. You can duck the first blow, and you maybe have time to look at your settler, but they're too speedy en masse[or]All those animals are nice, but the owls about to dive-bomb you here mean you'll need to think fast. I think[stopping]."

a-text of owls is "RRYR". b-text of owls is "RRYR". parse-text of owls is "x[sp]x[sp]O[sp]x". owls are any-spoilable.

check going south in Lamer Realm: if owls are in Lamer Realm, say "[if power-back is false]You're not ready to deal with the owls yet[else]You'll deal with the owls later[end if].";

check going north in Perverse Preserve: if raptor is in Perverse Preserve, say "[if power-back is false]You're not ready to deal with the raptor yet[else]You'll deal with the raptor later[end if].";

every turn (this is the owls kill you rule):
	if owls were touchable and owls are touchable:
		unless the action is procedural:
			if debug-state is true, say "[the current action].";
			say "You were not fast enough to dispel the owls. They peck you to a death so horrible even an unemotional computer type is willing to give you a chance to change it with [b]UNDO[r].";
			get-dead;
		else:
			ital-say "You'll get a mulligan for instantaneous actions like examining, but you may want to deal with those owls, or flee.";

every turn (this is the raptor kills you rule):
	if raptor was touchable and raptor is touchable:
		unless the action is procedural:
			say "You were not fast enough to dispel the raptor. It gobbles you so quickly and gruesomely that even an unemotional computer type is willing to give you a chance to change it with [b]UNDO[r].";
			get-dead;
		else:
			ital-say "You'll get a mulligan for instantaneous actions like examining, but you may want to deal with that raptor, or flee.";

book Clarthead Cathedral

Clarthead Cathedral is a concept-room in Otters. Clarthead Cathedral is south of Minded Midden. Clarthead Cathedral is innie. "[if whiners are in Clarthead Cathedral]The noise in this north-south passage just unbearable[else]With the [whiners] gone, this is a relatively plain north-south passage[end if]. You recognize coma camo to the east and west.". roomnud of Clarthead Cathedral is table of Clarthead Cathedral nudges.

check going south in Clarthead Cathedral:
	if whiners are touchable, say "The whiners can't imagine why anyone would want to go there. They block you, for your own good. They seem to have all sorts of reasons, and there's no way past the quantity, if not the quality, of their arguments." instead;
	if power-back is false:
		now try-fail-cathedral-south is true;
		say "[one of]A very loud roar scares you. You doubt adverbs are up to the task of calming it. You decide to return once you have[or]That roar scares you. To deal with it, you'll probably need[stopping] your full powers back." instead;

to decide which number is whiner-score: decide on number of moot southern block-concepts

chapter shrewin whiners

the shrewin whiners are plural-named flippable two-of-threers in Clarthead Cathedral. description is "They blather on hopelessly, as if you should try to be as whiny as they are. [one of]Probably many of them are named Sherwin or Whisner, but more importantly, m[or]M[stopping]aybe you can make them run out of energy.". "Shrewin['] whiners here block the way south, displaying [list of touchable block-concepts] [if one-whine-down]almost [end if]without stopping. The chatter is all over the place, yet controlled enough to distract you[if power-back is true]. Yet, for all their bluster, you feel like you could've taken them even before you regained your powers[end if].". printed name of shrewin whiners is "shrewin['] whiners".

section callosity

callosity is a vanishing southern block-concept in Clarthead Cathedral. flip-name of callosity is "STOICALLY".

a-text of callosity is "RRYYRYRRO". b-text of callosity is "RRYYRYRRB". parse-text of callosity is "x[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]x[sp]Y". [stoically]

section tallyhoing

tallyhoing is a vanishing southern block-concept in Clarthead Cathedral. flip-name of tallyhoing is "LOATHINGLY".

a-text of tallyhoing is "RYYRRYRRRO". b-text of tallyhoing is "RYYRRYRRRO". parse-text of tallyhoing is "x[sp]-[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]x[sp]Y". [loathingly]

section jollity

jollity is a vanishing southern block-concept in Clarthead Cathedral. flip-name of jollity is "JOLTILY".

a-text of jollity is "RYRRYRO". b-text of jollity is "PGPRGRB". parse-text of jollity is "UNIQUE". jollity is parse-spoilable. [joltily]

book Perverse Preserve

Perverse Preserve is south of Clarthead Cathedral. Perverse Preserve is a room in Otters. "[pre-desc][atleast-evenbetter].". roomnud of Perverse Preserve is table of Perverse Preserve nudges.

for printing a locale paragraph about a prepuzanimal (called th) in Perverse Preserve:
	if th is mentioned, continue the action;
	let nt be number of touchable prepuzanimals;
	if nt < 4, say "[line break]";
	say "[if nt is 4]You see many out-of-place things here[else if nt > 1]Some things are still out of place[else]Only one more weird thing lingers here[end if]: [list of touchable prepuzanimals].";
	now all touchable prepuzanimals are mentioned;

for printing a locale paragraph about a puzanimal (called th) in Perverse Preserve:
	if th is mentioned, continue the action;
	let nt be number of touchable puzanimals;
	say "So far you've rescued or reconstituted [list of touchable puzanimals].";
	now all touchable puzanimals are mentioned;

printed name of Perverse Preserve is "[if nounsolve < 3]Perverse Preserve[else]Uprates Pasture[end if]"

understand "uprates/pasture" and "uprates pasture" as Perverse Preserve when nounsolve >= 3.

to say pre-desc:
	if number of animals in Perverse Preserve is 1:
		say "[if know-restrict is true]The [CRITTERS RESTRICT] blocks you going anywhere except back north. Y[else]This clearing seems unbounded, but y[end if]ou don't see any animals. You think. And no pea to change to an ape";
		continue the action;
	else:
		say "You rescued [if nounsolve is 4]all the[else if nounsolve is 1]one of the[else]a few[end if] animals here, [if nounsolve is 4]so you can really only go back north[else if nounsolve is 3]which feels like enough, even if one is left. You can go back north[else][still-eerie][end if]";
		continue the action;

to say still-eerie: say "but it's still eerie[if know-restrict is true], even without the [CRITTERS RESTRICT] blocking every way except back north[else]. You can go back north[end if]"

chapter critters restrict

the CRITTERS RESTRICT is bounding boring scenery in Perverse Preserve. description of the CRITTERS RESTRICT is "You can't see it, but it doesn't just restrict critters. It restricts you, too.". bore-text is "You can't do anything about the [CRITTERS RESTRICT] field. But you don't need to go beyond it.". printed name is "CRITTERS-RESTRICT".

chapter corona and racoon

A corona is a prepuzanimal. the corona is fixed in place. description is "It's almost like a pair of dark scavenger's eyes. You can't locate its original light source--you try to cut it off, but you can't.". "A corona of light scurries about on the floor. It may have an extra c around its edge.". locale-text is "a corona of light that sweeps slowly along the ground".

a-text of corona is "RYRYYR". b-text of corona is "RYRGYR". parse-text of corona is "x[sp]A[sp]x[sp]O[sp]O[sp]x". corona is parse-spoilable.

the racoon is a southy puzanimal. description is "It looks at you trustingly, seeming to understand you rescued it.". "A racoon sits up alertly here. It has a lit tail.". locale-text is "a racoon with a lit tail".

a lit tail is a boring thing. it is part of the racoon. it is amusing. printed name of lit tail is "a lit tail". description of a lit tail is "The racoon's tail is beautiful and eerie, but useless as far as you can tell, so it's not worth bothering with.". bore-text is "The/a lit tail isn't worth fiddling with. You rescued the racoon. That's good enough."

chapter thrones and hornets

the thrones are plural-named prepuzanimals. the thrones are fixed in place.

understand "throne" as thrones.

description of thrones is "They're made out of, not metal, but locusts. Well, not quite that.". locale-text is "thrones too dingy to sit on".

a-text of thrones is "RYRRYRR". b-text of thrones is "RYPRYRP". parse-text of thrones is "x[sp]-[sp]R[sp]x[sp]-[sp]x[sp]S".

check taking the thrones: say "They seem abnormally sharp, as if they could sting you again and again." instead;

section hornets

the hornets are plural-named southy puzanimals. description is "Thankfully, they are not buzzing with intent to sting you.". "Hornets are buzzing around here.". locale-text is "hornets buzzing about unthreateningly".

understand "hornet" as hornets when mrlp is otters.

chapter pines and snipe

some pines are a plural-named prepuzanimal. description is "The bases of the pines look almost like birds['] feet.". locale-text is "some pines".

a-text of pines is "RRYRY". b-text of pines is "RRYRY". parse-text of pines is "x[sp]x[sp]-[sp]x[sp]-".

check taking pines: say "The effort would crush your spine." instead;

section snipe

check taking snipe: say "It will follow you when you call." instead;

the snipe is a southy puzanimal. description is "It has a long needle-like bill.". "A snipe is pacing around here.". locale-text is "a snipe pacing around".

chapter nails and snail

Some nails are plural-named prepuzanimals. "Some nails are lying all over the floor here.". locale-text is "nails lying all over the ground".

description of nails is "They're in a spiral. Odd."

check taking nails: say "They're almost glued to the floor or something." instead;

a-text of nails is "RRYYR". b-text of nails is "RRYYR". parse-text of nails is "x[sp]x[sp]A[sp]I[sp]x". nails is parse-spoilable.

section snail

the snail is a southy puzanimal. description is "It's quite spiky and seems to move faster than your average snail.". locale-text is "a snail slithering slowly in a circle". "A snail slithers slowly and saltlessly here."

chapter raptor trap

the raptor is an animal in Perverse Preserve. description is "It's small for a raptor, but that's all relative. It's still bigger than most mythical beasts, but it's also oddly colored, red and yellow and green and purple patches. But it's still dangerous.". "[one of]You hear a hollow ol['] howl and a pounding of very large paws. You may've triggered some silent trap--a huge raptor comes into view, though it is too big to follow you back north[or]A nervous, ravenous raptor squawks and roars[stopping]."

before entering thrones:
	say "You try to sit on the thrones, by you feel a stinging." instead;

after choosing notable locale objects when player is in Perverse Preserve (this is the order animals in perverse preserve rule):
	if raptor is in Perverse Preserve:
		set the locale priority of raptor to 9;
	if parrot is in Perverse Preserve:
		set the locale priority of parrot to 9;
	repeat with X running through all puzanimals in Perverse Preserve:
		set the locale priority of X to 1;
	repeat with X running through all prepuzanimals in Perverse Preserve:
		set the locale priority of X to 5;
	continue the action;

section parrot

the parrot is a vanishing animal. description is "Pretty much every color of the rainbow.". "The parrot you changed from a raptor [if player is in Reclusion Inclosure]glares from the corner here at Elmer and Merle, like it could really damage them if they were big enough[else]flutters about here[end if].". the parrot wears the weltish whistle.

a-text of raptor is "RYRRYR". b-text of raptor is "RGRRGR". parse-text of raptor is "x[sp]A[sp]R[sp]R[sp]O[sp]x". raptor is parse-spoilable.

a-text of parrot is "RYRRYR". b-text of parrot is "RGRRGR". parse-text of parrot is "R[sp]A[sp]x[sp]x[sp]O[sp]R". parrot is parse-spoilable.

raptor-trap is a truth state that varies. raptor-trap is false.

section parrot-flees

[this is a bogus item -- it is simply something to flip to that can't be the parrot, as the raptor already flips to the parrot!]

the parrot-flees is an abstract thing. description is "BUG."

book Reclusion Inclosure

Reclusion Inclosure is a room in Otters. Reclusion Inclosure is west of Disowned Downside. "A monstery monastery. Mythical or extinct animals['] laminas of populate the walls here, along with a forces fresco. You can leave the Edictal Citadel via a [if elmer is moot]wide (thanks to the parrot/raptor)[else]narrow[end if] passage to the east, or in to the west, [if hydra-known is true and hydra is in archon anchor]though you'll need to get rid of that hardy hydra[else]if you dare[end if]. The ways north and south lead to coevals['] alcoves which are probably distractions.". roomnud of Reclusion Inclosure is table of Reclusion Inclosure nudges. printed name is "[if elmer is moot]Hidings Dishing Shindig[else]Reclusion Inclosure[end if]".

section going west

hydra-known is a truth state that varies.

check going west in Reclusion Inclosure (this is the need quick rule):
	if parrot is moot and raptor is moot:
		if medals are not reflexed:
			say "Your medals clink as you go west. Elvira hears them and ambushes you! She touches what you recognize as the Ultimate Mutilate-It Amulet and fires the legendary Phrase Shaper Phaser at you. You think of possible replies, of ways to block her, as you slump to the ground. But you are not fast enough. 'Last word: drat! Slow!'[paragraph break]The last thing you hear as you slump to the ground is Gretta's medals clanking--the ones you never quite used[if medals are prefigured], though you sort of figured how, earlier[end if].";
			get-dead;
			follow the shutdown rules instead;
		continue the action;
	if aside-llp is in Reclusion Inclosure:
		say "[e-n-m] block you from going west. Perhaps you could use some of your magic to push by them." instead;
	if hydra is in Rancho Archon Anchor:
		if hydra-known is true, say "A little voice in your head says 'Ohnoes soon, eh?'.[paragraph break]You're pretty sure you need help to tackle the hardy hydra[if elmer is touchable]. You probably need to get rid of [e-n-m] first, too[else if parrot is touchable]. Your parrot squawks slightly[end if]." instead;
		now hydra-known is true;
		say "You stroll confidently west, having [if elmer is touchable]pushed [e-n-m] aside[else]gotten rid of [e-n-m][end if]. But you quickly run back east at the sight of a hardy hydra. You make it back before it can breath its HD-Ray on you. Nemesis seems in. Er, dang. Danger![paragraph break][Gretta] talked about needing allies. You suspect she meant someone or something that could beat the hydra." instead; [bold-ok]
	say "[one of]You pass asps and feel live evil enduringly underlying...you yell 'Time's Up! Impetus imputes...'[paragraph break]'Um, spite? I'm upset!' Elvira shrugs. 'Spume it.'[or]A punitive invite-up calls you back.[or]'Resenter re-enters!' Elvira laughs.[stopping]";

chapter two LLPs

section aside-llp

the aside-llp is privately-named proper-named vanishing LLPish scenery in Reclusion Inclosure. "[bug-report]". printed name is "between [e-n-m]"

a-text of aside-llp is "YRYRY". b-text of aside-llp is "?RYRY". parse-text of aside-llp is "-[sp]S[sp]-[sp]D[sp]-". aside-llp is parse-spoilable.

understand "aidesllp" as aside-llp when debug-state is true and aside-llp is fungible.

section holy nest

the holy nest is boring LLPish vanishing scenery. "It's only nominally holy. It's covered with writing you could sneak a look at.". bore-text of holy nest is "The holy nest isn't important to finding Elvira, but maybe it could help you expose that much more of [e-n-m]'s hypocrisy.".

a-text of holy nest is "RYRYRRRO". b-text of holy nest is "PGRYRRRO". parse-text of holy nest is "H[sp]O[sp]x[sp]E[sp]x[sp]x[sp]x[sp]Y".

chapter useless scenery

section coevals' alcoves

the coevals alcoves are boring amusing scenery in Reclusion Inclosure. description of coevals alcoves is "You can't see the alcoves, but they can't be a fun place to go.". bore-text is "The alcoves are not worth visiting. It's west where the payoff is.". printed name of coevals alcoves is "coevals['] alcoves".

check going when player is in Reclusion Inclosure:
	if noun is inside, try going west instead;
	if noun is outside, try going east instead;

check going east in Reclusion Inclosure: if medals are reflexed and Rancho Archon Anchor is unvisited, say "You don't know when your super-speed will wear off. You'd hate to waste it where you've already been." instead;

section forces fresco

the forces fresco is boring amusing scenery in Reclusion Inclosure. description of forces fresco is "One glance tells you it deserves recs of f-score, with its disturbing violence and amorality.". bore-text of forces fresco is "The fresco is just there to taunt and annoy people not aligned with Elvira."

section animals' laminas

the animals laminas are boring useless scenery in Reclusion Inclosure. "Disturbing, really. They depict bizarre mutants designed for warfare, for keeping people down. They're signed VELASCO, probably the resident artist in the coevals['] alcoves.". bore-text of animals laminas is "The laminas aren't critical. They are just part of the whole bad-guy ambiance.". printed name is "animals['] laminas".

understand "animals/lamina/animal" as laminas.

chapter elmer and merle

an aide is a kind of person.

to say e-n-m: say "[one of]Elmer and Merle[or]Merle and Elmer[at random]"

Elmer is an aide in Reclusion Inclosure.

Merle is an aide in Reclusion Inclosure. The chum of Merle is Elmer.

to decide which number is elmer-merle-bonus:
	decide on boolval of (whether or not aside-llp is reflexed) + boolval of (whether or not holy nest is reflexed);

check scaning an aide:
	if aside-llp is touchable:
		say "You get something for both [e-n-m]:[line break]";
		try scaning aside-llp instead;
	if holy nest is touchable:
		say "Nothing for [e-n-m], but the holy nest between them gives something.";
		try scaning holy nest instead;
	say "Nothing. But you already found a couple ways to flummox and annoy [e-n-m]. Now you need to get rid of them, and [if hydra-known is false]whatever guards may be[else]the hydra[end if] behind them, for good." instead;

to say e-m: say "[one of]Merle[or]Elmer[in random order]";

[note: the scanning is weird here. They go to HONESTLY and ASIDE. I could do better with this, but I didn't.]

initial appearance of Elmer is "[bug-report]".
initial appearance of Merle is "[bug-report]".

understand "aide" as an aide.

does the player mean doing something with Merle:
	if a random chance of 1 in 2 succeeds, it is unlikely;
	it is likely.

rule for printing a locale paragraph about Elmer:
	say "[e-n-m], two robed bored Coevals in scowl cowls, glance over at you contemptuously as they babble[if aside-llp is not moot]. They make it clear they're Elvira's ideas aides[else if holy nest is touchable]. You can see the holy nest peeking out behind them[end if].";
	now Merle is mentioned;
	now Elmer is mentioned;

description of Elmer is "He wears sober robes. His mouth smiles on the left and frowns on the right."

description of Merle is "He wears sober robes. His mouth smiles on the right and frowns on the left."

the sober robes are plural-named boring scenery in Reclusion Inclosure. description of sober robes is "[e-n-m] don't stylize zestily.". bore-text is "[e-n-m], noticing you noticing their robes, yell 'Us? Drab? Absurd!'"

chapter weltish whistle

the weltish whistle is a reflexive thing. description is "It's ugly, that's for sure, but [if parrot wears whistle]the parrot isn't carrying it around for nothing[else if whistle is reflexive]you can probably [b]PLAY[r] it and practice to figure how to use it[else]you do know how to [b]PLAY[r] it, and that's something[end if]. It reads DISCOURAGE-SCOURGE AID. WHISTLES: SHE WILTS. Red writing indicates who crafted it."; [bold-ok]

after printing the name of the whistle while taking inventory:
	say " ([if whistle is reflexed]which you know how[else if whistle-play is true]which you tried and failed[else]which you haven't tried[end if] to play)";

a-text of whistle is "RYYRRO". b-text of whistle is "RGYPRO". parse-text of whistle is "x[sp]E[sp]E[sp]P[sp]x[sp]Y". whistle is parse-spoilable.

does the player mean playing the whistle: it is very likely.

check taking whistle when parrot has the whistle: say "'Awk! I like you, but not [']til I've had my revenge.'" instead;

chapter blowing

blowing is an action applying to one thing.

understand the command "blow" as something new.

understand "blow [something]" as blowing.

carry out blowing:
	if noun is harmonicas or noun is whistle, try playing the noun instead;
	if noun is a person, say "You don't really want an STD that leads to DTs." instead;
	say "That's not an instrument." instead;

chapter playing

playing is an action applying to one thing.

understand the command "play" as something new.

understand "play [something]" as playing.

whistle-play is a truth state that varies;

carry out playing:
	if noun is sitar, say "Your attempt at music does not provide the way to heaven." instead;
	if noun is saver, try pushing repeat button instead;
	if noun is harmonicas, say "I'll have to stem that. Your playing's the pits. Music, not game playing." instead;
	if noun is whistle:
		if parrot has whistle, say "Not while the parrot has it." instead;
		if whistle is reflexive:
			if location of player is Rancho Archon Anchor:
				say "Elvira looks momentarily worried as you blow on the whistle, then gives laugh more musical than your unpracticed playing. '[randbla]!' As you fall, you hear Elvira giggle '[if player is female]Hereon, [b]I[r], heroine[else]I Master A Mister[end if].'";
				get-dead;
				follow the shutdown rules instead;
			now whistle-play is true;
			say "A horrible noise[one of][or] again[stopping], as if someone [i]yelped[r][one of]. You can't put up with it more than a split-second, and you probably need to figure how to make a more tolerable, less shrill sound[or]. Hm, how to lower the pitch[stopping]." instead;
		if location of player is Rancho Archon Anchor:
			if nounsolve + adjsolve is 0:
				say "Elvira looks momentarily worried, then giggles sardonically as nothing happens on your end. Plenty happens on hers. 'Ah, treat a threat.' Maybe you need some help?";
				get-dead;
				follow the shutdown rules instead;
			abide by the region-done-check rule;
			say "As you blow the whistle, you feel a deep vibration on the ground. You hear a cacophony of animal noises in the distance. '[randbla]!' Elvira's voice still lilts as she calls for slayer layers relays. 'Gash, hags! Groupies, uprise! Go!'[paragraph break]'Ahh, get the hag!' you yell. The battle is on!";
			say "[lee-or-eels][wfak]";
			say "Elvira cries 'New aid? Naw, die!' then 'To arms! A storm!' at...all the lethal: [twiddle of table of elvira machines and 3]. 'No mischance mechanics on...'[paragraph break]But animals from the fabled Odd Pack Paddock construe trounces and rifest strife: [twiddle of table of animal friends and 5]. Even ticks stick to Elvira's monsters and manage to triage a tiger, too. You see her wit wither, writhe, grow whiter. 'Strafe faster! Ye slack lackeys!' She and her creations fall with a prime thud as you triumph in their dump. The fiendish is FINISHED--influential, until...FINALE."; [bold-ok]
			now otters is solved;
			now last-solved-region is otters;
			reg-inc;
			force-status;
			say "Elmo and Gretta are waiting for you back at the Means Manse with I knew you could do it, etc. But they're wondering--there's a fellow who might need a little help in peacetime. Maybe you could [b]ROVE OVER[r] and help him later. Or, if you're interested right now, would you like to go back to the Strip of Profits?";
			unless the player dir-consents:
				say "Yeah. Maybe later. If you want to help him, you can [b]ROVE OVER[r] from your Dusty Study next time someone knocks. Or you can just [b]UNDO[r] at the next command.[paragraph break]For now, you'll be a ... REPOSED DEPOSER.";
				note-denial;
				end the story finally saying "A MONSTER ROTS. AMEN.";
				follow the shutdown rules instead;
			say "Yeah. You've got nothing pressing back at the Means Manse. But it's probably a good idea to keep the settler and notepad. The whistle and medals will go to a museum, or something.[paragraph break]The animals escort you to the Strip of Profits.";
			note-denial;
			clean-for-roving;
			continue the action;
		else if player is in Reclusion Inclosure:
			say "You already took care of Merle and Elmer here. Somewhere, though, something or someone worse lurks." instead;
		else:
			say "You don't need to call anyone in this area." instead;
	say "That doesn't seem like a toy or an instrument." instead;
	the rule succeeds;

to note-denial: ital-say "also, [b]IGNORE REGION[i] sends you to the Strip of Profits, and [b]LEAD IN[i]/[b]LEADIN[i] ([b]DENIAL[i] or [b]NAILED[i] or both) sends you there with Otters available.";

to say lee-or-eels:
	say "[wfak]";
	if gore ogre is moot:
		if eels are moot:
			say "You're surprised to see Mr. Lee and the eels together (of course! Lee's eels!) alongside--yes, Gretta with animals of her own.";
		else:
			say "[line break]Some eels tag along behind Mr. Lee. You [if Loop Pool is visited]don't recognize them but feel you could or should[else]look away sheepishly--you didn't convince them[end if], and they look briefly at you and nod. They know what needs to be done.";
	else:
		say "[line break]A man tags along behind the eels you rescued. [if Bran Barn is visited]It's Mr. Lee, whom you couldn't quite befriend[hat-gone], but he salutes you in half-apology[else]His clothing labels him as Mr. Lee. He seems to mumble something before saluting you, and he's little more than a spectator, but he smiles at the baddie-slaughter he hopes is ahead.";

to say hat-gone: say "[if ghoul hat is moot] despite zapping that ghoul hat[else], though his ghoul hat's gone[end if]";

to clean-for-roving:
	now roved is true;
	if mangiest steaming is in strip, moot mangiest steaming;
	if tokers are in strip, moot tokers;
	if nestor is in strip, moot nestor;
	moot solid idols;
	moot whistle;
	moot medals;
	moot magneto;
	now others is unsolved;
	move player to Strip of Profits;
	if number of portals in Strip of Profits > 0:
		say "Moving [list of portals in Strip of Profits] out of the Strip. They shouldn't be there. This is a bug but not game-critical." ;
		repeat with myport running through portals in Strip of Profits:
			if myport is not Throes Hoster, moot myport;

chapter whistleing

whistleing is an action applying to nothing.

understand the command "whistle" as something new.

understand "whistle" as whistleing.

carry out whistleing:
	if parrot is touchable, say "You try to drop a hint for the parrot to give you the whistle, but he croaks for revenge." instead;
	if player does not have whistle, say "Music is not your talents. You'd need an instrument." instead;
	try playing the whistle instead;

book Rancho Archon Anchor

after printing the locale description for Rancho Archon Anchor when Rancho Archon Anchor is unvisited:
	say "'Proceedings precognised. Rats, the...eh, start the arts,' Elvira mutters as she pulls out the Ultimate Mutilate-It Amulet! A blast of energy flies at you, and reflexively, you yell 'Ail ME? Tut!' The ray fizzles.[paragraph break]'Ooh! Stout! ... Shootout!' She pulls out her phrase shape phaser, but you hum an e-sharp to deflect it. 'Won't kill a know-it-all.'[paragraph break]'Intact? It can't! SPAWN, Pawns!' she cries. 'P. S. Naw,' you say.[paragraph break]Elvira gives a crusty curtsy. 'Oh! Most smooth,' she says, with indulga-languid calm, i.e. malice, and hi-grade hid rage. And the sort of tinkly laugh you always felt forced to trust. 'You temporarily disabled my purple pulper and oranger groaner. I can't attack you first--but, details! You have to admit it was clever, filling Yorpwald with annoying anagrams to frame you!'[paragraph break]And you almost do. She has that glibness blessing! You're almost suckered, yourself. You may need fighters impervious to her charms to get rid of her for good.[paragraph break](Push any key.)[wfak]";
	say "'Gah, hag!' you say.[paragraph break]'Neat ante. Gas [']em, mages!' But they aren't there. 'Me, cry mercy?'[paragraph break]Stalemate. Lame state. Unless you have a way to kill her[if number of reflexive animals in Lamer Realm > 1 or number of pre-animal things in Perverse Preserve > 1]. Or round up more troops[end if].";
	if do-i-chat is true:
		now qbc_litany is litany of Elvira;
	else:
		try talking to Elvira;

Rancho Archon Anchor is an innie room in Otters. Rancho Archon Anchor is west of Reclusion Inclosure. "You feel as slowed here as you did on entering the barley field. Vast vats emit sour moisture over a prey pyre. The room is cluttered with a stocked stockade, a torpid tripod (slowing you down,) and entrances to a warpish warship and becharm-chamber. That nacht-chant could be coming from any of them, or maybe even the enerve-veneer present all around. You can leave to the east.". roomnud of Rancho Archon Anchor is table of Rancho Archon Anchor nudges.

chapter fleeing taunts

carry out going east in Rancho Archon Anchor:
	elvira-flee-taunt;
	continue the action;

to elvira-flee-taunt:
	if do-i-chat is true:
		say "This should not happen in full release mode, but all you can do is blow the whistle to win.";
		continue the action;
	say "You leave her sin shrine [if current action is not going east]with extra quickness [end if]before getting a shiner.[paragraph break]Elvira mocks you[one of], but makes no attack[or] again[stopping]: [randbla][paragraph break]";
	now Elvira-delay is 0;

chapter SCARY SCENERY

section torpid tripod

the torpid tripod is amusing boring scenery in Rancho Archon Anchor. description of torpid tripod is "The torpid tripod bubbles up evilly. You'd hate to have to deal with it one-on-one.". bore-text is "[one-more-evil]."

to say one-more-evil:
	say "It's too far away to do anything with and survive. For your purposes, it's just one more bit of evil scenery"

section enerve veneer

the enerve veneer is amusing boring scenery in Rancho Archon Anchor. description of enerve veneer is "It may not be lethal, but it'll distract you enough, something actually lethal might get you.". bore-text is "[one-more-evil]."

section becharm chamber

the becharm chamber is amusing boring scenery in Rancho Archon Anchor. description of becharm chamber is "It's probably best not to look at the becharm chamber too much. I mean, it could ambush you into liking it. That'd be horrid.". bore-text is "It's too far away to do anything with. For your purposes, it's just one more bit of evil scenery."

section nacht chant

the nacht chant is amusing boring scenery in Rancho Archon Anchor. description of the nacht chant is "You probably can't do anything about the nacht chant, but at least it isn't profane. Or chantS. They might snatch and stanch you.". bore-text is "You--you're almost getting used to the nacht chant."

section vast vats

the vast vats are amusing plural-named boring scenery in Rancho Archon Anchor. description of the vast vats is "You don't want to know what's in the vats.". bore-text is "The vats are far away, but you can smell sulfinyl in them reeking sinfully--no silly fun."

chapter warpish warship

the warpish warship is amusing boring scenery in Rancho Archon Anchor. description of warpish warship is "It's twisted in more ways than one.". bore-text of warpish warship is "You'll never do anything with the warship on your own. But defeating Elvira will probably disable it.".

chapter a stocked stockade

a stocked stockade is amusing boring scenery in Rancho Archon Anchor. description of a stocked stockade is "You don't know the details, being the good guy and all, but you don't need to.". bore-text is "You shudder to think what you could do with it--or what it could do to you.".

chapter ELVIRA HERSELF

Elvira is a woman in Rancho Archon Anchor. understand "necro/crone" and "necro-crone" and "necrocrone" as Elvira. "[one of]It's Elvira! The necro-crone![paragraph break]She looks upset, still, over the death of her hardy hydra[or]Elvira seems impatient for you to make a move[stopping].". description is "Elvira's actually got ... persistent prettiness. Sterling ringlets. She looks like a seraph even with that phrase-shaper-phaser. Though her beauty makes you say yea, but..."

section Ultimate Mutilate it Amulet

the Ultimate Mutilate it Amulet is an amusing boring thing. description of the mutilate it amulet is "It's very bare except for the words 'Um...a title?' on it.". bore-text is "Hm, best not to try anything. It can't zap you if you don't mess with it.". printed name is "Ultimate Mutilate-it Amulet". Elvira wears the Ultimate Mutilate It Amulet.

section phrase shaper phaser

The phrase shaper phaser is an amusing boring thing. description of phrase shaper phaser is "It's curvy and futuristic and gives her the grained endearing to look more like a seraph than an amused medusa.". bore-text is "You heard rumors. But you did not believe it was true. She can just say something, hit someone with it, and make you forget what you were doing. Even if the amulet doesn't work on you.". Elvira carries the phrase shaper phaser.

check talking to Elvira when current quip is final-quip:
	say "'[one of]Neat lob. Notable. Bleat on!' [or]State nag?! Stagnate!' [in random order] Reason won't work, here." instead;

every turn when current quip is final-quip and player is in Rancho Archon Anchor:
	say "Cordial, cold air. [one of]'Make a diss, punk? Kiss and make up!' She pauses. 'Enough of jollying you along with your anagram nonsense! It's not like YOU ALONE can kill me. No person is brave enough to join you.' [or][stopping][one of]Elvira points out you're just jealous she got here on charisma.[or]Elvira mentions she's making others happy, a more exciting happy than yours.[or]Elvira complains social engineering is not as easy as it looks![or]'I'm still vaguely worried you have something up your sleeve, like [urbfogel]!'[or]'It would be kind of exciting to lose, you know. Versus just growing old and dying bored and boring. I get the kingdom I want, too. Win-win.' It all has a lilt.[in random order]";

section Elvira dialogue

the litany of Elvira is the table of Elvira comments.

table of quip texts (continued) [tqt-el]
quip	quiptext
null-quip	"This shouldn't be part of the conversation."
logical-quip	"'Pick a nit? Pack it in! Limp dung, dumpling! Drone-o-nerd!' she laughs, hypnotic, pythonic. 'I? Spoon Poison? Overbearing, raving bore!' Your reply is undone in innuendo." [start ELVIRA text]
wtf-quip	"WTF is swift. 'Egad, an agenda. Rugged Grudge. Reactions so certain. A sincerest resistance! Dayum, Y U MAD?' / 'Say, fits satisfy?' She gives a plain man's mansplain of her main plans and gets to clamp into a compliant calm point about your complaint. Manic plot? Progress! She also points out that it's probably for the best. You were feeling useless, weren't you? And if you just attack her and get it over with, you can die feeling heroic. She's sure you worked hard to get here. And, sure as Nilbog is goblin spelled backwards, she knows how to troll, too."
hollow-quip	"An ol['] howl. 'Me? Rocky mockery! Petulant late punt! [if player is male]Ach, Mr. Charm[else]Ms. Arch-Charms[end if]!' She laughs with mindless mildness. 'Uber-Rube! Delicate, elite cad! Deny it's destiny? Evasion! So naive!' You cork a croak."
abhor-quip	"'Recoil, O Relic!' / 'Nuh-unh, hun! Solicit colitis!' Wow. Oww."
strong-quip	"'So pure? Poseur! Soppy psy-op!' Dang, your spoonerism got double-trumped, there."
sneer-quip	"'Obliged old gibe. Bilge O.D.!' Coughs co-gush, chug so. 'Be a god? Bad ego!' you try back, but she's a serener sneerer. 'How silly! Why so ill?'"
bald-quip	"'Ow, sloth. Low shot.' She laughs. You probably shouldn't be worrying about looks, now."
sinister-quip	"'Sinister resistin[']. Loutier Outlier!' she calls back. There's a brief scuffle over whose insult was less creative, but you kind of shuffled a lower percentage of letters, there. So she wins.[paragraph break]But don't worry. You're still the good guy. You just lost a style point."
final-quip	"'No mercy, my crone! Corny, me?' She flinches at your pure re-up, responding 'Oh, cute. Touché.' A truce, acuter. 'Careful now, awful crone.' 'Woeful narc!' Eugh. No. Enough." [end ELVIRA text]

table of Elvira comments [tco-el]
prompt	response	enabled
"Smartly done, monster lady. Fool us? So foul of soul! (Lay things out logically, hopefully without getting overemotional or boring)"	logical-quip	1
"WTF FTW"	wtf-quip	1
"LOL, how hollow!"	hollow-quip	1
"Play God? Dopy gal!"	sneer-quip	1
"Abhorsive behaviors! Nastiest titaness!"	abhor-quip	1
"Strong will? Still wrong. At bay, ya bat."	strong-quip	1
"Go bald, old bag!"	bald-quip	0
"Sinister Insister. Hypno-phony. Reposed? Deposer."	sinister-quip	0
"Plot is spoilt! Scourge-curse, go! (yeah, yeah, get on with it)"	final-quip	1

chapter hydra

The hardy hydra is scenery in Rancho Archon Anchor. description is "One whiff of the decayin['] cyanide smell proves he melts helmets.". the hardy hydra is scenery.

volume others

citrus-score is a number that varies. non-citrus-score is a number that varies.

a start-pre-fruit is a kind of thing. a start-pre-fruit has text called locale-text.

a generic-rut-pre is a kind of thing.

check taking a start-pre-fruit: say "Maybe [the noun] would be more useful and easier to carry in some other form." instead;

book Rustic Citrus

Rustic Citrus is a room in Others. last-loc of Others is Rustic Citrus. roomnud of Rustic Citrus is table of Rustic Citrus nudges.

outside-text of Rustic Citrus is "But you're not even sure which way is out!"

exits-text of Rustic Citrus is "You've lost your bearings a bit, but maybe [if player has moss cap]the moss cap could help in another form[else]if you got enough fruits, Curtis would help you[end if].".

after choosing notable locale objects when player is in Rustic Citrus:
	set the locale priority of Curtis to 2;
	repeat with spf running through all touchable start-pre-fruits:
		set the locale priority of spf to 1;
	repeat with grp running through all touchable generic-rut-pres:
		set the locale priority of grp to 3;

fruits-flipped is a number that varies.

got-forced-others-min is a truth state that varies.

this is the force-others-guru-point rule:
	if guru-bonus-forced:
		say "[line break]Congratulations on finding all the fruits! Since you did so without using the arugula to [b]GURU[r], you will get [if concisions are reflexed]the final bonus point[else if s-i are moot]the available bonus point[else]one bonus point, but there's one more[end if].";
		now got-forced-others-min is true;
		min-up;

after fliptoing a fruit (this is the check minimum fruits and score rule) :
	if player is in Rustic Citrus:
		coin-eval;
	check-fruit-min;
	process the force-others-guru-point rule;
	continue the action;

to check-fruit-min:
	increment fruits-flipped;
	d "[fruits-flipped] fruits flipped so far, [cur-score of others] total score, delta = [cur-score of others - fruits-flipped].";
	if fruits-flipped > 20:
		min-up;

description of Rustic Citrus is "Greenish sheering surrounds you on all sides. It'd be easy to get lost in, [if player has compass]but your compass will help you keep on track to the north[else]as you'd get turned around quickly[end if][if ruts circuits are in rustic citrus].[paragraph break]Ruts circuits lying around may have random stuff strewn in them, so they may be worth EXAMINEing[else if sated stead is in rustic citrus].[paragraph break]You can still see the sated stead where the rust circuits were[end if][if eerie blurbs are in rustic citrus].[paragraph break]Eerie blurbs are scrawled where the ruts circuits were[end if]."

for printing the name of a start-pre-fruit (called spf) while printing the locale description: say "[locale-text of spf]"

for printing a locale paragraph about a start-pre-fruit (called th) in Rustic Citrus:
	if th is not mentioned:
		let X be number of touchable start-pre-fruits;
		if X is 0:
			if debug-state is true, say "OH NO! I should have a list here, but I don't. [th].";
			now all start-pre-fruits are mentioned;
			continue the action;
		say "It looks like [list of touchable start-pre-fruits] [if X is 1]is all that's left[else if X < 3]are still not too bad[else]would not be too hard[end if] to deal with.";
		now all start-pre-fruits are mentioned;

to decide which number is touch-val of (x - a thing):
	if x is touchable, decide on 1;
	decide on 0;

greenish sheering is boring scenery in Rustic Citrus. description of greenish sheering is "Well, it's wooded pretty much all around, here. [if compass is off-stage]Maybe you can get something that will help you find a way out[else][end if].". bore-text is "The greenish sheering has no straight paths. All those twists and turns are easy to get lost in. They probably help keep Curtis secluded for his experiments and such."

for printing a locale paragraph about a generic-rut-pre (called pr) in Rustic Citrus:
	if pr is not mentioned:
		say "The circuits ruts also turned up [a list of touchable generic-rut-pres].";
		now all generic-rut-pres are mentioned;

for printing the name of id mantra mad train when printing the locale description:
	say "an id-mantra mad train (chuffing around, almost forming self-promoting words)";
	the rule succeeds;

chapter augural arugula

some augural arugula is a singular-named edible thing. description of arugula is "It's not enough for a luau. Arg.". indefinite article of arugula is "some".

check eating arugula:
	say "Not very tasty, but your vision seems clearer. 'La! A guru!' you think to yourself. You can now [b]GURU[r] what you are curious about.";
	moot arugula;
	now can-guru is true;
	the rule succeeds;

after printing the name of arugula when taking inventory:
	say " (to eat, then [b]GURU[r] something to acquire, or change something to, a fruit)";
	continue the action;

can-guru is a truth state that varies.

section guruing

gxing is an action applying to one thing. [ this is a debug command, but it is mapped to procedural commands in release code. So I can't change that. ]

in-gx is a truth state that varies. [similarly this truth state that determines whether to deduct a point for guruing is in "carry out guruing" and I don't see how to move it, so I have to put it in release even though it is just for beta testers. ]

guruing is an action applying to one thing.

understand the command "guru" as something new.

understand "guru [something]" as guruing when mrlp is others.

did-guru is a truth state that varies.

this is the person-to-fruit rule:
	if noun is not a person, continue the action;
	if noun is len craig, say "Nothing, despite all Len Craig [if number of entries in clearing-hintables > 0]has[else]had[end if] to sell." instead;
	if noun is Curtis, say "If Curtis had any materials, he wouldn't hide them from you." instead;
	if noun is flippable or noun is vanishing, continue the action;
	if noun is not ammo gang, say "A person shouldn't and can't be changed into a fruit[unless ammo gang is moot or dr severe is moot], though perhaps you could help someone, or trade someone else, for one." instead;

definition: a thing (called th) is to-fruit:
	if th is a fruit, no;
	if th is dr severe, no;
	if th is prices precis, no;
	if th is moss cap, no;
	if th is icon or th is coin or th is s-c or th is icons or th is coins, no;

carry out guruing:
	if can-guru is false:
		if arugula is moot, say "You lost your guru powers." instead;
		say "You'll need to eat the arugula, first." instead;
	if noun is megaton pear or noun is mopeage rant or noun is rampage note:
		say "You blink and wind up refocusing on the magenta rope.[paragraph break]";
		try guruing magenta rope instead;
	if noun is briar screen, try guruing barren cries instead;
	if noun is the player, say "You don't want to change. Well, not in that way." instead;
	abide by the person-to-fruit rule;
	if noun is thruhinted, say "No, you already know [an-sol of the noun] changes [the noun]." instead;
	if noun is viewer or noun is searcher or noun is fleeing feeling, say "No. You don't want to use the arugula on [the noun]. It's got to be pretty simple." instead;
	repeat through table of others anagrams:
		if noun is the-from entry:
			if noun is reflexed:
				say "You've already changed [the noun].";
				the rule succeeds;
			else if noun is moss cap:
				say "Whoah! You suddenly see a [b]COMPASS[r] spinning around. ";
			else if noun is coins:
				say "You focus, hoping for one word, and ... you get a two-fer! [b]SONIC ICONS[r]! ";
			else if noun is s-c:
				say "You realize the sonic coins could become [b]ICONS[r], or [b]SONIC ICONS[r]. ";
			else if noun is icons:
				say "You realize the icons could be made [b]SONIC[r], or [b]SONIC ICONS[r]. ";
			else if noun is coin:
				say "You see the coin could become an [b]ICON[r]. ";
			else if noun is peach:
				say "You feel a need to call the peach [b]CHEAP[r]. ";
			else if noun is ammo gang:
				say "You feel a need to be [b]AMONG[r]. ";
			else if noun is quince:
				say "You feel a need to order [b]CINQUE[r]. ";
			else if noun is nectarine:
				say "You feel a need to make the nectarine [b]ANCIENTER[r]. ";
			else if noun is Dr Severe:
				say "One look at Dr. Severe, and you realize Dr. Severe can just be [b]REVERSED[r]. ";
			else if noun is prices precis:
				say "You feel a need to lash out and say [b]CRIPES[r]. ";
			else if noun is melon:
				say "You feel a need to haggle with [b]MO LEN[r]. ";
			else if noun is orange:
				say "You see how to get the orange: first, [b]GO NEAR[r]. ";
			else if noun is lemons:
				say "You feel an urge to look [b]SOLEMN[r]. ";
			else if noun is a fruit or noun is Dr Severe:
				say "You focus and squint, and letters appears in your sight: [right-word entry in upper case]. ";
			else:
				say "You have a vision of fruit: [right-word entry in upper case]. ";
			now can-guru is false;
			now noun is prefigured;
			say "The aftertaste of arugula finally dissipates.";
			if scams is false and in-gx is false:
				now did-guru is true;
				poss-d;
			pad-del "guru";
			pad-rec "flips";
			the rule succeeds;
	if noun is s-i, say "The icons seem appropriate as-is." instead;
	say "Nothing happens. Maybe try to see through something else.";
	the rule succeeds.

chapter curtis and dealing with him

Curtis is a person in Rustic Citrus. description is "I curst him to be nondescript.". "Curtis is pottering around, [curtis-potter]."

check asking Curtis about when got-all-fruits:
	say "'You've done all you can for me. Now go do for you.'" instead;

to say curtis-potter:
	if number of fruit-to-find fruits is 0:
		say "wondering how best to use all the fruits you got him";
	else:
		say "waiting for you to hand over [if cur-score of others is 0]some[else]more[end if] fruits";
	if cur-score of others > 4, say " and singing and humming the tidiest dietist ditties"

extra-citrus is a number that varies.

curtis-other-coin is a truth state that varies.

negged-yet is a truth state that varies.

after printing the locale description for Rustic Citrus:
	coin-eval;

check giving fruit to curtis:
	if moss cap is off-stage, say "'No, no. A bit more, then I'll give you a reward." instead;
	say "Oops. BUG. Curtis should've taken the [noun]." instead;

check going inside in Rustic Citrus: say "You can't go backward. There is enough to do here, including figuring where to go next." instead;

chapter pears

A spear is a start-pre-fruit in Rustic Citrus. description of spear is "It'd make a powerful weapon, but you couldn't hold anything else. Plus, this isn't that sort of game.". locale-text is "a spear stuck in the ground".

to say cutoff: stop game abruptly;

a-text of spear is "RYYRR". b-text of spear is "RYYRR". parse-text of spear is "x[sp]E[sp]A[sp]x[sp]x". spear is parse-spoilable.

check taking spear: say "This is a thinking puzzling game, not a violence game. Though I hope the puzzles have not given you violent thoughts." instead;

the pears are a plural-named fruit.

chapter plums

the lumps are a plural-named start-pre-fruit in Rustic Citrus. description of lumps is "They're more purplish than dirt usually is.". locale-text is "some lumps randomly dotting the landscape".

a-text of lumps is "RRYRR". b-text of lumps is "RRYRP". parse-text of lumps is "x[sp]x[sp]U[sp]x[sp]S". lumps are parse-spoilable.

the plums are a plural-named fruit.

chapter slime

some slime is a singular-named start-pre-fruit in Rustic Citrus. description is "It's green, like most slime. But it smells nicer than most slime and is even a bit bumpy.". locale-text is "some slime schlurped around".

a-text of slime is "RYRYR". b-text of slime is "RYRYR".parse-text of slime is "x[sp]-[sp]x[sp]-[sp]x".

check taking slime: say "Eww. Not in that form you won't." instead;

some limes are a plural-named fruit.

chapter grapes

some pagers are a plural-named start-pre-fruit in Rustic Citrus. description of pagers is "They come in green and reddish-purple and black. Like all pagers, they seem a bit seedy.". bore-text is "Remember when these things were the most annoying electronic devices? Then came cell phones and iPods. You don't need one.". locale-text is "pagers beeping all around".

a-text of pagers is "RRYRYR". b-text of pagers is "RRYRYP". parse-text of pagers is "x[sp]x[sp]-[sp]x[sp]-[sp]S".

check taking pagers: say "As much as you'd like to bash them, there's another way to shut them up." instead;

grapes are a plural-named fruit.

chapter coin-give

a tekno token is an improper-named thing. description of tekno token is "Functionally, it's a credit card. Or a debit card.[paragraph break]It bears the stamp of OKNet, Yorpwald's most trusted purveyors of electronic currency transactions. You have no clue how much is left on it, but though it looks like a bluer ruble, it's decent enough to barter with.". printed name of tekno token is "Tekno-Token".

to decide which number is curtis-level:
	let moot-fruit be number of moot fruits;
	if moot-fruit < 8, decide on 0;
	if moot-fruit < 12, decide on 1;
	if moot-fruit < 16, decide on 2;
	if moot-fruit < 20, decide on 3;
	decide on 4.

curtis-award-level is a number that varies.

to decide which number is room-fruits-left of (rm - a room):
	let temp be 0;
	repeat with myf running through fruits:
		if frroom of myf is rm, increment temp;
	decide on temp;

to coin-eval:
	if number of touchable fruits is 0, continue the action;
	let temp be curtis-level;
	if temp is 4:
		say "Curtis says 'Boy, you have a lot of goodies now. Wouldn't want to lose them carrying all those fruits.' He helps keep your inventory lean and mean.";
		mootl list of all carried fruits;
	if number of carried fruits > 0 and temp < 4:
		if number of carried fruits > 4:
			say "Curtis goes to take your bounty but backs off on seeing how much there is. 'I, old as...' He snaps his fingers. 'A solid load is laid, so! Lo, aids! Oi, lads!' he booms, and a couple assistants carry away your haul[one of]. 'Do sail!' he exhorts you[or][stopping].";
		else:
			say "Curtis ships your find[if number of carried fruits > 1]s[end if] off to some hidden storage area where you're not allowed[one of]. He thanks you but is curt[or][stopping].";
		repeat with fru running through carried fruits:
			moot fru;
	if curtis-level > temp:
		repeat through table of curtis rewards:
			if levb4 entry is temp and levaf entry is curtis-level:
				now curtis-award-level is levaf entry;
				say "[line break][blabber entry][line break]";
				if get-token entry is 1:
					now player has tekno token;
					set the pronoun it to tekno token;
					say "[line break]A Tekno-Token. It's long since been Yorpwald's equivalent of a credit or debit card. It'll be handier than more classical currency.";
				if get-coin entry is 1:
					now player has coin;
					set the pronoun it to coin;
				if get-coins entry is 1:
					if player has icon:
						moot icon;
						now player has icons;
						now singed design is part of the icons;
						say "[line break]You fiddle with the coin you got, and now it's an icon, too. So now you have icons!";
						set the pronoun them to icons;
					else if player has coin:
						moot coin;
						now player has coins;
						now singed design is part of the coins;
						set the pronoun them to coins;
					else:
						now player has coins;
						now singed design is part of the coins;
						set the pronoun them to coins;
				if get-dollar entry is 1:
					now player has droll dollar;
					set the pronoun it to droll dollar;
				break;
		if player has tekno token and room-fruits-left of Clangier Clearing is 0:
			say "[line break]You also hand Curtis back the Tekno-Token, since you got everything from the Clangier Clearing.";
			moot tekno token;

chapter dollar

a droll dollar is a thing. description is "It has a picture of some gangster--wait, it's [coin-person]--lighting a cigar with a dollar remarkably similar to it--on which is a gangster lighting a cigar, and so forth[one of]. LOL, rad, you think, though the joke wears off[or][stopping]."

coin-person is a thing that varies.

Lord Al Ollard is a proper-named boring thing. description of Lord Al is "[coin-per-d]". bore-text of Lord Al Ollard is "[do-coin]."

Dr Lola Ollard is a proper-named boring thing. description of Dr Lola is "[coin-per-d]". printed name of Dr Lola Ollard is "Dr. Lola Ollard". bore-text of Dr Lola Ollard is "[do-coin]."

to say do-coin: say "Doing anything with or too such a horrid counterfeit coin wouldn't be very satisfying or productive. Probably best to get this off your hands for any profit at all"

to say coin-per-d: say "[he-she-c] looks stereotypically bloated, hypocritical and plutocratic, though some people find that sort of thing valuable."

after doing something with coin-person:
	if coin-person is Lord Al:
		set the pronoun him to Lord Al;
	else:
		set the pronoun her to Dr Lola;
	continue the action;

understand "dollar bill" and "bill" as droll dollar.

to say if-clear: say "[if Clangier Clearing is visited]--ah, you're nodding, you've seen it--[else] [end if]"

table of curtis rewards
levb4	levaf	get-token	get-coin	get-coins	get-dollar	blabber
0	1	1	0	0	0	"'Ok. Neat. Take on a token. There's a clearing some ways away[if-clear]where you can swipe it to trade for things. Haggle. That sort of thing.' Curtis hands you a Tekno-Token."
0	2	1	1	0	0	"'Wow! You got a lot done on that errand. Here's a Tekno-Token AND a coin. If you go to the clearing east of the wells, the token'll last you a bit. More deals. Coin'll be useful for...something.'"
0	3	1	0	1	0	"'Surprised you can lug all that back! Here's a Tekno-Token to use in the clearing east of the wells, along with some coins. Maybe you'll find what to do with them. Keep it up!'"
0	4	1	0	1	1	"'Wow! Impressive! I'm half curious if you cheated somehow! Here's a Tekno-Token for the clearing up north and east--not that you may need it--and a couple coins, and, err, a droll dollar, I think. Don't know if I can give you anything else.'"
1	2	0	1	0	0	"'Glad you didn't say scru-it. We're getting somewhere[if player has moss cap]. Maybe if you physically get somewhere, we can get further[end if].' Curtis hands you a coin for your efforts."
1	3	0	0	1	0	"'Wow. So much done at once.' Curtis hands you two coins for your efforts."
1	4	0	0	1	1	"'Spurtin['] turnips! All that at once? I--well, here's the rest of my junk I don't know what to do with.' Curtis, looking very pleased, hands you two coins and a droll dollar."
2	3	0	0	1	0	"Curtis, looking quite the citric critic, hands you another coin identical to the one he gave you before."
2	4	0	0	1	1	"Curtis hands you another coin and a suspicious bit of paper: a droll dollar. He nods as if to say, that's all you'll get from him."
3	4	0	0	0	1	"'Nice going. Here. Have this paper currency I never could quite spend. It looks kind of illegal. It's all I have for you.' It is a droll dollar."

chapter moss cap

the moss cap is a thing.

description of moss cap is "The moss bits of the cap go on the outside, leaving the dirty bits to fit over your head. So you'd feel AND look weird wearing it."

check wearing moss cap: say "The moss cap is a silly idea in general. It's extra silly if you wear it." instead; [?? test]

chapter compass

the compass is a thing.

description of compass is "It is property of Camp SOS. Its needle is pointing steadily north, so at least it wasn't a SpasmCo product."

check examining compass when mrlp is routes: say "The compass is flipping about uselessly. Guess you can't rely on normal directions here." instead;

the needle is a useless boring thing. it is part of the compass. description of the needle is "It seems to keep pointing north as you turn around. Good enough.". bore-text of the needle is "The needle's inside the compass, and you don't need or want to mess with it."

a-text of moss cap is "RYRRYRR". b-text of moss cap is "RGRRYRR". parse-text of moss cap is "x[sp]O[sp]x[sp]x[sp]A[sp]x[sp]x".

check going north in Rustic Citrus:
	if moss cap is off-stage, try going south instead;
	if player has moss cap, say "The moss cap isn't helping your sense of direction as much as it should. Well, not in its present form." instead;
	now others is unspoiled;

chapter ruts circuits

the ruts circuits are boring plural-named scenery in Rustic Citrus. "A lot has fallen into the ruts. Not hi-tech enough to be hooked up to a wiki with gifs, which would make things easier for you. (Technology often does.) But you do find a can of nasty peanut cola there. It's too gross in concept to take. And there's a rampage note with a mopeage rant[if pears are moot], and plans for a megaton pear,[end if] under some magenta rope.[paragraph break]Some piece of writing called [hire recs], a weird omen prism, an id-mantra mad train, some eerie blurbs etched into hard ground, and two harmonicas rusted together also turn up.". bore-text of ruts circuits is "They're not worthwhile by themselves, but they are worth examining to find things [if number of touchable start-pre-fruits is 0]though you haven't[else]now you have[end if] picked off all the, uh, low-hanging fruit here that you can.".

after examining ruts circuits (this is the reveal ruts circuits rule) :
	move sated stead to Rustic Citrus;
	move peanut cola to Rustic Citrus;
	if pears are not off-stage, move megaton pear to Rustic Citrus;
	move magenta rope to Rustic Citrus;
	move rampage note to Rustic Citrus;
	move mopeage rant to Rustic Citrus;
	move omen prism to Rustic Citrus;
	move harmonicas to Rustic Citrus;
	move mad train to Rustic Citrus;
	move eerie blurbs to Rustic Citrus;
	move Hire Recs Re Riches to Rustic Citrus;
	moot ruts circuits;
	say "Also, now you've found everything they contain, the ruts circuits have become a sated stead.";
	continue the action;

chapter sated stead

a sated stead is boring vanishing scenery. description is "It seems like it's done all it can ... or has it?". bore-text of sated stead is "Well, there's not much to do with the [stead]. Not much normal, anyway."

a-text of sated stead is "RYRYR". b-text of sated stead is "R???R". parse-text of sated stead is "x[sp]?[sp]?[sp]?[sp]x". sated stead is parse-spoilable.

the dates are a plural-named fruit. description is "They're dates. They're edible.". frroom of dates is Rustic Citrus.

chapter Hire Recs Re Riches

Hire Recs Re Riches is a thing. "Some writing called [hire recs], more than a pamphlet but not quite a book, lies here waiting to be consumed and processed.". description is "It's a book, probably about entrepeneurism, autographed by the author, whose name you can read in red. It was published by Schreier-Reichers, which is not in red.[paragraph break]Perhaps Curtis used it to summon you, in some weird way.". printed name is "[i]Hire Recs Re: Riches[r]".

a-text of hire recs re riches is "RRYRRYYR". b-text of hire recs re riches is "RRYR?Y?P". parse-text of hire recs re riches is "c[sp]x[sp]e[sp]x[sp]r[sp]i[sp]e[sp]s".

the cherries are a fruit.

chapter maraschino

the harmonicas are a plural-named thing. description is "They're an off-red, unlike your usual visions in the game. Their condition is the pits. They look like a...how do you spell it? Anachorism?". "Two harmonicas lie here, rusted together."

check taking harmonicas: say "They're too rusty." instead;

a-text of harmonicas is "RYRYRRRYRY". b-text of harmonicas is "RGPYRRRYRY". parse-text of harmonicas is "x[sp]A[sp]R[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x[sp]-".

the maraschino cherry is a fruit.

chapter tamarind

An id mantra mad train is a generic-rut-pre. description is "It just chugs along in circles, exuding selfishness and such. It thinks it's too good to be a fruit. You could read the name of its creator if you want.". printed name is "id-mantra mad train".

a-text of id mantra mad train is "RYRYRYRR". b-text of id mantra mad train is "R????YRR". parse-text of id mantra mad train is "x[sp]A[sp]x[sp]A[sp]x[sp]I[sp]x[sp]x".

check taking mad train: say "You'd strain to find a use for trains here." instead;

a tamarind is a fruit. description is "It looks more like a potato than any fruit you know. But it still counted."

chapter blueberries

the eerie blurbs are scenery. description is "A weird blue-purple. None of them make sense, but you can read them."

a-text of eerie blurbs is "RRYYRYRRYYR". b-text of eerie blurbs is "RRYYRYRRYYP". parse-text of eerie blurbs is "x[sp]x[sp]-[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]S".

check scaning blurbs when cheat-on is true: say "You just generally scan the blurbs, not noting them, and it turns up one positive..."

the blueberries are a plural-named fruit. description is "Yes, blueberries are really more purple, I know."

chapter cantaloupe

the cantaloupe is a fruit.

the can of peanut cola is a boring thing. "A can of peanut cola turned up from the ruts circuits. Surely it can become something a bit tastier.". description is "There's an actual peon on one side, a neat cupola on the other. It's orange-pink and tan. You've seen bottles like this before, with an actual peon or neat cupola on the label, but all this has is red writing with the brand name.". bore-text is "The peanut cola isn't good for much. It can become something more palatable, but what?". bore-check of peanut cola is the bore-peanut-cola rule.

a-text of peanut cola is "RYRRYRYYRY". b-text of peanut cola is "RYRRYRYYRY". parse-text of peanut cola is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]-[sp]x[sp]-".

this is the bore-peanut-cola rule:
	if current action is taking or current action is drinking or current action is eating, say "Blech. You're not really thirsty. It can become something more natural." instead;

chapter persimmon

the persimmon is a fruit.

the omen prism is a boring generic-rut-pre. description of omen prism is "The omen prism is red. It looks like you could probably [b]READ[r] it to find text, which may give nonsensical esoteric clues, if you need them.". bore-text is "You can really only [b]EXAMINE[r] or [b]READ[r] the omen prism."

a-text of omen prism is "RYRRYRRYR". b-text of omen prism is "RYRRYRRYR". parse-text of omen prism is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x".

chapter pomegranate

the pomegranate is a fruit.

to say pre-pom-blah: say "A glance seems to indicate some unfortunate writing--either Curtis actually still believes that stuff, or he's embarrassed ever to have written it. Either way, he doesn't need to be alerted to you knowing about it. Best to get rid of it"

section magenta rope

the magenta rope is a vanishing boring thing. initial appearance of the magenta rope is "A magenta rope is left by where the ruts circuits were, partially obscuring a rampage note and mopeage rant[if megaton pear is touchable] and megaton pear[end if].". description of magenta rope is "Oddly colored. It's got a yellowish tinge.". bore-check of magenta rope is bore-magenta-rope rule.

this is the bore-magenta-rope rule:
	if current action is taking, say "It would uncover Curtis's silly writings--the note and the rant. You'd be best off getting rid of all three, somehow.";

a-text of magenta rope is "RYRYRRYRYRY". b-text of magenta rope is "RYRGRRGRYRG". parse-text of magenta rope is "x[sp]O[sp]x[sp]E[sp]x[sp]x[sp]A[sp]x[sp]A[sp]x[sp]E".

section megaton pear plans

the megaton pear plans are plural-named auxiliary boring scenery. description of megaton pear is "It's--well, maybe not a megaton, but it sure is heavy. And certainly inedible. Maybe it can be changed to a real fruit.". bore-text is "The megaton pear plans are useless as-is. Change it, maybe?"

a-text of megaton pear is "RYRYRRYRYRY". b-text of megaton pear is "RYRYRRYRYRY". parse-text of megaton pear is "x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-".

section rampage note

the rampage note is auxiliary boring scenery. description of rampage note is "[pre-pom-blah].". bore-text of rampage note is "The rampage note is useless as-is. Change it, maybe?"

a-text of rampage note is "RYRYRRYRYRY". b-text of rampage note is "RYPYRRYPYPG". parse-text of rampage note is "x[sp]-[sp]M[sp]-[sp]x[sp]x[sp]-[sp]N[sp]-[sp]T[sp]E".

does the player mean doing something with rampage note when rampage note is touchable: it is very likely.

section mopeage rant

the mopeage rant is auxiliary boring scenery. description of mopeage rant is "[pre-pom-blah].". bore-text of mopeage rant is "It's useless to you in its current form. Try examining it."

a-text of mopeage rant is "RYRYRRYRYRY". b-text of mopeage rant is "RGRGRRYRGRY". parse-text of mopeage rant is "x[sp]O[sp]x[sp]E[sp]x[sp]x[sp]A[sp]x[sp]A[sp]x[sp]E".

book Swell Wells

Swell Wells is north of Rustic Citrus. "Wells, err, swell from this [one of]lowland[or]old lawn[cycling]. You can go east to a loud clearing[one of][or], or down the un-mod mound[if mound-writing > 0], which also has writing on it[end if][stopping], or west to a Filed Field[if sorer bogey is in Swell Wells]. You think you hear something from the wells[end if][if green stain is touchable]. There's also a green stain among the wells[end if][if stucco is in Swell Wells]. You also see some red writing on stucco[end if].". Swell Wells is in Others. roomnud of Swell Wells is table of Swell Wells nudges.

after printing the locale description for Swell Wells:
	if miser ruble is off-stage:
		say "One thing is not like the others. An un-mod mound looks suspicious--and when you look at it more carefully, it reveals not only a way down but also some red writing!";
		say "[line break]And what's this? The wells cough up an unexpected wish-coin. It looks like...why, yes it is! A miser ruble!";
		now miser ruble is in Swell Wells;
	continue the action;

the un mod mound is scenery in Swell Wells. "It's a way [if Scape Space is visited]back down to the scape space[else]down somewhere new[end if][what-on-mound]."

to decide what number is mound-writing:
	decide on touch-val of stucco + touch-val of sorer bogey + touch-val of PSA Elp;

to say what-on-mound:
	if mound-writing is 0:
		say ". Many weird and uninteresting things are written on the mound. None are helpful any more. You got enough from it";
		continue the action;
		say ". [if mound-writing > 1]Things are[else]Something is[end if] writen in red on the un-mod mound";
	if sorer bogey is in swell wells, say ".[paragraph break]'Ye borers, go!' is written in red. The sorer bogey from the wells seems a bit louder as you read this"; [?? sorer bogey not known yet]
	if stucco is in swell wells, say ".[paragraph break]There's [if sorer bogey is in swell wells]also [end if]red writing on stucco";
	if PSA Elp is in swell wells, say ".[paragraph break]There's [if mound-writing > 1]also [end if]some PSA [']Elp (in red) you could read in more detail";

check inserting into un mod mound:
	if noun is coin or noun is coins, say "Maybe make your own luck by doing something with/to the coin[if noun is coin]s." instead;
	say "They're dry wells. You can see all the way down. If you want, you can go that way." instead;

check going to Swell Wells for the first time: say "'Ramble, ambler!' Curtis calls.";

chapter coconuts

the stucco is boring scenery in Swell Wells. "You see red that an ad would be on stucco, for whatever reason, but you can probably [b]READ[r] the two things advertised on stucco.". bore-text of stucco is "You can really only [b]READ[r] what's, er, on stucco."

a-text of stucco is "RYRYRYRR". b-text of stucco is "RYRYRYRR". parse-text of stucco is "x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x[sp]x".

the coconuts are a plural-named fruit.

chapter tangerines

the green stain is scenery in Swell Wells. "It makes you see red even before looking closely at you, and when you do, it seems to be sneering at you. As if to resent gain."

a-text of green stain is "RYRRYRYRYR". b-text of green stain is "RYRRYRYRYR". parse-text of green stain is "x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]-[sp]x".

the tangerines are plural-named fruit. "You can't tell where they're from. If you look at one, you'd guess Argentine. Or all of them, Energistan."

chapter mulberries

the miser ruble is a thing. "The miser ruble the Swell Wells coughed up lies here.". description of miser ruble is "It's an odd purplish-blue, even more oddly engraved with [first custom style]BEMIRE! SLUR![r] in red." [bold-ok]

the mulberries are a plural-named fruit.

a-text of miser ruble is "RYRRYRRYYR". b-text of miser ruble is "PYRRYPRYYR". parse-text of miser ruble is "M[sp]-[sp]x[sp]x[sp]-[sp]R[sp]x[sp]-[sp]-[sp]x".

chapter gooseberry

the sorer bogey is vanishing scenery in Swell Wells. "You can't see the sorer bogey, but knowing it's there makes your skin break out in pimples...no, bumps."

check taking sorer bogey: say "Don't be a silly goose." instead;

a-text of sorer bogey is "RYYRYRYRRO". b-text of sorer bogey is "RGYRYPYRRB". parse-text of sorer bogey is "x[sp]O[sp]-[sp]x[sp]-[sp]B[sp]E[sp]x[sp]x[sp]Y".

the gooseberry is a fruit.

the lost slot is a thing. description of lost slot is "It's soft to the touch, as if it could change its shape for the right item."

chapter apricot

the riot cap is a boring thing in Swell Wells. description of riot cap is "It's orangish-reddish, an odd pastel. It looks even dumber than the moss cap from Curtis. Red writing is stamped on each side of the riot cap. You can read it.". "A riot cap hangs from one of the wells.". bore-text of riot cap is "The riot cap is pretty sturdy, and less useful for you than the moss cap, unless or until you can change it into a fruit."

a-text of riot cap is "YRRYRYR". b-text of riot cap is "YRRYPYR". parse-text of riot cap is "-[sp]x[sp]x[sp]-[sp]C[sp]-[sp]x".

the apricot is a fruit. "It's a regular apricot. Nothing special."

chapter PSA Elp / apples

the PSA Elp is boring scenery in Swell Wells. printed name of PSA Elp is "PSA [']Elp". description of PSA Elp is "PSA [']Elp is written in red. You can read it for more details.". bore-text of PSA Elp is "The PSA [']Elp seems like it could be changed into something else.".

a-text of PSA Elp is "YRRRYR". b-text of PSA Elp is "YRRRYR". parse-text of PSA Elp is "-[sp]x[sp]x[sp]x[sp]-[sp]x".

the apples are plural-named fruit. description is "Green, red, yellowish: all kinds, really!"

book Gates Stage

Gates Stage is north of Swell Wells. "Gropin['] roping prevents you from going west or east. The Swell Wells are back south, and important-looking gates, [if halt lath is in Gates Stage]barred by a halt lath[else]open now[end if], lead to the north. They don't look strictly locked, but you probably need some sort of ID--or confidence--to get by them. [one of]What could be behind them? A near arena? You take a step back. Yes...it looks like you have found a secret rear entrance to the Valence Enclave, where great political debates and pronouncements are always held![or]The Valence Enclave lies ahead.[stopping]". Gates Stage is in Others. roomnud of Gates Stage is table of Gates Stage nudges.

check going south in gates stage when gates-score is 2 and min-score of others is poss-score of others: say "You've done everything you possibly can. Time to see what's to the north!" instead;

after looking in Gates Stage (this is the retract halt lath rule):
	if halt lath is in Gates Stage and player has popstar passport:
		say "Your popstar's passport beeps quickly. The halt lath rises and retracts into the gates to the north. The gates are probably still shut for the moment, but it's a start.";
		moot halt lath;
	continue the action;

check going inside in Gates Stage: try going north instead;

chapter boring scenery

section Valence Enclave

the Valence Enclave is boring scenery in Gates Stage. description of Valence Enclave is "Almost as big as Yorpwald's famous, enormous Admit-Us Stadium, it's reserved for very special events indeed! Whatever could be inside?". bore-text of Valence Enclave is "You can't do much but look at the Valence Enclave. Or try to enter it.". bore-check is the bore-valence-enclave rule.

this is the bore-valence-enclave rule:
	if current action is entering, try going north instead;

understand "near arena" and "near/arena" as valence enclave.

section gropin' roping

the gropin roping is bounding boring scenery in Gates Stage. description of gropin roping is "The gropin['] roping guards you from going west or east.". bore-text is "You don't want to tangle with the gropin['] roping, because it will probably tangle with you, back.". printed name is "gropin['] roping".

chapter Sagest Gate

check entering Sagest Gate: try going north instead;

does the player mean entering Sagest Gate: it is likely;

the Sagest Gate is scenery in Gates Stage. "The Sagest Gate is [if halt lath is in Gates Stage]open for easy entry north[else]closed by a halt lath[end if]."

check taking Sagest Gate: say "No way you could move the Sagest Gate." instead;

understand "gates" as Sagest Gate when player is in Gates Stage.

check closing Sagest Gate: say "It's not some late game lame gate. It won't open or close at your whim." instead;

check opening Sagest Gate: say "[if player has passport]You need some sort of passport to get through.[else]You wave the passport and the Sagest Gate starts to creak open. Perhaps you can try to walk through.[end if]" instead;

check giving something to Sagest Gate: say "The gates seem to have a sensor that can detect if you have ID[if player has passport]. You know, that passport should be enough[end if]." instead;

section halt lath

the halt lath is a boring thing. it is part of the Sagest Gate. description of halt lath is "The halt lath looks sturdy and won't budge physically.". bore-text is "You probably need to do something non-physical to open the halt lath."

chapter check for PERP

perp-check is a truth state that varies.

to say two-of-three: say "[if searcher is not reflexed]prep and review[else if viewer is not reflexed]research and prep[else]review and research[end if]"

the fleeing feeling is a reflexive boring thing. description of fleeing feeling is "It's not a particularly rational thought, but it's buried in you that you're a perp.". bore-text is "There must be something you can do to shake the fleeing feeling whispering '[b]PERP[r]' in your head.". bore-check is bore-perp rule.

this is the bore-perp rule:
	if current action is not objhinting and current action is not fliptoing and current action is not guruing and current action is not gxing, say "You just can't shake the fleeing feeling whispering '[b]PERP[r]!' Maybe there's a simple way to shift things around." instead;

a-text of fleeing feeling is "RRYR". b-text of fleeing feeling is "PRYP". parse-text of fleeing feeling is "UNIQUE". fleeing feeling is any-spoilable.

every turn when player has fleeing feeling: say "You [one of][or]still [stopping]can't shake that fleeing feeling you should just run, because you're [if gates-score is 1]kind of [end if]a [b]PERP[r].";

chapter big endgame check

check going north in Gates Stage:
	if player does not have passport, say "'Need ID! Indeed!' the gates say mechanically. You'll need to find, or trade for, some." instead;
	if number of carried fruits > 0:
		say "(First returning the extra fruit[unless number of carried fruits is 1]s[end if])[paragraph break]";
		mootl list of all carried fruits;
	if gates-score < 2:
		now perp-check is true;
		now player has fleeing feeling;
	if gates-score is 0, say "You try to sneak through--you're backstage at the Valence Enclave! You might be able to make a big speech, but you are too terrified. The passport doesn't help a bit as a bouncer yells 'Perp!' Maybe you can learn from the passport. Or parts of it." instead;
	if gates-score is 1, say "[one of]You try to sneak into the Valence Enclave, and you hold up under some questioning--but you don't have enough 'cool' to get past the final guard. [if perp-check is false]He yells '[b]PERP[r]!' and pushes you back. [end if]And with the stage in sight! Thankfully, you have enough to know you'd better leave before people turn hostile[or]You haven't learned anything new since your last attempt to enter[stopping]. Maybe you can use that passport some more." instead;
	abide by the region-done-check rule;
	if player has tekno token:
		say "You have a thought as you sneak in--give Curtis his Tekno-Token back first. Complete transparent honesty and all that.[paragraph break]";
		moot tekno token;
	say "You've managed to [two-of-three] about this whole charisma thing, but you wonder, does it really work? Is it really that easy, if you don't overthink it? Well, why not? You've mastered all the parts of speech, and now your knowledge of more practical word-use gets you by various guards in the Valence Enclave. You're blinded by an air-gem mirage at the gig going on--the TV show, Optical/Topical Capitol, Elections Selection edition. A three-way debate: Interims Minister Rimstein, Ex-Brat Baxter of the Swanker Wankers and Fly-Heart Fatherly Flaherty of the Ruthless Hustlers![paragraph break]The crowd gasps as they recognize you on the stage. But what do you say? 'Able, I'd bailed' gets silence at first.[wfak]Then, a lone voice. 'Re-speak, speaker!' The simple encouragement spurs you: 'HER FAULT! ARTFUL, EH?' [twiddle of table of political slogans and 2][paragraph break]'Go, O.G.,' people call. You're on a roll! 'I shut a hiatus!' By trial 4 or 6, a fair vote proclaims you favorite. Everyone's all '[mami].' You can only say 'Ah, I try out authority.' Your Means Manse becomes the Furthermore-Reformer Hut.[paragraph break]It won't be easy. You'll likely procrastinate a few big choices with random anagrams, from force of habit. But you've learned how, well, all KINDS of words work a bit better, now."; [bold-ok]
	say "[line break][if concisions are reflexed]And your time finding concisions with the sonic icons pays off. It feels like cheating, a bit, giving a snappy phrase to say stuff and get people to do it. But that's leadership and better than, you know, having the bad guys do it. You become eminently quotable, but fortunately, you always make sure things never get to personality cult-level praise[else]You do pretty well even if you're not as suited to idioms and slick quotes as to anagrams. You get enough results, and you work well with people that disagree with you. And even though you feel you often could've said the right thing, and maybe you missed something (you did, a small thing,) your time in charge is one of progress and camaraderie[end if].";
	say "[line break][b]Congratulations![run paragraph on][r] You achieved the 'extended' ending in [this-game]. But wait: there's a little more, if you can't get enough. [b]DEMO DOME MODE[r], if you want, which is a puzzleless look behind the scenes, featuring items that didn't fit in and random musings about building code and so forth. You can access it now or when you restart.[paragraph break]Well done, [b]Reprieval Prevailer[r]!";
	if did-guru is false:
		say "[line break]You also get an additional point for not using the arugula!";
		min-and;
		process the notify score changes rule;
	now others is solved;
	if debug-state is true, append "Test passed for Others.[line break]" to the file of debuggery;
	store-h-end-adjust; [moved nearer the end table stuff so that if I need to make changes it will be less inconvenient]
	the rule succeeds;

to say mami:
	if player is male:
		say "[d-word-u] Mister Master Mind";
	else:
		say "[if player is in Rustic Citrus]Named It[else]AND TIME,[end if] Mrs. Master Mind";

chapter sonicing

does the player mean doing something with coins when coins are off-stage: it is likely.
does the player mean doing something with icons when icons are off-stage: it is likely.
does the player mean doing something with coin when coin is off-stage: it is likely.
does the player mean doing something with icon when icon is off-stage: it is likely.

a coin is a thing. description is "The coin really looks more omen-y than money. Perhaps its value is only symbolic, and it could help you with the stuff money can't buy. There's a singed design on it, which is signed."

a thing can be final-puz. a thing is usually not final-puz.

check giving a final-puz thing to when mrlp is others:
	if second noun is storage, try inserting noun into second noun instead;
	if second noun is curtis:
		if noun is tekno token, say "Curtis declines. 'Once you're all done, I trust you to give it back to me.'" instead;
		say "No, [if second noun is plural-named]they're[else]it's[end if] all yours[unless noun is coin or noun is coins], especially now that you've changed things a bit[end if]!" instead;
	if second noun is len craig, say "[if noun is tekno token]Maybe decide what to buy, or how[else]Not Len's sort of currency[end if]." instead;
	if second noun is Red Rat Art Erd or second noun is Dr Tera Darter, say "[second noun] is probably interested in something much more obviously valuable." instead;
	say "No, that's yours. Payment from Curtis[unless noun is coin or noun is coins], well, in its old form[end if]. But what to do next with it?" instead;

a-text of coin is "YRYR". b-text of coin is "YRYP". parse-text of coin is "UNIQUE". coin is any-spoilable.

section icon

an icon is a thing. description is "The icon is designed to be too interesting to pitch but not important looking enough to be currency. There's a singed design on it, which is signed."

section coins

the coins are plural-named things. description is "The coins really look more omen-y than money. Perhaps their value is only symbolic, and they could help you with the stuff money can't buy. There's a singed design on them, which is signed."

a-text of coins is "????R". b-text of coins is "?????". parse-text of coins is "?[sp]?[sp]?[sp]?[sp]?". coins are any-spoilable.

section singed design

the singed design is part of the coin. the singed design is boring. description is "The singed design is some sort of amalgamation of musical notes and instruments intertwined. You can't read who wrote it, but it makes the coin look more artsy than commercial.". bore-check is bore-singed-design rule.

this is the bore-singed-design rule:
	if current action is scaning:
		let myc be a random thing incorporating singed design;
		say "(You wind up scanning [the myc] instead.)";
		try scaning myc instead;

understand "designs" as singed design when mrlp is others

definition: a thing (called myt) is iconic:
	if myt is icon, yes;
	if myt is icons, yes;
	if myt is coin, yes;
	if myt is coins, yes;
	if myt is s-c, yes;
	if myt is s-i, yes;
	no;

check reading (this is the default to singed design rule) :
	if noun is iconic:
		if singed design is not part of the noun, say "BUG: there should be a singed design to read." instead;
		try reading singed design instead;

section icons

the icons are plural-named things. description is "The icons are designed to be too interesting to pitch but not important looking enough to be currency. Instead of someone important, they each have shattered musical notes on them. Each has a singed design, signed."

check sbing coins: [can't find any way else to do this]
	say "The settler is all over the place. Maybe it would be better to scan just one coin?";
	if the player regex-prompt-consents:
		say "Your settler registers YRY (R and P).";
	else:
		say "The final of the five entries stays on red in non-cheat mode, but everything else is scrambled.";
	the rule succeeds;

check scaning coins:
	say "The settler flashes back, with [if cheat-on is true]all five entries changing[else]all but the last entry--which stays red--changing[end if]. ";
	say "This is odd. Maybe it would be better to scan just one coin?";
	if the player regex-prompt-consents:
		let mytext be indexed text;
		if cheat-on is true:
			now mytext is b-text of coin;
		else:
			now mytext is a-text of coin;
		say "Your settler registers [spacies of mytext]." instead;

a-text of icons is "RYRYR". b-text of icons is "RYRYR". parse-text of icons is "x[sp]-[sp]x[sp]-[sp]x".

section sonic coins

the s-c are privately-named plural-named things. description of s-c is "The coins vibrate from the sound they make. They looks even more omen-y than money.". understand "sonic/ coins" as s-c. printed name of s-c is "sonic coins".

understand "coin" and "sonic coin" as s-c when player has s-c.

a-text of s-c is "YRYRR". b-text of s-c is "YRY??". parse-text of s-c is "I[sp]x[sp]O[sp]x[sp]x". s-c is parse-spoilable.

section sonic icons

the s-i are privately-named plural-named things. description of s-i is "The icons vibrate from the sound they make. They may have some hidden power. Or some trivial one.". understand "sonic/icons" and "sonic icons" as s-i. printed name of s-i is "sonic icons".

understand "icon" and "sonic icon" as s-i when player has s-i.

sonicing is an action applying to nothing.

to slot-appear:
	if lost slot is not part of So Great Storage:
		say "The So-Great Storage begins to rattle by your [if player has s-i]icons[else if player has s-c]coins[else][bug-report][end if], and a lost slot appears in it.";
		now lost slot is part of So Great Storage.

check inserting into So Great Storage:
	if lost slot is part of So Great Storage, say "The box has a slot, so I assume you meant that.";
	try inserting noun into lost slot instead;

check inserting into lost slot:
	if noun is s-c or noun is coins, say "The coins hum a bit before they're spit back out. You catch them. The box seems averse to money." instead;
	if noun is tekno token or noun is coin, say "The box wheezes slightly and spits the monetary item back out." instead;
	if noun is icon or noun is icons, say "The box splutters for a while but eventually rejects the [noun]. Still, you must be close to having the right thing." instead;
	if noun is not s-i, say "That doesn't fit." instead;
	say "As you perform the toll-toss, you think you hear tots['] LOLs. The box opens up, dissolving to reveal a popstar's passport.";
	moot So Great Storage;
	moot s-i;
	now player has popstar passport;
	process the retract halt lath rule;
	if concisions are reflexive, poss-d;
	moot concisions;
	the rule succeeds;

section concisions

to say s-i-c:
	say "[if player has s-i][s-i][else if player has s-c][s-c][else]BUG coin related item should show[end if]"

the concisions are a privately-named LLPish reflexive thing. printed name of concisions is "weird glow around the [s-i-c]". description is "(you shouldn't be able to see this.)"

understand "concisions" as concisions when debug-state is true.

a-text of concisions is "RYRRYRYYRR". b-text of concisions is "RGPRYRYGPP". parse-text of concisions is "C[sp]O[sp]N[sp]x[sp]I[sp]x[sp]I[sp]O[sp]N[sp]S".

check scaning s-i when concisions are reflexive:
	say "Hmm. This is interesting. Not quite the sonic icons, but the whole area around them, gives a reading. Maybe there's something odd you can do with them, or get from them, before they achieve their ultimate purpose.";
	try scaning concisions instead;

section final-puzness defined here after thing definitions so articles are right

s-i is final-puz. s-c is final-puz. the coin is final-puz. the coins are final-puz. the icon is final-puz. the icons are final-puz. the tekno token is final-puz.

chapter passport

the popstar passport is an uncluing thing. description is "It's got a picture inside, of you. And surprisingly, it's flattering and realistic and electronic! With an artifact this rare, you feel [if viewer is reflexed or searcher is reflexed]full of[else]near to[end if] stardom most rad. It's interactive, too--there's a little viewer on the right and a searcher on the left, and once you really learn how to use it, maybe the passport can be a minder, too.[paragraph break]Written on the bottom is some blather about the makers['] commitment to user-friendly GUI, so you should be able to figure what to do with the viewer and searcher.". printed name is "popstar's passport". understand "popstar/popstars" and "popstar/popstars passport" as popstar passport.

check scaning the passport:
	if viewer is reflexed:
		say "The settler only lights up when it points at the searcher.";
		try scaning searcher instead;
	if searcher is reflexed:
		say "The settler only lights up when it points at the viewer.";
		try scaning viewer instead;
	say "The settler's reading for the passport seems to alternate between six and eight characters--for the viewer and researcher. You should maybe scan one individually." instead;

the viewer is part of the passport. the viewer is reflexive and boring. description is "[if viewer is reflexive]You poke around at the viewer but aren't focused enough. You're convinced it should be good for you, and you can learn from it, but you are having too much fun messing around.[else]You've gotten what you can from it. Through the gates![end if]". [?? try beating up the viewer. You should be redirected to examining it.]

a-text of viewer is "RYRYYR". b-text of viewer is "RYRYGR". parse-text of viewer is "x[sp]E[sp]x[sp]I[sp]E[sp]x". viewer is parse-spoilable.

the searcher is part of the passport. the searcher is reflexive and boring. description is "[if viewer is reflexive]You poke around at the searcher but aren't focused enough. You're convinced it should be good for you, and you can learn from it, but you are having too much fun messing around.[else]You've gotten what you can from it. Through the gates![end if]"

a-text of searcher is "RYRYYRRR". b-text of searcher is "RGRYYRRR". parse-text of searcher is "x[sp]E[sp]x[sp]-[sp]-[sp]x[sp]x[sp]x".

chapter passport stuff

to decide which number is gates-score: [ synonyms: gate-level gates-level gate-score gates-points gate-points ]
	let temp be (boolval of whether or not viewer is reflexed) + (boolval of whether or not searcher is reflexed) + (boolval of whether or not fleeing feeling is reflexed);
	if temp > 2:
		if debug-state is true, say " (DEBUG: all 3 passport points are registered, defaulting to just two)";
		decide on 2;
	decide on temp.

book Clangier Clearing

check going east in swell wells:
	if tekno token is off-stage, say "The Clangier Clearing to the east is full of the sounds of sale and commerce. You don't have currency or anything resembling it. Maybe you [if fruits-got < 8]will get some from Curtis, if you do enough[else]can go see Curtis for remuneration. You've done a good bit[end if]." instead;
	if tekno token is moot, say "You bartered for everything you could in the Clangier Clearing." instead

Clangier Clearing is a sideroom. it is east of Swell Wells. Clangier Clearing is in Others. "A streperous superstore blocks any exit except back west.[paragraph break]You notice a list of prices precis and another banner saying AUCTION CAUTION[if voiles are in Clangier Clearing]. I-Solve Voiles advertise a free prize to anyone who guesses what is behind them[end if].[paragraph break]Nameless salesmen employ all sorts of speech tricks and gesturing to haggle here. Maybe if you [b]LISTEN[r], you might get in the flow.". roomnud of Clangier Clearing is table of Clangier Clearing nudges. missed-text of Clangier Clearing is "a sales area east of Swell Wells with a lot of fruits"

after looking in Clangier Clearing:
	set the pronoun them to nameless salesmen;
	continue the action;

after choosing notable locale objects when player is in Clangier Clearing:
	set the locale priority of len craig to 1;
	repeat with froo running through fruits in Clangier Clearing:
		if froo is not carried:
			set the locale priority of froo to 6;

for writing a paragraph about a fruit (called froo) in Clangier Clearing:
	say "Still for barter: [a list of not mentioned fruits in Clangier Clearing].";
	now lemons are mentioned;
	now melon is mentioned;
	now nectarine is mentioned;

clearing-fruits is a number that varies.

after fliptoing when player is in Clangier Clearing:
	if noun is a fruit or noun is prices precis, increment clearing-fruits;
	continue the action;

check taking (this is the shoplift in Clangier Clearing rule) :
	if noun is in Clangier Clearing, say "No stealing. This is a marketplace!" instead;

check taking a fruit when player is in Clangier Clearing:
	if player has noun, continue the action;
	say "That'd be shoplifting. Surely you can try to bargain instead." instead;

section selly yells

the selly yells are boring amusing scenery in Clangier Clearing. "BUG.". bore-text of selly yells is "You can't do much with the selly yells except [b]LISTEN[r].".

check examining selly yells: try listening to selly yells instead.

chapter Len Craig

Len Craig is a person in Clangier Clearing. "[one of]A man introduces himself as Len Craig, proprietor of LargeInc. He's willing to haggle, if you have the right items[or]Len Craig is still here, [len-interest][stopping]."

to say len-interest:
	let temp be 0;
	repeat with QQ running through clearing-hintables:
		if QQ is in Clangier Clearing, increment temp;
	if temp is number of entries in clearing-hintables: [I could put this all in one line, but this is more readable]
		say "welcoming your first transaction";
	else if temp >= 4:
		say "ready for negotiation and such";
	else if temp is 3:
		say "looking a bit tired--you've done good business";
	else if temp is 2:
		say "dealing with other customers. You've done good business with him";
	else if temp is 1:
		say "barely noticing you";
	else if temp is 0:
		say "but you've dealt with him profitably enough. Win-win stuff, of course"

description of Len Craig is "Unperturbed by the noise, he makes hand and nodding gestures at everything he has for sale."

chapter scenery

section streperous superstore

the streperous superstore is bounding scenery in Clangier Clearing. "It's big and intimidating and you would probably get lost there. It's one of Elvira's biggest inventions, and though she's gone, you can't just go blowing it up. Not with people inside, and employed by it."

check going inside when player is in Clangier Clearing:
	try going east instead;

check entering superstore:
	try going east instead;

section nameless salesmen

the nameless salesmen are scenery in Clangier Clearing. "The nameless salesmen are, well, nondescript but numerous. They ignore you, and none seems as interesting as Len Craig."

before talking to nameless salesmen:
	say "You feel, well, lameness at having nothing to say to the salesmen. Don't worry, they're not important." instead;

Include (-
	has transparent talkable
-) when defining nameless salesmen.

chapter i solve voiles

the I Solve Voiles are plural-named vanishing scenery in Clangier Clearing. "They're black and green. Something is behind the voiles, since (non-red) writing on them says 'guess what's behind here and win it,' but you're not sure what.". printed name of voiles is "I-Solve Voiles".

a-text of i solve voiles is "YRYRYR". b-text of i solve voiles is "YR?R??". parse-text of i solve voiles is "-[sp]x[sp]?[sp]x[sp]?[sp]?". i solve voiles is parse-spoilable.

the jar of olives is a fruit. "Some green (with and without pimentos,) some black.". bore-text of olives is "You can put olives on your fingers or whatever once you're done with this little exploit. You'll have all the olives you want. For now, you're doing stuff for Curtis.". frroom of olives is clangier clearing.

chapter prices precis

the prices precis is reflexive scenery in Clangier Clearing. "Reading the list, the kumquat [if kumquat is reflexive]in particular seems too expensive and probably easiest to barter down, or whatever[else]is the most reasonably priced item on the list[end if], though other prices almost make you want to curse."

check taking prices precis: say "That'd leave everyone in the market confused[if prices precis is reflexed] and undo your help fixing the prices[end if]." instead;

understand "price" and "price precis" as prices precis.

a-text of prices precis is "RRYRYR". b-text of prices precis is "RP?R?P". parse-text of prices precis is "C[sp]R[sp]-[sp]P[sp]-[sp]S". prices precis is parse-spoilable.

the kumquat is a fruit. description is "Weird and orange and oblong."

chapter auction caution

the auction caution is reflexive boring scenery in Clangier Clearing. description of auction caution is "It's pretty clear: [b]PAY ASAP[r] covers over half of it. That probably applies to non-auctions, too.". understand "banner" as auction caution. bore-text is "You can really only examine the banner[if caution is reflexive] or maybe get another fruit from it[end if].". bore-check is bore-auction-caution rule.

a-text of auction caution is "RYRYOYR". b-text of auction caution is "PGRGOGR". parse-text of auction caution is "UNIQUE". auction caution is parse-spoilable.

some papayas are a plural-named fruit. description is "Goldish and gourdish."

this is the bore-auction-caution rule:
	if the current action is taking, say "Vandalism." instead;

chapter lemons

some lemons are a reflexive fruit in Clangier Clearing.

description of lemons is "Sour and frowny."

a-text of lemons is "RYRYRR". b-text of lemons is "RYRYRR". parse-text of lemons is "x[sp]O[sp]x[sp]E[sp]x[sp]x".

chapter melon

a melon is a reflexive singular-named fruit in Clangier Clearing.

description of melon is "[unless player carries the melon]Surely there must be a better one. It can't be the only one on display[else]It's nice and big and healthy looking[end if]."

a-text of melon is "RYR??". b-text of melon is "?????". parse-text of melon is "x[sp]-[sp]l[sp]-[sp]x[sp]x". melon is any-spoilable.

chapter nectarine

A nectarine is a reflexive fruit in Clangier Clearing.

a-text of nectarine is "YRRYYRRYR". b-text of nectarine is "YRPYYRRYR". parse-text of nectarine is "-[sp]x[sp]C[sp]-[sp]-[sp]x[sp]x[sp]-[sp]x".

The description of the nectarine is "[if nectarine is reflexed]It's greener than green and could use aging, maybe a little wrinkling[else]It looks fully ripe[end if]." [ancienter/ancienter]

chapter quince

A quince is a reflexive fruit in Clangier Clearing. description of quince is "[if quince is reflexive]Written on it is NAME A PRICE IN ITALIAN[else]Nothing too special about it[end if]. It looks like your average combination of an apple and a pear."

a-text of quince is "RYRRYY". b-text of quince is "RYRRYG". parse-text of quince is "x[sp]I[sp]x[sp]x[sp]U[sp]E". quince is parse-spoilable.

chapter peach

An overpriced peach is a reflexive fruit in Clangier Clearing.

description of the overpriced peach is "[if peach is reflexive]Len Craig sees you looking at it and assures you it's expensive[else]Plump and fuzzy[end if]."

a-text of peach is "RRYYR". b-text of peach is "RRYYR". parse-text of peach is "x[sp]x[sp]E[sp]A[sp]x". peach is parse-spoilable.

chapter no ammo gang

people called the No Ammo Gang are in Clangier Clearing. they are plural-named. "People labeled the No Ammo Gang wander about, babbling. Maybe you could find the right way to chat them up.". description of No Ammo Gang is "Harmless traders. But how to schmooze correctly to get them to trade?"

a-text of No Ammo Gang is "YRYRR". b-text of No Ammo Gang is "YRY??". parse-text of no ammo gang is "A[sp]x[sp]O[sp]x[sp]x". no ammo gang is parse-spoilable.

a mango is a fruit.

book Filed Field

chapter where it is, and scenery

Filed Field is a sideroom. it is west of Swell Wells. "I'd call this a mowed meadow or a purest pasture, but that'd be cheating. Ego-fail foliage cause foilage all directions except east. [if barriers west are touchable]Barriers west block you a bit extra. [end if][if pipe panel lie pen app is touchable]Plans for a pipe panel lie pen app are discarded here. [end if][if rapt figure is touchable]A rapt figure towers here. [end if][if briar screen is touchable]You can also see a briar screen, and you hear barren cries. [end if][if buried raft is touchable]A buried raft sticks up from the ground, too. [end if][if pipe panel lie pen app is moot and briar screen is moot and barriers west is moot and rapt figure is moot and buried raft is moot]You've gotten rid of all the really obtrusive scenery here--good job![else][end if]". Filed Field is in Others. roomnud of Filed Field is table of Filed Field nudges. missed-text of Filed Field is "a field west of Swell Wells with a lot of fruits"

[?? make sentences less choppy in descrption above]

section foliage

the ego fail foliage is bounding scenery in Filed Field. "The ego fail foliage will still block you going anywhere but back east, even with the more man-made obstacles gone."

printed name of ego fail foliage is "ego-fail foliage"

understand "foilage" and "foilage foliage" as ego fail foliage.

chapter breadfruit (Ohai Philip Larkin!)

the buried raft is scenery in Filed Field. "It's jammed into the ground. You can't take it.".

a-text of buried raft is "RRYYRRRYYR". b-text of buried raft is "PRYYRRPYYP". parse-text of buried raft is "B[sp]x[sp]-[sp]-[sp]x[sp]x[sp]R[sp]-[sp]-[sp]T".

check taking buried raft: say "You imagine a toad called work squatting on you as you do this. Maybe you should try to change the buried raft, instead." instead;

the breadfruit is a fruit. description is "It doesn't look doughy at all. Too bad Philip Larkin's ghost isn't around, or you could show him what one looks like. That'd be a cultural experience!"

chapter watermelon

the watermelon is a fruit. description is "It isn't too heavy or big to carry, thankfully."

the mean trowel is a thing in Filed Field. description is "It has some red writing saying who made it and also what it protects against.". "A mean trowel has been discarded here. Perhaps it can become something nicer.".

a-text of mean trowel is "RYRYRRYRYR". b-text of mean trowel is "RYRYRRYRYR". parse-text of mean trowel is "x[sp]-[sp]x[sp]E[sp]x[sp]x[sp]E[sp]x[sp]-[sp]x".

check taking the mean trowel:
	say "You can't find anything to dig, dig?" instead;

chapter cranberries

some cranberries are a plural-named fruit.

the barren cries are scenery in Filed Field. "You can't see them or where they're coming from. But they sound sour and bitter and tiny."

a-text of barren cries is "RRYRRYRRYYR". b-text of barren cries is "RRYRRYRPGGP". parse-text of barren cries is "x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]x[sp]R[sp]I[sp]E[sp]S".

The briar screen is scenery in Filed Field. "It's stained dark off-red and smells kind of bitter. You can barely see what it is screening. Examining it amplifies the barren cries."

a-text of briar screen is "RRYRRYRRYYR". b-text of briar screen is "RPYRRYRPYGR". parse-text of briar screen is "x[sp]R[sp]-[sp]x[sp]x[sp]-[sp]x[sp]R[sp]-[sp]E[sp]x".

check taking the briar screen: say "The briars it is screening would prickle you." instead;

chapter grapefruit

the rapt figure is scenery in Filed Field. It is fixed in place.

a-text of rapt figure is "RRYRYRRYYR". b-text of rapt figure is "RRYRYRRGYR". parse-text of rapt figure is "x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]x[sp]U[sp]-[sp]x".

description of rapt figure is "It's smiling, with ruby red lips and white teeth. It's holding a jagged spoon."

the grapefruit is a fruit.

the jagged spoon is part of the rapt figure. it is boring. understand "utensil" as jagged spoon. description of jagged spoon is "It's jagged at the end.". bore-text is "[one of]The utensil untiles nothing, nor does it contain luteins[or]All you need to know is, it's a hint, and you don't need to futz with it[stopping]."

chapter pineapple

the pipe panel lie pen app is scenery in Filed Field. "It details how to make a penile lie pen app out of pipe panel. You don't have the materials or need for that, but maybe it could become something else.."

check taking pipe panel lie pen app: say "You don't need any instructions for something you can't build. Perhaps they can become something more nourishing." instead;

a-text of pipe panel lie pen app is "RYRYYRRRY". b-text of pipe panel lie pen app is "?GR?YRRRY". parse-text of pipe panel lie pen app is "?[sp]I[sp]x[sp]?[sp]A[sp]P[sp]P[sp]x[sp]E". pipe panel lie pen app is parse-spoilable.

the pineapple is a fruit.

chapter raspberry

Some pryer bars are a plural-named thing in Filed Field. description is "They're not quite crowbars. They have drupelets on them.". "Some pryer bars sit here, and it'd be nice to put them to a less distasteful use than to break into places."

a-text of pryer bars is "RYRRRYRRO". b-text of pryer bars is "RYRRRYRPO". parse-text of pryer bars is "x[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x[sp]R[sp]Y".

check taking pryer bars:
	say "You don't need to open any crates or fight anyone. This isn't that sort of game. Repurpose them, instead!" instead;

check taking drupelets:
	say "You could take a hint from them, but you can't take them. They're part of the pryer bars." instead;

the drupelets are part of the pryer bars. the drupelets are plural-named. description of drupelets is "Little dark-red spherical bits stuck together that'd probably burst with juice if you tried to pop them."

a raspberry is a fruit.

chapter strawberries

a thing called the barriers west is plural-named scenery in Filed Field. "The barriers west seem to mark the end of the Filed Field.".

strawberries are a plural-named fruit.

check taking barriers west: say "Too heavy, and there's nothing west, anyway." instead;

understand "barriers w" as barriers west.

a-text of barriers west is "RRRYRRYRRYYR". b-text of barriers west is "RRPYRRYRRYYR". parse-text of barriers west is "x[sp]x[sp]R[sp]-[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]x".

chapter barber sickle

the barber sickle is a flippable vanishing thing in Filed Field. description is "It's the color of some sort of dark juice, similar in texture to the pryer bars.". "A barber sickle lies here, not sharp but very dark."

a-text of barber sickle is "RRYRRRYRRYYR". b-text of barber sickle is "PRYRRRYRRYYR". parse-text of barber sickle is "B[sp]x[sp]-[sp]x[sp]x[sp]x[sp]-[sp]x[sp]x[sp]-[sp]-[sp]x".

check taking barber sickle:
	say "You don't need weapons in this game. Or a haircut." instead;

The basket of blackberries is a fruit. description is "It's from Bickerers['] Lab, wherever that is."

book Scape Space

Scape Space is an innie sideroom in Others. Scape Space is below Swell Wells. description of Scape Space is "This well-hidden area may be a raft of criminal activity, or maybe any puzzles here may be criminally unfair. A warding drawing suggests going any way other than back up will be dangerous[if a banna is in Scape Space]. A banna['] takes up one part of the wall[end if].". roomnud of Scape Space is table of Scape Space nudges. printed name is "[if greedy-person is moot]Paces[else]Scape[end if] Space". missed-text of Scape Space is "a dark place below Swell Wells with several fruits"

chapter warding drawing

warding drawing is bounding boring scenery in Scape Space. description of warding drawing is "This is a family game, so I can't fully explain the threats contained in the warding drawing for honest people who explore the Scape Space more deeply.". bore-text is "[greedy-person] might not be able to do anything if you messed with the drawing, but [he-she] could call on people who could. The drawing doesn't need to be altered."

chapter Dr Severe

Reserved Deserver Dr Severe is a boring terse person. description is "Kvetching and muttering to themselves about how good it is Elvira is gone, but that doesn't solve any REAL problems. [he-she-c] looks worried, maybe almost guilty the way they treated you. You're not n the mood to argue, but maybe they have something for you. A peace offering. If you're interested.". "Reserved Deserver Dr. Severe paces (of course) around here, complaining things aren't good enough yet.". bore-text is "Dr. Severe seems interested only in complaining right now.". printed name is "Reserved Deserver Dr. Severe".

a-text of Reserved Deserver Dr Severe is "RYRYRRYR". b-text of Reserved Deserver Dr Severe is "??RG?R??". parse-text of Reserved Deserver Dr Severe is "?[sp]?[sp]x[sp]E[sp]?[sp]x[sp]?[sp]?".

the guava is a fruit. [Dr Severe gives guava]

chapter banana/a

a banna is boring scenery in Scape Space. description of a banna is "It's a banna['] (yeah, banner,) with the juvenile taunt [b]NAA-NA-B[r]... written on it, in shades grom greenish to yellow to brown.". bore-text is "The [b]NAA-NA-B[r] juvenile taunt seems to mock you. But perhaps there is a simple way to figure out what to do with a/the banna['].". understand "banner" as banna. printed name is "banna[']". indefinite article of banna is "a". [bold-ok]

a-text of a banna is "RYRYRY". b-text of a banna is "R?RY??". parse-text of a banna is "B[sp]?[sp]N[sp]A[sp]?[sp]?". a banna is parse-spoilable.

The small yellow banana is a fruit.

chapter rhubarb

a brr hub is a boring thing in Scape Space. "A brr hub looms here, making the Scape Space slightly colder.". printed name of brr hub is "brr-hub". description of brr hub is "It looks like, well, an evil version of a more straightforward tomato plant. You wonder if it is a vegetable that should be a fruit, a vegetable people prepare like a fruit, or vice versa.". bore-text is "Before you can get too close to the (a) brr-hub, it whips out ... a burr! [one of]'Burr. Bah!' you say as you notice a brief red welt[or]'Bah. Burr,' you say, as a burr bounces off[or]'Arrh, bub,' you brag as you duck the hub's salvo[or]'Bub...' [greedy-s] distracts you. 'Arrh!' you cry, as you pick out a burr the hub shot at you[in random order].".

a-text of a brr hub is "RRYRYRR". b-text of a brr hub is "RRYRYRP". parse-text of a brr hub is "x[sp]x[sp]-[sp]x[sp]-[sp]x[sp]B".

rhubarb is a fruit.

chapter ENGARO orange

the ENGARO orange is a boring reflexive fruit in Scape Space. "An orange lies here. It looks like you could read the orange to find its brand name.". bore-check of ENGARO orange is bore-orange rule. description of ENGARO orange is "Well, it's orange. And it's branded, so you can [b]READ[r] it to see what lovely company produced it. [one of]Or examine it again and maybe you'll see red[or]'One? Arg!' you think, seeing red and wishing there were more[stopping].". bore-text of ENGARO orange is "You [if ENGARO orange is reflexed]don't need to do anything more with the orange except maybe return it to Curtis[else]think you'll have to do something unusual to get that orange[end if]."

a-text of ENGARO orange is "RY*RYYR". b-text of ENGARO orange is "RY*RYYR". parse-text of ENGARO orange is "x[sp]-[sp] [sp]x[sp]-[sp]-[sp]x".

this is the bore-orange rule:
	if current action is taking, say "The orange bounces away, to become a goner. You must have tried to grab it too quickly. You see red and feel like an ogre for grabbing it so unsubtly." instead;

section gonearing

gonearing is an action applying to nothing.

understand the command "go near" as something new.

understand "go near" as gonearing.

carry out gonearing:
	if orange is in Scape Space and orange is touchable:
		try fliptoing orange;
		the rule succeeds;
	say "[reject]" instead;

check dropping the orange: say "But you worked so hard to get it!" instead;

chapter gender dependent greedy person

greedy-person is a person that varies.

Red Rat Art Erd is a person. "[gree-app].". description of Art Erd is "[gree-desc].". bore-text of Art Erd is "[greedy-sez]?". bore-check is bore-greedy rule.

Dr Tera Darter is a female person. "[gree-app].". printed name of Dr Tera Darter is "Dr. Tera Darter". description of Dr Tera is "[gree-desc].". bore-text of Dr Tera is "[greedy-sez]?". bore-check is bore-greedy rule.

the chum of dr tera darter is red rat art erd.

to say gree-desc: say "Tarred literally and figuratively, [he-she] gives off an 'I'm sly. Slimy.' air. Grease agrees with [him-her]"

this is the bore-greedy rule:
	if action is procedural, continue the action;
	if player has storage, say "You don't want to deal with [greedy-s] any more than you have to." instead;

to say greedy-sez: say "[greedy-s] shrugs, then does the 'let's swap' hand gesture. Hmm, what could you give [him-her] to get that So-Great Storage?"

to say greedy-s: say "[if greedy-person is Art Erd]Art Erd[else]Dr. Tera[end if]"

to say gree-app:
	say "[one of]Oh my goodness! A tarred trader is here. But if you look closely--yes, it's [greedy-person]! Who performed all sorts of 'cutting-edge' financial transactions, but Elvira managed to get [him-her] bailed out because [he-she] was being interesting and creative, or something. Some people tarred [him-her], and, well, [he-she] deserved it[or][greedy-person], the tarred trader, is still slumped here. [he-she-c] probably got kicked out [if Clangier Clearing is unvisited]from somewhere more reputable[else]of the Clangier Clearing[end if][stopping]--[he-she]'s sort of hold onto a box labeled So-Great Storage"

understand "tarred trader" and "tarred/trader" as Red Rat when player is male.
understand "tarred trader" and "tarred/trader" as Dr Tera when player is female.

rule for printing a locale paragraph about greedy-person:
	if So Great Storage is in Scape Space:
		now So Great Storage is mentioned;
	continue the action;

the So Great Storage is a thing in Scape Space. printed name is "So-Great Storage". understand "box" as So Great Storage when mrlp is others. "A box labeled So-Great Storage is here.". description of So Great Storage is "[unless lost slot is part of So Great Storage]It's so great at storing, you can't find a way in there. It reads LOST SLOT, and the slot certainly, uh, is[else]There's a (formerly) lost slot in the box. What to put into it, now[end if].".

check opening box: say "If brute force worked, it wouldn't be so great for storage." instead;

check taking So Great Storage: say "[greedy-s] guards it carefully. 'I need currency. Give me currency.'" instead;

check giving droll dollar to someone:
	if second noun is Curtis, say "But Curtis gave it to you in the first place." instead;
	if second noun is not greedy-person, say "[second noun] isn't seedy enough to accept it." instead;

check giving something to greedy-person:
	if player has storage, say "You've already traded." instead;
	if noun is coin or noun is coins, say "'[one of]No redeem. Need more.'[or]Too heavy.' Hey! A veto![in random order]" instead;
	if noun is dollar:
		say "[he-she-c] consults an imaginary calendar. 'Sell date. All's teed. Let's deal.' On receiving the dollar, [he-she] cries 'Monies so mine!' and runs off.[paragraph break]You take the So-Great Storage. As you do, you hear an argument between [greedy-person] ans ..., well, someone else. Then you hear running. That someone comes out of, well, maybe a spec-space. You recognize them! They whined about Elvira but suggested you might be worse: [dr severe]! Dr. Severe begins pacing back and forth.";
		now greedy-person has dollar;
		moot Dr Tera;
		moot Red Rat;
		move Dr Severe to Scape Space;
		if player has s-i:
			say "[line break]";
			slot-appear;
		now player has storage instead;
	if noun is tekno token, say "Traceable. Be real, cat." instead;
	say "'An empty payment.' He's not interested in that. Just money." instead;

check opening slot: say "It will fit if you give it the right thing." instead;

check closing slot: say "It needs to be open--or how will you pass the gate?" instead;

chapter fruits by hintability

maraschino is not hintable. pears are not hintable. plums are not hintable. limes are not hintable.
tamarind is not hintable. blueberries are not hintable. cantaloupe is not hintable. persimmon is not hintable.
pomegranate is not hintable. coconuts are not hintable. tangerines are not hintable. mulberries are not hintable.
gooseberry is not hintable. apricot is not hintable. apples are not hintable. mango is not hintable.
kumquat is not hintable. papayas are not hintable. breadfruit is not hintable. watermelon is not hintable.
cranberries are not hintable. grapefruit is not hintable. raspberry is not hintable. strawberries are not hintable.
blackberries are not hintable. guava is not hintable. rhubarb is not hintable. banana is not hintable.
grapes are not hintable. pineapple is not hintable. dates are not hintable. olives are not hintable.

chapter fruits by room

frroom of grapes is Rustic Citrus.
frroom of maraschino is Rustic Citrus.
frroom of pears is Rustic Citrus.
frroom of plums is Rustic Citrus.
frroom of limes is Rustic Citrus.
frroom of tamarind is Rustic Citrus.
frroom of blueberries is Rustic Citrus.
frroom of cantaloupe is Rustic Citrus.
frroom of persimmon is Rustic Citrus.
frroom of pomegranate is Rustic Citrus.

frroom of coconuts is Swell Wells.
frroom of tangerines is Swell Wells.
frroom of mulberries is Swell Wells.
frroom of gooseberry is Swell Wells.
frroom of apricot is Swell Wells.
frroom of apples is Swell Wells.

frroom of lemons is Clangier Clearing.
frroom of melon is Clangier Clearing.
frroom of nectarine is Clangier Clearing.
frroom of quince is Clangier Clearing.
frroom of overpriced peach is Clangier Clearing.
frroom of mango is Clangier Clearing.
frroom of kumquat is Clangier Clearing.
frroom of papayas is Clangier Clearing.

frroom of breadfruit is Filed Field.
frroom of watermelon is Filed Field.
frroom of cranberries is Filed Field.
frroom of grapefruit is Filed Field.
frroom of pineapple is Filed Field.
frroom of raspberry is Filed Field.
frroom of strawberries is Filed Field.
frroom of basket of blackberries is Filed Field.

frroom of ENGARO orange is Scape Space.
frroom of guava is Scape Space.
frroom of rhubarb is Scape Space.
frroom of small yellow banana is Scape Space.

volume demo dome

chapter exhibit definitions

an exhibit is a kind of thing. an exhibit can be unnoted, perused or exhausted. an exhibit is usually unnoted. an exhibit is usually boring. an exhibit is always scenery.

an exhibit has a table name called notes-table. The notes-table of an exhibit is usually table of no notes.

an exhibit has a number called notes-row.

table of no notes
thistext
text

to say-thru: ital-say "you've read all the way through.";

after examining an exhibit (called xh):
	if xh is novella, continue the action;
	if notes-table of xh is table of no notes:
		now xh is exhausted;
		continue the action;
	if xh is unnoted, now xh is perused;
	let xh-rows be number of rows in notes-table of xh;
	increment notes-row of xh;
	choose row notes-row of xh in notes-table of xh;
	say "[thistext entry][line break]";
	if notes-row of xh is xh-rows:
		now notes-row of xh is 0;
		now xh is exhausted;
		say-thru;
	continue the action;

to left-to-see:
	if scams is false, say "[line break]";
	if number of unnoted exhibits is 0:
		repeat with QQ running through things in Sparse Spares:
			if QQ is not player and QQ is not examined and QQ is not red writing:
				say "You could still examine [the QQ] [if player is in Sparse Spares]here[else]in Sparse Spares[end if].";
				continue the action;
	repeat through table of xibits:
		if exhib entry is unnoted and exhib entry is touchable:
			if exhib entry is unexamined:
				say "You saw the [exhib entry] [if location of exhib entry is location of player]here [end if]in [location of exhib entry], but you didn't examine [if exhib entry is plural-named]them[else]it[end if].";
				continue the action;
			say "You still have more of the [exhib entry][if exhib entry is novella and novella is examined] (examined but not read)[end if] to look through.";
			continue the action;
	repeat through table of xibits:
		if exhib entry is unnoted:
			if location of exhib entry is unvisited:
				say "You still haven't gone [cueloc of exhib entry] from Peek Keep.";
				continue the action;
	repeat through table of xibits:
		if exhib entry is unnoted:
			if exhib entry is unexamined:
				say "You saw the [exhib entry] [if location of exhib entry is location of player]here [end if]in [location of exhib entry], but you didn't examine [if exhib entry is plural-named]them[else]it[end if].";
				continue the action;
			say "You still have more of the [exhib entry][if exhib entry is novella and novella is examined] (examined but not read)[end if] to look through.";
			continue the action;
	if Sparse Spares is unvisited:
		say "There's some random junk below the entry to Peek Keep.";
		continue the action;
	repeat through table of xibits:
		if exhib entry is perused:
			say "You haven't looked all the way through the [exhib entry] [if location of player is location of exhib entry]here [end if]in [location of exhib entry].";
			continue the action;
	say "It looks like you've looked through everything. Thanks for all the time you spent, and I hope it was worth it!"

to decide which direction is cueloc of (xx - an exhibit):
	let myway be the best route from Peek Keep to the location of xx;
	decide on myway.

chapter xabing

xabing is an action applying to one thing.

carry out xabing:
	if noun is not an exhibit, say "[b]XAB[r] only works for an exhibit." instead;
	let max-row be number of rows in notes-table of noun;
	if noun is Novella, say "The novella is an exhibit, but it works differently from others. You'll want to read its 100 pages by number." instead;
	if notes-row of noun is max-row - 1:
		say "You're already next to the end for [noun]." instead;
	while notes-row of noun < max-row - 1:
		try examining the noun;
	the rule succeeds;

chapter the basics

demoing is an action applying to nothing.

understand the command "demo/dome mode" as something new.
understand the command "demo dome mode" as something new.

understand "demo dome" and "demo mode" and "dome mode" and "demo dome mode" as demoing.

knockage is a truth state that varies.

demo-dome is a truth state that varies.

carry out demoing:
	if mrlp is demo dome, say "You already are in demo dome mode." instead;
	if Report Porter Perrot is not off-stage:
		say "[reject]";
	if player is not in Dusty Study or Report Porter Perrot is moot, say "For reasons of continuity, you can't visit the Demo Dome until you've restarted the game." instead;
	say "[if knockage is true]You ignore [perrot]'s emo'd voice, probably looking to apologize and kiss up[else]You decide to, umm, use the Me-Um-Us Museum[end if]. You call up a nav-van and then pull out your discreet, secret ID to enter.";
	now demo-dome is true;
	move player to Peek Keep;
	now red writing is examined; [this is a silly hack to make sure Sparse Spares is tracked ok]
	demo-dome-status;
	now undo-code is 11;
	the rule succeeds;

to demo-dome-status:
	now left hand status line is "[location of player]";
	now right hand status line is "Wander, Warden!";

book Peek Keep

Peek Keep is a room in Demo Dome. "Exhibits lie west, north and east, and even inside. The way down looks disused. The exit is south. A great grate blocks passage above, but there seems to be a lot behind it. Disport tripods also continually change what they're showing.[paragraph break]The saying ignsay[one of] (yes, I couldn't resist the Pig Latin joke)[or][stopping] here welcomes you[esi-pro].".roomnud of Peek Keep is table of Peek Keep nudges.

the saying ignsay is scenery in Peek Keep. "Unfold old fun! Memoir: I'm More!"

to say esi-pro: set the pronoun it to saying ignsay;

to decide whether all-clear-demo-dome:
	if number of not exhausted exhibits > 0, no;
	if number of unexamined things in sparse spares > 0, no;
	yes;

the demo dome exiting rule is listed before the map outside to directions if possible rule in the check going rules.

check going in Peek Keep when noun is south or noun is outside (this is the demo dome exiting rule):
	if all-clear-demo-dome:
		say "You take a break and get back to, well, running Yorpwald. The museum was about the right size. Not too small, but not so big it wasted taxpayers['] money.";
		now undo-code is 0;
		end the story saying "Inceptions Inspection: Nice Points";
	else:
		say "Are you sure you want to leave before [demo-to-do]? You can type [b]SCORE[r] or [b]THINK[r] to see what you still haven't done.";
		if the player regex-prompt-consents: [ this shouldn't be dir-consents since my test script tries a lot of yes/no here ]
			say "It's--yes, you've sort of lived it, already. You're just too busy for frivolity[if number of not exhausted exhibits is 0 and number of unexamined things in sparse spares > 0] like [spares-unexamine-count][else if number of unnoted exhibits is 0]. You've had a look at everything, just not in total detail[end if].";
			dome-wipe-final-questions;
			now undo-code is 0;
			end the story finally saying "Epilogue's Up! Lie, Ego";
		else:
			say "Okay, why not look around a bit more." instead;

to say spares-unexamine-count:
	let ue be number of unexamined things in sparse spares;
	if ue is 1:
		say "examining [the random unexamined thing in sparse spares]";
	else:
		say "examining the final [ue in words] things in Sparse Spares"

to say demo-to-do:
	if number of not exhausted exhibits is 0:
		say "examining what's left in Sparse Spares, such as [the random unexamined thing in Sparse Spares]";
	else:
		say "[if number of unnoted exhibits is 0]exhaustively [end if]looking at all the exhibits";

to dome-wipe-final-questions:
	if others is not solved:
		choose row with final response rule of the show alternate paths rule in table of final question options;
		blank out the final response rule entry;
		choose row with final response rule of the show what the player missed rule in table of final question options;
		blank out the final response rule entry;

to say unex-left:
	let Y be the number of unexamined things in Sparse Spares;
	if Y is 0, continue the action;
	say ", ignoring the [if Y is 1][random unexamined thing in Sparse Spares][else]final [number of unexamined things in Sparse Spares in words] things[end if] in Sparse Spares,";

check going up in Peek Keep: say "The great grate is there so you can see but not touch things[if great grate is unexamined]. You should examine it to see what's there[end if]." instead;

table of xibits [since ORWT is randomly changed, it's nontrivial to convert this table to number properties for each exhibit.]
exhib	orwt
tester street	10
coder decor	10
raised aiders	10
Chic Loner Chronicle	10
Calendar	10
Novella	20
disport tripods	1
shiest thesis	10
Passe Apses	10

section Great Grate

The Great Grate is boring scenery in Peek Keep. description of Great Grate is "The Great Grate can't be moved. It hides the shall-halls which--well, they're under construction. There's also a talks stalk, spy dial display, design-deigns and a spec space. Nothing is as critical as the other exhibits, but the grate symbolizes how I want to try both new stuff I have and haven't thought of yet.". bore-text is "The great grate was put there just to let you know there will be new stuff from the author--and has been, since the Demo Dome was conceived. Of course, any new stuff you could see would be too raw to be any good. I make bad mistakes in my first drafts.". bore-check is the bore-great-grate rule.

this is the bore-great-grate rule:
	if current action is opening, say "The great grate is too great for that.";

after examining great grate (this is the keep scenery spill rule)	:
	move spy dial display to Peek Keep;
	move spec space to Peek Keep;
	move shall halls to Peek Keep;
	move design deigns to Peek Keep;
	move talks stalk to Peek Keep;
	continue the action;

section Spy Dial Display

The Spy Dial Display is boring scenery. description of Spy Dial Display is "The Spy Dial Display is behind the Great Grate. It may be for calibrating future games, or other stuff.". bore-text is "The [spy dial] is currently off and out of reach."

to say dial-out: say "The dial is out of reach. It's sort of for me. Well, for you, if you are kind enough to help me test a future game. Or even suggest tweaks to make Roiling or Shuffling better"

check turning the spy dial display: say "[dial-out]!" instead;

check switching on the spy dial display: say "[dial-out]!" instead;

check switching off the spy dial display: say "[dial-out]!" instead;

section Spec Space

a spec space is boring scenery. description of a spec space is "It could be a spec-scape, with all that's here. It's a bit hard to read--hopefully the author will unjumble it into something fun some time soon.". bore-text is "The spec space is too ill-defined to do much with.".

section Shall Halls

The Shall Halls are boring scenery. description of Shall Halls is "You can't get a very good look at the shall-halls, but the design-deigns scratched at the end fill you with wonder and anticipation all the same. Really!". bore-text is  "I haven't figured where to go in the Shall Halls, and if you can, I'd be jealous.";

section design deigns

The Design Deigns are boring scenery. "They're illegible from this far away. They might be illegible up close. The author is, sadly, like that. So you can't make out evidence for or against a Questionable Sequel-Obtain.". bore-text of design deigns are "They're secret. I haven't even figured some of them out yet, and those I have are in private GitHub repositories. So you can't do much with them. But thanks for your interest."

section talks stalk

a talks stalk is boring scenery. "From what you see on the other side of the Great Grate, it has many branches, but none appear particularly healthy yet. It symbolizes the author's grand high goal up there of one day implementing more believable NPCs.". bore-text is "You can't do much with the stalk on the other side of the Grate. And the author hasn't, yet. One day, the author will write those games and write postmortems.";

section disport tripods

The disport tripods are a plural-named exhibit in Peek Keep. description is "The disport tripods advertise another way to enjoyably pass time after you are done.". bore-text is "There's not much to do with the disport tripods except examine them. Or play one of those wonderful advertised games!". notes-table of disport tripods is table of demo dome exhibit disport tripods text.

book Evoc-Cove

Evoc Cove is east of Peek Keep. printed name of Evoc Cove is "Evoc-Cove". Evoc Cove is in Demo Dome. "A welcoming place full of feeling and peace and weird new ideas that it's just good to know are there. A novella[nov-pro] is propped up against the wall by some invisible force. You can go back west if you want.". roomnud of Evoc Cove is table of Evoc Cove nudges.

to say nov-pro:
	set the pronoun it to novella;

check going in Evoc Cove: if noun is east or noun is north or noun is south, say "You quickly run into a bunch of boxes you could probably push around to make a path to a bigger room, but that just wasn't your specialty. Wrong sort of thinking game." instead;

section novella

The novella is an exhibit in Evoc Cove. description is "It's called Venal Ol['] Novella, by Evan Oll. That's probably a pseudonym. It's got a hundred pages, which you can examine by [b]READ[r] (number)[lowest-unread]. You can also speed-read with [b]RR[r].". bore-check is bore-novella rule. bore-text is "You can really only examine or read the novella, or speed-read it with [b]RR[r].". notes-table of novella is table of demo dome exhibit novella text.

this is the bore-novella rule:
	if current action is taking, say "Don't take the art." instead;

turbo-novella is a truth state that varies.

understand the command "rr" as something new

understand "rr" as tenpgreading when player is in Evoc Cove

tenpgreading is an action applying to nothing.

carry out tenpgreading:
	let count be 0;
	now turbo-novella is true;
	if novella is exhausted:
		say "You already read through. You could read individual pages again, I guess.";
		the rule succeeds;
	while novella is not exhausted and count < 10:
		increment count;
		read-lowest-page;
	now turbo-novella is false;
	if novella is exhausted:
		say "Well, that's all. Hooray for speed-reading.";

to read-lowest-page:
	let xyz be 1;
	let nonsense be false;
	repeat through table of demo dome exhibit novella text:
		if comprehensible entry is false:
			[if debug-state is true, say "DEBUG: nonsense page [xyz].";]
			now nonsense is true;
		else if page-read-yet entry is true:
			now nonsense is false;
		if page-read-yet entry is true or comprehensible entry is false:
			[if debug-state is true, say "DEBUG: skipping page [xyz].";]
			increment xyz;
		else:
			if turbo-novella is false:
				say "[if nonsense is true]You have to skip a bit to get to a sensible page ([xyz])[else]The next page ([xyz]) makes enough sense, you guess[end if].";
			else:
				say "[if nonsense is true](skipping some totally nonsensical stuff) [end if][b]PAGE [xyz]: [r]";
			try numreading xyz;
			the rule succeeds;
	say "You've read through everything that makes sense, so you may want to look at a specific page.";

to say lowest-unread:
	let xyz be 1;
	repeat through table of demo dome exhibit novella text:
		if page-read-yet entry is true or comprehensible entry is false:
			increment xyz;
		else:
			say "--the lowest page you haven't read that looks comprehensible is [xyz]";
			continue the action;
	say "--though you've read everything of interest, you'd guess"

understand "read [number]" as numreading when player is in Evoc Cove.
understand "r [number]" as numreading when player is in Evoc Cove.
understand "x [number]" as numreading when player is in Evoc Cove.
understand "examine [number]" as numreading when player is in Evoc Cove.

numreading is an action applying to one number.

does the player mean reading novella: it is very likely.

carry out numreading:
	if the number understood is 0, say "Introductions? Boring." instead;
	if the number understood < 0, say "You can't un-read the book, but you can leave it un-read." instead;
	if the number understood > 100, say "The book is only 100 pages long." instead;
	choose row number understood in table of demo dome exhibit novella text;
	now page-read-yet entry is true;
	if number of characters in thistext entry > 2:
		say "You glance over page [number understood]. The most interesting bit seems to be [thistext entry][line break]";
	else:
		say "The author strained not to be incomprehensible and failed.";
	now novella is examined;
	if novella is unnoted:
		now novella is perused;
	repeat through table of demo dome exhibit novella text:
		if page-read-yet entry is false and comprehensible entry is true, the rule succeeds;
	now novella is exhausted;
	the rule succeeds;

when play begins (this is the seed novella rule) :
	repeat through table of demo dome exhibit novella text:
		now page-read-yet entry is false;
		if number of characters in thistext entry > 2:
			now comprehensible entry is true;
		else:
			now comprehensible entry is false;

book Hows Show

Hows Show is north of Peek Keep. Hows Show is in Demo Dome. "A techs chest sits here, full of weird information and tips. It's divided into coder decor and raised aiders. They may be too technical, but maybe you can get a general feel for the silly tricks that went into [shuf] and [this-game]. You can also look at Tester Street outside, or you exit go back south.". roomnud of Hows Show is table of Hows Show nudges.

after printing the locale description for Hows Show when Hows Show is unvisited:
	ital-say "the whos-show is already under [b]CREDITS[i].";
	continue the action;

to decide whether nuf-hows-examined:
	if techs chest is examined, decide yes;
	if raised aiders are examined and coder decor is examined, decide yes;
	decide no;

section tester street

Tester Street is a proper-named exhibit in Hows Show. description of Tester Street is "[one of]Looking through Tester Street, you see how people helped the Stale Tales Slate become what it was. The 'couldn't have done it without them' cliche is true in many ways. Of course, you can type [b]CREDITS[r] for individual names. Here is more general stuff with my reactions to testing.[or]More on testing.[stopping]". notes-table of Tester Street is table of demo dome exhibit tester street text.

section techs chest

the techs chest is boring scenery in Hows Show. "The techs chest is divided into [b]RAISED AIDERS[r] (stuff I used as utilities) and [b]CODER DECOR[r] (neat Inform stuff I learned along the way.) You can examine each as much as you'd like for details about how the Stale Tales Slate was made."

check examining techs chest for the first time: ital-say "if you really, really, want to understand everything, it may help slightly to have a copy of the source handy as you read for this. I'll often be pointing you to things to search for. But it's hardly critical. I hope it is fun just to see the big idea.";

section coder decor

the coder decor is an exhibit in Hows Show. description of coder decor is "You read some [one of][or]more [stopping]of the coder decor.". notes-table of coder decor is table of demo dome exhibit coder decor text.

section raised aiders

the raised aiders are a plural-named exhibit in Hows Show. description of raised aiders is "You read some [one of][or]more [stopping]of the raised aiders. Some of this might be useful if you make your own game. You never know what general or specific ideas will come in handy.". notes-table of raised aiders is table of demo dome exhibit raised aiders text.

book Intel Inlet

Intel Inlet is inside of Peek Keep. Intel Inlet is in Demo Dome. "You feel a fourth wall closing in on bugs and features here. A CareLand Calendar is on the wall, as is a shiest thesis[the-pro]--whoever wrote it is probably half embarrassed of what's on there. Passe Apses[one of], of puzzles that made the cut in earlier releases before being weeded out or moved,[or][stopping] also wait here for your perusal.". roomnud of Intel Inlet is table of Intel Inlet nudges.

to say the-pro: set the pronoun it to shiest thesis;

chapter shiest thesis

The shiest thesis is an exhibit in Intel Inlet. description is "It's a list of embarrassing mistakes you really shouldn't feel so embarrassed about. At first you're all, eh, this...but it's more than that. You resolve to feel less bad about your own mistakes, reading all the things the author let slip in a release, or just in general, while making this project. It's engrossing enough to read in one go, but you don't remember any details, just that mistakes happen.". bore-text is "THe shiest thesis is only for reading.".

chapter CareLand Calendar

The CareLand Calendar is an exhibit in Intel Inlet. description of Calendar is "The CareLand Calendar is divided into several parts based on what is there. You read through one.". notes-table of CareLand Calendar is table of demo dome exhibit careland calendar text.

calendar-part is a number that varies.

chapter Passe Apses

The Passe Apses are a plural-named exhibit in Intel Inlet. description of Passe Apses is "[one of]The Passe Apses contain puzzles that were removed or significantly modified before the final release--if you want a log of what was added, that'd be in the release notes. If the names and ideas make you groan now, well, at least you didn't have to go through them to get here. You observe a[or]You observe another[stopping] page of former content:". notes-table of passe apses is table of demo dome exhibit passe apses text.

passe-part is a number that varies.

book Ned's Dens

Neds Dens is west of Peek Keep. Neds Dens is in Demo Dome. "You feel a hush here, as if you're seeing something personal and private. Like that Chic Loner Chronicle[clc-pro]. You can go back east.". roomnud of Neds Dens is table of Ned's Dens nudges. printed name of Neds Dens is "Ned's Dens".

to say clc-pro: set the pronoun it to chic loner chronicle;

chapter Chic Loner Chronicle

The Chic Loner Chronicle is an exhibit in Neds Dens. description is "[one of]The Chronicle has a list of silly things the author thought of while writing this game. The first one[or]Another thought[stopping] reads:". bore-text is "The Chic Loner Chronicle is only there for reading or examining.". notes-table of chic loner chronicle is table of demo dome exhibit chic loner chronicle text.

book Sparse Spares

Sparse Spares is below Peek Keep. Sparse Spares is in Demo Dome. "All sorts of weird tools and paraphernalia that couldn't fit into the game proper lie here, likely impulse purchases from Bulk-Klub. You can go back up.". roomnud of Sparse Spares is table of Sparse Spares nudges.

to say bore-spares: say "You can't actually do more than examining anything in Sparse Spares, but that's okay, because your quest is nearly over anyway."

a sparething is a kind of thing. a sparething is always boring. bore-text of a sparething is usually "[bore-spares].". bore-check of a sparething is usually the bore-sparse-spares rule.

this is the bore-sparse-spares rule:
	if current action is taking, say "That's a museum exhibit. About all you can/should do is examine it." instead;

section artsies' satires

the artsies satires are plural-named amusing boring scenery in Sparse Spares. description of artsies satires is "[one of]They seem discombobulated, as you'd expect from spares. [or][stopping]You see [one of][or]more [stopping]rough notes: [randbla]". bore-text is "The satires are just there to read.". bore-check is bore-satires rule. printed name of artsies satires is "artsies['] satires".

this is the bore-satires rule:
	if current action is taking, say "No, they're an exhibit. A particularly useless one, and one I couldn't incorporate into the game proper, but an exhibit." instead;

section parcels clasper

the parcels clasper is a sparething in Sparse Spares. description is "Oh, man! It's handy for picking stuff up and moving it around. It looks a bit odd, but boy, if you look for a minute, THAT's how it works.".

the bolt case is a boring transparent container in Sparse Spares. description is "It contains an obstacle, and it's also not openable, since it's--well-bolted. There's also a can of Best Cola in there."

Rule for printing room description details of bolt case: do nothing instead.

check opening bolt case:
	say "It's locked, but Best Cola isn't very good for you anyway. Imagine how bad Worst Cola could be. Even with a cool straw, it could give you loco warts." instead;

the obstacle is a sparething. it is in the bolt case. description of the obstacle is "it reads Bulk-Klub."

The Best Cola is a sparething. it is in the bolt case. description is "It's Yorpwald's equivalent of the gross pop I tend to wind up drinking but don't want to when I'm implementing stuff/drawing up features/squashing bugs. I think it's made by AblestCo."

section larded ladder

the larded ladder is a sparething in Sparse Spares. description is "The larded ladder was originally used as an indication you don't need to go up, but it seemed a bit mean. It also symbolizes, to anyone who's written a game, how each step up seems to cause another slip back down. But it's still worth it."

section trifle filter

the trifle filter is a sparething in Sparse Spares. description is "A finely-tuned device that helped me decide whether silly details were totally irrelevant or just irrelevant enough to be funny and quirky. Or seem that way to me."

section stand up dustpan

The stand up dustpan is a sparething in Sparse Spares. description is "Useful for sweeping bugs and inconsistencies under the metaphorical rug.". printed name is "stand-up dustpan".

section plastic scalp it

The plastic scalp it is a sparething in Sparse Spares. description is "Handy for when a chunk of code--or a story arc--completely didn't work.". printed name is "plastic scalp-it".

section parcel placer

the parcel placer is a sparething in Sparse Spares. description is "Handy for deciding where a good anagram should go--one I wanted to have along, but I didn't know if it should be a thing, a description or random text. Often seen shuffling around (ha! Ha!) the same thing more than once."

section rudest duster

the rudest duster is a sparething in Sparse Spares. description is "Helped me clean up--or add double entendres--to various things, or find a suggestive anagram or two."

volume regular verbs and their modifications

book burning (ha ha, Book Burning)

check burning:
	if burn-check is false:
		ital-say "In this game, you should never have a burning implement, and you should never need one. So this verb is only good for cheap jokes. There are about twenty-five at last count.";
		now burn-check is true instead;
	if noun is an animal, say "No animal cruelty, please. Well, maybe an implausible non-violent gag or two." instead;
	if noun is a person, say "Amazingly, with all your abstract wordplay prowess, you're not good at getting in sick burns in arguments[if noun is a guardian and noun is not lois the hostile and noun is not hostile is he lot]. But maybe you can figure how to leave them burned[else]. Go figure[end if]." instead;
	if noun is a fruit or noun is lobster or noun is tea at a tee, say "Good thing this game isn't a cooking sim." instead;
	if noun is chair, say "You think 'I char a rich chair' but have nothing to burn it with." instead; [introduction]
	if noun is sitar, say "That's not the way to recover rock-star status." instead;
	if noun is a sto, say "[if noun is flippable]Even if it didn't look important, no[else]No senseless vandalism, please[end if]." instead;
	if noun is Rude N Nuder, say "I am anti-censorship, even of that sort of thing. Plus you have no source of flame." instead; [routes]
	if noun is pipe soot, say "It's been through enough of that." instead;
	if noun is divorces, say "A rubbish society rag deserves such a fate--in an incinerator or something. Maybe you can think [b]DIVORCES[r] into irrelevance, though." instead; [troves]
	if noun is praise or noun is Trevis Vister, say "[if noun is reflexive]Perhaps have it create a burning in you[else]It already created a burning in you[end if]." instead;
	if noun is lager, say "It's not high enough proof. In fact, it's almost certainly watered-down." instead;
	if noun is cretins cistern, say "The cistern may deserve it, but Char Arch is burnt enough already." instead;
	if noun is coal, say "You need to burn mental fuel, here." instead; [presto]
	if noun is on labs slab, say "You may figuratively want to, right now, but that's natural when you're programming something tough." instead;
	if noun is frat raft, say "[if player is in frat raft]No way. Especially not while you're on it[else]That might be a way across. Somehow[end if]." instead; [oyster]
	if noun is crate, say "This is totally the wrong genre of game for that." instead;
	if noun is log gaol, say "Even if the Wildest Wilteds weren't desolate enough, you don't have anything incendiary." instead; [towers]
	if noun is ropins, say "The ropins aren't actual rope, so they don't burn. Even if they did, [if Dr Yow is in prison ropins]Dr. Yow might die inside[else]you don't need to any more[end if]." instead;
	if noun is bot boat, say "Destroy a possible way to the Palace and hurt someone's feeling at once? That's a special kind of spiteful meanness. Congratulations!" instead;
	if noun is top opt pot or noun is crocus, say "Renato would be so upset." instead;
	if noun is try us yurts, say "Perhaps another more natural way of decomposition would work better." instead;
	if noun is curst palace, say "You're going to need fireworks, but that's counterproductive[if player is not in Mislit Limits]. Plus you are [way-tow]too far away[end if]." instead;
	if noun is a skansnak, say "There aren't many ways to botch food like that, but that's one[if toaster is touchable]. Anyway, you don't see how to set the toaster to eleven or whatever[else]. But maybe there's something that could heat that up[end if]." instead;
	if mrlp is towers and Topside Deposit is visited, say "Don't be a brushfire furbisher." instead;
	if noun is bleary barley, say "You'd be right in the middle. So, bad idea." instead; [otters]
	if noun is atmo moat, say "It's nowhere near greasy enough." instead;
	if noun is storage, say "It's meant to be nearly indestructible." instead;
	say "You're a ropy pyro. There's no igniter tiering nearby." instead;

to say way-tow: if Mislit Limits is unvisited, say "way ";

book exiting/going outside

the check for default exit rule is listed first in the check exiting rules.

check exiting (this is the check for default exit rule): try going outside instead;

check going outside (this is the map outside to directions if possible rule):
	if number of viable directions is 0:
		if outside-text of location of player is not empty, say "[outside-text of location of player][line break]" instead;
		abide by the find-nowhere-text rule;
		say "There is probably a puzzle you need to figure to leave here. That I am not more specific is a BUG." instead;
	if number of viable directions is 1:
		let rvd be random viable direction;
		if rvd is not the noun:
			say "The only way to exit is [rvd], so let's go that way.";
			try going rvd instead;
		move player to the room outside of location of the player;
		the rule succeeds;
	say "You have more than one way to leave: [list of viable directions]. So you'll need to specify which one." instead;

book throwing

understand the command "throw" as something new.

plainthrowing is an action applying to one thing.

understand "throw [something preferably held]" as plainthrowing.

understand "throw [something preferably held] at [something]" as throwing it at.

carry out plainthrowing:
	if noun is top opt pot, say "But it's Renato's. You don't have to help him out, but it'd be best not to give up." instead;
	if noun is dart:
		say "The dart was more made for shooting than throwing.";
		the rule succeeds;
	if noun is prod, say "Almost. Try something simpler that will cause the prod to fall." instead;
	if throw-warn is false:
		ital-say "throwing isn't a useful verb in this game and will default to dropping in the future, except to hint a few items. Also, Inform/gblorb games generally use THROW X AT Y. Also, dropping itself isn't widely useful in this game.";
		now throw-warn is true instead;
	try dropping noun instead;

volume hinting

chapter hinting (plain)

hinting is an action out of world.

understand the command "hint/hints/info/help" as something new.

understand "hint" as hinting.
understand "hints" as hinting.
understand "info" as hinting.
understand "help" as hinting.

tri-hint is a truth state that varies.

check hinting when player is in Rancho Archon Anchor and tri-hint is false:
	say "'[one of]A dirty aid-try[or]Uum, boy, you bum[at random]!' Elvira shrieks, but she can't PROVE what you just did. Ha!";
	now tri-hint is true;

check hinting when session-hints-off (this is the force hint blocking rule):
	say "You temporarily turned hints off." instead;

check objhinting when session-hints-off (this is the force objhint blocking rule):
	say "You temporarily turned hints off." instead;

check hinting when absolutely-no-hints is true:
	say "You turned hints off for the remainder of the game." instead;

check objhinting when absolutely-no-hints is true:
	say "You turned hints off for the remainder of the game." instead;

the force hint blocking rule is listed first in the check hinting rulebook.

check hinting:
	abide by the hint-toggle-warn rule;

this is the hint-toggle-warn rule:
	if have-objhinted is true, continue the action;
	now have-objhinted is true;
	if player is not in Rancho Archon Anchor:
		say "You're not sure whom to call. There are so many choices! [twiddle of table of help companies and 3] Well, one of those must be right. Because in front of you is a rare help elph! He smiles and waits. 'Er, clues, recluse?' Silence. 'No hint? Nothin[']?'[paragraph break]'Helpless spells, eh? On so soon?'[paragraph break]'Yup. In-game enigma. Tried. Tired. I caved. Advice?'[paragraph break]He acknowledges your pure re-up and presents you with an option potion from his luckiest clue kits. 'Spoils be possible.' Do you accept it?";
		ital-say "the help elph will not appear again. And while ARO tries to hint intelligently and does not spoil anything immediately, you may rather [b]HINT[i] (a specific thing)[if ever-obj-hinted is true]--as you've already done--[else] [end if]to see if it's important.";
		if the player yes-consents:
			say "'Hints OK? Think so!' You drink the option potion, hoping it will help you get to point O. 'Nifty hair, hint fairy!' you say, in way of thanks.[paragraph break]";
		else:
			say "'Spoiler perils, O! Sink hint thinkins[']!' a voice booms.";
		ital-say "you can type [b]NO HINT[i] to disable hints for this session, or [b]NOTHIN[i] to disable them fully."

carry out hinting:
	[if hintblock is true, say "You've blocked hints for this session. So you'll need to RESTART to get them back." instead;]
	abide by the reg-hint-rule of mrlp;
	say "No hints for this region yet. Sorry. I need to work on that, don't I?";
	the rule succeeds;

general-hint is a truth state that varies.

chapter hinting (object)

have-objhinted is a truth state that varies.

before objhinting for the first time:
	now have-objhinted is true;
	ital-say "a word of warning before hinting objects. It is possible but very unlikely that this may reveal items you do not know about yet if this is not used carefully.";

does the player mean objhinting a useless thing: it is unlikely.

definition: a thing (called hintcand) is hintrelevant:
	if hintcand is red writing, yes;
	if hintcand is a backdrop:
		if mrlp is not drop-region of hintcand, no;
		if touched-yet of hintcand is false, no;
		yes;
	if hintcand is question mark and questions-not-flagged is true, yes;
	if hintcand is off-stage, no;
	if hintcand is moot, no;
	if hintcand is the location, no;
	if hintcand is Gast and mrlp is routes, yes; [Gast is known-about before he comes on stage officially]
	if hintcand is part of the diorama:
		if mrlp is ordeal reload, yes;
		no;
	[d "[hintcand] before.";]
	let R1 be map region of location of hintcand;
	[d "[hintcand] after.";]
	let R2 be mrlp;
	if R1 is R2:
		[d "[hintcand] [location of hintcand] vs [R2].";]
		if progval of location of hintcand < progval of location of player, no; [check for something inside something else]
		[d "[hintcand] is relevant.";]
		yes;
	no;

objhinting is an action applying to one visible thing.

understand the command "hint/hints/info/help [any thing]" as something new.

understand "hint [any hintrelevant thing]" as objhinting. understand "hints [any hintrelevant thing]" as objhinting. understand "info [any hintrelevant thing]" as objhinting. understand "help [any hintrelevant thing]" as objhinting.

[understand "hint [any not hintrelevant thing]" as a mistake ("Can't hint that.").] [?? test weird cases]

ever-obj-hinted is a truth state that varies.

does the player mean objhinting a deregioned object:
	it is very unlikely.

does the player mean objhinting a hintrelevant object:
	it is likely.

does the player mean objhinting a touchable object:
	it is likely.

[does the player mean objhinting a visible object:
	it is likely.]

does the player mean objhinting a moot object: it is unlikely.

definition: a thing (called hthing) is deregioned:
	if hthing is a backdrop:
		if hthing is touchable, no;
		if hthing is red writing, no;
		if hthing is off-stage, yes;
		if drop-region of hthing is mrlp, no;
		yes;
	if location of hthing is nothing, no;
	if hthing is moot, no;
	if hthing is touchable, no;
	if mrlp is not map region of location of hthing, yes;
	no.

a thing can be thruhinted. a thing is usually not thruhinted. [This is to check if we got through hinting]

cur-item is a thing that varies.

check objhinting (this is the sort out generic hintables rule):
	if noun is deregioned, say "[if debug-state is true][noun] [location of noun]: [end if]Nothing like that is in the immediate vicinity or region." instead;
	abide by the hint-toggle-warn rule;

definition: a thing (called th) is shunloc:
	if location of th is shunned, yes;
	no;

this is the hint certain object groups rule:
	if noun is the location, say "Occasionally you can [b]SCAN[r] or [b]SMELL[r] or [b]LISTEN[r] for clues. The room description should clue if either of the last two actions is useful." instead;
	if noun is a room, say "There are no hints available on rooms in general. You can go to a room and [b]HINT[r], instead." instead;
	if noun is a portal and noun is not solid idols, say "You can just enter [the noun]." instead;
	if noun is unimportant, say "[noun]: [if noun is plural-named]That is[else]Those are[end if]n't needed to solve the game." instead;
	if in-hint-testing is false and location of noun is nothing and noun is not a backdrop, say "[noun]: you probably shouldn't know about that [if noun is a person]person[else]object[end if], yet. This error should never appear, but if it does, try HINTing objects you can see." instead;
	abide by the reject unknowable objects if not testing rule;
	abide by the generic hint state rejects rule;
	if noun is shunloc, say "You don't need to go back where [the noun] [is-are of the noun]." instead;
	if noun is a badbook, say "[if yak is moot][my-bad] is no longer useful, with the yak gone.[else][one of][my-bad] is just a very boring and stupid book, and if you read it, you find yourself unable to stop mumbling the text.[plus][or]If you mumble [my-bad]'s text, you find yourself droning and drowsing off. Do you know anyone/anything that could use a rest?[plus][or]The bored yak nips at you if you fiddle with the drab yoke. You may notice that they also anagram [my-bad]'s title.[plus][or]Perhaps you could put the yak to sleep by READing [my-bad].[minus][cycling]" instead;
	if noun is a fruit and player has noun, say "[frootz]" instead;
	if in-hint-testing is false and noun is not a backdrop and noun is not scenery:
		if mrlp is not map region of location of noun, say "That doesn't seem to be in this region[if players are touchable]. If you're trying to [b]HINT[r] the [pla-ma]s['] pickup lines, ." instead;
	if noun is a pickup-line:
		increment hint-prog of noun;
		if hint-prog of noun is 3, now hint-prog of noun is 1;
		if spoilit is false:
			say "[if hint-prog of noun is 1]You may be able to disrupt the [pla-ma]s from [pickup-description of noun]. [plus][else]You can make the [pla-ma]s talk more [pickup-spoil of noun].[minus][end if][line break]";
		else:
			say "You can make the [pla-ma]s talk more [pickup-spoil of noun].";
		the rule succeeds;

to say frootz:
	say "[if dollar is not off-stage]You've gotten all you need, but you can still return this fruit to Curtis[else]Curtis will mostly be collecting fruits, so you can return this to him[end if].[line break]"

to say pickup-spoil of (pl - a pickup-line):
	repeat through table of otters anagrams:
		if the-to entry is pl:
			say "[b][right-word entry in upper case][r]";
			continue the action;
	say "[b]BUG[r] [pl] not hint-implemented. This should not happen"

this is the hint-moot-objects rule:
	if noun is disk:
		if map region of location of skid is presto:
			say "(Hinting the skid instead, though you'll need to flip the disk back.)";
			try objhinting skid instead;
	if noun is skid:
		if drab yoke is not off-stage:
			say "(Hinting the disk instead, though you'll need to flip the skid back.)";
			try objhinting disk instead;
	say "[noun]: [if noun is a male person]He's[else if noun is a female person]She's[else if noun is plural-named]They've[else]That's[end if] been dealt with. I'm pretty sure." instead;

this is the spoil-hints rule:
	if spoilit is false, continue the action;
	if there is hint-entry of noun in hintobjstable of mrlp:
		choose row with hint-entry of noun in the hintobjstable of mrlp;
		if there is a parallel-entry entry:
			try objhinting parallel-entry entry instead;
		now spoilit is false;
		if there is no spoil-entry entry:
			d "Oops [hint-entry entry] needs a spoil-entry in [hintobjstable of mrlp].[line break]";
		if player has curst crust:
			if there is no spoil-entry entry:
				say "Before you eat the crust, you mutter a naughty word. You may need to use [b]HINT[r] to deal with [the hint-entry entry], which may be more distasteful than the crust itself.";
				ital-say "this is a bug. If you have a transcript/game state, I'd love to know.";
				do nothing instead; [note: in PRESTO, the spoil-entries are not always bolded, because sometimes they're a word and sometimes they're an action or noun with supporting verbs. This is not the case for ROUTES or TROVES. ]
			if noun is thruhinted and scams is false, say "Looking for any excuse not to eat the crust, you suddenly think [if player is in Hacks Shack][end if][spoil-entry entry]." instead;
			if noun is prefigured, say "The crust looks so disgusting, you [if player is in Hacks Shack]instead think [spoil-entry entry][else]once again think [spoil-entry entry][end if]." instead;
			if player is in Hacks Shack, say "You gulp the crust, mouthing your favorite profanity (minor or major, I won't judge,) and you wonder how you didn't see you could try [spoil-entry entry]." instead;
			say "You gulp the crust and can't help thinking [spoil-entry entry]. But you are too polite and/or repressed to say it until you've finished chewing, which takes a while!";
			if scams is false, decrement swears;
			now undo-code is 1;
			now noun is cheatitemed;
			if scams is false, prevent undo;
			if swears is 0:
				say "The crust is all gone, now.";
				moot crust instead;
			say "[line break]You have [swears] bite[if swears > 1]s[end if] left." instead;
		if player has snoop spoon:
			if noun is thruhinted or noun is prefigured, say "Hmm, wait. Maybe there's something [spoil-entry entry] now." instead;
			moot snoop spoon;
			prevent undo;
			now undo-code is 6;
			now noun is cheatitemed;
			say "You angle your spoon a bit, and you realize you, or something, should be, do, see or go [spoil-entry entry].[paragraph break]The spoon fizzles and dissolves once you see how next to get around." instead;
		if player has fretful truffle:
			if noun is thruhinted or noun is prefigured, say "You pause, wondering if there is a way to preserve resources. Maybe now is a good time to try to [spoil-entry entry]." instead;
			moot fretful truffle;
			prevent undo;
			now undo-code is 4;
			now noun is cheatitemed;
			say "Chewing on the fretful truffle gives you a Pensive Peevins face--and an idea of what and how to think. In particular, you feel the need to [spoil-entry entry] right now." instead;
		if player has cinders:
			if noun is thruhinted or noun is prefigured, say "[if player is in Shiner Shrine and imp is in Shiner Shrine]Hm, it'd still be fun to see the imp act[else if player is in Clarthead Cathedral and whiners are in Clarthead Cathedral]It still might peg the whiners back a bit if they talked more[else]You pause, realizing you do not need to discern. Perhaps now is a good time to remember[end if] [spoil-entry entry]." instead;
			say "As you gaze into the cinders, they blow away, leaving you feeling ";
			say "[if player is in Shiner Shrine and imp is in Shiner Shrine]the imp could act [else if player is in Clarthead Cathedral and whiners are in Clarthead Cathedral]the whiners could talk [end if][spoil-entry entry].";
			if conditional-llp-present, say "[line break]You also feel there's something more to do here, if you want, but isn't critical.";
			if noun is cinder-dissolve:
				if scams is false:
					cinders-bye;
				else:
					say "You activated [b]SCAMS[r], so I won't block undo.";
			now noun is cheatitemed;
			the rule succeeds;

check fliptoing a reflexed animal when mrlp is otters:
	say "You helped [the noun] enough. They will help you back when the time comes." instead;

carry out objhinting (this is the pick object to hint rule) :
	now cur-item is noun;
	if spoilit is false:
		d "[noun] hinting.";
	now ever-obj-hinted is true;
	abide by the reject unknowable objects if not testing rule;
	abide by the generic hint state rejects rule;
	abide by the hint certain object groups rule;
	if noun is moot, abide by the hint-moot-objects rule;
	if noun is cluey, say "The [noun] provides clues for something else you need to flip." instead;
	abide by the spoil-hints rule;
	if there is hint-entry of noun in hintobjstable of mrlp:
		if noun is reflexed: [first check if it's solved already]
			repeat through hint-done-note table of mrlp:
				if hint-entry entry is noun, say "[advice-entry entry]" instead;
		choose row with hint-entry of noun in hintobjstable of mrlp;
		if there is a parallel-entry entry:
			if parallel-entry entry is not moot, try objhinting parallel-entry entry instead;
			if there is no advice-entry entry, say "You don't need to worry about [the noun] any more."; [?? hint mound / hint bogey / gooseberry / hint mound / hint bogey]
		choose row with hint-entry of noun in hintobjstable of mrlp;
		now last-thing-hinted is noun; [for the special case HINT LEOPARD.HINT where SATYR might be the first in the random table. Less jarring this way.]
		if noun is cheatitemed:
			ital-say "these hints may be redundant, with the hint spoiler item you used.";
			now noun is cheathinted;
		else if noun is prefigured-spoiled:
			ital-say "these hints may lead you to something you already guessed and wrote in your notepad.";
		say "[advice-entry entry]" instead;
	repeat through table of general hintobjs:
		if hint-entry entry is noun:
			if there is an advice-entry entry, say "[advice-entry entry]" instead;
			if there is a parallel-entry entry, try objhinting parallel-entry entry instead;
	say "[noun]: I don't have any hints for that. That means it is not important to the game, or this is a bug." instead;

definition: a thing (called th) is prefigured-spoiled:
	unless th is prefigured, no;
	if th is HUNTER HUNT AREA, no; [the hints branch if this is prefigured, because you need to prepare for it e.g. what do you UNEARTH it with?]
	yes;

definition: a thing (called disc-tar) is cinder-dissolve:
	if disc-tar is medals:
		if medals-shiny < 2, no;
	yes;

section what is realized

a thing can be realized.

section hint table for objects

[check objhinting when you are in Clangier Clearing or Scape Space -- check for if you did something already, or first hints. Include booleans etc. breakthru-field, breakthru-clearing, breakthru-ice]

check objhinting Gast:
	if sit a nag is reflexive, try objhinting sit a nag instead;
	if side art is reflexive, try objhinting side art instead;
	if WOE BOW BELL is touchable, try objhinting WOE BOW BELL instead;
	if Rude N Nuder is touchable, try objhinting Rude N Nuder instead;
	say "Failed to redirect hinting Gast to something else. [bug-report]" instead;

to say in-hovels:
	say "[if player has lance]--wait, you already solved the wipes[else if player is in Shuttle Hutlets and lance is off-stage] that might be buried under here[else if player is in Shuttle Hutlets] like that lance, with the right verb[else] in a dingier area than this[end if]";

check objhinting a quest-item when mrlp is routes (this is the redirect hints in routes rule) :
	if Cleric Circle is unvisited, say "You shouldn't know about [the noun] yet." instead;
	if list o toils is unexamined, say "[if noun is pipe soot]The pipe soot from the ashtray[else]That[end if] is one of the items on the list you haven't examined yet. In the Cleric Circle." instead;
	if noun is held, say "[The noun] [if list o toils is examined]is part of the spiers['] potion that will help let people see directions again[else]has a use, as a reagent of some sort, but maybe you haven't examined anything you need[end if]. Since you found it, you don't need to do anything else with it." instead;

to say give-croc:
		say "[if serpent is in Mislit Limits]You need to get behind the serpent[else if Mesprise Premises is unvisited]You can, but you don't have to, visit the premises to the west[else if itster is touchable]You need to make the Tetris Sitter care about something other than her game, first[else]You need to give St. Teri the crocus[end if]"

to decide whether one-imp-down:
	if imp-score >= 1, yes;
	no;

to decide whether one-whine-down:
	if whiner-score >= 1, yes;
	no;

volume end of story

book listlisting

liliing is an action applying to one number.

lili0ing is an action applying to nothing.

carry out lili0ing:
	process the showing regional lists rule;

carry out liliing:
	let my-table be table of random books;
	let threshold be 40;
	if number understood is 0, process the show list of lists rule instead;
	if number understood < 1 or number understood > number of rows in table of megachatter, say "Out of range. 1 through [table-list-max] are currently available. 0 shows a list of how and where random text occurs." instead;
	now curlistnum is the number understood;
	if curlistnum > table-list-max:
		say "Oops! You can't reach that yet. You'll need to [if others is solved]look in the Demo Dome[else]see about Store H[end if] first." instead;
	choose row number understood in table of megachatter;
	say "[descr entry]:[paragraph break]";
	if there is a maxbeforepause entry, now threshold is maxbeforepause entry;
	let cur-e be 0;
	now my-table is mytab entry;
	let jjk be descr entry;
	say "[if there is a lasties entry][b]LAST[r]: [lasties entry][paragraph break][else]No final entry.[line break][end if]";
	if there is a prefix entry, say "[b]PREFIX[r]: [prefix entry][paragraph break]";
	repeat with ABC running from 1 to number of rows in my-table:
		if remainder after dividing cur-e by threshold is 0 and cur-e > 0:
			say "([cur-e] of [number of rows in my-table]) so far. Type [b]Q[r] to quit the list or any other key to continue.";
			abide by the avoid keypress in menu testing rule;
			let cholet be the chosen letter;
			if cholet is 113 or cholet is 81:
				next-list-poke;
				the rule succeeds;
			say "[jjk] continued.";
		increment cur-e;
		say "[abc]. [blurb in row abc of my-table][if there is a suffix entry][suffix entry][end if][line break]";
	next-list-poke;
	if cur-e <= number of rows in my-table, say "Total elements = [number of rows in my-table].";

to show-ads:
	let county be 0;
	repeat through table of ad slogans:
		increment county;
		if remainder after dividing county by 40 is 0:
			say "[r]([county] of [number of rows in table of ad slogans]) so far. Type q to quit the list or any other key to continue.";
			let cholet be the chosen letter;
			if cholet is 113 or cholet is 81:
				next-list-poke;
				the rule succeeds;
			say "Continuing ads.";
		say "[if blare entry is true]One ad says: [end if][blurb entry][line break]";

ln-yet is a truth state that varies.

book amusing

table of big yucks
reg-needed	yux
--	"[b]KNOCK[r] when Report Porter Perrot knocks?"
--	"[b]KISS[r]ing Elvira or making her [b]ALIVER[r]?"
--	"[b]TICKLE ELMO[r]?"
--	"WAITing (Z) or not typing anything in a command a few times?"
--	"READing all of the Dope Op-Ed? (It has far fewer entries than the random text)"
--	"[b]BURNING[r] various things?"
--	"SMELLing in various places?"
--	"LISTENing in various places?"
--	"ATTACKing yourself, or various NPCs or things, including Brother Horbert, the Tetris Sitter, the yurts and the campiest campsite?"
--	"Asking for a [b]HINT[r] in the Rancho Archon Anchor?"
--	"reading Roiling Mistakes.i7x for other 'clever' 'jokes?'"
routes	"Cursing twice in the Cleric Circle? Or once in the Cripple Clipper?"
routes	"[if routes is solved]Or[else]Cursing[end if] anywhere?"
routes	"Feeling [b]BANE[r] around the bean?"
troves	"Anagramming the astute [b]STATUE[r]?"
presto	"Calling the cola [b]POP[r] or [b]SODA[r]?"
presto	"Cursing, or anagramming cursing, anywhere in Presto?"
others	"Trying to get a mango twice in the Clearing?"
others	"Giving Curtis four or more fruits?"

table of anayux
reg-needed	yux	do-i-print
--	"[b]MANSE[r]:"	a rule
--	"making the plates or staple [b]PLEATS[r] or [b]PETALS[r]?"
--	"[b]PSALTER[r] around the plaster/stapler?"
troves	"[b]TROVES[r]:"
troves	"[b]BROOMED[r] in Boredom Bedroom?"
troves	"[b]ALED[r] when you have the note from Dale?"
troves	"[b]PERSIA[r] when by the statue saying [b]PRAISE[r]?"
troves	"[b]LSAT[r] or [b]ALTS[r] around the salt?"
troves	"saying [b]SNOG[r] when you hear the song in Very Top?"
troves	"[b]REDRAW[r] by the raw red drawer?"
troves	"[b]STUB[r] or [b]BUTS[r] by the tubs?"
presto	"[b]PRESTO[r]:"
presto	"[b]ENEMY TZAR[r] around the maze entry in the Grey Gyre?"
presto	"[b]ELO[r] or [b]EOL[r] by Leo?"
presto	"[b]ASSWHUP[r] or [b]WHUPASS[r] when [l-n-r] are commiserating?"
presto	"[b]SPAG[r] or A [b]GPS[r] by the gasp-gaps in Char Arch?"
presto	"[b]PTAH[r] in the Phat Path?"
presto	"[b]IDKS[r] or [b]KIDS[r] around the disk or skid?"
presto	"[b]BAT[r] by the keyboard's [b]TBA[r] key?"
oyster	"[b]OYSTER[r]:"
oyster	"Changing the canoe to an [b]OCEAN[r]?"
oyster	"[b]CARET[r] in the plains?"
oyster	"[b]PALINS[r] in the plains?"
oyster	"Making a [b]HORSE[r] in Heros['] Shore?"
towers	"[b]TOWERS[r]:"
towers	"[b]KALE[r] by Leak Lake?"
towers	"[b]ICEMAN[r] by Anemic Cinema?"
towers	"[b]DOPIEST[r] or [b]POSITED[r] in the topside?"
towers	"[b]PORIN[r] or [b]PORINS[r] by the prison ropin's?"
towers	"[b]REPAIR TOASTER[r]?"
--	"[b]OTTERS[r]:"
--	"[b]SLAIN[r] or [b]AS NIL[r] by the nails?"
--	"(risque) saying [b]SPINE[r] around the pines? There's another one, too."
--	"Trying to [b]PROD IT[r] or [b]DROP IT[r] in the Rancho Archon Anchor (the torpid tripod is nearby)?"
--	"Making Elvira [b]ALIVER[r] in the Rancho Archon Anchor?"
--	"Trying to make Elvira a [b]NICER SOUL[r] in the Rancho Archon Anchor?"
--	"Saying [b]COINS RULE[r] or [b]RULE[r], [b]SCION[r] in the Rancho Archon Anchor?"
others	"[b]OTHERS[r]:"
others	"making [b]GAPERS[r] around the pagers or grapes?"

Rule for amusing a victorious player:
	say "Have you tried:[paragraph break]";
	repeat through table of big yucks:
		if others is solved or there is no reg-needed entry or reg-needed entry is solved, say "[2da][yux entry][line break]";
	say "[line break]Would you like to see a list of the least tedious non-game-critical anagram jokes?";
	if the player regex-prompt-consents:
		repeat through table of anayux:
			if others is solved or there is no reg-needed entry or reg-needed entry is solved:
				if there is no do-i-print entry:
					say "[2da][yux entry][line break]";
				else:
					process the do-i-print entry;
					if the rule succeeded:
						say "[2da][yux entry][line break]";

to say if-miss: if others is not solved, say ", and also, solving the post-Elvira region will unlock a few more jokes[if should-prod-others], including in the regions you bypassed[end if]";

to decide whether should-prod-others:
	if presto is not solved, yes;
	if troves is not solved, yes;
	if routes is not solved, yes;
	if towers is not solved, yes;
	if oyster is not solved, yes;
	no;

book what you missed

section bogus activities

[bogus activities]

part modified rule

the print the modified final question rule is listed before the print the final prompt rule in before handling the final question.

the print the final question rule is not listed in any rulebook.

to say satires-list:
	if sparse spares is unvisited:
		say "from something below Peek Keek, where you didn't visit";
	else:
		say "the [satires], which you [if satires are examined]examined[else]didn't examine[end if]"

This is the print the modified final question rule:
	let named options count be 0;
	let pure-metas be 0;
	if the story has not ended finally:
		do nothing;
	else if peek keep is not visited:
		say "[one of]Congratulations! You made it through[if others is solved] the extended ending[end if]. There's a lot of[or]Here's a rehash of the[stopping] meta-stuff you may find interesting listed below.";
	else:
		say "You may've already seen the endgame meta-options, but just in case, they are included below. The only new thing after you've visited Demo Dome is [satires-list]. You can see it with [b]LD[r].";
	repeat through the Table of Final Question Options:
		if the only if victorious entry is false or the story has ended finally:
			if there is a final response rule entry:
				if there is a final question wording entry:
					if there is a final response activity entry:
						say "[2da][final question wording entry][r][line break]";
					else:
						increment pure-metas;
	say "You [if the story has ended finally]can also[else]probably want to [b]UNDO[r], but your full list of choices is to[end if] ";
	repeat through the Table of Final Question Options:
		if the only if victorious entry is false or the story has ended finally:
			if there is a final response rule entry:
				if there is a final question wording entry:
					unless there is a final response activity entry:
						decrement pure-metas;
						say "[if pure-metas is 0]or [end if][final question wording entry][if pure-metas is 0].[else], [end if]";
	say "[line break]";

part what happens when you solve store H

to store-h-end-adjust:
	if epilogue rule is a final response rule listed in the Table of Final Question Options:
		choose row with final response rule of epilogue rule in the Table of Final Question Options;
		blank out the whole row; [don't let the player ROVE OVER again if they already did]
	choose row with final response activity of dummy demo dome mode activating in the Table of Final Question Options;
	now the final response rule entry is the the activate demo dome mode rule; [notify the player about DEMO DOME MODE]
	now left hand status line is "VALENCE ENCLAVE";
	end the story finally saying "A Giddy Route: You Did Great";

part real options

Table of Final Question Options (continued)
final question wording	only if victorious	topic	final response rule	final response activity
"[b]ROVE OVER[r] to see what's behind [b]STORE H[r]"	true	"store h" or "rove/over" or "rove over"	epilogue rule	--
"[b]DEMO DOME MODE[r] (director's cut, can't undo)"	true	"demo/dome/mode" or "demo dome/mode" or "dome mode" or "demo dome mode"	--	dummy demo dome mode activating
"see [b]ALTERNATE[r]/[b]ALT[r] paths for mutually exclusive solutions"	true	"alt/alternate"	the show alternate paths rule	--
"check what you may've [b]MISSED[r] (minor spoilers) point-wise"	true	"missed"	the show what the player missed rule	--
--	true	"l/list"	the show list of lists rule	--
--	true	"n/ln/nl"	the list next megachatter table rule	--
--	true	"p/pl"	the list previous megachatter table rule	--
--	true	"la/lb/lc/ld/le/lf/lg/lh/li/lj/lk/ll/lm/lo/lp/lq/ls/lt/lu/lv/lw/lx/ly/lz"	the showing regional lists rule	--
--	true	"rj/lr/jr"	the list next region random text rule	--
"[b]L[r]([b]IST[r]) to see random dialogues, etc., [b]L[r]([b]IST[r]) ([b]NUMBER[r]) for a particular one, [b]LN[r]/[b]NL[r] for the next or [b]L[r](store letter) for one region ([b]LA[r]/[b]LG[r] for general stuff, [b]L*[r] for store *, [b]LO[r] for Ordeal Reload, [b]LS[r] for Stores), or [b]LJ[r]/[b]LR[r] to jump to the next region's next list set"	true	"l/list [number]"	the show a list by number rule	--
"[one of][b]FORM[r] ([b]OF MR[r])[or]([b]M OR F[r]) [b]FORM[r][in random order] to see where your sex matters"	true	"form" or "form of mr" or "m or f form" or "m or f" or "of mr"	the sort male female out rule	--
"see [b]RANK[r]s and how to achieve them"	true	"rank/ranks"	show ranks rule	--
--	true	"pod/pods/seed/seeds/seeding/seedings"	show seeds rule	--

[note: the Show Ranks Rule is in the common file.]

section dummy actions

dummy demo dome mode activating is an activity. [this needs to be here, or it needs to be here in some form, as we have some options we wish to shut off/on when we actually win. There used to be dummy showing alternate paths/what the player missed activities, but they could be deleted. Note that eliminating the row here is not really an option, as if the player beat Elvira and eliminted the row, then beat Store H, it would be hard to get the row back. So we have a dummy activity as a placeholder until Store H is solved. This has confused me before, so I want to write in a note so I don't lose time/effort over it again.]

chapter ROVE OVER and i6 stub to make it work

Include (-

[ ASK_FINAL_QUESTION_R;
	print "^";
	(+ escape mode +) = false;
	while ((+ escape mode +) == false) {
		CarryOutActivity(DEALING_WITH_FINAL_QUESTION_ACT);
		DivideParagraphPoint();
	}
];

-) instead of "Ask The Final Question Rule" in "OrderOfPlay.i6t".

The escape mode is a truth state that varies.

To fully resume the story:
	sort table of megachatter in init-order order;
	resume the story;
	now escape mode is true;
	now otters is solved;
	now last-solved-region is otters;
	clear the screen;
	say paragraph break.

This is the epilogue rule:
	fully resume the story;
	say "You decide, why not [b]ROVE OVER[r]?";
	clean-for-roving;

chapter Demo Dome option

this is the activate demo dome mode rule:
	fully resume the story;
	say "You stumble on a small museum chock full of meta-information about your quest.";
	now undo-code is 11;
	move the player to Peek Keep;
	now all held things are in Meatier Emerita Emirate;
	demo-dome-status;
	the rule succeeds;

chapter alternate paths

to say remap-unset: say "[if remapped is true][b]UNSET[r] the tunes[else][b]REMAP[r] the perma-amper[end if]";

this is the ordeal-reload-alt rule: say "[eq2][b]ORDEAL RELOAD[r] has alternate routes, but nothing mutually exclusive.";

this is the routes-alt rule: say "[eq2][b]ROUTES[r] has no alternate, um, routes.";

this is the troves-alt rule:
	say "[eq2][b]TROVES[r][eq2][line break]";
	if mbb is moot or Sister Tressi is moot:
		say "[2da]There were two marble blamers chosen at the start. You got [mbb], but there was also [other-mbb].";
	else:
		say "[2da]You will have a choice of disposing of [mbb] or Sister Tressi at the end.";

this is the presto-alt rule:
	say "[eqls][b]PRESTO[r][line break]";
	if hoop is moot:
		say "[2da]you could've said [if phooeyed is true][b]POOH[r] instead of [b]PHOOEY[r][else][b]PHOOEY[r] instead of [b]POOH[r][end if], which would've meant one [if phooeyed is true]less[else]more[end if] point.";
	else:
		say "[2da]You have two ways to remove the hoop ahead.";
	if maze-points > 0:
		say "[2da][if maze-points is 1][b]MAZEL TOV[r] would've given more points in the Volt Maze[else][b]WONT[r] was how to cop out of Nowt Town, but for only one point instead of [maze-points in words][end if].";
	else:
		say "[2da]There are three ways to get by the maze ahead, each giving a different number of points.";
	if hogs are moot:
		say "[2da][if hogs-not-keys is true][b]SYKE[r][else][b]GOSH[r][end if] was another way around the hogs to get the keys.";
	else:
		say "[2da]You'll have two ways to get by Saps['] Pass.";
	say "[2da]there were other possible bad books in the shack. They are: [list of off-stage badbooks].";
	if yak is moot:
		say "[2da]there were two other ways to get the drab yoke from the bored yak: [presto-3 of yak-sol].";
	else:
		say "[2da]you have three ways ahead to get the drab yoke.";
	if USB is reflexive:
		say "[2da]You'll have two ways to deal with a [b]USB[r].";
	else:
		say "[2da]You could also have made the [b]USB[r] into a [if issub is true][b]BUS[r][else][b]SUB[r][end if]."

unset-not-remap is a truth state that varies.

spikes is a truth state that varies.

this is the oyster-alt rule:
	say "[eqls][b]OYSTER[r][line break]";
	if pill-warned is false, say "[2da]you didn't need to do anything with the pills in the Posh Hops Shop, but you could've tried to [b]SPILL[r] them to bypass a puzzle.";
	if Olde Lode is visited:
		say "[2da][remaining-actions of 0] are the other actions that would've annoyed Posh Hops Shop pesty types[if spill-target is trolls] instead of SPILLing the pills[else], as you only needed three of the five possible[end if].";
		if tunes are moot, say "[2da]You could have also [if remapped is true][b]UNSET[r] the tunes[else]REMAPped the perma-amper[end if] to break the jukebox.";
	else:
		say "[2da]You won't be able to use all actions to leave the shop.";
	if Anger Range is unvisited:
		say "[2da]There is some branching between Disease Seaside and Anger Range.";
	else:
		if sabot boats are in Disease Seaside:
			say "[2da]you could've tried to [b]BOAST[r] to get the sabot boats['] attention, then [b]LEAP[r].";
		else:
			say "[2da]you could've tried to [if frat raft is reflexive][b]FART[r] on the frat raft, then [end if][b]SOAR[r] to use the oars.";
	if pikes are moot:
		say "[2da]you could've tried to [if spikes is true][b]SCRAP[r] with the carps[else][b]SPIKE[r] the pikes[end if] to rescue Tortu.";
	else:
		say "[2da]you can defeat the carps and pikes two different ways ahead.";
	if end den is unvisited, say "[2da][if Tenfold Teflond Den Loft is visited]you actually missed a room: the End Den in the Horned Hedron, because you examined the gleaner before entering the portal. Don't worry about going back. There was nothing there[else]You have a chance to jump past the End Den[end if].";

bredo-bored is a truth state that varies.

naiv-nat is a truth state that varies.

this is the towers-alt rule:
	if bredo is moot:
		say "[2drm of Loftier Trefoil]Bredo could've also become [if bredo-bored is true][b]ROBED[r][else][b]BORED[r][instead].";
	else if towers is not solved and Bredo is in Loftier Trefoil:
		say "[2drm of Loftier Trefoil]Bredo had two solutions.";
	if rodyon is false and roddro is false:
		say "[2drm of Loftier Trefoil]You managed to find both solutions for Rodney by trying to get rid of him before enough picaros were gone and after. Well done!";
	else:
		say "[2drm of Loftier Trefoil]you could also have made Rodney [b][if roddro is true]YONDER[else]DRONEY[end if][r].";
	if Reeds Ale is moot:
		say "[2da]you could've also [if rese is true][b]RELEASED[r][else][b]RESEALED[r][end if] [el-la-full] to give [him-her] a new outlook on life.";
	else:
		say "[2da]Two solutions for the [el-la-full].";
	if natives site van is moot:
		say "[2da]you could've also made the natives['] site van [if naiv-nat is true][b]VAINEST[r][else][b]NAIVEST[r][end if] to uproot them.";
	else:
		say "[2drm of Danger Garden]there were two solutions for the natives['] site van guarding the passage south.";
	if lone duck is moot, say "[2drm of obscurest subsector]Instead of [ff of true], you could've [ff of false].";
	if Mislit Limits are visited:
		say "[2drm of Actionless Coastlines][if turbos are reflexed and blaster is reflexed]If you'd only half-repaired a bot boat, you'd have been kicked to the Rawest Waster Waters, where you'd have needed to bring the [neaters] [b]NEAREST[r][else if turbos are reflexed]you'd have passed Rawest Waster Waters if you'd have made the blaster [b]STABLER[r][else]you'd have passed Rawest Waster Waters if you'd have made the turbos [b]ROBUST[r][end if].";
	if towers is not solved and otters is not solved and Mislit Limits are not visited, say "[2da]Branch upcoming before crossing Leak Lake.";
	if towers is not solved and lone duck is not moot, say "[2da]You have two solutions ahead for the lone duck/fissure.";

to say ff of (j - a truth state): say "[if j is fissure-flip]making the [fissure] [b]FUSSIER[r][else]using the lone duck to make the prison ropins [b]UNLOCKED[r][end if]"

yellr-figured is a truth state that varies.

this is the otters-alt rule:
	say "[eqls][b]OTTERS[r][line break]";
	say "[2da]there were several other ways you could've made the [pla-ma]s act (you only needed three of seven): [how-players]";
	if players are not reflexed, say "[2da][the players] could've been made to talk more [b]SPARELY[r].";
	if yellr-figured is false, say "[2da]you could've said [b]REALLY[r] to dispel [yer all].";
	say "[2da]you could've made the imp act [b][if number of forcemooted northern block-concepts is 0]<[b]BUG[r]>[else][flip-name of random forcemooted northern block-concept][end if][r], and the whiners could've spoken [b][if number of forcemooted southern block-concepts is 0]<[b]BUG[r]>[else][flip-name of random southern forcemooted block-concept][end if][r].";

this is the others-alt rule:
	say "[eqls][b]OTHERS[r][line break]";
	say "[2da]you only needed two ways to work the passport. The other was to [if viewer is reflexive][b]REVIEW[r] the viewer[else if searcher is reflexive][b]RESEARCH[r] the searcher[else][b]PREP[r] after you are called a perp[end if]."

regions-in-order is a list of regions variable. regions-in-order is { routes, troves, presto, oyster, towers, otters, others }.

this is the show alternate paths rule:
	say "[line break]You may've figured some or even all of these alternate paths out. But here is a list, to check off. Ordeal Reload and Routes have no mutually exclusive solutions. This list overlaps very little with the [b]MISSED[r] list which shows actual points missed.";
	d "[list of solved regions].";
	repeat with myr running through regions-in-order:
		if myr is solved, process the altroutes of myr;
	say "There are two regions that choose randomly from many different obstacles at the beginning of play. The prosaic picaros in the Loftier Trefoil and the pickup lines in the Disowned Downside are two examples. A command hidden in the menu, [b]SEED[r] or [b]POD[r], will show you all the possibilities."

to say presto-3 of (n - a number):
	if n is not 1, say "pushing the skid to the shack with the yak on it";
	if n is not 2, say "[if n is not 1] and [end if]giving the yak a bad book to eat";
	if n is not 3, say " and pushing the skid to Dirge Ridge when you [if escaroles are in Hacks Shack]change the escaroles to a casserole[else]have the casserole[end if]";

definition: a pickup-line (called p) is unplayed:
	if p is not available-this-time, no;
	if p is ment, yes;
	no;

definition: a pickup-line (called p) is unreached:
	if p is not available-this-time, no;
	if p is ment, no;
	yes;

list-solves is a truth state that varies.

rule for printing the name of a pickup-line (called pl) when list-solves is true:
	say "[b]";
	if pl is t-tearily-irately:
		say "tearily/irately";
	else:
		choose row with the-from of pl in table of otters anagrams;
		say "[right-word entry]";
	say "[r]";

to say how-players:
	now list-solves is true;
	let MYL be list of unplayed pickup-lines;
	if number of entries in MYL > 0:
		say ". Not acted on: [MYL]";
	now MYL is list of unreached pickup-lines;
	if number of entries in MYL > 0:
		say ". Not seen because you finished quickly: [MYL]";
	now list-solves is false;
	if t-tearily-irately is reflexed:
		say ". You could've also had [the players] discuss reality [if irately is true][b]TEARILY[r] instead of [b]IRATELY[r][else][b]IRATELY[r] instead of [b]TEARILY[r][end if]";
	say ".";

to say remaining-actions of (fd - a number): [remaining actions minus FD]
	let poshact be a list of text;
	if tips pits are not reflexed, add "[b]SPIT[r]" to poshact;
	if tines are not reflexed, add "[b]INSET[r]" to poshact;
	if capers is not reflexed, add "[b]SCRAPE[r]" to poshact;
	if gins sign is not reflexed, add "[b]SING[r]" to poshact;
	if tunes are not moot, add "[b]UNSET[r]/[b]REMAP[r]" to poshact;
	if tunes are reflexed:
		if remapped is true:
			add "[b]UNSET[r] (instead of [b]REMAP[r] to break the jukebox)" to poshact;
		else:
			add "[b]REMAP[r] (instead of [b]UNSET[r] to break the jukebox)" to poshact;
	sort poshact in random order;
	if fd > 0:
		while number of entries in poshact > fd:
			remove entry fd from poshact, if present;
	repeat with mytemp running from 1 to number of entries in poshact:
		if mytemp is number of entries in poshact:
			say "or [entry mytemp in poshact]";
		else:
			say "[entry mytemp in poshact][if mytemp is not number of entries in poshact - 1],[end if] ";

doublecheat is a truth state that varies.

to say d-then:
	if doublecheat is true:
		say "[b]DERAIL[r] then ";

section deprecated code

to sort-meg: [i'd rather not sort random tables by number since we will have different cases when we look things up]
	if megsort is false:
		now megsort is true;
		sort table of megachatter in reverse table-size order;

chapter misses rules

to say how-pills-used:
	repeat through hintobjstable of oyster:
		if spill-target is hint-entry entry:
			say "[if there is a spoil-entry entry][spoil-entry entry][else]<Bug! I forgot to fill in a table cell for oyster hint objects for [the spill-target], and I'd like to know about this>[end if]";
			continue the action;
	say "BUG should've found something for [spill-target] but didn't"

show-siderooms is a truth state that varies.

to show-miss (myreg - a region) and (needsolve - a truth state):
	now miss-room is Meatier Emerita Emirate;
	if needsolve is true and myreg is not solved, continue the action;
	process the misses-rule of myreg;
	let nvs be number of not visited siderooms in myreg;
	if nvs > 0:
		now show-siderooms is true;
		say "========Missed rooms[line break]";
		say "[2da][if nvs is 1]you didn't see[else]places you didn't see:[end if] [list of not visited siderooms in myreg] in [myreg].";
		now show-siderooms is false;

rule for printing the name of a sideroom (called rm) when show-siderooms is true:
	say "[if missed-text of rm is empty]([rm], but write missed-text)[else][missed-text of rm][end if]"

this is the show what the player missed rule:
	say "An all-feat leaflet flutters over the fourth wall.";
	now all regions are not tickedoff;
	now anything-missed is false;
	if others is solved, show-miss others and true instead;
	show-miss Ordeal Reload and true;
	show-miss stores and true;
	show-miss routes and true;
	show-miss troves and true;
	show-miss oyster and true;
	show-miss towers and true;
	show-miss otters and true;
	if number of bypassed regions > 0, say "[2da]Next time, you can maybe try the [list of bypassed regions] region[if number of bypassed regions > 1]s[end if]." instead;
	if anything-missed is false, say "[line break]CONGRATULATIONS, YOU FOUND EVERYTHING is written on it, with confetti drawn all around, too[one of][or]. It just doesn't get old, looking at it. Hey, you deserve to feel good[stopping]."; [bold-ok]
	if number of test-jumped regions > 0:
		say "[b]MISSES[r] instead of [b]MISSED[r] shows just the current region.";

definition: a region (called R) is test-jumped:
	unless R is solved, no;
	unless cur-score of R is 0, no;
	yes;

to say keycar-loc: say "in [location of keycar]"

section actual misses rules

this is the ordeal-reload-misses rule:
	if giant pin is in Dusty Study, say "[2drm of dusty study]the giant pin could've become a [b]PAINTING[r].";
	if meet bans are in Dusty Study, say "[2drm of dusty study]you could've made the ten beams/MEET-BANS into a [b]BASEMENT[r].";
	if tables are in Dusty Study, say "[2drm of dusty study]you could've made the tables into a [b]STABLE[r] to unlock an alternate way/puzzle to the basement/gallery.";
	if sitar is not moot, say "[2drm of farming framing]you could've changed the [if Farming Framing is visited]sitar in the Farming Framing or the [end if]stria in the gallery into a [b]STAIR[r].";
	if niche is in Dusty Study, say "[2drm of dusty study]you could've changed 'my niche' into a [b]CHIMNEY[r].";
	if pram is in Highest Heights and highest heights is visited, say "[2drm of highest heights]you could've changed the pram into a [b]RAMP[r].";
	if isbn bins are reflexive, say "[2drm of largely all grey gallery]you could've put a [b]SNIB[r] on the [b]ISBN[r] bins.";
	if respect specter is not reflexed, say "[2drm of carven cavern]you could've gotten a [b]SCEPTER[r] from the [specter].";

this is the stores-misses rule:
	if store B is in stores, say "[2drm of strip of profits]Store B could've given you some [b]SORBET[r].";
	if store K is in stores, say "[2drm of strip of profits]Store K could've made some [b]TOKERS[r].";
	if store N is in stores, say "[2drm of strip of profits][b]NESTOR[r] was hiding in Store K.";
	if store U is in stores, say "[2drm of strip of profits][b]ROUTES[r] were in Store U.";
	if store V is in stores, say "[2drm of strip of profits][b]TROVES[r] were in Store V.";
	if store P is in stores, say "[2drm of strip of profits][b]PRESTO[r] would've opened Store P.";
	if store Y is in stores, say "[2drm of strip of profits]The [b]OYSTER[r] was in Store Y.";
	if store W is in stores, say "[2drm of strip of profits][b]TOWERS[r] were in Store W.";

this is the routes-misses rule:
	if worst ad is in Same Mesa, say "[2drm of same mesa]you could've tried to go [b]TOWARDS[r] the worst ad.";
	if raptest patters are in Sonancy Canyons, say "[2drm of sonancy canyons]you could've done [b]WITHOUT[r] the content of the raptest patters.";

this is the troves-misses rule:
	if Pa Egg Pea is reflexive, say "[2dmiss of troves]you could've tried to [b]GAPE[r] at Pa, Egg, Pea, by Peg A. Page at any time.";
	if tears taser is not moot, say "[2drm of Loather Rathole]you could've tried to [b]STARE[r] at the tears taser.";
	if mussier misuser is not moot, say "[2drm of Bustle Sublet]you could've tried to [b]SURMISE[r] about the mussier misuser.";
	if a sty tasty say is reflexive, say "[2drm of Boarded Roadbed]you could've tried to [b]STAY[r] around A Sty: Tasty, Say.";
	if evil bee is reflexive, say "[2drm of Boarded Roadbed]you could've tried to [b]BELIEVE[r] to neutralize the evil bee, too."; [1 of 2]
	if SNORE SO ARENA is reflexive, say "[2drm of Boarded Roadbed]you could've tried to [b]REASON[r] to neutralize the [b]SNORE SO ARENA[r], too.";
	if lager is not moot, say "[2drm of Drain Nadir]you could've tried to [b]GLARE[r] at the Lager.";
	if pleaser leapers are not moot, say "[2drm of Boredom Bedroom]you could've tried to [b]RELAPSE[r] around the pleaser leapers.";
	if ME ARTS is in Boredom Bedroom, say "[2drm of Boredom Bedroom]you could've tried to [b]MASTER[r] the [b]ME ARTS[r]."; [1 of 2]
	if lobster is in Boredom Bedroom, say "[2drm of Boredom Bedroom]you could've tried to [b]BOLSTER[r] yourself to deserve lobster.";
	if DIVORCES is not moot, say "[2drm of Browse Bowers]you could've tried to [b]DISCOVER[r] something about [b]DIVORCES[r] magazine.";
	if rivets are reflexive, say "[2drm of Econ Cone]you could've tried to [b]STRIVE[r] by the statue of Trevis Vister."; [1 of 2]
	if praise spirea is reflexive, say "[2drm of Econ Cone]you could've tried to [b]ASPIRE[r] by the praise spirea.";
	if sectarian craniates is reflexive, say "[2drm of Econ Cone]you could've tried to [b]ASCERTAIN[r] stuff from [craniates].";
	if Sister Tressi is not moot, say "[2drm of Upscale Capsule]you could've tried to [b]RESIST[r] Sister Tressi.";
	if mbb is not moot, say "[2drm of Upscale Capsule]you could've tried to [b]RAMBLE[r] to ignore [mbb]."; [1 of 2]
	if reactionism is not moot, say "[2drm of Upscale Capsule]you could've tried to [b]ROMANTICISE[r] around [reactionism].";

this is the presto-misses rule:
	if lamb is in Grey Gyre, say "[2drm of Grey Gyre]you could've shouted [b]BLAM[r] at the lamb.";
	if maze-points < 2, say "[2drm of Grey Gyre]you could've said [b]MAZEL TOV[r] to get past the maze.";
	if maze-points is 2, say "[2drm of Grey Gyre]Because you scanned someone in the Unwary Runway, you only got two out of three points for the Volt Maze."; [mazeguide-scanned]
	if odes song is in Dirge Ridge, say "[2drm of Dirge Ridge]you could've said [b]GOODNESS[r] to the Odes Song.";
	if phooeyed is false, say "[2drm of Austerer Treasure]you could've gotten a style point for saying [b]PHOOEY[r] instead of [b]POOH[r].";
	if sport ports are reflexive, say "[2drm of Marines Seminar Remains]you could've said [b]PROST[r] (a German word to toast someone) to the Sport Ports.";
	if hawt thaw is not moot, say "[2drm of Saps Pass]you could've said [b]WHAT[r] to the Hawt Thaw.";
	if starch charts are not moot, say "[2drm of Saps Pass]you could've called the starch charts [b]TRASCH[r].";
	if rom sticks are off-stage, say "[2drm of Hacks Shack]the trim socks could've become [b]ROM STICKS[r].";
	if [b]TBA[r] key is reflexive, say "[2drm of Hacks Shack]you could've made the [b]TBA[r] key a [b]TAB[r] key.";
	if casserole is off-stage, say "[2drm of Hacks Shack]you could've made the escaroles a [b]CASSEROLE[r].";
	if drive a is reflexive, say "[2drm of Hacks Shack]you could've made Drive A [b]AVIDER[r].";
	if drive e is reflexive, say "[2drm of Hacks Shack]you could've taken time to [b]DERIVE[r] how to improve Drive E.";

this is the oyster-misses rule:
	check-oyster-spill posh hops shop;
	if number of entries in shop-hint-items > 2, say "[2drm of posh hops shop][if silly-acts is 0]The full list of[else]Unchosen[end if] ways to annoy the trolls: [remaining-actions of 0].";
	check-oyster-spill olde lode;
	check-oyster-spill disease seaside;
	check-oyster-spill anger range;
	check-oyster-spill dearths;
	if snarled darnels are not reflexed, say "[2drm of anger range]you could've tried to [b]SLANDER[r] the snarled darnels.";
	if cans are not moot, say "[2drm of dearths]you could've tried to [b]SCAN[r] the cans.";
	check-oyster-spill lean lane;
	if dent is not moot, say "[2drm of lean lane]you could've stopped to [b]TEND[r] the dent in Aunt Tuna's raw red drawer.";
	if wipes are on raw red drawer, say "[2drm of lean lane]you could've tried to [b]SWIPE[r] the wipes at Aunt Tuna's to start a side quest.";
	check-oyster-spill lapsin plains;
	if bogus-plains are reflexive, say "[2drm of lapsin plains]you missed a chance to [b]SPLAIN[r] in the plains, at any time during the door-open puzzle.";
	check-oyster-spill shuttle hutlets;
	if heaps are reflexive and heaps are in Shuttle Hutlets, say "[2drm of shuttle hutlets]you could've stopped to [b]SHAPE[r] the heaps to beautify the hut.";
	if waste is not moot, say "[2drm of shuttle hutlets]you could've tried to [b]SWEAT[r] to remove the waste.";
	if lance is not off-stage and lance is reflexive, say "[2drm of shuttle hutlets]you could've tried to [b]CLEAN[r] the lance[if templar ramplet is prefigured] to allow you to [b]TRAMPLE[r] the Templar Ramplet[end if].";
	check-oyster-spill sclerous closures;
	check-oyster-spill horned hedron;
	check-oyster-spill rascal craals;
	check-oyster-spill end den;
	check-oyster-spill den loft;
	if templar ramplet is not moot and lance is reflexive, say "[2drm of tenfold]you could've tried to [b]TRAMPLE[r] the Templar Ramplet.";
	if lever is not reflexed, say "[2drm of tenfold]you could've stopped to [b]REVEL[r] before flipping the [b]LEVER[r].";
	check-oyster-spill plasm lamps;
	if Plasm Lamps is visited and bogus-psalm are not reflexed, say "[2drm of plasm lamps]you could've tried to [b]PSALM[r] in Plasm Lamps.";
	if bogus-reangle is reflexive, say "[2da]you could've tried to [b]REANGLE[r] the general gleaner before giving it to the papery yapper.";

to check-oyster-spill (rm - a room):
	if spill-loc is rm, say "[2drm of rm][endgame-spill-instead] in [rm].";

this is the towers-misses rule:
	if used-ray is true, say "[2dmiss of towers]you used x-ray vision from [list of moot skansnaks], which cost a style point.";
	if keycar is off-stage, say "[2dmiss of towers]you didn't clear any location of guardians, besides edges or [coastlines], so you didn't get to see a [keycar].";
	let xxx be unripe ur pine;
	let nmg be number of not moot guardians;
	if nmg > 1:
		say "[2dmiss of towers]You missed the guardians listed below ([nmg] in total).";
		repeat with gua running through not moot guardians:
			if bad-gender-match of gua, next;
			now xxx is gua;
			if xxx is Lars Eede or xxx is Elsa Erde, now xxx is Reeds Ale;
			choose row with the-from of xxx in table of towers anagrams;
			let rm2 be gualoc of gua;
			now rm2 is the room guadir of gua from rm2;
			say "[2dmiss of towers][the gua] ([gualoc of gua]/[rm2]) could've become [if the-from entry is Reeds Ale][b]RELEASED[r] or [b]RESEALED[r][else if the-from entry is site van][b]VAINEST[r] or [b]NAIVEST[r][else][b][right-word entry in upper case][r][end if][if nmg is 1]. It is the only one you missed[end if].";
		if number of not moot guardians > 1, say "(that's all for the guardians)[line break]";
	if recital article is not moot, say "[2drm of trefoil]you could've made the recital article [b]TALCIER[r].";
	if number of pinko picaros > 0:
		repeat with pk running through pinko picaros:
			say "[2drm of trefoil][pk][one of], whom you left in the Loftier Trefoil,[or], also left,[stopping] could've been [vul of pk in upper case].";
	towers-miss-track scope copse;
	if yurts are in Scope Copse, say "[2drm of scope copse]the yurts in the Scope Copse could've become [b]RUSTY[r].";
	towers-miss-track saltbed;
	if old ice is not reflexed, say "[2drm of saltbed]the old ice in the Baldest Blasted Saltbed[if saltbed is unvisited] (west of Treading Gradient)[end if] could've become [b]COILED[r].";
	towers-miss-track leveraged everglade;
	if ego drains are not moot and leveraged everglade is visited, say "[2drm of leveraged everglade]the organised ego drains in Leveraged Everglade could've become [b]GRANDIOSE[r].";
	if strudel is reflexive and fringe finger is visited, say "[2drm of fringe finger]the strudel in the Fringe Finger could've become [b]RUSTLED[r].";
	towers-miss-track anemic cinema;
	towers-miss-track treading gradient;
	if sporties ripostes are not moot and lost lots is visited, say "[2drm of lost lots][the ripostes] ripostes in Lost Lots could've become [b]PROSIEST[r].";
	if mended mini denim is not moot, say "[2drm of treading gradient]the mended mini denim could've been [b]MINED[r].";
	if raves saver is reflexive, say "[2drm of treading gradient]the [b]REPLAY PLAYER[r] letters on the raves saver could've become [b]PEARLY[r].";
	towers-miss-track danger garden;
	towers-miss-track salted deltas;
	towers-miss-track artist traits strait;
	if ag-atten is false, say "[2drm of obscurest subsector]you could've made [agnostic] [b]ATTENTIVE[r] to help Dr. Yow's lecture go down a bit smoother.";
	if weirder red wire is part of bot boat, say "[2drm of actionless coastlines]you could've made the weirder red wire [b]REWIRED[r].";
	if dourest detours are visited and seismal samiels are not moot, say "[2drm of dourest detours]you could have made the seismal samiels [b]AIMLESS[r].";
	if unripe ur pine is in Mislit Limits, say "[2drm of mislit limits]you could've made the unripe ur-pine [b]PUNIER[r].";
	if top opt pot is not moot, say "[2drm of mislit limits]you could've [if serpent is in Mislit Limits]made the repents serpent [b]PRESENT[r] to go west.";
	if mesprise premises are visited:
		if itster is not moot, say "[2drm of mesprise premises]you could've made [the sitter] [b]TRISTE[r].";
		if anodyne is in Mesprise Premises, say "[2drm of mesprise premises]you could've made [the sitter] [b]ANNOYED[r].";
		if top opt pot is not moot, say "[2drm of mesprise premises]you could've given the Tetris Sitter the top opt pot, to complete Ornate Atoner Renato's quest.";

to towers-miss-track (rm - a room):
	if location of keycar is rm, say "[2drm of rm]the yacker keycar could've been made [b]CREAKY[r]."; [this is possible since the keycar appearing relies on clearing all guardians, not just necessary ones. It cannot appear in Coastlines.]

this is the otters-misses rule:
	if rescind-cinders is false, say "[2drm of minded midden]you could've tried to[if cinders are not moot] [b]DISCERN[r] (any item) for a spoiler hint or even, for a bonus point,[end if] [b]RESCIND[r] the cinders.";
	if asyllabic lilac bays are in Minded Midden, say "[2drm of minded midden]you could've said [b]BASICALLY[r] around the asyllabic lilac bays in Burnt Brunt.";
	if blase bales are in Minded Midden:
		say "[2drm of minded midden]you could've made the blase bales into a [b]SABLE[r].";
	else if blase bales are off-stage:
		say "[2drm of minded midden]one hidden animal would have appeared until you all its friends in [if nounsolve is 3 and adjsolve is 4][perverse preserve][else if nounsolve is 4 and adjsolve is 3][lamer realm][else][Perverse Preserve] and [lamer realm][end if].";
	if cult laya is in Disowned Downside, say "[2drm of disowned downside]you could've said [b]ACTUALLY[r] to the [laya] in Disowned Downside.";
	if loop pool is not visited, say "[2drm of disowned downside]you missed two points for boosting your powers further, along with an LLP, to the north of Disowned Downside.";
	if bran barn is not visited, say "[2drm of disowned downside]you missed two points for boosting your powers further, along with an LLP, to the south of Disowned Downside.";
	if loop pool is visited:
		if eels are not reflexed, say "[2drm of loop pool]you could've [if sea cube is not moot]said [b]BECAUSE[r] to dissolve the sea cube, then [end if]said [b]ELSE[r] to gain the eels['] trust.";
		if Sullenness Us is in Loop Pool, say "[2drm of loop pool]you could've dispelled the 'Sullenness, Us' voices in Loop Pool after satisfying the eels by saying [b]UNLESS[r].";
	if bran barn is visited:
		if gore ogre is not moot, say "[2drm of bran barn]you could've [if ghoul hat is not moot]said [b]ALTHOUGH[r] to dissolve the ghoul hat, then [end if]said [b]ERGO[r] to get rid of the Gore Ogre and gain Mr. Lee's trust.";
		if vow here is in Bran Barn, say "[2drm of bran barn]you could've dispelled the 'vow here' that reappeared in Bran Barn with [b]HOWEVER[r] after you got rid of the Gore Ogre.";
	if number of flippable things in Perverse Preserve > 0:
		repeat with A running through flippable things in Perverse Preserve:
			if A is raptor or A is parrot, next; [ get rid of white noise parrot/raptor suggestion while testing ]
			let AA be the the-to corresponding to the-from of A in the table of otters anagrams;
			say "[2drm of perverse preserve]you could've turned the [A] in Perverse Preserve into [if AA is plural-named]some[else]a[end if] [AA].";
	if number of reflexive animals in Lamer Realm > 0:
		repeat with A running through reflexive things in Lamer Realm:
			say "[2drm of lamer realm]you could've changed the [A] in Lamer Realm to be [right-adj of A].";
	if aside-llp is not reflexed:
		say "[2drm of reclusion inclosure]you could've recognized [e-n-m] fully as Elvira's ideas aides by pushing them [b]ASIDE[r], opening another LLP.";
	else if holy nest is not reflexed:
		say "[2drm of reclusion inclosure]you could've been all '[b]HONESTLY[r]?' at the holy nest.";

this is the others-misses rule:
	if slime is not moot, say "[2drm of Rustic Citrus]the slime could've become [b]LIMES[r].";
	if spear is not moot, say "[2drm of Rustic Citrus]the spear could've become [b]PEARS[r].";
	if lumps are not moot, say "[2drm of Rustic Citrus]the lumps could've become [b]PLUMS[r].";
	if grapes are not moot, say "[2drm of Rustic Citrus]the pagers could've become [b]GRAPES[r].";
	if ruts circuits is unexamined:
		say "[2drm of Rustic Citrus]you could've examined the ruts circuits to find more things to change to fruits.";
	else:
		if dates are not moot, say "[2drm of Rustic Citrus]the sated stead could've become [b]DATES[r].";
		if mad train is not moot, say "[2drm of Rustic Citrus]the mad train could've become a [b]TAMARIND[r].";
		if cherries are not moot, say "[2drm of Rustic Citrus][hire recs] could've become [b]CHERRIES[r].";
		if harmonicas are not moot, say "[2drm of Rustic Citrus]the harmonicas could've become [b]MARASCHINO[r] cherries.";
		if eerie blurbs are not moot, say "[2drm of Rustic Citrus]the eerie blurbs could've become [b]BLUEBERRIES[r].";
		if peanut cola is not moot, say "[2drm of Rustic Citrus]the peanut cola could've become a [b]CANTALOUPE[r].";
		if mopeage rant is not moot, say "[2drm of Rustic Citrus]the mopeage rant et al could've become a [b]POMEGRANATE[r].";
		if omen prism is not moot, say "[2drm of Rustic Citrus]The omen prism could've become a [b]PERSIMMON[r].";
	if apples are not dislodged, say "[2drm of Swell Wells]the PSA [']Elp could've become [b]APPLES[r]."; [Swell Wells]
	if green stain is not moot, say "[2drm of Swell Wells]you could've made the green stain [b]TANGERINES[r].";
	if miser ruble is not moot, say "[2drm of Swell Wells]the miser ruble could've become [b]MULBERRIES[r].";
	if riot cap is not moot, say "[2drm of Swell Wells]the riot cap could've become an [b]APRICOT[r].";
	if sorer bogey is not moot, say "[2drm of Swell Wells]the sorer bogey could've become a [b]GOOSEBERRY[r].";
	if stucco is not moot, say "[2drm of Swell Wells]the message on stucco could've become [b]COCONUTS[r].";
	if rapt figure is not moot, say "[2drm of Filed Field]the rapt figure could've become a [b]GRAPEFRUIT[r]."; [Filed Field]
	if pipe panel lie pen app is not moot, say "[2drm of Filed Field]the pipe panel lie pen app could've become a [b]PINEAPPLE[r].";
	if barriers west are not moot, say "[2drm of Filed Field]the barriers west could've become [b]STRAWBERRIES[r].";
	if briar screen is not moot, say "[2drm of Filed Field]the briar screen could've become [b]CRANBERRIES[r].";
	if buried raft is not moot, say "[2drm of Filed Field]the buried raft could've become [b]BREADFRUIT[r].";
	if pryer bars are not moot, say "[2drm of Filed Field]the pryer bars could've become a [b]RASPBERRY[r].";
	if barber sickle is not moot, say "[2drm of Filed Field]the barber sickle could've become [b]BLACKBERRIES[r].";
	if mean trowel is not moot, say "[2drm of Filed Field]the briar screen could've become a [b]WATERMELON[r].";
	if mango is not moot, say "[2drm of Clangier Clearing]you could've gone [b]AMONG[r] the No-Ammo Gang for a mango."; [Clangier Clearing]
	if peach is not moot, say "[2drm of Clangier Clearing]you could've gotten the peach [b]CHEAP[r].";
	if melon is not dislodged, say "[2drm of Clangier Clearing]you could've said [b]MO LEN[r] or [b]LEN MO[r] to get a melon.";
	if quince is not dislodged, say "[2drm of Clangier Clearing]you could've said the quince costs [b]CINQUE[r].";
	if prices precis is not reflexed, say "[2drm of Clangier Clearing]you could've said [b]CRIPES[r] at the prices precis.";
	if lemons are not dislodged, say "[2drm of Clangier Clearing]you could've looked [b]SOLEMN[r] to get lemons.";
	if olives are not dislodged, say "[2drm of Clangier Clearing]you could've found [b]OLIVES[r] behind the I-Solve Voiles.";
	if papayas are not dislodged, say "[2drm of Clangier Clearing]you could've gotten [b]PAPAYAS[r] from the 'Pay [b]ASAP[r]' Auction Caution.";
	if nectarine is not dislodged, say "[2drm of Clangier Clearing]you could've made the nectarine [b]ANCIENTER[r].";
	if orange is not dislodged, say "[2drm of Scape Space]you could've tried to [b]GO NEAR[r] to get the orange."; [Scape Space]
	if banana is not dislodged, say "[2drm of Scape Space]you could've tried to change a banna['] to a [b]BANANA[r].";
	if brr hub is not moot, say "[2drm of Scape Space]you could've made a brr hub [b]RHUBARB[r].";
	if Dr Severe is not moot, say "[2drm of Scape Space]you could've made [Dr Severe]'s arguments [b]REVERSED[r].";
	if concisions are not reflexed, say "[2drm of Scape Space]you could've made [b]CONCISIONS[r] from the sonic icons before putting them in the Lost Slot.";
	if did-guru is true, say "[2da]going a-la-guru from the arugula lost you a final point.";

this is the demo-dome-misses rule:
	say "No points in the Demo Dome, so nothing to find.";

chapter lists post-game commands

curlistnum is a number that varies.

to decide which number is table-list-max:
	if mrlp is demo dome, decide on number of rows in table of megachatter;
	let count be 0;
	repeat through table of megachatter:
		if whichreg entry is Demo Dome and peek keep is not visited, next;
		if others-passed or whichreg entry is not others, increment count;
	decide on count;

this is the list next megachatter table rule:
	now listpoke is false;
	increment curlistnum;
	if curlistnum > table-list-max:
		say "(Cycling back to 1.)[line break]";
		now curlistnum is 1;
	try liliing curlistnum;
	next-list-poke;

this is the list previous megachatter table rule:
	decrement curlistnum;
	if curlistnum < 1:
		say "(Cycling back to [table-list-max].)[line break]";
		now curlistnum is table-list-max;
	try liliing curlistnum;
	next-list-poke;

to decide which number is next-region-start of (x - a number):
	if x is 0, decide on 1;
	choose row x in table of megachatter;
	let temp-int be x;
	let temp-reg be whichreg entry;
	while whichreg entry is temp-reg:
		increment temp-int;
		if temp-int > table-list-max:
			say "(Cycling back to the top.)";
			decide on 1;
		choose row temp-int in table of megachatter;
	decide on temp-int;

this is the list next region random text rule: [ lr command in post-game ]
	now lj-cue-prod is false;
	choose row (next-region-start of curlistnum) in table of megachatter;
	region-random-list whichreg entry;
	now curlistnum is (next-region-start of curlistnum);

to decide which number is rand-txt-count of (rg - a region):
	let temp be 0;
	repeat through table of megachatter:
		if there is a whichreg entry and rg is whichreg entry:
			increment temp;
	decide on temp;

to region-random-list (rg - a region):
	let rtc be rand-txt-count of rg;
	if rtc is 0:
		say "There is no random text for [rg].";
		continue the action;
	say "Here [if rtc > 2]are all the random text lists[else if rtc is 2]are both the random text lists[else]is the only random text list[end if] [if rg is Meta Team]for general commands[else]for [rg][end if].";
	let mycount be 0;
	repeat through table of megachatter:
		if there is a whichreg entry and rg is whichreg entry:
			increment mycount;
			let nr be number of rows in mytab entry;
			if there is a lasties entry and number of characters in lasties entry > 2, increment nr; [account for the final message that is outside the table]
			say "[mycount]. [descr entry] ([nr] anagrams)[line break]";
	lj-cue;

lj-cue-prod is a truth state that varies.

to lj-cue:
	if lj-cue-prod is false:
		say "You can type [b]LJ[r]/[b]RJ[r]/[b]JR[r] to jump to the next region's lists.";
		now lj-cue-prod is true;

megsort is a truth state that varies.

table of endgame region abbreviations
this-reg	this-top (topic)	this-pre-rule	this-text
Meta Team	"la/lg"
--	"lc"	--	"There's nothing extra, or extra licentious, behind Store C."
Demo Dome	"ld"	is-demo-visited rule
--	"lb/le/lj/ll/lq/lx/lz"	--	"There was nothing to explore behind [sto-listed]."
--	"lf/li/lm"	--	"[sto-listed] was available to explore in [shuf] but not [this-game]."
Meta Team	"lg"
others	"lh"	is-others-passed rule
--	"lk"	--	"No region was behind Store K[if tokers are off-stage], though you could get a small bit of help from it[end if]."
Ordeal Reload	"lo"
presto	"lp"
stores	"ls"
otters	"lt"
routes	"lu"
troves	"lv"
towers	"lw"
oyster	"ly"

to say sto-listed: say "Store [character number 2 in the player's command in upper case]".

this is the is-demo-visited rule:
	if mrlp is demo dome, continue the action;
	say "I can't show you the list for the final non-puzzle area, yet. You haven't solved it." instead;

to decide whether others-passed:
	if mrlp is demo dome or others is solved, yes;
	no;

this is the is-others-passed rule:
	if others-passed, continue the action;
	say "I can't show you the random text lists for Store H, yet. You haven't solved it." instead;

this is the showing regional lists rule:
	repeat through table of endgame region abbreviations:
		if the player's command matches this-top entry:
			if there is a this-pre-rule entry, abide by the this-pre-rule entry;
			if there is a this-text entry:
				say "[this-text entry][line break]";
			else:
				region-random-list this-reg entry;
			the rule succeeds;
	say "There was a code fall-through here. I should have given a more detailed message, but to specify a region, you need to say [if peek keep is visited]ld/[end if]lg/[if others-passed]lh/[end if]lo/lp/lt/lu/lv/lw/ly. The second letter refers to the store that leads to the region, with O being Ordeal Reload (intro) and G being general stuff e.g. responses to empty commands. [b]LA[r]=all.";

this is the show list of lists rule:
	let myrow be 0;
	let nr be 0;
	say "Here is a list of all the lists of random anagrams. If you did not visit a region, no spoilers are contained here. Pick a number to see which one, or [b]N/[r]/[b]LN[r]/[b]LN[r] lets you see the next. ";
	now listpoke is true;
	ital-say "the distribution of list sizes (numbers or bytes) approximately obeys Benford's and Zipf's Law, which I think is very cool. Both the laws, and that the lists obey them.";
	repeat through table of megachatter:
		increment myrow;
		if there is a mytab entry:
			now nr is number of rows in mytab entry;
		else:
			d "Blank row.";
			now nr is 16; [undos]
		if there is a lasties entry and number of characters in lasties entry > 2, increment nr;
		if whichreg entry is others and not others-passed:
			say "([b]REDACTED[r] post-Elvira stuff behind Store H.)[line break]";
			the rule succeeds;
		if whichreg entry is demo dome and peek keep is unvisited:
			say "[b]REDACTED[r]) [b]DEMO DOME MODE[r] stuff.)[line break]";
		say "[myrow]. [descr entry] ([nr] anagrams)[line break]";
		if the remainder after dividing myrow by 20 is 0:
			abide by the avoid keypress in menu testing rule;
			say "<press Q to quit or another key to see more>";
			let cholet be the chosen letter;
			if cholet is 113 or cholet is 81:
				general-randtext-nag;
				the rule succeeds;
	general-randtext-nag;
	next-list-poke;

randtext-nag-yet is a truth state that varies.

to general-randtext-nag:
	if randtext-nag-yet is false:
		now randtext-nag-yet is true;
		say "By the way, you can list a region's random text with, say, [b]LO[r] for Ordeal Reload, [b]LY[r] for oyster, etc"

listpoke is a truth state that varies.

to next-list-poke:
	if listpoke is false:
		ital-say "you can see the next list if you type [b]N[i], [b]NL[i] or [b]LN[i]";
		now listpoke is true;

this is the show a list by number rule:
	try liliing the number understood instead;

chapter m vs f rule

this is the sort male female out rule:
	say "Here is what the game treats differently: (* = trivial)[line break]";
	repeat through table of sexdif:
		say "[2da][examp entry][line break]";
	if others is solved:
		repeat through table of others sexdif:
			say "[2da][examp entry][line break]";

table of sexdif [tsx]
examp
"[bold type](general)[r] Dropping something."
"Examining yourself."
"[bold type](Ordeal Reload)[r] The note from [gtmn] about the purse, and the purse itself too"
"Ditching Report Porter Perrot."
"Complain about the media to Elmo."
"Many of the books (300+) have alternate authors. Many other random texts adjust for your gender, but books are the main one. Some names are switched, such as Abe/Bea, Dot/Tod, Tio/Toi, Tino/Toni, and Simeon/Simone."
"One page of the dope op-ed is named differently."
"The clues for the ramp are different, but the name Mr. Pa is still cringy either way. I hope it's the right sort of cringy."
"The message for leaving the Means Manse."
"[bold type](stores)[r] The hoarder/acuter curate says something different when you return."
"Double dipping on sorbet in Store B."
"[bold type](routes)[r] Cursing in Cleric Circle."
"Going a direction in Same Mesa."
"[bold type](troves)[r] catching the thief."
"Saying [b]ACRE[r]."
"Reading [b]DEAL[r]."
"When entering the Upscale Capsule."
"[bold type](presto)[r] The plebe stops you or lets you by with different text."
"[bold type](oyster)[r] The win-text for the [b]OYSTER[r] region."
"Anger Range changes to Hero's or Shero Shore."
"Shoer Osher changes gender too."
"Attacking the pikes/carps."
"[bold type](towers)[r] The mardier admirer reacts differently to TALKing/KISSing, etc."
"The diverse deviser reminds you of Boy/Girl Scouts."
"The ego drains drain you a bit more if you're female."
"The Coasting Agnostic has a different name, with a (sic) on making the bot-boat."
"Dr. Yow is male/female, and people's insults for Mr. or Ms. Yow are different."
"Lars Eede/Elsa Erde has the Reed's Ale east of Treading Gradient."
"Luc Sym or Ms. Lucy guards north of the Scope Copse."
"The Hostile-is-He Lot or Lois the Hostile guards south of Actionless Coastlines."
"[bold type](otters)[r] reactions to KISSing, EXAMINEing the [pla-ma], talking/dispelling/attacking or leaving while they're in the Disowned Downside."
"[b]KISS[r]ing Gretta or taking to her with the [pla-ma] around."
"Elvira calls you (Ach,) Mr. Charm or Ms. Arch-Charms."
"[b]KISS[r]ing Elvira or losing to her in battle."[]
"The win text."

table of others sexdif
examp
"[bold type](others)[r] Trying to make [b]GAPERS[r] in Rustic Citrus."
"The win-text for beating [b]OTHERS[r]."
"Lord Al Ollard or Dr. Lola Ollard appears on a droll dollar."
"Red Rat Art Erd or Dr. Tera Darter is the Tarred Trader."

chapter show ranks rule

[note: the show ranks rule is in the common file]

chapter seeding descriptions (hidden)

global-pod-num is a number that varies.

definition: a thing (called th) is current-list:
	if pod-num of th is global-pod-num, yes;
	no;

bold-chosen is a truth state that varies.

this is the show seeds rule:
	now bold-chosen is true;
	now global-pod-num is 1;
	say "Here is a complete list of randomizations with no spoilers. Ones you encountered this play-through are in [b]BOLD[r].";
	say "Here are the pods for Rodney's prosaic picaros:[line break]";
	while number of current-list picaros > 0:
		say "You will see one of pod [global-pod-num] at random: [list of current-list picaros].";
		increment global-pod-num;
	now global-pod-num is 1;
	now in-think is true;
	say "Here are the pods for the parleys splayer players['] pickup lines:[line break]";
	while number of current-list pickup-lines > 0:
		say "You will see one pickup line from pod [global-pod-num] at random: [list of current-list pickup-lines].";
		increment global-pod-num;
	now in-think is false;
	now bold-chosen is false:

before printing the name of a thing (called th) when bold-chosen is true:
	if th is not off-stage, say "[b]".

after printing the name of a thing (called th) when bold-chosen is true:
	if th is not off-stage, say "[r]".

volume mapping

[map tweaks for towers]

index map with Topside Deposit mapped west of Loftier Trefoil.
index map with Rawest Waster Waters mapped east of Actionless Coastlines.
index map with Mislit Limits mapped north of Rawest Waster Waters.
Index map with Arid Den mapped east of Lost Lots.
Index map with Dourest Detours mapped south of Outer Route.

[map tweaks for routes]

index map with Idle Deli mapped north of Salted Deltas.
index map with Adobe Abode mapped north of Idle Deli.
index map with Cleric Circle mapped west of Adobe Abode.
index map with Same Mesa mapped north of Cleric Circle.
index map with Harms Marsh mapped north of Adobe Abode.
index map with Clipper Cripple mapped east of Adobe Abode.
index map with Ripe Pier mapped north of Cripple Clipper.
index map with Sonancy Canyons mapped east of Cripple Clipper.

[map tweaks for others]

index map with Rustic Citrus mapped west of Fringe Finger.
index map with Scape Space mapped west of Cleric Circle.
[index map with stadium mapped north of Scape Space.]

[map tweaks for presto]

index map with Marines Seminar Remains mapped north of Filed Field.
index map with Austerer Treasure mapped south of Saps Pass.

[map tweaks for troves]

index map with Bustle Sublet mapped north of Hacks Shack.
index map with Bustle Sublet mapped west of Loather Rathole.
index map with Loather Rathole mapped west of Upscale Capsule.
index map with Boarded Roadbed mapped north of Bustle Sublet.
index map with Drain Nadir mapped north of Boarded Roadbed.
index map with Boredom Bedroom mapped east of Drain Nadir.
index map with Econ Cone mapped south of Boredom Bedroom.
index map with Browse Bowers mapped east of Boredom Bedroom.

[map tweaks for ordeal reload]

index map with Highest Heights mapped north of Outer Route.
index map with Dusty Study mapped west of Outer Route.
index map with Farming Framing mapped north of Dusty Study.
index map with Gallery mapped west of Farming Framing.
index map with Carven Cavern mapped north of Gallery.

[map tweaks for otters]

index map with Perverse Preserve mapped north of Sonancy Canyons.

[map tweaks for demo dome]

index map with Hows Show mapped west of Gallery.
index map with Intel Inlet mapped west of Hows Show.
index map with Sparse Spares mapped south of Peek Keep.
index map with Neds Dens mapped west of Peek Keep.

[extra weird rule that shouldn't need to be there (I think) but does]

index map with Clangier Clearing mapped west of Shaven Havens.

[map tweaks for stores]

index map with Cruelest Lectures mapped south of Upscale Capsule.
index map with Strip of Profits mapped south of Cruelest Lectures.

[map tweaks for oyster]
[oyster gets screwed in the faithful mapping sweepstakes since it 1) a lot of standalone rooms you can shuffle to any point and 2) still sprawls a bit with the fixed rooms]

index map with Rascal Craals mapped east of Econ Cone.
index map with Hardest Trashed Dearths mapped south of Rancho Archon Anchor.
index map with Anger Range mapped west of Rancho Archon Anchor.
index map with Lean Lane mapped east of Hardest Trashed Dearths.
index map with Posh Hops Shop mapped east of Strip of Profits.
index map with Olde Lode mapped east of Posh Hops Shop.
index map with Disease Seaside mapped north of Olde Lode.
index map with Fighter Freight mapped west of Disease Seaside.
index map with Den Loft mapped north of Horned Hedron.
index map with Plasm Lamps mapped east of Den Loft.
index map with End Den mapped east of Plasm Lamps.
index map with Shuttle Hutlets mapped east of Lapsin Plains.

[meta region tweaks]

index map with Meatier Emerita Emirate mapped south of Evoc Cove.
index map with Adorb Bardo mapped east of Meatier Emerita Emirate.

volume spare ideas

[when play begins:
	let temptext be indexed text;
	repeat with Z running through things:
		if b-text of Z is not "":
			if b is not flippable:
				now b is auxiliary;
			if a-text of Z is "":
				now temptext is "[b-text of Z]";
				replace the text "G" in temptext with "Y";
				replace the text "P" in temptext with "R";
				change b-text of Z to "[temptext]";
				say "[Z]: [b-text of Z] -> [temptext].";]